<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>SQL_Phrase_Index › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./sql_phrase_index.html">SQL Phrase Index</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/SQL_Phrase_Index">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./sql_phrase_index/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./sql_phrase_index/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./sql_phrase_index/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./sql_phrase_index/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./sql_phrase_index/a/backlinks.html">SQL Phrase Index</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
Dieser Artikel ist mit keiner aktuell unterstützten Ubuntu-Version getestet! Bitte diesen Artikel testen und das getestet-Tag entsprechend anpassen.
</p></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./sudo.html">Root-Rechte</a></p></li></ol></div></div><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Konfiguration">Konfiguration
</a><ol class="arabic"><li><a class="crosslink" href="#Konfiguration-einer-Quelle">Konfiguration einer Quelle
</a></li><li><a class="crosslink" href="#Konfiguration-eines-Index">Konfiguration eines Index
</a></li><li><a class="crosslink" href="#Weitere-Konfigurationen">Weitere Konfigurationen
</a></li></ol></li><li><a class="crosslink" href="#Testen-der-Konfiguration">Testen der Konfiguration
</a></li><li><a class="crosslink" href="#Weitere-Moeglichkeiten">Weitere Möglichkeiten
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><a class="external" href="http://sphinxsearch.com/" rel="nofollow">SQL Phrase Index</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> (Abk. Sphinx) ist eine Open Source (GPL2) Volltextsuchmaschine. In der Suchmaschine enthalten sind ein Indexer, ein Suchdaemon und ein Kommandozeilen-Suchtool. Es gibt unter anderem APIs für <a class="internal" href="./perl.html">Perl</a>, <a class="internal" href="./python.html">Python</a>, <a class="internal" href="./php.html">PHP</a> und <a class="internal" href="./ruby.html">Ruby</a>. Auch für <a class="internal" href="./mysql.html">MySQL</a> ist eine Storage Engine (SphinxSE) verfügbar, mit der man die Vorteile einer schnellen Suche mit denen einer MySQL-Tabelle vereinen kann. Seine Hauptvorteile spielt Sphinx bei der Implementierung von eigenen Such-Engines für Programme oder Webapplikationen aus, die große Datenmengen in kurzer Zeit verarbeiten müssen. Dieser Artikel bietet eine Einführung in Sphinx und seine Grundkonfiguration. Der erweiterte Umgang sowie die Verwendung der APIs oder der Storage-Engine wird nicht weiter behandelt.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Folgende Pakete müssen installiert <sup><a href="#source-1">[1]</a></sup> werden:</p><ul><li><p><strong>sphinxsearch</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install sphinxsearch </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install sphinxsearch </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="Konfiguration">Konfiguration<a class="headerlink" href="#Konfiguration">¶</a></h2><p>
Sphinx wird durch die Datei <strong>/etc/sphinxsearch/sphinx.conf</strong> konfiguriert<sup><a href="#source-2">[2]</a></sup><sup><a href="#source-3">[3]</a></sup>. Als Minimum müssen eine Datenquelle und ein Index eingerichtet werden, um die Suchmaschine zu verwenden.</p><div class="section_2"><h3 id="Konfiguration-einer-Quelle">Konfiguration einer Quelle<a class="headerlink" href="#Konfiguration-einer-Quelle">¶</a></h3><p>
Um einen Index anlegen zu können, benötigt Sphinx eine Quelle. In diesem Beispiel wird eine MySQL-Datenbank als Datenquelle verwendet. Die DB-Tabelle enthält Nachrichten für ein bestimmtes Thema und sieht so aus:</p><p>
</p><table style="width: 97%"><tr class="titel"><td colspan="3">News </td></tr><tr class="kopf"><td>Name </td><td> Typ </td><td> Merkmal </td></tr><tr><td> id </td><td> INTEGER </td><td> PRIMARY, AUTO_INCREMENT </td></tr><tr><td> headline </td><td> VARCHAR </td><td> - </td></tr><tr><td> publicationDate </td><td> DATETIME </td><td> - </td></tr><tr><td> text </td><td> VARCHAR </td><td> - </td></tr><tr><td> author </td><td> INTEGER </td><td> FOREIGN KEY </td></tr></table><p>Um einen Index zu erstellen, benötigt Sphinx zwingend einen 32-Bit-Integer-Wert als ID. Dafür prädestiniert ist der Primärschlüssel aus obiger Tabelle. Da Sphinx eine Volltextsuche darstellt, braucht man natürlich auch Textinhalte, die für die Suche indiziert werden sollen. In diesem Falle können die Felder <code class="notranslate">headline</code> und <code class="notranslate">text</code> dafür verwendet werden. Die übrigen Felder werden später sogenannte Attribute, nach denen Sphinx weiter sortieren und gruppieren kann.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>source Quellenname {
    type           = mysql
    sql_host       = localhost
    sql_user       = USERNAME
    sql_pass       = PASSWORD
    sql_db         = DATENBANKNAME
    # sql_port     = 3306

    # Die folgende SQL-Query wird von Sphinx benutzt, um den Index zu erstellen.
    # Hier werden also alle gewünschten Felder angegeben, die in der späteren Suche berücksichtigt
    # werden sollen.
    sql_query      = SELECT id, headline, UNIX_TIMESTAMP(publicationDate), text, author \
                     FROM news

    # Hier werden die sogenannten Attribute definiert. Diese werden nicht mit in die Volltextsuche einbezogen,
    # ermöglichen es aber, weiter nach diesen Feldern zu sortieren (zB. nach Autor)
    sql_attr_uint      = author
    sql_attr_timestamp = publicationDate

    # Diese SQL-Query bestimmt die Ausgabe des Kommandozeilentools zur Suche.
    # $id ist ein Makro und wird durch die IDs ersetzt, die zum Suchergebnis passen.
    sql_query_info    = SELECT headline, publicationDate, text FROM news WHERE id=$id
}
</pre></div>
</td></tr></table></div></div><div class="section_2"><h3 id="Konfiguration-eines-Index">Konfiguration eines Index<a class="headerlink" href="#Konfiguration-eines-Index">¶</a></h3><p>
Hier wird nun der eigentliche Index konfiguriert. Der Index wird auf der Festplatte abgelegt und stellt die Datenbasis der Suche dar. Indiziert werden nur die Felder, die vom Typ her Text enthalten. Alle anderen Attribute können nicht indiziert werden. Je nach Konfiguration werden die Attribute mit dem Index in eine Datei geschrieben oder in einer externen Datei vorgehalten. Der Vorteil der externen Speicherung ist, dass durch Cachen der Attribute im RAM die Suche bei großen Indizes schneller ist.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>index Indexname {
    # Jeder Index benötigt mindestens eine Datenquelle. Werden mehrere Datenquellen angegeben, so werden sie nacheinander indiziert.
    source = Quellenname
    source = weiterer Quellenname

    # Der Index wird an diesem Ort gespeichert werden. Dieser Pfad muss existieren.
    path      = /var/lib/sphinxsearch/data/NewsIndex

    # Die Attribute werden hier extern gespeichert, um die bestmögliche Geschwindigkeit zu erzielen
    docinfo   = extern

    # Hier kann angegeben werden wie lang das Suchwort minimal sein muss.
    min_word_len  = 2

    # Zuletzt noch den Zeichensatz festlegen.
    charset_type  = utf-8
}
</pre></div>
</td></tr></table></div></div><div class="section_2"><h3 id="Weitere-Konfigurationen">Weitere Konfigurationen<a class="headerlink" href="#Weitere-Konfigurationen">¶</a></h3><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Die in der Standardkonfiguration vorhandenen Abschnitte <code class="notranslate">indexer settings</code> und <code class="notranslate">searchd settings</code> sollten Anfänger nicht ändern.
</p></div></div><div class="section_3"><h4 id="Den-Index-anlegen">Den Index anlegen<a class="headerlink" href="#Den-Index-anlegen">¶</a></h4><p>
Die Grundkonfiguration ist nun abgeschlossen. Jetzt kann man mittels des Programmes <code class="notranslate">indexer</code> den Suchindex anlegen<sup><a href="#source-3">[3]</a></sup>.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo indexer --all </pre></div></div><p>Durch diesen Befehl werden nun alle Indizes angelegt. Die Ausgabe könnte in etwa so aussehen:</p><pre class="notranslate">Sphinx 0.9.9-release (r2117)
Copyright (c) 2001-2009, Andrew Aksyonoff

using config file '/etc/sphinxsearch/sphinx.conf'...
indexing index 'news'...
collected 123294 docs, 8.4 MB
sorted 1.1 Mhits, 100.0% done
total 123294 docs, 8439361 bytes
total 3.738 sec, 2257163 bytes/sec, 32975.80 docs/sec
total 2 reads, 0.052 sec, 4780.4 kb/call avg, 26.1 msec/call avg
total 24 writes, 0.077 sec, 969.1 kb/call avg, 3.2 msec/call avg</pre></div><div class="section_3"><h4 id="Der-Search-Daemon-searchd">Der Search-Daemon searchd<a class="headerlink" href="#Der-Search-Daemon-searchd">¶</a></h4><p>
Der Suchdienst ermöglicht es APIs, Sphinx zu benutzen, um die Suche z.B. aus PHP oder Ruby-Skripten zu verwenden. Für einige Sprachen gibt es schon vorgefertigte APIs. Um den Suchdaemon zum Systemstart zu laden, muss die Datei <strong>/etc/default/sphinxsearch</strong> bearbeitet und der Parameter <code class="notranslate">START</code> auf <code class="notranslate">yes</code> gesetzt werden.<sup><a href="#source-3">[3]</a></sup></p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>    # Should sphinxsearch run automatically on startup? (default: no)
    # Before doing this you might want to modify /etc/sphinxsearch/sphinx.conf
    # so that it works for you.
    START=yes
</pre></div>
</td></tr></table></div></div></div></div><div class="section_1"><h2 id="Testen-der-Konfiguration">Testen der Konfiguration<a class="headerlink" href="#Testen-der-Konfiguration">¶</a></h2><p>
Nun ist der Suchindex bereit und man kann mit der Suche beginnen.
</p><div class="bash"><div class="contents"><pre class="notranslate">search Suchbegriff </pre></div></div><p>Bei der Suche nach dem Suchbegriff werden nun alle Ergebnisse so angezeigt, wie sie oben in der Datenquelle durch <code class="notranslate">sql_query_info</code> definiert wurden.</p></div><div class="section_1"><h2 id="Weitere-Moeglichkeiten">Weitere Möglichkeiten<a class="headerlink" href="#Weitere-Moeglichkeiten">¶</a></h2><p>
</p><ul><li><p>Sphinx bietet viele Möglichkeiten, die Suche einzugrenzen und die Ergebnisse zu sortieren und zu gruppieren.</p></li><li><p>Mit der SphinxSE, einer MySQL Storage Engine, lässt sich die Suche auch über MySQL steuern. Dadurch benötigt man für andere Sprachen auch keine eigene API mehr</p></li><li><p>Um die vollen Möglichkeiten von Sphinx auszuschöpfen, empfiehlt es sich, die Dokumentation zu lesen.</p></li></ul><p>
</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/SQL_Phrase_Index">SQL Phrase Index bei Wikipedia</a></p></li><li><p><a class="external" href="http://www.ibm.com/developerworks/library/os-php-sphinxsearch/" rel="nofollow">Sphinx einrichten und eigene PHP Suchengine entwickeln</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://www.howtoforge.com/sphinx-as-mysql-storage-engine-sphinxse" rel="nofollow">MySQL Storage Engine für Sphinx installieren</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./sql_phrase_index/a/revision/938786.html">Diese Revision</a> wurde am 2. Mai 2017 10:04 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./sql_phrase_index.html">SQL Phrase Index</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>