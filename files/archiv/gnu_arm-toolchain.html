<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Archiv/GNU_ARM-Toolchain › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../archiv/gnu_arm-toolchain.html">GNU ARM-Toolchain</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Archiv/GNU_ARM-Toolchain">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../archiv/gnu_arm-toolchain/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../archiv/gnu_arm-toolchain/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../archiv/gnu_arm-toolchain/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../archiv/gnu_arm-toolchain/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../archiv/gnu_arm-toolchain/a/backlinks.html">GNU ARM-Toolchain</a></h1>
<div id="page"><div class="box advanced"><h3 class="box advanced">Artikel für fortgeschrittene Anwender</h3><div class="contents"><p>
Dieser Artikel erfordert mehr Erfahrung im Umgang mit
Linux und ist daher nur für fortgeschrittene Benutzer
gedacht.
</p></div></div><p>
</p><div class="box improvable"><h3 class="box improvable">Archivierte Anleitung</h3><div class="contents"><p>
Dieser Artikel wurde archiviert, da er - oder Teile daraus -
nur noch unter einer älteren Ubuntu-Version nutzbar ist. Diese
Anleitung wird vom Wiki-Team weder auf Richtigkeit überprüft
noch anderweitig gepflegt. Zusätzlich wurde der Artikel für
weitere Änderungen gesperrt.
</p></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../packprogramme.html">Archive entpacken</a></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="../programme_starten.html">Ein Programm starten</a></p></li><li><p><a class="crosslink anchor" href="#source-6" id="source-6"></a> <a class="internal" href="../programme_kompilieren.html">Pakete aus dem Quellcode erstellen</a></p></li><li><p><a class="crosslink anchor" href="#source-7" id="source-7"></a> <a class="internal" href="../paketinstallation_deb.html">Ein einzelnes Paket installieren</a></p></li></ol></div></div><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Methode-1-Manuelle-Installation">Methode 1 - Manuelle Installation
</a><ol class="arabic"><li><a class="crosslink" href="#Vorbereitungen">Vorbereitungen
</a></li><li><a class="crosslink" href="#Binutils">Binutils
</a></li><li><a class="crosslink" href="#GCC-Teil-1">GCC - Teil 1
</a></li><li><a class="crosslink" href="#Newlib">Newlib
</a></li><li><a class="crosslink" href="#GCC-Teil-2">GCC - Teil 2
</a></li><li><a class="crosslink" href="#GDB-und-Insight">GDB und Insight
</a></li></ol></li><li><a class="crosslink" href="#Methode-2-Installation-per-Skript">Methode 2 - Installation per Skript
</a><ol class="arabic"><li><a class="crosslink" href="#Vorbereitungen-2">Vorbereitungen
</a></li><li><a class="crosslink" href="#Kompilieren">Kompilieren
</a></li><li><a class="crosslink" href="#Feinarbeiten">Feinarbeiten
</a></li></ol></li><li><a class="crosslink" href="#Methode-3-Installation-per-PPA">Methode 3 - Installation per PPA
</a></li><li><a class="crosslink" href="#Bekannte-Probleme">Bekannte Probleme
</a><ol class="arabic"><li><a class="crosslink" href="#x86-64-Host-Architektur-und-Insight">x86_64 Host-Architektur und Insight
</a></li><li><a class="crosslink" href="#ARM-Simulator-als-Target">ARM-Simulator als Target
</a></li></ol></li><li><a class="crosslink" href="#Methode-4-Nachbau-der-Yagarto-Toolchain">Methode 4 - Nachbau der Yagarto-Toolchain
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>Die GNU ARM-Toolchain ist eine Sammlung von Cross-Compilern und Debuggern zum Übersetzen von Programmen für <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/ARM-Architektur">ARM</a>-basierte <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Mikrocontroller">Mikrocontroller</a>. Sie wird gewöhnlich unter Zuhilfenahme der <a class="external" href="http://www.cygwin.com" rel="nofollow">Cygwin-Umgebung</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> auf Windows-Systemen verwendet, wofür es beispielsweise bei <a class="external" href="http://www.gnuarm.com" rel="nofollow">GNUarm.com</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> eine fertig konfigurierte Installationsroutine gibt. Da alle verwendeten Werkzeuge jedoch aus der Unix/Linux-Welt stammen, können diese ebenso gut unter Ubuntu und anderen Linux-Distributionen verwendet werden. Hierfür ist leider etwas mehr Zeit und Aufwand erforderlich.</p><div class="section_1"><h2 id="Methode-1-Manuelle-Installation">Methode 1 - Manuelle Installation<a class="headerlink" href="#Methode-1-Manuelle-Installation">¶</a></h2><p>
Der Erfolg der Installation hängt unter Umständen essentiell von den einzelnen Versionen ab. Diese Anleitung wurde mit den folgenden Versionen getestet: <strong>GCC 4.3.2</strong>, <strong>Binutils 2.19</strong>, <strong>Newlib 1.16</strong>, <strong>GDB 6.8</strong>, <strong>Insight 6.8</strong>. Für andere Programm-Versionen ist die Vorgehensweise im Prinzip die gleiche, es kann aber zu Fehlern kommen.</p><div class="section_2"><h3 id="Vorbereitungen">Vorbereitungen<a class="headerlink" href="#Vorbereitungen">¶</a></h3><p>
Zum Kompilieren der Toolchain müssen die üblichen Pakete mit Compilern, Entwicklungswerkzeugen sowie die Quelltexte einiger Bibliotheken installiert <sup><a href="#source-1">[1]</a></sup> werden.</p><ul><li><p><strong>build-essential</strong></p></li><li><p><strong>libgmp3-dev</strong></p></li><li><p><strong>libmpfr-dev</strong></p></li><li><p><strong>libx11-6</strong></p></li><li><p><strong>libx11-dev</strong></p></li><li><p><strong>texinfo</strong></p></li><li><p><strong>flex</strong></p></li><li><p><strong>bison</strong></p></li><li><p><strong>libmpc-dev</strong></p></li><li><p><strong>libncurses5</strong></p></li><li><p><strong>libncurses5-dbg</strong></p></li><li><p><strong>libncurses5-dev</strong></p></li><li><p><strong>libncursesw5</strong></p></li><li><p><strong>libncursesw5-dbg</strong></p></li><li><p><strong>libncursesw5-dev</strong></p></li><li><p><strong>zlibc</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install build-essential libgmp3-dev libmpfr-dev libx11-6 libx11-dev texinfo flex bison libmpc-dev libncurses5 libncurses5-dbg libncurses5-dev libncursesw5 libncursesw5-dbg libncursesw5-dev zlibc </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install build-essential libgmp3-dev libmpfr-dev libx11-6 libx11-dev texinfo flex bison libmpc-dev libncurses5 libncurses5-dbg libncurses5-dev libncursesw5 libncursesw5-dbg libncursesw5-dev zlibc </pre></div></div><p>
</p></div></div><p>Für Ubuntu 8.04 muss möglicherweise das Paket <strong>libncurses4</strong> noch installiert werden. Im Test war es installiert, die Funktion ohne dieses Paket wurde nicht getestet. Ab Ubuntu 8.10 gibt es das Paket nicht mehr.</p><ul><li><p><strong>libncurses4</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install libncurses4 </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install libncurses4 </pre></div></div><p>
</p></div></div><p>Die Toolchain besteht aus dem Compiler <a class="external" href="http://gcc.gnu.org" rel="nofollow">GCC</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>, den <a class="external" href="http://www.gnu.org/software/binutils/" rel="nofollow">GNU Binutils</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>, der Standardbibliothek <a class="external" href="http://sourceware.org/newlib" rel="nofollow">Newlib</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> sowie dem Debugger <a class="external" href="http://sourceware.org/gdb/" rel="nofollow">GDB</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> und dessen grafischer Oberfläche <a class="external" href="http://sourceware.org/insight/" rel="nofollow">Insight</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>. Alle Werkzeuge sind als Quelltext-Pakete verfügbar und können von den angegebenen Seiten oder von der <a class="external" href="http://www.gnuarm.com" rel="nofollow">GNUARM-Homepage</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> heruntergeladen werden. Die vorliegende Anleitung bezieht sich auf die Original-Pakete von den entsprechenden Projektseiten.</p><p>Nach dem Herunterladen der Archive diese entpacken <sup><a href="#source-4">[4]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">tar -xvf gcc-4.3.2.tar.bz2
tar -xvf binutils-2.19.tar.bz2
tar -xvf newlib-1.16.0.tar.gz 
tar -xvf gdb-6.8.tar.bz2
tar -xvf insight-6.8.tar.bz2 </pre></div></div><p>Anschließend Scratch-Verzeichnisse für den Build anlegen:</p><div class="bash"><div class="contents"><pre class="notranslate">mkdir build-gcc build-binutils build-newlib build-gdb build-insight </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die Installation der Toolchain erfolgt in das Verzeichnis <strong>/opt/gnuarm/</strong>. Sofern die Toolchain an anderer Stelle abgelegt werden soll, muss dieses Verzeichnis in allen folgenden Schritten entsprechend abgeändert werden.
</p></div></div></div><div class="section_2"><h3 id="Binutils">Binutils<a class="headerlink" href="#Binutils">¶</a></h3><p>
Zuerst werden die Binutils kompiliert. Um die Binutils compilieren zu können, sollte man die Binutils werden mit der Option <em>--disable-werror</em> konfiguriert. Diese Option verhindert, dass bestimmte Compiler-Warnungen als Fehler behandelt werden.</p><div class="section_3"><h4 id="Verhindern-dass-Warnungen-als-Fehler-behandelt-werden">Verhindern, dass Warnungen als Fehler behandelt werden<a class="headerlink" href="#Verhindern-dass-Warnungen-als-Fehler-behandelt-werden">¶</a></h4><p>
Binutils compilieren mit folgenden Befehlen:</p><div class="bash"><div class="contents"><pre class="notranslate">cd build-binutils
../binutils-2.19/configure --target=arm-elf --prefix=/opt/gnuarm --enable-interwork --enable-multilib --enable-target-optspace --with-float=soft --disable-werror
make all </pre></div></div><p>Weiter für beide Alternativen:</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Möglicherweise bricht der Befehl <code class="notranslate">make all</code> mit einer Fehlermeldung ab, die besagt, dass das Kommando "makeinfo" nicht gefunden wurde. In diesem Fall muss die Datei <strong>Makefile</strong> von Hand editiert werden und die Zeile <code class="notranslate">MAKEINFO = /irgend/ein/pfad/missing makeinfo</code> durch ein simples <code class="notranslate">MAKEINFO = makeinfo</code> ersetzt werden. Hierfür muss aber manuell sichergestellt werden, dass das Programm <code class="notranslate">makeinfo - enthalten im Paket '''texinfo''' - auch installiert ist!
|}}</code></p></div></div><p>Nun können die fertigen Binaries installiert werden. Dies muss mit Root-Rechten erfolgen:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo make install </pre></div></div><p>Wenn die Binutils installiert wurden, müssen sämtliche Dateien im Verzeichnis <strong>/opt/gnuarm/bin</strong> nach <strong>/usr/local/bin</strong> verlinkt werden. Alternativ können Experten auch das Verzeichnis <strong>/opt/gnuarm/bin</strong> zu ihrer PATH-Variablen hinzufügen.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ln -s /opt/gnuarm/bin/* /usr/local/bin </pre></div></div></div></div><div class="section_2"><h3 id="GCC-Teil-1">GCC - Teil 1<a class="headerlink" href="#GCC-Teil-1">¶</a></h3><p>
Das Bauen des GCC-Cross-Compilers erfordert etwas mehr Aufwand. Zunächst wird ein einfacher Compiler ohne Standardbibliotheken erstellt. Mit diesem wird anschließend Newlib übersetzt. Erst dann kann GCC vollständig installiert werden.</p><p><strong>Wichtig:</strong> Um später auch Projekte mit gemischtem Thumb-Code und ARM-Code übersetzen zu können ("Thumb-Interworking"), muss der GCC-Quellcode gepatcht werden - vgl. Menüpunkt <a class="external" href="http://www.gnuarm.com/support.html" rel="nofollow">Support</a> auf <a class="external" href="http://www.gnuarm.com" rel="nofollow">gnuarm.com</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>. Hierfür die Datei <a class="external" href="http://www.gnuarm.com/t-arm-elf" rel="nofollow">t-arm-elf</a> <img alt="{dl}" src="../_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/> von <a class="external" href="http://www.gnuarm.com" rel="nofollow">gnuarm.com</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> herunterladen und die vorhandene Datei im Quelltext-Verzeichnis <strong>gcc-4.3.2/gcc/config/arm/</strong> mit der neu heruntergeladenen ersetzen. Dies funktionierte im Test für GCC 4.2.0 und GCC 4.3.2 problemlos, für andere Versionen muss besagte Datei gegebenenfalls manuell angepasst werden. Wer sichergehen will, sollte die Inhalte evtl. kurz von Hand abgleichen.</p><p>Zunächst also eine GCC-Version ohne Standardbibliotheken erstellen:</p><div class="bash"><div class="contents"><pre class="notranslate">cd ../build-gcc
../gcc-4.3.2/configure --target=arm-elf --prefix=/opt/gnuarm --enable-interwork --enable-multilib --enable-languages="c,c++" --enable-target-optspace --with-float=soft --with-newlib --with-headers=../newlib-1.16.0/newlib/libc/include/ --disable-nls 
sudo make all-gcc install-gcc </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Bei GCC kann es unter Umständen in Verbindung mit Newlib zu einer Fehlermeldung <code class="notranslate">configure: error: Link tests are not allowed after GCC_NO_EXECUTABLES</code> beim Konfigurieren der zlib kommen. Dagegen helfen unter Umständen die Optionen <code class="notranslate">--with-system-zlib</code> und <code class="notranslate">--disable-shared</code> bei <code class="notranslate">configure</code>. Getestet mit GCC 4.5.1.
</p></div></div><p>Möglicherweise tritt auch hier der Makeinfo-Bug auf - vgl. Hinweis im Abschnitt <a class="crosslink" href="#Binutils">Binutils</a>.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Eine Anmerkungen hierzu: Wer lieber deutschsprachige GCC-Fehlermeldungen mag, kann die Option <code class="notranslate">--disable-nls</code> auch weglassen. Sollte man allerdings die Entwicklungsumgebung <a class="internal" href="../eclipse.html">Eclipse</a> verwenden wollen, muss GCC englischsprachige Fehlermeldungen erzeugen. Ansonsten kommt der Parser von Eclipse nicht mehr mit der Ausgabe von GCC klar.
</p></div></div><p>Zum Schluss wieder, wie bereits im Abschnitt <a class="crosslink" href="#Binutils">Binutils</a> beschrieben, die neu hinzugekommenen Dateien im Verzeichnis <strong>/opt/gnuarm/bin</strong> nach <strong>/usr/local/bin</strong> verlinken, sofern man das Verzeichnis <strong>/opt/gnuarm/bin</strong> nicht bereits der PATH-Variablen hinzugefügt hat:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ln -s /opt/gnuarm/bin/* /usr/local/bin </pre></div></div></div><div class="section_2"><h3 id="Newlib">Newlib<a class="headerlink" href="#Newlib">¶</a></h3><p>
Mit dem neuen GCC-Cross-Compiler aus dem vorigen Abschnitt kann nun Newlib übersetzt werden. Zunächst mit dem üblichen Spiel:</p><div class="bash"><div class="contents"><pre class="notranslate">cd ../build-newlib
../newlib-1.16.0/configure --target=arm-elf --prefix=/opt/gnuarm --enable-interwork --enable-multilib --enable-target-optspace --with-float=soft </pre></div></div><p>
'
Sofern die Reentrancy-Unterstützung von Newlib benötigt wird, muss nun die Datei <strong>Makefile</strong> im Scratch-Verzeichnis manuell editiert und der Option <code class="notranslate">CFLAGS_FOR_TARGET</code> im Abschnitt <code class="notranslate">all:</code> die Option <code class="notranslate">-DREENTRANT_SYSCALLS_PROVIDED</code> hinzugefügt werden. Die gesamte Zeile sollte nun ungefähr so aussehen:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="c"> # Build libraries optimizing for space, not speed</span>
     <span class="nv">CFLAGS_FOR_TARGET</span> <span class="o">=</span> -g -Os -DREENTRANT_SYSCALLS_PROVIDED 
</pre></div>
</td></tr></table></div><p>Zum Thema Reentrancy vgl. <a class="external" href="http://neptune.billgatliff.com/newlib.html" rel="nofollow">diesen Artikel von Bill Gatliff</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p><p>Weiter dann auf die übliche Weise:</p><div class="bash"><div class="contents"><pre class="notranslate">make all
sudo make install </pre></div></div><p>Auch hier kann theoretisch der Makeinfo-Bug auftreten (vgl. Hinweis im Abschnitt <a class="crosslink" href="#Binutils">Binutils</a>).</p></div><div class="section_2"><h3 id="GCC-Teil-2">GCC - Teil 2<a class="headerlink" href="#GCC-Teil-2">¶</a></h3><p>
Wenn Newlib fertig installiert ist, kann der GCC-Cross-Compiler fertiggestellt werden:</p><div class="bash"><div class="contents"><pre class="notranslate">cd ../build-gcc
sudo make all install </pre></div></div></div><div class="section_2"><h3 id="GDB-und-Insight">GDB und Insight<a class="headerlink" href="#GDB-und-Insight">¶</a></h3><p>
Es fehlen noch GDB und Insight. Eigentlich keine große Sache mehr. Wenn allgemein ein Fehler à la <em>"cc1: warnings being treated as errors"</em> auftreten, ist beim Konfigurieren die Option <code class="notranslate">--disable-werror</code> notwendig.</p><div class="bash"><div class="contents"><pre class="notranslate">cd ../build-gdb
../gdb-6.8/configure --target=arm-elf --prefix=/opt/gnuarm --enable-interwork --enable-multilib --enable-target-optspace --disable-werror
make all
sudo make install </pre></div></div><p>Zum Schluss noch Insight:</p><div class="bash"><div class="contents"><pre class="notranslate">cd ../build-insight
../insight-6.8/configure --target=arm-elf --prefix=/opt/gnuarm --enable-interwork --enable-multilib --enable-target-optspace --disable-werror
make all
sudo make install </pre></div></div><p>Auf den Makeinfo-Bug wurde bereits mehrfach hingewiesen (vgl. Hinweis im Abschnitt <a class="crosslink" href="#Binutils">Binutils</a>).</p><p>Zum Schluss nicht vergessen, wieder die neu hinzugekommenen Binaries zu verlinken:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ln -s /opt/gnuarm/bin/* /usr/local/bin </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Möglicherweise müssen für Insight noch bestimmte <a class="internal" href="../tcl.html">Tcl/Tk</a>-Pakete nachinstalliert werden. Für Insight ist das nicht getestet worden, weil es aber zur offiziellen Toolchain gehört, ist es der Vollständigkeit halber hier mit aufgelistet.
</p></div></div></div></div><div class="section_1"><h2 id="Methode-2-Installation-per-Skript">Methode 2 - Installation per Skript<a class="headerlink" href="#Methode-2-Installation-per-Skript">¶</a></h2><p>
Waipot Ngamsaad hat im Forum von <a class="external" href="http://www.mcuprogramming.com" rel="nofollow">mcuprogramming.com</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>, einem Blog über Microcontroller, ein Shell-Skript <a class="external" href="http://forum.mcuprogramming.com/arm/gnu-arm-toolchain-installer" rel="nofollow">veröffentlicht</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>, dass die Erstellung der GNU ARM-Toolchain weitestgehend automatisiert. Das Skript wurde mittlerweile unter der GPL v3 lizenziert und ist bei Google Code frei <a class="interwiki interwiki-googlecode" href="https://code.google.com/p/hobbycode/source/browse/trunk/gnu-arm-installer">verfügbar</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Wer Reentrancy-Unterstützung oder Thumb-Interworking benötigt, der sollte die manuelle Methode bevorzugen, da Änderungen am Quellcode gemacht werden müssen. 
</p></div></div><div class="section_2"><h3 id="Vorbereitungen-2">Vorbereitungen<a class="headerlink" href="#Vorbereitungen-2">¶</a></h3><p>
</p><div class="section_3"><h4 id="Download-des-Skriptes">Download des Skriptes<a class="headerlink" href="#Download-des-Skriptes">¶</a></h4><p>
Um das Skript aus dem SVN-Repository von Google Code herunterzuladen, muss man zunächst <a class="internal" href="../archiv/subversion.html">Subversion</a> installieren <sup><a href="#source-1">[1]</a></sup>:</p><ul><li><p><strong>subversion</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install subversion </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install subversion </pre></div></div><p>
</p></div></div><p>Das Auschecken aus dem Repository erfolgt nun über folgenden Terminal-Befehl <sup><a href="#source-2">[2]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">svn checkout http://hobbycode.googlecode.com/svn/trunk/gnu-arm-installer gnu-arm-installer </pre></div></div></div><div class="section_3"><h4 id="Download-der-GNU-ARM-Quellen">Download der GNU ARM Quellen<a class="headerlink" href="#Download-der-GNU-ARM-Quellen">¶</a></h4><p>
Die aktuell vom Skript für den Bau der Toolchain verwendeten Quellen findet man inkl. Download-Links in der <a class="interwiki interwiki-googlecode" href="https://code.google.com/p/hobbycode/source/browse/trunk/gnu-arm-installer/ReadMe.txt">ReadMe.txt</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> des Skript-Paketes. Diese muss man in das Verzeichnis <em>src</em> abspeichern, nicht aber entpacken.</p><p>Alternativ kann man auch, falls bei <a class="external" href="http://gnuarm.com/files.html" rel="nofollow">gnuarm.com</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> verfügbar, eine neuere Toolchain ausprobieren. Dabei muss man allerdings die Variablen <code class="notranslate">GCC_SRC</code>, <code class="notranslate">GCC_VERSION</code>, <code class="notranslate">BINUTILS_SRC=</code>, <code class="notranslate">BINUTILS_VERSION</code>, <code class="notranslate">NEWLIB_SRC</code>, <code class="notranslate">NEWLIB_VERSION</code>, <code class="notranslate">INSIGHT_SRC</code> und <code class="notranslate">INSIGHT_VERSION</code> in der Datei <strong>gnu-arm-installer.sh</strong> entsprechend anpassen <sup><a href="#source-3">[3]</a></sup>.</p></div><div class="section_3"><h4 id="Installation-der-Abhaengigkeiten">Installation der Abhängigkeiten<a class="headerlink" href="#Installation-der-Abhaengigkeiten">¶</a></h4><p>
Bevor man mit dem Kompilieren beginnen kann, müssen die <a class="crosslink" href="#Vorbereitungen">oben angegebenen</a> nötigen Abhängigkeiten installiert <sup><a href="#source-1">[1]</a></sup> werden.</p></div></div><div class="section_2"><h3 id="Kompilieren">Kompilieren<a class="headerlink" href="#Kompilieren">¶</a></h3><p>
Das Kompilieren der Toolchain ist nun keine große Kunst mehr, nimmt aber je nach Rechnerleistung ein bis zwei Stunden Zeit in Anspruch. Durch folgenden Terminal-Befehl <sup><a href="#source-2">[2]</a></sup> wird der Prozess angestoßen:</p><div class="bash"><div class="contents"><pre class="notranslate">sh gnu-arm-installer.sh </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Während des Kompilierens sollte man es vermeiden, die PATH-Variable zu ändern, da das Skript diese, während es seine Aufgabe erledigt, temporär verändert.
</p></div></div><p>Die fertige Toolchain befindet sich dann im Verzeichnis <strong>install</strong>.
</p></div><div class="section_2"><h3 id="Feinarbeiten">Feinarbeiten<a class="headerlink" href="#Feinarbeiten">¶</a></h3><p>
</p><div class="section_3"><h4 id="Toolchain-verschieben">Toolchain verschieben<a class="headerlink" href="#Toolchain-verschieben">¶</a></h4><p>
Wem eine Toolchain im Heimat-Verzeichnis zuwider ist, der kann die erstellte Toolchain z.B. nach <strong>/opt</strong> verschieben. Dazu öffnet man ein Terminal <sup><a href="#source-2">[2]</a></sup> und wendet folgenden Befehl im Verzeichnis des Skriptes an:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo cp -R install /opt/gnuarm </pre></div></div></div><div class="section_3"><h4 id="PATH-Variable-anpassen">PATH-Variable anpassen<a class="headerlink" href="#PATH-Variable-anpassen">¶</a></h4><p>
Damit man von jedem beliebigen Verzeichnis auf die Toolchain zugreifen kann, muss die PATH-Variable entsprechend angepasst werden. Temporär geschieht das durch den im Terminal <sup><a href="#source-2">[2]</a></sup> ausgeführten Befehl:</p><div class="bash"><div class="contents"><pre class="notranslate">export PATH=$PATH:/opt/gnuarm/bin/ </pre></div></div><p>Dabei muss es sich immer um einen absoluten Pfad zu den Toolchain-Binärdateien handeln. Relative Pfadangaben würden nicht akzeptiert.</p><p>Damit die Änderung der PATH-Variable auch nach einem Neustart durchgeführt wird, fügt man den obigen Befehl mit Hilfe eines Editors <sup><a href="#source-3">[3]</a></sup> in die Datei <strong>~/.bashrc</strong> ein.</p></div></div></div><div class="section_1"><h2 id="Methode-3-Installation-per-PPA">Methode 3 - Installation per PPA<a class="headerlink" href="#Methode-3-Installation-per-PPA">¶</a></h2><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Das PPA installiert arm-none-eabi-gcc, nicht arm-elf-gcc wie im Rest des Tutorials. Das Target arm-elf wird ab GCC 4.8 nicht mehr unterstützt.
In der Bedienung unterscheiden sich arm-none-eabi-gcc und arm-elf-gcc nicht.
</p></div></div><p>Auf Launchpad pflegen ARM-Mitarbeiter ein <a class="external" href="https://launchpad.net/~terry.guo/+archive/gcc-arm-embedded" rel="nofollow">PPA</a>, dass regelmäßig aktualisiert wird.</p><p>Zur Installation wird erst das Repository zum System hinzugefügt:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo add-apt-repository ppa:terry.guo/gcc-arm-embedded
sudo apt-get update </pre></div></div><p>Anschließend kann die Toolchain installiert werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install gcc-arm-none-eabi </pre></div></div></div><div class="section_1"><h2 id="Bekannte-Probleme">Bekannte Probleme<a class="headerlink" href="#Bekannte-Probleme">¶</a></h2><p>
</p><div class="section_2"><h3 id="x86-64-Host-Architektur-und-Insight">x86_64 Host-Architektur und Insight<a class="headerlink" href="#x86-64-Host-Architektur-und-Insight">¶</a></h3><p>
Insight lässt sich unter einem x86_64 Ubuntu zwar für <code class="notranslate">arm-elf</code> erfolgreich kompilieren, funktioniert allerdings nur kaum bis gar nicht. Die Ursache des Problems ist bisher nicht bekannt. Der eigentliche Debugger <strong>gdb</strong> funktioniert dagegen. Anwender haben berichtet, dass eine für ein x86-Host-System kompilierte Toolchain auch unter einem x86_64-Host-System funktioniert. Zum Erstellen einer solchen Toolchain kann man sich einer virtuellen 32-Bit-Umgebung, wie z.B. <a class="internal" href="../virtualbox.html">VirtualBox</a>, bedienen.</p></div><div class="section_2"><h3 id="ARM-Simulator-als-Target">ARM-Simulator als Target<a class="headerlink" href="#ARM-Simulator-als-Target">¶</a></h3><p>
<a class="external" href="http://triggeredupdates.wordpress.com/2008/11/10/gnuarm-toolchain-unter-ubuntu-810/#comment-9" rel="nofollow">Berichten</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> zufolge kann es beim Debuggen mit Insight zu einer Fehlermeldung kommen, die man nicht vollends lesen kann, wenn man als Target <em>"Simulator"</em> ausgewählt hat. Abhilfe schafft das Abwählen von <em>"Download Program"</em> in den Target-Einstellungen. Ebenso sollte man dort bei <em>"Command to issue after attaching:"</em> den Befehl <code class="notranslate">load</code> eintragen.</p></div></div><div class="section_1"><h2 id="Methode-4-Nachbau-der-Yagarto-Toolchain">Methode 4 - Nachbau der Yagarto-Toolchain<a class="headerlink" href="#Methode-4-Nachbau-der-Yagarto-Toolchain">¶</a></h2><p>
Eine der verbreiteten Toolchains aus der Windows-Welt ist diejenige von <a class="external" href="http://www.yagarto.org" rel="nofollow">Yagarto</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>. Wenn ein Projekt sowohl auf Linux als auch auf Windows-Systemen übersetzt werden soll, bietet es sich an, diese Toolchain für Ubuntu nachzubauen, um eine Toolchain zu haben, die auf beiden Systemen weitestgehend identisch ist.</p><p>Aus den entsprechenden <a class="external" href="http://yagarto.org/source/index.html" rel="nofollow">Build-Skripten und Patches</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> lassen sich leicht die dazu notwendigen Schritte extrahieren.</p><p>Wenn es beim Bauen der Toolchain zu Compiler-Fehlern kommt, sind möglicherweise für die Konfiguration zusätzliche Optionen notwendig oder es müssen Bibliotheken nachinstalliert werden. So musste im Test auf Precise beispielsweise GCC 4.7.2 mit der Option <code class="notranslate">--with-system-zlib</code> konfiguriert werden. Für Binutils und Newlib waren keine Änderungen gegenüber den Build-Skripten notwendig.</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://www.gnuarm.com" rel="nofollow">gnuarm.com</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - ARM-Toolchain für Windows mit Hinweisen zum selbst Compilieren</p></li><li><p><a class="external" href="http://www.alphapogo.de" rel="nofollow">alphapogo.de</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - ein weiteres etwas älteres Tutorial auf Deutsch</p></li><li><p><a class="external" href="http://www.yagarto.org" rel="nofollow">Yagarto</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - verbreitetes "Yet another GNU ARM" Toolchain</p></li><li><p><a class="external" href="http://triggeredupdates.wordpress.com/2008/11/10/gnuarm-toolchain-unter-ubuntu-810/" rel="nofollow">GNUArm Toolchain unter Ubuntu 8.10</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Deutsches Tutorial zur Skript-Methode</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../archiv/gnu_arm-toolchain/a/revision/835158.html">Diese Revision</a> wurde am 6. September 2015 12:45 von <a href="https://ubuntuusers.de/user/aasche/">aasche</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../archiv.html">Archiv</a></li>
<li><a href="../archiv/gnu_arm-toolchain.html">GNU ARM-Toolchain</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>