<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Archiv/HAL/Eingabegeräte › ubuntuusers statisches Wiki</title>
<link href="../../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../../archiv/hal/eingabegeräte.html">Eingabegeräte</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Archiv/HAL/Eingabegeräte">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../../wiki/index.html">Index</a></li>
<li><a href="../../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../../wiki.html">Übersicht</a></li>
<li><a href="../../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../../kategorien.html">Kategorie</a></li>
<li><a href="../../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../../howto.html">Howto anlegen</a></li>
<li><a href="../../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../../baustelle.html">Baustellen</a></li>
<li><a href="../../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../../archiv/hal/eingabegeräte/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../../archiv/hal/eingabegeräte/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../../archiv/hal/eingabegeräte/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../../archiv/hal/eingabegeräte/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../../archiv/hal/eingabegeräte/a/backlinks.html">Eingabegeräte</a></h1>
<div id="page"><div class="box improvable"><h3 class="box improvable">Archivierte Anleitung</h3><div class="contents"><p>
Dieser Artikel wurde archiviert, da er - oder Teile daraus -
nur noch unter einer älteren Ubuntu-Version nutzbar ist. Diese
Anleitung wird vom Wiki-Team weder auf Richtigkeit überprüft
noch anderweitig gepflegt. Zusätzlich wurde der Artikel für
weitere Änderungen gesperrt.
</p></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Ab <a class="internal" href="../../lucid.html">Ubuntu 10.04</a> ist HAL komplett aus Ubuntu entfernt worden. Dieser Artikel ist nur noch für die KDE-Versionen (<a class="internal" href="../../kubuntu.html">Kubuntu</a> bis einschließlich 10.10) gültig!</p><p><a class="internal" href="../../xserver.html">XServer</a>-Einstellungen für Eingabegeräte können entweder über <a class="internal" href="../../udev.html">udev</a>-Regeln oder über die neue <a class="internal" href="../../xorg.conf.d.html">xorg.conf.d</a>-Methode angepasst werden.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../../editor.html">Einen Editor öffnen</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Einrichten">Einrichten
</a></li><li><a class="crosslink" href="#Syntax">Syntax
</a></li><li><a class="crosslink" href="#Haeufige-Anpassungen">Häufige Anpassungen
</a></li><li><a class="crosslink" href="#Beispiel">Beispiel
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>Der <a class="internal" href="../../xserver.html">XServer</a> beherrscht natives Plug&amp;Play über <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/HAL_(Software)">HAL</a>. Eingabegeräte können im laufenden Betrieb hinzugesteckt und voll benutzt werden, ohne dass Anpassungen an der <strong><a class="internal" href="../../xorg.conf.html">xorg.conf</a></strong> nötig wären oder die grafische Oberfläche neu gestartet werden müsste. Dieser Artikel beschreibt, wie man in den Konfigurationsprozess eingreifen und fein abstimmen kann.</p><p>Das größte Manko der bisherigen Konfiguration von Eingabegeräten über die <strong>xorg.conf</strong> ist, dass diese statisch an eine Gerätedatei "<strong>/dev/input/...</strong>" gebunden werden, die sich aber ändern kann. Seit Ubuntu 8.04 sind diese Einträge nun obsolet; sie werden auch standardmäßig nicht mehr verwendet. Der XServer kann beim Start Gerätetypen erkennen und passende Treiber laden. In diese Automatismen kann man über eine sogenannte "HAL Policy" eingreifen, unter anderem um z.B. den leistungsfähigeren <a class="internal" href="../../evdev.html">evdev</a>-Treiber standardmäßig zu verwenden.</p><p>Die Einrichtung ist dabei denkbar simpel und beschränkt sich auf das Kopieren einer bereits vorhandenen Datei an die richtige Stelle. Weiterhin werden im Folgenden der Aufbau dieser Datei und einige sinnvolle Modifikationen beschrieben. Im Endeffekt kann man alle für Eingabegeräte spezifische Einträge aus der <strong>xorg.conf</strong> entfernen. Man wird belohnt mit vollständigem Plug&amp;Play für alle Eingabegeräte und läuft zudem nicht mehr Gefahr, dass aufgrund falscher Einträge in der <strong>xorg.conf</strong> der XServer nicht mehr startet.</p><div class="section_1"><h2 id="Einrichten">Einrichten<a class="headerlink" href="#Einrichten">¶</a></h2><p>
</p><div class="section_2"><h3 id="Ubuntu-8-04">Ubuntu 8.04<a class="headerlink" href="#Ubuntu-8-04">¶</a></h3><p>
Das Einrichten der XServer-Konfiguration beschränkt sich im Wesentlichen auf das Anlegen der Datei <strong>/etc/hal/fdi/policy/10-x11-input.fdi</strong> und einem Neustart von HAL und des XServers. Dazu müssen folgende Schritte ausgeführt werden:
</p><ol class="arabic"><li><p>Da jedes System bereits eine Beispiel-Konfigurationsdatei hat, ist es das Einfachste, diese an die richtige Stelle zu kopieren. Dies erreicht man mit dem Konsolenbefehl <sup><a href="#source-1">[1]</a></sup>: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo cp /usr/share/doc/hal/examples/10-x11-input.fdi /etc/hal/fdi/policy/10-x11-input.fdi </pre></div></div></li><li><p>Falls man Änderungen an der Datei vornehmen möchte, öffnet man sie einfach in einem Texteditor mit Root-Rechten<sup><a href="#source-2">[2]</a></sup>. In sehr vielen Fällen sind keine weiteren Anpassungen nötig, da deren Hauptaufgabe – das Laden des evdev-Treibers für eingesteckte Tastaturen und Mäuse – bereits die Beispielkonfiguration erledigt. Informationen zu Syntax und sinnvollen Änderungen sind in den folgenden Abschnitten beschrieben.</p></li><li><p>Nun startet man HAL und den XServer mittels der Befehle<sup><a href="#source-1">[1]</a></sup></p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/hal restart
sudo /etc/init.d/gdm restart </pre></div></div><p> neu. Falls man nicht GNOME verwendet, kann man anstelle des zweiten Befehls auch einfach 
<span class="key">Strg</span>  + 
<span class="key">Alt</span>  + 
<span class="key">⌫</span>  drücken. In allen Fällen sollten vorher alle offenen Dokumente gespeichert werden.</p></li></ol><p>
</p></div></div><div class="section_1"><h2 id="Syntax">Syntax<a class="headerlink" href="#Syntax">¶</a></h2><p>
Falls man <strong>/etc/hal/fdi/policy/10-x11-input.fdi</strong> wie oben beschrieben angelegt hat, erhält man eine Datei mit folgendem Inhalt. 
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="cp">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;</span>
<span class="nt">&lt;deviceinfo</span> <span class="na">version=</span><span class="s">"0.2"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;device&gt;</span>
    <span class="c">&lt;!-- FIXME: Support tablets too. --&gt;</span>
    <span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"info.capabilities"</span> <span class="na">contains=</span><span class="s">"input.mouse"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_driver"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>mouse<span class="nt">&lt;/merge&gt;</span>
      <span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"/org/freedesktop/Hal/devices/computer:system.kernel.name"</span>
             <span class="na">string=</span><span class="s">"Linux"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_driver"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>evdev<span class="nt">&lt;/merge&gt;</span>
      <span class="nt">&lt;/match&gt;</span>
    <span class="nt">&lt;/match&gt;</span>

    <span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"info.capabilities"</span> <span class="na">contains=</span><span class="s">"input.keys"</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- If we're using Linux, we use evdev by default (falling back to</span>
<span class="c">           keyboard otherwise). --&gt;</span>
      <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_driver"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>keyboard<span class="nt">&lt;/merge&gt;</span>
      <span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"/org/freedesktop/Hal/devices/computer:system.kernel.name"</span>
             <span class="na">string=</span><span class="s">"Linux"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_driver"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>evdev<span class="nt">&lt;/merge&gt;</span>
      <span class="nt">&lt;/match&gt;</span>
    <span class="nt">&lt;/match&gt;</span>
  <span class="nt">&lt;/device&gt;</span>
<span class="nt">&lt;/deviceinfo&gt;</span>
</pre></div>
</td></tr></table></div><p>Es handelt sich um eine <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Extensible_Markup_Language">XML</a>-Datei. Eine gültige HAL-Datei muss dabei folgende Rahmenstruktur aufweisen:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;deviceinfo</span> <span class="na">version=</span><span class="s">"0.2"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;device&gt;</span>
    ...
  <span class="nt">&lt;/device&gt;</span>
<span class="nt">&lt;/deviceinfo&gt;</span>
</pre></div>
</td></tr></table></div><p>Spezifische Geräte werden mit einem regelbasierten Ansatz konfiguriert:
</p><ul><li><p><code class="notranslate">&lt;match&gt;</code>: Falls ein Gerät eine bestimmte Eigenschaft hat, werden alle eingeschlossenen Regeln für dieses Gerät ausgeführt.</p></li><li><p><code class="notranslate">&lt;merge&gt;</code>: Für das aktuelle Gerät wird die angegebene Eigenschaft auf den eingeschlossenen Wert gesetzt. Sollte diese Eigenschaft bereits vorhanden sein, so wird ihr Wert überschrieben.</p></li></ul><p>Die zu testenden/setzenden Eigenschaften werden durch das Attribut "<code class="notranslate">key</code>" spezifiziert. In Falle von <code class="notranslate">&lt;match&gt;</code> muss dabei noch das Testkriterium angegeben werden, und für <code class="notranslate">&lt;merge&gt;</code> der Typ (Zeichenkette, Zahl, etc.) der zu setzenden Eigenschaft.</p><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Es gibt noch eine ganze Reihe von weiteren gültigen Tags, die aber üblicherweise nicht gebraucht werden. Beispiele hierzu findet man zur Genüge in den weiteren HAL-Dateien in den Unterverzeichnissen von <strong>/usr/share/hal/fdi/policy/</strong>.
</p></div></div><div class="section_2"><h3 id="Finden-des-richtigen-Eingabegeraets">Finden des richtigen Eingabegeräts<a class="headerlink" href="#Finden-des-richtigen-Eingabegeraets">¶</a></h3><p>
Bereits gesetzte Eigenschaften für eingesteckte Eingabegeräte können über den Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">hal-find-by-capability --capability input | xargs -I{} hal-device {} </pre></div></div><p>in Erfahrung gebracht werden. Man erhält eine lange Liste mit Einträgen der Form </p><pre class="notranslate">udi = '/org/freedesktop/Hal/devices/platform_i8042_i8042_KBD_port_logicaldev_input'
  input.originating_device = '/org/freedesktop/Hal/devices/platform_i8042_i8042_KBD_port'  (string)
  info.category = 'input'  (string)
  input.device = '/dev/input/kbd-internal'  (string)
  linux.sysfs_path = '/sys/devices/platform/i8042/serio0/input/input1/event1'  (string)
  input.product = 'AT Translated Set 2 keyboard'  (string)
  info.parent = '/org/freedesktop/Hal/devices/platform_i8042_i8042_KBD_port'  (string)
  info.product = 'AT Translated Set 2 keyboard'  (string)
  info.addons.singleton = { 'hald-addon-input' } (string list)
  info.udi = '/org/freedesktop/Hal/devices/platform_i8042_i8042_KBD_port_logicaldev_input'  (string)
  info.capabilities = { 'input', 'input.keyboard', 'input.keypad', 'input.keys', 'button' } (string list)
  ...</pre><p>Jeder durch Leerzeilen getrennte Block beschreibt ein Gerät; obiger Befehl beschränkt die Liste dabei auf Eingabegeräte. Ein Block fängt mit dem "Unique Device Identifier" (udi) an, unter dem HAL das Gerät kennt. Alle folgenden Einträge sind Eigenschaften, in der Form</p><pre class="notranslate"> [Eigenschaft] = [Wert] (typ-name)</pre><p>In der Konfigurationsdatei fügt man Einträge der Form</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"[Eigenschaft]"</span> <span class="na">typ-name=</span><span class="s">"[Wert]"</span><span class="nt">&gt;</span>[Weitere Regeln für dieses Gerät]<span class="nt">&lt;/match&gt;</span>
</pre></div>
</td></tr></table></div><p>hinzu, um für <em>jedes</em> Gerät mit der positiv getesteten Eigenschaft die weiteren Regeln auszuführen.</p><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Es gibt einige komplizierte Konstrukte, mit denen man z.B. auf Eigenschaften des Geräte-Vaters testen kann, oder nur Teile eines Wertes abfragt. In der ausführlichen Konfigurationsdatei weiter unten finden sich einige Beispiele dazu.
</p></div></div></div><div class="section_2"><h3 id="Geraetetreiber-und-deren-Optionen">Gerätetreiber und deren Optionen<a class="headerlink" href="#Geraetetreiber-und-deren-Optionen">¶</a></h3><p>
Zur Konfiguration eines Eingabegerätes für den XServer ist nur eine einzelne Regel <em>Pflicht</em>, nämlich die, die den Treiber festlegt. Diese sieht immer so aus:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_driver"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>[Treiber]<span class="nt">&lt;/merge&gt;</span>
</pre></div>
</td></tr></table></div><p>Dabei ist <code class="notranslate">[Treiber]</code> durch den entsprechenden Treibernamen zu ersetzen. Für Mäuse und Tastaturen kann hier im Allgemeinen "<code class="notranslate">evdev</code>" verwendet werden. Sollte ein Treiber nicht festgelegt werden, ignoriert X alles Folgende.</p><p>Eine Treiber-Option wird durch die Regel</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_options.[xorg_option]"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>[xorg_option_wert]<span class="nt">&lt;/merge&gt;</span>
</pre></div>
</td></tr></table></div><p>gesetzt. Als mögliche Optionen für den Treiber sind alle Optionen zulässig, die in den "InputDevice"-Abschnitten der <strong><a class="internal" href="../../xorg.conf.html">xorg.conf</a></strong> Verwendung fanden. "<code class="notranslate">[xorg_option]</code>" ist dabei durch deren Namen und "<code class="notranslate">[xorg_option_wert]</code>" durch deren Wert zu ersetzen. Die <em>type</em>-Angabe ist dabei immer ein <em>string</em>, auch wenn Werte wie "on" oder "true" gesetzt werden.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Nur die <strong>xorg.conf</strong>-Einträge in den "InputDevice"-Abschnitten, die mit <code class="notranslate">Option</code> beginnen, können übertragen werden. Weitere Einträge wie z.B. <code class="notranslate">Identifier</code> oder <code class="notranslate">Device</code> (<em>auch:</em> <code class="notranslate">Option "Device"</code>) sind nicht nötig, sie sind entweder überflüssig oder werden durch HAL automatisch vorgenommen.
</p></div></div><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Optionen und deren Bedeutung kann man auf den <a class="internal" href="../../man.html">man</a>-Pages des entsprechenden Treibers nachschlagen.
</p></div></div></div></div><div class="section_1"><h2 id="Haeufige-Anpassungen">Häufige Anpassungen<a class="headerlink" href="#Haeufige-Anpassungen">¶</a></h2><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Damit Änderungen wirksam werden, müssen nach dem Speichern HAL und X wie im Abschnitt <a class="internal missing" href="../../hal/eingabegeräte.html#Einrichten">Einrichten</a> beschrieben neu gestartet werden.
</p></div></div><p>
</p><div class="section_2"><h3 id="Allgemeine-Anmerkungen">Allgemeine Anmerkungen<a class="headerlink" href="#Allgemeine-Anmerkungen">¶</a></h3><p>
</p><ul><li><p>In dem Verzeichnis <strong>/etc/hal/fdi/policy</strong> können beliebig viele <strong>.fdi</strong>-Dateien liegen; sie werden in lexikalischer Reihenfolge abgearbeitet. Am einfachsten ist es, eine "Universaldatei" mit dem Namen <strong>10-x11-input.fdi</strong> wie oben beschrieben anzulegen, die den kleinsten gemeinsamen Nenner bildet. Falls man für z.B. die eigene Maus eines bestimmten Herstellers einige Anpassungen benötigt, legt man eine weitere Datei an – z.B. mit dem Namen <strong>20-x11-hersteller.fdi</strong>. Wenn die Universaldatei bereits den Treiber festlegt, ist es zudem nicht nötig, dass die Dateien mit den weiteren Anpassungen für ein Gerät dies erneut tun. Dies dient primär der Übersichtlichkeit, man kann theoretisch auch alle Anpassungen in einer einzigen Datei machen. </p></li><li><p>Alle über HAL-Dateien konfigurierte Geräte benötigen <em>keinen</em> "InputDevice"-Eintrag in der <strong><a class="internal" href="../../xorg.conf.html">xorg.conf</a></strong> mehr. Man kann entsprechende Einträge auskommentieren. Alle eventuellen Einstellungen, die man vorher für dieses Gerät in der <strong>xorg.conf</strong> vorgenommen hat, können wie im Abschnitt Syntax beschrieben übernommen werden.</p></li><li><p>Möchte man dagegen die Kontrolle über ein Eingabegerät wieder an die <strong>xorg.conf</strong> deligieren, so kann die entsprechende HAL-Konfiguration "entschärft" werden, indem auch hier über eine fdi-Datei die entsprechende Treiberinformation ausgeblendet wird: </p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"info.capabilities"</span> <span class="na">contains=</span><span class="s">"[Geräteklasse]"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_driver"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;&lt;/merge&gt;</span>
<span class="nt">&lt;/match&gt;</span>
</pre></div>
</td></tr></table></div><p> Zu beachten ist, dass der Datenteil des merge-Tags leer ist.</p></li><li><p>HAL dient nicht nur der Konfiguration von Eingabegeräten. Da man für den XServer aber nur Eingabegeräte konfigurieren möchte, sollte man seine Anpassungen immer über das folgende Konstrukt kapseln: </p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"info.capabilities"</span> <span class="na">contains=</span><span class="s">"[Geräteklasse]"</span><span class="nt">&gt;</span>
 ...
<span class="nt">&lt;/match&gt;</span>
</pre></div>
</td></tr></table></div><p> Dabei ist "[Geräteklasse]" durch "input.mouse", "input.touchpad", etc. (s.u.) zu ersetzen. Ansonsten könnte man versehentlich auch für Nicht-Eingabegeräte einen X11-Treiber konfigurieren – z.B. wenn man nur nach etwas wie "Hersteller=Logitech" für seine Maus testet, aber man auch eine Webcam dieses Herstellers hat.</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Einstellen-der-Tastaturbelegung">Einstellen der Tastaturbelegung<a class="headerlink" href="#Einstellen-der-Tastaturbelegung">¶</a></h3><p>
Die korrekte Einstellung der Tastaturbelegung dürfte die am häufigsten gemachte Anpassung sein, da man über das Standard-Beispiel eine US-Belegung erhält. Dies ist allerdings nur für den Anmeldebildschirm relevant. Danach übernimmt der benutzte Desktop (GNOME, KDE, etc.) die Benutzer-spezifischen Einstellungen, die entsprechende Einträge aus <strong>xorg.conf</strong> oder <strong>10-x11-input.fdi</strong> überschreiben.</p><p>Die Einstellung der Tastaturbelegung und ihrer Varianten erfolgt gemäß Dokumentation über die Eigenschaften</p><pre class="notranslate">"input.x11_options.XkbRules"
"input.x11_options.XkbModel"
"input.x11_options.XkbLayout"
"input.x11_options.XkbVariant"
"input.x11_options.XkbOptions"</pre><p> die die gleiche Bedeutung wie ihre Pendants in der <strong>xorg.conf</strong> haben. Leider muss man zumindest unter <a class="internal" href="../../hardy_heron.html">Hardy Heron</a> an dieser Stelle noch auf die veraltete Syntax zurückgreifen, die folgende Eigenschaften erwartet</p><pre class="notranslate">"input.xkb.rules"
"input.xkb.model"
"input.xkb.layout"
"input.xkb.variant"
"input.xkb.options"</pre><p> Es ist allerdings problemlos möglich beide Eigenschaften zu setzen.</p><p>Ein fertiges Beispiel für Tastaturen mit deutscher Belegung: </p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="c">&lt;!-- Keyboards (and everything else with buttons) --&gt;</span>
<span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"info.capabilities"</span> <span class="na">contains=</span><span class="s">"input.keys"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_driver"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>evdev<span class="nt">&lt;/merge&gt;</span>
 <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.xkb.model"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>evdev<span class="nt">&lt;/merge&gt;</span>
 <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.xkb.layout"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>de<span class="nt">&lt;/merge&gt;</span>
<span class="nt">&lt;/match&gt;</span>
</pre></div>
</td></tr></table></div><p> Eine alternative Möglichkeit mit dem gleichen Effekt ist im Beispiel am Artikelende zu finden.</p></div><div class="section_2"><h3 id="Mausachsen-invertieren">Mausachsen invertieren<a class="headerlink" href="#Mausachsen-invertieren">¶</a></h3><p>
Mit diesen zusätzlichen Optionen kann man die Mausachsen invertieren:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>     <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_options.InvertY"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>true<span class="nt">&lt;/merge&gt;</span>
      <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_options.InvertX"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>true<span class="nt">&lt;/merge&gt;</span>
</pre></div>
</td></tr></table></div><p>In der <strong>/etc/hal/fdi/policy/10-x11-input.fdi</strong> trägt man es dann folgt ein für die Maus:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>    <span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"info.capabilities"</span> <span class="na">contains=</span><span class="s">"input.mouse"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"/org/freedesktop/Hal/devices/computer:system.kernel.name"</span>
             <span class="na">string=</span><span class="s">"Linux"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_driver"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>evdev<span class="nt">&lt;/merge&gt;</span>
     <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_options.InvertY"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>true<span class="nt">&lt;/merge&gt;</span>
      <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_options.InvertX"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>true<span class="nt">&lt;/merge&gt;</span>
           <span class="nt">&lt;/match&gt;</span>
    <span class="nt">&lt;/match&gt;</span>
        <span class="nt">&lt;/match&gt;</span>
</pre></div>
</td></tr></table></div></div><div class="section_2"><h3 id="Hinzufuegen-von-Touchpads">Hinzufügen von Touchpads<a class="headerlink" href="#Hinzufuegen-von-Touchpads">¶</a></h3><p>
Touchpads sind dadurch gekennzeichnet, dass sie sich unter der Eigenschaft "<code class="notranslate">info.capabilities</code>" mit "<code class="notranslate">input.touchpad</code>" melden. Für Touchpads existiert ein eigener <a class="internal" href="../../touchpad.html">Eintrag</a>.</p></div><div class="section_2"><h3 id="Hinzufuegen-von-Grafiktabletts">Hinzufügen von Grafiktabletts<a class="headerlink" href="#Hinzufuegen-von-Grafiktabletts">¶</a></h3><p>
Grafiktabletts melden sich ebenfalls unter der Eigenschaft "<code class="notranslate">info.capabilities</code>" mit "<code class="notranslate">input.touchpad</code>", aber es erscheinen noch weitere Einträge, so kann sich ein Grafiktablett zusätzlich mit "<code class="notranslate">input.mouse</code>" melden. Der folgende Code-Block ist ein Beispiel, das wahrscheinlich mit der Mehrheit der Grafiktabletts funktionieren wird; er sollte jedoch nach dem Code-Block des Touchpads eingetragen werden, um Konflikte zu vermeiden. </p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"info.capabilities"</span> <span class="na">contains=</span><span class="s">"input.touchpad"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"info.capabilities"</span> <span class="na">contains=</span><span class="s">"input.mouse"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_driver"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>wacom<span class="nt">&lt;/merge&gt;</span>
  <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_options.Type"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>stylus<span class="nt">&lt;/merge&gt;</span>
  <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_options.Mode"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>absolute<span class="nt">&lt;/merge&gt;</span>
 <span class="nt">&lt;/match&gt;</span>
<span class="nt">&lt;/match&gt;</span>
</pre></div>
</td></tr></table></div></div></div><div class="section_1"><h2 id="Beispiel">Beispiel<a class="headerlink" href="#Beispiel">¶</a></h2><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Da aufgrund des regelbasierten Ansatzes nur Eingabegeräte konfiguriert werden, die auch tatsächlich vorhanden sind, kann folgende Beispieldatei ohne Bedenken auch als Ausgangsdatei für das eigene System verwendet werden.
</p></div></div><p>Untenstehend eine Konfigurationsdatei, die die anfängliche Beispieldatei um die Benutzung einer deutschen Tastaturbelegung, Korrektur der Mausrad-Kipprichtung von einigen Logitech Funkmäusen und Laden des "<code class="notranslate">synaptics</code>"-Treibers für entsprechende Touchpads nachrüstet. </p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;deviceinfo</span> <span class="na">version=</span><span class="s">"0.2"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;device&gt;</span>
    <span class="c">&lt;!-- FIXME: Support tablets too. --&gt;</span>

    <span class="c">&lt;!-- Touchpads --&gt;</span>
    <span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"info.capabilities"</span> <span class="na">contains=</span><span class="s">"input.touchpad"</span><span class="nt">&gt;</span>

      <span class="c">&lt;!-- Synaptic devices --&gt;</span>
      <span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"input.product"</span> <span class="na">string=</span><span class="s">"SynPS/2 Synaptics TouchPad"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_driver"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>synaptics<span class="nt">&lt;/merge&gt;</span>
        <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_options.SHMConfig"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>on<span class="nt">&lt;/merge&gt;</span>
      <span class="nt">&lt;/match&gt;</span>
    <span class="nt">&lt;/match&gt;</span>


    <span class="c">&lt;!-- Mice --&gt;</span>
    <span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"info.capabilities"</span> <span class="na">contains=</span><span class="s">"input.mouse"</span><span class="nt">&gt;</span>

      <span class="c">&lt;!-- Set driver to "evdev" if on Linux, otherwise use "mouse" --&gt;</span>
      <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_driver"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>mouse<span class="nt">&lt;/merge&gt;</span>
      <span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"/org/freedesktop/Hal/devices/computer:system.kernel.name"</span>
             <span class="na">string=</span><span class="s">"Linux"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_driver"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>evdev<span class="nt">&lt;/merge&gt;</span>
      <span class="nt">&lt;/match&gt;</span>

      <span class="c">&lt;!-- Logitech devices --&gt;</span>
      <span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"@input.originating_device:usb.vendor_id"</span> <span class="na">int=</span><span class="s">"0x46d"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- MX Revolution (and others) --&gt;</span>
        <span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"@input.originating_device:usb.product_id"</span> <span class="na">int_outof=</span><span class="s">"0xc50e;0xc518;0xc51a"</span><span class="nt">&gt;</span>
          <span class="c">&lt;!-- Fix tilt wheel directions --&gt;</span>
          <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_options.RelHWHEELOptions"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>invert<span class="nt">&lt;/merge&gt;</span>
        <span class="nt">&lt;/match&gt;</span>
      <span class="nt">&lt;/match&gt;</span>
    <span class="nt">&lt;/match&gt;</span>


    <span class="c">&lt;!-- Keyboards (and everything else with buttons) --&gt;</span>
    <span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"info.capabilities"</span> <span class="na">contains=</span><span class="s">"input.keys"</span><span class="nt">&gt;</span>

      <span class="c">&lt;!-- Set driver to "evdev" if on Linux, otherwise use "keyboard" --&gt;</span>
      <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_driver"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>keyboard<span class="nt">&lt;/merge&gt;</span>
      <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_options.XkbModel"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>pc105<span class="nt">&lt;/merge&gt;</span>
      <span class="nt">&lt;match</span> <span class="na">key=</span><span class="s">"/org/freedesktop/Hal/devices/computer:system.kernel.name"</span>
             <span class="na">string=</span><span class="s">"Linux"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_driver"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>evdev<span class="nt">&lt;/merge&gt;</span>
        <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_options.XkbModel"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>evdev<span class="nt">&lt;/merge&gt;</span>
      <span class="nt">&lt;/match&gt;</span>

      <span class="c">&lt;!-- Choose layout --&gt;</span>
      <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.x11_options.XkbLayout"</span> <span class="na">type=</span><span class="s">"string"</span><span class="nt">&gt;</span>de<span class="nt">&lt;/merge&gt;</span>

      <span class="c">&lt;!-- Deprecated names for options (but needed in Hardy?) --&gt;</span>
      <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.xkb.model"</span> <span class="na">type=</span><span class="s">"copy_property"</span><span class="nt">&gt;</span>input.x11_options.XkbModel<span class="nt">&lt;/merge&gt;</span>
      <span class="nt">&lt;merge</span> <span class="na">key=</span><span class="s">"input.xkb.layout"</span> <span class="na">type=</span><span class="s">"copy_property"</span><span class="nt">&gt;</span>input.x11_options.XkbLayout<span class="nt">&lt;/merge&gt;</span>
    <span class="nt">&lt;/match&gt;</span>

  <span class="nt">&lt;/device&gt;</span>
<span class="nt">&lt;/deviceinfo&gt;</span>
</pre></div>
</td></tr></table></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="interwiki interwiki-ubuntu" href="https://wiki.ubuntu.com/X/Config/Input%20Configuring%20Input%20Devices">Eintrag</a> zum Einrichten von Eingabegeräten im englischen Ubuntu-Wiki</p></li><li><p><a class="external" href="http://cgit.freedesktop.org/xorg/xserver/tree/config/x11-input.fdi" rel="nofollow">Allgemeine Ausführung</a> <img alt="{en}" src="../../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://howflow.com/tricks/migration_der_input_peripherie_von_xorg_conf_zu_hal" rel="nofollow">Weiteres Beispiel</a> <img alt="{de}" src="../../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../../archiv/hal/eingabegeräte/a/revision/615122.html">Diese Revision</a> wurde am 9. Juni 2013 16:55 von <a href="https://ubuntuusers.de/user/frustschieber/">frustschieber</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../../startseite.html">Wiki</a></li>
<li><a href="../../archiv.html">Archiv</a></li>
<li><a href="../../archiv/hal.html">HAL</a></li>
<li><a href="../../archiv/hal/eingabegeräte.html">Eingabegeräte</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>