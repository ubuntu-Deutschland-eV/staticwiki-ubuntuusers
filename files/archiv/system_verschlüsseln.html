<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Archiv/System_verschlüsseln › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../archiv/system_verschlüsseln.html">System verschlüsseln</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Archiv/System_verschlüsseln">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../archiv/system_verschlüsseln/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../archiv/system_verschlüsseln/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../archiv/system_verschlüsseln/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../archiv/system_verschlüsseln/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../archiv/system_verschlüsseln/a/backlinks.html">System verschlüsseln</a></h1>
<div id="page"><div class="box improvable"><h3 class="box improvable">Archivierte Anleitung</h3><div class="contents"><p>
Dieser Artikel wurde archiviert, da er - oder Teile daraus -
nur noch unter einer älteren Ubuntu-Version nutzbar ist. Diese
Anleitung wird vom Wiki-Team weder auf Richtigkeit überprüft
noch anderweitig gepflegt. Zusätzlich wurde der Artikel für
weitere Änderungen gesperrt.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../partitionierung.html">Festplatten in Partitionen einteilen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../luks.html">Verschlüsselte Partitionen mit LUKS erstellen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../paketquellen_freischalten.html">Bearbeiten von Paketquellen</a> </p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-6" id="source-6"></a> <a class="internal" href="../editor.html">Einen Editor öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-7" id="source-7"></a> <a class="internal" href="../home_umziehen.html">Home umziehen</a></p></li><li><p><a class="crosslink anchor" href="#source-8" id="source-8"></a> <a class="internal" href="../ubuntu_installation.html">Ubuntu installieren</a></p></li></ol></div></div><div class="box advanced"><h3 class="box advanced">Artikel für fortgeschrittene Anwender</h3><div class="contents"><p>
Dieser Artikel erfordert mehr Erfahrung im Umgang mit
Linux und ist daher nur für fortgeschrittene Benutzer
gedacht.
</p></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>
Ohne ein sicheres Kennwort nutzt die stärkste Verschlüsselung nicht! Wie man Passwörter am besten wählt, steht hier: <a class="internal" href="../sicherheits_1x1.html">Sicherheits 1x1</a></p></div></div><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Einleitung">Einleitung
</a></li><li><a class="crosslink" href="#Vorbereiten-des-Systems">Vorbereiten des Systems
</a><ol class="arabic"><li><a class="crosslink" href="#Partitionierung">Partitionierung
</a></li><li><a class="crosslink" href="#Software-installieren-und-benoetigte-Kernelmodule-laden">Software installieren und benötigte Kern...</a><ol class="arabic"><li><a class="crosslink" href="#Vor-Jaunty">Vor Jaunty:
</a></li></ol></li><li><a class="crosslink" href="#Einhaengepunkte-erstellen-und-belegen">Einhängepunkte erstellen und belegen
</a></li><li><a class="crosslink" href="#boot-verschieben">/boot verschieben
</a></li></ol></li><li><a class="crosslink" href="#Verschluesselung-der-Partitionen">Verschlüsselung der Partitionen
</a><ol class="arabic"><li><a class="crosslink" href="#Root-Partition-Verschluesseln">Root-Partition Verschlüsseln
</a><ol class="arabic"><li><a class="crosslink" href="#Existierende-Daten-sichern">Existierende Daten sichern
</a></li><li><a class="crosslink" href="#Crypt-Device-erstellen">Crypt Device erstellen
</a></li><li><a class="crosslink" href="#Crypt-Device-formatieren-und-Daten-zuruecksichern">Crypt Device formatieren und Daten zur...</a></li></ol></li></ol></li><li><a class="crosslink" href="#System-zum-Booten-vorbereiten">System zum Booten vorbereiten
</a><ol class="arabic"><li><a class="crosslink" href="#In-das-Festplattensystem-wechseln-und-Software-installieren">In das Festplattensystem wechseln und So...</a></li><li><a class="crosslink" href="#etc-initramfs-tools-modules-editieren">/etc/initramfs-tools/modules editieren
</a><ol class="arabic"><li><a class="crosslink" href="#Vor-Jaunty-2">Vor Jaunty:
</a></li></ol></li><li><a class="crosslink" href="#etc-fstab-editieren">/etc/fstab editieren
</a></li><li><a class="crosslink" href="#etc-crypttab-editieren">/etc/crypttab editieren
</a></li><li><a class="crosslink" href="#boot-grub-menu-lst-editieren">/boot/grub/menu.lst editieren
</a></li><li><a class="crosslink" href="#nderungen-bernehmen-und-chroot-Umgebung-verlassen">Änderungen Übernehmen und chroot-Umgebun...</a></li></ol></li><li><a class="crosslink" href="#Auslagerungsspeicher-verschluesseln">Auslagerungsspeicher verschlüsseln
</a><ol class="arabic"><li><a class="crosslink" href="#Einleitung-2">Einleitung
</a></li><li><a class="crosslink" href="#Verschluesseltes-Device-erstellen">Verschlüsseltes Device erstellen
</a><ol class="arabic"><li><a class="crosslink" href="#Ab-Jaunty">Ab Jaunty
</a></li></ol></li><li><a class="crosslink" href="#Konfigurationsdateien-anpassen">Konfigurationsdateien anpassen
</a></li></ol></li><li><a class="crosslink" href="#Home-verschluesseln-optional">Home verschlüsseln (optional)
</a><ol class="arabic"><li><a class="crosslink" href="#Partition-verschluesseln">Partition verschlüsseln
</a><ol class="arabic"><li><a class="crosslink" href="#Existierende-Daten-sichern-2">Existierende Daten sichern
</a></li><li><a class="crosslink" href="#Crypt-Device-erstellen-2">Crypt-Device erstellen
</a></li><li><a class="crosslink" href="#Crypt-Device-formatieren-und-Daten-zuruecksichern-2">Crypt Device formatieren und Daten zur...</a></li></ol></li><li><a class="crosslink" href="#System-vorbereiten">System vorbereiten
</a><ol class="arabic"><li><a class="crosslink" href="#etc-fstab-editieren-2">/etc/fstab/editieren
</a></li><li><a class="crosslink" href="#etc-crypttab-editieren-2">/etc/crypttab editieren
</a></li></ol></li></ol></li><li><a class="crosslink" href="#Neues-System-installieren">Neues System installieren
</a></li><li><a class="crosslink" href="#System-wiederherstellen">System wiederherstellen
</a><ol class="arabic"><li><a class="crosslink" href="#Live-System-vorbereiten">Live-System vorbereiten
</a><ol class="arabic"><li><a class="crosslink" href="#Vor-Jaunty-3">Vor Jaunty
</a></li></ol></li><li><a class="crosslink" href="#Einhaengepunkte-erstellen-und-belegen-2">Einhängepunkte erstellen und belegen
</a></li><li><a class="crosslink" href="#Daten-kopieren">Daten kopieren
</a></li><li><a class="crosslink" href="#Konfigurationsdateien-anpassen-2">Konfigurationsdateien anpassen
</a></li><li><a class="crosslink" href="#System-neustarten">System neustarten
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><div class="section_1"><h2 id="Einleitung">Einleitung<a class="headerlink" href="#Einleitung">¶</a></h2><p>
Mit dieser Anleitung lässt sich das Betriebssystem bis auf die <strong>/boot</strong> Partition, die nur den Kernel und Bootloader enthält, mittels <a class="internal" href="../luks.html">LUKS</a> komplett verschlüsseln. Da hier die Partitionierung der Festplatten verändert wird, ist ein vorheriges Backup des Systems unbedingt erforderlich!</p><p>Die Anleitung geht von einer Standard-Installation von Ubuntu aus. Insbesondere beudtet dies, dass /home nicht auf einer eigenen Partition liegt. Falls eine getrennte home-Partition existiert muss zusätzlich der Abschnitt <a class="crosslink" href="#Home-verschluesseln-optional">Home verschlüsseln</a> beachtet werden. Im Hauptartikel befinden sich zusätzliche Verweise zu den jeweils zusätzlich notwendigen Schritten in diesem Abschnitt für den Fall einer eigenen home-Partition.</p><p>Falls kein bestehendes System verschlüsselt, sondern eine neue Installation mittels <a class="internal" href="../luks.html">LUKS</a>-Verschlüsselung durchgeführt werden soll, ist zusätzlich der Abschnitt <a class="crosslink" href="#Neues-System-installieren">Neues System installieren</a> zu beachten.</p></div><div class="section_1"><h2 id="Vorbereiten-des-Systems">Vorbereiten des Systems<a class="headerlink" href="#Vorbereiten-des-Systems">¶</a></h2><p>
</p><div class="section_2"><h3 id="Partitionierung">Partitionierung<a class="headerlink" href="#Partitionierung">¶</a></h3><p>
Bei einer Standard-Installation von Ubuntu werden lediglich zwei Partitionen angelegt: eine Partition für den Swap-Speicher, und eine Partition für das gesamte Root-Dateisystem. Da die Ver- und Entschlüsselung vom Kernel durchgeführt wird, kann das Kernel-Abbild selbst nicht verschlüsselt werden und muss beim Booten unverschlüsselt vorliegen. Um dies zu ermöglichen wird das Verzeichnis /boot, dass den Kernel und den Bootloader enthält, auf einen eigene Partition verschoben, die als einnzige unverschlüsselt bleibt.</p><p>Es werden seperate Partition vorausgesetzt für die Ordner /boot, das Wurzelverzeichnis / und den swap Speicher. Es ist auch generell sinnvoll /home auf eine eigene Partition auszulagern, jedoch ist das zur Verschlüsselung kein Muss. Das Verschieben von /home auf eine eigene Partition wird im Artikel <a class="internal" href="../home_umziehen.html">Home umziehen</a> beschrieben.
 Die folgende Anleitung wird von folgenden Partitionen und ihren Bezeichnungen ausgehen:</p><p>* /dev/sda1 (ext3)
</p><ul><li><p>Boot-Partition</p></li><li><p>Einhängepunkt /boot</p></li><li><p>Größe: mindestens 100 MB</p></li></ul><p>* /dev/sda2 (swap)
</p><ul><li><p>Swap-Partition</p></li><li><p>Einhängepunkt keiner</p></li><li><p>Größe: mindestens die Größe des Arbeitsspeichers für Suspend-to-Disk-Fähigkeit, üblicherweise 2 GB</p></li></ul><p>* /dev/sda3 (ext3)
</p><ul><li><p>Root-Partition</p></li><li><p>Einhängepunkt /</p></li><li><p>Größe: der verfügbarer Rest, mindestens 10 GB</p></li></ul><p>
Auf dem eigenen Rechner kann die Anzahl der Partitionen, deren Größe, und deren Bezeichnung im /dev/ Ordner natürlich stark abweichen. Wichtig ist hier nur, dass für die /boot Partition eine seperate Partition besteht.</p><p>Zusätzlich muss ein Speichermedium vorhanden sein, dass genügend freien Platz bietet, um temporär eine Kopie des Wurzelverzeichnis aufzunhemen. Dies kann neben einer Partition auf der internen Festplatte auch ein USB-Stick, eine externe Festplatte, eine Netzwerk-Freigabe oder ähnliches sein. Wichtig ist, dass auf dieses Speichermedium schreibend zugegriffen werden kann. Im Folgenden wird davon ausgegangen, dass sich eine den Anforderungen entsprechende Partition unter <em>/dev/sdb1</em> befindet.</p></div><div class="section_2"><h3 id="Software-installieren-und-benoetigte-Kernelmodule-laden">Software installieren und benötigte Kernelmodule laden<a class="headerlink" href="#Software-installieren-und-benoetigte-Kernelmodule-laden">¶</a></h3><p>
Wir fahren das System mit der Live CD hoch. Zuerst wird im Live-System das folgende Paket installiert <sup><a href="#source-2">[2]</a></sup>:</p><ul><li><p><strong>cryptsetup</strong>(<em>universe</em>, <sup><a href="#source-3">[3]</a></sup>) </p></li></ul><p>
Zunächst wird ein Terminal geöffnet und durch die Eingabe von </p><div class="bash"><div class="contents"><pre class="notranslate">sudo -s </pre></div></div><p> root-Rechte erlangt. Dann werden durch Eingabe von 
</p><div class="bash"><div class="contents"><pre class="notranslate">modprobe aes
modprobe dm-crypt
modprobe sha256 </pre></div></div><p>
in die benötigten <a class="internal" href="../kernelmodule.html">Kernelmodule</a> geladen.</p><div class="section_3"><h4 id="Vor-Jaunty">Vor Jaunty:<a class="headerlink" href="#Vor-Jaunty">¶</a></h4><p>
In Ubuntu-Versionen vor Jaunty muss außerdem das Modul <em>dm-mod</em> durch zusätzliche Eingabe von </p><div class="bash"><div class="contents"><pre class="notranslate">modprobe dm-mod </pre></div></div><p> geladen werden.</p></div></div><div class="section_2"><h3 id="Einhaengepunkte-erstellen-und-belegen">Einhängepunkte erstellen und belegen<a class="headerlink" href="#Einhaengepunkte-erstellen-und-belegen">¶</a></h3><p>
Es werden nun <a class="internal" href="../mount.html">Einhängepunkte</a> erstellt, in die die bestehenden Partitionen <a class="internal" href="../mount.html">gemountet</a> werden:</p><div class="bash"><div class="contents"><pre class="notranslate">mkdir /media/{boot,root}
cd /media
mount /dev/sda1 boot
mount /dev/sda3 root </pre></div></div></div><div class="section_2"><h3 id="boot-verschieben">/boot verschieben<a class="headerlink" href="#boot-verschieben">¶</a></h3><p>
Als nächstes wird der existierende Boot-Ordner (sofern er nicht schon auf einer separaten Partition liegt) von <strong>/</strong> auf die neue Partition verschoben. Bei den folgenden Konsolen-Befehlen wird davon ausgegangen, dass das aktuelle Arbeitsverzeichniss /media ist (lässt sich mit einem pwd überprüfen):</p><div class="bash"><div class="contents"><pre class="notranslate">cp -avx root/boot/* boot/
umount boot
rm -frv root/boot/* </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>
Sollte <strong>/boot</strong> in eine eigene Partition verschoben worden sein, muss unbedingt darauf geachtet werden, dass in der Datei <strong>/media/root/etc/fstab</strong>  ein <a class="internal" href="../fstab.html">entsprechender Eintrag</a> angelegt wird!</p></div></div><p>
<strong>/boot</strong> (im Beispiel also <strong>/dev/sda1</strong>) ist die einzige Partition, die unverschlüsselt bleibt.</p></div></div><div class="section_1"><h2 id="Verschluesselung-der-Partitionen">Verschlüsselung der Partitionen<a class="headerlink" href="#Verschluesselung-der-Partitionen">¶</a></h2><p>
</p><div class="section_2"><h3 id="Root-Partition-Verschluesseln">Root-Partition Verschlüsseln<a class="headerlink" href="#Root-Partition-Verschluesseln">¶</a></h3><p>
</p><div class="section_3"><h4 id="Existierende-Daten-sichern">Existierende Daten sichern<a class="headerlink" href="#Existierende-Daten-sichern">¶</a></h4><p>
Sofern nicht schon geschehen, müssen nun die Dateien auf der Root-Partition (<strong>/dev/sda3</strong>) gesichert werden. Hier werden die Daten auf der backup-Partition (<strong>/dev/sdb1</strong>) gesichert. Wie eingangs erwähnt kann die Sicherung jedoch auf einem beliebigem anderen Speichermedium abgelegt werden. Im Anschluss wird die root-Partition ausgehangen.</p><div class="bash"><div class="contents"><pre class="notranslate">mkdir backup
mount /dev/sdb1 backup
tar -czvf backup/root.tar.gz -C root/ .
umount root </pre></div></div><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Bei der Sicherung werden sämtliche Daten der root-Partition gepackt, aber <strong>unverschlüsselt</strong> auf das Backup-Medium geschrieben. Wenn nach Abschluss der Verschlüsselung nach diesem Artikel sichergestellt ist, dass das verschlüsselte System korrekt funktioniert sollte die Sicherung angemessen, also nicht wiederherstellbar, gelöscht werden.
</p></div></div></div><div class="section_3"><h4 id="Crypt-Device-erstellen">Crypt Device erstellen<a class="headerlink" href="#Crypt-Device-erstellen">¶</a></h4><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Der Nachfolgende Befehl löscht <span class="underline">sämtliche</span> Dateien auf der betreffenden Partition unwiederbringlich! Man sollte ihn nur ausführen, wenn man wie oben beschrieben ein Backup der Daten auf <strong>/dev/sda3</strong> angefertigt hat! 
</p></div></div><div class="bash"><div class="contents"><pre class="notranslate">cryptsetup -c aes-xts-plain -y -s 512 luksFormat /dev/sda3 </pre></div></div><p>Das Kommando verschlüsselt <strong>/dev/sda3</strong> mit dem AES-Algorithmus. Das Argument <strong>-y</strong> erzwingt eine doppelte Passwortabfrage beim Anlegen des Volumes und <strong>-s</strong> legt die Schlüssellänge fest (hier: 256 Bit, bei XTS werden 512 Bit angegeben, da der XTS-Algorithmus zusätzliche 256 Bit für die Verknüpfung der Blöcke benötigt). Näheres dazu steht in der <a class="internal" href="../man.html">Manpage</a> zu cryptsetup.</p><p>Nachdem man mit <em>YES</em> das Formatieren bestätigt hat, wird man nach einem Passwort gefragt. Man sollte hier keine deutschen "Sonderzeichen" wie ä, ö, ü, ß und € wählen, die auf amerikanischen Tastaturen nicht zu finden sind. Dies sollte man berücksichtigen, da es sonst beim Boot-Vorgang zu Problemen mit der Passwortabfrage kommen kann.</p></div><div class="section_3"><h4 id="Crypt-Device-formatieren-und-Daten-zuruecksichern">Crypt Device formatieren und Daten zurücksichern<a class="headerlink" href="#Crypt-Device-formatieren-und-Daten-zuruecksichern">¶</a></h4><p>
Das eben erstellte Volume wird nun geöffnet, formatiert und wieder ins Live-System eingehängt: 
</p><div class="bash"><div class="contents"><pre class="notranslate">cryptsetup luksOpen /dev/sda3 root </pre></div></div><p>
Möchte man die Sicherheit der verschlüsselten Partition erhöhen, muss man diese mittels Zufallsdaten überschreiben, was Kryptoanalytikern die Möglichkeit nimmt überhaupt noch festzustellen welche Daten verschlüsselt sind und welche nicht. 
</p><div class="bash"><div class="contents"><pre class="notranslate">dd if=/dev/urandom of=/dev/mapper/root </pre></div></div><p>
Jetzt kann mit dem Formatieren und mounten der Partition fortgefahren werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">mkfs.ext3 /dev/mapper/root
mount /dev/mapper/root root </pre></div></div><p>
Dann wird der eben gesicherte Inhalt der Root-Partition zurückgeschrieben.
</p><div class="bash"><div class="contents"><pre class="notranslate">tar -xzvf backup/root.tar.gz -C root . </pre></div></div><p>Falls eine seperate home-Partition existiert wird diese an dieser Stelle ebenfalls verschlüsselt. Dazu sind die Arbeiten in <a class="crosslink" href="#Partition-verschluesseln">diesem</a> Abschnitt durchzuführen.</p></div></div></div><div class="section_1"><h2 id="System-zum-Booten-vorbereiten">System zum Booten vorbereiten<a class="headerlink" href="#System-zum-Booten-vorbereiten">¶</a></h2><p>
</p><div class="section_2"><h3 id="In-das-Festplattensystem-wechseln-und-Software-installieren">In das Festplattensystem wechseln und Software installieren<a class="headerlink" href="#In-das-Festplattensystem-wechseln-und-Software-installieren">¶</a></h3><p>
Um die nötigen Anpassungen vorzunehmen wechselt man mit chroot in das eigentliche, verschlüsselte System. Anschließend werden die benötigten Dateisysteme eingebunden. Damit die UUIDs richtig verarbeitet werden können, wird vorher das <strong>/dev</strong>-System des chroot-Systems an das Live-System gekoppelt.</p><div class="bash"><div class="contents"><pre class="notranslate">mount -o bind /dev root/dev
chroot root
mount /boot
mount -t proc proc /proc
mount -t sysfs sys /sys </pre></div></div><p>
Sollte auf dem Festplattensystem noch kein cryptsetup installiert sein, so ist nun der richtige Zeitpunkt, es zu tun.</p><ul><li><p><strong>cryptsetup</strong> (<em>universe</em>, <sup><a href="#source-3">[3]</a></sup>) </p></li></ul><p>
</p></div><div class="section_2"><h3 id="etc-initramfs-tools-modules-editieren">/etc/initramfs-tools/modules editieren<a class="headerlink" href="#etc-initramfs-tools-modules-editieren">¶</a></h3><p>
Als nächstes wird die Datei <strong>/etc/initramfs-tools/modules</strong> mit einem Editor geöffnet und folgende Zeilen hinzugefügt: 
</p><pre class="notranslate">aes
dm-crypt
sha256</pre><p>
Dies bewirkt, dass die für die Verschlüsselung nötigen Kernel-Module beim Booten verfügbar sind.</p><div class="section_3"><h4 id="Vor-Jaunty-2">Vor Jaunty:<a class="headerlink" href="#Vor-Jaunty-2">¶</a></h4><p>
Bei Ubuntu-Versionen vor Jaunty muss zusätzlich das Modul </p><pre class="notranslate">dm-mod</pre><p> mit in die Liste aufgenommen werden.</p></div></div><div class="section_2"><h3 id="etc-fstab-editieren">/etc/fstab editieren<a class="headerlink" href="#etc-fstab-editieren">¶</a></h3><p>
In der Datei <strong>/etc/fstab</strong> müssen die Einträge für das Root-Dateisystem angepasst werden, da von nun an ja nicht mehr die (verschlüsselte) Gerätedatei <strong>/dev/sdx</strong> sondern das "gemappte" (entschlüsselte) Device verwendet werden soll:</p><pre class="notranslate"># /dev/sda3
UUID=7153f497-1b66-476d-bb3b-85e3fe18b402 /               ext3    defaults,errors=remount-ro 0       1</pre><p>
muss (für das Root-Dateisystem) in 
</p><pre class="notranslate"># /dev/sda3
# UUID=7153f497-1b66-476d-bb3b-85e3fe18b402 /               ext3    defaults,errors=remount-ro 0       1
/dev/mapper/root /               ext3    defaults,errors=remount-ro 0       1</pre><p>
geändert werden.</p></div><div class="section_2"><h3 id="etc-crypttab-editieren">/etc/crypttab editieren<a class="headerlink" href="#etc-crypttab-editieren">¶</a></h3><p>
In der Datei <strong>/etc/crypttab</strong> wird folgender Inhalt hinzugefügt:</p><pre class="notranslate">root UUID=7153f497-1b66-476d-bb3b-85e3fe18b402 none luks,retry=1</pre><p>
Das bewirkt, ähnlich wie die <strong>/etc/fstab</strong>, dass der verschlüsselten Gerätedateie <strong>/dev/sda3</strong> beim Systemstart entschlüsselt und unter <strong>/dev/mapper/root</strong> eingehängt wird.</p><p>Falls eine seperate home-Partition existiert muss nun auch diese in die Konfigurationsdateien eingetragen werden. Die nötigen Schritte finden sich <a class="crosslink" href="#System-vorbereiten">hier</a>.</p></div><div class="section_2"><h3 id="boot-grub-menu-lst-editieren">/boot/grub/menu.lst editieren<a class="headerlink" href="#boot-grub-menu-lst-editieren">¶</a></h3><p>
Zum Schluss muss noch in der Datei <strong>/boot/grub/menu.lst</strong></p><pre class="notranslate"># kopt=root=UUID=7153f497-1b66-476d-bb3b-85e3fe18b402 ro splash</pre><p>
in</p><pre class="notranslate"># kopt=root=/dev/mapper/root ro</pre><p>
geändert werden. Danach werden die automatisch erzeugten Einträge mit</p><div class="bash"><div class="contents"><pre class="notranslate">update-grub </pre></div></div><p>
neu erstellt. Die Änderungen bewirken unter anderem, dass der Boot-Splash beim Systemstart deaktiviert wird, damit die Passwortabfrage einwandfrei funktioniert. Ab Kernel 2.6.22-14 ist es nicht mehr nötig splash zu entfernen da die Abfrage des System-Passwortes in den grafischen Bootscreen integriert wurde.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>
Falls nach Eingabe von <code class="notranslate">update-grub</code> die Fehlermeldung "findfs Unable to resolve [UUID der Boot-Partition]" kommt, sollte man den entsprechenden Eintrag in der <strong>/etc/fstab</strong> auf die entsprechende Partition (hier: <strong>/dev/sda1</strong>) ändern. Sonst kommt nach dem Neustart das böse Erwachen: Nach Auswahl des Boot-Eintags in Grub bekommt man nur noch "Error 15: File not found" zu sehen. Siehe Forenbeitrag: <a class="crosslink" href="http://forum.ubuntuusers.de/topic/104522/">Grub Error 15 - File not found</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/></p></div></div></div><div class="section_2"><h3 id="nderungen-bernehmen-und-chroot-Umgebung-verlassen">Änderungen Übernehmen und chroot-Umgebung verlassen<a class="headerlink" href="#nderungen-bernehmen-und-chroot-Umgebung-verlassen">¶</a></h3><p>
Um die Änderungen an der Datei <strong>/etc/initramfs-tools/modules</strong> zu übernehmen, muss noch</p><div class="bash"><div class="contents"><pre class="notranslate">update-initramfs -u -k all </pre></div></div><p>
ausgeführt werden. Dann kann man die chroot-Umgebung verlassen, das System neu starten und ohne Live-CD booten.</p><div class="bash"><div class="contents"><pre class="notranslate">exit
reboot </pre></div></div><p>
Beim Startvorgang wird man nach dem Passwort für die Root-Partition gefragt.</p><p>Das System ist nun bis auf den Auslagerungsspeicher und die Boot-Partition (<strong>/boot</strong>) voll verschlüsselt!</p></div></div><div class="section_1"><h2 id="Auslagerungsspeicher-verschluesseln">Auslagerungsspeicher verschlüsseln<a class="headerlink" href="#Auslagerungsspeicher-verschluesseln">¶</a></h2><p>
</p><div class="section_2"><h3 id="Einleitung-2">Einleitung<a class="headerlink" href="#Einleitung-2">¶</a></h3><p>
Die Ubuntu-Installation ist nun abgesichert, allerdings ist der <a class="internal" href="../swap.html">Auslagerungsspeicher</a> noch unverschlüsselt. So ist es bösartigen Individuen unter Umständen also möglich, Teile des ausgelagerten Arbeitsspeichers auszulesen und so an Passwörter und andere Schützenswerte Daten zu gelangen. Aus diesem Grund sollte auch der Auslagerungsspeicher wie folgt verschlüsselt werden:</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>
Die folgenden Anpassungen können im laufenden Festplattensystem durchgeführt werden. Ein Start von der Live-CD ist also nicht nötig!</p></div></div></div><div class="section_2"><h3 id="Verschluesseltes-Device-erstellen">Verschlüsseltes Device erstellen<a class="headerlink" href="#Verschluesseltes-Device-erstellen">¶</a></h3><p>
Zunächst wird die swap-Partition vorrübergehend deaktiviert.
</p><div class="bash"><div class="contents"><pre class="notranslate">swapoff -a </pre></div></div><p>Nun wird auf der swap-Partition ein verschlüsselter Container für die neue Swap-Partition erstellt, eingebunden und als swap formatiert.
</p><div class="bash"><div class="contents"><pre class="notranslate">/lib/cryptsetup/scripts/decrypt_derived root | cryptsetup luksFormat /dev/sda2 --key-file -
/lib/cryptsetup/scripts/decrypt_derived root | cryptsetup luksOpen /dev/sda2 swap --key-file -
mkswap /dev/mapper/swap </pre></div></div><p>Der Schlüssel wird aus der root-Partition generiert, daher ist später beim Booten keine Eingabe eines zusätzlichen Schlüssels für die swap-Partition nötig.
Der Swap-Speicher kann nun mit
</p><div class="bash"><div class="contents"><pre class="notranslate">swapon /dev/mapper/swap </pre></div></div><p>
wieder aktiviert werden.
</p><div class="section_3"><h4 id="Ab-Jaunty">Ab Jaunty<a class="headerlink" href="#Ab-Jaunty">¶</a></h4><p>
Die in Jaunty verwendete Version von <a class="internal" href="../udev.html">udev</a> generiert keine neuen UUIDs mehr für Datenträger, die mehrere Signaturen haben. Durch das verschlüsseln der swap-Partition hat diese nun zwei Signaturen. Um weiterhin mit UUIDs arbeiten zu können muss daher ab Jaunty die swap-Signatur der Partition mit folgendem Befehl gelöscht werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">dd if=/dev/zero of=/dev/sda2 bs=1024 seek=1 count=3 </pre></div></div><p>Weitere Information hierzu finden sich im zugehörigen Bug-Report: <a class="external" href="https://bugs.launchpad.net/bugs/362315" rel="nofollow">#362315</a></p></div></div><div class="section_2"><h3 id="Konfigurationsdateien-anpassen">Konfigurationsdateien anpassen<a class="headerlink" href="#Konfigurationsdateien-anpassen">¶</a></h3><p>
In der Datei <strong>/etc/crypttab</strong> wird folgende Zeile hinzugefügt
</p><pre class="notranslate">swap UUID=ca8152bb-c6f6-4f91-a56d-39d48d03ef9d root luks,keyscript=/lib/cryptsetup/scripts/decrypt_derived</pre><p>Die <a class="internal" href="../uuid.html">UUID</a> erhält man durch
</p><div class="bash"><div class="contents"><pre class="notranslate">blkid /dev/sda2 </pre></div></div><p>Damit der verschlüsselte Auslagerungsspeicher auch benutzt wird, muss dies noch in der Datei <strong>/etc/fstab</strong> eingetragen werden. Der Abschnitt:</p><pre class="notranslate"># /dev/sda2
UUID=ca8152bb-c6f6-4f91-a56d-39d48d03ef9d  none            swap    sw              0       0</pre><p>
wird in 
</p><pre class="notranslate"># /dev/sda2
/dev/mapper/swap  none            swap    sw              0       0</pre><p>
abgeändert.</p><p>Damit der Ruhezustand (Suspend-to-disk) weiterhin funktioniert muss noch dessen Konfiguration angepasst werden. In der Datei <strong>/etc/initramfs-tools/conf.d/resume</strong> wird die erste Zeile abgeändert in 
</p><pre class="notranslate">RESUME=/dev/mapper/swap</pre><p>Abschließend wird die Änderung übernommen:
</p><div class="bash"><div class="contents"><pre class="notranslate">update-initramfs -u -k all </pre></div></div></div></div><div class="section_1"><h2 id="Home-verschluesseln-optional">Home verschlüsseln (optional)<a class="headerlink" href="#Home-verschluesseln-optional">¶</a></h2><p>
Falls /home sich auf einer eigenen Partition befindet, muss auch diese Partition verschlüsselt werden. Dies sollte direkt nach der Verschlüsselung der root-Partition geschehen, noch während man sich im Live-System befindet. Im Folgenden wird davon ausgegangen, dass sich die home-Partition unter <strong>/dev/sda4</strong> befindet.</p><div class="section_2"><h3 id="Partition-verschluesseln">Partition verschlüsseln<a class="headerlink" href="#Partition-verschluesseln">¶</a></h3><p>
Die folgenden drei Abschnitte müssen direkt nach dem Kapitel <a class="crosslink" href="#Root-Partition-Verschluesseln">Root Partition verschlüsseln</a> abgearbeitet werden.
</p><div class="section_3"><h4 id="Existierende-Daten-sichern-2">Existierende Daten sichern<a class="headerlink" href="#Existierende-Daten-sichern-2">¶</a></h4><p>
Im Verzeichnis /media wird ein weiteres verzeichnis erstellt, um auf die Daten der home-Partition zuzugreifen. Diese werden ebenfalls auf das backup-Medium gesichert.
</p><div class="bash"><div class="contents"><pre class="notranslate">mkdir home
mount /dev/sda4 home
tar -czvf backup/home.tar.gz -C home .
umount home </pre></div></div></div><div class="section_3"><h4 id="Crypt-Device-erstellen-2">Crypt-Device erstellen<a class="headerlink" href="#Crypt-Device-erstellen-2">¶</a></h4><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Der Nachfolgende Befehl löscht <span class="underline">sämtliche</span> Dateien auf der betreffenden Partition unwiederbringlich! Man sollte ihn nur ausführen, wenn man wie oben beschrieben ein Backup der Daten auf <strong>/dev/sda4</strong> angefertigt hat! 
</p></div></div><div class="bash"><div class="contents"><pre class="notranslate">cryptsetup -c aes-xts-plain -y -s 512 luksFormat /dev/sda4 </pre></div></div><p>
Der Befehl verschlüsselt <strong>/dev/sda4</strong> mit dem gleichen Algorithmus, mit dem schon die root-Partition verschlüsselt wurde. Das Passwort kann unabhängig vom Passwort für die root-Partion gewählt werden. Es ermöglicht den Zugriff auf die home-Partition, falls die root-Partition beschädigt wurde um vollständigem Datenverlust vorzubeugen. Für den alltäglichen Gebrauch bekommt die Partition einen weiteren Schlüssel, der das Entschlüsseln abhängig von der root-Partition erlaubt. Somit muss beim Systemstart nur ein Passwort eingegeben werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">cryptsetup luksOpen /dev/sda3 root
/lib/cryptsetup/scripts/decryt_derived root &gt;&gt; /tmp/key.tmp
cryptsetup luksAddkey /dev/sda4 /tmp/key.tmp </pre></div></div><p>
Zunächst wird die verschlüsselte root-Partition nach Eingabe des Passwortes geöffnet. Aus ihr wird nun der Schlüssel generiert und temporär gespeichert. Dieser Schlüssel wird nun der home-Partition hinzugefügt. Hierbei wird nach dem vorher bei der Erstellung gewählten Passwort gefragt.</p></div><div class="section_3"><h4 id="Crypt-Device-formatieren-und-Daten-zuruecksichern-2">Crypt Device formatieren und Daten zurücksichern<a class="headerlink" href="#Crypt-Device-formatieren-und-Daten-zuruecksichern-2">¶</a></h4><p>
Das neu erstellte Crypt-Device wird nun geöffnet:
</p><div class="bash"><div class="contents"><pre class="notranslate">/lib/crypsetup/scripts/decrypt_derivied root | cryptsetup luksOpen /dev/sda4 home </pre></div></div><p>
Möchte man die Sicherheit der verschlüsselten Partition erhöhen, muss man diese mittels Zufallsdaten überschreiben, was Kryptoanalytikern die Möglichkeit nimmt überhaupt noch festzustellen welche Daten verschlüsselt sind und welche nicht. 
</p><div class="bash"><div class="contents"><pre class="notranslate">dd if=/dev/urandom of=/dev/mapper/home </pre></div></div><p>
Jetzt kann mit dem Formatieren und mounten der Partition fortgefahren werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">cd /media
mkfs.ext3 /dev/mapper/home
mount /dev/mapper/home home </pre></div></div><p>
Dann wird der eben gesicherte Inhalt der home-Partition zurück kopiert: 
</p><div class="bash"><div class="contents"><pre class="notranslate">tar -xzvf backup/home.tar.gz -C home . </pre></div></div></div></div><div class="section_2"><h3 id="System-vorbereiten">System vorbereiten<a class="headerlink" href="#System-vorbereiten">¶</a></h3><p>
Zusätzlich zu den Änderungen im Abschnitt <a class="crosslink" href="#System-zum-Booten-vorbereiten">System zum Booten vorbereiten</a> muss auch die home-Partition in <strong>/etc/fstab</strong> und <strong>/etc/crypttab</strong> eingetragen werden bevor die Änderungen übernommen und die chroot-Umgebung verlassen wird.</p><div class="section_3"><h4 id="etc-fstab-editieren-2">/etc/fstab/editieren<a class="headerlink" href="#etc-fstab-editieren-2">¶</a></h4><p>
Zusätzlich zum Eintrag der root-Partition muss auch der Eintrag der home-Partition angepasst werden.
</p><pre class="notranslate"># /dev/sda4
UUID=ab5f1dca-45c1-4c66-8cfb-e6ca84ec6650 /home           ext3    defaults        0       2</pre><p>
muss (für das home-Dateisystem) in 
</p><pre class="notranslate"># /dev/sda4
# UUID=ab5f1dca-45c1-4c66-8cfb-e6ca84ec6650 /home           ext3    defaults        0       2
/dev/mapper/home /home           ext3    defaults        0       2</pre><p>
abgeändert werden.</p></div><div class="section_3"><h4 id="etc-crypttab-editieren-2">/etc/crypttab editieren<a class="headerlink" href="#etc-crypttab-editieren-2">¶</a></h4><p>
In der Datei <strong>/etc/crypttab</strong> wird folgende Zeile hinzugefügt:</p><pre class="notranslate">home UUID=ab5f1dca-45c1-4c66-8cfb-e6ca84ec6650 root luks,keyscript=/lib/cryptsetup/scripts/decrypt_derived</pre><p>
Das bewirkt, ähnlich wie die <strong>/etc/fstab</strong>, dass die verschlüsselten Gerätedatei <strong>/dev/sda4</strong> beim Systemstart entschlüsselt und unter <strong>/dev/mapper/home</strong> eingehängt wird. Dazu wird der zusätzliche Schlüssel, der aus der root-Partition abgeleitet wird, verwendet, so dass keine zusätzliche Passwort-Abfrage nötig wird.</p></div></div></div><div class="section_1"><h2 id="Neues-System-installieren">Neues System installieren<a class="headerlink" href="#Neues-System-installieren">¶</a></h2><p>
Falls kein bestehndes System verschlüsselt, sondern ein neues installiert werden soll, müssen lediglich wie oben beschrieben die Crypt-Devices für / und /home erstellt werden, nachdem die Fesplatte entsprechend partitioniert wurde. Daten sichern und zurückschreiben entfällt hierbei. Anschließend müssen die Crypt-Devices geöffnet werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">cryptsetup luksOpen /dev/sda3 root
cryptsetup luksopen /dev/sda4 home </pre></div></div><p>
Die geöffneten Devices dürfen jedoch <strong>nicht</strong> gemountet werden. Anschließend wird die Installation aus dem Live-System gestartet. Dort werden die Geräte wie folgt verwendet:</p><ul><li><p>Für / (root) benutzt man /dev/mapper/root </p></li><li><p>Für /boot benutzt man /dev/sda1 </p></li><li><p>Für /home benutzt man /dev/mapper/home </p></li><li><p>Als swap nimmt man /dev/sda2 </p></li></ul><p>
Nach Abschluß der Installation darf das System nicht direkt neu gestartet werden. Es müssen erst die Arbeiten aus dem Abschnitt <a class="crosslink" href="#System-zum-Booten-vorbereiten">System zum Booten vorbereiten</a> durchgeführt werden. Der Auslagerungsspeicher kann anschließend im laufenden System gemäß <a class="crosslink" href="#Auslagerungsspeicher-verschluesseln">Auslagerungsspeicher verschlüsseln</a> verschlüsselt werden.</p><p>Es ist nicht zwingend notwenig, eine eigene home-Partition zu erstellen. Bei knappem Festplatten-Platz kann darauf verzichtet werden. Generell ist es jedoch sinnvoll System-Daten und Nutzer-Daten getrennt zu speichern, so dass nach Möglichkeit eine eigene home-Partition angelegt werden sollte.</p></div><div class="section_1"><h2 id="System-wiederherstellen">System wiederherstellen<a class="headerlink" href="#System-wiederherstellen">¶</a></h2><p>
Sollte man aus irgendeinem Grund ein verschlüsseltes System wieder entschlüsseln wollen, so muss zuerst wieder von einem Live-System gestartet (siehe oben).</p><div class="section_2"><h3 id="Live-System-vorbereiten">Live-System vorbereiten<a class="headerlink" href="#Live-System-vorbereiten">¶</a></h3><p>
Wie gehabt muss das folgende Paket im Live-System installiert werden und <sup><a href="#source-2">[2]</a></sup>:</p><ul><li><p><strong>cryptsetup</strong> (<em>universe</em> <sup><a href="#source-3">[3]</a></sup>) </p></li></ul><p>Auch die benötigten Kernelmodule müssen wieder geladen werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo -s
modprobe aes
modprobe dm-crypt
exit </pre></div></div><div class="section_3"><h4 id="Vor-Jaunty-3">Vor Jaunty<a class="headerlink" href="#Vor-Jaunty-3">¶</a></h4><p>
In Ubuntu-Versionen vor Jaunty muss auch hier das Modul <em>dm-mod</em> zusätzlich geladen werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">modprobe dm-mod </pre></div></div></div></div><div class="section_2"><h3 id="Einhaengepunkte-erstellen-und-belegen-2">Einhängepunkte erstellen und belegen<a class="headerlink" href="#Einhaengepunkte-erstellen-und-belegen-2">¶</a></h3><p>
Es werden nun Einhängepunkte erstellt, in die die verschlüsselten Partitionen gemountet werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo -s
mkdir /media/root
cd /media
cryptsetup luksOpen /dev/sda3 root
mount /dev/mapper/root root
exit </pre></div></div><p>
Falls eine eigene home-Partition existiert wird auch diese gemountet:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo -s
mkdir /media/home
cd /media
cryptsetup luksOpen /dev/sda4 home
mount /dev/mapper/home home
exit </pre></div></div></div><div class="section_2"><h3 id="Daten-kopieren">Daten kopieren<a class="headerlink" href="#Daten-kopieren">¶</a></h3><p>
Die entschlüsselten Daten liegen nun in den Ordnern <strong>/media/root</strong> und <strong>/media/home</strong>. Von hier aus können sie nun beispielsweise auf eine externe Festplatte kopiert werden. Dann wird das System neu partitioniert (wie zum Beispiel weiter oben <a class="crosslink" href="#Part">beschrieben</a>) und die Daten aus <strong>/media/root</strong> auf die neu angelegte Root-Partition bzw. aus <strong>/media/home</strong> auf die neue Home-Partition verschoben.</p></div><div class="section_2"><h3 id="Konfigurationsdateien-anpassen-2">Konfigurationsdateien anpassen<a class="headerlink" href="#Konfigurationsdateien-anpassen-2">¶</a></h3><p>
Im neuen System sollten nun noch die Konfigurationsdateien <strong>/etc/fstab</strong>, <strong>/etc/crypttab</strong> und <strong>/boot/grub/menu.lst</strong> auf den neuen Partitionen angepasst werden:</p><ul><li><p>Aus der Datei <strong>/etc/fstab</strong> werden jene Einträge, die mit <em>/dev/mapper/</em> beginnen durch der neuen Partitionierung entsprechende Einträge wie <a class="internal" href="../datenträger.html">hier</a> ersetzt. </p></li><li><p>In der Datei <strong>/etc/crypttab</strong> werden alle Einträge gelöscht </p></li><li><p>In der Datei <strong>/boot/grub/menu.lst</strong> werden die oben beschriebenen Änderungen wieder rückgängig gemacht. </p></li></ul><p>
</p></div><div class="section_2"><h3 id="System-neustarten">System neustarten<a class="headerlink" href="#System-neustarten">¶</a></h3><p>
Nach einem Neustart des Systems sollte man nun wieder mit einem unverschlüsseltem Ubuntu arbeiten können.</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://de.wikipedia.org/wiki/Dm-crypt" rel="nofollow">Wikipedia über Dm-Crypt &amp; LUKS</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="external" href="http://de.wikipedia.org/wiki/Advanced_Encryption_Standard" rel="nofollow">Die AES-Verschlüsselung</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="external" href="http://www.linux-magazin.de/heft_abo/ausgaben/2006/10/loechriger_kaese/" rel="nofollow">Artikel im Linux-Magazin u.a. auch über cryptsetup &amp; LUKS</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="external" href="http://verschluesselung.info" rel="nofollow">Verschlüsselung in der Praxis: Anleitungen zum Verschlüsseln von Daten und Kommunikation</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="external" href="http://verschluesselung.info/linux/usb/" rel="nofollow">USB-Stick verschlüsseln oder externe Festplatte verschlüsseln mit Ubuntu</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="external" href="http://luks.endorphin.org/" rel="nofollow">Hompage des Linux Unified Key Setup (LUKS)</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p><a class="external" href="http://kuparinen.org/martti/comp/ubuntu/en/cryptolvm.html" rel="nofollow">Verschlüsselung mittels LVM Partitionen während Text-Modus Installation</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><hr/><p></p></div></div>
<p class="meta">
<a href="../archiv/system_verschlüsseln/a/revision/231872.html">Diese Revision</a> wurde am 6. Mai 2011 09:36 von <a href="https://ubuntuusers.de/user/frustschieber/">frustschieber</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../archiv.html">Archiv</a></li>
<li><a href="../archiv/system_verschlüsseln.html">System verschlüsseln</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>