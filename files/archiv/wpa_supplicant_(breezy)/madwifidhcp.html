<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Archiv/wpa_supplicant_(Breezy)/MadwifiDHCP › ubuntuusers statisches Wiki</title>
<link href="../../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../../archiv/wpa_supplicant_(breezy)/madwifidhcp.html">MadwifiDHCP</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Archiv/wpa_supplicant_(Breezy)/MadwifiDHCP">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../../wiki/index.html">Index</a></li>
<li><a href="../../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../../wiki.html">Übersicht</a></li>
<li><a href="../../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../../kategorien.html">Kategorie</a></li>
<li><a href="../../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../../howto.html">Howto anlegen</a></li>
<li><a href="../../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../../baustelle.html">Baustellen</a></li>
<li><a href="../../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../../archiv/wpa_supplicant_(breezy)/madwifidhcp/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../../archiv/wpa_supplicant_(breezy)/madwifidhcp/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../../archiv/wpa_supplicant_(breezy)/madwifidhcp/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../../archiv/wpa_supplicant_(breezy)/madwifidhcp/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../../archiv/wpa_supplicant_(breezy)/madwifidhcp/a/backlinks.html">MadwifiDHCP</a></h1>
<div id="page"><div class="box improvable"><h3 class="box improvable">Archivierte Anleitung</h3><div class="contents"><p>
Dieser Artikel wurde archiviert, da er - oder Teile daraus -
nur noch unter einer älteren Ubuntu-Version nutzbar ist. Diese
Anleitung wird vom Wiki-Team weder auf Richtigkeit überprüft
noch anderweitig gepflegt. Zusätzlich wurde der Artikel für
weitere Änderungen gesperrt.
</p><hr/><p><strong>Anmerkung:</strong> In Ubuntu 6.06 ist diese Anleitung überflüssig, da die Fehler in den betroffenen Softwarepaketen behoben worden sind.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../../pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../../paketquellen_freischalten.html">Bearbeiten von Paketquellen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../../terminal.html">Ein Terminal öffnen</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Benoetigte-Paketquellen">Benötigte Paketquellen
</a></li><li><a class="crosslink" href="#wpa-supplicant-patchen">wpa_supplicant patchen
</a></li><li><a class="crosslink" href="#Kompilieren">Kompilieren
</a></li><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Aufraeumen">Aufräumen
</a></li><li><a class="crosslink" href="#Literaturhinweise">Literaturhinweise
</a></li></ol></div><p>Unter Breezy (und eventuell anderen Distributionen) besteht ein Konflikt zwischen wpa_supplicant und den madwifi Treibern. Dieser Konflikt sorgt dafür, dass man mit wpa_supplicant zwar eine Verbindung zum AP/Router bekommt, jedoch keine IP Adresse per DHCP zugewiesen bekommt. Es ist zwar möglich statische IP Adressen zu benutzen, jedoch lässt sich das Problem leicht beheben. Man kann entweder die madwifi Treiber, oder wpa_supplicant patchen und neu kompilieren. Da letzteres weniger Aufwand bedeutet wird diese Methode hier beschrieben.</p><div class="section_1"><h2 id="Benoetigte-Paketquellen">Benötigte Paketquellen<a class="headerlink" href="#Benoetigte-Paketquellen">¶</a></h2><p>
Es muss der madwifi-Treiberwrapper von wpa_supplicant modifiziert werden. Dazu braucht man sowohl die Quellen von wpa_supplicant als auch von madwifi. madwifi ist Teil der <em>linux-restricted-modules</em>. Da die Quellen in Ubuntu nicht seperat erhältlich sind, müssen leider die Quellen des gesamten Paketes geladen werden (knapp 80MB). Zusätzlich braucht man libssl-dev und die standard Kompilerwerkzeuge.</p><div class="bash"><div class="contents"><pre class="notranslate"> sudo apt-get install build-essential libssl-dev
 cd /tmp
 mkdir wpa
 cd wpa
 apt-get source wpasupplicant linux-restricted-modules-`uname -r` </pre></div></div><p>
Es werden direkt zwei Verzeichnisse angelegt. Da aus den <em>linux-restricted-modules</em> nur die madwifi Quellen gebraucht werden, verschiebt man das Verzeichnis von madwifi und löscht den Rest. 
</p><div class="bash"><div class="contents"><pre class="notranslate"> mv linux-restricted-modules-&lt;???&gt;/madwifi .
 rm -r linux-restricted-modules-&lt;???&gt; </pre></div></div><p>
Das &lt;???&gt; ist durch die tatsächliche Version zu ersetzen. In <code class="notranslate">/tmp/wpa</code> sollten sich jetzt nur die Verzeichnisse madwifi und wpasupplicant-0.4.5 befinden (und ein paar Dateien, die nicht gebraucht werden).</p></div><div class="section_1"><h2 id="wpa-supplicant-patchen">wpa_supplicant patchen<a class="headerlink" href="#wpa-supplicant-patchen">¶</a></h2><p>
Im Wrapper für den madwifi Treiber muss eine kleine Änderung vorgenommen werden. 
</p><div class="bash"><div class="contents"><pre class="notranslate"> cd wpasupplicant-0.4.5
 gedit driver_madwifi.c </pre></div></div><p>
In Version 0.4.5 bedindet sich der zu ändernde Eintrag in <strong>Zeile 218</strong>. Nach der Änderung muss diese Zeile so aussehen:</p><pre class="notranslate">wk.ik_flags = IEEE80211_KEY_RECV | IEEE80211_KEY_GROUP;</pre><p>
Abspeichern und weiter geht es.</p></div><div class="section_1"><h2 id="Kompilieren">Kompilieren<a class="headerlink" href="#Kompilieren">¶</a></h2><p>
Zuerst muss wpa_supplicant für das Kompilieren konfiguriert werden. Zum Glück gibt es eine Vorlage: 
</p><div class="bash"><div class="contents"><pre class="notranslate"> cp defconfig .config
 echo "CFLAGS += -I../madwifi/" &gt;&gt; .config
 echo "CONFIG_DRIVER_MADWIFI=y" &gt;&gt; .config </pre></div></div><p>
Das Kompilieren wird als <em>root</em> gemacht, so dass die Rechte gleich richtig gesetzt sind. 
</p><div class="bash"><div class="contents"><pre class="notranslate"> sudo -s -H
 make </pre></div></div><p>
Falls es hier Probleme gibt, auf die Fehlermeldungen achten und entsprechende Pakete nachinstallieren. Bitte auch im Forum melden, so dass die o.a. Liste aktualisiert werden kann.</p></div><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Weiterhin als <em>root</em> macht man nun ein Backup der alten wpasupplicant Datei und ersetzt sie durch die neue. 
</p><div class="bash"><div class="contents"><pre class="notranslate"> mv /usr/sbin/wpa_supplicant{,.bak}
 cp wpa_supplicant /usr/sbin/ </pre></div></div><p>
Jetzt müsste alles funktionieren. Wenn man WPA nach der Anleitung hier im Wiki (<a class="internal" href="../../wlan/wpa_supplicant.html">WLAN/wpa supplicant</a>) eingerichtet hat, dann sollte ein einfaches <code class="notranslate">ifup ath0</code> eine Verbindung zum AP und ein DHCP lease bringen.</p></div><div class="section_1"><h2 id="Aufraeumen">Aufräumen<a class="headerlink" href="#Aufraeumen">¶</a></h2><p>
Wenn alles funktioniert, können die Dateien, die unterwegs geladen oder erstellt wurden, gelöscht werden. 
</p><div class="bash"><div class="contents"><pre class="notranslate"> cd /tmp
 rm -r wpa
 exit </pre></div></div></div><div class="section_1"><h2 id="Literaturhinweise">Literaturhinweise<a class="headerlink" href="#Literaturhinweise">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://sourceforge.net/mailarchive/message.php?msg_id=13050256" rel="nofollow">madwifi mailinglist</a> <img alt="{en}" src="../../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p><a class="crosslink" href="http://www.ubuntuusers.de/viewtopic.php?t=18585">DHCP im WLAN (WPA) funktioniert nicht</a> (im Forum) </p></li><li><p><a class="crosslink" href="http://www.ubuntuusers.de/viewtopic.php?t=21254">wpasupplicant / madwifi, kein dhcp lease</a> (im Forum) </p></li></ul><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>
Falls eine neue Version des Madwifi Treibers durch ein eventuelles Security Update eingespielt wird, sollte dieses nicht mit den Änderungen in wpasupplicant kollidieren. Im umgekehrten Falle: Eine neue Version von wpasupplicant macht natürlich alle Änderungen zunichte. Es ist zu hoffen, dass in diesem Fall die Probleme in wpasupplicant behoben wurden und ein Update keine Probleme mit sich bringt. Falls doch, muss die hier beschriebene Prozedur wiederholt werden.</p></div></div><p>
</p></div></div>
<p class="meta">
<a href="../../archiv/wpa_supplicant_(breezy)/madwifidhcp/a/revision/23576.html">Diese Revision</a> wurde am 16. Juli 2008 18:33 von <a href="https://ubuntuusers.de/user/ubuntuusers.de/">ubuntuusers.de</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../../startseite.html">Wiki</a></li>
<li><a href="../../archiv.html">Archiv</a></li>
<li><a href="../../archiv/wpa_supplicant_(breezy).html">wpa supplicant (Breezy)</a></li>
<li><a href="../../archiv/wpa_supplicant_(breezy)/madwifidhcp.html">MadwifiDHCP</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>