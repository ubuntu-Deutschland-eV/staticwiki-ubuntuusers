<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Archiv/DMA › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../archiv/dma.html">DMA</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Archiv/DMA">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../archiv/dma/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../archiv/dma/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../archiv/dma/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../archiv/dma/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../archiv/dma/a/backlinks.html">DMA</a></h1>
<div id="page"><div class="box improvable"><h3 class="box improvable">Archivierte Anleitung</h3><div class="contents"><p>
Dieser Artikel wurde archiviert, da er - oder Teile daraus -
nur noch unter einer älteren Ubuntu-Version nutzbar ist. Diese
Anleitung wird vom Wiki-Team weder auf Richtigkeit überprüft
noch anderweitig gepflegt. Zusätzlich wurde der Artikel für
weitere Änderungen gesperrt.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../datenträger.html">Wie heißen die "Geräte"?</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../editor.html">Einen Editor öffnen</a> </p></li></ol></div></div><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Im Gegensatz zu älteren <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/ATAPI">PATA-Laufwerken</a> mit <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Integrated_Drive_Electronics">IDE-Schnittstelle</a> besitzen moderne <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Serial_ATA">SATA-Laufwerke</a> keinen DMA-Modus.</p><p>Die Festplatte sollte vor dem Setzen eines anderen DMA-Modus unbedingt aus dem Dateisystem ausgehängt werden, da ansonsten Datenverlust droht. Außerdem sollte man vorher in Erfahrung bringen, für welchen DMA-Modus eine Festplatte überhaupt geeignet ist. Einige Festplatten scheinen nicht über einen Schutzmechanismus verfügen, die das Benutzen eines ungeeigneten (zu schnellen) Übertragungsmodus (DMA-Modus) verhindert; auch in diesem Fall können Daten verloren gehen!
</p></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Allgemeines">Allgemeines
</a><ol class="arabic"><li><a class="crosslink" href="#Besonderheiten-seit-Feisty-Fawn">Besonderheiten seit Feisty Fawn
</a></li></ol></li><li><a class="crosslink" href="#DMA-temporaer-aktivieren">DMA temporär aktivieren
</a></li><li><a class="crosslink" href="#DMA-dauerhaft-aktivieren">DMA dauerhaft aktivieren
</a><ol class="arabic"><li><a class="crosslink" href="#Anpassen-der-Konfiguration">Anpassen der Konfiguration
</a></li><li><a class="crosslink" href="#Start-von-hdparm-verzoegern">Start von hdparm verzögern
</a></li></ol></li><li><a class="crosslink" href="#Geschwindigkeitsmessung">Geschwindigkeitsmessung
</a></li><li><a class="crosslink" href="#Problemloesungen">Problemlösungen
</a><ol class="arabic"><li><a class="crosslink" href="#DMA-laesst-sich-nicht-aktivieren">DMA lässt sich nicht aktivieren
</a></li><li><a class="crosslink" href="#System-bleibt-beim-Booten-haengen">System bleibt beim Booten hängen
</a></li><li><a class="crosslink" href="#DMA-ist-gesetzt-funktioniert-aber-nicht">DMA ist gesetzt, funktioniert aber nicht...</a></li><li><a class="crosslink" href="#hdparm-Eintrag-ist-in-etc-rcS-d-nicht-auffindbar">hdparm-Eintrag ist in /etc/rcS.d/ nicht ...</a></li><li><a class="crosslink" href="#etc-init-d-hdparm-existiert-nicht">/etc/init.d/hdparm existiert nicht
</a></li><li><a class="crosslink" href="#DMA-nach-kurzer-Zeit-bzw-Zugriff-auf-CD-DVD-wieder-deaktiviert">DMA nach kurzer Zeit bzw. Zugriff auf CD...</a></li><li><a class="crosslink" href="#Simplex-DMA-is-claimed-by-other-device">Simplex DMA is claimed by other device
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>Diese Anleitung beschreibt, wie man den <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Direct_Memory_Access">DMA-Modus</a> für IDE-Laufwerke aktiviert. Unter aktuellen Ubuntu-Versionen ist dies normalerweise nicht notwendig, da DMA bereits standardmäßig aktiviert ist.</p><div class="section_1"><h2 id="Allgemeines">Allgemeines<a class="headerlink" href="#Allgemeines">¶</a></h2><p>
Es kann vorkommen, dass beim Anschauen einer DVD das Bild stark ruckelt oder dass der Durchsatz der Festplatte sehr langsam ist. Das liegt möglicherweise am abgeschalteten DMA-Modus des Laufwerks.</p><p>Der deaktivierte DMA-Modus kann auch dazu führen, dass ein Brennvorgang extrem langsam wird und im Schnitt nur mit einem Bruchteil der eigentlichen Höchstgeschwindigkeit gebrannt wird.</p><p>Auf der Hardwareebene muss man sich vergewissern, dass das IDE-Breitbandkabel 80-polig ist. Die alten 40-poligen sehen gleich aus, können aber die neueren DMA-Modi nicht umsetzen. Alle nachfolgenden Einstellungen werden nicht funktionieren.</p><div class="section_2"><h3 id="Besonderheiten-seit-Feisty-Fawn">Besonderheiten seit Feisty Fawn<a class="headerlink" href="#Besonderheiten-seit-Feisty-Fawn">¶</a></h3><p>
Seit der Ubuntu-Version Feisty Fawn 7.04 werden die Laufwerke als virtuelle SCSI-Laufwerke behandelt. Kennzeichen ist, dass die Laufwerke statt <strong>/dev/hd*x</strong> als <strong>/dev/sd*x</strong> bezeichnet werden. Das führt dazu, dass <strong>hdparm</strong> den DMA-Modus weder setzen noch abfragen kann. Allerdings sollte DMA auch standardmäßig aktiviert sein.</p><p>Wird der Treiber ausgewechselt, z.B. durch ein Neukompilieren des Kernels, funktioniert <strong>hdparm</strong> wieder vollständig wie im Folgenden beschrieben. Das ist höchstens bei auftretenden schweren Problemen nötig!</p></div></div><div class="section_1"><h2 id="DMA-temporaer-aktivieren">DMA temporär aktivieren<a class="headerlink" href="#DMA-temporaer-aktivieren">¶</a></h2><p>
Mit dem Kommandozeilen-Tool hdparm kann man DMA aktivieren. In diesem Beispiel wird davon ausgegangen, dass <strong>/dev/hdc</strong> das Laufwerk ist (ggf. also anpassen). <sup><a href="#source-1">[1]</a></sup></p><p>Zur Kontrolle ob der DMA-Modus aktiv ist, öffnet man ein Terminal <sup><a href="#source-2">[2]</a></sup> und gibt dort folgenden Befehl ein:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hdparm /dev/hdc </pre></div></div><p>Die Anzeige sieht dann in etwa so aus:</p><pre class="notranslate">/dev/hdc:
   multcount    =  0 (off)
   IO_support   =  0 (default 16-bit)
   unmaskirq    =  0 (off)
   using_dma    =  0 (off)
   keepsettings =  0 (off)
   (...)</pre><p>Man erfährt so also, dass der DMA-Modus abgeschaltet ist: 
</p><pre class="notranslate">   using_dma    =  0 (off)
   IO_support   =  0 (default 16-bit)</pre><p>Um den DMA-Modus vorübergehend einzuschalten, tippt man:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hdparm -c1 -d1 /dev/hdc </pre></div></div><p>Zum Überprüfen sollten in der Ausgabe von <strong>sudo hdparm /dev/hdc</strong> nun folgende Zeilen enthalten sein:</p><pre class="notranslate">/dev/hdc:
   (...)
   IO_support   =  1 (32-bit)
   using_dma    =  1 (on)
   (...)</pre></div><div class="section_1"><h2 id="DMA-dauerhaft-aktivieren">DMA dauerhaft aktivieren<a class="headerlink" href="#DMA-dauerhaft-aktivieren">¶</a></h2><p>
</p><div class="section_2"><h3 id="Anpassen-der-Konfiguration">Anpassen der Konfiguration<a class="headerlink" href="#Anpassen-der-Konfiguration">¶</a></h3><p>
Damit der DMA-Modus auch nach dem nächsten Neustart noch aktiv ist (sofern der Versuch erfolgreich war), wird das Ganze in die Datei <strong>/etc/hdparm.conf</strong> eingetragen. Dazu öffnet man die Datei in einem Editor mit Rootrechten <sup><a href="#source-3">[3]</a></sup> und fügt ans Ende folgenden Text an:</p><pre class="notranslate">/dev/hdc {
       io32_support = 1
       dma = on
       keep_settings_over_reset = 1
}</pre><p>Auch ist es möglich, diese Parameter in einer anderen Syntax einzutragen. Diese Syntax entspricht den hdparm-Optionen aus der Kommandozeile und ist leicht übertragbar. Dazu ist stattdessen Folgendes am Ende der <strong>/etc/hdparm.conf</strong> einzutragen:</p><pre class="notranslate">command_line {
       hdparm -c1 -d1 -k1 /dev/hdc
}</pre><p>Alternativ kann als Pfadangabe <strong>/dev/disk/by-uuid/</strong> genutzt werden (siehe <a class="internal" href="../uuid.html">UUID</a>). Natürlich können viele weitere Befehle für das Device (Gerät) mitgegeben werden, siehe hdparm-Doku (<strong>man hdparm</strong>), oder die Beispieleinträge in der Datei <strong>hdparm.conf</strong>. Hat man z. B. an <strong>/dev/hdd</strong> noch einen Brenner, kann man gleich auch dafür einen entsprechenden Eintrag machen.</p><p><a class="crosslink anchor" href="#hdparm_verzoegern" id="hdparm_verzoegern"></a>
</p></div><div class="section_2"><h3 id="Start-von-hdparm-verzoegern">Start von hdparm verzögern<a class="headerlink" href="#Start-von-hdparm-verzoegern">¶</a></h3><p>
Nun muss evtl. mit dem Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mv /etc/rcS.d/S07hdparm /etc/rcS.d/S21hdparm </pre></div></div><p>den Start von hdparm (beim Hochfahren des Systems) zeitlich etwas weiter nach hinten gesetzt werden. So funktioniert hdparm auch nach dem nächsten Neustart richtig. Sollten Probleme auftreten ist es einen Versuch wert, den hdparm-Eintrag im <strong>/etc/rcS.d</strong>-Verzeichnis noch weiter in der Reihenfolge nach hinten zu versetzen. Beispielsweise auf S48hdparm, oder konsequent ganz an den Schluss auf S99hdparm (längere Bootzeiten durch die spätere Aktivierung von DMA treten nicht auf):</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mv /etc/rcS.d/S07hdparm /etc/rcS.d/S99hdparm </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Falls zum Setzen des DMA-Modus erst noch Treiber geladen werden müssen, funktioniert es erst ab Position 21. Die Treiber (Module) werden aber an Stelle 20 geladen. Hat man die IDE-Unterstützung fest in den Kernel kompiliert (kein Modul), dann kann man diesen Schritt überspringen. 
</p></div></div><p>Sollte der Eintrag <em>/etc/rcS.d/S07hdparm</em> nicht vorhanden sein, bitte vorher den Abschnitt <a class="crosslink" href="#rcS.d">"hdparm-Eintrag ist in /etc/rcS.d/ nicht auffindbar"</a> in den Problembehebungen befolgen.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Für schnelle und zuverlässige DMA-Übertragungen müssen alle Laufwerke eines Computers den DMA-Modus aktiviert haben! So ist sichergestellt, dass alle Geräte mit den hohen Datenraten arbeiten können. Ansonsten kann es vorkommen, dass der DMA-Flag nach einigen Zugriffen von der Hardware zurückgesetzt wird.
</p></div></div><p><a class="crosslink anchor" href="#Geschwindigkeitsmessung" id="Geschwindigkeitsmessung"></a>
</p></div></div><div class="section_1"><h2 id="Geschwindigkeitsmessung">Geschwindigkeitsmessung<a class="headerlink" href="#Geschwindigkeitsmessung">¶</a></h2><p>
Das Kommandozeilentool hdparm bietet zudem so etwas wie eine Geschwindigkeitsmessung ("Benchmark") an, um den DMA-Modus rudimentär zu testen. In diesem Beispiel wird eine IDE-Festplatte an z.B. /dev/hdc verwendet. Die Ausführung des folgenden Befehls dauert circa 10 Sekunden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hdparm -Tt /dev/hdc </pre></div></div><p>Für IDE-Festplatten sollte der zweite Wert <em>Timing buffered disk reads</em> zwischen 35 MB/s und 55 MB/s bei funktionierendem DMA-Modus liegen. Ist dieser nicht aktiviert liegt dieser Wert zwischen 2 MB/s und 3 MB/s.</p></div><div class="section_1"><h2 id="Problemloesungen">Problemlösungen<a class="headerlink" href="#Problemloesungen">¶</a></h2><p>
</p><div class="section_2"><h3 id="DMA-laesst-sich-nicht-aktivieren">DMA lässt sich nicht aktivieren<a class="headerlink" href="#DMA-laesst-sich-nicht-aktivieren">¶</a></h3><p>
Bei einigen Systemen lässt sich der DMA-Modus nicht aktivieren. Dafür gibt es folgenden Workaround:</p><p>In <strong>/etc/modules</strong> muss an erster Stelle das Modul stehen, das den DMA-Modus erst ermöglicht. Dies ist abhängig vom verwendeten Mainboardchipsatz, z.B. bei einem nforce4 Ultra:</p><pre class="notranslate">amd74xx</pre><p>Sollte es Probleme bei der Aktivierung des DMA-Modus in Verbindung mit einem VIA-Mainboard geben, so wird folgendes Modul an erster Stelle in der <strong>/etc/modules</strong> eingetragen:</p><pre class="notranslate">via82cxxx</pre><p>Die Datei muss zur Bearbeitung in einem Texteditor mit Root-Rechten <sup><a href="#source-3">[3]</a></sup> geöffnet werden.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Bei manchen Systemen funktioniert es nur, wenn <em>amd74xx</em> am Anfang der Datei steht, <em>ide-disk</em> kann man dann auskommentieren. Gleiches Prinzip gilt ebenso für das Modul  <em>via82cxxx</em> .  
</p></div></div></div><div class="section_2"><h3 id="System-bleibt-beim-Booten-haengen">System bleibt beim Booten hängen<a class="headerlink" href="#System-bleibt-beim-Booten-haengen">¶</a></h3><p>
Bei einigen Benutzern tritt das Problem auf, dass nach der Installation von hdparm das System nicht mehr richtig hochfährt. Der Startvorgang bleibt bei der Meldung "Setting disc parameters" einfach stehen und geht nicht weiter.</p><p>Um trotzdem starten zu können, geht man einfach kurz ins BIOS (in der Regel durch 
<span class="key">Entf</span>  auf Desktop-Systemen oder 
<span class="key">F2</span>  auf Notebooks zu erreichen) und verlässt es wieder ohne zu speichern. Danach müsste das System wieder starten. Tritt dieses Problem häufiger auf, gibt es die Möglichkeit hdparm nicht über die <strong>/etc/hdparm.conf</strong> zu starten, sondern über den <a class="internal" href="../skripte/autostart-patch.html">Skripte/Autostart-Patch</a>. Dieser muss einfach heruntergeladen und installiert werden. Danach erstellt man in einem Texteditor mit Root-Rechten <sup><a href="#source-3">[3]</a></sup> die Datei <strong>/etc/autostart/hdparmstart</strong> mit folgendem Inhalt:</p><pre class="notranslate">hdparm -c1 -d1 -k1 /dev/hdc</pre><p>Die Datei muss nun gespeichert und ausführbar gemacht werden. Z.B. im Terminal <sup><a href="#source-2">[2]</a></sup> mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chmod a+x hdparmstart </pre></div></div><p>Nun entfernt man alle nicht auskommentierten Einträge aus der <strong>/etc/hdparm.conf</strong>. Bei nächsten Neustart sollte DMA aktiviert sein und der Rechner nicht mehr hängen bleiben.</p><p>Außerdem sollten gegebenenfalls alle Einstellungen der Geräte im BIOS auf "auto" gesetzt sein. Hilft dies nicht, kann man versuchen den PIO-Mode herabzusetzen, z.B. von "5" auf "4".</p><p>Ohne den Autostart-Patch kann man alternativ versuchen den Start des hdparm-Skriptes beim Booten noch weiter hinaus zu verzögern, indem man es um einige Sekunden verspätet starten lässt. Hierzu öffnet man die <strong>/etc/init.d/hdparm</strong> in einem Terminal mit Root-Rechten <sup><a href="#source-2">[2]</a></sup> und fügt ganz am Anfang folgende erste Zeile hinzu:</p><pre class="notranslate">sleep 2</pre><p>Hilft dies immer noch nicht, kann man den <strong>udev</strong>-Eintrag in der Startreihenfolge in <strong>/etc/rcS.d/</strong> nach hinten verschieben per Terminal mit Root-Rechten <sup><a href="#source-2">[2]</a></sup>: 
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo rm /etc/rcS.d/S*udev </pre></div></div><div class="bash"><div class="contents"><pre class="notranslate">sudo ln -s /etc/init.d/udev /etc/rcS.d/S23udev </pre></div></div><p>Das udev-Startskript kann man zudem auch noch verzögert starten lassen, indem man in die <strong>/etc/init.d/udev</strong> am Anfang folgende erste Zeile hinzufügt</p><pre class="notranslate">sleep 2</pre><p>Bitte beachten: Der hdparm-Eintrag sollte im <strong>/etc/rcS.d</strong>-Verzeichnis NACH dem udev-Eintrag folgen.</p><p>Funktioniert dies alles nicht, könnte ein leicht defektes Mainboard bzw. defekter IDE-Controller auf dem Board vorliegen. Ist ein zweiter unbenutzter vorhanden, sollte man diesen ausprobieren. Allgemein empfiehlt es sich auch, z.B. die Festplatte sowie das CD/DVD-Laufwerk <em>jeweils</em> an ein eigenes Flachbandkabel und Controller anzuschließen.</p><p>Andererseits können die Probleme, dass der Bootprozess bei aktiviertem DMA-Modus bei "Setting disc parameters..." hängen bleibt, in Einzelfällen mit dem <strong>Dateisystem XFS</strong> zusammenhängen. Diese sollten aber i.d.R. nach den Lösungsansätzen in diesem Abschnitt aufzuheben sein.</p></div><div class="section_2"><h3 id="DMA-ist-gesetzt-funktioniert-aber-nicht">DMA ist gesetzt, funktioniert aber nicht<a class="headerlink" href="#DMA-ist-gesetzt-funktioniert-aber-nicht">¶</a></h3><p>
Sollte direkt nach einer Installation, bzw. ohne vom Benutzer vorgenommene Veränderungen, der DMA Modus für ein CD- bzw. DVD-Laufwerk scheinbar schon gesetzt sein, aber nicht funktionieren (z.B. bemerkbar durch ruckelige Filmwiedergabe), kann das Problem behoben werden, indem man den DMA-Modus für das Laufwerk deaktiviert und gleich wieder aktiviert. Danach kann der DMA-Modus dauerhaft aktiviert werden (siehe oben).</p><p>Dieses Problem trat z.B. bei einem Notebook Samsung X20 II auf, bei dem das DVD-Laufwerk als <strong>/dev/hdb</strong> eingebunden ist. Der Versuch den DMA-Modus einzuschalten, obwohl er scheinbar schon aktiv ist, jedoch nicht funktioniert, führt zu einem kompletten Einfrieren des Systems. Die oben aufgezeigte Lösung beseitigt das Problem und aktiviert den DMA Modus korrekt.</p><p><a class="crosslink anchor" href="#rcS.d" id="rcS.d"></a>
</p></div><div class="section_2"><h3 id="hdparm-Eintrag-ist-in-etc-rcS-d-nicht-auffindbar">hdparm-Eintrag ist in /etc/rcS.d/ nicht auffindbar<a class="headerlink" href="#hdparm-Eintrag-ist-in-etc-rcS-d-nicht-auffindbar">¶</a></h3><p>
Damit die vorgenommenen Optionen auch regelmäßig beim Booten geladen werden, ist es notwendig, dass hdparm mit einem Eintrag im entsprechenden Runlevel vorhanden ist. In diesem Fall handelt es sich um den <strong>/etc/rcS.d/</strong>. Sollte dort kein Eintrag vorhanden sein, ist folgendermaßen vorzugehen, um ihn manuell wieder hinzuzufügen:</p><p>Gegebenenfalls muss das Paket hdparm nochmals neuinstalliert werden. Die entsprechende fehlende symbolische Verknüpfung wird mit dem Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ln -s /etc/init.d/hdparm /etc/rcS.d/S21hdparm </pre></div></div><p>erstellt. Nun lässt sich ab Abschnitt "DMA-Modus dauerhaft aktivieren" in diesem Wikiartikel weiter vorgehen.</p></div><div class="section_2"><h3 id="etc-init-d-hdparm-existiert-nicht">/etc/init.d/hdparm existiert nicht<a class="headerlink" href="#etc-init-d-hdparm-existiert-nicht">¶</a></h3><p>
Ggf. muss die Datei <strong>/etc/init.d/hdparm</strong> mit folgendem Inhalt erstellt werden:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/sh</span>

<span class="k">case</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> in
start<span class="o">)</span>
/usr/local/bin/colecho <span class="s2">"Starting hdparm..."</span>
<span class="p">;;</span>
stop<span class="o">)</span>
/usr/local/bin/colecho <span class="s2">"nix zu stoppen..."</span>
<span class="p">;;</span>
*<span class="o">)</span>
<span class="nb">echo</span> <span class="s2">"Usage: </span><span class="nv">$0</span><span class="s2"> {start|stop}"</span>
<span class="nb">exit</span> <span class="m">1</span>
<span class="p">;;</span>
<span class="k">esac</span>
</pre></div>
</td></tr></table></div></div><div class="section_2"><h3 id="DMA-nach-kurzer-Zeit-bzw-Zugriff-auf-CD-DVD-wieder-deaktiviert">DMA nach kurzer Zeit bzw. Zugriff auf CD/DVD wieder deaktiviert<a class="headerlink" href="#DMA-nach-kurzer-Zeit-bzw-Zugriff-auf-CD-DVD-wieder-deaktiviert">¶</a></h3><p>
Dies kann in erster Linie daran liegen, dass DMA z.B. nur für das CD/DVD-Laufwerk deaktiviert wurde. Am sinnvollsten ist es also, DMA sowie den io32_support für alle am Computer befindlichen Laufwerke zu aktivieren. Im letzten Abschnitt ist ein Beispiel einer hdparm.conf-Konfigurationsdatei zu finden.</p></div><div class="section_2"><h3 id="Simplex-DMA-is-claimed-by-other-device">Simplex DMA is claimed by other device<a class="headerlink" href="#Simplex-DMA-is-claimed-by-other-device">¶</a></h3><p>
Ab Ubuntu 8.04 kann es vorkommen, dass das Behandeln des ATA-Laufwerks als SCSI-Gerät Probleme verursacht. Kennzeichnend wäre die Logmeldung:</p><pre class="notranslate">ata2.00: simplex DMA is claimed by other device, disabling DMA</pre><p>Als Lösung fügt man in die <strong>/etc/modprobe.d/aliases</strong> am Ende diese Zeilen an:</p><pre class="notranslate">alias ata_generic off
alias pata_atiixp on</pre></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="../tuning.html">Weitere hdparm-Tuningmöglichkeiten</a> </p></li><li><p><a class="external" href="http://linuxwiki.de/hdparm" rel="nofollow">hdparm im LinuxWiki</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="external" href="http://www.linux-fuer-alle.de/doc_show.php?docid=124&amp;amp;catid=10" rel="nofollow">IDE-Tuning auf "Linux für alle"</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="external" href="http://www.linux-user.de/ausgabe/2006/01/054-hdparm/index.html" rel="nofollow">Festplatten und Laufwerke beschleunigen</a> - Artikel aus LinuxUser 01/06 <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../archiv/dma/a/revision/254167.html">Diese Revision</a> wurde am 12. Juni 2011 17:45 von <a href="https://ubuntuusers.de/user/aasche/">aasche</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../archiv.html">Archiv</a></li>
<li><a href="../archiv/dma.html">DMA</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>