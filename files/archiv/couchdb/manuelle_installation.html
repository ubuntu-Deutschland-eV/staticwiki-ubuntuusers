<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Archiv/CouchDB/Manuelle_Installation › ubuntuusers statisches Wiki</title>
<link href="../../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../../archiv/couchdb/manuelle_installation.html">Manuelle Installation</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Archiv/CouchDB/Manuelle_Installation">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../../wiki/index.html">Index</a></li>
<li><a href="../../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../../wiki.html">Übersicht</a></li>
<li><a href="../../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../../kategorien.html">Kategorie</a></li>
<li><a href="../../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../../howto.html">Howto anlegen</a></li>
<li><a href="../../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../../baustelle.html">Baustellen</a></li>
<li><a href="../../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../../archiv/couchdb/manuelle_installation/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../../archiv/couchdb/manuelle_installation/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../../archiv/couchdb/manuelle_installation/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../../archiv/couchdb/manuelle_installation/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../../archiv/couchdb/manuelle_installation/a/backlinks.html">Manuelle Installation</a></h1>
<div id="page"><div class="box improvable"><h3 class="box improvable">Archivierte Anleitung</h3><div class="contents"><p>
Dieser Artikel wurde archiviert, da er - oder Teile daraus -
nur noch unter einer älteren Ubuntu-Version nutzbar ist. Diese
Anleitung wird vom Wiki-Team weder auf Richtigkeit überprüft
noch anderweitig gepflegt. Zusätzlich wurde der Artikel für
weitere Änderungen gesperrt.
</p></div></div><p>
</p><div class="box advanced"><h3 class="box advanced">Artikel für fortgeschrittene Anwender</h3><div class="contents"><p>
Dieser Artikel erfordert mehr Erfahrung im Umgang mit
Linux und ist daher nur für fortgeschrittene Benutzer
gedacht.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../../pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../../paketquellen_freischalten.html">Bearbeiten von Paketquellen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../../programme_kompilieren.html">Pakete aus dem Quellcode erstellen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="../../editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-6" id="source-6"></a> <a class="internal" href="../../packprogramme.html">Archive entpacken</a></p></li></ol></div></div><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a><ol class="arabic"><li><a class="crosslink" href="#Vorbereitung">Vorbereitung
</a></li><li><a class="crosslink" href="#Pakete-zum-Kompilieren-installieren">Pakete zum Kompilieren installieren
</a></li><li><a class="crosslink" href="#Weitere-Quellen">Weitere Quellen
</a></li><li><a class="crosslink" href="#Kompilieren">Kompilieren
</a></li><li><a class="crosslink" href="#Tests-der-Installation">Tests der Installation
</a></li><li><a class="crosslink" href="#Integration-ins-System">Integration ins System
</a></li><li><a class="crosslink" href="#Aufraeumen">Aufräumen
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>Leider ist die Version von <a class="internal" href="../../couchdb.html">CouchDB</a> aus den Paketquellen von <a class="internal" href="../../lucid.html">Ubuntu 10.04</a> vergleichsweise alt und bietet z.B nur eine rudimentäre Nutzerverwaltung. Wer mit CouchDB entwickeln möchte, ist sicher an einer aktuelleren Version interessiert. Für einen „normalen“ Desktop ist dies jedoch nicht notwendig.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Auf Desktop-Systemen führt die Deinstallation des Paketes <strong>couchdb-bin</strong> zur Deinstallation zahlreicher Abhängigkeiten. Damit gehen eventuell gespeicherte Daten, wenigstens aber der Zugriff darauf verloren. Es wird auch auf Desktop-Systemen laut der <a class="external" href="http://wiki.apache.org/couchdb/Installing_on_Ubuntu" rel="nofollow">Installationsanleitung des Herstellers</a> <img alt="{en}" src="../../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> eine Parallelinstallation empfohlen.
</p></div></div><p>
Es wird aus Gründen der Einfachheit eine Parallelinstallation beschrieben, da alle Informationen für eine Einzelinstallation enthalten sind. Dies hat nebenbei den Vorteil, dass man so mehrere Versionen von CouchDB auf einem Rechner betreiben kann. An diesem Punkt können also die Pakete <strong>couchdb</strong> und <strong>couchdb-bin</strong> installiert sein bzw. bleiben.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
</p><div class="section_2"><h3 id="Vorbereitung">Vorbereitung<a class="headerlink" href="#Vorbereitung">¶</a></h3><p>
Einen laufenden CouchDB-Server sollte man den sicherheitshalber stoppen. Dazu ein Terminal öffnen und folgendes eingeben:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service couchdb stop </pre></div></div><p>Des Weiteren ist es wie immer ratsam, eine <a class="internal" href="../../couchdb.html#Datensicherung">Sicherung</a> der aktuellen CouchDB-Datenbank(en) anzulegen.</p></div><div class="section_2"><h3 id="Pakete-zum-Kompilieren-installieren">Pakete zum Kompilieren installieren<a class="headerlink" href="#Pakete-zum-Kompilieren-installieren">¶</a></h3><p>
Man benötigt zunächst die Quellen von CouchDB. Dazu einfach aus der <a class="external" href="http://www.apache.org/dyn/closer.cgi?path=/couchdb/" rel="nofollow">Liste der Spiegelserver</a> <img alt="{en}" src="../../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> die entsprechende Version heraussuchen und herunterladen und entpacken<sup><a href="#source-6">[6]</a></sup>.</p><p>Weiterhin werden noch folgende Pakete für einen erfolgreichen Bau benötigt. Alle Pakete, die auf "-dev" enden, sowie das Paket <strong>build-essential</strong> können nach Abschluss der Installation entfernt werden.</p><ul><li><p><strong>erlang</strong></p></li><li><p><strong>erlang-dev</strong></p></li><li><p><strong>erlang-eunit</strong></p></li><li><p><strong>libicu-dev</strong></p></li><li><p><strong>libcurl4-openssl-dev</strong></p></li><li><p><strong>libgjs-dev</strong></p></li><li><p><strong>libmozjs-dev</strong></p></li><li><p><strong>build-essential</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install erlang erlang-dev erlang-eunit libicu-dev libcurl4-openssl-dev libgjs-dev libmozjs-dev build-essential </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install erlang erlang-dev erlang-eunit libicu-dev libcurl4-openssl-dev libgjs-dev libmozjs-dev build-essential </pre></div></div><p>
</p></div></div></div><div class="section_2"><h3 id="Weitere-Quellen">Weitere Quellen<a class="headerlink" href="#Weitere-Quellen">¶</a></h3><p>
Leider ist das benötigte Spidermonkey seit Ubuntu 10.04 nicht mehr in den offiziellen Paketquellen enthalten. Um auf einen eigenen Bau zu verzichten, kann man auf die Entwickler-Quellen zugreifen<sup><a href="#source-2">[2]</a></sup>:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo add-apt-repository ppa:launchpad/ppa
sudo aptitude update
sudo aptitude install spidermonkey-bin libmozjs-dev </pre></div></div><p> 
Das PPA kann ebenfalls nach Abschluss der Installation wieder deaktiviert werden.</p></div><div class="section_2"><h3 id="Kompilieren">Kompilieren<a class="headerlink" href="#Kompilieren">¶</a></h3><p>
Nun zum eigentlichen Kompilieren. Es bietet sich an, die Installation als Paket zu sichern und deshalb <strong>checkinstall</strong> zu verwenden. Hierfür muss gegebenenfalls das Paket <a class="interwiki interwiki-packages" href="http://packages.ubuntu.com/checkinstall">checkinstall</a> installiert werden. Danach navigiert man im Terminal in den Ordner mit den entpackten Quellen und führt dort folgenden Befehl aus<sup><a href="#source-4">[4]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">./configure --prefix=/opt/couchdb-1.0.1 </pre></div></div><p>Danach kann wie gewohnt kompiliert und installiert werden<sup><a href="#source-3">[3]</a></sup>. Nimmt man den Weg über checkinstall, können die Quellen nach der Installation sämtlich gelöscht werden. Es ist aber in diesem Fall dringend ein Paketname zu verwenden, der in den Quellen noch nicht verwendet wird. Zum Beispiel: <strong>couchdb-bin-custom-1.0.1</strong></p></div><div class="section_2"><h3 id="Tests-der-Installation">Tests der Installation<a class="headerlink" href="#Tests-der-Installation">¶</a></h3><p>
Die installierten Dateien sind nun in <strong>/opt/couchdb-1.0.1/</strong> zu finden. Sollte der Benutzer <strong>couchdb</strong> zu diesem Zeitpunkt noch nicht im System angelegt sein, ist dies nun zu tun<sup><a href="#source-4">[4]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo adduser --system --home=/opt/couchdb-1.0.1/ --no-create-home --disabled-password couchdb --shell=/bin/bash </pre></div></div><p>Um den CouchDB-Server startbar zu machen, müssen noch verschiedene Verzeichnisrechte angepasst werden. Da die die genannten Verzeichnisse erst beim ersten Start des Servers erstellt werden, sind sie eventuell vorher anzulegen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mkdir -p couchdb /opt/couchdb-1.0.1/var/{lib,log,run}/couchdb/
sudo chown -R couchdb /opt/couchdb-1.0.1/var/{lib,log,run}/couchdb/ /opt/couchdb-1.0.1/etc/couchdb </pre></div></div><p>
Der Server kann nun zum Test gestartet werden. Es ist darauf zu achten, dass ein eventuell konkurrierender CouchDB-Dienst gestoppt ist.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /opt/couchdb-1.0.1/etc/init.d/couchdb start </pre></div></div><p>
Jetzt sollte der Server laufen und anfragen entgegen nehmen. Es empfiehlt sich, an dieser Stelle die integrierten Testroutinen einmal anzustoßen, damit man einen groben Überblick über die implementierten Funktionalitäten bekommt:</p><div class="bash"><div class="contents"><pre class="notranslate">netstat -ant | grep 5984  </pre></div></div><p>
Dieser Befehl sollte folgendes Ergebnis produzieren:</p><pre class="notranslate">tcp        0      0 127.0.0.1:5984          0.0.0.0:*               LISTEN</pre><p>
Eine kurze Anfrage via <a class="internal" href="../../curl.html">cURL</a> sollte die Version und eine Willkommensmeldung zurückgeben (das Paket <strong>curl</strong> muss eventuell zusätzlich installiert werden):</p><div class="bash"><div class="contents"><pre class="notranslate">curl http://127.0.0.1:5984/ </pre></div></div><p>
Abschließend noch ein Funktionstest mittels Webbrowser, wozu man folgende URL aufruft:</p><pre class="notranslate">http://127.0.0.1:5984/_utils/couch_tests.html?script/couch_tests.js</pre><p>
Dann alle Tests durchlaufen lassen. Dies funktioniert nur bei einer Desktop Installation, wo auf dem gleichen Rechner auch ein Browser installiert ist. Bei Server-Installationen muss vorher in <strong>/opt/couchdb-1.0.1/etc/couchdb/local.ini</strong> die Direktive <code class="notranslate">bind_address</code> so abgeändert werden, dass der CouchDB Dienst an einem erreichbaren IP-Adresse und Port lauscht. Alternativ kann man sich den Port natürlich auch ein seinen eigenen lokalen Host binden. In diesem Fall sollte man darauf achten, dass nicht am eigenen <code class="notranslate">localhost</code> ein CouchDB-Dienst läuft. Dieser ist entweder zu stoppen oder ein anderer Port anzugeben.</p><div class="bash"><div class="contents"><pre class="notranslate">ssh -N -f -L 5984:127.0.0.1:5984 benutzer@server </pre></div></div><p>
Sollten alle Tests abgeschlossen sein, ist der Server zunächst wieder zu stoppen.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /opt/couchdb-1.0.1/etc/init.d/couchdb stop </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Es ist möglich, dass nicht alle Tests erfolgreich abgeschlossen werden können. Dies bedeutet nicht unbedingt, dass die Datenbank nicht nutzbar ist oder nicht funktioniert.
</p></div></div></div><div class="section_2"><h3 id="Integration-ins-System">Integration ins System<a class="headerlink" href="#Integration-ins-System">¶</a></h3><p>
Nun ist der CouchDB-Server installiert, aber noch nicht in das System integriert. Um den Server wie gewohnt als Dienst startbar zu machen, wird ein Link auf den Starter unter <strong>/etc/init.d/</strong> erzeugt.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ln -s /opt/couchdb-1.0.1/etc/init.d/couchdb /etc/init.d/couchdb-1.0.1 </pre></div></div><p>
Danach kann man den Dienst wie gewohnt starten:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/couchdb-1.0.1 start </pre></div></div><p>
Auch der alte CouchDB-Server ist natürlich noch startbar:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/couchdb-1.0.1 stop
sudo /etc/init.d/couchdb start </pre></div></div><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Wenn man beide Server auf dem gleichen Port unter einer gemeinsamen IP startet, können unter Umständen Zombie-Prozesse entstehen. Diese müssen dann gewaltsam beendet werden, damit der Server wieder erfolgreich an einen Port binden kann. Es ist daher unbedingt notwendig, für jeden CouchDB-Server die Voreinstellungen in <strong>PREFIX/etc/couchdb/local.ini</strong> anzupassen. 
</p></div></div><p>
Sind die Voreinstellungen korrekt, können beide Server problemlos nebeneinander betrieben werden. Abschließend fügt man den neuen Server noch zum Autostart hinzu.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo update-rc.d couchdb-1.0.1 defaults </pre></div></div></div><div class="section_2"><h3 id="Aufraeumen">Aufräumen<a class="headerlink" href="#Aufraeumen">¶</a></h3><p>
Die folgenden Schritten sind optional, halten aber das System sauber.</p><ul><li><p>Pakete entfernen:</p><ul><li><p><strong>build-essential</strong></p></li><li><p><strong>libicu-dev</strong></p></li><li><p><strong>libcurl4-openssl-dev</strong></p></li><li><p><strong>libgjs-dev</strong></p></li><li><p><strong>libmozjs-dev</strong></p></li></ul></li><li><p>Entwickler-Quellen ausschalten<sup><a href="#source-2">[2]</a></sup>, z.B. über<sup><a href="#source-4">[4]</a></sup>: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo rm /etc/apt/sources.list.d/launchpad-ppa-lucid.list
sudo aptitude update </pre></div></div></li></ul><p>
</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="../../couchdb.html">CouchDB</a> - Hauptartikel</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../../archiv/couchdb/manuelle_installation/a/revision/850273.html">Diese Revision</a> wurde am 16. November 2015 15:38 von <a href="https://ubuntuusers.de/user/frustschieber/">frustschieber</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../../startseite.html">Wiki</a></li>
<li><a href="../../archiv.html">Archiv</a></li>
<li><a href="../../archiv/couchdb.html">CouchDB</a></li>
<li><a href="../../archiv/couchdb/manuelle_installation.html">Manuelle Installation</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>