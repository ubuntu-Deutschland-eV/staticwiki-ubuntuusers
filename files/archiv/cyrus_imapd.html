<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Archiv/Cyrus_IMAPD › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../archiv/cyrus_imapd.html">Cyrus IMAPD</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Archiv/Cyrus_IMAPD">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../archiv/cyrus_imapd/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../archiv/cyrus_imapd/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../archiv/cyrus_imapd/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../archiv/cyrus_imapd/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../archiv/cyrus_imapd/a/backlinks.html">Cyrus IMAPD</a></h1>
<div id="page"><div class="box improvable"><h3 class="box improvable">Archivierte Anleitung</h3><div class="contents"><p>
Dieser Artikel wurde archiviert, da er - oder Teile daraus -
nur noch unter einer älteren Ubuntu-Version nutzbar ist. Diese
Anleitung wird vom Wiki-Team weder auf Richtigkeit überprüft
noch anderweitig gepflegt. Zusätzlich wurde der Artikel für
weitere Änderungen gesperrt.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../pakete_installieren.html">Pakete installieren</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../editor.html">Einen Editor öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation-der-benoetigten-Pakete">Installation der benötigten Pakete
</a></li><li><a class="crosslink" href="#Konfiguration-von-Cyrus">Konfiguration von Cyrus
</a></li><li><a class="crosslink" href="#Einrichten-der-Authentifizierung-saslauthd">Einrichten der Authentifizierung (saslauth...</a></li><li><a class="crosslink" href="#Einrichten-der-Postfaecher">Einrichten der Postfächer
</a></li><li><a class="crosslink" href="#Einrichten-von-Postfix">Einrichten von Postfix
</a></li><li><a class="crosslink" href="#Mails-importieren">Mails importieren
</a></li><li><a class="crosslink" href="#Mails-wiederherstellen">Mails wiederherstellen
</a></li><li><a class="crosslink" href="#Fehlersuche">Fehlersuche
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="./cyrus_logo.png" class="image-left" src="../_/65fe028fa1e5a24b9768e8232e2728050239940b.png"/>
Die folgende Anleitung zeigt, wie man den <a class="external" href="http://cyrusimap.web.cmu.edu/" rel="nofollow">Cyrus</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> IMAP-Mail-Server installiert und einrichtet. Das <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Internet_Message_Access_Protocol">IMAP</a>-Protokoll ermöglicht es, Mailboxen inkl. Ordnerstruktur und Statusdaten auf dem Server vorzuhalten. So kann man sich von verschiedenen Rechnern einloggen und erhält immer ein konsistentes Bild. Außerdem beinhaltet der Cyrus-IMAP-Server mit <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/sieve">sieve</a> noch eine Technik, um automatische Filterung und Verteilung auf verschiedene Ordner gleich auf dem Server beim Eintreffen der elektronischen Post zu erledigen.</p><div class="section_1"><h2 id="Installation-der-benoetigten-Pakete">Installation der benötigten Pakete<a class="headerlink" href="#Installation-der-benoetigten-Pakete">¶</a></h2><p>
Folgende Pakete müssen installiert werden <sup><a href="#source-1">[1]</a></sup>:</p><ul><li><p><strong>cyrus-imapd-2.2</strong> (<em>universe</em>, der IMAP-Teil des Mail-Servers Cyrus )</p></li><li><p><strong>cyrus-admin-2.2</strong> (<em>universe</em>, Administrations-Tools für cyrus )</p></li><li><p><strong>sasl2-bin</strong> (benötigt cyrus zum Authentifizieren der Benutzer)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install cyrus-imapd-2.2 cyrus-admin-2.2 sasl2-bin </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install cyrus-imapd-2.2 cyrus-admin-2.2 sasl2-bin </pre></div></div><p>
</p></div></div><p>Außerdem benötigt man als Grundvoraussetzung auf jeden Fall einen funktionierenden <em>"Mail Transfer Agent"</em> (MTA), z.B. <a class="internal" href="../postfix.html">Postfix</a>. Optional kann dann noch eine Weboberfläche wie <a class="internal" href="../squirrelmail.html">Squirrelmail</a> installiert werden, wenn man Zugriff auf die Mails über ein Webfrontend haben will.</p></div><div class="section_1"><h2 id="Konfiguration-von-Cyrus">Konfiguration von Cyrus<a class="headerlink" href="#Konfiguration-von-Cyrus">¶</a></h2><p>
Die Konfiguration des IMAP-Servers erfolgt über die Dateien <strong>/etc/imapd.conf</strong> und <strong>/etc/cyrus.conf</strong>. Die <strong>imapd.conf</strong>-Datei bedarf einiger Anpassungen, die man in einem Editor <sup><a href="#source-2">[2]</a></sup> mit Root-Rechten vornehmen muss:</p><ol class="arabic"><li><p>Entfernen des Kommentar-Zeichens (#) vor <em>"admins: cyrus"</em></p></li><li><p>Entfernen des Kommentar-Zeichens (#) vor <em>"sasl_mech_list: PLAIN"</em></p></li><li><p>Ändern von <em>"sasl_pwcheck_method"</em> in <em>"saslauthd"</em></p></li><li><p>auskommentieren von <em>"sasl_auto_transition: no"</em> (# davorsetzen)  </p></li></ol><p>Auszug aus der <strong>/etc/imapd.conf</strong>:</p><pre class="notranslate">admins: cyrus
sasl_mech_list: PLAIN
sasl_pwcheck_method: saslauthd
#sasl_auto_transition: no</pre><p>IMAPs scheint standardmäßig nicht aktiviert zu sein. Wer sein Mails über eine verschlüsselte Verbindung abholen möchte, sollte in der Datei <strong>/etc/cyrus.conf</strong> an folgender Stelle das Kommentarzeichen <code class="notranslate">#</code> entfernen:</p><pre class="notranslate">imaps           cmd="imapd -s -U 30" listen="imaps" prefork=0 maxchild=10</pre><p>Zusätzlich ist es notwendig, dass der Benutzer <strong>cyrus</strong> Zugriff auf die Standard-Zertifikate in <strong>/etc/ssl/private/</strong> bekommt <sup><a href="#source-3">[3]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo adduser cyrus ssl-cert </pre></div></div><p>Danach noch prüfen, ob die Rechte passen:</p><div class="bash"><div class="contents"><pre class="notranslate">ls -l /etc/ssl/private/ </pre></div></div><p>
Ausgabe:
</p><pre class="notranslate">total 4
-rw-r----- 1 root ssl-cert 887 Jun 14 20:54 ssl-cert-snakeoil.key</pre><p>
Anschließend muss der Cyrus-Server komplett neu gestartet werden. Ein Reload der Konfiguration reicht nicht aus.</p></div><div class="section_1"><h2 id="Einrichten-der-Authentifizierung-saslauthd">Einrichten der Authentifizierung (saslauthd)<a class="headerlink" href="#Einrichten-der-Authentifizierung-saslauthd">¶</a></h2><p>
Die Authentifizierung, also das Überprüfen des Benutzerpassworts, wird bei Cyrus über das <em>Simple Authentication and Security Layer (SASL)</em> geregelt.</p><p>Nicht umsonst steht in dem von Ubuntu ausgelieferten <strong>/etc/imapd.conf</strong> folgender Kommentar über der Einstellung zu <em>"sasl_pwcheck_method"</em>:</p><pre class="notranslate"># Do note that, since sasl will be run as user cyrus, you may have a lot of
# trouble to set this up right.</pre><p>Was hier scheinbar unnötig kompliziert wirkt, ist aber im Grunde eine der Stärken von Cyrus. Mit Cyrus ist es möglich, auf verschiedene Weisen anzugeben, welche Benutzer mit welchen Passwörtern Zugriff auf Postfächer haben. So kann vielen Leuten ein Mail-Account eingerichtet werden, ohne dass sie im System als Benutzer eingerichtet sein müssen. Das ist vor allem für Firmen interessant.</p><p>Das System wird hier jedoch so eingerichtet, dass dieselben Benutzernamen und Passwörter wie für das restliche Ubuntu-System auch gelten.</p><p>Die Authentifizierung übernimmt Cyrus nicht selbst, sondern fragt dazu beim "<code class="notranslate">saslauthd</code>"-Daemon nach, d.h. man muss "<code class="notranslate">saslauthd</code>" so konfigurieren, dass er im System nachsieht, wenn er einen Benutzer überprüft, also direkt in der Shadow-Passwort-Datei.</p><p>Dazu einen Texteditor <sup><a href="#source-2">[2]</a></sup> mit Rootrechten öffnen und die Datei <strong>/etc/default/saslauthd</strong> wie folgt ändern:</p><ol class="arabic"><li><p>das Kommentar-Zeichen (#) vor <em>"START=yes"</em> entfernen. (ggf. <em>"START=no"</em> in <em>"START=yes"</em> ändern)</p></li><li><p><em>MECHANISMS="pam"</em> in <em>MECHANISMS="shadow"</em> ändern. </p></li></ol><p>
Die <strong>/etc/default/saslauthd</strong> sollte dann so aussehen:</p><pre class="notranslate">START=yes
MECHANISMS="shadow"</pre><p>In einem Terminal <sup><a href="#source-3">[3]</a></sup> startet man nun "<code class="notranslate">saslauthd</code>" und Cyrus neu:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/saslauthd restart
sudo /etc/init.d/cyrus2.2 restart </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Ein Neustart von saslauthd und cyrus reicht teilweise nicht. Besser ist es nach der Einrichtung und vor den nächsten Schritten das komplette System neu zu starten.
</p></div></div><p>Wer Cyrus in Verbindung mit der Postfix-Authentifizierung über SASL und dem Socket in der Chroot-Umgebung (<strong>/var/spool/postfix/var/run/saslauthd</strong>) nutzen möchte, sollte unter <strong>/var/run</strong> einen symbolischen Link nach <strong>/var/spool/postfix/var/run/saslauthd</strong> anlegen. Ansonsten ist die Anmeldung bei Cyrus aufgrund des fehlenden Sockets nicht möglich.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ln -s /var/spool/postfix/var/run/saslauthd /var/run/saslauthd </pre></div></div></div><div class="section_1"><h2 id="Einrichten-der-Postfaecher">Einrichten der Postfächer<a class="headerlink" href="#Einrichten-der-Postfaecher">¶</a></h2><p>
Bei der Installation von Cyrus hat Ubuntu bereits den Benutzer <em>cyrus</em> angelegt. Dieser Benutzer fungiert als Cyrus-Administrator. Damit man Postfächer anlegen kann, muss dieser Benutzer daher zunächst einmal ein Passwort erhalten:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo passwd cyrus </pre></div></div><p>Nun kann man in die Administationskonsole von Cyrus wechseln, welche zuerst nach dem eben gesetzten Passwort fragt und einen dann mit einem eigenen Prompt erwartet:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo cyradm --user cyrus --server localhost
IMAP Password:
localhost&gt; </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Sollte die Server-Anmeldung fehlschlagen, hilft folgendes:</p><div class="bash"><div class="contents"><pre class="notranslate">adduser cyrus mail
chown root:mail -R /var/lib/cyrus
chown root:mail -R /var/spool/cyrus
chmod 770 -R /var/lib/cyrus
chmod 770 -R /var/spool/cyrus </pre></div></div><p>Diese Lösung stammt aus dem <a class="crosslink post" href="https://forum.ubuntuusers.de/post/1395454/">Forum</a>.
</p></div></div><p>Mit dem Befehl <em>help</em> kann man ausgeben lassen, welche Befehle die Administationskonsole versteht. Mit <em>quit</em> verlässt man die Konsole.</p><p>Da Cyrus die Postfächer in einer eigenen Ordnerstruktur unabhängig von den normalen Unix-Mailboxen verwaltet, muss jedes Benutzerpostfach hier mit folgenden Befehlen eigens eingerichtet werden:</p><div class="bash"><div class="contents"><pre class="notranslate">cm user.karl
cm user.otto </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Es ist wichtig, dass für jede Mailbox das Präfix "<strong>user.</strong>" verwendet wird.
</p></div></div><p>Falls man einmal eine Mailbox löschen möchte, dann muss man dem Administratorbenutzer "<code class="notranslate">cyrus</code>" zunächst die Rechte dazu geben:</p><div class="bash"><div class="contents"><pre class="notranslate">sam user.otto cyrus c
dm user.otto </pre></div></div><p>Nun sollte man sich mit dem Mail-Client beim IMAP-Server einloggen können. Das Postfach ist natürlich noch leer, aber man kann Ordner anlegen und Mails hineinkopieren.</p></div><div class="section_1"><h2 id="Einrichten-von-Postfix">Einrichten von Postfix<a class="headerlink" href="#Einrichten-von-Postfix">¶</a></h2><p>
Wie oben erwähnt, braucht man noch einen <em>MTA</em>, der so konfiguriert werden muss, dass er eingehende Mail beim Cyrus-Server einliefert. Hier wird das Prozedere für den MTA <a class="internal" href="../postfix.html">Postfix</a> beschrieben. Eine funktionierende Postfix-Installation wird vorausgesetzt, im folgenden geht es nur noch um die cyrus-spezifischen Anpassungen.</p><p>Die praktischste Möglichkeit, Postfix zur Zusammenarbeit mit dem Cyrus-Imapd zu bewegen, bietet das sogenannte <em>Local Mail Transfer Protocol (LMTP)</em>, eine abgespeckte Version des Mailprotokolls SMTP, das sowohl von Postfix als auch vom Cyrus-Imapd verstanden wird. Die Kommunikation läuft dabei über ein Unix-Socket namens <strong>/var/run/cyrus/socket/lmtp</strong>.</p><p>Dann muss noch in der Datei <strong>/etc/postfix/master.cf</strong> - durch Setzen eines "<strong>n</strong>" an der richtigen Stelle - für den <em>lmtp</em>-Service die <em>chroot</em>-Option deaktiviert werden <sup><a href="#source-3">[3]</a></sup>:</p><pre class="notranslate">lmtp      unix  -       -       n       -       -       lmtp</pre><p>Außerdem muss in der Datei <strong>/etc/postfix/main.cf</strong> folgende Zeile hinzugefügt werden, damit eingehende Mail auch wirklich an <em>lmtp</em> weitergeleitet wird:</p><pre class="notranslate">mailbox_transport = lmtp:unix:/var/run/cyrus/socket/lmtp</pre><p>Damit das lmtp-Subsystem von Postfix auch auf den Socket des Cyrus-Daemons zugreifen darf, muss der Systembenutzer <em>postfix</em> noch der Gruppe <em>mail</em> hinzugefügt und Postfix natürlich wieder neu gestartet werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo adduser postfix mail
sudo /etc/init.d/postfix restart </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>An dieser Stelle sollte der Server bereits funktionsfähig sein. 
</p></div></div></div><div class="section_1"><h2 id="Mails-importieren">Mails importieren<a class="headerlink" href="#Mails-importieren">¶</a></h2><p>
Folgende Schritte sind notwendig, um auf externen Sicherungsmedien gespeicherte Mailordner und Mails zurückzuspielen.</p><p>Nach Installation und Anlegen der Benutzer erstellt man mit einem Mail-Client seiner Wahl die Ordnerstruktur seiner Mails. Hierzu orientiert man sich ggf. an der Ordnerstruktur der gespeicherten Mails. Anschließend werden die gespeicherten Mails <strong>ohne</strong> die drei Cyrus-Dateien in die entsprechenden Verzeichnisse kopiert. Bei Ubuntu befinden sich diese im Verzeichnis <strong>/var/spool/cyrus/mail/</strong>.</p><p>Wichtig ist nun die Änderung der Benutzerrechte in einer Root-Shell (den Befehl für den jeweiligen Benutzer anpassen):</p><div class="bash"><div class="contents"><pre class="notranslate">chown -R cyrus:mail /var/spool/cyrus/mail/ANFANGSBUCHSTABE-DES-BENUTZERNAMENS/user/BENUTZERNAME </pre></div></div><p>Anschließend bedient man sich des Administrationstools von cyrus und stellt die Mailordnerstruktur, die vorher noch angelegt werden müssen (z.B. mit Mailclient), wieder her:</p><div class="bash"><div class="contents"><pre class="notranslate">cyradm --user cyrus --server localhost
reconstruct -r user.BENUTZERNAME.ordner.unterordner </pre></div></div><p>Die Option <code class="notranslate">-r</code> stellt rekursiv auch die Unterordner wieder her. Falls dies nicht funktionert (einfach im Mail-Client prüfen), muss der Befehl für jedes Unterverzeichnis separat aufgerufen werden. Die Befehlszeile mit <strong>reconstruct</strong> muss für die eigenen Bedürfnisse (Benutzername und Ordnerstrukturen) natürlich angepasst werden.</p></div><div class="section_1"><h2 id="Mails-wiederherstellen">Mails wiederherstellen<a class="headerlink" href="#Mails-wiederherstellen">¶</a></h2><p>
Falls die <strong>cyrus.header</strong>-Dateien in den Unterordnern vorhanden sind, kann die Ordner-Struktur auch wieder hergestellt werden, ohne sie vorher mit einem Mail-Client per Hand zu erstellen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo -u cyrus /usr/sbin/cyrreconstruct -C /etc/imapd.conf -rf user.BENUTZERNAME </pre></div></div><p>Der Befehl sollte als Benutzer cyrus ausgeführt werden, dafür ist das <code class="notranslate">sudo -u cyrus</code> zuständig. <code class="notranslate">cyrreconstruct</code> benötigt die IMAP-Konfigurationsdatei als Parameter. <code class="notranslate">-r</code> veranlasst, dass alle Unterorder mit einbezogen werden und <code class="notranslate">-f</code> veranlasst, das alle Ordner, in denen die Datei <strong>cyrus.header</strong> existiert, in die Subdatenbank aufgenommen werden.</p><p>Anschließend kann der Mail-Client auf alle Ordner und die wiederhergestellten Mails wieder zugreifen.</p></div><div class="section_1"><h2 id="Fehlersuche">Fehlersuche<a class="headerlink" href="#Fehlersuche">¶</a></h2><p>
Leider bekommt man bei vielen Fehlern keine besonders schöne Fehlermeldung.</p><p>Wenn z.B. die Authentifizierung bei cyrus nicht klappt, dann spuckt cyrus lediglich <em>"cyradm: cannot authenticate to server as user cyrus"</em> aus. Was der eigentliche Grund ist, muss man sich aus den Log-Files rauslesen.</p><p>Bei der Fehlersuche sollte man folgende Dateien prüfen:</p><ul><li><p>Cyrus schreibt Fehlermeldungen standardmäßig nach <strong>/var/log/mail.err</strong> oder <strong>/var/log/mail.info</strong></p></li><li><p>Sasl2 nutzt dazu die Datei <strong>/var/log/auth.log</strong></p></li></ul><p>
</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://www.schiessle.org/howto/debian-imap-howto/" rel="nofollow">Debian-IMAP-Howto</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../archiv/cyrus_imapd/a/revision/829658.html">Diese Revision</a> wurde am 2. August 2015 19:40 von <a href="https://ubuntuusers.de/user/aasche/">aasche</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../archiv.html">Archiv</a></li>
<li><a href="../archiv/cyrus_imapd.html">Cyrus IMAPD</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>