<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Archiv/scponly › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../archiv/scponly.html">scponly</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Archiv/scponly">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../archiv/scponly/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../archiv/scponly/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../archiv/scponly/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../archiv/scponly/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../archiv/scponly/a/backlinks.html">scponly</a></h1>
<div id="page"><div class="box improvable"><h3 class="box improvable">Archivierte Anleitung</h3><div class="contents"><p>
Dieser Artikel wurde archiviert, da er - oder Teile daraus -
nur noch unter einer älteren Ubuntu-Version nutzbar ist. Diese
Anleitung wird vom Wiki-Team weder auf Richtigkeit überprüft
noch anderweitig gepflegt. Zusätzlich wurde der Artikel für
weitere Änderungen gesperrt.
</p></div></div><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Scponly ist ab <a class="internal" href="../precise.html">Ubuntu 12.04</a> nicht mehr in den offiziellen Paketquellen enthalten. Alternative: ab OpenSSH 4.9 das eingebaute sftp-Jail verwenden. Anleitungen: <a class="external" href="http://en.wikibooks.org/wiki/OpenSSH/Cookbook/SFTP" rel="nofollow">Wikibooks</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>, <a class="external" href="http://www.online-tutorials.net/internet-netzwerk/openssh-mit-sftp-und-chroot/tutorials-t-29-324.html" rel="nofollow">Online Tutorial</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>.
</p></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../editor.html">Einen Editor öffnen</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Konfiguration">Konfiguration
</a><ol class="arabic"><li><a class="crosslink" href="#SUID-Bit-setzen">SUID-Bit setzen
</a></li><li><a class="crosslink" href="#dev-null-im-chroot-erstellen">/dev/null im chroot erstellen
</a></li></ol></li><li><a class="crosslink" href="#Externes-Verzeichnis-einbinden">Externes Verzeichnis einbinden
</a><ol class="arabic"><li><a class="crosslink" href="#Temporaer-einbinden">Temporär einbinden
</a></li><li><a class="crosslink" href="#Dauerhaft-einbinden">Dauerhaft einbinden
</a></li></ol></li><li><a class="crosslink" href="#Test">Test
</a></li><li><a class="crosslink" href="#Problembehebung">Problembehebung
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/terminal.png" class="image-left" src="../_/e81889fd6e485dd32e1cde611eabc18abced7993.png"/>
<a class="interwiki interwiki-github" href="https://github.com/scponly/scponly/wiki">scponly</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> erlaubt es eine <a class="internal" href="../ftp.html">FTP</a>-ähnliche Up- und Downloadmöglichkeit einzurichten, allerdings über das verschlüsselte <a class="internal" href="../ssh.html">SSH</a>-Protokoll. Damit werden Passwörter und Daten nicht, wie bei FTP, im Klartext übertragen, sondern verschlüsselt. Der Benutzer erhält dabei aber keinen Zugriff auf die Kommandozeile. Außerdem kann jedem Benutzer entweder ein eigenes Verzeichnis zugewiesen werden oder es können gemeinsame Verzeichnisse eingerichtet werden, auf die dann ausgewählte Benutzer Zugriff haben.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
scponly ist bis <a class="internal" href="../oneiric.html">Ubuntu 11.10</a> über die Paketverwaltung verfügbar und kann über das gleichnamige Paket</p><ul><li><p><strong>scponly</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install scponly </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install scponly </pre></div></div><p>
</p></div></div><p>installiert<sup><a href="#source-1">[1]</a></sup> werden.</p></div><div class="section_1"><h2 id="Konfiguration">Konfiguration<a class="headerlink" href="#Konfiguration">¶</a></h2><p>
scponly bringt ein Skript mit, mit dem man einfach und komfortabel neue Benutzer in eine <a class="internal" href="../chroot.html">chroot</a>-Umgebung "einsperren" kann (der Benutzer darf noch nicht existieren, sonst bricht das Script ab). Dieses Skript findet man unter <strong>/usr/share/doc/scponly/setup_chroot/</strong>. Führt <sup><a href="#source-2">[2]</a></sup> man nun</p><div class="bash"><div class="contents"><pre class="notranslate">cd /usr/share/doc/scponly/setup_chroot
sudo gunzip setup_chroot.sh.gz
sudo chmod +x setup_chroot.sh
sudo ./setup_chroot.sh </pre></div></div><p>aus, so wird das Skript entpackt und man wird von einem Wizard durch die Konfiguration geführt. Das Homeverzeichnis wird erstellt, falls es noch nicht existiert und kann im Script angegeben werden (Standard: <strong>/home/user</strong>)</p><div class="section_2"><h3 id="SUID-Bit-setzen">SUID-Bit setzen<a class="headerlink" href="#SUID-Bit-setzen">¶</a></h3><p>
Außerdem muss noch das fehlende SUID-Bit auf <strong>/usr/sbin/scponlyc</strong> gesetzt werden (<a class="interwiki interwiki-bug" href="https://launchpad.net/bugs/51085">51085</a>). Dies wird durch folgenden Befehl erledigt (bei/ab Lucid nicht mehr nötig):</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chmod u+s /usr/sbin/scponlyc </pre></div></div></div><div class="section_2"><h3 id="dev-null-im-chroot-erstellen">/dev/null im chroot erstellen<a class="headerlink" href="#dev-null-im-chroot-erstellen">¶</a></h3><p>
(bei lucid nicht nötig)
Leider funktioniert nicht bei allen Installation der sftp-Server auf Anhieb, oft ist das Problem hier, dass in der chroot-Umgebung <strong>/dev/null</strong> nicht existiert und einige Dateien in <strong>/lib</strong> der chroot-Umgebung fehlen. Dies kann man aber mit der folgenden Befehlsfolge beheben:</p><div class="bash"><div class="contents"><pre class="notranslate">cd /home/USERNAME
sudo mkdir dev
cd dev
sudo mknod -m 666 null c 1 3
cp /lib/libnss_files* -av /home/USERNAME/lib </pre></div></div></div></div><div class="section_1"><h2 id="Externes-Verzeichnis-einbinden">Externes Verzeichnis einbinden<a class="headerlink" href="#Externes-Verzeichnis-einbinden">¶</a></h2><p>
Möchte man nun z.B. das Verzeichnis <strong>/media/stuff</strong> für den Benutzer mit einbinden, dann erstellt man im jeweiligen Verzeichnis des Benutzers einen neuen Ordner mit dem Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">mkdir /home/USERNAME/stuff </pre></div></div><div class="section_2"><h3 id="Temporaer-einbinden">Temporär einbinden<a class="headerlink" href="#Temporaer-einbinden">¶</a></h3><p>
Mit dem Befehl:</p><div class="bash"><div class="contents"><pre class="notranslate">mount -o bind /media/stuff /home/USERNAME/stuff </pre></div></div><p>
wird das Laufwerk nun temporär eingebunden.</p></div><div class="section_2"><h3 id="Dauerhaft-einbinden">Dauerhaft einbinden<a class="headerlink" href="#Dauerhaft-einbinden">¶</a></h3><p>
Will man dem Benutzer auch nach Neustarts Zugriff auf das Verzeichnis gewähren, so muss man es in der <a class="internal" href="../fstab.html">fstab</a> mit folgendem Zusatz einbinden:</p><pre class="notranslate">/media/stuff   /home/USERNAME/stuff   none   rw,bind   0 0</pre><p>Das <code class="notranslate">rw</code> (read/write) kann man durch ein <code class="notranslate">ro</code> (read only) ersetzen<sup><a href="#source-3">[3]</a></sup>, wenn man dem Benutzer nur lesend Zugriff gewähren will.</p></div></div><div class="section_1"><h2 id="Test">Test<a class="headerlink" href="#Test">¶</a></h2><p>
Nun kann man sich mit seinem neu erstellten Benutzer und einem <a class="internal" href="../ssh.html">SCP-Client</a> verbinden und testen, ob der neue Benutzer tatsächlich nur Lese- und Schreibrechte auf das zuvor angegebene Verzeichnis hat.</p></div><div class="section_1"><h2 id="Problembehebung">Problembehebung<a class="headerlink" href="#Problembehebung">¶</a></h2><p>
</p><ul><li><p><a class="interwiki interwiki-bug" href="https://launchpad.net/bugs/620019">620019</a>: die SFTP-Session wird nach dem Anmelden sofort geschlossen (10.04, 10.10, 11.04, scponlyc)</p></li></ul><p>
</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="interwiki interwiki-github" href="https://github.com/scponly/scponly/wiki">Wiki</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://hirnwix.blog.de/2007/11/03/scponly_mit_ubuntu_6_01_chrooted_scp_sft~3242039" rel="nofollow">SCPonly mit Ubuntu 6.10 chrooted scp/sftp</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Blogbeitrag 11/2007</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../archiv/scponly/a/revision/594257.html">Diese Revision</a> wurde am 2. Mai 2013 22:06 von <a href="https://ubuntuusers.de/user/frustschieber/">frustschieber</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../archiv.html">Archiv</a></li>
<li><a href="../archiv/scponly.html">scponly</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>