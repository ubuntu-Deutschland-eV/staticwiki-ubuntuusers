<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Archiv/ISDN-Karten/AVM_FRITZ!Card_PCI/DKMS › ubuntuusers statisches Wiki</title>
<link href="../../../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../../../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../../../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../../../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../../../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../../../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../../../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../../../archiv/isdn-karten/avm_fritz!card_pci/dkms.html">DKMS</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Archiv/ISDN-Karten/AVM_FRITZ!Card_PCI/DKMS">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../../../wiki/index.html">Index</a></li>
<li><a href="../../../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../../../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../../../wiki.html">Übersicht</a></li>
<li><a href="../../../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../../../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../../../kategorien.html">Kategorie</a></li>
<li><a href="../../../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../../../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../../../howto.html">Howto anlegen</a></li>
<li><a href="../../../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../../../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../../../baustelle.html">Baustellen</a></li>
<li><a href="../../../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../../../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../../../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../../../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../../../archiv/isdn-karten/avm_fritz!card_pci/dkms/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../../../archiv/isdn-karten/avm_fritz!card_pci/dkms/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../../../archiv/isdn-karten/avm_fritz!card_pci/dkms/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../../../archiv/isdn-karten/avm_fritz!card_pci/dkms/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../../../archiv/isdn-karten/avm_fritz!card_pci/dkms/a/backlinks.html">DKMS</a></h1>
<div id="page"><div class="box improvable"><h3 class="box improvable">Archivierte Anleitung</h3><div class="contents"><p>
Dieser Artikel wurde archiviert, da er - oder Teile daraus -
nur noch unter einer älteren Ubuntu-Version nutzbar ist. Diese
Anleitung wird vom Wiki-Team weder auf Richtigkeit überprüft
noch anderweitig gepflegt. Zusätzlich wurde der Artikel für
weitere Änderungen gesperrt.
</p></div></div><p>
</p><div class="box advanced"><h3 class="box advanced">Artikel für fortgeschrittene Anwender</h3><div class="contents"><p>
Dieser Artikel erfordert mehr Erfahrung im Umgang mit
Linux und ist daher nur für fortgeschrittene Benutzer
gedacht.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../../../pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../../../packprogramme.html">Archive entpacken</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../../../sudo.html">Root-Rechte</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../../../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="../../../editor.html">Einen Editor öffnen</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Konfiguration">Konfiguration
</a></li><li><a class="crosslink" href="#Verwendung-von-DKMS">Verwendung von DKMS
</a></li><li><a class="crosslink" href="#Ergebnis">Ergebnis
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/pci.png" class="image-left" src="../../../_/6a030fdb04c663c73b86bca6e8fd7949a0a28389.png"/>
Dieser Artikel dient als Ergänzung zu <a class="internal" href="../../../archiv/isdn-karten/avm_fritz!card_pci.html">Archiv/ISDN-Karten/AVM FRITZ!Card PCI</a>. Ab Ubuntu 8.10 <a class="internal" href="../../../intrepid_ibex.html">Intrepid Ibex</a> muss das zum erfolgreichen Betrieb notwendige Kernelmodul <code class="notranslate">fcpci</code> selbst aus den Quellen übersetzt werden. Dieser Vorgang ist im genannten Artikel ausführlich beschrieben.</p><p>Prinzipiell muss das Kompilieren des Kernelmoduls bei jedem Kernelupdate manuell wiederholt werden. Einen Ausweg bietet die Verwendung von <a class="internal" href="../../../dkms.html">DKMS</a>. Über diesem Weg wird das Kernelmodul – falls erforderlich – automatisch neu kompiliert.</p><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Empfehlenswert ist zuerst das manuelle Übersetzen (wie im Hauptartikel beschrieben), um das reibungslose Kompilieren und die Nutzung des Kernelmoduls zu testen. Wenn das soweit funktioniert, kann man sich mit der im folgenden beschriebenen Lösung beschäftigen. 
</p></div></div><p><img alt="Wiki/Icons/synaptic.png" class="image-right" src="../../../_/5f59c9b9aac5b4e2ab9c85b868bf348c72dc10aa.png"/>
</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Neben dem Paket:</p><ul><li><p><strong>dkms</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../../../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../../../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install dkms </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install dkms </pre></div></div><p>
</p></div></div><p>
sind zusätzlich die im Hauptartikel unter <a class="internal missing" href="../../../isdn-karten/avm_fritz!card_pci.html#Vorbereitung">Vorbereitung</a> erwähnten Pakete erforderlich <sup><a href="#source-1">[1]</a></sup>.</p><p>Der Quelltext wird in einen Ordner unterhalb von <strong>/usr/src/</strong> kopiert. Die Benennung des Unterordners folgt dabei immer dem Schema <code class="notranslate">MODULNAME-VERSION</code>, also praktisch <strong>/usr/src/fcpci-VERSION</strong>. Mit <code class="notranslate">VERSION</code> ist hier die Version des Quelltexts gemeint, nicht die Version des installierten Kernels (auch wenn die Versionsbezeichnung des Quelltexts daran angelehnt ist).</p><p><img alt="Wiki/Icons/settings.png" class="image-right" src="../../../_/44291e0203c1fed32d9b02c10c138504ec425e3d.png"/>
</p></div><div class="section_1"><h2 id="Konfiguration">Konfiguration<a class="headerlink" href="#Konfiguration">¶</a></h2><p>
</p><div class="section_2"><h3 id="Ubuntu-13-04">Ubuntu 13.04<a class="headerlink" href="#Ubuntu-13-04">¶</a></h3><p>
Für <a class="internal" href="../../../raring.html">Ubuntu 13.04</a> wurde eine eigene Skript-Lösung entwickelt. Es muss nichts mehr manuell installiert werden, da das angebotene Skript alle Abhängigkeiten selbst auflöst und bei Bedarf nachinstalliert. Darüber hinaus wurde das Herunterladen des Quelltextes, das Kompilieren und das Einbinden mittels DKMS komplett in dieses Skript ausgelagert. Dieses Skript kümmert sich auch um das korrekte Anlegen von <a class="internal" href="../../../udev.html">udev</a>-Regeln und erzeugt eine passende <a class="internal" href="../../../kernelmodule.html#Automatisches-Laden-verhindern-Blacklisting">Blacklist</a>. Außerdem gibt es einen Workaround für die zum Zeitpunkt der Erstellung dieses Skriptes (Ende Mai 2013) immer noch bei Ubuntu defekte Installation des Pakets <a class="interwiki interwiki-packages" href="http://packages.ubuntu.com/capiutils">capiutils</a>. Kurz: es ist als "Rundum-Glücklich-Skript" gedacht. Soweit zumindest die Theorie, da es bisher nur auf sehr wenigen Systemen getestet wurde.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Bitte helft dem Autor <a class="external" href="http://www.belug.de/hilfe-howtos-fcpci.html" rel="nofollow">Lutz Willek</a> <img alt="{de}" src="../../../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> bei der Verbesserung des Skripts und schickt ihm die angelegte Protokolldatei zu (auch wenn alles erfolgreich geklappt hat). Diese Datei findet man als <strong>/var/log/fcpci_build.log</strong>.
</p></div></div><div class="section_3"><h4 id="Neuinstallation">Neuinstallation<a class="headerlink" href="#Neuinstallation">¶</a></h4><p>
Diese Vorgehensweise ist nur zur Neuinstallation auf einem frisch installiertem Systems gedacht. Alle Programme schließen, da der Rechner am Ende der Installation neu gestartet wird. Hinweis für Server-Betreiber: Der Neustart lässt sich umgehen, wird aber ausdrücklich empfohlen.</p><p>Ein Terminal öffnen: 
</p><div class="bash"><div class="contents"><pre class="notranslate">wget -O install.sh http://belug.de/~lutz/pub/fcpci/install380.sh
chmod +x install.sh
sudo ./install.sh  </pre></div></div></div><div class="section_3"><h4 id="Update-einer-funktionierenden-Installation">Update einer funktionierenden Installation<a class="headerlink" href="#Update-einer-funktionierenden-Installation">¶</a></h4><p>
Wenn man ein bestehendes System nutzt und ein Update dieses Systems auf Ubuntu 13.04 plant, dann ist eine Installation nur des Kernelmoduls mit DKMS unter Umständen besser geeignet. Das angebotene Skript verändert bereits vorhandene Konfigurationsdateien, was bestehende Installation unbrauchbar machen könnte. In diesem Fall sollte das Skript nur als Anregung dienen, was man alles noch machen könnte.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo su -
apt-get install -y linux-headers-generic dkms build-essential python-apport python-gi make gcc
cd /usr/src/
wget https://belug.de/~lutz/pub/fcpci/fritz-fcpci-3.8.0.tar.bz2
tar xjvf fritz-fcpci-3.8.0.tar.bz2
dkms install -m fcpci -v 3.8.0
exit </pre></div></div></div></div><div class="section_2"><h3 id="Ab-Ubuntu-11-04">Ab Ubuntu 11.04<a class="headerlink" href="#Ab-Ubuntu-11-04">¶</a></h3><p>
Nach dem Entpacken <sup><a href="#source-2">[2]</a></sup> mit Root-Rechten <sup><a href="#source-3">[3]</a></sup> in den Ordner <strong>/usr/src/fcpci-VERSION/</strong> muss noch eine <a class="internal" href="../../../ln.html">symbolische Verknüpfung</a> entsprechend der Systemarchitektur (32-/64-Bit) im Ordner <strong>/usr/src/fcpci-VERSION/src/</strong> angelegt werden <sup><a href="#source-4">[4]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ln -s 32_fcpci-lib.o fcpci-lib.o </pre></div></div><p>
oder</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ln -s 64_fcpci-lib.o fcpci-lib.o </pre></div></div><p>
Die Datei <strong>/usr/src/fcpci-VERSION/dkms.conf</strong> ist bereits im Archiv enthalten und braucht nicht mehr gesondert erstellt zu werden.</p></div><div class="section_2"><h3 id="Bis-Ubuntu-10-10">Bis Ubuntu 10.10<a class="headerlink" href="#Bis-Ubuntu-10-10">¶</a></h3><p>
</p><ol class="arabic"><li><p>Der Quelltext muss mit Root-Rechten in den Ordner <strong>/usr/src/fcpci-VERSION/</strong> entpackt werden.</p></li><li><p>je nachdem, ob man ein 32- oder 64-Bit System einsetzt, im Ordner <strong>/usr/src/fcpci-VERSION/src/</strong> eine symbolische Verknüpfung anlegen: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo ln -s 32_fcpci-lib.o fcpci-lib.o </pre></div></div><p> oder </p><div class="bash"><div class="contents"><pre class="notranslate">sudo ln -s 64_fcpci-lib.o fcpci-lib.o </pre></div></div></li><li><p>Die Datei <strong>/usr/src/fcpci-VERSION/dkms.conf</strong> mit Root-Rechten und folgendem Inhalt anlegen <sup><a href="#source-5">[5]</a></sup>: </p><pre class="notranslate">PACKAGE_NAME=fcpci
PACKAGE_VERSION=VERSION           ## beispielsweise 2.6.34

DEST_MODULE_LOCATION=/extra
BUILT_MODULE_NAME=fcpci
BUILT_MODULE_LOCATION=src/

MAKE="'make' -C src/ all"
CLEAN="'make' -C src/ clean"
AUTOINSTALL="yes"</pre></li></ol><p>
<img alt="Wiki/Icons/develop.png" class="image-right" src="../../../_/a1a1cf93aadb058302a86738e0a49687b41844f8.png"/>
</p></div></div><div class="section_1"><h2 id="Verwendung-von-DKMS">Verwendung von DKMS<a class="headerlink" href="#Verwendung-von-DKMS">¶</a></h2><p>
Das Kompilieren mittels DKMS wird mit folgenden Schritten getestet (Beispiel für Ubuntu 10.10 - bitte die Version anpassen):</p><ol class="arabic"><li><p>Mit dem Befehl: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo dkms add -m fcpci -v 2.6.34 </pre></div></div><p> wird das Kompilieren von <code class="notranslate">fcpci</code> vorbereitet.</p></li><li><p>Der eigentliche Kompilierungsvorgang wird mit: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo dkms build -m fcpci -v 2.6.34 </pre></div></div><p> gestartet.</p></li><li><p>Abschließend erfolgt die Installation des Kernelmoduls: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo dkms install -m fcpci -v 2.6.34 </pre></div></div></li><li><p>Nur erforderlich, wenn man das Kernelmodul wieder aus DKMS entfernen möchte: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo dkms remove -m fcpci -v 2.6.34 --all </pre></div></div></li></ol><p>
</p></div><div class="section_1"><h2 id="Ergebnis">Ergebnis<a class="headerlink" href="#Ergebnis">¶</a></h2><p>
Zukünftig wird nun bei jedem Kernel-Update das Kernelmodul <code class="notranslate">fcpci</code> automatisch neu kompiliert. Beispiel:</p><pre class="notranslate">...
Richte linux-image-generic ein (2.6.35.27.35) ...
Richte linux-generic ein (2.6.35.27.35) ...
Richte linux-headers-2.6.35-27 ein (2.6.35-27.48) ...
Richte linux-headers-2.6.35-27-generic ein (2.6.35-27.48) ...
Examining /etc/kernel/header_postinst.d.
run-parts: executing /etc/kernel/header_postinst.d/dkms 2.6.35-27-generic /boot/vmlinuz-2.6.35-27-generic<strong class="highlighted">
 * dkms: running auto installation service for kernel 2.6.35-27-generic                              
 *       fcpci (2.6.34)...                                                                     [ OK ]</strong>
...</pre></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="../../../isdn-karten.html">ISDN-Karten</a> <img alt="{Übersicht}" src="../../../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li><li><p><a class="internal" href="../../../dkms.html">DKMS</a> - Grundlagen zum <strong>D</strong>ynamic <strong>K</strong>ernel <strong>M</strong>odule <strong>S</strong>upport</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../../../archiv/isdn-karten/avm_fritz!card_pci/dkms/a/revision/850463.html">Diese Revision</a> wurde am 16. November 2015 21:50 von <a href="https://ubuntuusers.de/user/aasche/">aasche</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../../../startseite.html">Wiki</a></li>
<li><a href="../../../archiv.html">Archiv</a></li>
<li><a href="../../../archiv/isdn-karten.html">ISDN-Karten</a></li>
<li><a href="../../../archiv/isdn-karten/avm_fritz!card_pci.html">AVM FRITZ!Card PCI</a></li>
<li><a href="../../../archiv/isdn-karten/avm_fritz!card_pci/dkms.html">DKMS</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../../../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../../../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../../../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../../../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>