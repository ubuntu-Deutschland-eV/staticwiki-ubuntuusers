<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Archiv/sieve › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../archiv/sieve.html">sieve</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Archiv/sieve">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../archiv/sieve/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../archiv/sieve/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../archiv/sieve/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../archiv/sieve/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../archiv/sieve/a/backlinks.html">sieve</a></h1>
<div id="page"><div class="box improvable"><h3 class="box improvable">Archivierte Anleitung</h3><div class="contents"><p>
Dieser Artikel wurde archiviert, da er - oder Teile daraus -
nur noch unter einer älteren Ubuntu-Version nutzbar ist. Diese
Anleitung wird vom Wiki-Team weder auf Richtigkeit überprüft
noch anderweitig gepflegt. Zusätzlich wurde der Artikel für
weitere Änderungen gesperrt.
</p></div></div><p>
</p><div class="box advanced"><h3 class="box advanced">Artikel für fortgeschrittene Anwender</h3><div class="contents"><p>
Dieser Artikel erfordert mehr Erfahrung im Umgang mit
Linux und ist daher nur für fortgeschrittene Benutzer
gedacht.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../editor.html">Einen Editor öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Benutzerdefiniertes-Regelwerk">Benutzerdefiniertes Regelwerk
</a><ol class="arabic"><li><a class="crosslink" href="#Dateiheader">Dateiheader
</a></li><li><a class="crosslink" href="#Mails-in-Ordner-verschieben">Mails in Ordner verschieben
</a></li><li><a class="crosslink" href="#Mails-zurueckweisen">Mails zurückweisen
</a></li><li><a class="crosslink" href="#Automatische-Abwesenheitsnachrichten">Automatische Abwesenheitsnachrichten
</a></li></ol></li><li><a class="crosslink" href="#Aktivierung-von-Sieve">Aktivierung von Sieve
</a></li><li><a class="crosslink" href="#Grafische-Helfer-zum-Konfigurieren-der-Sieve-Skripte">Grafische Helfer zum Konfigurieren der Sie...</a><ol class="arabic"><li><a class="crosslink" href="#Thunderbird">Thunderbird
</a></li><li><a class="crosslink" href="#kMail">kMail
</a></li><li><a class="crosslink" href="#Squirrelmail-Webmailer">Squirrelmail (Webmailer)
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/sieve">sieve</a> ist ein skriptbasierter Mailfilter mit sehr umfangreichen Möglichkeiten. Obwohl mit <code class="notranslate">websieve</code> eine graphische Oberfläche installiert werden kann, hat die Vorgehensweise über eine Textdatei und Konsole entscheidende Vorteile. So kann man die Filterregeln auch zu einem späteren Zeitpunkt einfacher ordnen und hat mehr Kontrolle über die Syntax.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Sieve wird bereits mit <a class="internal" href="../archiv/cyrus_imapd.html">Cyrus IMAPD</a> installiert. Die erfolgreiche Konfiguration und Inbetriebnahme von Cyrus IMAPD wird an dieser Stelle vorausgesetzt. Ansonsten ist Sieve natürlich auch mit <a class="internal" href="../archiv/dovecot.html">Dovecot</a> verwendbar - eine Möglichkeit über den pythonbasierten Sieve-Daemon <a class="external" href="http://www.woozle.org/~neale/src/pysieved/" rel="nofollow">pysieved</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>  findet man im Beitrag <a class="external" href="http://manurevah.com/blah/en/linux/pysieved-on-workaround.php" rel="nofollow">Pysieved on workaround mail</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p></div><div class="section_1"><h2 id="Benutzerdefiniertes-Regelwerk">Benutzerdefiniertes Regelwerk<a class="headerlink" href="#Benutzerdefiniertes-Regelwerk">¶</a></h2><p>
Sieve ist ein leistungsfähiger Mailfilter, der benutzerabhängig ist. Da jeder Nutzer eigene Filterregeln entsprechend seiner Bedürfnisse hat, ist dieses Vorgehen sinnvoll. Deshalb wird hier nur beispielhaft erläutert, welche Filterregeln existieren und wie diese in der Skriptsprache aufgestellt werden. Die Abfragen erfolgen mit <code class="notranslate">if ... elsif ... else</code>, so dass eine hierarchische Filterung möglich und sinnvoll ist. Die komplette Syntax und Erläuterungen sind unter den <a class="crosslink" href="#Links">Links</a> angegeben.</p><p>Normalerweise erwartet sieve die Filterregeln im Verzeichnis <strong>/var/spool/sieve</strong>. Dieses Verzeichnis erfordert aber andere Rechte, deshalb bietet es sich an, eine versteckte Textdatei <strong>.sieve-mail-filter</strong> im Heimatverzeichnis zu erstellen <sup><a href="#source-1">[1]</a></sup>, um sie vor versehentlichen Zugriffen zu schützen.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Gewöhnlich ist man auf einem Server/ virtuellen Server als root eingeloggt. Mit</p><div class="bash"><div class="contents"><pre class="notranslate">su - Benutzername </pre></div></div><p>in die shell des Benutzers wechseln. Man landet im Home-Verzeichnis des Benutzers. Nach dem Einrichten von Sieve</p><div class="bash"><div class="contents"><pre class="notranslate">exit </pre></div></div><p>eingeben.
</p></div></div><div class="section_2"><h3 id="Dateiheader">Dateiheader<a class="headerlink" href="#Dateiheader">¶</a></h3><p>
Im Kopf der Textdatei wird sieve mitgeteilt, welche Module benötigt werden. Kommentare werden durch eine Raute (<em>#</em>) eingeleitet oder durch Slash und Asterisk (<code class="notranslate">/* Kommentar */</code>) eingeschlossen.</p><pre class="notranslate"># Datum, User
require "fileinto";  /* Modul zur Verschiebung der Mails, immer erforderlich */
require "reject";    /* Modul zur Zurückweisung, optional */
require "vacation";  /* Modul für Abwesenheitsbenachrichtigungen, optional */</pre></div><div class="section_2"><h3 id="Mails-in-Ordner-verschieben">Mails in Ordner verschieben<a class="headerlink" href="#Mails-in-Ordner-verschieben">¶</a></h3><p>
<code class="notranslate">fileinto</code> verschiebt Mails in die angegeben Unterordner. Filtern lässt sich nach verschiedenen Schlüsselwörtern. <code class="notranslate">anyof</code> stellt dabei eine ODER-Verknüpfung dar, <code class="notranslate">allof</code> eine UND-Verknüpfung.</p><pre class="notranslate"># Mails verschieben
if header :contains "from" ["ebay.de", "ebay.com"] { fileinto "INBOX.ebay"; }
elsif header :contains "subject" "Ltsp-discuss" { fileinto "INBOX.mailinglisten.ltsp"; }
elsif header :contains "subject" "Capisuite-users" { fileinto "INBOX.mailinglisten.capisuite"; }
elsif allof (header :contains "from" "zitate.at", header :contains "subject" "Zitat des Tages")
{ fileinto "INBOX.mailinglisten.zitate"; }
else { fileinto "INBOX"; }</pre></div><div class="section_2"><h3 id="Mails-zurueckweisen">Mails zurückweisen<a class="headerlink" href="#Mails-zurueckweisen">¶</a></h3><p>
Falls Mails ab einer bestimmten Größe zurückgewiesen werden sollen, verwendet man <code class="notranslate">reject</code>: 
</p><pre class="notranslate"># mails zurückweisen
if size :over 10M { reject;}</pre><p>Um Mails von Spammern zurückzuweisen, empfiehlt sich ein <a class="internal" href="../amavis-spam-virenfilter.html">Spamfilter</a> oder das Löschen der Mails mit <code class="notranslate">discard</code>:</p><pre class="notranslate">if header :contains "subject" "viagra" { discard; }</pre><p>Ein tatsächliches Zurückweisen hätte zur Folge, dass der Spammer durch die Rückmeldung die Echtheit der Adresse bestätigt bekommt.</p><p>Damit <code class="notranslate">reject</code> keine Fehlermeldung produziert, muss in der Datei <strong>/etc/postfix/master.cf</strong> folgende Zeilen wie folgt geändert werden <sup><a href="#source-1">[1]</a></sup>:</p><pre class="notranslate">  #flags=R user=cyrus argv=/usr/sbin/cyrdeliver -e -m ${extension} ${user}
  #folgende zeile ersetzt obere zeile, um reject funktion zu ermöglichen
  flags= user=cyrus argv=/usr/sbin/cyrdeliver -r ${sender} -m ${extension} ${user}</pre></div><div class="section_2"><h3 id="Automatische-Abwesenheitsnachrichten">Automatische Abwesenheitsnachrichten<a class="headerlink" href="#Automatische-Abwesenheitsnachrichten">¶</a></h3><p>
Bei Abwesenheit (z.B. Urlaub), wenn man keine Mails beantworten kann, verschickt sieve automatisch eine Standardantwort. Ein bestimmter Absender erhält nur eine einzige Abwesenheitsbenachrichtigung, auch wenn er mehrere E-Mails schickt. Eine weitere Benachrichtigung erhält er erst wieder nach sieben Tagen. Will man diesen Wert ändern, so dass bis zur nächsten Benachrichtigung z.B. 14 Tage gewartet wird, so benutzt man dafür die Option <code class="notranslate">:days &lt;Anzahl Tage&gt;</code>, die vor der Option <code class="notranslate">:addresses</code> eingefügt wird. Die Abwesenheitsfunktion erfordert im Dateikopf das Modul <code class="notranslate">vacation</code>:</p><pre class="notranslate"># Abwesenheitsnachrichten
vacation :days &lt;Anzahl Tage&gt; :addresses ["Adresse1", "Adresse2"] "Text";</pre></div></div><div class="section_1"><h2 id="Aktivierung-von-Sieve">Aktivierung von Sieve<a class="headerlink" href="#Aktivierung-von-Sieve">¶</a></h2><p>
Die Datei muss noch entsprechend aktiviert werden. Nach Aufruf von <code class="notranslate">sieveshell</code> im Terminal <sup><a href="#source-2">[2]</a></sup></p><div class="bash"><div class="contents"><pre class="notranslate">sieveshell -u BENUTZERNAME localhost </pre></div></div><p>wird die Eingabe des IMAP-Kennworts des Nutzers verlangt. Danach kann man die Konfigurationsdatei hochladen:</p><div class="bash"><div class="contents"><pre class="notranslate">put .sieve-mail-filter
activate .sieve-mail-filter
quit </pre></div></div><p>Bei fehlerhafter Syntax erhält man eine Fehlermeldung mit einer Zeilenangabe, so dass sich die Fehlersuche einfach gestaltet. <code class="notranslate">help</code> listet die verfügbaren Kommandos und Erläuterungen zu sieveshell.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Sollte die nachfolgende Fehlermeldung auftauchen:
</p><pre class="notranslate">unable to connect to server at /usr/bin/sieveshell line 179, &lt;STDIN&gt; line 1\\</pre><p>
und damit die Verbindung zur sieveshell scheitern, hilft folgendes:</p><div class="bash"><div class="contents"><pre class="notranslate">adduser cyrus mail  #(soweit noch nicht beim Einrichten von cyrus erfolgt)
chown root:mail -R /var/spool/sieve
chmod 770 -R /var/spool/sieve </pre></div></div><p>
</p></div></div><p>Für jeden Nutzer muss das entsprechende benutzerspezifische Regelwerk aktiviert werden.</p></div><div class="section_1"><h2 id="Grafische-Helfer-zum-Konfigurieren-der-Sieve-Skripte">Grafische Helfer zum Konfigurieren der Sieve-Skripte<a class="headerlink" href="#Grafische-Helfer-zum-Konfigurieren-der-Sieve-Skripte">¶</a></h2><p>
Zumindest, wenn man pysieved verwendet - welcher als Daemon läuft - hat man den Vorteil, dass man clientseitig konfigurieren kann, ohne <a class="internal" href="../ssh.html">SSH</a>-Zugriff oder dergleichen auf den Server haben zu müssen. Folgende E-Mail-Clients können zum konfigurieren genutzt werden (kein Anspruch auf Vollständigkeit):</p><div class="section_2"><h3 id="Thunderbird">Thunderbird<a class="headerlink" href="#Thunderbird">¶</a></h3><p>
Unter <a class="internal" href="../thunderbird.html">Thunderbird</a> ist das Sieve-Skript mit dem <a class="external" href="http://sieve.mozdev.org/installation.html" rel="nofollow">Sieve Plugin</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> möglich (alternativ auch auf der <a class="external" href="https://addons.mozilla.org/de/thunderbird/addon/2548" rel="nofollow">Mozilla-Thunderbird-Plugin-Seite</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>):</p><p><img alt="./sieve-thunderbird.png" class="image-center" src="../_/9a9cd435084056f0d7e330f13fc8a81e0c917cfe.png"/></p></div><div class="section_2"><h3 id="kMail">kMail<a class="headerlink" href="#kMail">¶</a></h3><p>
Ebenso kann es mit kMail verwendet werden:</p><p><img alt="./sieve-kmail.png" class="image-center" src="../_/c222868674b9717fd4ce895bb75de36389fec3fa.png"/></p></div><div class="section_2"><h3 id="Squirrelmail-Webmailer">Squirrelmail (Webmailer)<a class="headerlink" href="#Squirrelmail-Webmailer">¶</a></h3><p>
Wenn man als Webmailer <a class="internal" href="../squirrelmail.html">Squirrelmail</a> verwendet, gibt es auch ein sehr gutes Plugin namens <a class="external" href="http://email.uoa.gr/avelsieve/" rel="nofollow">AvelSieve</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>, bei dem man wahlweise textbasiert, umgangssprachlich oder grafisch seine Sieve-Filter konfigurieren kann:</p><p><img alt="./sieve-squirrelmail.png" class="image-center" src="../_/0cd68bc47c53a0dec35ef382f500e2bb2f85d7ed.png"/></p><p><a class="crosslink anchor" href="#Links" id="Links"></a>
</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://sieve.info" rel="nofollow">offizielle Website</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p><a class="external" href="http://www.heise.de/open/artikel/74991/from/netze" rel="nofollow">c't-Special Linux Mailserver mit Spamfilter</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="external" href="http://www.ietf.org/rfc/rfc3028.txt" rel="nofollow">RFC 3028 Sieve: A Mail Filtering Language</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p><a class="external" href="http://www.uni-koeln.de/rrzk/mail/software/sieve/sieve.html" rel="nofollow">kommentierte Beispiele</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../archiv/sieve/a/revision/833498.html">Diese Revision</a> wurde am 30. August 2015 15:11 von <a href="https://ubuntuusers.de/user/aasche/">aasche</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../archiv.html">Archiv</a></li>
<li><a href="../archiv/sieve.html">sieve</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>