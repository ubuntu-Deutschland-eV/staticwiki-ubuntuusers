<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Archiv/OpenAFS › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../archiv/openafs.html">OpenAFS</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Archiv/OpenAFS">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../archiv/openafs/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../archiv/openafs/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../archiv/openafs/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../archiv/openafs/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../archiv/openafs/a/backlinks.html">OpenAFS</a></h1>
<div id="page"><div class="box improvable"><h3 class="box improvable">Archivierte Anleitung</h3><div class="contents"><p>
Dieser Artikel wurde archiviert, da er - oder Teile daraus -
nur noch unter einer älteren Ubuntu-Version nutzbar ist. Diese
Anleitung wird vom Wiki-Team weder auf Richtigkeit überprüft
noch anderweitig gepflegt. Zusätzlich wurde der Artikel für
weitere Änderungen gesperrt.
</p></div></div><p>
</p><div class="box advanced"><h3 class="box advanced">Artikel für fortgeschrittene Anwender</h3><div class="contents"><p>
Dieser Artikel erfordert mehr Erfahrung im Umgang mit
Linux und ist daher nur für fortgeschrittene Benutzer
gedacht.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../sudo.html">Root-Rechte</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Voraussetzungen">Voraussetzungen
</a></li><li><a class="crosslink" href="#Installation-Kompilierung-des-AFS-Services">Installation/Kompilierung des AFS-Services...</a></li><li><a class="crosslink" href="#Installation-des-Clients">Installation des Clients
</a></li><li><a class="crosslink" href="#Konfiguration-des-Clients">Konfiguration des Clients
</a></li><li><a class="crosslink" href="#Authentifizierung-mit-Kerberos-5">Authentifizierung mit Kerberos 5
</a></li><li><a class="crosslink" href="#Automatische-Authentifizierung-bei-Benutzeranmeldung">Automatische Authentifizierung bei Benutze...</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><a class="external" href="http://openafs.org/" rel="nofollow">OpenAFS</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ist eine Open-Source-Implementierung des <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Andrew_File_System"><strong>A</strong>ndrew <strong>F</strong>ile <strong>S</strong>ystem</a> für verschiedene Betriebssysteme. Dabei handelt es sich um ein verteiltes Netzwerkdateisystem. Dieser Artikel beschreibt die Vorgehensweise zur Einbindung des AFS unter Ubuntu mithilfe von OpenAFS als Client sowie die dazu notwendige Einrichtung der <a class="internal" href="../kerberos.html">Kerberos</a>-Authentifizierung.</p><div class="section_1"><h2 id="Voraussetzungen">Voraussetzungen<a class="headerlink" href="#Voraussetzungen">¶</a></h2><p>
OpenAFS benötigt eine ext3-formatierte Partition für den Cache. Da Ubuntu als Standard ext4-formatierte Partitionen verwendet, muss daher eine extra Cache-Partition mit ext3 erstellt werden. Diese Partition sollte für Single-User-Maschinen ca. 128 Mbyte, für Multi-User-Maschinen 1-2 Gigabyte groß sein. Mittlerweile sollte OpenAFS auch auf ext4-formatierten Partitionen nutzbar sein.</p></div><div class="section_1"><h2 id="Installation-Kompilierung-des-AFS-Services">Installation/Kompilierung des AFS-Services<a class="headerlink" href="#Installation-Kompilierung-des-AFS-Services">¶</a></h2><p>
Damit auch nach einem Kernel-Update die OpenAFS-Kernelmodule automatisch neu kompiliert werden, müssen nachfolgende Pakete installiert werden:</p><ul><li><p><strong>dkms </strong></p></li><li><p><strong>openafs-modules-dkms</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install dkms  openafs-modules-dkms </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install dkms  openafs-modules-dkms </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="Installation-des-Clients">Installation des Clients<a class="headerlink" href="#Installation-des-Clients">¶</a></h2><p>
</p><ul><li><p><strong>openafs-client</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install openafs-client </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install openafs-client </pre></div></div><p>
</p></div></div><p>Hierbei wird die AFS-Zelle abgefragt. Die AFS-Cache-Größe darf maximal 95% der Cache-Partition belegen. Die weiteren Einstellungen sollten je nach AFS-Zelle beziehungsweise nach deren Vorgaben aktiviert werden. Muss eine Einstellung später nochmals geändert werden, hilft folgender Befehl:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo dpkg-reconfigure openafs-client </pre></div></div></div><div class="section_1"><h2 id="Konfiguration-des-Clients">Konfiguration des Clients<a class="headerlink" href="#Konfiguration-des-Clients">¶</a></h2><p>
Anschließend müssen noch zwei der Konfigurations-Dateien in <strong>/etc/openafs</strong> geändert werden <sup><a href="#source-2">[2]</a></sup><sup><a href="#source-3">[3]</a></sup>. In der Datei <strong>cacheinfo</strong> muss der Pfad des AFS-Caches im Format:</p><pre class="notranslate">/afs:/&lt;ort des AFS-Caches/openafs&gt;:&lt;Größe Des AFS-Caches in KB&gt;</pre><p>zum Beispiel :
</p><pre class="notranslate">/afs:/var/cache/openafs:100000</pre><p>abgeändert werden.</p><p>In der Datei <strong>CellServDB</strong> werden alle Einträge entfernt, die nicht zur eigenen AFS-Zelle gehören. Dies ist maßgeblich für die Übersicht und die Geschwindigkeit beim Zugriff auf das AFS. Anschließend wird der AFS-Dienst neu gestartet:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/openafs-client restart </pre></div></div></div><div class="section_1"><h2 id="Authentifizierung-mit-Kerberos-5">Authentifizierung mit Kerberos 5<a class="headerlink" href="#Authentifizierung-mit-Kerberos-5">¶</a></h2><p>
Für die notwendige Authentifizierung am AFS wird hier die Installation der <a class="internal" href="../kerberos.html">Kerberos</a>-5-Authentifizierung beschrieben. Benötigte Pakete dazu:</p><ul><li><p><strong>krb5-user</strong> (<em>universe</em>)</p></li><li><p><strong>openafs-krb5</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install krb5-user openafs-krb5 </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install krb5-user openafs-krb5 </pre></div></div><p>
</p></div></div><p>Es muss erneut die AFS-Zelle eingegeben werden. Man kann zwar auch in der Datei <strong>/etc/krb5.conf</strong> die Einstellungen verändern, aber dies ist grundsätzlich nicht notwendig.</p><p>Nun sollte das AFS-Login in vollem Umfang zur Verfügung stehen. Die Anmeldung erfolgt im Terminal <sup><a href="#source-1">[1]</a></sup> über:</p><div class="bash"><div class="contents"><pre class="notranslate">kinit BENUTZERNAME </pre></div></div><p>
zum Erhalt eines Kerberos-Tickets und:</p><div class="bash"><div class="contents"><pre class="notranslate">aklog </pre></div></div><p>
zum Erhalt eines AFS-Tokens.</p></div><div class="section_1"><h2 id="Automatische-Authentifizierung-bei-Benutzeranmeldung">Automatische Authentifizierung bei Benutzeranmeldung<a class="headerlink" href="#Automatische-Authentifizierung-bei-Benutzeranmeldung">¶</a></h2><p>
Ubuntu bringt ein <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Pluggable_Authentication_Modules">PAM</a>-Modul für die Verwaltung der Kerberos-Tickets und ein weiteres für die AFS-Tokens mit. Diese können folgendermaßen installiert werden:</p><ul><li><p><strong>libpam-krb5 </strong></p></li><li><p><strong>libpam-afs-session</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install libpam-krb5  libpam-afs-session </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install libpam-krb5  libpam-afs-session </pre></div></div><p>
</p></div></div><p>
Die Datei <strong>/etc/pam.d/login</strong> muss um folgende drei Zeilen in einem Editor <sup><a href="#source-2">[2]</a></sup> mit Root-Rechten <sup><a href="#source-3">[3]</a></sup> erweitert werden:</p><pre class="notranslate">auth    optional pam_krb5.so try_first_pass
session optional pam_krb5.so
session optional pam_openafs_session.so</pre><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Für die grafische Anmeldung müssen diese drei Zeilen für den jeweils verwendeten <a class="internal" href="../displaymanager.html">Displaymanager</a> ebenfalls in <strong>/etc/pam.d/gdm</strong>, <strong>/etc/pam.d/kdm</strong> etc. eingetragen werden.
</p></div></div><p>Für die grafische Benutzeranmeldung muss außerdem in der Datei <strong>/etc/passwd</strong> das AFS-Nutzerkennzeichen in der folgenden Form eingetragen werden<sup><a href="#source-2">[2]</a></sup>,<sup><a href="#source-3">[3]</a></sup>.</p><pre class="notranslate">&lt;afs-nutzerkennzeichen&gt;:USE KERBEROS:&lt;userid&gt;:&lt;groupid&gt;:&lt;name(opt)&gt;,&lt;raum(opt)&gt;,telefenonnummer(opt)&gt;:&lt;/afshomeverzeichnis&gt;:/bin/bash</pre></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://openafs.org/" rel="nofollow">Projektseite</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Andrew_File_System">Andrew File System</a></p></li><li><p><a class="internal" href="../dkms.html">DKMS</a> - Module automatisch aktualisieren</p></li><li><p><a class="internal" href="../kerberos.html">Kerberos</a></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../archiv/openafs/a/revision/829623.html">Diese Revision</a> wurde am 2. August 2015 19:30 von <a href="https://ubuntuusers.de/user/aasche/">aasche</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../archiv.html">Archiv</a></li>
<li><a href="../archiv/openafs.html">OpenAFS</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>