<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Archiv/FritzBox/Automount_USB-Speicher › ubuntuusers statisches Wiki</title>
<link href="../../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../../archiv/fritzbox/automount_usb-speicher.html">Automount USB-Speicher</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Archiv/FritzBox/Automount_USB-Speicher">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../../wiki/index.html">Index</a></li>
<li><a href="../../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../../wiki.html">Übersicht</a></li>
<li><a href="../../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../../kategorien.html">Kategorie</a></li>
<li><a href="../../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../../howto.html">Howto anlegen</a></li>
<li><a href="../../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../../baustelle.html">Baustellen</a></li>
<li><a href="../../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../../archiv/fritzbox/automount_usb-speicher/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../../archiv/fritzbox/automount_usb-speicher/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../../archiv/fritzbox/automount_usb-speicher/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../../archiv/fritzbox/automount_usb-speicher/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../../archiv/fritzbox/automount_usb-speicher/a/backlinks.html">Automount USB-Speicher</a></h1>
<div id="page"><div class="box improvable"><h3 class="box improvable">Archivierte Anleitung</h3><div class="contents"><p>
Dieser Artikel wurde archiviert, da er - oder Teile daraus -
nur noch unter einer älteren Ubuntu-Version nutzbar ist. Diese
Anleitung wird vom Wiki-Team weder auf Richtigkeit überprüft
noch anderweitig gepflegt. Zusätzlich wurde der Artikel für
weitere Änderungen gesperrt.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../../editor.html">Einen Texteditor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../../pakete_installieren.html">Installation von Paketen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../../autostart.html">Automatischer Start von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="../../sudo.html">Root-Rechte</a></p></li><li><p><a class="crosslink anchor" href="#source-6" id="source-6"></a> <a class="internal" href="../../shell/bash-skripting-guide_für_anfänger.html">Ein Skript schreiben</a>, <em>optional</em></p></li></ol></div></div><p><img alt="./klein_fritzbox7270.jpg" class="image-left" src="../../_/072cf728b761488f846bc2d1a4a2dca8c7bb1259.jpg"/></p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Automatisches-Einbinden">Automatisches Einbinden
</a><ol class="arabic"><li><a class="crosslink" href="#Vorab-die-Vor-und-Nachteile">Vorab die Vor- und Nachteile
</a></li></ol></li><li><a class="crosslink" href="#Installation">Installation
</a><ol class="arabic"><li><a class="crosslink" href="#Benoetigte-Pakete-fuer-Weg-1">Benötigte Pakete für Weg 1
</a></li><li><a class="crosslink" href="#Benoetigtes-Paket-fuer-Weg-2-und-3">Benötigtes Paket für Weg 2 und 3
</a></li><li><a class="crosslink" href="#Benoetigte-Pakete-fuer-Weg-4">Benötigte Pakete für Weg 4
</a></li></ol></li><li><a class="crosslink" href="#Anleitungen">Anleitungen
</a><ol class="arabic"><li><a class="crosslink" href="#Weg-1-gvfs-mount">Weg 1 - gvfs-mount
</a></li><li><a class="crosslink" href="#Weg-2-fstab">Weg 2 - fstab
</a></li><li><a class="crosslink" href="#Weg-3-rc-local">Weg 3 - rc.local
</a></li><li><a class="crosslink" href="#Weg-4-interfaces">Weg 4 - interfaces
</a></li></ol></li><li><a class="crosslink" href="#Allgemeine-Nuetzliche-Hinweise">Allgemeine Nützliche Hinweise
</a><ol class="arabic"><li><a class="crosslink" href="#USB-Hub">USB-Hub
</a></li><li><a class="crosslink" href="#Stromversorgung">Stromversorgung
</a></li><li><a class="crosslink" href="#Energiesparfunktion">Energiesparfunktion
</a></li><li><a class="crosslink" href="#Sauberes-Aushaengen">Sauberes Aushängen
</a></li><li><a class="crosslink" href="#Paralleles-Einhaengen">Paralleles Einhängen
</a></li><li><a class="crosslink" href="#Falsche-Speichergroesse">Falsche Speichergröße
</a></li><li><a class="crosslink" href="#Passwortschutz">Passwortschutz
</a></li><li><a class="crosslink" href="#Backups">Backups
</a></li><li><a class="crosslink" href="#Rechte">Rechte
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a><ol class="arabic"><li><a class="crosslink" href="#Intern">Intern
</a></li><li><a class="crosslink" href="#Extern">Extern
</a></li></ol></li></ol></div><p>In diesem Artikel wird beschrieben, wie man einen USB-Speicher, der an einer Fritz!Box angeschlossen ist, automatisch beim Hochfahren des Rechners über WLAN in sein Dateisystem <a class="internal" href="../../mount.html">mounten</a> ("einhängen") kann. Innerhalb der Anleitungen werden auch vereinfachte Möglichkeiten für kabelgebundene (LAN) Verbindungen aufgezeigt, die meist unkomplizierter als die WLAN-Verbindungen für das automatische Einbinden sind. Dieser Artikel richtet sich an Anfänger - der Weg 4 ist allerdings eher an Fortgeschrittene gerichtet.</p><p>Dieser Artikel wurde mithilfe von Tests an einer Fritz!Box 7270 (Firmware 54.04.88) und 7170 unter <a class="internal" href="../../gnome.html">GNOME</a> erstellt, sollte aber für alle Modelle funktionieren, die die Möglichkeit anbieten einen USB-Speicher anzuschließen. Für andere Anbieter, wie z.B. die Speedports, Linksys, Asus, Horstbox etc. sollten die Wege ähnlich funktionieren, sind jedoch nicht einfach eins zu eins kopierbar.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Diese Anleitungen funktionieren nur, wenn der USB-Speicher mit einem  Dateisystem formatiert ist, welches die Box verarbeiten kann. Welche Box welches Dateisystem unterstützt (meist <strong>fat</strong>, <strong>fat32</strong>, <strong>ntfs</strong> und mittlerweile auch <strong>ext2</strong>) erfährt man von <a class="external" href="http://www.avm.de/" rel="nofollow">AVM</a> <img alt="{de}" src="../../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>. Des Weiteren muss der USB-Fernanschluss deaktiviert sein. Ist der USB-Speicher eine Festplatte, sollte dieser eine eigene Stromversorgung haben (s. <a class="crosslink" href="#Stromversorgung">Stromversorgung</a>).
</p></div></div><div class="section_1"><h2 id="Automatisches-Einbinden">Automatisches Einbinden<a class="headerlink" href="#Automatisches-Einbinden">¶</a></h2><p>
Es gibt mehrere Wege zum automatischen Einbinden:
</p><ol class="arabic"><li><p>über den Befehl <a class="internal" href="../../gvfs-mount.html">gvfs-mount</a></p></li><li><p>die Datei <a class="internal" href="../../fstab.html">fstab</a></p></li><li><p>die Datei <a class="internal" href="../../rc.local.html">rc.local</a> sowie</p></li><li><p>über die Konfigurationsdatei <a class="internal" href="../../interfaces.html">interfaces</a> in Verbindung des <a class="internal" href="../../wlan/wpa_supplicant.html">wpasupplicant</a></p></li></ol><p>Es gibt sicherlich noch mehr Wege (wie z.B. die Skript-Option des <a class="internal" href="../../wicd.html">Wicd</a> oder des <a class="internal" href="../../networkmanager/dispatcher.html">Dispatcher</a> des NetworkManagers), die hier allerdings nicht weiter erörtert werden.</p><div class="section_2"><h3 id="Vorab-die-Vor-und-Nachteile">Vorab die Vor- und Nachteile<a class="headerlink" href="#Vorab-die-Vor-und-Nachteile">¶</a></h3><p>
</p><p>
</p><table><tr class="titel"><td colspan="6"> Vor- und Nachteile der vier Wege </td></tr><tr class="kopf"><td> Weg </td><td> Vorteile </td><td> Nachteile </td></tr><tr><td> Weg 1: <a class="crosslink" href="#Benoetigte-Pakete-fuer-Weg-1">gvfs-mount</a> </td><td> kein cifs-shutdown-Problem, schnellste Verbindung, sehr einfache Handhabung </td><td> Backups nur bedingt möglich, kein Zugriff als root. Für <a class="internal" href="../../kde.html">KDE</a> (Kubuntu) aufwändig und nur bedingt geeignet. </td></tr><tr><td> Weg 2: <a class="crosslink" href="#Benoetigtes-Paket-fuer-Weg-2-und-3">fstab</a> </td><td> jede Form von Backups möglich, viele Optionen einstellbar, kein <code class="notranslate">sleep</code> notwendig </td><td> langsamer als gvfs-mount </td></tr><tr><td> Weg 3: <a class="crosslink" href="#Benoetigtes-Paket-fuer-Weg-2-und-3">rc.local</a> </td><td> jede Form von Backups möglich, viele Optionen einstellbar </td><td> verlängertes Herunterfahren, langsamer als gvfs-mount </td></tr><tr><td> Weg 4: <a class="crosslink" href="#Benoetigte-Pakete-fuer-Weg-4">interfaces</a> </td><td> kein cifs-shutdown-Problem, kein <code class="notranslate">sleep</code> nötig, sehr viele Optionen einstellbar, jede Form von Backups möglich </td><td> händische Konfiguration ohne gui, Nutzung des NetworkManagers nicht möglich, langsamer als gvfs-mount </td></tr></table><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Für verschiedene Ubuntuversionen und Hardware kann je ein anderer der Wege am Besten sein. Der Autor hat auf einem Acer Extensa 5220 mit Lucid (64-bit) Weg 1 und 3 für sich als einzig gut funktioniernde Wege befunden.
</p></div></div></div></div><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
</p><div class="section_2"><h3 id="Benoetigte-Pakete-fuer-Weg-1">Benötigte Pakete für Weg 1<a class="headerlink" href="#Benoetigte-Pakete-fuer-Weg-1">¶</a></h3><p>
</p><ul><li><p><strong>gvfs-bin</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install gvfs-bin </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install gvfs-bin </pre></div></div><p>
</p></div></div><p>Kubuntu, Lubuntu und ältere Versionen von Xubuntu benötigen außerdem ebenfalls für den <a class="crosslink" href="#Weg-1-gvfs-mount">Weg 1</a> die Pakete:</p><ul><li><p><strong>gvfs-backends</strong></p></li><li><p><strong>gvfs-fuse</strong></p></li><li><p><strong>fuse-utils</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install gvfs-backends gvfs-fuse fuse-utils </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install gvfs-backends gvfs-fuse fuse-utils </pre></div></div><p>
</p></div></div><p>Weiter zur Methode mittels <a class="crosslink" href="#Weg-1-gvfs-mount">Weg 1 - gvfs-mount</a></p></div><div class="section_2"><h3 id="Benoetigtes-Paket-fuer-Weg-2-und-3">Benötigtes Paket für Weg 2 und 3<a class="headerlink" href="#Benoetigtes-Paket-fuer-Weg-2-und-3">¶</a></h3><p>
Für <a class="crosslink" href="#Weg-2-fstab">Weg 2</a> &amp; <a class="crosslink" href="#Weg-3-rc-local">Weg 3</a> muss folgendes Paket installiert <sup><a href="#source-3">[3]</a></sup> sein:</p><ul><li><p><strong>cifs-utils</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install cifs-utils </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install cifs-utils </pre></div></div><p>
</p></div></div><p>
Statt <strong>cifs-utils</strong> kann bis <a class="internal" href="../../precise.html">Ubuntu 12.04</a> alternativ auch <strong>smbfs</strong> installiert werden.
</p><ul><li><p>Weiter zur Methode <a class="crosslink" href="#Weg-2-fstab">Weg 2 - fstab</a></p></li><li><p>Weiter zur Methode <a class="crosslink" href="#Weg-3-rc-local">Weg 3 - rc.local</a></p></li></ul><p>
</p></div><div class="section_2"><h3 id="Benoetigte-Pakete-fuer-Weg-4">Benötigte Pakete für Weg 4<a class="headerlink" href="#Benoetigte-Pakete-fuer-Weg-4">¶</a></h3><p>
Für Weg 4 müssen folgende Pakete installiert <sup><a href="#source-3">[3]</a></sup> sein:</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Der <a class="internal" href="../../networkmanager.html">NetworkManager</a> muss komplett und vollständig, also inklusive Konfigurationsdateien, im Laufe des Weges 4 entfernt werden. Ein paralleles Betreiben von <a class="internal" href="../../wlan/wpa_supplicant.html">wpasupplicant</a> und NetworkManager führt dazu, dass man wahrscheinlich überhaupt keinen Zugang mehr zum Internet hat. Braucht man trotzdem eine GUI, kann man problemlos <a class="internal" href="../../wicd.html">Wicd</a> parallel zum Weg 4 zu benutzen. Dieser Weg eignet sich eher für Fortgeschrittene.
</p></div></div><ul><li><p><strong>wpasupplicant</strong></p></li><li><p><strong>smbfs</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install wpasupplicant smbfs </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install wpasupplicant smbfs </pre></div></div><p>
</p></div></div><ul><li><p>Weiter zur Methode <a class="crosslink" href="#Weg-4-interfaces">Weg 4 - interfaces</a></p></li></ul><p>
</p></div></div><div class="section_1"><h2 id="Anleitungen">Anleitungen<a class="headerlink" href="#Anleitungen">¶</a></h2><p>
</p><div class="section_2"><h3 id="Weg-1-gvfs-mount">Weg 1 - gvfs-mount<a class="headerlink" href="#Weg-1-gvfs-mount">¶</a></h3><p>
</p><div class="section_3"><h4 id="Skript">Skript<a class="headerlink" href="#Skript">¶</a></h4><p>
Man erstelle folgendes Skript<sup><a href="#source-6">[6]</a></sup>, indem man es in einen Texteditor <sup><a href="#source-2">[2]</a></sup> kopiert und die eigenen Daten einsetzt (IP-DER-FRITZBOX - meist 192.168.178.1, USERNAME). Nun dieses Skript im <a class="internal" href="../../homeverzeichnis.html">Homeverzeichnis</a> als <strong>.fbgvfsm</strong> speichern und ausführbar machen:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#! /bin/sh</span>
<span class="c1">#</span>

sleep <span class="m">30</span>
gvfs-mount smb://IP-DER-FRITZBOX/fritz.nas &lt;/home/USERNAME/.credentials
</pre></div>
</td></tr></table></div><p>Wenn man den Weg 4 gewählt hat, kann man das <code class="notranslate">sleep 30</code> weg lassen.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Durch das <code class="notranslate">sleep 30</code> wartet das Skript 30 Sekunden, bis es sich ausführt. Das ist notwendig, weil das WLAN meist lange braucht, bis es aufgebaut ist. Nur dann kann der USB-Speicher eingehangen werden. Oft funktioniert das Skript auch schon mit einem <code class="notranslate">sleep 20</code> oder kleineren Werten. In seltenen Fällen muss man den Wert vergrößern.
</p></div></div><p>Nun noch mit dem <a class="internal" href="../../dateimanager.html">Dateimanager</a> die Datei als Root <sup><a href="#source-5">[5]</a></sup> ausführbar machen. Alternativ kann man das auch im Terminal <sup><a href="#source-1">[1]</a></sup> erledigen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chmod u+x /home/USERNAME/.fbgvfsm </pre></div></div></div><div class="section_3"><h4 id="Dreizeiler">Dreizeiler<a class="headerlink" href="#Dreizeiler">¶</a></h4><p>
Nun muss man wiederum mit einem Texteditor <sup><a href="#source-2">[2]</a></sup> einen Dreizeiler erstellen und ihn im <a class="internal" href="../../homeverzeichnis.html">Homeverzeichnis</a> mit dem Namen <strong>.credentials</strong> speichern. Für die Fritz!Box muss man standardmäßig den user <code class="notranslate">ftpuser</code> in Zeile 1 angeben - das ist leider unveränderlich von der Box vorgegeben. Zeile 2 (Domäne) bleibt leer. Wenn man ein Passwort für das NAS gesetzt hat (nicht zu verwechseln mit dem Passwort für die Box selbst), muss dieses in Zeile 3 angegeben werden, ansonsten muss es eine Leerzeile bleiben.</p><pre class="notranslate">ftpuser

GEHEIMES-PASSWORT</pre><p>GEHEIMES-PASSWORT muss durch das eigene ersetzt werden.</p></div><div class="section_3"><h4 id="Skript-eintragen">Skript eintragen<a class="headerlink" href="#Skript-eintragen">¶</a></h4><p>
Nun trägt man das Skript in den Autostart bzw. die Startprogramme <sup><a href="#source-4">[4]</a></sup> ein:</p><ul><li><p><em>"System -&gt; Einstellungen -&gt; Startprogramme -&gt; Hinzufügen -&gt; Befehl"</em></p></li><li><p><strong>/home/username/.fbgvfsm</strong> eintragen</p></li><li><p>die anderen Zeilen nach Belieben ausfüllen</p></li></ul><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>gvfs-mount legt nun beim Hochfahren automatisch einen <a class="internal" href="../../gvfs-mount.html#Einhaengen">Einhängepunkt</a> (mountpoint) für die Freigabe an. Man kann einzelne Dateien über diesen Ordner direkt ansprechen. Ein Aushängen über gvfs-mount ist beim Abschalten des Rechners nicht nötig. Als Administrator bekommt man über diesen Weg keinen Zugriff, sondern nur als Benutzer. Die <a class="internal" href="../../rechte.html">Rechte</a> kann man beim gvfs-Ordner nicht verändern.
</p></div></div></div></div><div class="section_2"><h3 id="Weg-2-fstab">Weg 2 - fstab<a class="headerlink" href="#Weg-2-fstab">¶</a></h3><p>
</p><div class="section_3"><h4 id="Mountverzeichnis-anlegen">Mountverzeichnis anlegen<a class="headerlink" href="#Mountverzeichnis-anlegen">¶</a></h4><p>
Man muss für den USB-Speicher ein Verzeichnis als Root <sup><a href="#source-5">[5]</a></sup> auf seinem Rechner anlegen, auf den der Datenträger eingehängt werden soll - in diesem Beispiel das Unterverzeichnis <strong>/media/fritzplatte</strong> .</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mkdir -vp /media/fritzplatte </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Wenn man nicht will, dass der USB-Speicher auf dem Desktop angezeigt wird, muss man statt dem Ordner <strong>/media</strong> den Ordner <strong>/mnt</strong> angeben.
</p></div></div></div><div class="section_3"><h4 id="Zweizeiler">Zweizeiler<a class="headerlink" href="#Zweizeiler">¶</a></h4><p>
Nun muss man mit einem Texteditor <sup><a href="#source-2">[2]</a></sup> einen Zweizeiler erstellen und im <a class="internal" href="../../homeverzeichnis.html">Homeverzeichnis</a> mit dem Namen <strong>.smbcredentials</strong> speichern. Für die Fritz!Box muss man standardmäßig den user <code class="notranslate">ftpuser</code> in Zeile 1 angeben - das ist leider unveränderlich von der Box vorgegeben. Wenn man ein Passwort für das NAS gesetzt hat (nicht zu verwechseln mit dem Passwort für die Box selbst) muss dieses in Zeile 2 angegeben werden, ansonsten muss die Zeile eine Leerzeile bleiben.</p><pre class="notranslate">username=ftpuser
password=GEHEIMES-PASSWORT</pre><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Nach Update der Fritzbox auf Version 6.0 oder höher wird nicht mehr username=ftpuser sondern der Benutzername für die Freigabe eingegeben.
username=MEIN BENUTZERNAME
password=GEHEIMES PASSWORT
</p></div></div><p>
Wobei GEHEIMES-PASSWORT durch das eigene ersetzt werden muss.</p></div><div class="section_3"><h4 id="fstab">fstab<a class="headerlink" href="#fstab">¶</a></h4><p>
Man öffne die Datei <a class="internal" href="../../fstab.html">/etc/fstab</a> mittels eines Texteditors <sup><a href="#source-2">[2]</a></sup> mit Root-Rechten <sup><a href="#source-5">[5]</a></sup>. Dann trage man am Schluss der Textdatei folgende Zeilen ein:</p><pre class="notranslate">//IP-DER-FRITZBOX/HEIMNETZFREIGABE-DER-FRITZBOX/ /media/fritzplatte cifs credentials=/home/USERNAME/.smbcredentials,uid=1000,gid=1000 0 0</pre><p>dabei sind IP-DER-FRITZBOX (meist 192.168.178.1) und USERNAME durch die eigenen Daten zu ersetzen.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die Optionen des Einhängens werden im <a class="internal" href="../../mount.html#Optionen">mount-Artikel</a> erklärt. Dieses Beispiel geht von einem USB-Speicher mit <a class="internal" href="../../ext.html#ext2">ext2</a>-Dateisystem sowie von einem Einbenutzersystem aus. Nutzt man andere <a class="internal" href="../../dateisystem.html">Dateisysteme</a>, müssen die Optionen entsprechend anpasst werden. Für ein Mehrbenutzersystem lese man <a class="internal" href="../../mount.html#Mehrbenutzer-Systeme">mount - Mehrbenutzersystem</a>.
</p></div></div><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Die letzte Zeile in der fstab muss eine Leerzeile sein!
</p></div></div></div><div class="section_3"><h4 id="Problem">Problem<a class="headerlink" href="#Problem">¶</a></h4><p>
Ein System mit WLAN-Verbindung kann beim Herunterfahren die Partitionen höchstwahrscheinlich nicht ordnungsgemäß aushängen, weil das WLAN meist schon am Anfang des Herunterfahrens abgeschaltet ist. Das bedeutet, dass der am WLAN hängende USB-Speicher der Fritz!Box nicht angesprochen und damit nicht ausgehängt werden kann. Dadurch entsteht die Fehlermeldung (manchmal durch den <a class="internal" href="../../plymouth.html">Plymouth</a> verdeckt):</p><pre class="notranslate">CIFS VFS: server not responding. No response for cmd 50 ...</pre></div><div class="section_3"><h4 id="Loesung">Lösung<a class="headerlink" href="#Loesung">¶</a></h4><p>
Mit dem Setzen der folgenden beiden Links veranlasst man das System dazu, die Verbindung zur NAS vor dem Beenden der Netzverbindung zur trennen<sup><a href="#source-1">[1]</a></sup>. Das gilt permanent, muss nur einmal gemacht werden und ist somit auch nach einem Neustart aktiv:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ln -s /etc/init.d/umountnfs.sh /etc/rc0.d/K15umountnfs.sh 
sudo ln -s /etc/init.d/umountnfs.sh /etc/rc6.d/K15umountnfs.sh  </pre></div></div><p>Danach steht dem schnellen Shutdown nichts mehr im Wege.</p></div></div><div class="section_2"><h3 id="Weg-3-rc-local">Weg 3 - rc.local<a class="headerlink" href="#Weg-3-rc-local">¶</a></h3><p>
Zunächst muss man den Weg begehen, wie bei <a class="crosslink" href="#Weg-2-fstab">fstab</a>, d.h.:</p><ul><li><p>Mountverzeichnis anlegen - hier bitte das beispielhafte Unterverzeichnis <strong>/media/fb</strong> statt <strong>/media/fritzplatte</strong></p></li><li><p>Zweizeiler</p></li></ul><p>
Nun verfährt man weiter über die Datei</p><div class="section_3"><h4 id="rc-local">rc.local<a class="headerlink" href="#rc-local">¶</a></h4><p>
Man öffne die Datei <a class="internal" href="../../rc.local.html">/etc/rc.local</a> mittels eines Texteditors <sup><a href="#source-2">[2]</a></sup> mit Root-Rechten <sup><a href="#source-5">[5]</a></sup>. Normalerweise sieht Sie ungefähr so aus:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/sh -e</span>
<span class="c1">#</span>
<span class="c1"># rc.local</span>
<span class="c1">#</span>
<span class="c1"># This script is executed at the end of each multiuser runlevel.</span>
<span class="c1"># Make sure that the script will "exit 0" on success or any other</span>
<span class="c1"># value on error.</span>
<span class="c1">#</span>
<span class="c1"># In order to enable or disable this script just change the execution</span>
<span class="c1"># bits.</span>
<span class="c1">#</span>
<span class="c1"># By default this script does nothing.</span>

<span class="nb">exit</span> <span class="m">0</span>
</pre></div>
</td></tr></table></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Sollte die Datei leer oder nicht vorhanden sein, muss am Anfang der Datei das <code class="notranslate">#!/bin/sh -e</code> und am Ende der Datei <code class="notranslate">exit 0</code> stehen.
</p></div></div><p>Man trägt nun ab Zeile 13 Folgendes ein - dabei ist IP-DER-FRITZBOX (meist 192.168.178.1) und USERNAME wieder durch die eigenen Daten zu ersetzen:</p><pre class="notranslate"># den sleep-Wert verändern, je nachdem ob das Einhängen gar nicht funktioniert (Wert vergrößern)
# oder es zu einer langen Verzögerung kommt (den Wert verringern)
sleep 30

mount -t cifs -o credentials=/home/USERNAME/.smbcredentials,uid=1000,gid=1000 //IP-DER-FRITZBOX/fritz.nas/ /media/fb</pre><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die <a class="internal" href="../../mount.html#Optionen">Optionen</a> des Einhängens werden im mount-Artikel erklärt. Dieses Beispiel geht von einem USB-Speicher mit <a class="internal" href="../../ext.html#ext2">ext2</a>-Dateisystem sowie von einem Einbenutzersystem aus. Nutzt man andere <a class="internal" href="../../dateisystem.html">Dateisysteme</a> müssen die Optionen entsprechend anpasst werden. Für ein Mehrbenutzersystem lese man <a class="internal" href="../../mount.html#Mehrbenutzer-Systeme">:mount - Mehrbenutzersystem</a>.
</p></div></div></div><div class="section_3"><h4 id="Problem-2">Problem<a class="headerlink" href="#Problem-2">¶</a></h4><p>
Ein System mit WLAN-Verbindung kann beim Herunterfahren den USB-Speicher höchstwahrscheinlich nicht ordnungsgemäß aushängen, weil das WLAN meist schon am Anfang des Herunterfahrens abgeschaltet ist. Das bedeutet, dass der am WLAN hängende USB-Speicher der Fritz!Box nicht angesprochen und damit nicht ausgehängt werden kann. Dadurch entsteht die Fehlermeldung (manchmal durch den <a class="internal" href="../../plymouth.html">Plymouth</a> verdeckt):</p><pre class="notranslate">CIFS VFS: server not responding. No response for cmd 50 ...</pre><p>Das ist nicht weiter schlimm, allerdings dauert das Herunterfahren dann 1-2 Minuten. Will man diesen Fehler umgehen hängt man den USB-Speicher einfach vor dem Herunterfahren per Hand im Terminal aus:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo umount /media/fb </pre></div></div><p>Oder man nutzt zum Herunterfahren das Skript <a class="crosslink" href="#Sauberes-Aushaengen">.fritzumount</a>.</p></div></div><div class="section_2"><h3 id="Weg-4-interfaces">Weg 4 - interfaces<a class="headerlink" href="#Weg-4-interfaces">¶</a></h3><p>
Dieser Weg beschreibt anhand des Beispiels einer Fritz!Box 7270, wie man den vorinstallierten <a class="internal" href="../../networkmanager.html">NetworkManager</a> durch den <a class="internal" href="../../wlan/wpa_supplicant.html">wpasupplicant</a> ersetzt um dann im zweiten Schritt über einen mount-Eintrag in der <a class="internal" href="../../interfaces.html">interfaces</a> den USB-Speicher automatisch einbindet. Diese Anleitung gilt für den Fall, dass man den Rechner ausschließlich zu Hause nutzt. Benutzt man den Rechner in verschiedenen Netzwerken (z.B. in Cafes, der Uni oder Freunden), müssen die Konfigurationsdateien entsprechend manuell angepasst werden (s. <a class="crosslink" href="#Intern">Links</a> unten: wpasupplicant &amp; interfaces) - das ist dann eher was für Fortgeschrittene. Eine einfachere Alternative hierzu ist die zum wpasupplicant parallele Verwendung des <a class="internal" href="../../wicd.html">Wicd</a> - mehr dazu weiter unten.</p><div class="section_3"><h4 id="Verzeichnis-anlegen">Verzeichnis anlegen<a class="headerlink" href="#Verzeichnis-anlegen">¶</a></h4><p>
Man lege ein Verzeichnis mit root-Rechten <sup><a href="#source-5">[5]</a></sup> an, wo der USB-Speicher eingebunden und als Ordner bzw. auf dem Desktop auffindbar wird:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mkdir -vp /media/fb-interfaces </pre></div></div></div><div class="section_3"><h4 id="Funknetze-scannen">Funknetze scannen<a class="headerlink" href="#Funknetze-scannen">¶</a></h4><p>
Man lese die Einstellungen der wlan-Karte aus:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo iwlist scanning </pre></div></div><p>Es werden im Terminal alle vorhanden Schnittstellen und mit diesen auch jeweils alle Funknetzwerke (cells) aufgelistet, die in Reichweite sind. Nun ist Folgendes zu tun:</p><ul><li><p>Das eigene Netz über die ESSID (z. B. FRITZ!Box Fon WLAN 7270) raus suchen und merken.</p></li><li><p>Den Namen des Interface / der wlan-Karte (meistens wlan0 oder auch eth1) merken.</p><ul><li><p>in dieser Anleitung wird davon ausgegangen, dass die wlan-Karte <code class="notranslate">wlan0</code> heißt</p></li><li><p>Wenn der wlan-Treiber über <a class="internal" href="../../wlan/ndiswrapper.html">Ndiswrapper</a> installiert wurde, muss die Schnittstelle evtl. auch noch in der Datei <strong>/etc/modprobe.d/ndiswrapper</strong> angepasst werden. Dort steht automatisch <code class="notranslate">wlan0</code>.</p></li></ul></li><li><p>Die Group- und Pairwise Cipher (meist entweder CCMP und/oder TKIP) merken</p></li><li><p>wlan-Netzwerkschlüssel (auch PSK oder WPA-PSK genannt) in der Fritz!Box nachschauen und merken (7270: <em>"WLAN -&gt; Sicherheit"</em>)</p></li></ul><p>
</p></div><div class="section_3"><h4 id="wpa-supplicant-conf-editieren">wpa_supplicant.conf editieren<a class="headerlink" href="#wpa-supplicant-conf-editieren">¶</a></h4><p>
Nun die Datei <strong>/etc/wpa_supplicant/wpa_supplicant.conf </strong> mit einem Texteditor <sup><a href="#source-2">[2]</a></sup> mit root-Rechten <sup><a href="#source-5">[5]</a></sup> öffnen oder, wenn nicht vorhanden, neu anlegen. Diese sollte nun abgeändert werden in:</p><pre class="notranslate">ctrl_interface=/var/run/wpa_supplicant
eapol_version=1
# 0: Der Treiber des Interfaces kümmert sich um das Scannen von Netzen und die AP-Auswahl.
#    Dieser Modus sollte benutzt werden, wenn man eine Verschlüsselung auf ein Kabelnetzwerk legt.
# 1: wpa_supplicant kümmert sich um das Scannen von Netzen und die AP-Auswahl.
# 2: Fast wie 0, es wird aber mit Hilfe von Sicherheitsrichtlinien und der SSID zu APs verbunden (BSSID wird nicht unterstützt)
#
# Normalerweise funktioniert entweder Modus 1 oder Modus 2.
ap_scan=1

network={
        ssid="MEINE ESSID"
        scan_ssid=1
        proto=RSN
        key_mgmt=WPA-PSK
        pairwise=MEIN PAIRWISE CIPHER
        group=MEIN GROUP CIPHER
        psk="MEIN WLAN-NETZWERKSCHLÜSSEL"
}</pre><p>wobei alle "MEIN ..."-Daten durch die eigenen zu ersetzen sind.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Es wird hier davon ausgegangen, dass in der Fritz!Box WPA2-personal aktiviert ist.
</p></div></div></div><div class="section_3"><h4 id="Interfaces-editieren">Interfaces editieren<a class="headerlink" href="#Interfaces-editieren">¶</a></h4><p>
Nun sollte man die Datei <a class="internal" href="../../interfaces.html">/etc/network/interfaces</a> mit einem Texteditor <sup><a href="#source-2">[2]</a></sup> mit root-Rechten <sup><a href="#source-5">[5]</a></sup> öffnen und editieren (vorher bitte eine Sicherheitskopie der Datei machen, um diese im Notfall wieder zurück spielen zu können), dass sie so aussieht:</p><pre class="notranslate"># This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

# The loopback network interface
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet dhcp

auto wlan0
iface wlan0 inet dhcp
	wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf

post-up mount -t cifs -o credentials=/home/USERNAME/.smbcredentials,uid=1000,gid=1000 //IP-DER-FRITZBOX/fritz.nas/ /media/fb-interfaces
pre-down umount /media/fb-inerfaces</pre><p>IP-DER-FRITZBOX muss durch die eigenen IP ersetzt werden (meist 192.168.178.1), ebenso USERNAME mit dem eigenen Ubuntu-Benutzernamen. Sollte die eigene wlan-Karte nicht die Bezeichnung wlan0 tragen, bitte auch abändern (Zeile 11+12). Sollte es Probleme geben (z.B. verlängertes booten) oder beim Wechsel zwischen lan und wlan (s.u.) kann es helfen, Zeile 8 in <code class="notranslate">allow-hotplug eth0</code> zu ändern.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Zeile 5+6 MÜSSEN so stehen bleiben, da sonst das System nicht mehr funktionsfähig ist!
</p></div></div><p>Zwischen Zeile 12 und Zeile 13 ist kein spezieller Treiber eingegeben, es wird deshalb automatisch der <code class="notranslate">wext</code>-Treiber verwendet, der für fast alle Konstellationen funktioniert. Sollte es Probleme geben, lese man <a class="internal" href="../../interfaces.html#Treiber">interfaces - Treiber</a>.</p></div><div class="section_3"><h4 id="credentials">credentials<a class="headerlink" href="#credentials">¶</a></h4><p>
Nun muss man noch eine <strong>.smbcredentials</strong>-Datei anlegen, wie oben im <a class="crosslink" href="#Zweizeiler">Weg 2 - Zweizeiler</a> beschrieben.</p></div><div class="section_3"><h4 id="Abschluss">Abschluss<a class="headerlink" href="#Abschluss">¶</a></h4><p>
Nun sollte man die Verbindung vor der Komplett-Deinstallation des NetworkManagers testen, wie in <a class="internal" href="../../wlan/wpa_supplicant.html#wpa-supplicant-testen-und-manuell-starten">WLAN</a> beschrieben. Eine weitere Alternative ist, den <a class="internal" href="../../wicd.html">Wicd</a> statt des NetworkManagers zu verwenden - dann bitte zuerst den Wicd installieren, bevor der NetworkManager komplett deinstalliert wird. Näheres dazu unter <a class="crosslink" href="#LAN-Wicd-wpasupplicant">LAN, Wicd &amp; wpasupplicant</a>.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Es ist nun an der Zeit, den NetworkManager vollständig, also inklusive Konfigurationsdateien, zu deinstallieren und den Rechner neu zu starten. Sollte danach keine Verbindung hergestellt werden können, sollte man sich mit den Artikeln der internen Links <a class="crosslink" href="#Intern">unten</a> (vor allem wpasupplicant &amp; interfaces) auseinandersetzen, um eventuelle Probleme zu lösen - eine Kabelverbindung (eth0) sollte immer noch funktionieren, um Zugang zum Internet zu bekommen. Wenn auch die Kabelverbindung nicht geht, sollte man mit <code class="notranslate">sudo ifdown eth0</code>, <code class="notranslate">sudo ifdown wlan0</code> und dann <code class="notranslate">sudo ifup eth0</code> auf jeden Fall per Kabel Zugang bekommen. Wenn auch das nichts hilft, deinstalliert man einfach den wpasupplicant wieder komplett und reinstalliert den NetworkManager. Dann kopiert man die Sicherheitskopie der interfaces wieder nach <strong>/etc/network/</strong> zurück.
</p></div></div><p>Nach all diesen Aktionen sollte nun automatisch beim Hochfahren eine wlan-Verbindung hergestellt werden und der USB-Speicher der Fritz!Box ebenfalls automatisch eingebunden werden.</p></div><div class="section_3"><h4 id="LAN-Wicd-wpasupplicant">LAN, Wicd &amp; wpasupplicant<a class="headerlink" href="#LAN-Wicd-wpasupplicant">¶</a></h4><p>
Benutzt man parallel zum wpasupplicant den Wicd, sollte man in den preferences NICHT auf <em>"Alway switch to a wired connection when available"</em> stellen und NICHT ein <em>"Verbinde automatisch mit diesem Netzwerk"</em> nutzen, weil es sonst wieder zum lästigen cifs-shutdown-Problem oder anderen Problemen kommt! Der Wicd sollte nur dafür zuständig sein, bequem in andere Netzwerke als zu Hause (bzw. dort, wo die Fritz!Box mit dem USB-Speicher steht) zu kommen, für alles andere ist die <strong>wpa_supplicant.conf</strong> und die <strong>interfaces</strong> zuständig! Der Wicd zeigt im Panel eine wlan oder lan-Verbindung an. Diese Verbindungsanzeige bezieht sich nach dem Hochfahren des Rechners NICHT auf eine vom Wicd hergestellten Verbindung, sondern auf eine durch den wpasupplicant bzw. der interfaces hergestellten Verbindung, es sei denn, man hat im Wicd selbst  die Verbindung hergestellt (z.B. weil man unterwegs ist und sich in ein fremdes Netz außerhalb der "wpasupplicant-interfaces-Fritzbox-Konfiguration" anmelden muss)!</p><p>Will man zwischendurch von wlan auf lan (eth0) wechseln, dann muss man das wlan abschalten mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ifdown wlan0 </pre></div></div><p>Da das eth0 in der interfaces per <code class="notranslate">auto</code> schon vorbereitet ist braucht man nun nur noch das Kabel einzustecken und die Verbindung ist da.</p><p>Will man wieder zurück zum wlan, Kabel ziehen und</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ifup wlan0 </pre></div></div><p>eingeben.</p></div><div class="section_3"><h4 id="WLAN-Bereitschaft-Ruhezustand">WLAN, Bereitschaft &amp; Ruhezustand<a class="headerlink" href="#WLAN-Bereitschaft-Ruhezustand">¶</a></h4><p>
Es ist gut möglich, dass das wlan nach dem Aufwecken aus der Bereitschaft oder des Ruhezustands zwar konfiguriert, jedoch nicht verbunden ist. Eine Verbindung erhält man ganz einfach mit den zwei Befehlen</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ifdown wlan0
sudo ifup wlan0 </pre></div></div></div></div></div><div class="section_1"><h2 id="Allgemeine-Nuetzliche-Hinweise">Allgemeine Nützliche Hinweise<a class="headerlink" href="#Allgemeine-Nuetzliche-Hinweise">¶</a></h2><p>
</p><div class="section_2"><h3 id="USB-Hub">USB-Hub<a class="headerlink" href="#USB-Hub">¶</a></h3><p>
Bei vielen Fritzboxen kann man mittlerweile bis zu 4 USB-Geräte anschließen, wovon ein USB-Hub als einer davon zählt. An diesen Hub können mehr als nur ein USB-Speicher betrieben werden.</p></div><div class="section_2"><h3 id="Stromversorgung">Stromversorgung<a class="headerlink" href="#Stromversorgung">¶</a></h3><p>
Wenn man mehr als ein Gerät an den USB-Anschluss einer Fritz!Box anschließt muss man die Geräte direkt mit Strom über deren Netzteile versorgen - das gilt auch für USB-Hubs. Im schlimmsten Fall kann die Fritz!Box ansonsten physikalischen Schaden nehmen! In manchen Foren war zu lesen, dass, auch wenn nur ein USB-Platz an der Fritz!Box belegt war, eine USB-Festplatte ohne eigene Stromversorgung nicht funktionierte, obwohl sie das müsste.</p></div><div class="section_2"><h3 id="Energiesparfunktion">Energiesparfunktion<a class="headerlink" href="#Energiesparfunktion">¶</a></h3><p>
Einige Fritzboxen bieten an, die Energiesparfunktion des USB-Speichers zu nutzen. Wenn man diese Funktion nutzt, kann es sein, dass der USB-Speicher sich nach einiger Zeit automatisch von der Fritz!Box (und damit auch vom Rechner) trennt. Das kann man umgehen, indem man die Energiesparfunktion einfach nicht nutzt.</p></div><div class="section_2"><h3 id="Sauberes-Aushaengen">Sauberes Aushängen<a class="headerlink" href="#Sauberes-Aushaengen">¶</a></h3><p>
Will man vor dem <a class="internal" href="../../herunterfahren.html">Herunterfahren</a> jegliches Aushängen für die Wege 2&amp;3 automatisiert haben, legt man sich folgendes Skript <sup><a href="#source-6">[6]</a></sup> <strong>.fritzumount</strong> ins <a class="internal" href="../../homeverzeichnis.html">Homeverzeichnis</a>:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#! /bin/sh</span>

<span class="c1"># unmounten fstab</span>
sudo umount /media/fritzplatte

<span class="c1"># unmounten rc.local</span>
sudo umount /media/fb

<span class="c1"># Befehl zum sofortigen Herunterfahren</span>
sudo halt
</pre></div>
</td></tr></table></div><p>Nun noch mit dem <a class="internal" href="../../dateimanager.html">Dateimanager</a> die Datei ausführbar machen. Alternativ kann man das auch im Terminal <sup><a href="#source-1">[1]</a></sup> erledigen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chmod u+x /home/USERNAME/.fritzumount </pre></div></div><p>Als zweiten Schritt legt man sich einen Starter auf den Desktop an, unter GNOME z.B. mit:</p><ul><li><p><img alt="rechte Maustaste" class="image-default" src="../../_/aa516ca8be74ff7de9b706b8ffc7a88e87e17fb5.png"/>-Klick auf freien Desktop, Option <em>"Starter anlegen"</em></p></li><li><p>Name: frei wählbar, z.B. <code class="notranslate">fb-shutdown</code></p></li><li><p>Befehl: <code class="notranslate">/home/USERNAME/.fritzumount</code></p></li><li><p>Kommentar nach Belieben ausfüllen</p></li><li><p>Diesen Starter ausführbar machen</p><ul><li><p><img alt="rechte Maustaste" class="image-default" src="../../_/aa516ca8be74ff7de9b706b8ffc7a88e87e17fb5.png"/>-Klick <em>"Starter -&gt; Eigenschaften -&gt; Zugriffsrechte"</em> -&gt; bei "Ausführen" überall Häkchen setzen</p></li></ul></li></ul><p>
Zum Herunterfahren macht man einen Doppelklick auf den Starter und es öffnet sich ein Terminal, in welches man sein Systempasswort eingibt. Das System hängt den USB-Speicher aus und es gibt keinerlei Verzögerungen beim Herunterfahren mehr! Will man das Eingeben des Passwortes bequemerweise nicht haben wollen, sollte man sich mit <a class="internal" href="../../sudo/konfiguration.html">sudo visudo</a> auseinander gesetzt haben.</p></div><div class="section_2"><h3 id="Paralleles-Einhaengen">Paralleles Einhängen<a class="headerlink" href="#Paralleles-Einhaengen">¶</a></h3><p>
Es besteht die Möglichkeit, ein und den selben USB-Speicher über alle vier Wege gleichzeitig einzuhängen. Sollte beispielsweise die <a class="crosslink" href="#Weg-1-gvfs-mount">gvfs-mount-Variante</a> deutlich schneller funktionieren als die <a class="crosslink" href="#Weg-3-rc-local">rc.local-Variante</a> kann man über gvfs-mount z.B. Streamen oder Dateien kopieren. Vollwertige Backups kann man am besten über einen der Wege 2-4 machen. Tests haben ergeben, dass man beim parallelen Einhängen den sleep-Wert um ca. 5 Sekunden verschieden setzen sollte (Weg 1 &amp; 3).</p></div><div class="section_2"><h3 id="Falsche-Speichergroesse">Falsche Speichergröße<a class="headerlink" href="#Falsche-Speichergroesse">¶</a></h3><p>
Leider wird im <a class="internal" href="../../dateimanager.html">Dateimanager</a> der freie Speicherplatz der Fritz!Box selber angezeigt (je nach internem Speicher der Box gerne mal nur 4 MB), und nicht der des USB-Speichers. Dadurch kann die Fehlermeldung beim Kopieren entstehen, dass nicht genug Speicherplatz auf dem Datenträger wäre, was nicht unbedingt stimmen muss. Wenn man sich sicher ist, dass der Speicherplatz ausreicht, einfach <em>"Trotzdem kopieren"</em> wählen.</p><p>In der Box selbst kann man unter <em>"Heimnetz -&gt; Speicher (NAS)</em>" (7270) einsehen, wie viel Speicher tatsächlich noch frei ist.</p></div><div class="section_2"><h3 id="Passwortschutz">Passwortschutz<a class="headerlink" href="#Passwortschutz">¶</a></h3><p>
Um seine Passwörter vor fremden Zugriffen zu schützen, kann man die Dateien <strong>.smbcredentials</strong> und <strong>.credentials</strong> <a class="internal" href="../../daten_verschlüsseln.html">verschlüsseln</a>. Einfacher und unverschlüsselt, aber dadurch unsicherer, ist es, die Dateien vor fremden Blicken zu schützen in dem man die <a class="internal" href="../../chmod.html">Dateirechte</a> ändert</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chmod 0600 /home/USERNAME/.smbcredentials </pre></div></div><p>bzw.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chmod 0600 /home/USERNAME/.credentials </pre></div></div><p>Solcherart geschützte Dateien können allerdings immer noch von Fremden mit Root-Rechten <sup><a href="#source-5">[5]</a></sup> oder mittels einer <a class="internal" href="../../desktop-cd.html">Live-CD</a> eingesehen werden!</p></div><div class="section_2"><h3 id="Backups">Backups<a class="headerlink" href="#Backups">¶</a></h3><p>
Ist der USB-Speicher über gvfs-mount eingehängt, kann man nur bedingt Backups machen, die über den Befehl <a class="internal" href="../../rsync.html">rsync</a> direkt oder auf diesen Befehl aufbauende <a class="internal" href="../../datensicherung.html#Programme">Programme</a> laufen (Thema <a class="internal" href="../../rechte.html">Rechte</a>). Eine beschränkte Backupmöglichkeit geht am Einfachsten z.B. mit dem Programm <a class="internal" href="../../sbackup.html">sbackup</a>. Die Wege über die <strong>rc.local</strong> und die <strong>fstab</strong> haben, was Backups angeht, keinerlei Beschränkungen.</p></div><div class="section_2"><h3 id="Rechte">Rechte<a class="headerlink" href="#Rechte">¶</a></h3><p>
Läuft der USB-Speicher mit <a class="internal" href="../../ext.html">ext2</a> (oder einem anderen Dateisystem welches Rechte verwalten kann) kann die Fritz!Box die Festplatte nicht richtig einbinden, wenn die falschen <a class="internal" href="../../rechte.html">Rechte</a> für Dateien und Ordner gesetzt sind. Einfach den USB-Speicher direkt an den Rechner anschließen und Abhilfe schaffen mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo find /media/PARTITION-DER-FESTPLATTE/ -type f -exec chmod -c 777 {} +
sudo find /media/PARTITION-DER-FESTPLATTE/ -type d -exec chmod -c 777 {} + </pre></div></div><p>Nun haben alle Ordner und Dateien des USB-Speichers für alle Nutzer alle Rechte. Die Fritz!Box sollte nun den Speicher bei sich einhängen können.</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><div class="section_2"><h3 id="Intern">Intern<a class="headerlink" href="#Intern">¶</a></h3><p>
</p><ul><li><p><a class="internal" href="../../mount.html">mount</a> Alles Wissenswerte über´s Ein- und Aushängen</p></li><li><p><a class="internal" href="../../samba_client_cifs.html">Samba Client cifs</a> Mehr zum mounten von Laufwerken in Netzwerken</p></li><li><p><a class="internal" href="../../gvfs-mount.html">gvfs-mount</a> Alles Wissenswerte über das GVFS</p></li><li><p><a class="internal" href="../../interfaces.html">interfaces</a> Die ursprünglichste Form der Netzwerkkonfiguration</p></li><li><p><a class="internal" href="../../wlan/wpa_supplicant.html">WLAN/wpa supplicant</a> Wissenswertes über die händische Alternative zum NetworkManager</p></li><li><p><a class="internal" href="../../wicd.html">Wicd</a> Eine beliebte Alternative zum vorinstallierten <a class="internal" href="../../networkmanager.html">NetworkManager</a></p></li><li><p><a class="internal" href="../../guessnet.html">Guessnet</a> interessant für den Weg 4, wenn man sich in mehreren Netzwerken bewegt und auf manueller Konfiguration ohne Wicd bleiben will</p></li><li><p><a class="internal" href="../../wlan/ndiswrapper.html">NdisWrapper</a></p></li><li><p><a class="internal" href="../../fritzbox.html">FritzBox</a> - Weitere Artikel zum Thema Fritz!Box</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Extern">Extern<a class="headerlink" href="#Extern">¶</a></h3><p>
</p><ul><li><p><a class="external" href="http://www.avm.de/de/" rel="nofollow">AVM</a> <img alt="{de}" src="../../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Die Internetseite des Herstellers der Fritzboxen</p></li><li><p><a class="external" href="http://www.ip-phone-forum.eu/" rel="nofollow">IP Phone Forum</a> <img alt="{de}" src="../../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Großes Forum über Router, IP-Telefonie &amp; mehr</p></li><li><p><a class="external" href="http://www.router-forum.de/" rel="nofollow">Router-Forum</a> <img alt="{de}" src="../../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Wie der Name schon sagt...</p></li><li><p><a class="external" href="http://www.wehavemorefun.de/fritzbox" rel="nofollow">wehavemorefun/fritzbox</a> <img alt="{de}" src="../../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Inoffizielles und sehr ausführliches AVM-Wiki</p></li><li><p><a class="external" href="http://www.avm.de/de/Service/FAQs/FAQ_Sammlung/14383.php3" rel="nofollow">AVM-Faq</a> <img alt="{de}" src="../../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Kurzbeschreibung, wie man einen an einer Fritz!Box angeschlossenen USB-Speicher mit Windows, Mac und Linux einhängen kann</p></li></ul><p>
</p></div></div></div>
<p class="meta">
<a href="../../archiv/fritzbox/automount_usb-speicher/a/revision/850118.html">Diese Revision</a> wurde am 16. November 2015 11:37 von <a href="https://ubuntuusers.de/user/aasche/">aasche</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../../startseite.html">Wiki</a></li>
<li><a href="../../archiv.html">Archiv</a></li>
<li><a href="../../archiv/fritzbox.html">FritzBox</a></li>
<li><a href="../../archiv/fritzbox/automount_usb-speicher.html">Automount USB-Speicher</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>