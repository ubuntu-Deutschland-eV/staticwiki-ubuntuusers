<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Archiv/EFI_Installation_Erfahrungsberichte › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../archiv/efi_installation_erfahrungsberichte.html">EFI Installation Erfahrungsberichte</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Archiv/EFI_Installation_Erfahrungsberichte">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../archiv/efi_installation_erfahrungsberichte/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../archiv/efi_installation_erfahrungsberichte/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../archiv/efi_installation_erfahrungsberichte/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../archiv/efi_installation_erfahrungsberichte/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../archiv/efi_installation_erfahrungsberichte/a/backlinks.html">EFI Installation Erfahrungsberichte</a></h1>
<div id="page"><div class="box improvable"><h3 class="box improvable">Archivierte Anleitung</h3><div class="contents"><p>
Dieser Artikel wurde archiviert, da er - oder Teile daraus -
nur noch unter einer älteren Ubuntu-Version nutzbar ist. Diese
Anleitung wird vom Wiki-Team weder auf Richtigkeit überprüft
noch anderweitig gepflegt. Zusätzlich wurde der Artikel für
weitere Änderungen gesperrt.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../partitionierung.html">Eine Partition einrichten</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../editor.html">Einen Editor verwenden</a></p></li></ol></div></div><div class="toc toc-depth-4"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Vorbemerkung">Vorbemerkung
</a></li><li><a class="crosslink" href="#Unterstuetzt-der-Computer-UEFI">Unterstützt der Computer UEFI?
</a><ol class="arabic"><li><a class="crosslink" href="#Ubuntu-Live-CD-DVD">Ubuntu Live-CD/DVD
</a><ol class="arabic"><li><a class="crosslink" href="#Computer-verfuegt-nur-ueber-ein-BIOS-ohne-UEFI">Computer verfügt nur über ein BIOS ohn...</a></li><li><a class="crosslink" href="#Computer-verfuegt-ueber-ein-UEFI-mit-CSM">Computer verfügt über ein UEFI mit CSM...</a></li><li><a class="crosslink" href="#Computer-verfuegt-nur-ueber-ein-UEFI-ohne-CSM">Computer verfügt nur über ein UEFI ohn...</a></li></ol></li><li><a class="crosslink" href="#Windows-Installation">Windows Installation
</a></li></ol></li><li><a class="crosslink" href="#Der-Start-auf-einem-EFI-System">Der Start auf einem EFI-System
</a><ol class="arabic"><li><a class="crosslink" href="#BIOS-Kompatibilitaets-Modus">BIOS-Kompatibilitäts-Modus
</a></li><li><a class="crosslink" href="#Hybride-Installations-Medien">Hybride Installations-Medien
</a></li><li><a class="crosslink" href="#Boot-Management">Boot-Management
</a></li></ol></li><li><a class="crosslink" href="#Installation-im-EFI-Modus">Installation im EFI-Modus
</a><ol class="arabic"><li><a class="crosslink" href="#Vorhandenes-Betriebssystem-loeschen-und-Ubuntu-neu-installieren">Vorhandenes Betriebssystem löschen und U...</a></li><li><a class="crosslink" href="#Ubuntu-neben-einem-vorhanden-Betriebssystem-installieren">Ubuntu neben einem vorhanden Betriebssys...</a><ol class="arabic"><li><a class="crosslink" href="#Datentraeger-mit-vorhandener-GPT">Datenträger mit vorhandener GPT
</a></li><li><a class="crosslink" href="#Datentraeger-mit-vorhandener-MPT">Datenträger mit vorhandener MPT
</a></li></ol></li><li><a class="crosslink" href="#Installationsart-Etwas-Anderes">Installationsart Etwas Anderes
</a></li></ol></li><li><a class="crosslink" href="#Installation-im-BIOS-Modus">Installation im BIOS-Modus
</a></li><li><a class="crosslink" href="#MBR-GPT-Mischmasch">MBR-GPT-Mischmasch
</a><ol class="arabic"><li><a class="crosslink" href="#Erkennen-eines-MBR-GPT-Mischmasches">Erkennen eines MBR-GPT-Mischmasches
</a></li><li><a class="crosslink" href="#Aufloesen-des-MBR-GPT-Mischmasches-vor-vollstaendiger-Neuinstallation">Auflösen des MBR-GPT-Mischmasches vor vo...</a><ol class="arabic"><li><a class="crosslink" href="#Loeschen-des-msdos-Schemas">Löschen des msdos-Schemas
</a></li><li><a class="crosslink" href="#Loeschen-des-GPT-Schemas">Löschen des GPT-Schemas
</a></li></ol></li><li><a class="crosslink" href="#Aufloesen-des-MBR-GPT-Mischmasches-im-bereits-installierten-und-an-sich-lauffaehigen-System">Auflösen des MBR-GPT-Mischmasches im ber...</a><ol class="arabic"><li><a class="crosslink" href="#Loeschen-von-nicht-benoetigten-verbliebenen-GPT-Strukturen">Löschen von nicht benötigten verbliebe...</a></li><li><a class="crosslink" href="#Loeschen-von-nicht-benoetigten-verbliebenen-msdos-Strukturen">Löschen von nicht benötigten verbliebe...</a></li></ol></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>Seit etwa zwei Jahren kommen zunehmend Computer-Systeme auf den Markt, die mit einem <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Extensible_Firmware_Interface">EFI</a> statt dem lange Zeit genutzten <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/BIOS">BIOS</a> ausgestattet sind. Im folgenden werden Erfahrungen gesammelt und damit erste Anleitungen gegeben, wie man Ubuntu auf einem solchen System installiert und startet.</p><p>Dabei wird hier auf Besonderheiten und Probleme eingegangen, die den Start der Ubuntu-CD, die Installation von Ubuntu sowie den ersten Start nach erfolgter Installation betreffen - sofern sie etwas mit der Nutzung von EFI zu tun haben. Anderweitige Probleme mit Ubuntu auf EFI-Systemen, die eventuell nach längerer Laufzeit hervortreten, sind nicht Gegenstand dieses Artikels.</p><div class="section_1"><h2 id="Vorbemerkung">Vorbemerkung<a class="headerlink" href="#Vorbemerkung">¶</a></h2><p>
Grundsätzlich ist die Installation von Ubuntu auf einem System mit einem EFI nicht schwieriger, als auf einem System mit einem BIOS. D.h. besondere manuelle Eingriffe sind in der Regel vor oder während der Installation nicht notwendig, sofern das EFI seitens des System- oder Mainboard-Herstellers sauber implementiert wurde.</p><p>Voraussetzung ist allerdings, dass man den Boot-Mechanismus - der gegenüber einem BIOS-System komplexer ist - kennt und damit umzugehen weiß. Daher muss man dem Startvorgang der <a class="internal" href="../desktop-cd.html">Ubuntu-CD</a> oder des <a class="internal" href="../unetbootin.html#Verwendung-fuer-U-EFI">Ubuntu-USB-Sticks</a> besondere Aufmerksamkeit schenken, um etwaigen Fallstricken die sich daraus ergeben können von vornherein aus dem Weg zu gehen.</p></div><div class="section_1"><h2 id="Unterstuetzt-der-Computer-UEFI">Unterstützt der Computer UEFI?<a class="headerlink" href="#Unterstuetzt-der-Computer-UEFI">¶</a></h2><p>
</p><div class="section_2"><h3 id="Ubuntu-Live-CD-DVD">Ubuntu Live-CD/DVD<a class="headerlink" href="#Ubuntu-Live-CD-DVD">¶</a></h3><p>
Um vorab herauszufinden, ob ein Computer UEFI, BIOS oder beides unterstützt, startet man ein Live-System. Am Desktop öffnet man ein Terminal <sup><a href="#source-1">[1]</a></sup> und gibt den folgenden Befehl ein:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo dmidecode -t0 | grep -Ei "(BIOS boot|UEFI)" </pre></div></div><p>Als Rückmeldung erhält man dann je nach System:</p><div class="section_3"><h4 id="Computer-verfuegt-nur-ueber-ein-BIOS-ohne-UEFI">Computer verfügt nur über ein BIOS ohne UEFI<a class="headerlink" href="#Computer-verfuegt-nur-ueber-ein-BIOS-ohne-UEFI">¶</a></h4><p>
</p><pre class="notranslate">		BIOS boot specification is supported</pre></div><div class="section_3"><h4 id="Computer-verfuegt-ueber-ein-UEFI-mit-CSM">Computer verfügt über ein UEFI mit <a class="crosslink" href="#BIOS-Kompatibilitaets-Modus">CSM</a><a class="headerlink" href="#Computer-verfuegt-ueber-ein-UEFI-mit-CSM">¶</a></h4><p>
</p><pre class="notranslate">		BIOS boot specification is supported
                UEFI is supported</pre></div><div class="section_3"><h4 id="Computer-verfuegt-nur-ueber-ein-UEFI-ohne-CSM">Computer verfügt nur über ein UEFI ohne CSM<a class="headerlink" href="#Computer-verfuegt-nur-ueber-ein-UEFI-ohne-CSM">¶</a></h4><p>
</p><pre class="notranslate">		UEFI is supported</pre></div></div><div class="section_2"><h3 id="Windows-Installation">Windows Installation<a class="headerlink" href="#Windows-Installation">¶</a></h3><p>
Man kann bei einem neuen Computer mit Windows vorab festzustellen, wie das Windows installiert wurde.</p><p>Dazu startet man das Windows und öffnet am Desktop die 
</p><ul><li><p>Eingabeaufforderung mit Adminrechten</p></li></ul><p>und gibt in dieses Terminal <sup><a href="#source-1">[1]</a></sup> dann ein:</p><div class="bash"><div class="contents"><pre class="notranslate">bcdedit /enum </pre></div></div><p>Die Ausgabe im Bereich <code class="notranslate">{bootmgr}</code> gibt dann Auskunft über das Startverzeichnis für den Windows-Bootmanager. Die relevanten Zeilen sollten bei einer EFI-Installation wie folgt aussehen:</p><pre class="notranslate">device      partition=\Device\HarddiskVolume1
path        \EFI\Microsoft\Boot\bootmgfw.efi</pre><p>Auch mit diesen Angaben lassen sich erste Rückschlüsse auf die Unterstützung hinsichtlich EFI erzielen.</p></div></div><div class="section_1"><h2 id="Der-Start-auf-einem-EFI-System">Der Start auf einem EFI-System<a class="headerlink" href="#Der-Start-auf-einem-EFI-System">¶</a></h2><p>
Dreierlei Dinge machen den Start auf einem EFI-System gegenüber einem BIOS-System komplexer und damit für den Unwissenden verwirrender: Erstens verfügen derzeitige EFIs über eine BIOS-Kompatibilitäts-Modus, zweitens handelt es sich bei den Installations-Medien moderner Betriebssysteme um Hybriden und drittens wurde in das EFI ein Boot-Management integriert.</p><div class="section_2"><h3 id="BIOS-Kompatibilitaets-Modus">BIOS-Kompatibilitäts-Modus<a class="headerlink" href="#BIOS-Kompatibilitaets-Modus">¶</a></h3><p>
Da nicht alle Betriebssysteme mit EFI umgegehen können - insbesondere ältere MS-Betriebssysteme sind von dieser Limitierung betroffen - bringen die meisten EFI derzeit einen BIOS-Kompatibiliäts-Modus (engl. <strong>C</strong>ompatibility <strong>S</strong>upport <strong>M</strong>odule, kurz CSM) mit, der die Emulation eines herkömmlichen BIOS erlaubt. Damit können dann auch mit EFI nicht kompatible Betriebssysteme auf einem solchen Rechner installiert werden.</p><p>Man kann den BIOS-Modus - wenn gewünscht oder aus anderen Gründern erforderlich - natürlich auch für solche Betriebssysteme nutzen, die eigentlich schon mit EFI umgehen können.</p><p>Im BIOS-Modus verhält sich das System - was Start und Installation anbelangt - dann so, wie man es von einem reinen BIOS-System gewohnt ist.</p><p>Das Vorhandensein des BIOS-Modus zwingt den Anwender aber auch häufig, sich beim Start eines Start-<a class="internal" href="../datenträger.html">Datenträgers</a> für einen der beiden Modi zu entscheiden. Dies ist mittels Boot-Menü des EFI möglich:</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Das Boot-Menü erreicht man nach Einschalten des Rechners meist über eine der folgenden Tasten: 
<span class="key">Esc</span>  , 
<span class="key">F8</span>  , 
<span class="key">F9</span>  , 
<span class="key">F10</span>  oder 
<span class="key">F12</span> . Außerdem sollte kurz nach dem Einschalten des Rechners auf dem Start-Bildschirm ein Hinweis auf die entsprechende Taste erscheinen. Im Zweifel empfiehlt sich ein Blick in das Handbuch des Rechners bzw. Mainboards. Liegt kein Handbuch bei, so kann man dieses in aller Regel auf den Support-Seiten der Hersteller herunterladen.
</p></div></div><p>
</p><table style="width: 97%"><tr class="titel"><td colspan="2"> BIOS-Kompatibilitäts-Modus im Boot-Menü von EFIs </td></tr><tr class="kopf"><td> <strong>ASROCK 970 Extreme3 mit Ubuntu-USB-Stick</strong> </td><td> <strong>LENOVO ThinkCenter M81 5084 mit Ubuntu-CD</strong> </td></tr><tr><td> <img alt="asrock-efi-boot-menu.jpg" class="image-center" src="../_/006531d8094f31c8af3054a0ddf43d4fd892b2e5.png"/> </td><td> <img alt="lenovo-efi-boot-menu.jpg" class="image-center" src="../_/9e33762c8a4bdc582188746cff0cb9d434db1887.png"/> </td></tr><tr><td> Der mit "USB:" beginnende Eintrag startet beim ASROCK den USB-Stick im BIOS-Modus, der mit "UEFI:" würde das Laden im EFI-Modus einleiten. </td><td> Beim Lenovo wird der Eintrag für das Starten der Ubuntu-CD im BIOS-Modus mit "Legacy:" eingeleitet, über den "UEFI:"-Eintrag startet man die CD im EFI-Modus. </td></tr></table><p>Wie man sieht, sind die Bezeichnungen im Boot-Menü nicht einheitlich. Gut vorstellbar, dass andere Hersteller auch wieder ganz andere Bezeichnungen haben. Im Zweifel muss man einfach ausprobieren, welcher Eintrag welchen Modus startet.</p><p>Erkennbar ist an den Beispielen auch, dass die Auswahl des Modus pro Datenträger und nicht etwa global getroffen wird. D.h., dass man eine Auswahl zwischen den Modi nur dann hat, wenn der Datenträger so eingerichtet ist, dass er beide Modi unterstützt.</p></div><div class="section_2"><h3 id="Hybride-Installations-Medien">Hybride Installations-Medien<a class="headerlink" href="#Hybride-Installations-Medien">¶</a></h3><p>
Die Installations-Medien heutiger Betriebssysteme sind häufig hybrid, d.h. sie können sowohl im BIOS-Modus als auch im EFI-Modus gestartet werden und stellen demzufolge eine Auswahlmöglichkeit im Boot-Menü des EFI bereit (siehe oben). Bei der Ubuntu-CD lassen sich die beiden Modi anhand ihres unterschiedlichen Startbildschirms gut unterscheiden:</p><p>
</p><table style="width: 97%"><tr class="titel"><td colspan="3"> Unterschiedliche Start-Bildschirme </td></tr><tr class="kopf"><td> BIOS-Modus - Start von CD </td><td> BIOS-Modus - Start vom USB-Stick </td><td> EFI-Modus - GRUB-Menü (CD oder Stick) </td></tr><tr><td> <img alt="ubuntu-isolinux-start.png" class="image-center" src="../_/0a604e2e9732037d3fd03d67273c368b14a3c518.png"/> </td><td> <img alt="bios-modus-usb.jpg" class="image-center" src="../_/e00138f8575153005a6274c3064ae87e32564f87.png"/> </td><td> <img alt="efi-boot-grub-menu.png" class="image-center" src="../_/4f37573266d0d6935f3e90a3944a0ae782783ab1.png"/> </td></tr><tr><td style="vertical-align: top">Der bekannte Start-Bildschirm der Ubuntu-CD. Durch Drücken einer beliebigen Taste kann man das erweiterte Isolinux-Menü optional aufrufen. </td><td style="vertical-align: top">Der Start-Bildschirm, wenn man die Ubuntu-CD auf einen USB-Stick übertragen hat und davon lädt. </td><td> Im EFI-Modus wird ein GRUB-Menü stets angezeigt. Häufig erscheint zuvor noch mehr oder weniger lang die Fehlermeldung <code class="notranslate">error: prefix is not set</code>. Hier heißt es einfach abwarten. Das GRUB-Menü erscheint je nach System nach mehr oder weniger langer Wartezeit dennoch. Also Ruhe bewahren!  </td></tr></table><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Ab <a class="internal" href="../quantal_quetzal.html">Quantal Quetzal</a> erscheint bei der Auswahl im EFI-Modus statt <code class="notranslate">error: prefix is not set</code> der Hinweis <code class="notranslate">secure boot not enabled</code> - was dann darauf hinweist, das diese Option nicht aktiviert wurde. Mit diesem Startmedium ist im Prinzip dann eine entsprechende Installation möglich, die eine für <code class="notranslate">secure-boot</code> erforderliche, signierte GRUB-Startdatei erstellt.
</p></div></div></div><div class="section_2"><h3 id="Boot-Management">Boot-Management<a class="headerlink" href="#Boot-Management">¶</a></h3><p>
EFI-Systeme verfügen über einen integrierten Boot-Manager, über den unterschiedliche Betriebssystem-Loader auf einem Datenträger verwaltet und gestartet werden können. Voraussetzung dafür ist, dass auf dem Datenträger vor oder während der Installation eine <a class="interwiki interwiki-wikipedia_en" href="https://en.wikipedia.org/wiki/EFI_System_partition">EFI-System-Partition</a> eingerichtet wird und das Betriebssystem dort einen EFI-Loader anlegt.</p><p>Die Betriebssystem-Loader sind dabei im Pfad <strong>/EFI</strong> in einem <a class="external" href="http://www.uefi.org/specs/esp_registry" rel="nofollow">dem Betriebssystem entsprechenden Verzeichnis</a> abzulegen und müssen auf die <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Dateinamenserweiterung">Dateierweiterung</a> <strong>.efi</strong> enden.</p><p>Durch das Einrichten der EFI-System-Partition gemäß oben genannter Spezifikationen alleine erscheint aber im Boot-Menü des EFI noch kein Eintrag zur Auswahl des Betriebssystems. Diese Einträge werden im <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/NVRAM">NVRAM</a> des EFI gespeichert und müssen dementsprechend vom Installations-Programm des Betriebssystems dort eingerichtet werden.</p><p>Unter Linux erfolgt die Registrierung einer Betriebssystem-Loader-Datei im NVRAM mittels des Terminal-Programms <strong><a class="internal" href="../efibootmgr.html">efibootmgr</a></strong>.</p><p>Im Normalfall kümmert sich das Installations-Programm von Ubuntu um all diese Dinge selbständig, allerdings nur, wenn das Installations-Medium im EFI-Modus gestartet wurde. Daher ist es eben auch wichtig, dass man beim System-Start den passenden Modus wählt.</p><p>Allerdings gilt es das Boot-Managment unbedingt im Hinterkopf zu behalten, denn hier ergeben sich eine Menge möglicher Fehlerquellen, die nach einer scheinbar erfolgreichen Installation Ubuntus beim Neustart den Start der Ubuntu-Installation verhindern können (sieh dazu im Detail unten).</p></div></div><div class="section_1"><h2 id="Installation-im-EFI-Modus">Installation im EFI-Modus<a class="headerlink" href="#Installation-im-EFI-Modus">¶</a></h2><p>
Die Installation im EFI-Modus läuft grundsätzlich genauso ab, wie herkömmlich vom BIOS-Modus gewohnt. Allerdings gibt es wesentliche Unterschiede bei der Installationsart. Je nach gewählter Installationsart führt die Ubuntu-Installation zu folgendem Standardverhalten:</p><p>Informationen, Erfahrungen sowie Maßnahmen zur Bearbeitung nach der Installation sind in dem separaten Artikel
</p><ul><li><p><a class="internal missing" href="../baustelle/efi_nachbearbeitung.html">Baustelle/EFI Nachbearbeitung</a></p></li></ul><p>eingeflossen.</p><div class="section_2"><h3 id="Vorhandenes-Betriebssystem-loeschen-und-Ubuntu-neu-installieren">Vorhandenes Betriebssystem löschen und Ubuntu neu installieren<a class="headerlink" href="#Vorhandenes-Betriebssystem-loeschen-und-Ubuntu-neu-installieren">¶</a></h3><p>
<img alt="efi-modus-ub-löschen-und-neu.png" class="image-center" src="../_/21e4d927500f0d108c7f0da36b4b35b7d36a7333.png"/></p><p>Diese Installationsart ist die unproblematischste. Es wird automatisch</p><ul><li><p>das vorhandene Betriebssystem gelöscht,</p></li><li><p>in jedem Fall eine GPT auf dem Datenträger angelegt,</p></li><li><p>eine Ubuntu-Root-Partition sowie eine Partition für die Auslagerungsdatei (swap) eingerichtet,</p></li><li><p>in jedem Fall eine EFI-System-Partition auf dem Datenträger erstellt,</p></li><li><p>GRUB-EFI auf die EFI-System-Partition installiert,</p></li><li><p>und ein Eintrag im EFI-Boot-Menü hinterlegt.</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Ubuntu-neben-einem-vorhanden-Betriebssystem-installieren">Ubuntu neben einem vorhanden Betriebssystem installieren<a class="headerlink" href="#Ubuntu-neben-einem-vorhanden-Betriebssystem-installieren">¶</a></h3><p>
<img alt="efi-modus-ubuntu-neben-ubuntu.png" class="image-center" src="../_/6fa4d59c9f30a477cab64b96d52e35fdf6f8c281.png"/></p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Derzeit erkennt das Ubuntu-Setup-Programm leider keine bestehende, andere EFI-Installation (Windows oder andere Distributionen). Um Ubuntu neben einer bestehenden EFI-Installation einzurichten, muss daher im Moment die Installationsart <a class="crosslink" href="#Installationsart-Etwas-Anderes">Etwas Anderes</a> gewählt werden. Außerdem muss man die andere Distribution <a class="crosslink" href="#Andere-Distribution-einbinden">später manuell</a> in das <a class="internal" href="../grub_2.html">GRUB 2</a>-Menü einbinden, wenn man nicht ausschließlich über das EFI-Menü auswählen will.
</p></div></div><p>Ansonsten kommt es bei dieser Installationsart darauf an, wie der Datenträger eingerichtet ist, ob er also über eine MPT oder eine GPT verfügt:</p><div class="section_3"><h4 id="Datentraeger-mit-vorhandener-GPT">Datenträger mit vorhandener GPT<a class="headerlink" href="#Datentraeger-mit-vorhandener-GPT">¶</a></h4><p>
GUID Partition Table, kurz <a class="external" href="http://de.wikipedia.org/wiki/GUID_Partition_Table" rel="nofollow">GPT</a> ist der neue Standard für das Format von Partitionstabellen auf Festplatten. GPT ist der Nachfolger der Master-Boot-Record-Partitionstabellen.</p><p>Bei einem Datenträger mit einer GPT wird bei dieser Installationsart automatisch</p><ul><li><p>eine Ubuntu-Root-Partition neben den schon vorhanden Partitionen eingerichtet,</p></li><li><p>eine Partition für die Auslagerungsdatei erstellt - sofern eine solche nicht schon besteht,</p></li><li><p>ein GRUB-EFI auf eine bereits vorhanden EFI-System-Partition installiert oder es wird - wenn noch keine EFI-System-Partition auf dem Datenträger existiert - eine solche angelegt,</p></li><li><p>sowie ein Eintrag im EFI-Boot-Menü erstellt.</p></li></ul><p>
</p></div><div class="section_3"><h4 id="Datentraeger-mit-vorhandener-MPT">Datenträger mit vorhandener MPT<a class="headerlink" href="#Datentraeger-mit-vorhandener-MPT">¶</a></h4><p>
MPT steht für Master-Partitions-Tabelle und soll auf eine klassische <a class="external" href="http://de.wikipedia.org/wiki/Partitionstabelle" rel="nofollow">MBR-Partitionstabelle</a> hinweisen, also ein Datenträger, der ein "herkömmliches" Partitionierungsschema innerhalb des Master Boot Records aufweist, auch MSDOS-Partitionierungs-Schema genannt.</p><p>Ist auf dem Datenträger bereits eine MPT vorhanden, so lässt sich Ubuntu darauf über diese Installationsart nicht vollständig im EFI-Modus installieren, auch wenn die Installation scheinbar erfolgreich bis zum Ende läuft. Es wird eine Ubuntu-Root-Partition erzeugt sowie eine Partition für die Auslagerungsdatei, wenn nicht schon vorhanden und Ubuntu wird installiert.</p><p>Es wird aber</p><ul><li><p>keine EFI-System-Partition angelegt,</p></li><li><p>und kein GRUB installiert auch nicht in der Version für PC-BIOS.</p></li><li><p>Die Folge: Ubuntu kann nach Fertigstellung der Installation nicht gestartet werden.</p></li></ul><p>
Siehe auch <a class="crosslink" href="#Installation-im-BIOS-Modus">Installation im BIOS-Modus</a></p></div></div><div class="section_2"><h3 id="Installationsart-Etwas-Anderes">Installationsart Etwas Anderes<a class="headerlink" href="#Installationsart-Etwas-Anderes">¶</a></h3><p>
<img alt="installationsart-etwas-anderes.png" class="image-center" src="../_/6bb2b5f8b9a380130f6d5c37e9acadd960ae991e.png"/></p><p>Wählt man diese Installationsart, so gilt folgendes:</p><ul><li><p>Erstellt man hier eine neue Partitionstabelle so wird stets eine GPT angelegt.</p></li><li><p>Es muss unbedingt eine EFI-System-Partition eingerichtet werden. Diese heißt innerhalb des Installationsprogramms "EFI-Boot-Partition".<img alt="efi-modus-installation-gpt-neue-part-auswahl.png" class="image-center" src="../_/6bd22c042fa4e7c62a588858deffe0466dbdc8e5.png"/></p></li></ul><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Auch wenn sich auf einer MPT grundsätzlich eine EFI-System-Partition einrichten lässt muss es nicht heißen, dass das EFI des Systems damit umgehen kann. Im schlimmsten Fall lässt sich Ubuntu dann nicht starten. Außerdem ist die Kombination einer ESP auf einer MPT wenig sinnvoll:</p><p>Möchte man mehrere Linux-Systeme auf einem Rechner verwalten, so ist dies mit den Linux eigenen Bootmanagern viel komfortabler möglich, als mit dem EFI-internen. Möchte man Windows- und Linux-Systeme über den EFI-Manager verwalten, so ist dies nur möglich, wenn der betreffende Datenträger über eine GPT verfügt. Windows kann im EFI-Modus nur auf einem Datenträger mit GPT installiert werden.
</p></div></div></div></div><div class="section_1"><h2 id="Installation-im-BIOS-Modus">Installation im BIOS-Modus<a class="headerlink" href="#Installation-im-BIOS-Modus">¶</a></h2><p>
Um Ubuntu auf einem System mit UEFI-BIOS im BIOS-Modus installieren zu können, muss man das Ubuntu-Installations-Medium unbedingt im BIOS-Modus durch entsprechende Auswahl im EFI-Menü starten.</p><p>Der Ablauf erfolgt danach im Wesentlichen wie unter <a class="internal" href="../installation.html">Installation</a> beschrieben.</p></div><div class="section_1"><h2 id="MBR-GPT-Mischmasch">MBR-GPT-Mischmasch<a class="headerlink" href="#MBR-GPT-Mischmasch">¶</a></h2><p>
Ein "GPT-MBR-Mischmasch" entsteht ganz leicht beim Herumprobieren von verschiedenen Installationen auf einem EFI-System. Dieses Herumprobieren wird dadurch provoziert, dass der Ubuntu-Installer - genauer gesagt das Paket os-prober - derzeit keine EFI-Installationen erkennt.</p><p>Beim Herumprobieren - sprich beim erneuten Installieren - werden dann in der Regel, Partitionstabellen nur neu angelegt. Beim Neuanlegen werden aber Strukturen einer alten anderen Partitionstabelle nicht gelöscht - zumindest sehr häufig nicht.</p><p>D.h. wenn man z.B. auf dem Datenträger bisher ein msdos-Partitionierungs-Schema hatte und legt dann ein GPT-Partitionierungs-Schema an, dann können Reste des msdos-Schemas erhalten bleiben, obwohl das neue GPT-Schema eingerichtet wird und an sich auch funktioniert. Das gilt noch mehr für den umgekehrten Fall, dass man erst ein GPT-Schema hatte und dann zum msdos-Schema wechselt.</p><p>Problem für den "normalen Nutzer" ist dabei, dass sowohl im Windows-Setup als auch im Ubuntu-Installer gar nicht oder nicht ausreichend transparent wird, welches Schema verwendet bzw. neu angelegt wird.</p><div class="section_2"><h3 id="Erkennen-eines-MBR-GPT-Mischmasches">Erkennen eines MBR-GPT-Mischmasches<a class="headerlink" href="#Erkennen-eines-MBR-GPT-Mischmasches">¶</a></h3><p>
Das Vorliegen von msdos- und GPT-Strukturen auf ein und dem selben Datenträger erkennt man an der Ausgabe von <a class="internal" href="../parted.html">parted</a>:
</p><pre class="notranslate">ubuntu@ubuntu:~$ sudo parted -l
Warning: /dev/sda contains GPT signatures, indicating that it has a GPT table.
However, it does not have a valid fake msdos partition table, as it should.
Perhaps it was corrupted -- possibly by a program that doesn't understand GPT
partition tables.  Or perhaps you deleted the GPT table, and are now using an
msdos partition table.  Is this a GPT partition table?
Yes/No?   </pre><p>In <a class="internal" href="../gparted.html">GParted</a> erkennt man es daran, dass keine Partitionen auf dem Datenträger angezeigt werden.</p></div><div class="section_2"><h3 id="Aufloesen-des-MBR-GPT-Mischmasches-vor-vollstaendiger-Neuinstallation">Auflösen des MBR-GPT-Mischmasches vor vollständiger Neuinstallation<a class="headerlink" href="#Aufloesen-des-MBR-GPT-Mischmasches-vor-vollstaendiger-Neuinstallation">¶</a></h3><p>
Den MBR-GPT-Mischmasch kann man bei Neuinstallation auflösen indem man vor der Installation beide Strukturen vollständig entfernt. Das geht von Linux aus wie folgt:</p><div class="section_3"><h4 id="Loeschen-des-msdos-Schemas">Löschen des msdos-Schemas<a class="headerlink" href="#Loeschen-des-msdos-Schemas">¶</a></h4><p>
</p><pre class="notranslate">sudo dd if=/dev/zero of=/dev/sdX count=2048</pre><p><code class="notranslate">/dev/sdX</code> ist dabei durch den Datenträger zu ersetzen, den man bereinigen möchte. Mit diesem Befehl wird der MBR und der dahinterliegende verborgene Bereich genullt, was für das Löschen des msdos-Schemas ausreichend ist.</p></div><div class="section_3"><h4 id="Loeschen-des-GPT-Schemas">Löschen des GPT-Schemas<a class="headerlink" href="#Loeschen-des-GPT-Schemas">¶</a></h4><p>
Obwohl die primären GPT-Informationen auch innerhalb der ersten 2048 Sektoren liegen, reicht hier für ein sauberes Löschen der GPT-Struktur ein Nullen dieses Bereiches nicht aus. Ein vollständiges Löschen ist effizient nur mittels <a class="internal" href="../gdisk.html">gdisk</a> möglich:</p><ol class="arabic"><li><pre class="notranslate">sudo gdisk /dev/sdX</pre><p> <code class="notranslate">/dev/sdX</code> mit der zu bereinigenden Platte ersetzen.</p></li><li><p>gdisk präsentiert daraufhin wahrscheinlich die folgende Abfrage:</p><pre class="notranslate">GPT fdisk (gdisk) version 0.8.1

Partition table scan:
  MBR: MBR only
  BSD: not present
  APM: not present
  GPT: present

Found valid MBR and GPT. Which do you want to use?
 1 - MBR
 2 - GPT
 3 - Create blank GPT

Your answer: </pre><p> Da man hier ohnehin alle Strukturen vom Datenträger löschen möchte, ist es in dem Fall egal, ob man 
<span class="key">1</span> , 
<span class="key">2</span>  oder 
<span class="key">3</span>  drückt.</p></li><li><p>
<span class="key">X</span> drücken um in das extra-functionality-Menü zu gelangen.</p></li><li><p>
<span class="key">Z</span>  drücken um etwaige Reste eines GPT-Schemas zu löschen.</p></li><li><p>Dabei beide Nachfragen mit 
<span class="key">Y</span>  bestätigen gdisk sollte anschließend selbständig schließen.</p></li></ol><p>
Alternativ könnte man auch den vollständigen Datenträger mit Nullen überschreiben lassen, was dann aber im Verhältnis viel länger dauern würde.</p><p>Wenn beide Strukturen gelöscht wurden, dann kann man wieder sauber neu installieren, wobei man dabei unbedingt die Hintergründe einer Installation auf einem EFI-System beachten muss. Siehe dazu <a class="crosslink" href="#Vorbemerkung">oben ab Vorbemerkung</a>).</p></div></div><div class="section_2"><h3 id="Aufloesen-des-MBR-GPT-Mischmasches-im-bereits-installierten-und-an-sich-lauffaehigen-System">Auflösen des MBR-GPT-Mischmasches im bereits installierten und an sich lauffähigen System<a class="headerlink" href="#Aufloesen-des-MBR-GPT-Mischmasches-im-bereits-installierten-und-an-sich-lauffaehigen-System">¶</a></h3><p>
Auch wenn das System bereits installiert ist, kann man den Mischmasch aus msdos- und GPT-Strukturen beseitigen. Voraussetzung ist, dass man sich zunächst <a class="internal" href="../gdisk.html">gdisk</a> auf dem System installiert.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Auch wenn gdisk in aller Regel zuverlässig arbeitet, stellen Operationen am Partitionierungs-Schema einen sehr risikoreichen Vorgang dar, bei dem es im schlimmsten Fall zu Datenverlust kommen kann. Wichtige Daten müssen daher vor der Operation unbedingt extern gesichert werden!
</p></div></div><div class="section_3"><h4 id="Loeschen-von-nicht-benoetigten-verbliebenen-GPT-Strukturen">Löschen von nicht benötigten verbliebenen GPT-Strukturen<a class="headerlink" href="#Loeschen-von-nicht-benoetigten-verbliebenen-GPT-Strukturen">¶</a></h4><p>
Nutzt man auf dem System aktuell ein msdos-Schema und möchte übriggebliebene GPT-Strukturen löschen, so geht man wie folgt vor:</p><ol class="arabic"><li><pre class="notranslate">sudo gdisk /dev/sdX</pre><p> <code class="notranslate">/dev/sdX</code> mit der zu bereinigenden Platte ersetzen.</p></li><li><p>gdisk präsentiert daraufhin wahrscheinlich die folgende Abfrage:</p><pre class="notranslate">GPT fdisk (gdisk) version 0.8.1

Partition table scan:
  MBR: MBR only
  BSD: not present
  APM: not present
  GPT: present

Found valid MBR and GPT. Which do you want to use?
 1 - MBR
 2 - GPT
 3 - Create blank GPT

Your answer: </pre><p> Hier muss man mit 
<span class="key">1</span>  antworten!</p></li><li><p>
<span class="key">X</span> drücken um in das extra-functionality-Menü zu gelangen.</p></li><li><p>
<span class="key">Z</span>  drücken um etwaige Reste eines GPT-Schemas zu löschen.</p></li><li><p><strong>Achtung:</strong> Nach drücken von 
<span class="key">Z</span>  stellt gdisk zwei Fragen. Die erste bezüglich des Löschens des GPT-Schemas beantwortet man mit 
<span class="key">Y</span> . Die zweite Frage bezüglich des MBR muss man unbedingt mit 
<span class="key">N</span>  beantworten, da man andernfalls das bestehende, funktionstüchtige msdos-Schema löscht!</p></li></ol><p>
</p></div><div class="section_3"><h4 id="Loeschen-von-nicht-benoetigten-verbliebenen-msdos-Strukturen">Löschen von nicht benötigten verbliebenen msdos-Strukturen<a class="headerlink" href="#Loeschen-von-nicht-benoetigten-verbliebenen-msdos-Strukturen">¶</a></h4><p>
Setzt man aktuell eine GPT-Struktur ein und muss Reste einer msdos-Struktur entfernen, so erfolgt dies ebenfalls mittels gdisk:
</p><ol class="arabic"><li><pre class="notranslate">sudo gdisk /dev/sdX</pre><p> <code class="notranslate">/dev/sdX</code> mit der zu bereinigenden Platte ersetzen.</p></li><li><p>gdisk präsentiert daraufhin wahrscheinlich die folgende Abfrage:</p><pre class="notranslate">GPT fdisk (gdisk) version 0.8.1

Partition table scan:
  MBR: MBR only
  BSD: not present
  APM: not present
  GPT: present

Found valid MBR and GPT. Which do you want to use?
 1 - MBR
 2 - GPT
 3 - Create blank GPT

Your answer: </pre><p> Hier muss man mit 
<span class="key">2</span>  antworten!</p></li><li><p>
<span class="key">X</span> drücken, um in das extra-functionality-Menü zu gelangen.</p></li><li><p>
<span class="key">N</span>  drücken, um einen sauberen Protectiv-MBR zu erzeugen und damit Reste eines msdos-Schemas zu löschen.</p></li><li><p>
<span class="key">W</span>  drücken, um die Veränderungen zu übernehmen und gdisk zu verlassen.</p></li><li><p>Die Nachfrage mit 
<span class="key">Y</span>  bestätigen.</p></li></ol></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="../efibootmgr.html">efibootmgr</a> Terminalprogramm zum Bearbeiten des NVRAM</p></li><li><p><a class="internal" href="../efi_nachbearbeitung.html">EFI Nachbearbeitung</a> - Maßnahmen nach einer Installation</p></li><li><p><a class="external" href="http://www.example.org" rel="nofollow">Beispiel</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - ein externer Link</p></li><li><p><a class="crosslink topic" href="https://forum.ubuntuusers.de/topic/welche-themen-gehoeren-hier-her-und-welche-ni-3/">Welche Themen gehören in Rund ums Wiki</a> - ein Thema im Forum</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../archiv/efi_installation_erfahrungsberichte/a/revision/700287.html">Diese Revision</a> wurde am 6. März 2014 18:43 von <a href="https://ubuntuusers.de/user/frustschieber/">frustschieber</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../archiv.html">Archiv</a></li>
<li><a href="../archiv/efi_installation_erfahrungsberichte.html">EFI Installation Erfahrungsberichte</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>