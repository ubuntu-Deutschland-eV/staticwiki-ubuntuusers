<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Archiv/Alix/Optimierte_Bottom-Up_Installation › ubuntuusers statisches Wiki</title>
<link href="../../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../../archiv/alix/optimierte_bottom-up_installation.html">Optimierte Bottom-Up Installation</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Archiv/Alix/Optimierte_Bottom-Up_Installation">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../../wiki/index.html">Index</a></li>
<li><a href="../../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../../wiki.html">Übersicht</a></li>
<li><a href="../../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../../kategorien.html">Kategorie</a></li>
<li><a href="../../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../../howto.html">Howto anlegen</a></li>
<li><a href="../../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../../baustelle.html">Baustellen</a></li>
<li><a href="../../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../../archiv/alix/optimierte_bottom-up_installation/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../../archiv/alix/optimierte_bottom-up_installation/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../../archiv/alix/optimierte_bottom-up_installation/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../../archiv/alix/optimierte_bottom-up_installation/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../../archiv/alix/optimierte_bottom-up_installation/a/backlinks.html">Optimierte Bottom-Up Installation</a></h1>
<div id="page"><div class="box improvable"><h3 class="box improvable">Archivierte Anleitung</h3><div class="contents"><p>
Dieser Artikel wurde archiviert, da er - oder Teile daraus -
nur noch unter einer älteren Ubuntu-Version nutzbar ist. Diese
Anleitung wird vom Wiki-Team weder auf Richtigkeit überprüft
noch anderweitig gepflegt. Zusätzlich wurde der Artikel für
weitere Änderungen gesperrt.
</p><hr/><p><strong>Anmerkung:</strong> Das benötigte <a class="external" href="http://www.yeasoft.com/site/projects:alix-rescue" rel="nofollow">Alix Rescue and PE System</a> <img alt="{en}" src="../../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ist nur noch für Debian verfügbar.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../../alix.html">Was ist ein Alix-Board</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../../pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../../sudo.html">Root-Rechte erlangen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../../partitionierung/grundlagen.html">Grundlagen der Partitionierung</a></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="../../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-6" id="source-6"></a> <a class="internal" href="../../editor.html">Einen Editor öffnen</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Vorteile-einer-Bottom-Up-Installation">Vorteile einer Bottom-Up Installation
</a></li><li><a class="crosslink" href="#Grundsaetzlicher-Ablauf">Grundsätzlicher Ablauf
</a></li><li><a class="crosslink" href="#Voraussetzungen">Voraussetzungen
</a></li><li><a class="crosslink" href="#Vorbereitung-der-CF-Karte">Vorbereitung der CF-Karte
</a><ol class="arabic"><li><a class="crosslink" href="#Vorbereitung-der-Kartenleser-basierten-Installation">Vorbereitung der Kartenleser basierten I...</a></li><li><a class="crosslink" href="#Vorbereitung-der-PXE-Installation">Vorbereitung der PXE Installation
</a></li><li><a class="crosslink" href="#Partitionieren-der-CF-Karte">Partitionieren der CF-Karte
</a></li><li><a class="crosslink" href="#Anlegen-der-Dateisysteme">Anlegen der Dateisysteme
</a></li><li><a class="crosslink" href="#Anlegen-der-Boot-Umgebung">Anlegen der Boot Umgebung
</a></li></ol></li><li><a class="crosslink" href="#Zwischenstand">Zwischenstand
</a><ol class="arabic"><li><a class="crosslink" href="#Abkuerzung">Abkürzung
</a></li></ol></li><li><a class="crosslink" href="#Aufspielen-des-Basis-Betriebssystems">Aufspielen des Basis Betriebssystems
</a></li><li><a class="crosslink" href="#Start-des-Basis-Betriebssystems">Start des Basis Betriebssystems
</a></li><li><a class="crosslink" href="#Weiterfuehrende-Informationen">Weiterführende Informationen
</a><ol class="arabic"><li><a class="crosslink" href="#Aktuelle-UIC-Templates-fuer-Alix-Boards">Aktuelle UIC Templates für Alix Boards
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>In diesem Artikel geht es um die Erstellung eines angepassten Minimalbetriebssystem für <a class="internal" href="../../alix.html">Alix</a>-Boards entweder mittels PXE oder einer zuvor präparierten CF-Karte, welches es erlaubt, anschließend das maßgeschneiderte Betriebssystem von Grund auf zu installieren (Bottom-Up).</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Dieser Artikel soll sowohl grundsätzliches Wissen vermitteln als auch praktische Hilfe anbieten. Aus diesem Grunde befinden sich in ihm verschiedene Download Links mit deren Hilfe verschiedene Zwischenergebnisse heruntergeladen werden können, um die beschriebene Prozedur zu beschleunigen.
</p></div></div><div class="section_1"><h2 id="Vorteile-einer-Bottom-Up-Installation">Vorteile einer Bottom-Up Installation<a class="headerlink" href="#Vorteile-einer-Bottom-Up-Installation">¶</a></h2><p>
Entgegen der im Artikel <a class="internal" href="../../alix.html">Alix</a> vorgestellten Standardinstallation hat eine optimierte Bottom-Up Installation den Vorteil, dass man genau weiß und insbesondere genau steuern kann, was Bestandteil der Installation wird, was beim Design einer Hardware-Appliance von großen Vorteil ist, da die Ressourcen der benutzten Hardware in der Regel recht beschränkt sind. Dabei muss eine solche gar nicht besonders aufwändig sein oder sehr fortgeschrittene Kenntnisse erfordern, da sie sehr wohl mit Hilfe entsprechender Werkzeuge automatisierbar ist.
Da die vollständig manuelle Herangehensweise im Artikel <a class="internal" href="../../alix/cf-bootmedium_erstellen.html">ALIX CF-Bootmedium erstellen</a> bereits größtenteils behandelt wurde, wird dieser Artikel auf die automatisierte Variante eingehen.</p></div><div class="section_1"><h2 id="Grundsaetzlicher-Ablauf">Grundsätzlicher Ablauf<a class="headerlink" href="#Grundsaetzlicher-Ablauf">¶</a></h2><p>
</p><ul><li><p>Herstellung einer startbaren CF-Karte mit einem Live-Rettungssystem entweder auf einem anderen Rechner oder auf dem Alix-System selbst, was mit dem Live-Rettungssystem über PXE gestartet wurde</p></li><li><p>Start des Live-Rettungssystems auf dem Board</p></li><li><p>Aufspielen des gewünschten Systems</p></li><li><p>Eintragen des Systems im Bootmanager</p></li></ul><p>
</p></div><div class="section_1"><h2 id="Voraussetzungen">Voraussetzungen<a class="headerlink" href="#Voraussetzungen">¶</a></h2><p>
Um mit der Installation zu beginnen, muss folgendes vorhanden sein:
</p><ul><li><p>Ein funktionierendes Netzwerk, welches Zugriff auf das Internet erlaubt.</p></li><li><p>Ein funktionsfähiges Alix-Board. Mit Hilfe des Verfahrens, welches in dieser Anleitung beschrieben wird, wurden Systeme für verschiedene Alix-Boards der Serie 2Dxx aufgesetzt. Prinzipiell sollte diese Anleitung für alle Alix-Boards mit nur einer serieller Schnittstelle geeignet sein.</p></li><li><p>Eine möglichst schnelle Compact Flash Karte, die mindestens 2GB groß sein sollte. Die Gesamtkapazität ist allerdings vom späteren Verwendungszweck abhängig.</p></li><li><p>Ein beliebiger Rechner mit serieller Schnittstelle der als Terminal für das Board genutzt wird.</p></li></ul><p>
<strong>Für die "PXE Start"-Variante wird des weiteren benötigt:</strong>
</p><ul><li><p>Ein DHCP Server im Netz in dem man die entsprechenden Netzwerk-Boot-Optionen setzen kann</p></li><li><p>Ein Rechner, Router oder NAS auf dem das Minimalsystem per TFTP und NFS zur Verfügung gestellt werden kann</p></li></ul><p>
<strong>Für die "Start mit vorbereiteter CF Karte"-Variante wird des weiteren benötigt:</strong>
</p><ul><li><p>Ein Linux-Rechner, auf dem das Paket SYSLINUX vorhanden ist.</p></li><li><p>ein externer Kartenleser</p></li></ul><p>
<strong>Für die "<a class="crosslink" href="#Abkuerzung">schnelle Abkürzung</a>" wird des weiteren benötigt:</strong>
</p><ul><li><p>Ein Linux-Rechner mit einem externen Kartenleser. Grundsätzlich kann es auch ein Windows-Rechner oder ein Mac sein, allerdings ist die Vorgehensweise entsprechend anzupassen und ist hier nicht dokumentiert.</p></li></ul><p>
Sind alle diese Voraussetzungen erfüllt, kann mit der Installation begonnen werden.</p></div><div class="section_1"><h2 id="Vorbereitung-der-CF-Karte">Vorbereitung der CF-Karte<a class="headerlink" href="#Vorbereitung-der-CF-Karte">¶</a></h2><p>
Benötigt wird hierfür das <a class="external" href="http://www.yeasoft.com/site/projects:alix-rescue" rel="nofollow">Alix Rescue and PE System</a> <img alt="{en}" src="../../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>, ein Live-System welches für Alix-Boards optimiert wurde, sehr einfach einzusetzen ist, und alle Features bietet, die für diese Anleitung erforderlich sind. <strong>alix-rescue</strong> ist in seiner aktuellsten Version in 3 Varianten verfügbar: Ubuntu 8.04, Ubuntu 10.04 und Debian squeeze. Hier sollte jene Version geladen werden, die auch für die Installation geplant ist. Das dieses Minimalsystem nur aus 3 Dateien besteht, bietet es sich an, es auch als Notfall-System auf dem Alix-System zu belassen, da es ein Mindestmaß an Funktionalität für den Notfall zur Verfügung stellt.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Ab <a class="internal" href="../../maverick_meerkat.html">Ubuntu 10.10</a> werden nur noch i686-Prozessoren unterstützt. Dadurch kommen ältere i586-Prozessoren wie Intel Pentium (MMX), AMD K5 und ältere Geode-CPUs für Ubuntu nicht mehr in Frage. Daher ist es empfehlenswert, eine LTS-Version wie z.B. <a class="internal" href="../../lucid_lynx.html">Ubuntu 10.04</a> zu installieren, da dieses noch bis 2015 (Serverversion) unterstützt wird.
</p></div></div><p>Wenn auch die PXE-Installation das Herz des Puristen höher schlagen lässt, da jedes Byte welches auf der CF-Karte Installiert wird, vom Alix-System selber darauf geschrieben wird, so sei dem Benutzer doch empfohlen auf die Variante mit vorbereiteter CF-Karte zurückzugreifen da:
</p><ol class="arabic"><li><p>Das Aufsetzen einer PXE Boot-Umgebung wenn nicht bereits vorhanden, recht Aufwendig ist und in einem Home-Umfeld mit erheblichen Problemen verbunden ist (z.B.: doppelte DHCP Server wenn der Router selber nicht die Zusatzoptionen im DHCP Server für Network Boot beherrscht)</p></li><li><p>Das Alix-System mit der vorbereiteten CF-Karte direkt über <em>ssh</em> erreichbar ist, und man sich so den ganzen Aufwand mit der seriellen Schnittstelle und dem seriellen Terminal sparen kann.</p></li><li><p>Da diese Methode am Ende exakt das gleiche Resultat liefert, wird es also keinen qualitativen Vorteil bringt, die PXE Methode zu verwenden.</p></li></ol><p>
Der Vollständigkeit halber, soll diese aber nicht undokumentiert bleiben.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p><strong>Für den ganz eiligen Benutzer</strong></p><p>Wer diesen Schritt überspringen will, kann direkt zum <a class="crosslink" href="#Abkuerzung">Abkürzung</a> springen - dort wird ihm eine andere Möglichkeit angeboten, die CF-Karte aus einem der Anleitung entsprechenden fertigen Abbild herzustellen.
</p></div></div><div class="section_2"><h3 id="Vorbereitung-der-Kartenleser-basierten-Installation">Vorbereitung der Kartenleser basierten Installation<a class="headerlink" href="#Vorbereitung-der-Kartenleser-basierten-Installation">¶</a></h3><p>
Zum weiteren Vorgehen wird auf dem mit CF-Kartenleser ausgestatteten Rechner das Paket <strong>syslinux</strong> benötigt<sup><a href="#source-2">[2]</a></sup>.</p><ul><li><p><strong>syslinux</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install syslinux </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install syslinux </pre></div></div><p>
</p></div></div><p>Hiervon wird insbesondere das Programm <strong>extlinux</strong> benötigt, welches leider in neueren Ubuntu Versionen herausgetrennt wurde. Es kann zwar theoretisch problemlos nachinstalliert werden, aber leider schießt das dafür geschaffene Installationspaket über das Ziel hinaus, da es nicht nur das fehlende Programm nachinstalliert, sondern versucht den vorhandenen Bootmanager des Rechners mit extlinux zu ersetzen, was sicherlich nicht im Sinne des Benutzers liegt. Sei es noch so wünschenswert, extlinux als vollständigen Bootmanager neben GRUB zu unterstützen, so wird dieser doch meistens eher dafür gebraucht, externe Laufwerke bootfähig zu machen. Es wäre wesentlich sinnvoller gewesen, ihn weiterhin im <strong>syslinux</strong>-Paket zu belassen und lediglich die Unterstützung als Bootmanager für Ubuntu in einem separaten Paket unter zu bringen.</p><p>Sollte sich also der Befehl <code class="notranslate">extlinux</code> nicht aufrufen lassen, so ist die Lösung für das Problem, das Paket lediglich herunter zu laden und die benötigten Komponenten manuell zu extrahieren und an Ihrem Bestimmungsort zu bringen. Hierfür sollte ein temporäres Verzeichnis angelegt werden, in dem dann folgende Befehle ausgeführt werden:</p><div class="bash"><div class="contents"><pre class="notranslate">apt-get download extlinux
dpkg-deb -X extlinux_* . </pre></div></div><p>Hiermit wird der Inhalt des Installationspaketes in dem Verzeichnis ausgepackt, ohne ihn zu installieren. Man hat nun die Möglichkeit entweder die Dateien aus dem temporären Verzeichnis zu nutzen oder diejenigen die tatsächlich Bestandteil von <strong>syslinux</strong> sind, an ihrem Bestimmungsort zu kopieren wobei bedacht werden muss, dass diese im Zweifel nicht aktualisiert werden was man aber in Kauf nehmen kann, da es nicht um eine sicherheitsrelevante Komponente geht und sie nur ad-hoc genutzt wird:</p><div class="bash"><div class="contents"><pre class="notranslate">cp ./usr/bin/extlinux /usr/bin/extlinux
cp ./usr/share/man/man1/extlinux.1.gz /usr/share/man/man1/extlinux.1.gz </pre></div></div><p>Nach dem Anschließen des Kartenlesers samt CF Karte, wird diese bei Desktop-Systemen in der Regel automatisch eingehängt und auf dem Desktop dargestellt. Um fortzufahren, dürfen keine Partitionen der CF-Karte ins Filesystem eingebunden sein, diese ist also auszuwerfen. Bevor es nun weiter geht, ist es wichtig den Gerätenamen der CF-Karte zu kennen. Mit folgendem Befehl kann man sich einen Überblick über die vorhandenen angeschlossenen Laufwerke machen:</p><div class="bash"><div class="contents"><pre class="notranslate">grep . /sys/block/sd*/size | sed -e "s/\/sys\/block/\/dev/g" | sed -e "s/\/size//g" </pre></div></div><p>Der Befehl listet alle vorhandenen Gerätenamen der Laufwerke und deren Größe in Blöcken (512 byte) auf. Folgende Ausgabe zum Beispiel</p><pre class="notranslate">/dev/sda:31293360
/dev/sdb:15701759</pre><p>listet ein 16GB und ein 8GB Laufwerk auf. Damit dürfte es ohne Probleme möglich sein die CF-Karte zu identifizieren. Nachfolgend wird für die CF-Karte der Gerätename <code class="notranslate">/dev/sdX</code> benutzt. Weiter geht es nun mit dem <a class="crosslink" href="#Partitionieren_der_CF-Karte">Partitionieren der CF Karte</a></p></div><div class="section_2"><h3 id="Vorbereitung-der-PXE-Installation">Vorbereitung der PXE Installation<a class="headerlink" href="#Vorbereitung-der-PXE-Installation">¶</a></h3><p>
Da das ALIX-Board über <a class="internal" href="../../pxe-boot.html">PXE</a> gestartet wird, sind weiterhin die Installation eines DHCP-Servers (falls im Netzwerk nicht vorhanden) und eines TFTP-Servers notwendig. Näheres findet sich im Artikel <a class="internal" href="../../pxe-installation.html">PXE-Installation</a>. Das Benötigte <strong>alix-rescue</strong> kann <a class="external" href="http://www.yeasoft.com/downloads/alix/alix-rescue/" rel="nofollow">hier heruntergeladen werden</a>.</p><p>Da der Inhalt des Live-Rettungssystem Archivs in einem beliebigen Verzeichnis in der PXE Umgebung entpackt werden kann (welches per NFS erreichbar sein muss!), müssen, die Pfade und die IP Adresse des NFS Servers in der mitgelieferten Datei <code class="notranslate">pxelinux.cfg/default</code> entsprechend angepasst werden.</p><pre class="notranslate">SERIAL		0 38400 0
CONSOLE		0

# YOU HAVE TO ADAPT ALL PATHS AND
# IP ADDRESSES TO YOUR ENVIRONENT

DEFAULT	alix-rescue-1004/axrescue.vmlinuz
APPEND	initrd=alix-rescue-1004/axrescue.initrdn rootdelay=2 root=/dev/nfs nfsroot=169.254.19.65:/mnt/data/tftproot ip=dhcp loop=/yeaboot/alix-rescue-1004/axrescue.squashfs branch=/dev/ram console=ttyS0,38400n8</pre><p>Damit das ALIX-Board allerdings auch über das Netzwerk bootet, muss diese Fähigkeit im BIOS erst mal aktiviert werden.</p><p>Also das Nullmodem-Kabel anschließen und ein Terminal mit den passenden Parametern starten (38400 baud, 8 Datenbits, 1 Stopbit, keine Parität und XON/XOFF flow control). Dies kann z.B. so erfolgen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo cu -e -o -s 38400 -l /dev/ttyUSB0 </pre></div></div><p>wobei der Gerätename <code class="notranslate">/dev/ttyUSB0</code> gegebenenfalls durch den entsprechenden Gerätenamen der seriellen Schnittstelle zu ersetzen ist (bei eingebauten Schnittstellen kann dieser z.B. <code class="notranslate">/dev/ttyS0</code> sein). Nun kann man das Gerät unter Strom setzen, und wenn alles richtig angeschlossen ist, wird man auf dem Terminal sehen, wie der Speichertest ausgeführt wird. Um ins Setup zu gelangen, ist <strong>noch während des Speichertests</strong> ein Druck auf die Taste 
<span class="key">S</span>  erforderlich. Ist dies rechtzeitig gelungen, gelangt man ins Hauptmenü des tinybios:</p><pre class="notranslate">PC Engines ALIX.2 v0.99h
640 KB Base Memory
261120 KB Extended Memory

01F0 Master 848A TOSHIBA THNCF256MQG                     
Phys C/H/S 978/16/32 Log C/H/S 978/16/32

BIOS setup:

(9) 9600 baud (2) 19200 baud *3* 38400 baud (5) 57600 baud (1) 115200 baud
*C* CHS mode (L) LBA mode (W) HDD wait (V) HDD slave (U) UDMA enable
(M) MFGPT workaround
(P) late PCI init
*R* Serial console enable 
(E) PXE boot enable 
(X) Xmodem upload 
(Q) Quit</pre><p>Mit Druck auf die Taste 
<span class="key">E</span>  aktiviert man den PXE Boot, was beim erneuten Erscheinen des Hauptmenüs dadurch angezeigt wird, dass der Buchstabe <strong>E</strong> im Hauptmenü nun nicht mehr durch Klammern, sondern durch Sterne gerahmt ist. Sollte die CF-Karte dies unterstützen (was eine moderne Karte sicherlich tun wird), ist die Aktivierung von UDMA sinnvoll, da dadurch die Zugriffe auf der Karte effektiver durchgeführt werden. Durch Druck auf die Taste 
<span class="key">Q</span>  verlässt man das Hauptmenü. Vorher sollte noch das Netzwerkkabel angeschlossen werden, da der Bootvorgang unmittelbar beginnen wird. Die erste Netzwerkschnittstelle (von der der Bootvorgang stattfindet) ist bei Boards mit mehreren Schnittstellen übrigens jene, die direkt neben dem USB Anschluss liegt.</p><p>Wenn nun alles korrekt konfiguriert ist, wird das Alix-System das <strong>alix-rescue</strong> Live-System starten. Da dieses einen ssh Server zur Verfügung stellt, ist eine Anmeldung über SSH empfehlenswert, um die Installation fortzusetzen, da die Eingabemöglichkeiten im seriellen Terminal nicht so komfortabel sind. Die Standard-Anmeldedaten lauten:
</p><ul><li><p>Benutzer: <strong>root</strong></p></li><li><p>Passwort: <strong>password</strong></p></li></ul><p>
Die IP-Adresse kann durch Eingabe des Befehls</p><div class="bash"><div class="contents"><pre class="notranslate">ip addr show eth0 </pre></div></div><p>ermittelt werden. Zum weiteren Vorgehen wird nun noch das Paket <strong>syslinux</strong> benötigt, welches nicht Teil des Live-Systems ist. Dieses kann jedoch komfortabel durch Eingabe folgender Befehle nachinstalliert werden<sup><a href="#source-2">[2]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">apt-get update
apt-get install syslinux </pre></div></div><p>Die Eingabe von <code class="notranslate">apt-get update</code> ist fundamental, da das Live-System aus Platzgründen keinen Paketindex enthält. Bevor es nun weiter geht, ist es wichtig den Gerätenamen der CF-Karte zu kennen. Dies wird in der Regel <code class="notranslate">/dev/sda</code> sein, sollten aber am USB-Port noch andere Geräte angeschlossen sein, so muss das nicht unbedingt der Fall sein. Können aus welchem Grund auch immer, die USB Geräte nicht entfernt werden, so kann man sich mit folgendem Befehl einen Überblick über die vorhandenen angeschlossenen Laufwerke machen:</p><div class="bash"><div class="contents"><pre class="notranslate">grep . /sys/block/sd*/size | sed -e "s/\/sys\/block/\/dev/g" | sed -e "s/\/size//g" </pre></div></div><p>Der Befehl listet alle vorhandenen Gerätenamen der Laufwerke und deren Größe in Blöcken (512 byte) auf. Folgende Ausgabe zum Beispiel</p><pre class="notranslate">/dev/sda:31293360
/dev/sdb:15701759</pre><p>listet ein 16GB und ein 8GB Laufwerk auf. Damit dürfte es ohne Probleme möglich sein die CF-Karte zu identifizieren. Nachfolgend wird für die CF-Karte der Gerätename <code class="notranslate">/dev/sdX</code> benutzt. Weiter geht es nun mit dem <a class="crosslink" href="#Partitionieren_der_CF-Karte">Partitionieren der CF Karte</a></p></div><div class="section_2"><h3 id="Partitionieren-der-CF-Karte">Partitionieren der CF-Karte<a class="headerlink" href="#Partitionieren-der-CF-Karte">¶</a></h3><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Nahezu alle hier nachfolgend aufgeführten Befehle erfordern Root-Rechte<sup><a href="#source-3">[3]</a></sup>. Um im Falle der Ausführung auf einem Fremdsystem nicht jedem dieser Befehle <code class="notranslate">sudo</code> voranstellen zu müssen, empfiehlt es sich, die Installation in einer Root-Shell auszuführen. Diese kann durch Eingabe des Befehls <code class="notranslate">sudo su</code> erreicht werden.
</p></div></div><p>An diesem Punkt kann das Partitionierungsprogramm aufgerufen werden<sup><a href="#source-4">[4]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">fdisk /dev/sdX </pre></div></div><p>Im Partitionierungsprogramm werden dann eventuell vorhandene Partitionen gelöscht und eine neue primäre Partition vom Typ 83 (Linux), die mindestens 256MB groß ist, für die Boot Umgebung und eine weitere Partition vom Typ 83 (Linux), die mindestens 1,5 GB groß ist, für das Dateisystem der Haupt-Installation abgelegt. Die Trennung des Bootsystems vom Dateisystem für das laufende Betriebssystem ist dahingehend sinnvoll, weil diese Maßnahme einen Extra-Schutz darstellt. So muss die Boot-Partition z.B. im laufenden Betriebssystem gar nicht oder als nur lesbar eingehangen werden, so dass sie im laufenden Betrieb nicht kompromittiert werden kann. So kann ein dermaßen aufgebautes System sogar das Rettungssystem starten, wenn das Hauptdateisystem vollständig zerstört ist. Die erste Partition muss als bootbar gekennzeichnet werden (Befehl a) was in der Übersicht durch ein Sternchen dargestellt wird. Eine typische Partitionierung einer größeren CF-Karte würde z.B. folgendermaßen aussehen:</p><pre class="notranslate">Disk /dev/sdX: 16.0 GB, 16022200320 bytes
255 heads, 63 sectors/track, 1947 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000

   Device Boot      Start         End      Blocks   Id  System
/dev/sdX1   *           1          66      530113+  83  Linux
/dev/sdX2              67         459     3156772+  83  Linux
/dev/sdX3             460         852     3156772+  83  Linux
/dev/sdX4             853        1947     8795587+  83  Linux</pre><p>Die vier angelegten Partitionen erfüllen in dieser Konfiguration folgende Funktion:</p><ol class="arabic"><li><p>Boot-Parition mit Bootloader, Rettungssystem und Kernels</p></li><li><p>Hauptdateisystem des Betriebssystems</p></li><li><p>Hauptdateisystem für das alternative Betriebssystem </p></li><li><p>Dateisystem für Datenspeicher des Systems</p></li></ol><p>
Dieses Schema wird nun weiter in dieser Anleitung verwendet. Sollte der Leser aber die dritte und vierte Partition nicht benötigen, so sind diese einfach wegzulassen und in allen Befehlen in denen sie referenziert wird, zu überspringen.</p></div><div class="section_2"><h3 id="Anlegen-der-Dateisysteme">Anlegen der Dateisysteme<a class="headerlink" href="#Anlegen-der-Dateisysteme">¶</a></h3><p>
Nun kann die Partitionierung beendet werden, um mit der Erstellung des Dateisystems fortzufahren:</p><div class="bash"><div class="contents"><pre class="notranslate">mke2fs -L bootbank /dev/sdX1
mke2fs -L bank1 /dev/sdX2
mke2fs -L bank2 /dev/sdX3
mke2fs -L data /dev/sdX4 </pre></div></div><p>Wie man hier sehen kann, wurden den Volumen Namen gegeben (was das Einhängen nach Namen erlaubt), und als Dateisystem wurde <strong>ext2</strong> gewählt, was aufgrund der geringeren Anzahl Schreibzugriffe wegen der fehlenden Implementation des "Journaling", das Flash-RAM der CF-Karte schont. Da heutzutage moderne Flash-Controller über die Fähigkeit verfügen, die Schreibzugriffe gleichmäßig auf die Speicherzellen zu verteilen, wird die Wirksamkeit dieser Maßnahme zur Zeit kontrovers diskutiert. Die Benutzung des Dateisystems <strong>ext3</strong> oder gar eines anderen Dateisystems ist durchaus auch möglich.</p><p>Möchte man andere Namen für die Betriebssystem-Partitionen verwenden, so ist die Datei <code class="notranslate">syslinux/extlinux.conf</code> in der Bootpartition entsprechend anzupassen (siehe nächsten Abschnitt).</p></div><div class="section_2"><h3 id="Anlegen-der-Boot-Umgebung">Anlegen der Boot Umgebung<a class="headerlink" href="#Anlegen-der-Boot-Umgebung">¶</a></h3><p>
Damit von der CF-Karte gebootet werden kann, muss erst mal der Master-Boot-Sektor angelegt werden:</p><div class="bash"><div class="contents"><pre class="notranslate">cat /usr/lib/syslinux/mbr.bin &gt; /dev/sdX </pre></div></div><p>Nun kann die Boot Partition eingehängt werden, um das Boot System darauf zu kopieren:</p><div class="bash"><div class="contents"><pre class="notranslate">mkdir -p /mnt/cfcard
mount /dev/sdX1 /mnt/cfcard </pre></div></div><p>Nun wird der Boot loader in die Partition installiert:</p><div class="bash"><div class="contents"><pre class="notranslate">mkdir -p /mnt/cfcard/bank1
mkdir -p /mnt/cfcard/bank2
mkdir -p /mnt/cfcard/syslinux
extlinux --install /mnt/cfcard/syslinux </pre></div></div><p>Nun müssen im Verzeichnis <code class="notranslate">/mnt/cfcard/syslinux</code> folgende Konfigurationsdateien angelegt werden:</p><p><code class="notranslate">extlinux.conf</code>: Dies ist die Konfigurationsdatei des Bootmanagers</p><pre class="notranslate">SERIAL		0 38400 0
CONSOLE		0
DISPLAY		message.txt
ONERROR		rescue
PROMPT		1
TIMEOUT		50
TOTALTIMEOUT	100
INCLUDE		extlinux.default

LABEL	rescue
KERNEL	/axrescue.vmlinuz
APPEND	initrd=/axrescue.initrd root=LABEL=bootbank loop=/axrescue.squashfs branch=/dev/ram reboot=bios console=ttyS0,38400n8 ro

LABEL	bank1
KERNEL	/bank1/vmlinuz
APPEND	initrd=/bank1/initrd.img root=LABEL=bank1 reboot=bios console=ttyS0,38400n8

LABEL	bank1.old
KERNEL	/bank1/vmlinuz.old
APPEND	initrd=/bank1/initrd.img.old root=LABEL=bank1 reboot=bios console=ttyS0,38400n8

LABEL	bank2
KERNEL	/bank2/vmlinuz
APPEND	initrd=/bank2/initrd.img root=LABEL=bank2 reboot=bios console=ttyS0,38400n8

LABEL	bank2.old
KERNEL	/bank2/vmlinuz.old
APPEND	initrd=/bank2/initrd.img.old root=LABEL=bank2 reboot=bios console=ttyS0,38400n8</pre><p><code class="notranslate">extlinux.default</code>: Dies ist die Include-Datei in der Festgelegt wird, welches Betriebsystem gestartet wird</p><pre class="notranslate">DEFAULT bank1</pre><p><code class="notranslate">message.txt</code>: Diese Datei wird beim Start sofort angezeigt um den Operator über die Boot-Optionen zu informieren. Da ihr Inhalt reinen Informations-Character hat, kann man hier natürlich beliebige nützliche Text-Inhalte unterbringen.</p><pre class="notranslate">======================================================================
ALIX Ubuntu 10.04.04 LTS OS

Bundle Version: 0.5
(c) 2012 by YeaSoft Int'l


Boot options:

   bank1:      Starts the default system on bootbank 1 (default)
   bank2:      Starts the default system on bootbank 2
   bank1.old:  Starts the previous system on bootbank 1
   bank2.old:  Starts the previous system on bootbank 2
   rescue:     Starts a minimal non persistent system for rescue
               operations (fallback)

======================================================================</pre><p>Diese Dateien können auch von <a class="external" href="http://www.yeasoft.com/downloads/alix/alix-bootbank/alix-extlinux-conf.tar.gz" rel="nofollow">hier heruntergeladen</a> werden und folgendermaßen auf die Karte kopiert werden:</p><div class="bash"><div class="contents"><pre class="notranslate">wget http://www.yeasoft.com/downloads/alix/alix-bootbank/alix-extlinux-conf.tar.gz
tar xzf alix-extlinux-conf.tar.gz -C /mnt/cfcard/syslinux
rm alix-extlinux-conf.tar.gz </pre></div></div><p>Zu allerletzt müssen noch die Dateien <code class="notranslate">axrescue.vmlinuz</code>, <code class="notranslate">axrescue.initrd</code> und <code class="notranslate">axrescue.squashfs</code> des Live-Rettungssystems auf die Karte kopiert werden. Führt man diese Prozedur auf einem über PXE im LIve-Rettungssystem gestarteten Alix-Board selber aus, so ist unbedingt zu berücksichtigen dass alle Schreibzugriffe im Hauptdateisystem im Hauptspeicher stattfinden - welcher sehr begrenzt ist. Aus diesem Grunde sollte ein möglicher Download des Rettungspaketes gezielt auf die CF-Karte stattfinden, falls das Kopieren nicht direkt über SSH von einem externen System erfolgt. Dies würde man dann folgendermaßen durchführen:</p><div class="bash"><div class="contents"><pre class="notranslate">pushd /mnt/cfcard
wget http://www.yeasoft.com/downloads/alix/alix-rescue/alix-rescue-ubuntu-10.04.4-10.tar.gz
tar xzf alix-rescue-*.tar.gz axrescue.vmlinuz
tar xzf alix-rescue-*.tar.gz axrescue.initrd
tar xzf alix-rescue-*.tar.gz axrescue.squashfs
rm alix-rescue-*.tar.gz
popd </pre></div></div><p>Der Download Link im obigen Beispiel ist natürlich nur ein Beispiel und je nach gewünschtem System von der offiziellen <a class="external" href="http://www.yeasoft.com/downloads/alix/alix-rescue" rel="nofollow">Downloadseite</a> zu ermitteln.
Bevor es nun weiter geht, sollten eventuell noch ein paar Anpassungen an das Live-Rettungssystem getätigt werden. <strong>alix-rescue</strong> stellt standardmäßig folgende Ausgangskonfiguration zur Verfügung:</p><ul><li><p><strong>eth0</strong> ist konfiguriert seine IP Adresse dynamisch über DHCP zu erhalten</p></li><li><p><strong>eth1</strong> ist konfiguriert auf die feste IP Adresse 192.168.2.1 und stellt einen DHCP-Server zur Verfügung der auf dieser Schnittstelle passende Adressen verteilt.</p></li><li><p><strong>eth2</strong> ist konfiguriert seine IP Adresse dynamisch über DHCP zu erhalten</p></li></ul><p>
Ist dies nicht gewünscht, so kann es über die übergebenen Parameter in der Boot-Konfiguration geändert werden. Soll z.B. <strong>eth0</strong> eine festgelegte IP-Adresse erhalten, so kann das durch Hinzufügen von <code class="notranslate">dhcpdif-ip=&lt;ip adresse&gt;</code> in der Parameterliste in der Datei <code class="notranslate">extlinux.conf</code> erreicht werden. Eine vollständige Dokumentation aller Features und Konfigurationsmöglichkeiten kann in der Datei <code class="notranslate">readme.txt</code> des Download-Archivs bzw. unter der <a class="external" href="http://www.yeasoft.com/site/projects:alix-rescue:doc" rel="nofollow">Dokumentationsseite</a> <img alt="{en}" src="../../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> eingesehen werden.</p><p>Nun kann die CF-Karte ausgehängt werden...</p><div class="bash"><div class="contents"><pre class="notranslate">umount /mnt/cfcard
rmdir /mnt/cfcard </pre></div></div><p>...und, falls über einen Kartenleser beschrieben, nun entnommen und ins Alix-System eingesetzt werden. Sollte das System hingegen über PXE gebootet worden sein, so muss beim jetzt fälligen Neustart im Tiny-Bios das Booten per PXE ausgeschaltet werden (siehe Anleitung weiter oben), da das System sonst wieder vom Netz startet.</p></div></div><div class="section_1"><h2 id="Zwischenstand">Zwischenstand<a class="headerlink" href="#Zwischenstand">¶</a></h2><p>
Die CF-Karte die nun produziert worden ist, stellt einen nützlichen Startpunkt für jegliches serielles Alix-System dar. In dieser Hinsicht, kann es nützlich sein, diese zu sichern bzw. zu vervielfältigen.</p><div class="section_2"><h3 id="Abkuerzung">Abkürzung<a class="headerlink" href="#Abkuerzung">¶</a></h3><p>
Wer sich den Aufwand für die Herstellung sparen will, kann fertige Abbilder <a class="external" href="http://www.yeasoft.com/downloads/alix/alix-bootbank/" rel="nofollow">hier herunterladen</a>.</p><p>Diese können dann auf einem Computer mit CF-Kartenleser auf eine CF-Karte mit mindestens 2 GiB Größe folgendermaßen aufgespielt werden:</p><div class="bash"><div class="contents"><pre class="notranslate">wget http://www.yeasoft.com/downloads/alix/alix-bootbank/alix-bootbank-ubuntu-10.04.4-10.img.bz2
bunzip2 alix-bootbank-ubuntu-10.04.4-10.img.bz2
dd if=alix-bootbank-ubuntu-10.04.4-10.img of=/dev/sdX
partprobe -s </pre></div></div><p>Der Download Link im obigen Beispiel ist natürlich nur ein Beispiel und je nach gewünschtem System von der offiziellen <a class="external" href="http://www.yeasoft.com/downloads/alix/alix-bootbank/" rel="nofollow">Downloadseite</a> zu ermitteln. Der Gerätename <code class="notranslate">/dev/sdX</code> ist mit dem Gerätenamen der CF-Karte zu ersetzen. Die fertigen Abbilder enthalten nur die Partition für das Bootsystem samt Live-Rettungssystem. Aus diesem Grunde muss mindestens noch eine Partition hinzugefügt werden, um dort das primäre Betriebsystem zu installieren. Optional kann noch eine weitere Partition für ein alternatives Betriebssystem und eine Partition für Daten angelegt werden. Danach müssen auf den entsprechenden Partitionen die Dateisysteme angelegt werden:</p><div class="bash"><div class="contents"><pre class="notranslate">mke2fs -L bank1 /dev/sdX2
mke2fs -L bank2 /dev/sdX3
mke2fs -L data /dev/sdX4 </pre></div></div><p>Wie man hier sehen kann, wurden den Volumen Namen gegeben (was das Einhängen nach Namen erlaubt), und als Dateisystem wurde <strong>ext2</strong> gewählt, was aufgrund der geringeren Anzahl Schreibzugriffe wegen der fehlenden Implementation des "Journaling", das Flash-RAM der CF-Karte schont. Da heutzutage moderne Flash-Controller über die Fähigkeit verfügen, die Schreibzugriffe gleichmäßig auf die Speicherzellen zu verteilen, wird die Wirksamkeit dieser Maßnahme zur Zeit kontrovers diskutiert. Die Benutzung des Dateisystems <strong>ext3</strong> oder gar eines anderen Dateisystems ist durchaus auch möglich.</p><p>Möchte man andere Namen für die Betriebsystem-Partitionen verwenden, so ist die Datei <code class="notranslate">syslinux/extlinux.conf</code> in der Bootpartition entsprechend anzupassen.</p></div></div><div class="section_1"><h2 id="Aufspielen-des-Basis-Betriebssystems">Aufspielen des Basis Betriebssystems<a class="headerlink" href="#Aufspielen-des-Basis-Betriebssystems">¶</a></h2><p>
Da sich auf der CF-Karte nur das Live-Rettungssystem befindet, wird dieses, unabhängig vom Inhalt der Datei <code class="notranslate">syslinux/extlinux.default</code>, starten.</p><p>Die Standard-Anmeldedaten lauten:
</p><ul><li><p>Benutzer: <strong>root</strong></p></li><li><p>Passwort: <strong>password</strong></p></li></ul><p>
Da dieses schwache Passwort eine Sicherheitslücke darstellt, ist es möglich, das Passwort des Live-Rettungssystems zu ändern. Dafür genügt lediglich der Parameter <code class="notranslate">password=&lt;neues Passwort&gt;</code> bzw. <code class="notranslate">password=SHADOW:&lt;password hash&gt;</code> dem Rettungssystem in der Datei <code class="notranslate">syslinux/extlinux.conf</code> in der Boot-Partition mit auf dem Weg zu geben.</p><p>Nach dem Anmelden, entweder auf der seriellen Konsole oder über SSH, kann nun mit der Installation begonnen werden. Die Nachfolgende Anleitung geht davon aus, dass auf der ersten Betriebssystem-Partition (<code class="notranslate">/dev/sdX2</code>) welche mit dem Namen <strong>bank1</strong> gekennzeichnet wurde, installiert wird. Die Installation wird mittels eines Automatisierungstools namens UIC (<em>Ubuntu Installation Creator</em>) erfolgen, welches praktischerweise im Live-Rettungssystem bereits enthalten ist.</p><p>Dieses Installations-Automatisierungstool basiert auf <strong>debootstrap</strong> und ist in der Lage, basierend auf ihm vorgegebenen Templates (Schablonen) eine Installation genau so durchzuführen, als würde man es manuell machen. Zum Einsatz wird ein Template kommen, welches in seiner Vorgehensweise nahezu exakt jener entspricht, die im Artikel <a class="internal" href="../../alix/cf-bootmedium_erstellen.html">ALIX CF-Bootmedium erstellen</a> beschrieben wird. Für Alix-Boards stehen drei Basis-Betriebsystem-Templates zur Verfügung, welche jeweils auf Ubuntu 10.04, Ubuntu 08.04 und Debian 6 basieren. In dieser Anleitung wird das Ubuntu 10.04 Template verwendet werden.</p><p>Als erstes wird das Template in seiner aktuellsten Version heruntergeladen und im aktuellen Verzeichnis ausgepackt:</p><div class="bash"><div class="contents"><pre class="notranslate">uic prepare -v alix-base-1004 </pre></div></div><p>Bevor es nun weiter geht, lohnt ein kurzer Blick in die Template-Konfigurationsdatei <code class="notranslate">uictpl.conf</code> da diese verrät, welche Pakete in das System installiert werden:</p><pre class="notranslate">UIC_SRCNAME="alix-base-1004"
UIC_SRCVERSION="10.04.4-01"
UIC_SRCDESC="This installation template creates a minimal Ubuntu 10.04 installation suited for Alix 2Dxx and 6Dxx boards"
UIC_ARCH=i386
UIC_RELEASE=lucid
UIC_REPOSITORY=http://de.archive.ubuntu.com/ubuntu
UIC_KERNEL=linux-image-386
UIC_SOFTWARE="ssh"
UIC_RECONFIGURE="console-setup"
UIC_ROOTPASSWORD="password"</pre><p>Wie man an der Liste in der Variablen <strong>UIC_SOFTWARE</strong> erkennen kann, wird lediglich das Paket <strong>ssh</strong> zusätzlich zum absoluten Minimalsystem installiert. Soll das System von der Grundausstattung eher einem klassischen Minimal-Server entsprechen, so ist statt <strong>alix-base-1004</strong>, das 
Template <strong>alix-server-1004</strong> zu verwenden.</p><p>Als nächstes wird die Partition, in der das Betriebssystem installiert werden soll, an das lokale Template gebunden:</p><div class="bash"><div class="contents"><pre class="notranslate">uic attach -v /dev/sdX2 alix-base-1004 </pre></div></div><p>Nach dem erfolgreichen Verbinden kann die Installation nun mit folgendem Befehl erfolgen:</p><div class="bash"><div class="contents"><pre class="notranslate">uic create -v alix-base-1004 </pre></div></div><p>Die Installation sollte nun automatisch ausgeführt werden, was je nach maximaler Schreibgeschwindigkeit der CF-Karte zwischen 5 und 20 Minuten dauern wird. Unter Umständen kann es passieren, dass das System nachfragen wird, ob die eine oder andere angepasste Datei überschrieben werden soll. Diese Nachfragen können durch betätigen der Eingabetaste beantwortet werden.</p><p>Ist die Installation vollständig durchgelaufen, kann die Partition vom Template getrennt werden, und das System neu gestartet werden:</p><div class="bash"><div class="contents"><pre class="notranslate">uic detach -v alix-base-1004
reboot </pre></div></div><p>Ist es wichtig, vorher noch einige Anpassungen an das System zu tätigen, so kann <span class="underline">vor dem Trennen</span> das Dateisystem der Installation unter <code class="notranslate">alix-base-1004/chroot</code> erreicht werden. Durch Eingabe des Befehls:</p><div class="bash"><div class="contents"><pre class="notranslate">uic enter -v alix-base-1004 </pre></div></div><p>wird eine <strong>chroot-shell</strong> mit geladenen Spezialdateisystemen (<code class="notranslate">/sys</code>, <code class="notranslate">/dev</code> und <code class="notranslate">/proc</code>) im vorbereiteten System gestartet, welche man durch Eingabe von 
<span class="key">Strg</span>  + 
<span class="key">D</span>  bzw. den Befehl <code class="notranslate">exit</code> wieder verlassen kann.</p></div><div class="section_1"><h2 id="Start-des-Basis-Betriebssystems">Start des Basis Betriebssystems<a class="headerlink" href="#Start-des-Basis-Betriebssystems">¶</a></h2><p>
Da das System in <strong>bank1</strong> installiert wurde und dieses in der Datei <code class="notranslate">syslinux/extlinux.default</code> in der Boot-Partition als Standard angegeben wurde, wird das Board nun mit dem neuen Betriebssystem starten. Bevor der Benutzer das System nun endgültig seiner Bestimmung gemäß anpassen kann, hier noch ein schneller Befehl, um dem System einen neuen Rechnernamen, Domäne und frische SSH Keys zu verpassen:</p><div class="bash"><div class="contents"><pre class="notranslate">machine_sysprep -vs -n &lt;neuer name&gt; -d &lt;neue domäne&gt; -R </pre></div></div></div><div class="section_1"><h2 id="Weiterfuehrende-Informationen">Weiterführende Informationen<a class="headerlink" href="#Weiterfuehrende-Informationen">¶</a></h2><p>
UIC ist, entgegen seinem Namen, nicht nur für Ubuntu 8.04 und 10.04, sondern auch für Debian 6.0 (Squeeze) zu gebrauchen. Weiterführende Informationen zu UIC sind auf der <a class="external" href="http://www.yeasoft.com/site/projects:uic" rel="nofollow">Projektseite</a> <img alt="{en}" src="../../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> zu finden. Da es sich um ein recht neues Projekt handelt, ist mit sehr häufigen Aktualisierungen zu rechnen.</p><p>Das System erlaubt nicht nur Templates von der Website zu gebrauchen, sondern diese auch für die eigenen Bedürfnisse anzupassen. Diese können dann sowohl als Datei weiterverbreitet bzw. genutzt werden, als auch in eigenen Repositories zur Verfügung gestellt werden.</p><div class="section_2"><h3 id="Aktuelle-UIC-Templates-fuer-Alix-Boards">Aktuelle UIC Templates für Alix Boards<a class="headerlink" href="#Aktuelle-UIC-Templates-fuer-Alix-Boards">¶</a></h3><p>
Zur Zeit werden folgende UIC-Templates für Alix-Boards zur Verfügung gestellt:</p><p>
</p><table><tr class="titel"><td colspan="5"> Alix UIC-Templates (Stand: 21.05.2012) </td></tr><tr class="kopf"><td> Name </td><td> Basis-Betriebssystem </td><td> Beschreibung </td><td> Größe </td><td> Speicherverbauch </td></tr><tr><td> alix-base-1004 </td><td> Ubuntu 10.04 (lucid) </td><td> Minimalsystem für Alix Boards mit serieller Schnittstelle </td><td> 402 MB </td><td> 47 MB / 35 MB </td></tr><tr><td> alix-server-1004 </td><td> Ubuntu 10.04 (lucid) </td><td> Basis-Serversystem für Alix Boards mit serieller Schnittstelle </td><td> 446 MB </td><td> 47 MB / 35 MB </td></tr><tr><td> alix-base-deb6 </td><td> Debian 6.0 (Squeeze) </td><td> Minimalsystem für Alix Boards mit serieller Schnittstelle </td><td> 336 MB </td><td> 28 MB / 29 MB </td></tr><tr><td> alix-server-deb6 </td><td> Debian 6.0 (Squeeze) </td><td> Basis-Serversystem für Alix Boards mit serieller Schnittstelle </td><td> - </td><td> - </td></tr></table><p>Die Größe des Systems auf der Hauptpartition wurde nach Ausführen von <code class="notranslate">apt-get clean</code> (Löschen des Paketcaches) ermittelt. Der Speicherverbrauch wurde mit</p><div class="bash"><div class="contents"><pre class="notranslate">echo $(($(grep MemTotal /proc/meminfo | awk '{print $2}') - $(grep MemFree /proc/meminfo | awk '{print $2}') )) </pre></div></div><p>ermittelt. Die Varianz ergibt sich aus dem Speicherverbrauch direkt nach dem Anmelden und dem Speicherverbrauch mach 10 Minuten.</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="../../alix.html">Alix</a> <img alt="{Übersicht}" src="../../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/ALIX">ALIX</a> - Wikipedia</p></li><li><p><a class="external" href="http://www.yeasoft.com/site/projects:alix" rel="nofollow">The Alix Software Project</a> <img alt="{en}" src="../../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Information about installation techniques, cookbooks and installation templates</p></li><li><p><a class="external" href="http://www.yeasoft.com/site/projects:alix:alix-rescue" rel="nofollow">Alix Rescue and PE System</a> <img alt="{en}" src="../../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Ubuntu based live rescue and preinstallation system for PXE or bundled deployment</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../../archiv/alix/optimierte_bottom-up_installation/a/revision/834883.html">Diese Revision</a> wurde am 6. September 2015 11:43 von <a href="https://ubuntuusers.de/user/aasche/">aasche</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../../startseite.html">Wiki</a></li>
<li><a href="../../archiv.html">Archiv</a></li>
<li><a href="../../archiv/alix.html">Alix</a></li>
<li><a href="../../archiv/alix/optimierte_bottom-up_installation.html">Optimierte Bottom-Up Installation</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>