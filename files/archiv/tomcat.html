<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Archiv/Tomcat › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../archiv/tomcat.html">Tomcat</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Archiv/Tomcat">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../archiv/tomcat/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../archiv/tomcat/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../archiv/tomcat/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../archiv/tomcat/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../archiv/tomcat/a/backlinks.html">Tomcat</a></h1>
<div id="page"><div class="box improvable"><h3 class="box improvable">Archivierte Anleitung</h3><div class="contents"><p>
Dieser Artikel wurde archiviert, da er - oder Teile daraus -
nur noch unter einer älteren Ubuntu-Version nutzbar ist. Diese
Anleitung wird vom Wiki-Team weder auf Richtigkeit überprüft
noch anderweitig gepflegt. Zusätzlich wurde der Artikel für
weitere Änderungen gesperrt.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../paketquellen_freischalten.html">Bearbeiten von Paketquellen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../editor.html">Einen Editor öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../umgebungsvariable.html">Umgebungsvariablen setzen</a> </p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="../dienste.html">Dienste verwalten</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Voraussetzungen">Voraussetzungen
</a></li><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Aufruf">Aufruf
</a></li><li><a class="crosslink" href="#Tomcat-ueber-Port-80-erreichen">Tomcat über Port 80 erreichen
</a></li><li><a class="crosslink" href="#Benutzer-und-Rollen-definieren">Benutzer und Rollen definieren
</a></li><li><a class="crosslink" href="#Virtuelle-Hosts">Virtuelle Hosts
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="./tomcat_logo.png" class="image-left" src="../_/64e33bd276cf3668c5c78ee85aa20e90324f3225.png"/>
<em>Apache Tomcat stellt eine Umgebung zur Ausführung von Java-Code auf Webservern bereit, die im Rahmen des Jakarta-Projekts der Apache Software Foundation entwickelt wird. Es handelt sich um einen in Java geschriebenen Servlet-Container, der mithilfe des JSP-Compilers Jasper auch JavaServer Pages in Servlets übersetzen und ausführen kann. Dazu kommt ein kompletter HTTP-Server. 
<br/><br/>Der HTTP-Server von Tomcat wird vor allem zur Entwicklung eingesetzt, während in Produktion zumeist ein Apache Web-Server vor Tomcat geschaltet wird. Dazu wird in Apache ein Plugin eingebunden, das Requests für dynamische Inhalte an Tomcat weiterleitet. Das Plugin spricht Tomcat dann normalerweise über das Apache JServ Protocol an.</em> (Quelle: <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Apache_Tomcat">Wikipedia</a>).</p><p>Dieser Artikel beschreibt die Installation und Einrichtung von Apache Tomcat 6 bzw, Tomcat 7. Hinweise zur Verwendung können dem Abschnitt <a class="crosslink" href="#Links">Links</a> entnommen werden.</p><div class="section_1"><h2 id="Voraussetzungen">Voraussetzungen<a class="headerlink" href="#Voraussetzungen">¶</a></h2><p>
Bevor mit der Installation der Tomcat-Pakete begonnen werden kann, muss das <a class="internal" href="../java/installation.html#Sun-Java">Sun JDK</a> installiert werden. Zusätzlich muss man entweder die folgenden <a class="internal" href="../umgebungsvariable.html">Umgebungsvariablen</a> <sup><a href="#source-4">[4]</a></sup> setzen:</p><ul><li><p>export JAVA_HOME={Pfad zum gerade installierten JDK-Verzeichnis} </p></li><li><p>export PATH=$PATH:$JAVA_HOME/bin </p></li></ul><p>oder <span class="underline">alternativ</span> den Pfad zum JDK in der Tomcat-Konfiguration angeben (<strong>/etc/default/tomcat6</strong> bzw. <strong>/etc/default/tomcat7</strong> wird dafür editiert). Die Zeile mit <code class="notranslate">JAVA_HOME=/usr/lib/jvm/java-6-sun</code> muss entsprechend angepasst werden, je nachdem, wo das JDK zu finden ist.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Tomcat ist ein eigenständiger Webserver. Der Apache Webserver braucht also nicht vorher installiert werden. Allerdings können beide über einen Connector miteinander verbunden werden. Wie das geht, ist in unten stehendem Link erklärt. 
</p></div></div></div><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Für Tomcat 6 sind folgende Pakete zu installieren <sup><a href="#source-1">[1]</a></sup>:</p><ul><li><p><strong>tomcat6</strong> (<em>universe</em>)</p></li><li><p><strong>tomcat6-admin</strong> (<em>universe</em> )</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install tomcat6 tomcat6-admin </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install tomcat6 tomcat6-admin </pre></div></div><p>
</p></div></div><p>Für Tomcat 7 sind diese Pakete zu installieren <sup><a href="#source-1">[1]</a></sup>:</p><ul><li><p><strong>tomcat7</strong> (<em>universe</em>)</p></li><li><p><strong>tomcat7-admin</strong> (<em>universe</em> )</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install tomcat7 tomcat7-admin </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install tomcat7 tomcat7-admin </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="Aufruf">Aufruf<a class="headerlink" href="#Aufruf">¶</a></h2><p>
Der Tomcat wird in einem Browser über<code class="notranslate"> http://localhost:8080</code> aufgerufen.</p></div><div class="section_1"><h2 id="Tomcat-ueber-Port-80-erreichen">Tomcat über Port 80 erreichen<a class="headerlink" href="#Tomcat-ueber-Port-80-erreichen">¶</a></h2><p>
Der Standardport für Webserver ist Port <code class="notranslate">80</code>. Wird eine Anfrage zu einem Webserver gemacht, verbindet sich der Browser automatisch über diesen Port mit dem Webserver - wenn kein anderer Port spezifiziert wurde. Tomcat läuft aber nach der Standardeinstellung auf den Ports <code class="notranslate">8180</code> bzw. <code class="notranslate">8080</code>. Damit man diese Port-Angaben nicht extra angeben muss, kann Tomcat über Port <code class="notranslate">80</code> erreichbar gemacht werden.</p><p>Um Tomcat auf Port <code class="notranslate">80</code> zu erreichen, gibt es mehrere Möglichkeiten:</p><ul><li><p>Seit Ubuntu 10.04 kann der Port via Authbind gebunden werden, indem in <strong>/etc/default/tomcat6</strong> die Option <code class="notranslate">AUTHBIND=yes</code> gesetzt wird.</p></li><li><p><a class="crosslink" href="#Tomcat-als-root">Tomcat als root</a> - Tomcat mit root-Rechten laufen lassen</p></li><li><p><a class="crosslink" href="#Paketweiterleitung-mittels-iptables">Paketweiterleitung mittels iptables</a> - Mittels <a class="internal" href="../iptables.html">iptables</a> den Port 80 auf Port 8080 weiterleiten</p></li><li><p>Tomcat über das Modul <code class="notranslate">mod_jk</code> in den Apache-Webserver integrieren. Weitere Informationen dazu findet man auf <a class="external" href="http://tomcat.apache.org/tomcat-3.3-doc/mod_jk-howto.html" rel="nofollow">tomcat.apache.org</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Bevor man Tomcat auf Port <code class="notranslate">80</code> laufen lässt, sollte man sicherstellen, dass keine andere Anwendung den Port <code class="notranslate">80</code> nutzt. Es darf immer nur eine Anwendung einen Port nutzen. Dazu kann das Netzwerkdiagnose-Programm (gnome-nettool) genutzt werden. 
</p></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Seit Ubuntu 10.04 kann der Port via Authbind gebunden werden, indem in <strong>/etc/default/tomcat6</strong> die Option <code class="notranslate">AUTHBIND=yes</code> gesetzt wird.
</p></div></div><p>
</p><div class="section_2"><h3 id="Tomcat-als-root">Tomcat als root<a class="headerlink" href="#Tomcat-als-root">¶</a></h3><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Tomcat als root laufen zu lassen, ist nicht empfehlenswert! Jedes Servlet und jede JSP laufen unter root-Rechten und es können mittels der Servlets oder JSPs Systemdateien verändert oder gelöscht werden. Diese Methode sollte man nur verwenden, wenn man den gehosteten Webseiten vertrauen kann, z.B. man stellt nur eigene Webseiten auf den Server.
</p></div></div><p>Dazu muss die Datei <strong>server.xml</strong> editiert werden <sup><a href="#source-3">[3]</a></sup>. Diese Datei liegt im Konfigurationsverzeichnis des Tomcats (<strong>/etc/tomcat6</strong> oder <strong>/etc/tomcat7</strong>). In der Datei wird der folgende Xml-Tag bearbeitet:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nt">&lt;Connector</span> <span class="na">port=</span><span class="s">"8080"</span> <span class="na">protocol=</span><span class="s">"HTTP/1.1"</span> <span class="na">connectionTimeout=</span><span class="s">"20000"</span> <span class="na">URIEncoding=</span><span class="s">"UTF-8"</span> <span class="na">redirectPort=</span><span class="s">"8443"</span> <span class="nt">/&gt;</span>
</pre></div>
</td></tr></table></div><p>Hier ändert man den <code class="notranslate">Connector port=</code> von <code class="notranslate">8080</code> auf <code class="notranslate">80</code>.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Für das Attribut <code class="notranslate">port</code> können auch andere Werte eingetragen werden, wenn man z.B. den Tomcat auf dem Port 12345 laufen lassen möchte. Man muss dabei beachten, dass Ports unterhalb von 1024 nur vom User root geöffnet werden dürfen.
</p></div></div><p>Wenn jetzt Tomcat neu gestartet würde, wäre der Webserver nicht erreichbar, weil nur der Benutzer <code class="notranslate">root</code> Ports zwischen 0 und 1024 öffnen darf. Damit Tomcat den Port 80 öffnen darf, trägt man in das Start-Skript <strong>/etc/init.d/tomcat6</strong> oder <strong>/etc/init.d/tomcat7</strong> den Benutzer <code class="notranslate">root</code> ein. Dieser wird in einer Variablen gesetzt, die entweder  "TOMCAT6_USER" oder "TOMCAT7_USER" heißt. Für den Tomcat 6 sieht der Eintrag nach dem Editieren wie folgt aus:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nv">TOMCAT6_USER</span><span class="o">=</span>root
</pre></div>
</td></tr></table></div><p>Danach muss man Tomcat neustarten <sup><a href="#source-5">[5]</a></sup>.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/tomcat6 restart </pre></div></div><p>oder</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/tomcat7 restart </pre></div></div></div><div class="section_2"><h3 id="Paketweiterleitung-mittels-iptables">Paketweiterleitung mittels iptables<a class="headerlink" href="#Paketweiterleitung-mittels-iptables">¶</a></h3><p>
<a class="internal" href="../iptables.html">iptables</a> ist der Paketfilter des Linux-Kernels. Mit diesem Paketfilter kann bestimmt werden, was mit ankommenden oder ausgehenden Paketen passieren soll. In diesem Fall wollen wir, dass auf Port <code class="notranslate">80</code> ankommende Pakete an Port <code class="notranslate">8080</code> weitergeleitet werden und dass von Port <code class="notranslate">8080</code> die ausgehenden Pakete auf Port <code class="notranslate">80</code> ausgehen. Dazu nutzt man <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Network_Address_Translation">Network_Address_Translation</a> (NAT). Diese Methode hat den Vorteil, dass Tomcat nicht mit root-Rechten ausgeführt wird, was das System sicherer macht.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Sollte der Tomcat nicht auf Port <code class="notranslate">8080</code> laufen, dann müssen die Angaben in den Befehlen entsprechend geändert werden.
</p></div></div><p>Der folgende Befehl stellt NAT ein:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo iptables -t nat -A PREROUTING -i eth0 -p tcp --dport http -j REDIRECT --to-ports 8080 </pre></div></div><p>Sollte der Rechner mehrere Netzwerkkarten haben, auf denen die Webseite abgerufen werden soll und kann, dann muss der Befehl für alle Schnittstellen aufgerufen werden. Dazu muss man den Wert der Option <code class="notranslate">-i &lt;Schnittstelle&gt;</code> anpassen. Im Beispiel steht dieser Wert für die Standardschnittstelle auf <strong>eth0</strong>.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Möchte man einen anderen Port als <code class="notranslate">80</code> verwenden, dann muss der Wert der Option <code class="notranslate">--dport &lt;Port&gt;</code> geändert werden, z.B. <code class="notranslate">--dport 12345</code>. Man könnte den Tomcat auch auf mehreren Ports erreichbar machen, indem mehrmals der Befehl mit verschieden Ports aufgerufen wird.
</p></div></div><p>Die Einstellungen, die mit iptables vorgenommen wurden, sind nicht permanent eingestellt. Bei einem Neustart des Systems müssen diese wieder neu eingestellt werden. Damit man nicht bei jedem Neustart den Befehl erneut aufrufen muss, werden die Einstellungen über den folgenden Befehl in der Datei <strong>/etc/iptables.rules</strong> gespeichert:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo iptables-save &gt; /etc/iptables.rules </pre></div></div><p>Anschließend wird dafür gesorgt, dass die Einstellungen nach jedem Neustart wieder geladen werden. Dazu legt man ein Skript im Verzeichnis <strong>/etc/network/if-pre-up.d</strong> an.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo touch /etc/network/if-pre-up.d/iptables.load
sudo chmod 755 /etc/network/if-pre-up.d/iptables.load </pre></div></div><p>Das Skript wird mit folgendem Inhalt gefüllt:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/sh</span>
iptables-restore &lt; /etc/iptables.rules
<span class="nb">exit</span> <span class="m">0</span>
</pre></div>
</td></tr></table></div><p>Beim Neustart wird das Skript ausgeführt und die Einstellungen von iptables werden wieder geladen. Tomcat ist damit wieder unter Port <code class="notranslate">80</code> erreichbar.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Wenn die Einstellungen beim Neustart nicht geladen werden, dann kann man den Aufruf des Skripts in der Datei <strong>/etc/rc.local</strong> eintragen:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/sh -e</span>
<span class="c1">#</span>
<span class="c1"># rc.local</span>
<span class="c1">#</span>
<span class="c1"># This script is executed at the end of each multiuser runlevel.</span>
<span class="c1"># Make sure that the script will "exit 0" on success or any other</span>
<span class="c1"># value on error.</span>
<span class="c1">#</span>
<span class="c1"># In order to enable or disable this script just change the execution</span>
<span class="c1"># bits.</span>
<span class="c1">#</span>
<span class="c1"># By default this script does nothing.</span>

<span class="c1"># Weiterleitung auf Port 80 aktivieren</span>
/etc/network/if-pre-up.d/iptables.load

<span class="nb">exit</span> <span class="m">0</span>
</pre></div>
</td></tr></table></div><p>
</p></div></div></div></div><div class="section_1"><h2 id="Benutzer-und-Rollen-definieren">Benutzer und Rollen definieren<a class="headerlink" href="#Benutzer-und-Rollen-definieren">¶</a></h2><p>
Um Tomcat über die Oberfläche administrieren zu können, müssen noch Benutzer und Rollen angelegt werden. Dazu muss die Datei <strong>/etc/tomcat6/tomcat-users.xml</strong> bzw. <strong>/var/lib/tomcat7/conf/tomcat-users.xml</strong> editiert <sup><a href="#source-3">[3]</a></sup> werden.</p><p>Im folgenden Beispiel wurden die Rollen "Admin" und "Manager" angelegt und dem Benutzer "TestMan1" zugeordnet. Dem Benutzer "TestMan2" wurde lediglich die Rolle "Manager" zugeordnet.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nt">&lt;tomcat-users&gt;</span>
  <span class="nt">&lt;role</span> <span class="na">rolename=</span><span class="s">"manager"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;role</span> <span class="na">rolename=</span><span class="s">"admin"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;user</span> <span class="na">username=</span><span class="s">"TestMan1"</span> <span class="na">password=</span><span class="s">"StrengGeheim"</span> <span class="na">roles=</span><span class="s">"admin,manager"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;user</span> <span class="na">username=</span><span class="s">"TestMan2"</span> <span class="na">password=</span><span class="s">"StrengGeheim"</span> <span class="na">roles=</span><span class="s">"manager"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/tomcat-users&gt;</span>
</pre></div>
</td></tr></table></div><p>Ab Tomcat 7 muss die Rolle, die auf die graphische Administrationsoberfläche zugreifen kann, allerdings "manager-gui" heißen. Seit Version 7 ist nämlich die "Manager" Rolle in 4 Bereiche unterteilt: "manager-gui", "manager-script", "manager-jmx" und "manager-status". Welche Rechte diese Rollen im Einzelnen besitzen steht in der Tomcat 7 <a class="external" href="http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Configuring_Manager_Application_Access" rel="nofollow">Dokumentation</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Achtung: nicht vergessen die Kommentarklammern zu <strong>entfernen</strong>
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>    <span class="c">&lt;!-- this is a comment</span>
<span class="c">         over several lines</span>
<span class="c">    --&gt;</span> 
</pre></div>
</td></tr></table></div><p>
</p></div></div><p>Damit die Änderungen wirksam werden, muss der Tomcat-Server neu gestartet werden <sup><a href="#source-5">[5]</a></sup>.</p></div><div class="section_1"><h2 id="Virtuelle-Hosts">Virtuelle Hosts<a class="headerlink" href="#Virtuelle-Hosts">¶</a></h2><p>
Mittels virtuelles Hosts können auf einem Webserver mehrere Webseiten auf einmal gehostet werden. Dies bietet den Vorteil, dass IP-Adressen gespart werden und dass nicht ganz ausgelastete Server mehr ausgelastet werden können. Mehr zu dem Thema virtuelle Hosts findet man <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Virtual_Hosting">hier</a>.</p><p>Um virtuelle Hosts zu definieren, muss die Xml-Datei <strong>server.xml</strong> im Konfigurationsverzeichnis des Tomcats editiert werden. Innerhalb des Xml-Tags <em>Engine</em> muss ein neuer Tag namens <em>Host</em> erstellt werden.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nt">&lt;Host</span> <span class="na">name=</span><span class="s">"virtuellerHost.de"</span> <span class="na">appBase=</span><span class="s">"/opt/tomcat/webapps/virtuellerHost"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;Context</span> <span class="na">path=</span><span class="s">""</span> <span class="na">docBase=</span><span class="s">"."</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/Host&gt;</span>
</pre></div>
</td></tr></table></div><p>Nach dem Editieren der XML-Datei <strong>server.xml</strong>, muss der Tomcat neu gestartet werden <sup><a href="#source-5">[5]</a></sup>.</p><p>Wird die Webseite <code class="notranslate">http://virtuellerHost.de</code> im Browser aufgerufen, dann sendet der Tomcat die Webseite, die sich im Verzeichnis <strong>/opt/tomcat/webapps/virtuellerHost</strong> befindet, an den aufrufenden Browser. Der Webserver schaut ebenfalls nach, ob sich eine neuere War-Datei in <strong>/opt/tomcat/webapps</strong> mit dem Namen <strong>virtuellerHost.war</strong> befindet. Sollte dem so sein, dann aktualisiert der Webserver die Webseite mittels der War-Datei.</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://tomcat.apache.org/" rel="nofollow">Projektseite</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p><a class="external" href="http://www.jsptutorial.org/content/tomcat" rel="nofollow">Tomcat als lokaler Testserver</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - deutschsprachige Anleitung, ??/2007</p></li><li><p><a class="external" href="http://guac-dev.org/" rel="nofollow">Guacamole</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - "clientless remote desktop gateway" auf Basis von Tomcat; ermöglicht den Fernzugriff via Browser</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../archiv/tomcat/a/revision/863013.html">Diese Revision</a> wurde am 7. Januar 2016 12:39 von <a href="https://ubuntuusers.de/user/noisefloor/">noisefloor</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../archiv.html">Archiv</a></li>
<li><a href="../archiv/tomcat.html">Tomcat</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>