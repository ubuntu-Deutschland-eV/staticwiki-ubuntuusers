<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Grundlagen_der_Paketerstellung › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./grundlagen_der_paketerstellung.html">Grundlagen der Paketerstellung</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Grundlagen_der_Paketerstellung">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./grundlagen_der_paketerstellung/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./grundlagen_der_paketerstellung/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./grundlagen_der_paketerstellung/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./grundlagen_der_paketerstellung/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./grundlagen_der_paketerstellung/a/backlinks.html">Grundlagen der Paketerstellung</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./packprogramme.html">Archive entpacken</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./editor.html">Dateien editieren</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./gnupg.html">GnuPG Schlüssel erstellen und verwalten</a></p></li></ol></div></div><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Vorbereitung">Vorbereitung
</a></li><li><a class="crosslink" href="#Herstellen-einer-Arbeitsumgebung">Herstellen einer Arbeitsumgebung
</a></li><li><a class="crosslink" href="#Erstellen-der-Debian-Dateien">Erstellen der Debian-Dateien
</a></li><li><a class="crosslink" href="#Bearbeiten-der-Debian-Dateien">Bearbeiten der Debian-Dateien
</a><ol class="arabic"><li><a class="crosslink" href="#changelog">changelog
</a></li><li><a class="crosslink" href="#compat">compat
</a></li><li><a class="crosslink" href="#control">control
</a></li><li><a class="crosslink" href="#copyright">copyright
</a></li><li><a class="crosslink" href="#rules">rules
</a><ol class="arabic"><li><a class="crosslink" href="#Build-Systeme">Build-Systeme
</a></li></ol></li><li><a class="crosslink" href="#source-format">source/format
</a></li><li><a class="crosslink" href="#Weitere-optionale-Konfigurationsdateien">Weitere (optionale) Konfigurationsdateie...</a></li></ol></li><li><a class="crosslink" href="#Erstellung-eines-Menueeintrages">Erstellung eines Menüeintrages
</a></li><li><a class="crosslink" href="#Patchen">Patchen
</a><ol class="arabic"><li><a class="crosslink" href="#quilt-Bedienung">quilt Bedienung
</a></li></ol></li><li><a class="crosslink" href="#Erstellung-des-Quellpaketes">Erstellung des Quellpaketes
</a></li><li><a class="crosslink" href="#berpruefen-des-Paketes">Überprüfen des Paketes
</a></li><li><a class="crosslink" href="#Erstellung-des-Binaerpaketes">Erstellung des Binärpaketes
</a></li><li><a class="crosslink" href="#Links">Links
</a></li><li><a class="crosslink" href="#Intern">Intern
</a></li><li><a class="crosslink" href="#Extern">Extern
</a></li></ol></div><p>Dieser Artikel vermittelt das Grundlagenwissen, welches für die Erstellung von Debian-Paketen notwendig ist. Mit dem Erstellen eigener Debian-Quellpakete ist es über den <a class="internal" href="./launchpad/ppa.html">Launchpad</a>-Service möglich, selbsterstellte Pakete öffentlich anzubieten. Aber auch das lokale Erstellen von Paketen für noch nicht paketisierte Software ermöglicht eine reibungslose Integration in die Ubuntu-Installation.</p><p>Der Artikel beschreibt am Beispiel des Programms GNU hello, welches das klassische "Hello World"-Programm darstellt, eine einfache Paketerstellung. Diese wird mit Hilfe der debhelper-Skripte durchgeführt.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Dieser Artikel geht davon aus, dass das entsprechende Programm zum ersten Mal paketiert wird. Wurde das Programm bereits paketiert, müssen die Dateien im Debian-Ordner nicht neu erstellt, sondern nur ggf. an die eigenen Bedürfnisse angepasst werden. Ist dort alles korrekt, kann z.B. direkt mit der <a class="crosslink" href="#Erstellung-des-Quellpaketes">Erstellung eines Quellpaketes</a> fortgefahren werden.
</p></div></div><div class="section_1"><h2 id="Vorbereitung">Vorbereitung<a class="headerlink" href="#Vorbereitung">¶</a></h2><p>
Um alle wichtigen Programme zum Paketbau herunterzuladen, kann einfach das Paket <strong>packaging-dev</strong> installiert <sup><a href="#source-1">[1]</a></sup> werden.</p><p>Für diese Einführung werden folgende Pakete mit ihren Abhängigkeiten benötigt:
</p><ul><li><p><strong>build-essential</strong></p></li><li><p><strong>debhelper</strong></p></li><li><p><strong>dh-make</strong></p></li><li><p><strong>quilt</strong></p></li><li><p><strong>fakeroot</strong></p></li><li><p><strong>lintian</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install build-essential debhelper dh-make quilt fakeroot lintian </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install build-essential debhelper dh-make quilt fakeroot lintian </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="Herstellen-einer-Arbeitsumgebung">Herstellen einer Arbeitsumgebung<a class="headerlink" href="#Herstellen-einer-Arbeitsumgebung">¶</a></h2><p>
Bevor der eigentliche Paketbau eines Programmes beginnt, sollte zuerst eine Arbeitsumgebung eingerichtet werden. Die Arbeitsumgebung stellt in diesem Fall ein leeres Verzeichnis dar, welches ausschließlich zum Bauen dieses einen Debian-Paketes genutzt wird. Dazu wird ein Ordner erstellt, der wie das zu erstellende Programmpaket bezeichnet wird. Anschließend wird in des Verzeichnis gewechselt:
</p><div class="bash"><div class="contents"><pre class="notranslate">mkdir gnu-hello
cd gnu-hello </pre></div></div><p>Nun wird das Quellarchiv des Programmes heruntergeladen und entpackt:
</p><div class="bash"><div class="contents"><pre class="notranslate">wget http://ftp.gnu.org/gnu/hello/hello-2.7.tar.gz
tar -xvf hello-2.7.tar.gz </pre></div></div></div><div class="section_1"><h2 id="Erstellen-der-Debian-Dateien">Erstellen der Debian-Dateien<a class="headerlink" href="#Erstellen-der-Debian-Dateien">¶</a></h2><p>
Die Debian-Dateien, welche zum Paketieren nötig sind, werden nun mit dem Programm dh_make erstellt.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Um sich die Arbeit des Eingebens von E-Mail-Adresse und Maintainername zu sparen, können diese als lokale <a class="internal" href="./umgebungsvariablen.html">Umgebungsvariablen</a> deklariert werden:</p><div class="bash"><div class="contents"><pre class="notranslate">export DEBFULLNAME="VORNAME NACHNAME"
export DEBEMAIL="MAIL@ADRESSE" </pre></div></div><p>
Diese Angaben können z.B. in der Datei <strong>~/.profile</strong>' dauerhaft gespeichert werden.
</p></div></div><p>
Es wird nun in das Verzeichnis des entpackten Quellarchivs, also des Quellcodes, gewechselt:
</p><div class="bash"><div class="contents"><pre class="notranslate">cd hello-2.7/ </pre></div></div><p>Dort werden nun mit dh_make die Vorlagedateien angelegt.
</p><div class="bash"><div class="contents"><pre class="notranslate">dh_make -f ../hello-2.7.tar.gz </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Hier können noch mehr Optionen, wie z.B. Emailadresse, Lizenz oder Art des Paketes übergeben werden. Siehe dazu die <a class="internal" href="./man.html">Manpage</a> von dh_make.
</p></div></div><p>Nach dem Ausführen des Befehls werden nun einige Fragen gestellt: 
</p><pre class="notranslate">Type of package: single binary, indep binary, multiple binary, library, kernel module, kernel patch?
 [s/i/m/l/k/n]</pre><p>Es wird also gefragt, ob ein einzelnes Binär-Paket, ein architekturunabhängiges Paket, mehrere Binär-Pakete, eine Bibliothek, ein Kernelmodul oder ein Kernelpatch paketiert werden soll. Da es sich bei GNU hello um ein einzelnes Programm mit nur einer Binär-Datei handelt, wird die Frage mit dem Drücken der 
<span class="key">S</span> -Taste beantwortet.</p><p>Abschließend werden einige Informationen zum Ersteller und dem Paket angezeigt:  
</p><pre class="notranslate">Maintainer name : VORNAME NACHNAME
Email-Address   : EMAIL@ADRESSE
Date            : DATUM UHRZEIT +/-UTC-DIFFERENZ
Package Name    : PAKETNAME
Version         : PAKETVERSION
License         : LIZENZ
Type of Package : PAKETTYP
Hit &lt;enter&gt; to confirm:</pre><p>Nach einer Bestätigung mit 
<span class="key">⏎</span>  werden die Steuerungsdateivorlagen unter <strong>debian/</strong> erstellt und das Quellarchiv an die für das <a class="crosslink" href="#source-format">Quellformat</a> nötige Stelle <strong>../hello_2.7.orig.tar.gz</strong> kopiert.</p></div><div class="section_1"><h2 id="Bearbeiten-der-Debian-Dateien">Bearbeiten der Debian-Dateien<a class="headerlink" href="#Bearbeiten-der-Debian-Dateien">¶</a></h2><p>
Nachdem die Steuerungsdaten nun im Unterordner <strong>debian/</strong> erstellt wurden, liegen diese auf die Gesamtstrukutur bezogen unter <strong>gnu-hello/hello-2.7/debian</strong>. In diesen Ordner wird nun gewechselt:
</p><div class="bash"><div class="contents"><pre class="notranslate">cd debian/ </pre></div></div><p>Dort befinden sich einige Dateien und ein Ordner <strong>source/</strong>:
</p><pre class="notranslate">gnu-hello/hello-2.7/debian $ dir
changelog           emacsen-startup.ex  manpage.sgml.ex  README.Debian
compat              hello.cron.d.ex     manpage.xml.ex   README.source
control             hello.default.ex    menu.ex          rules
copyright           hello.doc-base.EX   postinst.ex      source
docs                info                postrm.ex        watch.ex
emacsen-install.ex  init.d.ex           preinst.ex
emacsen-remove.ex   manpage.1.ex        prerm.ex

gnu-hello/hello-2.7/debian $ dir source/
format</pre><p>Die Dateien werden in zwei Klassen unterteilt: Optionale Dateien, die nur unter bestimmten Umständen nötig sind, sie besitzen die Endung <strong>.ex</strong> bzw. <strong>.EX</strong>. Die übrigen Dateien sind idR. zwingend erforderlich, um ein Quellpaket erstellen zu können.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>In diesem Beispiel wurden von dh_make im Quellverzeichnis die Dateien <strong>ChangeLog.O</strong> und <strong>doc/hello.info</strong> als zusätzlicher Changelog bzw. als Infoseite erkannt und deswegen im Debianverzeichnis die Datei <strong>docs</strong> und <strong>info</strong> angelegt. Diese Dateien sind aber nicht allgemein zwingend erforderlich.
</p></div></div><p>Bei den meisten Programmen wird ein Großteil der optionalen Dateien nicht benötigt. Eine kurze Übersicht erfolgt unter <a class="crosslink" href="#Weitere-optionale-Konfigurationsdateien">Weitere (optionale) Konfigurationsdateien</a>. Eine ausführlichere Erklärung und Hinweise zur Benutzung finden sich unter <a class="external" href="http://www.debian.org/doc/manuals/maint-guide/dother.de.html" rel="nofollow">Kapitel 5. Andere Dateien im Verzeichnis debian</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/><img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> des <a class="external" href="http://www.debian.org/doc/manuals/maint-guide/index.de.html" rel="nofollow">Leitfadens für neue Debian-Betreuer</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/><img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> oder auf der entsprechenden <a class="internal" href="./man.html">Manpage</a> der debhelper-Skripte.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Es ist auch hilfreich, sich ein Programm anzuschauen, das diese Dateien verwendet, bevor man selbst ein solches Programm paketieren möchte. Kurz gesagt kann man mit ihnen Shell-Skripte ausführen, entweder vor der Installation, nach der Installation oder auch vor oder nach dem Deinstallieren eines Debian-Paketes. Man kann einen <a class="internal" href="./cron.html">Cronjob</a> bei der Installation eines Paketes erstellen oder einen Menüeintrag im Anwendungsmenü.
</p></div></div><p>Für dieses Beispiel werden alle nicht benötigten Dateien gelöscht:
</p><div class="bash"><div class="contents"><pre class="notranslate">rm *.ex *.EX README.Debian README.source </pre></div></div><p>Danach sollten nur noch diese Dateien übrig bleiben: 
</p><pre class="notranslate">gnu-hello/hello-2.7/debian $ dir
changelog  compat  control  copyright  docs  info  rules  source</pre><p>Die wichtigen Dateien, die mit einem Texteditor <sup><a href="#source-3">[3]</a></sup> generell angepasst werden müssen, sind: <strong><a class="crosslink" href="#changelog">changelog</a></strong>, <strong><a class="crosslink" href="#compat">compat</a></strong>, <strong><a class="crosslink" href="#control">control</a></strong>, <strong><a class="crosslink" href="#copyright">copyright</a></strong>, <strong><a class="crosslink" href="#rules">rules</a></strong> und <strong><a class="crosslink" href="#source-format">source/format</a></strong>, wobei meist die Standardvorgabe von <strong>compat</strong> und <strong>source/format</strong> ausreicht. Des Weiteren ist bei vielen Programmen das Makefile im Quellcode ebenfalls ausreichend, sodass das Debian-Makefile in der Datei <strong>rules</strong> nicht weiter angepasst werden muss.</p><p>Eine umfangreiche Erklärung zu diesen Dateien findet sich in <a class="external" href="http://www.debian.org/doc/manuals/maint-guide/dreq.de.html" rel="nofollow">Kapitel 4. Benötigte Dateien im Verzeichnis debian</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/><img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> im <a class="external" href="http://www.debian.org/doc/manuals/maint-guide/index.de.html" rel="nofollow">Leitfaden für neue Debian-Betreuer</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/><img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p><div class="section_2"><h3 id="changelog">changelog<a class="headerlink" href="#changelog">¶</a></h3><p>
In dieser Datei werden Veränderungen zwischen den einzelnen Paketversionen (changes) dokumentiert.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Soll eine gepatchte Version eines Paketes, das schon in den Ubuntu-Paketquellen vorhanden ist, erstellt werden, so ist es empfehlenswert, nur eine geringfügig höhere Versionsnummer zu verwenden, damit im Fall einer Sicherheitslücke auf das Paket aus den Ubuntu-Paketquellen aktualisiert wird. Die dazugepatchten Funktionen fehlen anschließend, aber es ist keine bekannte Sicherheitslücke mehr vorhanden.</p><p>Besitzt beispielsweise das Ubuntu-Paket die Version <em>2.2.1-1ubuntu4.2</em>, wäre ein Heraufsetzen auf <em>2.2.1-1ubuntu4.2+patched1</em> sinnvoll. Das nächste Ubuntu-Paket hätte dann entweder <em>2.2.2-…</em> oder <em>2.2.1-1ubuntu4.3</em> als Versionsnummer. Beide sind höher als die des lokal gepatchten Pakets, es wird also das Ubuntu-Paket beim Erscheinen einer neuen Version installiert werden. Anschließend muss dieses neue Paket bei Bedarf wieder gepatcht werden. Mehr zum Thema Versionsnummern findet man <a class="internal" href="./versionsnummern_von_ubuntu-paketen.html">hier</a>.
</p></div></div><p>Die <strong>changelog</strong>-Datei ist in der folgenden Form:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>hello (2.7-1) unstable; urgency=low

  * Initial release (Closes: #nnnn)  &lt;nnnn is the bug number of your ITP&gt;

 -- VORNAME NACHNAME &lt;EMAIL@ADRESSE&gt;  DATUM UHRZEIT +/-UTC-DIFFERENZ
</pre></div>
</td></tr></table></div><p>In der erste Zeile steht am Anfang das Programm und die Version. An dieser Stelle ist der Artikel <a class="internal" href="./versionsnummern_von_ubuntu-paketen.html">Versionsnummern von Ubuntu-Paketen</a> empfehlenswert.</p><ul><li><p>Für das Beispiel wird nun die Version des Paketes von <code class="notranslate">2.7-1</code> zu <code class="notranslate">1:2.7-1~0ubuntu1</code> geändert. Die Epoch-Nummer wird gesetzt, da das Paket <strong>hello</strong> bereits in den Ubuntuquellen vorhanden ist und je nach Ubuntuversion schon in neuerer Version vorliegt, das selbsterstellte Paket aber installiert bleiben soll.</p></li><li><p>Als nächstes steht in der ersten Zeile das Wort <code class="notranslate">unstable</code>. Dies kann man mit der Version von Ubuntu ersetzen für die das Paket erstellt werden soll. Also lucid, maverick, natty, ... .</p></li><li><p><code class="notranslate">urgency=WICHTIGKEIT</code> gibt mit dem Wert <code class="notranslate">WICHTIGKEIT</code> an, wie groß die Veränderungen sind, die vorgenommen wurden. Normalerweise muss der Standardwert <code class="notranslate">low</code> nicht angepasst werden. Folgende Werte sind möglich: <code class="notranslate">low</code>, <code class="notranslate">medium</code>, <code class="notranslate">high</code>, <code class="notranslate">emergency</code>, <code class="notranslate">critical</code></p></li><li><p>In der nächsten Zeile werden die Änderungen beschrieben, also was am Paket im Vergleich zu vorherigen Paketen verändert wurde.</p></li><li><p>In der letzten Zeile muss der Name und die Email-Adresse des Paketbetreuers eingetragen werden, bzw wurde durch entsprechend übergebene Parameter an dh_make schon eingetragen.</p></li></ul><p>
Ein Beispiel kann also wie folgt aussehen:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>hello (1:2.7-1~0ubuntu1) precise; urgency=low

  * Erster Paketbau.

 -- VORNAME NACHNAME &lt;EMAIL@ADRESSE&gt;  DATUM UHRZEIT +/-UTC-DIFFERENZ
</pre></div>
</td></tr></table></div><p>
Leerzeichen und Leerzeilen sind entsprechend dem Beispiel zu setzen.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Es ist darauf zu achten, dass sich zwischen Email-Adresse und Datum exakt 2 Leerzeichen befinden.</p><p>Die Mail-Adresse wird von den Zeichen "&lt;" und "&gt;" eingerahmt.
</p></div></div></div><div class="section_2"><h3 id="compat">compat<a class="headerlink" href="#compat">¶</a></h3><p>
Die <strong>compat</strong>-Datei bestimmt den debhelper-Kompatibilitätsmodus, also bestimmte Funktionalitäten der debhelper-Skripte beim Erstellen der Pakete. Zur Zeit liegt die neuste abgeschlossene Version bei v9. Diese ist allerdings nicht in allen Ubuntuversionen aufgrund einer niedrigeren Version von <strong>debhelper</strong> verfügbar. Als Vorlage wird von dh_make jeweils die Version genommen, welche zum Erscheinungszeitpunkt der momentan genutzten Ubuntuversion die aktuellste Abgeschlossene war. Bei <a class="internal" href="./oneiric_ocelot.html">Ubuntu 11.10</a> ist dies Version 8. Um den Kompatibilitätsmodus manuell festzulegen, wird die jeweilige Versionsnummer als alleinstehende Zahl in die Datei <strong>compat</strong> geschrieben.</p><p>Informationen zu den verschiedenen auf dem aktuellen System verfügbaren Kompatibilitätsmodi finden sich in der Übersichts-<a class="internal" href="./man.html">Manpage</a> des Paketes <strong>debhelper</strong>.</p></div><div class="section_2"><h3 id="control">control<a class="headerlink" href="#control">¶</a></h3><p>
Die <strong>control</strong>-Datei stellt bei einem fertigen Debianpaket die Kontrollinformationen bereit und wurde in diesem Beispiel mit folgendem Vorlageninhalt erstellt:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="k">Source</span><span class="w">: </span><span class="s">hello</span>
<span class="k">Section</span><span class="w">: </span><span class="s">unknown</span>
<span class="k">Priority</span><span class="w">: </span><span class="s">extra</span>
<span class="k">Maintainer</span>: VORNAME NACHNAME <span class="gs">&lt;EMAIL@ADRESSE&gt;</span>
<span class="k">Build-Depends</span>: <span class="nf">debhelper</span> (<span class="o">&gt;=</span> <span class="m">8.0.0</span>), <span class="nf">autotools-dev</span>
<span class="k">Standards-Version</span><span class="w">: </span><span class="s">3.9.5</span>
<span class="k">Homepage</span><span class="w">: </span><span class="s">&lt;insert the upstream URL, if relevant&gt;</span>
<span class="err">#Vcs-Git: git://git.debian.org/collab-maint/hello.git</span>
<span class="err">#Vcs-Browser: http://git.debian.org/?p=collab-maint/hello.git;a=summary</span>

<span class="k">Package</span><span class="w">: </span><span class="s">hello</span>
<span class="k">Architecture</span><span class="w">: </span><span class="s">any</span>
<span class="k">Depends</span>: <span class="o">$</span>{<span class="ni">shlibs:Depends</span>}, <span class="o">$</span>{<span class="ni">misc:Depends</span>}
<span class="k">Description</span><span class="gs">: &lt;insert up to 60 chars description&gt;</span>
 &lt;insert long description, indented with spaces&gt;
</pre></div>
</td></tr></table></div><p>Die Felder besitzen folgende Bedeutung.</p><p>
</p><table><tr class="kopf"><td>Zeile </td><td> Bedeutung </td></tr><tr><td> <code class="notranslate">Section</code> </td><td> Dies ist der Bereich, in dem das Paket in der Debian-Paketstruktur erscheint. Hier kann einer der folgenden Werte stehen: <code class="notranslate">admin</code>, <code class="notranslate">cli-mono</code>, <code class="notranslate">comm</code>, <code class="notranslate">database</code>, <code class="notranslate">devel</code>, <code class="notranslate">debug</code>, <code class="notranslate">doc</code>, <code class="notranslate">editors</code>, <code class="notranslate">electronics</code>, <code class="notranslate">embedded</code>, <code class="notranslate">fonts</code>, <code class="notranslate">games</code>, <code class="notranslate">gnome</code>, <code class="notranslate">graphics</code>, <code class="notranslate">gnu-r</code>, <code class="notranslate">gnustep</code>, <code class="notranslate">hamradio</code>, <code class="notranslate">haskell</code>, <code class="notranslate">httpd</code>, <code class="notranslate">interpreters</code>, <code class="notranslate">java</code>, <code class="notranslate">kde</code>, <code class="notranslate">kernel</code>, <code class="notranslate">libs</code>, <code class="notranslate">libdevel</code>, <code class="notranslate">lisp</code>, <code class="notranslate">localization</code>, <code class="notranslate">mail</code>, <code class="notranslate">math</code>, <code class="notranslate">metapackages</code>, <code class="notranslate">misc</code>, <code class="notranslate">net</code>, <code class="notranslate">news</code>, <code class="notranslate">ocaml</code>, <code class="notranslate">oldlibs</code>, <code class="notranslate">otherosfs</code>, <code class="notranslate">perl</code>, <code class="notranslate">php</code>, <code class="notranslate">python</code>, <code class="notranslate">ruby</code>, <code class="notranslate">science</code>, <code class="notranslate">shells</code>, <code class="notranslate">sound</code>, <code class="notranslate">tex</code>, <code class="notranslate">text</code>, <code class="notranslate">utils</code>, <code class="notranslate">vcs</code>, <code class="notranslate">video</code>, <code class="notranslate">web</code>, <code class="notranslate">x11</code>, <code class="notranslate">xfce</code>, <code class="notranslate">zope</code> <div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Unter <a class="external" href="http://packages.ubuntu.com/precise" rel="nofollow" title="http://packages.ubuntu.com/precise">http://packages.ubuntu.com/precise</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> kann am Beispiel der Ubuntuversion <a class="internal" href="./precise.html">Precise</a> verglichen werden, welche Pakete welchem Abschnitt zugeteilt sind.
</p></div></div> </td></tr><tr><td> <code class="notranslate">Priority</code> </td><td> Hier kann bestimmt werden, ob auf das Paket verzichtet werden kann (optional) oder ob das Paket zwingend notwendig für das System ist. Für Priority können folgende Werte verwendet werden: <code class="notranslate">required</code>, <code class="notranslate">important</code>, <code class="notranslate">standard</code>, <code class="notranslate">optional</code>, <code class="notranslate">extra</code>. </td></tr><tr><td> <code class="notranslate">Maintainer</code> </td><td> Diese Zeile enthält den Namen und die E-Mail-Adresse des Paketbetreuers; diese Angaben sind in der gezeigten Schreibweise anzugeben. </td></tr><tr><td> <code class="notranslate">Build-Depends</code> </td><td> Hier werden sämtliche Pakete angegeben, die zum Kompilieren des Quellcodes nötig sind. </td></tr><tr><td> <code class="notranslate">Architecture</code> </td><td> Gibt an, für welche Architekturen das Paket verwendet werden kann. Das Schlüsselwort <code class="notranslate">any</code> besagt, dass das Paket für alle Architekturen erstellt werden kann. Wird <code class="notranslate">all</code> angegeben, bedeutet dies, das sich ein und dasselbe Paket auf allen Architekturen verwenden lässt. </td></tr><tr><td> <code class="notranslate">Depends</code> </td><td> Sind die Pakete, die zusätzlich installiert werden. Falls die Abhängigkeiten mit "ODER" angegeben werden sollen, kann ein senkrechter Strich <code class="notranslate">|</code> als Trenner zwischen den Paketnamen verwendet werdet. </td></tr><tr><td> <code class="notranslate">Description</code> </td><td> Diese Zeile enthält in einer Zeile eine kurze Beschreibung des Pakets. Alle weiteren Zeilen müssen mit einem Leerzeichen beginnen, Absätze durch einen Punkt markiert sein und beschreiben das Paket ausführlich. Diese Texte sollten in englischer Sprache verfasst werden. </td></tr></table><p>Weitere optionale Zeilen sind unter anderem: 
</p><p>
</p><table><tr class="kopf"><td>Zeile </td><td> Bedeutung </td></tr><tr><td> <code class="notranslate">Conflicts</code> </td><td> Die hier angegebenen Pakete werden deinstalliert. </td></tr><tr><td> <code class="notranslate">Replaces</code> </td><td> Pakete die ersetzt werden. </td></tr><tr><td> <code class="notranslate">Recommends</code> </td><td> Pakete die empfohlen werden. </td></tr><tr><td> <code class="notranslate">Suggests</code> </td><td> Pakete die nützlich sein können. </td></tr></table><p>Eine vollständige Aufzählung findet sich in der Ubuntu Policy unter <a class="external" href="http://people.canonical.com/~cjwatson/ubuntu-policy/policy.html/ch-controlfields.html" rel="nofollow">Chapter 5 - Control files and their fields</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>In der kurzen Beschreibung sollte der Name des Pakets nicht erwähnt werden.
</p></div></div><p>Für das Beispiel sieht eine vollständige <strong>control</strong>-Datei folgendermaßen aus: 
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="k">Source</span><span class="w">: </span><span class="s">hello</span>
<span class="k">Section</span><span class="w">: </span><span class="s">misc</span>
<span class="k">Priority</span><span class="w">: </span><span class="s">optional</span>
<span class="k">Maintainer</span>: VORNAME NACHNAME <span class="gs">&lt;EMAIL@ADRESSE&gt;</span>
<span class="k">Build-Depends</span>: <span class="nf">debhelper</span> (<span class="o">&gt;=</span> <span class="m">8.0.0</span>), <span class="nf">autotools-dev</span>
<span class="k">Standards-Version</span><span class="w">: </span><span class="s">3.9.5</span>

<span class="k">Package</span><span class="w">: </span><span class="s">hello</span>
<span class="k">Architecture</span><span class="w">: </span><span class="s">any</span>
<span class="k">Depends</span>: <span class="o">$</span>{<span class="ni">shlibs:Depends</span>}, <span class="o">$</span>{<span class="ni">misc:Depends</span>}
<span class="k">Description</span><span class="gs">: The classic greeting and a package build example</span>
 The GNU hello program produces a familiar, friendly greeting.  It
 allows non-programmers to use a classic computer science tool which
 would otherwise be unavailable to them.
 .
 Seriously, though: this is an example of how to do a Debian package.
 It is the Debian version of the GNU Project's `hello world' program
 (which is itself an example for the GNU Project).
</pre></div>
</td></tr></table></div></div><div class="section_2"><h3 id="copyright">copyright<a class="headerlink" href="#copyright">¶</a></h3><p>
In die <strong>copyright</strong>-Datei gehören die Lizenzbestimmungen des Programms. Mit <a class="external" href="http://dep.debian.net/deps/dep5" rel="nofollow">DEP 5</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> existiert ein Standard, der es erlaubt die Copyright-Informationen auch maschinell auszuwerten. Neue Pakete sollten diesen Standard verwenden.</p><p>Damit gebräuchliche Lizenzen, die in mehreren hundert installieten Paketen verwendet werden, nicht in jedem Paket enthalten sein müssen und somit aufsummiert sehr viel Speicherplatz für gleichen Inhalt verbrauchen würden, liegt in Debian-Systemen unter <strong>/usr/share/common-licenses/</strong> eine Kopie dieser Lizenzen. Im Paket-Copyright reicht also meist ein einfacher Verweis auf dieses Verzeichnis aus.</p><p>Folgendes Beispiel ist nun anzupassen:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>Format: http://dep.debian.net/deps/dep5
Upstream-Name: hello
Source: &lt;url://example.com&gt;

Files: *
Copyright: &lt;years&gt; &lt;put author's name and email here&gt;
           &lt;years&gt; &lt;likewise for another author&gt;
License: &lt;special license&gt;
 &lt;Put the license of the package here indented by 1 space&gt;
 &lt;This follows the format of Description: lines in control file&gt;
 .
 &lt;Including paragraphs&gt;

# If you want to use GPL v2 or later for the /debian/* files use 
# the following clauses, or change it to suit. Delete these two lines
Files: debian/*
Copyright: JAHR VORNAME NACHNAME &lt;EMAIL@ADRESSE&gt;
License: GPL-2+
 This package is free software; you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation; either version 2 of the License, or
 (at your option) any later version.
 .
 This package is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.
 .
 You should have received a copy of the GNU General Public License
 along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;
 .
 On Debian systems, the complete text of the GNU General
 Public License version 2 can be found in "/usr/share/common-licenses/GPL-2".

# Please also look if there are files or directories which have a
# different copyright/license attached and list them here.
</pre></div>
</td></tr></table></div><p>Nach Anpassung wird daraus der Inhalt folgender Form:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>Format: http://www.debian.org/doc/packaging-manuals/copyright-format/1.0/
Upstream-Name: hello
Source: http://ftp.gnu.org/gnu/hello/hello-2.7.tar.gz

Files: *
Copyright: 1992-2011 Free Software Foundation, Inc.
License: GPL-3+

Files: debian/*
Copyright: JAHR VORNAME NACHNAME &lt;EMAIL@ADRESSE&gt;
License: GPL-3+

License: GPL-3+
 This package is free software; you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation; either version 2 of the License, or
 (at your option) any later version.
 .
 This package is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.
 .
 You should have received a copy of the GNU General Public License
 along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;
 .
 On Debian systems, the complete text of the GNU General
 Public License version 3 can be found in "/usr/share/common-licenses/GPL-3".
</pre></div>
</td></tr></table></div></div><div class="section_2"><h3 id="rules">rules<a class="headerlink" href="#rules">¶</a></h3><p>
Die <strong>rules</strong>-Datei ist ein Makefile, in welchem alle Aufgaben zum Paketbau eingetragen sein müssen. Hier wird z.B. der eventuelle Kompiliervorgang gesteuert. Sie ist sozusagen das "Herzstück" eines Quellpaketes.</p><p>Mithilfe der debhelper-Skripte ist die Erstellung meist ziemlich einfach, denn es reicht meist schon folgender Inhalt:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="c">#!/usr/bin/make -f</span>
<span class="nf">%</span><span class="o">:</span>
	dh <span class="nv">$@</span>
</pre></div>
</td></tr></table></div><p>Die durch dh_make erstellte Vorlage hat den selben nicht auskommentierten Inhalt:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="c">#!/usr/bin/make -f</span>
<span class="c"># -*- makefile -*-</span>
<span class="c"># Sample debian/rules that uses debhelper.</span>
<span class="c"># This file was originally written by Joey Hess and Craig Small.</span>
<span class="c"># As a special exception, when this file is copied by dh-make into a</span>
<span class="c"># dh-make output file, you may use that output file without restriction.</span>
<span class="c"># This special exception was added by Craig Small in version 0.37 of dh-make.</span>

<span class="c"># Uncomment this to turn on verbose mode.</span>
<span class="c">#export DH_VERBOSE=1</span>

<span class="nf">%</span><span class="o">:</span>
	dh <span class="nv">$@</span>
</pre></div>
</td></tr></table></div><p>
Dies bedeutet, dass alle debhelper-Skripte der Reihe nach ausgeführt werden. Ausgeschrieben, sieht das Makefile in grober Struktur und je nach Version und installierten Zusatzpaketen, sowie genutzten Optionen, folgendermaßen aus:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="c">#!/usr/bin/make -f</span>

<span class="nf">clean</span><span class="o">:</span>
	dh_testdir
	dh_auto_clean
	dh_clean

<span class="nf">build</span><span class="o">:</span>
	dh_testdir
	dh_auto_configure
	dh_auto_build
	dh_auto_test

<span class="nf">build-arch</span><span class="o">:</span>
	dh_testdir -a
	dh_auto_configure -a
	dh_auto_build -a
	dh_auto_test -a

<span class="nf">build-indep</span><span class="o">:</span>
	dh_testdir -i
	dh_auto_configure -i
	dh_auto_build -i
	dh_auto_test -i

<span class="nf">install</span><span class="o">:</span> <span class="n">build</span>
	dh_testroot
	dh_prep
	dh_installdirs
	dh_auto_install
	dh_install
	dh_installdocs
	dh_installchangelogs
	dh_installexamples
	dh_installman
	dh_installcatalogs
	dh_installcron
	dh_installdebconf
	dh_installemacsen
	dh_installifupdown
	dh_installinfo
	dh_installinit
	dh_installmenu
	dh_installmime
	dh_installmodules
	dh_installlogcheck
	dh_installlogrotate
	dh_installpam
	dh_installppp
	dh_installudev
	dh_installwm
	dh_installxfonts
	dh_installgsettings
	dh_bugfiles
	dh_ucf
	dh_lintian
	dh_gconf
	dh_icons
	dh_perl
	dh_usrlocal
	dh_link
	dh_compress
	dh_fixperms

<span class="nf">install-arch</span><span class="o">:</span> <span class="n">build</span>-<span class="n">arch</span>
	dh_testroot -a
	dh_prep -a
	dh_installdirs -a
	dh_auto_install -a
	dh_install -a
	dh_installdocs -a
	dh_installchangelogs -a
	dh_installexamples -a
	dh_installman -a
	dh_installcatalogs -a
	dh_installcron -a
	dh_installdebconf -a
	dh_installemacsen -a
	dh_installifupdown -a
	dh_installinfo -a
	dh_installinit -a
	dh_installmenu -a
	dh_installmime -a
	dh_installmodules -a
	dh_installlogcheck -a -a
	dh_installlogrotate -a
	dh_installpam -a
	dh_installppp -a
	dh_installudev -a
	dh_installwm -a
	dh_installxfonts -a
	dh_installgsettings -a
	dh_bugfiles -a
	dh_ucf -a
	dh_lintian -a
	dh_gconf -a
	dh_icons -a
	dh_perl -a
	dh_usrlocal -a
	dh_link -a
	dh_compress -a
	dh_fixperms -a

<span class="nf">install-indep</span><span class="o">:</span> <span class="n">build</span>-<span class="n">indep</span>
	dh_testroot -i
	dh_prep -i
	dh_installdirs -i
	dh_auto_install -i
	dh_install -i
	dh_installdocs -i
	dh_installchangelogs -i
	dh_installexamples -i
	dh_installman -i
	dh_installcatalogs -i
	dh_installcron -i
	dh_installdebconf -i
	dh_installemacsen -i
	dh_installifupdown -i
	dh_installinfo -i
	dh_installinit -i
	dh_installmenu -i
	dh_installmime -i
	dh_installmodules -i
	dh_installlogcheck -a -i
	dh_installlogrotate -i
	dh_installpam -i
	dh_installppp -i
	dh_installudev -i
	dh_installwm -i
	dh_installxfonts -i
	dh_installgsettings -i
	dh_bugfiles -i
	dh_ucf -i
	dh_lintian -i
	dh_gconf -i
	dh_icons -i
	dh_perl -i
	dh_usrlocal -i
	dh_link -i
	dh_compress -i
	dh_fixperms -i

<span class="nf">binary</span><span class="o">:</span> <span class="n">install</span>
	dh_strip
	dh_makeshlibs
	dh_shlibdeps
	dh_installdeb
	dh_gencontrol
	dh_md5sums
	dh_builddeb

<span class="nf">binary-arch</span><span class="o">:</span> <span class="n">install</span>-<span class="n">arch</span>
	dh_strip -a
	dh_makeshlibs -a
	dh_shlibdeps -a
	dh_installdeb -a
	dh_gencontrol -a
	dh_md5sums -a
	dh_builddeb -a

<span class="nf">binary-indep</span><span class="o">:</span> <span class="n">install</span>-<span class="n">indep</span>
	dh_installdeb -i
	dh_gencontrol -i
	dh_md5sums -i
	dh_builddeb -i

<span class="nf">.PHONY</span><span class="o">:</span> <span class="n">binary</span> <span class="n">binary</span>-<span class="n">arch</span> <span class="n">binary</span>-<span class="n">indep</span> <span class="n">install</span> <span class="n">install</span>-<span class="n">arch</span> <span class="n">install</span>-<span class="n">indep</span> <span class="n">build</span> <span class="n">build</span>-<span class="n">arch</span> <span class="n">build</span>-<span class="n">indep</span> <span class="n">clean</span>
</pre></div>
</td></tr></table></div><p>Die <code class="notranslate">dh_auto_*</code>-Skripte sollen hier kurz vorgestellt werden:
</p><p>
</p><table><tr class="titel"><td colspan="4"> dh_auto_* </td></tr><tr class="kopf"><td> debhelper-Skript </td><td> Befehl im Quellcode sofern Ziel und Makefile bzw. configure-Skript existieren </td></tr><tr><td> <div class="bash"><div class="contents"><pre class="notranslate">dh_auto_clean </pre></div></div> </td><td> <div class="bash"><div class="contents"><pre class="notranslate">make distclean </pre></div></div> </td></tr><tr><td> <div class="bash"><div class="contents"><pre class="notranslate">dh_auto_configure </pre></div></div> </td><td> <div class="bash"><div class="contents"><pre class="notranslate">./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var </pre></div></div> </td></tr><tr><td> <div class="bash"><div class="contents"><pre class="notranslate">dh_auto_build </pre></div></div> </td><td> <div class="bash"><div class="contents"><pre class="notranslate">make </pre></div></div> </td></tr><tr><td> <div class="bash"><div class="contents"><pre class="notranslate">dh_auto_test </pre></div></div> </td><td> <div class="bash"><div class="contents"><pre class="notranslate">make test </pre></div></div> </td></tr><tr><td> <div class="bash"><div class="contents"><pre class="notranslate">dh_auto_install </pre></div></div> </td><td> <div class="bash"><div class="contents"><pre class="notranslate">make install DESTDIR=/PFAD/ZU/PAKET_VERSION/debian/PAKET </pre></div></div> </td></tr></table><p>Sollen einzelne debhelper-Skripte um einen Befehl erweitert werden, so kann die Schreibweise <code class="notranslate">override_dh_*</code> verwendet werden. Folgendes Beispiel zeigt eine solche Verwendung am Beispiel <code class="notranslate">dh_auto_clean</code>:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="c">#!/usr/bin/make -f</span>
<span class="nf">%</span><span class="o">:</span>
	dh <span class="nv">$@</span>

<span class="nf">override_dh_auto_clean</span><span class="o">:</span>
	dh_auto_clean
	rm -f junk
</pre></div>
</td></tr></table></div><p>
Hier wird zusätzlich zu <code class="notranslate">dh_auto_clean</code> noch mittels des Löschbefehls <a class="internal" href="./rm.html">rm</a> die Datei <strong>junk</strong> entfernt.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Kompilieroptionen wie Compiler-Flags oder Makeoptionen können wie in einem Makefile gesetzt werden. Eine ausführliche Dokumentation findet sich im <a class="external" href="https://www.gnu.org/software/make/manual/make.html" rel="nofollow">GNU make manual</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.
</p></div></div><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Lokale Buildflags können für alle lokalen Paketerstellungen in der Datei <strong>~/.config/dpkg/buildflags.conf</strong> festgelegt werden, systemweite unter <strong>/etc/dpkg/buildflags.conf</strong>.
</p></div></div><p>In dem gezeigten Beispiel, muss die <strong>rules</strong>-Datei nicht angepasst werden.</p><p>Eine detaillierte Erklärung findet man unter <a class="external" href="http://www.debian.org/doc/manuals/maint-guide/dreq.de.html#rules" rel="nofollow">4.4. rules</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/><img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> im <a class="external" href="http://www.debian.org/doc/manuals/maint-guide/index.de.html" rel="nofollow">Leitfaden für neue Debian-Betreuer</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/><img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p><div class="section_3"><h4 id="Build-Systeme">Build-Systeme<a class="headerlink" href="#Build-Systeme">¶</a></h4><p>
Normalerweise kann debhelper aus den Dateinamen im Quellcode feststellen, welches Build-System verwendet werden muss. Manchmal ist das aber nicht möglich. Bei einem <a class="internal" href="./qt.html">Qt</a>-Projekt beispielsweise kann debhelper nicht unterscheiden, ob Qt4 oder Qt5 verwendet wird und wählt die neuere Qt-Version. Im Fall eines Qt4-Projektes muss man deshalb das Build-System explizit angeben:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="c">#!/usr/bin/make -f</span>
<span class="nf">%</span><span class="o">:</span>
	dh <span class="nv">$@</span> --buildsystem<span class="o">=</span>qmake_qt4
</pre></div>
</td></tr></table></div><p>Um herauszufinden, welche Build-Systeme unterstützt werden und welches von debhelper automatisch gewählt wird, kann man folgenden Befehl verwenden:
</p><div class="bash"><div class="contents"><pre class="notranslate">dh_auto_build -l </pre></div></div></div></div><div class="section_2"><h3 id="source-format">source/format<a class="headerlink" href="#source-format">¶</a></h3><p>
In der Datei <strong>source/format</strong> wird das Quellformat für dpkg-source festgelegt. Je nach Version wird beim Entpacken und Anwenden der Patches bzw. beim Bauen unterschiedlich vorgegangen.</p><p>Die gebräuchlichen Formate sind zur Zeit "3.0 (quilt)" und "3.0 (native)", während "1.0" als veraltet gilt (aber trotzdem funktioniert).  Die ungepatchte Quelle besteht beim nativen Quellformat aus einem einzigen Archiv, wozu im Gegensatz beim Format "3.0 (quilt)" mindestens noch ein weiteres Archiv vorhanden ist, welches den Debianordner beinhaltet. Soll nun das quilt-3.0-Format verwendet werden, lautet der Eintrag in die <strong>source/format</strong>:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>3.0 (quilt)
</pre></div>
</td></tr></table></div><p>dh_make erstellt automatisch das empfohlene quilt-3.0-Format, diese Datei muss am Beispiel GNU hello also nicht angepasst werden.</p></div><div class="section_2"><h3 id="Weitere-optionale-Konfigurationsdateien">Weitere (optionale) Konfigurationsdateien<a class="headerlink" href="#Weitere-optionale-Konfigurationsdateien">¶</a></h3><p>
Auch die weiteren Dateien können beim Beispiel GNU hello ignoriert werden. Eine knappe Darstellung der optionalen Konfigurationsdateien findet sich unter <a class="internal" href="./grundlagen_der_paketerstellung/optionale_konfigurationsdateien.html">Optionale Konfigurationsdateien</a>.</p></div></div><div class="section_1"><h2 id="Erstellung-eines-Menueeintrages">Erstellung eines Menüeintrages<a class="headerlink" href="#Erstellung-eines-Menueeintrages">¶</a></h2><p>
Wie ein Icon im GNOME-, KDE-, Xfce-Menü für die Anwendung im erstellten Debian-Paket erscheint, ist im Artikel: <a class="internal" href="./grundlagen_der_paketerstellung/menüeintrag.html">Grundlagen der Paketerstellung/Menüeintrag</a> beschrieben.</p><p>Für das Beispiel GNU hello ist dies nicht unbedingt notwendig, da es sich hierbei um ein reines Kommandozeilenprogramm handelt.</p></div><div class="section_1"><h2 id="Patchen">Patchen<a class="headerlink" href="#Patchen">¶</a></h2><p>
Im Folgenden wird beschrieben, einen Patch mit quilt am Beispiel GNU hello zu erstellen.</p><p>Damit das Paket am Ende so "sauber" wie möglich ist, dh. keine Policy-Verletzungen oder Programmfehler aufweist, muss das Paket gepatcht werden, sofern diese Änderungen nicht vom Ursprung des Quellcodes (Upstream) geändert werden.</p><p>Wird folgender Patch von Santiago Vila nicht angewandt, tritt eine Richtlinenverletzung auf, da durch das Makefile relativ zur Quellcodewurzel unter <strong>doc/Makefile</strong> eine Datei <strong>/usr/share/info/dir.gz</strong> angelegt wird. Diese soll aber automatisch während der Installation angelegt werden.</p><p>Also ist das Makefile zu bearbeiten. Das Arbeitsverzeichnis sollte nun eine Ebene über dem <strong>debian/</strong>-Verzeichnis, also das Quellcodeverzeichnis selbst sein (der <a class="internal" href="./shell/einführung.html#Der-Beginn-der-Prompt">Prompt</a> sieht in etwa wie <code class="notranslate">gnu-hello/hello-2.7 $</code> aus).</p><p>Die aktuelle Version von quilt (Ubuntu 15.10) legt den Ordner Patches nicht unter <strong>debian/patches</strong> an sondern im Source-Verzeichnis. Da dies aber bei der Verwendung von dpkg-buildpackage (siehe unten) zusätzliche Konfigurationen nach sich ziehen würde, wird stattdessen eine Alias-Befehl mit zusätzlichen Optionen angelegt, die den Standard-Pfad wieder korrekt setzten. Da die Option vielleicht nicht dauerhaft das Verhalten von quilt beeinflussen soll, wird der alias "uquilt" gewählt.</p><p>1. Editieren der Datei <strong>~/.bashrc</strong> mit einem Editor dabei sind die folgenden Zeile einzufügen:
</p><div class="bash"><div class="contents"><pre class="notranslate">alias uquilt="quilt --quiltrc=${HOME}/.quiltrc-dpkg"
complete -F _quilt_completion $_quilt_complete_opt uquilt </pre></div></div><p>Diese Option legt fest, dass <code class="notranslate">uquilt</code> die Konfigurationen aus <strong>~/.quiltrc-dpkg</strong> verwendet.</p><p>2. Mit einem Editor die Datei <strong>~/.quiltrc-dpkg</strong> anlegen und folgenden Inhalt einfügen:</p><pre class="notranslate">d=. ; while [ ! -d $d/debian -a `readlink -e $d` != / ]; do d=$d/..; done
if [ -d $d/debian ] &amp;&amp; [ -z $QUILT_PATCHES ]; then
    # falls in Debian-Paketbaum mit ungesetztem $QUILT_PATCHES
    QUILT_PATCHES="debian/patches"
    QUILT_PATCH_OPTS="--reject-format=unified"
    QUILT_DIFF_ARGS="-p ab --no-timestamps --no-index --color=auto"
    QUILT_REFRESH_ARGS="-p ab --no-timestamps --no-index"
    if ! [ -d $d/debian/patches ]; then mkdir $d/debian/patches; fi
fi</pre><p>Nun wird, sofern der Ordner <strong>debian</strong> existiert, der Ordner <strong>patches</strong> dort angelegt.</p><p>Um quilt den Namen des neuen Patches mitzuteilen, wird folgender Befehl verwendet:
</p><div class="bash"><div class="contents"><pre class="notranslate">uquilt new 01-no-usr-share-info-dir-gz </pre></div></div><p>Anschließend wird die Datei <strong>doc/Makefile.in</strong> als Vorlagedatei des fehlerhaften Makefiles als zu bearbeitende Datei hinzugefügt:
</p><div class="bash"><div class="contents"><pre class="notranslate">uquilt add doc/Makefile.in </pre></div></div><p>Nun wurde eine Kopie der Datei unter <strong>.pc/01-no-usr-share-info-dir-gz/doc/Makefile.in</strong> angelegt (Sicherungskopie). Die Datei <strong>doc/Makefile.in</strong> kann nun bearbeitet werden ohne dass der Inhalt der ursprünglichen Datei verlorgen geht. Es wird nun mit einem Texteditor <sup><a href="#source-3">[3]</a></sup> nach folgender Stelle im Abschnitt <code class="notranslate">install-info-am</code> (Zeile 938 ff.) gesucht:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>	<span class="k">while</span> <span class="nb">read</span> files<span class="p">;</span> <span class="k">do</span> <span class="se">\</span>
	  <span class="nb">echo</span> <span class="s2">" </span><span class="k">$(</span>INSTALL_DATA<span class="k">)</span><span class="s2"> </span><span class="nv">$$</span><span class="s2">files '</span><span class="k">$(</span>DESTDIR<span class="k">)$(</span>infodir<span class="k">)</span><span class="s2">'"</span><span class="p">;</span> <span class="se">\</span>
	  <span class="k">$(</span>INSTALL_DATA<span class="k">)</span> <span class="nv">$$</span>files <span class="s2">"</span><span class="k">$(</span>DESTDIR<span class="k">)$(</span>infodir<span class="k">)</span><span class="s2">"</span> <span class="o">||</span> <span class="nb">exit</span> <span class="nv">$$</span>?<span class="p">;</span> <span class="k">done</span>
	@<span class="k">$(</span>POST_INSTALL<span class="k">)</span>
	@if <span class="o">(</span>install-info --version <span class="o">&amp;&amp;</span> <span class="se">\</span>
	     install-info --version <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">|</span> sed 1q <span class="p">|</span> grep -i -v debian<span class="o">)</span> &gt;/dev/null <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="p">;</span> <span class="k">then</span> <span class="se">\</span>
	  <span class="nv">list</span><span class="o">=</span><span class="s1">'$(INFO_DEPS)'</span><span class="p">;</span> <span class="nb">test</span> -n <span class="s2">"</span><span class="k">$(</span>infodir<span class="k">)</span><span class="s2">"</span> <span class="o">||</span> <span class="nv">list</span><span class="o">=</span><span class="p">;</span> <span class="se">\</span>
	  <span class="k">for</span> file in <span class="nv">$$</span>list<span class="p">;</span> <span class="k">do</span> <span class="se">\</span>
	    <span class="nv">relfile</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$$</span><span class="s2">file"</span> <span class="p">|</span> sed <span class="s1">'s|^.*/||'</span><span class="sb">`</span><span class="p">;</span> <span class="se">\</span>
	    <span class="nb">echo</span> <span class="s2">" install-info --info-dir='</span><span class="k">$(</span>DESTDIR<span class="k">)$(</span>infodir<span class="k">)</span><span class="s2">' '</span><span class="k">$(</span>DESTDIR<span class="k">)$(</span>infodir<span class="k">)</span><span class="s2">/</span><span class="nv">$$</span><span class="s2">relfile'"</span><span class="p">;</span><span class="se">\</span>
	    install-info --info-dir<span class="o">=</span><span class="s2">"</span><span class="k">$(</span>DESTDIR<span class="k">)$(</span>infodir<span class="k">)</span><span class="s2">"</span> <span class="s2">"</span><span class="k">$(</span>DESTDIR<span class="k">)$(</span>infodir<span class="k">)</span><span class="s2">/</span><span class="nv">$$</span><span class="s2">relfile"</span> <span class="o">||</span> :<span class="p">;</span><span class="se">\</span>
	  <span class="k">done</span><span class="p">;</span> <span class="se">\</span>
<span class="cp">	else : ; fi</span>
</pre></div>
</td></tr></table></div><p>Dieser wird wie folgt abgewandelt:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>	<span class="k">while</span> <span class="nb">read</span> files<span class="p">;</span> <span class="k">do</span> <span class="se">\</span>
	  <span class="nb">echo</span> <span class="s2">" </span><span class="k">$(</span>INSTALL_DATA<span class="k">)</span><span class="s2"> </span><span class="nv">$$</span><span class="s2">files '</span><span class="k">$(</span>DESTDIR<span class="k">)$(</span>infodir<span class="k">)</span><span class="s2">'"</span><span class="p">;</span> <span class="se">\</span>
	  <span class="k">$(</span>INSTALL_DATA<span class="k">)</span> <span class="nv">$$</span>files <span class="s2">"</span><span class="k">$(</span>DESTDIR<span class="k">)$(</span>infodir<span class="k">)</span><span class="s2">"</span> <span class="o">||</span> <span class="nb">exit</span> <span class="nv">$$</span>?<span class="p">;</span> <span class="k">done</span>
	@<span class="k">$(</span>POST_INSTALL<span class="k">)</span>
	@if false<span class="p">;</span> <span class="k">then</span> <span class="se">\</span>
	  <span class="nv">list</span><span class="o">=</span><span class="s1">'$(INFO_DEPS)'</span><span class="p">;</span> <span class="nb">test</span> -n <span class="s2">"</span><span class="k">$(</span>infodir<span class="k">)</span><span class="s2">"</span> <span class="o">||</span> <span class="nv">list</span><span class="o">=</span><span class="p">;</span> <span class="se">\</span>
	  <span class="k">for</span> file in <span class="nv">$$</span>list<span class="p">;</span> <span class="k">do</span> <span class="se">\</span>
	    <span class="nv">relfile</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$$</span><span class="s2">file"</span> <span class="p">|</span> sed <span class="s1">'s|^.*/||'</span><span class="sb">`</span><span class="p">;</span> <span class="se">\</span>
	    <span class="nb">echo</span> <span class="s2">" install-info --info-dir='</span><span class="k">$(</span>DESTDIR<span class="k">)$(</span>infodir<span class="k">)</span><span class="s2">' '</span><span class="k">$(</span>DESTDIR<span class="k">)$(</span>infodir<span class="k">)</span><span class="s2">/</span><span class="nv">$$</span><span class="s2">relfile'"</span><span class="p">;</span><span class="se">\</span>
	    install-info --info-dir<span class="o">=</span><span class="s2">"</span><span class="k">$(</span>DESTDIR<span class="k">)$(</span>infodir<span class="k">)</span><span class="s2">"</span> <span class="s2">"</span><span class="k">$(</span>DESTDIR<span class="k">)$(</span>infodir<span class="k">)</span><span class="s2">/</span><span class="nv">$$</span><span class="s2">relfile"</span> <span class="o">||</span> :<span class="p">;</span><span class="se">\</span>
	  <span class="k">done</span><span class="p">;</span> <span class="se">\</span>
<span class="cp">	else : ; fi</span>
</pre></div>
</td></tr></table></div><p>Die Änderungen für den Patch sind nun abgeschlossen und der Patch kann so gespeichert werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">uquilt refresh </pre></div></div><p>Übernommen werden kann der Patch mit:
</p><div class="bash"><div class="contents"><pre class="notranslate">uquilt push -a </pre></div></div><p>Die Vorbereitung zur Paketierung wurde für das Beispiel GNU hello abgeschlossen und es kann nun ein <a class="crosslink" href="#Erstellung-des-Binaerpaketes">Binärpaket</a> erstellt werden.</p><div class="section_2"><h3 id="quilt-Bedienung">quilt Bedienung<a class="headerlink" href="#quilt-Bedienung">¶</a></h3><p>
quilt bietet eine einem <a class="internal" href="./versionsverwaltung.html">Versionsverwaltungssystem</a> ähnliche Verwaltung der Patches an, welche der Reihe nach angewandt werden. Die Patches werden dabei unter <strong>patches</strong> gespeichert, die ungepatchten Dateien unter <strong>.pc/PATCHNAME/</strong> gesichert. Die von quilt registrierten Patchnamen werden in ihrer Reihenfolge in der Datei <strong>patches/series</strong> verwaltet.
</p><p>
</p><table><tr class="kopf"><td>Befehl </td><td> Bedeutung </td></tr><tr><td> <div class="bash"><div class="contents"><pre class="notranslate">quilt new PATCHNAME </pre></div></div> </td><td> Einen neuen (leeren) Patch mit Bezeichnung "PATCHNAME" erstellen. </td></tr><tr><td> <div class="bash"><div class="contents"><pre class="notranslate">quilt add DATEI </pre></div></div> </td><td> Die Datei <strong>DATEI</strong> beim aktuellen Patch als zu bearbeitende Datei vormerken. Eine Kopie der Datei wird unter <strong>.pc/</strong> erstellt. </td></tr><tr><td> <div class="bash"><div class="contents"><pre class="notranslate">quilt refresh </pre></div></div> </td><td> Bei Änderungen an den vom aktuellen Patch überwachten Dateien wird unter <strong>debian/patches/PATCHNAME</strong> dieser Patch aktualisiert. </td></tr><tr><td> <div class="bash"><div class="contents"><pre class="notranslate">quilt applied </pre></div></div> </td><td> Eine Liste aller angewandten Patches ausgeben. </td></tr><tr><td> <div class="bash"><div class="contents"><pre class="notranslate">quilt push </pre></div></div> </td><td> Der in der <strong>series</strong>-Datei nächste Patch wird angewandt. Mit der Option <code class="notranslate">-a</code> werden alle Patches angewendet. </td></tr><tr><td> <div class="bash"><div class="contents"><pre class="notranslate">quilt pop </pre></div></div> </td><td> Der aktuelle Patch wird unangewandt, also die vorherige Version wird wiederhergestellt. Mit der Option <code class="notranslate">-a</code> werden alle Patches unangewandt. </td></tr><tr><td> <div class="bash"><div class="contents"><pre class="notranslate">quilt unapplied </pre></div></div> </td><td> Eine Liste aller nicht angewandten Patches ausgeben. </td></tr><tr><td> <div class="bash"><div class="contents"><pre class="notranslate">quilt rename PATCHNAME </pre></div></div> </td><td> Den aktuellen Patch nach "PATCHNAME" umbenennen. </td></tr><tr><td> <div class="bash"><div class="contents"><pre class="notranslate">quilt delete </pre></div></div> </td><td> Der aktuelle Patch wird entfernt, falls angewandt zuvor unangewandt. Die Patchdatei befindet sich aber noch unter <strong>patches/PATCHNAME</strong>. Mit der Option <code class="notranslate">-f</code> kann diese direkt gelöscht werden. </td></tr></table><p>Unter dem Abschnitt <a class="external" href="http://pkg-perl.alioth.debian.org/howto/quilt.html#working_with_quilt" rel="nofollow">Working With quilt</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> findet sich eine kurze Beschreibung der gebräuchlichen Funktion. In <a class="external" href="http://www.debian.org/doc/manuals/maint-guide/modify.de.html" rel="nofollow">Kapitel 3. Den Quellcode verändern</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/><img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> aus dem <a class="external" href="http://www.debian.org/doc/manuals/maint-guide/index.de.html" rel="nofollow">Leitfaden für neue Debian-Betreuer</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/><img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> werden einige konkrete Anwendungsfälle betrachtet.</p></div></div><div class="section_1"><h2 id="Erstellung-des-Quellpaketes">Erstellung des Quellpaketes<a class="headerlink" href="#Erstellung-des-Quellpaketes">¶</a></h2><p>
Im Quellcodeverzeichnis wird folgender Befehl zum Bau des Quellpakets angewandt:
</p><div class="bash"><div class="contents"><pre class="notranslate">dpkg-buildpackage -S -us -uc </pre></div></div><p>Dabei wird automatisch (sofern installiert) fakeroot verwendet, um Rootrechte vorzutäuschen. Die Optionen <code class="notranslate">-us</code> und <code class="notranslate">-uc</code> überspringen die Schritte des (automatischen) Signierens <sup><a href="#source-4">[4]</a></sup> der Quellkontrolldatei (Endung <strong>.dsc</strong>) und der Debian-Steuerdatei zum Hochladen (Endung <strong>.changes</strong>). Ist man im Besitz eines gnupg-Schlüssels, sollten diese beiden Optionen nicht genutzt werden, sodass eine Signierung erfolgt.</p><p>Im übergeordneten Verzeichnis wurden nun beide Quelldateien, sowie bei einem nicht-nativen Quellformat ein Archiv mit den Debian-Änderungen angelegt. Die Datei der Endung <strong>sources.changes</strong> kann nun lokal mit <a class="internal" href="./pbuilder-dist.html">pbuilder-dist</a> für den Bauprozess von Binär-Debian-Paketen verwendet werden. Alternativ kann diese, sofern sie signiert wurde, zum Hochladen in ein <a class="internal" href="./launchpad/ppa.html">Launchpad/PPA</a> genutzt werden.</p></div><div class="section_1"><h2 id="berpruefen-des-Paketes">Überprüfen des Paketes<a class="headerlink" href="#berpruefen-des-Paketes">¶</a></h2><p>
Die verschiedenen Paketdateien sollten mit lintian überprüft werden. Dieses Programm dient dazu, bekannte Richtlinenverstöße und typische Rechtschreibfehler anzuzeigen. Damit kann das Paket vor seiner Veröffentlichung auf vermeidbare Fehler geprüft werden.</p><p>Folgender Befehl ruft lintian mit umfangreichsten Prüfungen auf:
</p><div class="bash"><div class="contents"><pre class="notranslate">lintian -EvIm --pedantic --show-overrides --color=auto PAKET_VERSION_source.changes </pre></div></div><p>Sollen zusätzlich hilfreiche Informationen zu den bemängelten Fehlern angegeben werden, kann die Option <code class="notranslate">-i</code> genutzt werden. Die Optionen können auch in der systemweiten Konfigurationsdatei unter <strong>/etc/lintianrc</strong>, bzw. im Benutzerverzeichnis unter <strong>~/.lintianrc</strong> gepspeichert werden.</p></div><div class="section_1"><h2 id="Erstellung-des-Binaerpaketes">Erstellung des Binärpaketes<a class="headerlink" href="#Erstellung-des-Binaerpaketes">¶</a></h2><p>
Ähnlich wie beim <a class="crosslink" href="#Erstellung-des-Quellpaketes">Quellpaket</a> wird dazu das Perlskript <code class="notranslate">dpkg-buildpackage</code> genutzt:
</p><div class="bash"><div class="contents"><pre class="notranslate">dpkg-buildpackage -us -uc </pre></div></div><p>Die Optionen <code class="notranslate">-us</code> und <code class="notranslate">-uc</code> sind analog wie beim Quellpaket ggfs. zu entfernen.</p><p>Dabei werden folgende Schritte nach dem Säubern von ungewollten Umgebungsvariablen, sowie dem Überprüfen nach denen in der <strong><a class="crosslink" href="#control">control</a></strong>-Datei festgeleten Abhängigkeiten zum Paketbau durchgeführt (ohne Signieren der Quellkontroll- und Steuerungsdatei mittels gpg <sup><a href="#source-4">[4]</a></sup>):
</p><div class="bash"><div class="contents"><pre class="notranslate">debian/rules clean
cd .. &amp;&amp; dpkg-source -b QUELLVERZEICHNIS/ &amp;&amp; cd -
debian/rules build
fakeroot debian/rules binary
dpkg-genchanges &gt;../PAKET_VERSION_ARCHITEKTUR.changes
cd .. &amp;&amp; dpkg-source --after-build QUELLVERZEICHNIS/ &amp;&amp; cd - </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Soll das Paket nicht nur für die lokale Verwendung erstellt werden, empfiehlt sich die Paketerstellung mit <a class="internal" href="./pbuilder-dist.html">pbuilder-dist</a>.
</p></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Bei größeren Paketen, bei denen ein Kompilieren einige Minuten in Anspruch nimmt, aber nur kleine Ausbesserungen in der Datei <strong>debian/rules</strong> vorgenommen werden, kann zu Testzwecken nur das Binärpaket erstellt, aber nicht das gesamte Programm kompiliert werden:</p><div class="bash"><div class="contents"><pre class="notranslate">fakeroot debian/rules binary </pre></div></div><p>
</p></div></div><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Mit der Umgebungsvariable "DEB_BUILD_OPTIONS" können Flags direkt dem Debian-Kompilierprozess übergeben werden. Grundsätzlich kann jeder Maintainer eigene Flags in der Makedatei <strong><a class="crosslink" href="#rules">debian/rules</a></strong> auslesen lassen, allerdings haben sich folgende vier durchgesetzt: <code class="notranslate">nocheck</code>, <code class="notranslate">noopt</code>, <code class="notranslate">nostrip</code>, <code class="notranslate">parallel=n</code> (siehe dazu in der Ubuntu-Policy unter <a class="external" href="http://www.debian.org/doc/debian-policy/ch-source.html#s-debianrules-options" rel="nofollow">4.9.1 debian/rules and DEB_BUILD_OPTIONS</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>)</p><p>Besonderes Augenmerk gilt dem Flag "parallel=n". Sofern dieses unterstützt wird, kann es dazu genutzt werden, den Paketerstellungsvorgang zu parallelisieren, was den Vorgang in erster Linie bei kompilieraufwendigen Paketen sehr beschleunigt. Je nach Prozessor und Festplatte variiert die optimal zugewiesene Jobanzahl "n". Als Faustregel kann man hier die Rechnung "n=(Prozessorkerne-1)*2" nehmen, was bei einem 4-Kern-Prozessor einen Wert von (4-1)*2=6 ergibt. Dieser wird nach folgendem Muster als <a class="internal" href="./umgebungsvariable.html">Umgebungsvariable</a> gesetzt:
</p><div class="bash"><div class="contents"><pre class="notranslate">export DEB_BUILD_OPTIONS="parallel=6" </pre></div></div><p>Alternativ kann dies mit der Option <code class="notranslate">-j</code> direkt dem Programm dpkg-buildpackage übergeben werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">dpkg-buildpackage -j6 </pre></div></div><p>Angegebene, aber nicht unterstützte Build-Optionen werden ignoriert.
</p></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p></div><div class="section_1"><h2 id="Intern">Intern<a class="headerlink" href="#Intern">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="./grundlagen_der_paketerstellung/optionale_konfigurationsdateien.html">Optionale Konfigurationsdateien</a></p></li><li><p><a class="internal" href="./paketbau.html">Paketbau</a></p></li><li><p><a class="internal" href="./versionsnummern_von_ubuntu-paketen.html">Versionsnummern von Ubuntu-Paketen</a></p></li><li><p><a class="internal" href="./dpkg-buildpackage.html">dpkg-buildpackage</a></p></li><li><p><a class="internal" href="./pbuilder-dist.html">pbuilder-dist</a></p></li><li><p><a class="internal" href="./metapakete_erstellen.html">Metapakete erstellen</a></p></li><li><p><a class="internal" href="./open_build_service.html">Open Build Service</a> - Dienst zur Paketerstellung und -verwaltung</p></li></ul><p>
</p></div><div class="section_1"><h2 id="Extern">Extern<a class="headerlink" href="#Extern">¶</a></h2><p>
* <a class="external" href="https://www.debian.org/doc/manuals/maint-guide/modify.de.html" rel="nofollow" title="https://www.debian.org/doc/manuals/maint-guide/modify.de.html">https://www.debian.org/doc/manuals/maint-guide/modify.de.html</a> - (Änderungen am Quellcode durchführen (patchen))</p><ul><li><p><a class="external" href="http://developer.ubuntu.com/packaging/html/" rel="nofollow">Ubuntu Packaging Guide</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - (Neustrukturierung des alten <a class="interwiki interwiki-ubuntu" href="https://wiki.ubuntu.com/PackagingGuide">Packaging Guides</a>)</p><ul><li><p><a class="interwiki interwiki-ubuntu" href="https://wiki.ubuntu.com/PackagingGuide/Recipes">PackagingGuide/Recipes</a> - Erweiterte Tipps zum Maintainen von Paketen</p></li></ul></li><li><p><a class="external" href="http://www.debian.org/doc/maint-guide/" rel="nofollow">Debian Packaging Guide</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p><ul><li><p><a class="external" href="http://www.debian.org/doc/manuals/maint-guide/index.de.html" rel="nofollow">Leitfaden für neue Debian-Betreuer</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/><img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> (teilweise übersetzt)</p></li></ul></li><li><p><a class="external" href="http://debiananwenderhandbuch.de/debianpakete.html" rel="nofollow">Packaging Guide im deutschen Debiananwenderbuch</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="interwiki interwiki-debian" href="https://wiki.debian.org/Projects/DebSrc3.0">DebSrc3.0</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Informationen zur Umstellung auf das Paketformat 3.0</p></li><li><p><a class="external" href="http://dep.debian.net/deps/dep5/" rel="nofollow">Machine-readable debian/copyright file</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Deb5 copyright-Format-Spezifikationen</p></li><li><p><a class="external" href="http://pkg-perl.alioth.debian.org/howto/quilt.html#quilt_for_debian_maintainers" rel="nofollow">Quilt for Debian Maintainers</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="https://www.gnu.org/software/make/manual/make.html" rel="nofollow">GNU make manual</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./grundlagen_der_paketerstellung/a/revision/945255.html">Diese Revision</a> wurde am 5. Dezember 2017 08:59 von <a href="https://ubuntuusers.de/user/stahlstngel/">stahlstngel</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./grundlagen_der_paketerstellung.html">Grundlagen der Paketerstellung</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>