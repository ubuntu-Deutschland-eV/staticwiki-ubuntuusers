<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>CMake › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./cmake.html">CMake</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/CMake">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./cmake/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./cmake/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./cmake/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./cmake/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./cmake/a/backlinks.html">CMake</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><p>
</p><div class="box advanced"><h3 class="box advanced">Artikel für fortgeschrittene Anwender</h3><div class="contents"><p>
Dieser Artikel erfordert mehr Erfahrung im Umgang mit
Linux und ist daher nur für fortgeschrittene Benutzer
gedacht.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a></p></li></ol></div></div><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Benutzung">Benutzung
</a><ol class="arabic"><li><a class="crosslink" href="#Grundlagen">Grundlagen
</a></li><li><a class="crosslink" href="#Optionen-einstellen">Optionen einstellen
</a><ol class="arabic"><li><a class="crosslink" href="#Kommandozeile">Kommandozeile
</a></li><li><a class="crosslink" href="#Grafische-Oberflaeche">Grafische Oberfläche
</a></li><li><a class="crosslink" href="#CMakeCache-txt">CMakeCache.txt
</a></li></ol></li><li><a class="crosslink" href="#Liste-wichtiger-Optionen">Liste wichtiger Optionen
</a></li></ol></li><li><a class="crosslink" href="#Erstellung-eines-Projekts">Erstellung eines Projekts
</a><ol class="arabic"><li><a class="crosslink" href="#Beispielstruktur">Beispielstruktur
</a></li><li><a class="crosslink" href="#Die-CMake-Dateien">Die CMake-Dateien
</a></li></ol></li><li><a class="crosslink" href="#Projekte-die-CMake-verwenden">Projekte die CMake verwenden
</a></li><li><a class="crosslink" href="#Hilfreiche-Links">Hilfreiche Links
</a></li></ol></div><p><a class="external" href="http://www.cmake.org/" rel="nofollow">CMake</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ist ein plattformübergreifendes Programmiertool. Es wird insbesondere als Build-System genutzt. Dieser Artikel führt in die einfache Benutzung von CMake mit bereits bestehenden Projekten ein und erklärt danach, wie man es für eigene Projekte verwenden kann.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
CMake besteht aus den folgenden Paketen (die Grafische Oberfläche ist dabei optional):.</p><ul><li><p><strong>cmake</strong></p></li><li><p><strong>cmake-qt-gui</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install cmake cmake-qt-gui </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install cmake cmake-qt-gui </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="Benutzung">Benutzung<a class="headerlink" href="#Benutzung">¶</a></h2><p>
CMake erstellt je nach System angepasste <a class="internal" href="./makefile.html">makefiles</a> oder Projekte (z.B. für Visual Studio) anhand der vom Entwickler in den Projektdateien vorgegebenen Informationen. Diese generierten Daten sollten nicht mehr vom Benutzer verändert werden. Einfluss auf den Prozess sollte ausschließlich über die Veränderung der entsprechenden CMAKE-Variablen geschehen. Anfangs gibt es nur wenige Variablen, die auch sinnvoll vom Benutzer verändert werden können, spätestens beim Cross-Compilen werden es dann deutlich mehr.</p><div class="section_2"><h3 id="Grundlagen">Grundlagen<a class="headerlink" href="#Grundlagen">¶</a></h3><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">cmake [-optionen] PFAD/ZU/QUELLDATEIEN </pre></div></div><p>CMake favorisiert bei der Kompilation sogenannte "Out of source"-Builds. Das bedeutet, dass das Programm in einem eigenen Verzeichnis gebaut wird. Meist wird dafür im Wurzelverzeichnis eines Projekts das Verzeichnis <strong>build</strong> angelegt, es kann jedoch auch ein beliebiger anderer Ort im Dateisystem benutzt werden. CMake akzeptiert dabei sowohl relative als auch absolute Pfadangaben, um zu diesem Verzeichnis zu gelangen.</p><p>Wird das Verzeichnis <strong>build</strong> im Projektverzeichnis benutzt, lautet der CMake-Aufruf aus diesem Verzeichnis heraus einfach nur</p><div class="bash"><div class="contents"><pre class="notranslate">cmake .. </pre></div></div><p>Bei einem Build in einem anderen Verzeichnis und absoluten Pfandangaben</p><div class="bash"><div class="contents"><pre class="notranslate">cmake  /HIER/IST/DER/QUELLCODE </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>cmake funktioniert nur, wenn das Zielverzeichnis eine <strong>CMakeLists.txt</strong>-Datei enthält. Normalerweise findet man diese im Wurzelverzeichnis des Projekts. Falls nicht, sollte man in der Dokumentation des Projekts nachsehen, ob es bei diesem Projekt etwas Spezielles zu beachten gibt.
</p></div></div></div><div class="section_2"><h3 id="Optionen-einstellen">Optionen einstellen<a class="headerlink" href="#Optionen-einstellen">¶</a></h3><p>
CMake kann sehr vielseitig eingestellt werden. Dies kann entweder über die Kommandozeile, die grafische Oberfläche oder über direktes Manipulieren der <strong>CMakeCache.txt</strong> (nicht empfohlen) erfolgen.</p><div class="section_3"><h4 id="Kommandozeile">Kommandozeile<a class="headerlink" href="#Kommandozeile">¶</a></h4><p>
Auf der Kommandozeile können verschiedene Optionen mithilfe eines vorangesetzten <code class="notranslate">-D</code> gesetzt werden:</p><div class="bash"><div class="contents"><pre class="notranslate">cmake -DCMAKE_BUILD_TYPE=Debug .. </pre></div></div><p>Damit wird die entsprechende Option in den Konfigurationsspeicher geschrieben.</p></div><div class="section_3"><h4 id="Grafische-Oberflaeche">Grafische Oberfläche<a class="headerlink" href="#Grafische-Oberflaeche">¶</a></h4><p>
Die grafische Oberfläche findet man im Programm-Menü oder über den Programmnamen <code class="notranslate">cmake-gui</code>. Die Oberfläche ist eigentlich selbsterklärend, da sie aber nur in Englisch vorliegt hier trotzdem die wichtigsten Einstellungen.</p><p><img alt="./cmake-gui.png" class="image-right" src="./_/3048add72e598ce856678883d7ea098ef1f8bcda.png"/></p><p>Im grünen Bereich wird der Pfad zum Quellcode angegeben. Der blaue Bereich zeigt auf das Build-Verzeichnis. Wie weiter oben erwähnt, ist dies normalerweise unter dem Namen <strong>build</strong> im Quellcodeverzeichnis zu finden. Der rote Bereich zeigt schließlich wichtige Einstellungen an, die vom Nutzer verändert werden können. Hier wurde zum Beispiel als Build-Type <em>"Debug"</em> gewählt. Weitere Werte kann man über den Knopf <em>"Add Entry"</em> hinzufügen. Wird bei <em>"Advanced"</em> ein Haken gesetzt, werden auch erweiterte Optionen angezeigt. Dies ist für Anfänger aber nicht zu empfehlen, da diese Optionen am Anfang sehr verwirrend sein können.</p><p>Bei einem <img alt="linke Maustaste" class="image-default" src="./_/9c03a73e06581c6d6932d30e0750812ed76e6022.png"/>-Klick auf <em>"Configure"</em> wird cmake konfiguriert, also die entsprechenden Variablen angewandt und in der <strong>CMakeCache.txt</strong> gespeichert. Bei einem <img alt="linke Maustaste" class="image-default" src="./_/9c03a73e06581c6d6932d30e0750812ed76e6022.png"/>-Klick auf <em>"Generate"</em> werden dann die eigentlichen für den Build-Prozess nötigen Dateien generiert (z.B. <a class="internal" href="./makefile.html">makefiles</a>).</p></div><div class="section_3"><h4 id="CMakeCache-txt">CMakeCache.txt<a class="headerlink" href="#CMakeCache-txt">¶</a></h4><p>
Diese Datei speichert alle Konfigurationsoptionen, die vom Benutzer und vom Projekt angelegt wurden. Sie liegt immer im <strong>build</strong>-Verzeichnis und speichert bereits eingestellte Variablen. Diese werden bei einem erneuten Aufruf von CMake übernommen. Die Einträge in der Datei sind alle auf Englisch kommentiert. Die nachträgliche Änderung von Variablen ist zwar möglich, jedoch nicht empfohlen, da die Datei z.B. bei einem erneuern des Caches überschrieben wird. Stattdessen sollten diese auf der Kommandozeile oder in der GUI gesetzt werden.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span># This is the CMakeCache file.
# For build in directory: /home/user/Pfad/zu/Projekt
# It was generated by CMake: /usr/bin/cmake
# You can edit this file to change values found and used by cmake.
# If you do not want to change any of the values, simply exit the editor.
# If you do want to change a value, simply edit, save, and exit the editor.
# The syntax for the file is as follows:
# KEY:TYPE=VALUE
# KEY is the name of a variable in the cache.
# TYPE is a hint to GUI's for the type of VALUE, DO NOT EDIT TYPE!.
# VALUE is the current value for the KEY.

########################
# EXTERNAL cache entries
########################

//Value Computed by CMake
Projektname_BINARY_DIR:STATIC=/home/user/Pfad/zu/Projekt/build

//Value Computed by CMake
Projektname_SOURCE_DIR:STATIC=/home/user/Pfad/zu/Projekt/

//Choose the type of build, options are: None(CMAKE_CXX_FLAGS or
// CMAKE_C_FLAGS used) Debug Release RelWithDebInfo MinSizeRel.
CMAKE_BUILD_TYPE:STRING=Debug

//Enable/Disable color output during build.
CMAKE_COLOR_MAKEFILE:BOOL=ON

//CXX compiler.
CMAKE_CXX_COMPILER:FILEPATH=/usr/bin/c++

//Weitere Werte
//...
</pre></div>
</td></tr></table></div><p>Wie aus dem Erklärungstext ersichtlich, kann man die Optionen beliebig verändern. Was wichtige Variablen bedeuten und welche Werte man dabei vergeben darf, wird im folgenden Abschnitt erklärt. Werte, die im Kommentar <code class="notranslate">Value Computed by CMake</code> stehen haben, sollte man aber nicht verändern. Im Allgemeinen gilt: Wird der entsprechende Wert nicht in <code class="notranslate">cmake-gui</code> angezeigt, sollte man ihn auch nicht von Hand verändern, es sei denn, man weiß was man tut.</p></div></div><div class="section_2"><h3 id="Liste-wichtiger-Optionen">Liste wichtiger Optionen<a class="headerlink" href="#Liste-wichtiger-Optionen">¶</a></h3><p>
Die meisten Optionen, insbesondere Einstellungen zum Compiler, findet CMake automatisch. Trotzdem gibt es einige wichtige Optionen, die man kennen sollte. 
</p><table><tr class="titel"><td colspan="3"> Wichtige Optionen </td></tr><tr class="kopf"><td>Variable </td><td> Mögliche Werte </td><td> Erklärung </td></tr><tr><td style="background-color: #EEEEEE"><code class="notranslate">CMAKE_BUILD_TYPE</code> </td><td> <code class="notranslate">None Debug Release RelWithDebInfo MinSizeRel</code> </td><td> Stellt ein, wie das Programm gebaut werden soll. Handelt es sich um ein eigenes Projekt, an dem man noch arbeitet, sollte man <code class="notranslate">Debug</code> nehmen; für Beta-Versionen, die man testet, sollte man <code class="notranslate">RelWithDebInfo</code> nehmen, für fertige Programme reicht meist <code class="notranslate">Release</code>. </td></tr><tr><td style="background-color: #EEEEEE"><code class="notranslate">CMAKE_INSTALL_PREFIX</code> </td><td> Pfadangabe </td><td> Wird benötigt, wenn das Projekt installiert werden soll. Standard ist meist <strong>/usr</strong> oder <strong>/usr/local</strong>. Es kann aber auch ein beliebiger anderer Pfad angegeben werden, z.B. wenn man in seinem Home-Verzeichnis installieren will. </td></tr><tr><td style="background-color: #EEEEEE"><code class="notranslate">CMAKE_TOOLCHAIN_FILE</code> </td><td> Pfadangabe </td><td> Liest eine Datei mit CMake-Einstellungen ein, die dem aktuellen Projekt hinzugefügt werden. Diese Datei kann nicht nur Variablen sondern auch skriptgesteuerte Abläufe enthalten. Wird beispielsweise beim <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Cross-Compiler">Cross-Compiling</a> benötigt. </td></tr></table><p>
</p></div></div><div class="section_1"><h2 id="Erstellung-eines-Projekts">Erstellung eines Projekts<a class="headerlink" href="#Erstellung-eines-Projekts">¶</a></h2><p>
CMake basiert auf einer oder mehreren Textdateien, in denen das Projekt definiert wird. Die Basisdatei liegt immer im Wurzelverzeichnis eines Projektes, weitere Dateien können in Unterverzeichnissen liegen. Die Dateien heißen dabei immer <strong>CMakeLists.txt</strong>.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Für den folgenden Teil sollte man grundlegende Programmierkenntnisse besitzen, sowie wissen, was beim Kompilieren passiert und was es bedeutet, Programme zu linken.
</p></div></div><div class="section_2"><h3 id="Beispielstruktur">Beispielstruktur<a class="headerlink" href="#Beispielstruktur">¶</a></h3><p>
Auf der folgenden Beispielstruktur aufbauend wird ein CMake-Projekt erstellt, das eine Bibliothek und ein ausführbares Programm enthält, sowie eine Bilddatei in ein Verzeichnis kopiert.</p><pre class="notranslate">+ CMakeLists.txt
+-\ src
| + main.cpp
| + CMakeLists.txt
+-\ lib
| + library.h
| + library.cpp
| + CMakeLists.txt
+-\ img
| + icon.png</pre><p>Im Folgenden kommentierte <strong>CMakeLists.txt</strong>-Dateien.</p></div><div class="section_2"><h3 id="Die-CMake-Dateien">Die CMake-Dateien<a class="headerlink" href="#Die-CMake-Dateien">¶</a></h3><p>
<strong>Wurzelverzeichnis</strong>
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="c"># Der Projektname</span>
<span class="nb">project</span><span class="p">(</span><span class="s">beispiel</span><span class="p">)</span>

<span class="c"># Minimal benötigte CMake-Version wenn z.B. bestimmte CMake-Kommandos benutzt werden</span>
<span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">2.6</span><span class="p">)</span>

<span class="c"># Benötigte oder optionale Pakete. Hier können z.B. Qt4 oder Boost stehen</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">SomePackage</span> <span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">OtherPackage</span> <span class="s">OPTIONAL</span><span class="p">)</span>

<span class="c"># CMake soll auch in diesen Verzeichnissen weitersuchen</span>
<span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">lib</span><span class="p">)</span>
<span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">src</span><span class="p">)</span>

<span class="c"># Es sollen auch einige Dateien installiert werden, z.B. Bilder oder Übersetzungen</span>
<span class="nb">install</span><span class="p">(</span><span class="s">FILES</span> <span class="s">img/icon.png</span> <span class="s">DESTINATION</span> <span class="s">img</span><span class="p">)</span>
</pre></div>
</td></tr></table></div><p>Wie man sieht, wird hier zuerst der Projektname definiert. Danach gibt man benötigte oder optionale Abhängigkeiten an. CMake bringt für alle wichtigen Programme entsprechende <strong>FindXxx.cmake</strong>-Dateien mit. Diese liegen unter <strong>/usr/share/cmake-<em>X.X</em>/Modules</strong>. Falls man sehr exotische Bibliotheken benötigt, kann es aber vorkommen, dass diese nicht existieren. Mehr Informationen zu diesem Thema bietet das <a class="external" href="http://www.cmake.org/Wiki/CMake:How_To_Find_Installed_Software" rel="nofollow">CMake Wiki</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p><p>Nach den Abhängigkeiten werden zwei Unterordner eingebunden. In diesen müssen jeweils eigene <strong>CMakeLists.txt</strong>-Dateien liegen, welche die in diesen Unterordnern liegenden Programme oder Bibliotheken bauen. CMake löst dabei Abhängigkeiten selbst auf, allerdings sollten der Übersichtlichkeit und Verständlichkeit zuliebe die Ordner, die Abhängigkeiten für andere Teile des Programms beinhalten, auch hier zuerst genannt werden.</p><p>Mit dem Kommando in der letzten Zeile wird CMake angewiesen, die Dateien, die nicht automatisch gebaut werden, ebenfalls zu installieren. Installiert werden Dateien immer nach <code class="notranslate">${CMAKE_INSTALL_PREFIX}</code>, hier also in den Unterordner <strong>img</strong>. Die Definition für die Installation der in den Ordnern <strong>lib</strong> und <strong>src</strong> gebauten Programmteile erfolgt übrigens in den entsprechenden Dateien in den Unterordnern.</p><p>Verzeichnis <strong>lib</strong>
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="c"># Wenn diese Bibliothek zusätzliche includes benötigt, müssen diese</span>
<span class="c"># natürlich eingefügt werden.</span>

<span class="c"># Hier wird definiert, welche Quellcodedateien zur Bibliothek dazugehören.</span>
<span class="c"># Bei großen Projekten ist eine logische Unterteilung sinnvoll.</span>
<span class="nb">set</span><span class="p">(</span><span class="s">library_SRCS</span>
    <span class="s">library.cpp</span>
<span class="p">)</span>

<span class="c"># Es wird festgelegt, dass es sich um eine gemeinsam genutzt Bibliothek</span>
<span class="c"># handelt. Um eine statische Bibliothek zu bekommen, wird</span>
<span class="c"># SHARED durch STATIC ersetzt.</span>
<span class="nb">add_library</span> <span class="p">(</span><span class="s">library</span> <span class="s">SHARED</span> <span class="o">${</span><span class="nv">library_SRCS</span><span class="o">}</span><span class="p">)</span>

<span class="c"># Wenn nötig können auch Bibliotheken gegen andere gelinkt werden.</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">library</span>
    <span class="o">${</span><span class="nv">SOME_LIBRARY</span><span class="o">}</span>
<span class="p">)</span>

<span class="nb">install</span><span class="p">(</span><span class="s">TARGETS</span> <span class="s">library</span>
        <span class="s">RUNTIME</span> <span class="s">DESTINATION</span> <span class="s">bin</span>
        <span class="s">LIBRARY</span> <span class="s">DESTINATION</span> <span class="s">lib</span>
<span class="p">)</span>
</pre></div>
</td></tr></table></div><p>Hier werden das erste Mal die eigentlichen Quellcode-Dateien des Programms verwendet. Diese werden in einer Variable namens <code class="notranslate">library_SRCS</code> zusammengefasst. Es bietet sich an, logisch zusammengehörige Programmteile in verschiedene Variablen zu unterteilen, z.B. für Gui, Datenbank-Layer etc. Diese können später mittels eines <code class="notranslate">set(neuer_variablenName ${variable1} ${variable2})</code> zu einer zusammengefügt werden. Teilweise kann es aber auch sein, dass man mit bestimmten Teilen noch etwas Besonderes anstellen muss, z.B. müssen Gui-Beschreibungsdateien in nativen Code übersetzt werden, der dann mit übersetzt wird.</p><p>Nur für Bibliotheken wichtig ist der folgende Abschnitt, da hier festgelegt wird, um was für einen Bibliothekstyp es sich handelt. Mehr Informationen dazu gibt es in der Wikipedia: <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Programmbibliothek">Programmbibliothek</a>.</p><p>Wenn in dem Code weitere externe (oder auch zum Programm gehörende) Bibliotheken verwendet werden, müssen diese verlinkt werden. Weitere Informationen dazu gibt es ebenfalls in dem oben genannten Wikipedia-Artikel.</p><p>Zum Schluss wird noch angegeben, wo ausführbare Dateien (<code class="notranslate">RUNTIME</code>) und Bibliotheken (<code class="notranslate">LIBRARY</code>) installiert werden sollen. Hier gilt wie oben, dass die Unterordner in <code class="notranslate">${CMAKE_INSTALL_PREFIX}</code> erstellt werden.</p><p>Verzeichnis <strong>src</strong>
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="c"># Zusätzliche include-Verzeichnisse</span>
<span class="nb">include_directories</span><span class="p">(</span>
    <span class="o">${</span><span class="nv">CMAKE_SOURCE_DIR</span><span class="o">}</span><span class="s">/lib</span>
<span class="p">)</span>

<span class="c"># Hier wird definiert, welche Quellcodedateien zur Programmdatei dazugehören.</span>
<span class="c"># Bei großen Projekten ist eine logische Unterteilung sinnvoll.</span>
<span class="nb">set</span><span class="p">(</span><span class="s">beispiel_SRCS</span>
    <span class="s">main.cpp</span>
<span class="p">)</span>

<span class="c"># Die auführbare Datei. Anstatt der Variablen können</span>
<span class="c"># auch noch zusätzliche Dateien angegeben werden</span>
<span class="nb">add_executable</span> <span class="p">(</span><span class="s">beispiel</span> <span class="o">${</span><span class="nv">beispiel_SRCS</span><span class="o">}</span><span class="p">)</span>

<span class="c"># Die ausführbare Datei wird gegen diese Bibliotheken gelinkt.</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">beispiel</span>
    <span class="s">library</span>
<span class="p">)</span>

<span class="c"># Das Programm soll in den folgenden Unterordnern</span>
<span class="c"># installiert werden.</span>
<span class="nb">install</span><span class="p">(</span><span class="s">TARGETS</span> <span class="s">beispiel</span>
        <span class="s">RUNTIME</span> <span class="s">DESTINATION</span> <span class="s">bin</span>
        <span class="s">LIBRARY</span> <span class="s">DESTINATION</span> <span class="s">lib</span>
<span class="p">)</span>
</pre></div>
</td></tr></table></div><p>Hier wird das eigentliche Programm definiert. Zuerst muss festgelegt werden, dass die oben definierte Bibliothek auch gefunden wird. Dazu wird der Pfad angegeben. <code class="notranslate">${CMAKE_SOURCE_DIR}</code> beinhaltet dabei immer den Wurzelpfad des Projektes, in dem sich die erste <strong>CMakeLists.txt</strong> befindet, in diesem Fall also das übergeordnete Verzeichnis.</p><p>Der <code class="notranslate">add_executable()</code>-Befehl funktioniert wie der oben verwendete für Bibliotheken, nur dass hier nur der Name der ausführbaren Datei angegeben wird, sowie die Quellen, aus denen sie besteht. Danach wird die Datei gegen die Bibliothek gelinkt. Zuletzt wird auch die Programmdatei installiert.</p></div></div><div class="section_1"><h2 id="Projekte-die-CMake-verwenden">Projekte die CMake verwenden<a class="headerlink" href="#Projekte-die-CMake-verwenden">¶</a></h2><p>
Es gibt einige sehr bekannte Projekte, die CMake verwenden. Eine ausführliche Liste findet man im <a class="external" href="http://www.cmake.org/Wiki/CMake_Projects" rel="nofollow">CMake Wiki</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p><ul><li><p><a class="external" href="http://kde.org" rel="nofollow">KDE</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://www.compiz.org" rel="nofollow">Compiz</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://www.mysql.com/" rel="nofollow">MySQL</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><p>
</p></div><div class="section_1"><h2 id="Hilfreiche-Links">Hilfreiche Links<a class="headerlink" href="#Hilfreiche-Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://www.cmake.org/cmake/help/syntax.html" rel="nofollow">Einführung in die Syntax</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://www.cmake.org/Wiki/CMake" rel="nofollow">CMake Wiki</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p><ul><li><p><a class="external" href="http://www.cmake.org/Wiki/CMake_Useful_Variables" rel="nofollow">Nützliche Variablen</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://www.cmake.org/Wiki/CMake/Language_Syntax" rel="nofollow">Weiterführende Informationen zur Syntax</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul></li><li><p><a class="external" href="http://techbase.kde.org/Development/Tutorials/CMake_(de)" rel="nofollow">KDE Techbase Tutorial</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./cmake/a/revision/942806.html">Diese Revision</a> wurde am 29. Juli 2017 14:13 von <a href="https://ubuntuusers.de/user/Mot%C3%B6rhead80/">Motörhead80</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./cmake.html">CMake</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>