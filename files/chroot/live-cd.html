<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>chroot/Live-CD › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../chroot/live-cd.html">Live-CD</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/chroot/Live-CD">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../chroot/live-cd/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../chroot/live-cd/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../chroot/live-cd/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../chroot/live-cd/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../chroot/live-cd/a/backlinks.html">Live-CD</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../chroot.html">chroot bedienen</a> </p></li></ol></div></div><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Voraussetzungen">Voraussetzungen
</a></li><li><a class="crosslink" href="#Einrichtung">Einrichtung
</a></li><li><a class="crosslink" href="#Beenden">Beenden
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><strong>chroot</strong> kann benutzt werden, um von einer Live-CD/DVD in die Umgebung eines installierten Systems einzugreifen, beispielsweise für eine Reparatur. Jedes Live-System ist zur Reparatur geeignet - ob Ubuntu-<a class="internal" href="../desktop-cd.html">Desktop-CD</a>, Knoppix oder ein von einem USB-Stick gebootetem Linux.</p><p>Dieser Artikel beschreibt, wie man den Chroot-Systemwechsel mit <a class="crosslink" href="#Zusaetzliche-Schritte">zusätzlichen Schritten</a> vollzieht, so dass ein vollständiger Zugriff auf das System für Reparaturen möglich ist. Für einen einfachen Zugriff, zum Beispiel um die Ausgabe eines einzelnen Befehls zu überprüfen, können ggf. einzelne Schritte, wie das Einbinden von <strong>/sys</strong> und <strong>/proc</strong> ausgelassen werden.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Alle folgenden Befehle beziehen sich auf den Einsatz von Ubuntu bzw. eines Derivats als Live-System. Für andere Systeme können bestimmte Befehle oder Pfade ggf. abweichen.
</p></div></div><div class="section_1"><h2 id="Voraussetzungen">Voraussetzungen<a class="headerlink" href="#Voraussetzungen">¶</a></h2><p>
</p><ul><li><p>Es ist wichtig, dass die Systemarchitektur des Live-Systems mit der des installierten Ubuntu-Systems übereinstimmt. Es ist also nicht ohne weiteres möglich, sich mit Chroot und einer 32-Bit-Live-CD an einem 64-Bit-System anzumelden. Wird die gleiche CD wie zur Installation genutzt, so sollte es keine Probleme geben. Bei Unstimmigkeiten zw. Architektur und Live-System erhält man eine Fehlermeldung der folgenden Art: </p><pre class="notranslate">chroot: Befehl &gt;&gt;/bin/bash" konnte nicht ausgeführt werden: Fehler im Format der Programmdatei</pre></li><li><p>Dieser Artikel geht von einer Ubuntu-Standard-Installation als erstem System auf dem Rechner aus. Daher wird die Festplatte mit dem installierten Ubuntu als <strong>/dev/sda</strong> angesprochen, wofür bei anderer Installation ggf. andere Bezeichnungen anzugeben sind. Die nötigen Techniken zur Bedienung von <strong>chroot</strong> werden als bekannt vorausgesetzt <sup><a href="#source-1">[1]</a></sup>.</p></li></ul><p>
</p></div><div class="section_1"><h2 id="Einrichtung">Einrichtung<a class="headerlink" href="#Einrichtung">¶</a></h2><p>
Nach dem Start des Live-Systems muss die Partition mit dem installierten Ubuntu-System eingebunden werden. Wo das eigene Linux zu finden ist erfährt man mit dem Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">sudo parted -l </pre></div></div><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Falls man bei der Installation nicht nur das <a class="internal" href="../homeverzeichnis.html">Homeverzeichnis</a> verschlüsselt, sondern stattdessen die <a class="internal" href="../luks.html">Systemverschlüsselung (LUKS)</a> aktiviert hat, muss man das System nun <a class="internal" href="../luks.html#ffnen-von-LUKS-Geraeten-mit-Passwortabfrage">entschlüsseln</a>:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo cryptsetup luksOpen /dev/sdxY sdxY_crypt </pre></div></div><p>
Dabei sind die Bezeichnungen <code class="notranslate">xY</code> an die eigenen Gegebenheiten anzupassen. Wenn man nun den <code class="notranslate">parted</code>-Befehl wiederholt, erkennt man eine oder mehrere Ausgaben wie <code class="notranslate">Festplatte  /dev/mapper/sdxY_crypt</code>, wobei zusätzlich <code class="notranslate">vgubuntu</code> (sowie <code class="notranslate">vgubuntu-root</code> und <code class="notranslate">vgubuntu-swap</code>) erscheinen, wenn der Installer die Verschlüsselung mit <a class="internal" href="../lvm.html">LVM</a> ergänzt.</p><p>Im Folgenden weicht die Anleitung dann nur noch dadurch ab, dass nun anstelle von <code class="notranslate">/dev/sdxY</code> stattdessen das entsprechende <code class="notranslate">/dev/mapper/vgubuntu-root</code> (LUKS mit LVM) bzw. direkt das soeben durch die Entsperrung erzeugte <code class="notranslate">/dev/mapper/sdxY_crypt</code> (Beispiel ohne LVM) genutzt werden muss.</p><p>Wichtig ist, dass man im Chroot für viele Aktionen den selben Namen verwenden muss, welcher bereits im System, in welches man wechseln möchte, in der Datei <code class="notranslate">/etc/crypttab</code> hinterlegt wurde, ansonsten schlagen manche Aktionen wie <code class="notranslate">sudo update-initramfs -u -k all</code> fehl, indem man beim nächsten Bootvorgang das Gerät nicht einhängen kann und im <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Initramfs">Initramfs</a> landet, wo es zudem auch keinen Editor gibt, um das schnell ohne erneuten Chroot  korrigieren zu können. Wenn man den Namen nicht mehr weiß, kann man zunächst unter einem anderen Namen entschlüsseln, nachsehen, die Verschlüsselung wieder schließen und erneut, aber unter dem richtigen Namen, einhängen.
</p></div></div><p>Es muss für ein <a class="internal" href="../ext.html">ext</a>-formatiertes System der Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount /dev/sdxY /mnt </pre></div></div><p>bzw. bei einem <a class="internal" href="../btrfs.html">btrfs</a>-formatierten System:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount -o subvol=@ /dev/sdxY /mnt </pre></div></div><p>ausgeführt werden, dabei sind die Bezeichnungen <code class="notranslate">xY</code> an die eigenen Gegebenheiten anzupassen. 
Nutzt das System eine separate boot-Partition, so muss diese mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount /dev/sdzY /mnt/boot </pre></div></div><p>eingebunden werden. Auch hier sind die Bezeichnungen <code class="notranslate">zY</code> an die eigenen Gegebenheiten anzupassen. Bei einer normalen Installation ist diese Partition nicht vorhanden, und somit dieser letzte Befehl nicht erforderlich.</p><p>Nutzt man auf seinem Rechner das (U)<a class="internal" href="../efi.html">EFI</a>-Bootverfahren, so muss für vollen Zugriff (sogar zusätzlich zu einer eventuell bereits vorhandenen <strong>/boot</strong>-Partition von Ubuntu, etwa bei <a class="internal" href="../luks.html">LUKS</a>-Verschlüsselung) die <strong>/boot/efi</strong>-Bootpartition aller installierten Betriebssysteme vorab eingehängt werden mit: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount /dev/sdwY /mnt/boot/efi </pre></div></div><p>
Auch hier sind die Bezeichnungen <code class="notranslate">wY</code> an die eigenen Gegebenheiten anzupassen. Dies ist eine Partition, die im ersten Schritt mit <code class="notranslate">parted</code> am <a class="internal" href="../dateisystem.html">Dateisystem</a> <code class="notranslate">vfat</code> oder einem Hinweis zu EFI erkennbar ist.</p><div class="section_2"><h3 id="Zusaetzliche-Schritte">Zusätzliche Schritte<a class="headerlink" href="#Zusaetzliche-Schritte">¶</a></h3><p>
Vor dem Wechsel in das installierte System muss gegebenenfalls diesem der Zugriff auf wichtige Systeminformationen zugesichert werden. Man bindet dazu das Verzeichnis mit den Gerätedateien <a class="internal" href="../verzeichnisstruktur.html#dev">/dev</a> innerhalb des installierten Systems ein:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount --bind /dev /mnt/dev
sudo mount --bind /dev/pts /mnt/dev/pts </pre></div></div><p>Ähnlich verfährt man mit dem Schnittstellendateisystem <a class="internal" href="../verzeichnisstruktur.html#proc">/proc</a> und dem System-Verzeichnis <a class="internal" href="../verzeichnisstruktur.html#sys">/sys</a>. Diese werden mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount --bind /sys /mnt/sys
sudo mount --bind /proc /mnt/proc </pre></div></div><p>
eingebunden.</p><p>Weiterhin muss <a class="internal" href="../verzeichnisstruktur.html#run">/run</a> eingebunden werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount --bind /run /mnt/run </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Der folgende Einzeiler hängt diese notwendigen Systemverzeichnisse in einem Aufruf ein:
</p><div class="bash"><div class="contents"><pre class="notranslate">for dir in /dev /dev/pts /proc /sys /run; do sudo mount --bind $dir /mnt/$dir; done </pre></div></div><p>
</p></div></div><p><a class="internal" href="../mount.html">Gemountete</a> <a class="internal" href="../datenträger.html">Datenträger</a> können optional eingebunden werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo cp /proc/mounts /mnt/etc/mtab </pre></div></div><p>Um die Internetverbindung sicherzustellen, werden u.U. die <a class="internal" href="../interfaces.html#DNS-Server-angeben">DNS-Server-Angaben</a> benötigt. Diese kopiert man mit:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount -o bind /etc/resolv.conf /mnt/etc/resolv.conf </pre></div></div></div><div class="section_2"><h3 id="System-Wechsel">System-Wechsel<a class="headerlink" href="#System-Wechsel">¶</a></h3><p>
Es erfolgt der Wechsel in das installierte System:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chroot /mnt /bin/bash </pre></div></div><p>Nun kann die Reparatur des installierten System vorgenommen werden.</p></div></div><div class="section_1"><h2 id="Beenden">Beenden<a class="headerlink" href="#Beenden">¶</a></h2><p>
Abschließend verlässt man die Chroot-Umgebung mit <code class="notranslate">exit</code> und kann, sofern man nichts anderes mehr mit dem Live-System machen möchte, das System mit <code class="notranslate">sudo reboot</code> neu starten.</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="../chroot/persistente-installation.html">chroot/persistente-Installation</a> - in persistente Installation einloggen</p></li><li><p><a class="external" href="http://www.linux-community.de/Internal/Artikel/Print-Artikel/EasyLinux/2011/02/Tipps-und-Tricks-zu-Knoppix-und-Ubuntu/%28printView%29/true" rel="nofollow">Knoppix als Live-System</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Einsatz von Knoppix zur Wiederherstellung des Boot-Loaders</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../chroot/live-cd/a/revision/945945.html">Diese Revision</a> wurde am 2. Januar 2018 19:18 von <a href="https://ubuntuusers.de/user/BillMaier/">BillMaier</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../chroot.html">chroot</a></li>
<li><a href="../chroot/live-cd.html">Live-CD</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>