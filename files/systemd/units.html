<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>systemd/Units › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../systemd/units.html">Units</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/systemd/Units">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../systemd/units/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../systemd/units/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../systemd/units/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../systemd/units/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../systemd/units/a/backlinks.html">Units</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="../xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../sudo.html">Root-Rechte</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../editor.html">Einen Editor öffnen</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Benutzung">Benutzung
</a><ol class="arabic"><li><a class="crosslink" href="#Eigene-Units-anlegen">Eigene Units anlegen
</a><ol class="arabic"><li><a class="crosslink" href="#Optionen-fuer-die-Unit-Sektion">Optionen für die [Unit]-Sektion
</a></li><li><a class="crosslink" href="#Install-WantedBy-Arten">[Install]: WantedBy-Arten
</a></li></ol></li><li><a class="crosslink" href="#Selbst-angelegte-Units-aktivieren">Selbst angelegte Units aktivieren
</a><ol class="arabic"><li><a class="crosslink" href="#Bestehende-Unit-editieren">Bestehende Unit editieren
</a></li></ol></li></ol></li><li><a class="crosslink" href="#Links">Links
</a><ol class="arabic"><li><a class="crosslink" href="#intern">intern
</a></li><li><a class="crosslink" href="#extern">extern
</a></li></ol></li></ol></div><p>In <a class="internal" href="../systemd.html">systemd</a> ist eine Organisationseinheit eine "Unit" (auf Deutsch: Einheit). Units werden z.B. für Dienste, Timer, Einhängepunkte, Sockets, Swap-Speicher und Geräte (devices) erstellt.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Da systemd seit Ubuntu 15.04 integraler Bestandteil des Systems ist (und dieses ohne systemd nicht lauffähig ist), sind alle benötigten Komponenten bereits installiert.</p></div><div class="section_1"><h2 id="Benutzung">Benutzung<a class="headerlink" href="#Benutzung">¶</a></h2><p>
Dateien für Units sind unter Ubuntu an zwei Stellen im Dateisystem abgelegt:
</p><ul><li><p><strong>/lib/systemd/system</strong>: Hier liegen alle Dateien von Units, welche durch Dienste systemweit vorinstalliert worden sind. Diese Dateien sollten nie editiert werden.</p></li><li><p><strong>/etc/systemd/system</strong>: hier liegen alle Dateien von Units, welche durch den Nutzer angelegt oder editiert werden. Dazu sind Root-Rechte<sup><a href="#source-1">[1]</a></sup> erforderlich.</p></li></ul><p>
Es existieren verschiedene Typen von Units, die von systemd je nach Endung des Dateinamens unterschiedlich behandelt werden:</p><p>
</p><table><tr class="kopf"><td>Typ </td><td> Beschreibung </td><td> Wiki-Artikel </td></tr><tr><td> <code class="notranslate">.device</code> </td><td> Legt Gerätedateien an </td></tr><tr><td> <code class="notranslate">.mount</code> </td><td> Ein- und Aushängen von <a class="internal" href="../mount.html">Dateisystemen</a> </td><td> <a class="internal" href="../systemd/mount_units.html">Mount Units</a> </td></tr><tr><td> <code class="notranslate">.path</code> </td><td> Startet die Unit via <a class="internal" href="../inotify.html">inotify</a> </td></tr><tr><td> <code class="notranslate">.network</code> </td><td> Für die Konfiguration von Netzwerken  </td><td> <a class="internal" href="../systemd/networkd.html">networkd</a> </td></tr><tr><td> <code class="notranslate">.service</code> </td><td> Für <a class="internal" href="../dienste.html">Dienste</a> </td><td> <a class="internal" href="../systemd/service_units.html">Service Units</a> </td></tr><tr><td> <code class="notranslate">.socket</code> </td><td> Stellt Verbindungen zwischen Prozessen her </td></tr><tr><td> <code class="notranslate">.target</code> </td><td> Definiert eine Gruppe von Units </td></tr><tr><td> <code class="notranslate">.timer</code> </td><td> Für wiederkehrende Aufgaben, ähnlich <a class="internal" href="../cron.html">cron</a>-Jobs </td><td> <a class="internal" href="../systemd/timer_units.html">Timer Units</a>. </td></tr></table><div class="section_2"><h3 id="Eigene-Units-anlegen">Eigene Units anlegen<a class="headerlink" href="#Eigene-Units-anlegen">¶</a></h3><p>
Units bestehen normalerweise aus einer einzelnen Datei. Diese hat eine Syntax und einen Aufbau ähnlich wie <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Initialisierungsdatei">INI-Dateien</a>. Das heißt, dass eckige Klammern Abschnitte ("sections") innerhalb der Datei markieren und innerhalb dieser Schlüssel-Werte-Paare angegeben werden.</p><p>Die allgemeine Struktur einer Unit-Datei sieht wie folgt aus:</p><pre class="notranslate">[Unit]
Description=Meine Unit

[&lt;UNIT-TYP&gt;]
# spezielle Schlüssel-Wert-Paare für den entsprechenden Unit-Typ

[Install]
WantedBy=multi-user.target</pre><p>Es gibt also drei Sektionen:</p><ul><li><p><em>"[Unit]"</em>: Der Schlüssel <code class="notranslate">Description</code> enthält den Namen der Unit. Meist kann dieser frei gewählt werden (Ausnahmen werden im Artikel der jeweiligen Unit behandelt.) Der Name sollte aber aussagekräftig sein, damit man - bspw. bei der Definition von Abhängikeiten - den Überblick behält.</p></li></ul><p>
</p><ul><li><p><em>"[&lt;UNIT-TYP&gt;]"</em>: Hier wird als Schlüssel der Typ der Unit eingetragen (siehe Tabelle oben). In diesem Abschnitt folgen Schlüssel-Wert-Paare für den entsprechenden Unit-Typ.</p></li></ul><p>
</p><ul><li><p><em>"[Install]"</em>: Der Schlüssel <code class="notranslate">WantedBy</code> legt fest, wann die Unit gestartet wird, was den früheren "run levels" entspricht. Der Wert <code class="notranslate">multi-user.target</code> ist dabei der Standard für ein Mehrbenutzersystem (auch ohne grafische Oberfläche, wie z.B. Server).</p></li></ul><p>
Gerade beim Anlegen eigener Units ist zu beachten, dass die Schlüssel immer mit Großbuchstaben beginnen und in <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Binnenmajuskel">CamelCase</a>-Schreibweise geschrieben werden.</p><div class="section_3"><h4 id="Optionen-fuer-die-Unit-Sektion">Optionen für die [Unit]-Sektion<a class="headerlink" href="#Optionen-fuer-die-Unit-Sektion">¶</a></h4><p>
In der Sektion <em>"[Unit]"</em> können unter anderem folgende Schlüssel eingefügt werden:</p><p>
</p><table><tr class="kopf"><td>Schlüssel </td><td> Erklärung </td></tr><tr><td> <code class="notranslate">Description</code> </td><td> Ein aussagekräftiger Name für die Unit. Dieser Schlüssel ist Pflicht. </td></tr><tr><td> <code class="notranslate">Requires</code> </td><td> Hier kann hinterlegt werden, welche andere Unit mit gestartet wird, wenn die eigene Unit gestartet wird. Wird <code class="notranslate">Requires</code> nicht erfüllt, startet die eigene Unit nicht.  </td></tr><tr><td> <code class="notranslate">Requisite</code> </td><td> Eine Variante zu <code class="notranslate">Requires</code>: Ist die hier angegebe Unit nicht bereits gestartet, startet die eigene Unit nicht und endet mit einem Fehler. </td></tr><tr><td> <code class="notranslate">BindsTo</code> </td><td> Dies ist die "harte" Variante von <code class="notranslate">Requires</code>. Wird die hier hinterlegte Unit gestoppt, stoppt auch die eigene Unit. </td></tr><tr><td> <code class="notranslate">Wants</code> </td><td> Dies ist die "schwache" Variante von <code class="notranslate">Requires</code>. Es wird zuerst geprüft, ob die bei <code class="notranslate">Wants</code> eingetragene Unit läuft oder gestartet werden kann, dann wird die eigene Unit gestartet. Schlägt der Start der andere Unit fehlt (oder wird diese gestoppt), läuft die eigene Unit aber trotzdem (weiter). </td></tr><tr><td> <code class="notranslate">Before</code> </td><td> Legt fest, dass die eigene Unit vor den in <code class="notranslate">Before</code> eingetragenen Units gestartet werden soll. </td></tr><tr><td> <code class="notranslate">After</code> </td><td> Legt fest, dass die eigene Unit nach den in <code class="notranslate">After</code> eingetragenen Units gestartet werden soll. </td></tr></table><p>Bei <code class="notranslate">Requires</code>, <code class="notranslate">Wants</code> etc. können auch mehrere Werte zu dem Schlüssel hinterlegt werden. Die Werte müssen dann durch ein Leerzeichen getrennt sein, also z.B. <code class="notranslate">Requires=mysql.service apache2.service</code>.</p><p>Eine vollständige Übersicht über alle möglichen Schlüssel mit ausführlicher Erklärung ist in der <a class="external" href="http://www.freedesktop.org/software/systemd/man/systemd.unit.html#%5BUnit%5D%20Section%20Options" rel="nofollow">Dokumentation</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> von systemd zu finden.</p></div><div class="section_3"><h4 id="Install-WantedBy-Arten">[Install]: WantedBy-Arten<a class="headerlink" href="#Install-WantedBy-Arten">¶</a></h4><p>
Im Abschnitt <em>"[Install]"</em> wird mit dem Schlüssel <code class="notranslate">WantedBy</code> angegeben, wann die Unit gestartet wird. Es sind verschiedene Werte möglich:</p><p>
</p><table><tr class="kopf"><td>Target </td><td> Beschreibung </td></tr><tr><td> <code class="notranslate">multi-user.target</code> </td><td> für Mehrbenutzersystem, mit oder ohne grafische Anmeldung (entspricht Runlevel 3) </td></tr><tr><td> <code class="notranslate">graphical.target</code> </td><td> für Mehrbenutzersystem, die aber eine grafische Anmelde-Oberfläche haben müssen (entspricht Runlevel 3 plus grafischer Anmeldung) </td></tr><tr><td> <code class="notranslate">rescue.target</code> </td><td> Einzelnutzer-Modus, wird in der Regel nur zur Systemrettung benötigt (entspricht Runlevel 1) </td></tr><tr><td> <code class="notranslate">reboot.target</code> </td><td> Unit wird nur bei einem Neustart des Systems ausgeführt </td></tr><tr><td> <code class="notranslate">poweroff.target</code> </td><td> Unit wird nur beim Herunterfahren des Systems ausgeführt </td></tr></table><p>Eine vollständige Übersicht über alle Targets inklusive Erklärung ist in der <a class="external" href="http://www.freedesktop.org/software/systemd/man/systemd.special.html" rel="nofollow">Dokumentation</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> von systemd zu finden.</p></div></div><div class="section_2"><h3 id="Selbst-angelegte-Units-aktivieren">Selbst angelegte Units aktivieren<a class="headerlink" href="#Selbst-angelegte-Units-aktivieren">¶</a></h3><p>
Hat man eine eigene Unit angelegt, muss man diese noch aktivieren. Diese geschieht über den Befehl <a class="internal" href="../systemd/systemctl.html">systemctl</a> mit Root-Rechten<sup><a href="#source-1">[1]</a></sup><sup><a href="#source-2">[2]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo systemctl enable NAME_DER_UNIT_DATEI </pre></div></div><p>Zum Deaktivieren dient der Befehl:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo systemctl disable NAME_DER_UNIT_DATEI </pre></div></div><p>Um zu prüfen, ob eine Unit aktiv ist, führt man folgenden Befehl aus:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo systemctl is-enabled NAME_DER_UNIT_DATEI </pre></div></div><div class="section_3"><h4 id="Bestehende-Unit-editieren">Bestehende Unit editieren<a class="headerlink" href="#Bestehende-Unit-editieren">¶</a></h4><p>
Mit dem Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">sudo systemctl edit --full NAME_DER_UNIT_DATEI </pre></div></div><p>wird eine Kopie der Unit-Datei aus <strong>/lib/systemd/system</strong> im Verzeichnis <strong>/etc/systemd/systemd</strong> angelegt, und der Standardeditor des Systems öffnet diese Datei zum Editieren. Nach dem Speichern und Schließen des Editors wird die Unit automatisch neu geladen.</p><p>Liegen unter <strong>/etc/systemd/systemd</strong> Unit-Dateien mit dem gleichen Namen wie unter <strong>/lib/systemd/system</strong>, so wird denen aus <strong>/etc/systemd/systemd</strong> der Vorzug gegeben, d.h. diese werden vom System geladen.</p></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><div class="section_2"><h3 id="intern">intern<a class="headerlink" href="#intern">¶</a></h3><p>
</p><ul><li><p><a class="internal" href="../systemd/systemd-analyze.html">systemd-analyze</a> - den Startvorgang des Systems und der Units analysieren und ggf. optimieren</p></li><li><p><a class="internal" href="../systemd/service_units.html">systemd/Service Units</a></p></li></ul><p>
</p></div><div class="section_2"><h3 id="extern">extern<a class="headerlink" href="#extern">¶</a></h3><p>
</p><ul><li><p><a class="external" href="http://www.freedesktop.org/wiki/Software/systemd/" rel="nofollow">systemd Wiki</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Dokumentation</p></li></ul><p></p></div></div></div>
<p class="meta">
<a href="../systemd/units/a/revision/945850.html">Diese Revision</a> wurde am 30. Dezember 2017 00:20 von <a href="https://ubuntuusers.de/user/BillMaier/">BillMaier</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../systemd.html">systemd</a></li>
<li><a href="../systemd/units.html">Units</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>