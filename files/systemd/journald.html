<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>systemd/journald › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../systemd/journald.html">journald</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/systemd/journald">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../systemd/journald/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../systemd/journald/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../systemd/journald/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../systemd/journald/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../systemd/journald/a/backlinks.html">journald</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="../xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../sudo.html">Root-Rechte</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../editor.html">einen Editor öffnen</a></p></li></ol></div></div><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Konfiguration">Konfiguration
</a><ol class="arabic"><li><a class="crosslink" href="#Speichereinstellung-fuer-das-Journal-aendern">Speichereinstellung für das Journal ände...</a></li><li><a class="crosslink" href="#Zusaetzliche-Journal-Dateien-pro-Benutzer">Zusätzliche Journal-Dateien pro Benutzer...</a></li><li><a class="crosslink" href="#Weiterleitung-der-Logs-an-syslog">Weiterleitung der Logs an syslog
</a></li></ol></li><li><a class="crosslink" href="#Journal-Datei-auslesen">Journal-Datei auslesen
</a><ol class="arabic"><li><a class="crosslink" href="#journalctl">journalctl
</a></li><li><a class="crosslink" href="#strings-und-grep">strings und grep
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>journald ist die Service Unit von <a class="internal" href="../systemd.html">systemd</a>, die für das <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Logging">Logging</a> in das zentrale Journal zuständig ist. Standardmäßig werden dort die Logmeldungen des Kernels, des Systems, der <a class="internal" href="../systemd/service_units.html">Service Units</a> als auch von <a class="internal" href="../shell/umleitungen.html#stdin-stdout-stderr-Kanaele-der-Bash">stdout</a> und <a class="internal" href="../shell/umleitungen.html#stdin-stdout-stderr-Kanaele-der-Bash">stderr</a> gesammelt.</p><p>Die Logmeldungen werden standardmäßig in der Datei <strong>system.journal</strong> gespeichert, die bei Ubuntu im Verzeichnis <strong>/run/log/journal/UUID_DES_VERZEICHNISSES</strong> gespeichert wird. Die <code class="notranslate">UUID_DES_VERZEICHNISSES</code> variiert dabei von System zu System. Aktiviert man die <a class="crosslink" href="#Speichereinstellung-fuer-das-Journal-aendern">persistente Speicherung</a> der Logdateien, dann ändert sich der Speicherort zu <strong>/var/log/journal/UUID_DES_VERZEICHNISSES</strong>. Je nach Einstellung wird zusätzlich für jeden angemeldeten Benutzer eine Journald-Datei angelegt, siehe den entsprechenden Abschnitt dazu <a class="crosslink" href="#zusaetzliche-Journal-Dateien-pro-Benutzer">weiter unten</a>.</p><p>journald kümmert sich selber um die <a class="interwiki interwiki-wikipedia_en" href="https://en.wikipedia.org/wiki/Logrotation">Logrotation</a>. Standardmäßig erfolgt dies in Abhängigkeit von der Größe der Logdatei, wobei man in der Konfiguration auch eine zeit-basierte Logrotation umstellen kann.</p><p>Des Weiteren verwenden die Journaldateien ein binäres Format zum Speichern der Daten. Zum Auslesen der Daten gibt es <a class="crosslink" href="#Journal-Datei-auslesen">verschiedene Möglichkeiten</a>.</p><p>Zusätzlich schützt journald die Journaleinträge gegen Manipulation durch eine Technik namens "Forward Secure Sealing". Dadurch wird es z.B. unerwünschten Eindringlingen ins eigene System erschwert, ihre Spuren durch Manipulation der Logeinträge zu verschleiern.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Da systemd ab Ubuntu 15.04 integraler Bestandteil des Systems ist (und dieses ohne systemd nicht lauffähig ist), sind alle benötigten Komponenten bereits installiert.</p></div><div class="section_1"><h2 id="Konfiguration">Konfiguration<a class="headerlink" href="#Konfiguration">¶</a></h2><p>
Möchte man die Einstellung von journald ändern, muss die Datei <strong>/etc/systemd/journald.conf</strong> mit einem Editor<sup><a href="#source-2">[2]</a></sup> und Root-Rechten<sup><a href="#source-3">[3]</a></sup> bearbeitet werden.</p><p>In der Datei sind alle Default-Konfigurationswerte von journald in Form von auskommentierten Einträgen hinterlegt. Zum Ändern eines Konfigurationspunkts ändert man einfach den entsprechenden Wert und entfernt das Kommentarzeichen <code class="notranslate">#</code> am Zeilenanfang. Nach einem Neustart des Rechners läuft journald mit der geänderten Konfiguration.</p><p>Eine komplette Übersicht inklusive Erklärung zu den Konfigurationsmöglichkeiten findet man in der <a class="external" href="http://www.freedesktop.org/software/systemd/man/journald.conf.html" rel="nofollow">Dokumentation</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> oder in der <a class="internal" href="../man.html">Manpage</a> namens <strong>journald.conf</strong>.</p><div class="section_2"><h3 id="Speichereinstellung-fuer-das-Journal-aendern">Speichereinstellung für das Journal ändern<a class="headerlink" href="#Speichereinstellung-fuer-das-Journal-aendern">¶</a></h3><p>
Wie (und ob) das Journal gespeichert wird, wird über den Wert des Schlüssels <code class="notranslate">Storage</code> geregelt. Unter Ubuntu ist der Standardwert <code class="notranslate">auto</code>. Dabei wird die Journal-Datei im Verzeichnis<strong>/run/log/UUID_DES_VERZEICHNISSES/</strong> angelegt und geht nach dem Herunterfahren des Systems verloren.</p><p>Damit die Journaldateien - und damit alle Logs - für längere Zeit gespeichert werden, gibt es zwei Möglichkeiten:</p><ol class="arabic"><li><p>Man legt das Verzeichnis <strong>/var/log/journal/</strong> an. Nach dem Neustart des Systems wird die Journal dort gespeichert und bleibt somit auch nach einem Neustart des Systems bestehen.</p></li><li><p>Man ändert in der Konfigurationsdatei den Wert die Zeile </p><div><div class="contents"><pre class="notranslate">Storage=auto </pre></div></div><p> auf </p><div><div class="contents"><pre class="notranslate">Storage=persistent </pre></div></div><p> Nach einem Neustart des Systems wird der Ordner <strong>/var/log/journal/</strong> automatisch angelegt und das Journal wird dort dauerhaft gespeichert.</p></li></ol><p>
Hat man die erste Möglichkeit gewählt, so kehrt man zum nicht-dauerhaften Journal zurück, in dem man das händisch angelegte Verzeichnis löscht und dann den Rechner neu starten.</p><p>Möchte man keine Journaldatei anlegen und somit das Logging komplett deaktivieren (nicht empfohlen!), muss man für den Schlüssel <code class="notranslate">Storage</code> den Wert <code class="notranslate">none</code> eintragen.</p></div><div class="section_2"><h3 id="Zusaetzliche-Journal-Dateien-pro-Benutzer">Zusätzliche Journal-Dateien pro Benutzer<a class="headerlink" href="#Zusaetzliche-Journal-Dateien-pro-Benutzer">¶</a></h3><p>
Ist das <a class="crosslink" href="#Speichereinstellung-fuer-das-Journal-aendern">persistente Speichern</a> des Journals aktiviert, wird zusätzlich zur Journal-Datei <strong>system.journal</strong> eine <strong>.journal</strong>-Datei für jeden Benutzer angelegt. Diese folgen dem Namensschema <strong>user-XXXX.journal</strong>, wobei <code class="notranslate">XXXX</code> die Nutzer-ID (UID) auf dem System ist. Der 1. angelegte Benutzer hat bei Ubuntu die Nummer <code class="notranslate">1000</code>, der zweite <code class="notranslate">1001</code> usw. In diesen Journal-Dateien werden dann nur die Logs gesammelt, die nur durch den Benutzer (und nicht das System) generiert werden.</p></div><div class="section_2"><h3 id="Weiterleitung-der-Logs-an-syslog">Weiterleitung der Logs an syslog<a class="headerlink" href="#Weiterleitung-der-Logs-an-syslog">¶</a></h3><p>
In der Standardkonfiguration von journald unter Ubuntu werden die Logs, welches ins zentrale Journal geschrieben werden, zusätzlich an <a class="external" href="http://www.rsyslog.com/" rel="nofollow">rsyslog</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> weiter geleitet, welches die traditionelle Logdatei <strong>/var/log/syslog</strong> anlegt. Die Weiterleitung erfolgt über den Socket <strong>/run/systemd/journal/syslog</strong>.</p><p>Um das Weiterleiten zu deaktivieren, muss man in der Konfigurationsdatei von journald den Schlüssel <code class="notranslate">ForwardToSyslog</code> auf <code class="notranslate">no</code> setzen.</p><p>Zu beachten ist, dass die Weiterleitung an syslog unabhängig von dem gesetzten Werte für <code class="notranslate">Storage</code> ist. D.h. bei <code class="notranslate">Storage=none</code> und <code class="notranslate">ForwardToSyslog=yes</code> werden trotzdem alle Meldungen im syslog gespeichert.</p></div></div><div class="section_1"><h2 id="Journal-Datei-auslesen">Journal-Datei auslesen<a class="headerlink" href="#Journal-Datei-auslesen">¶</a></h2><p>
</p><div class="section_2"><h3 id="journalctl">journalctl<a class="headerlink" href="#journalctl">¶</a></h3><p>
journalctl ist das Standardwerkzeug zum Auslesen und Anzeige der Journaldatei. Mehr Informationen sind im separaten Artikel <a class="internal" href="../systemd/journalctl.html">journalctl</a> zu finden.</p></div><div class="section_2"><h3 id="strings-und-grep">strings und grep<a class="headerlink" href="#strings-und-grep">¶</a></h3><p>
Auch wenn die Logdateien in einem Binärformat gespeichert werden, sind darin gespeicherten Meldungen unverändert als Zeichenketten abgelegt und lassen sich mit dem Werkzeug <code class="notranslate">strings</code> (enthalten im Paket <strong>binutils</strong>) und <a class="internal" href="../grep.html">grep</a> auch ohne journalctl herausfiltern:</p><div class="bash"><div class="contents"><pre class="notranslate">strings /pfad/zum/system.journal | grep -i SUCHBEGRIFF </pre></div></div><p>
(der Pfad ist meist ein Unterordner von /run/log/journal/)</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="https://www.freedesktop.org/software/systemd/man/journald.conf.html" rel="nofollow">Dokumentation</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> zu journald.conf</p></li><li><p><a class="crosslink" href="../wiki/tags/systemd.html">Artikelliste</a> zu systemd hier im Wiki</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../systemd/journald/a/revision/938527.html">Diese Revision</a> wurde am 30. April 2017 09:18 von <a href="https://ubuntuusers.de/user/u1000/">u1000</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../systemd.html">systemd</a></li>
<li><a href="../systemd/journald.html">journald</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>