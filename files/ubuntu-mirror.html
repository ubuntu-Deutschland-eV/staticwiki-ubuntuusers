<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Ubuntu-Mirror › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./ubuntu-mirror.html">Ubuntu-Mirror</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Ubuntu-Mirror">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./ubuntu-mirror/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./ubuntu-mirror/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./ubuntu-mirror/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./ubuntu-mirror/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./ubuntu-mirror/a/backlinks.html">Ubuntu-Mirror</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><div class="box advanced"><h3 class="box advanced">Artikel für fortgeschrittene Anwender</h3><div class="contents"><p>
Dieser Artikel erfordert mehr Erfahrung im Umgang mit
Linux und ist daher nur für fortgeschrittene Benutzer
gedacht.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./apache.html">Installation von Apache</a> </p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="./sudo.html">Programme als Adminstrator ausführen</a> </p></li><li><p><a class="crosslink anchor" href="#source-6" id="source-6"></a> <a class="internal" href="./rechte.html">Rechte für Dateien und Ordner ändern</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Vorbereitungen">Vorbereitungen
</a><ol class="arabic"><li><a class="crosslink" href="#Benutzer-und-Gruppe">Benutzer und Gruppe
</a></li><li><a class="crosslink" href="#Verzeichnisse">Verzeichnisse
</a></li><li><a class="crosslink" href="#Skripte">Skripte
</a></li><li><a class="crosslink" href="#Schluessel-importieren">Schlüssel importieren
</a></li></ol></li><li><a class="crosslink" href="#Benutzung">Benutzung
</a><ol class="arabic"><li><a class="crosslink" href="#Spiegeln">Spiegeln
</a></li><li><a class="crosslink" href="#Lokal">Lokal
</a></li><li><a class="crosslink" href="#Zugriff">Zugriff
</a></li><li><a class="crosslink" href="#Regelmaessige-Aktualisierung">Regelmäßige Aktualisierung
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>Ziel des Artikels ist die Einrichtung eines Spiegels (im englischen "Mirror" genannt) für die offiziellen Paketquellen einer bestimmten Ubuntu-Version, bei dem die Pakete über einen Web- oder Dateiserver abgerufen werden können.</p><p>Dabei sollen die vier Paketquellen (hier Ubuntu 12.04 mit -Updates, -Security und -<a class="internal" href="./paketquellen.html">Backports</a>) mit allen verfügbaren Komponenten (<em>main</em>, <em>restricted</em>, <em>universe</em>, <em>multiverse</em>) als <a class="internal" href="./paketquellen.html">Paketquellen</a> benutzt werden. Die Verwendung dieses Artikels mit anderen Ubuntu-Versionen funktioniert analog. Für einen Spiegel ist es sinnvoll, einen Root-Server zu nutzen.</p><p>In kleineren Netzwerken und auf Servern mit schmaler Anbindung bzw. im Heimgebrauch ist meist ein <a class="internal" href="./lokale_paketquellen.html#Proxies-Caches-Buendeln-von-Updates">Proxy/Cache</a> vollkommen ausreichend.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Folgende Pakete müssen installiert <sup><a href="#source-1">[1]</a></sup> werden:</p><ul><li><p><strong>debmirror</strong></p></li><li><p><strong>ubuntu-keyring</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install debmirror ubuntu-keyring </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install debmirror ubuntu-keyring </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="Vorbereitungen">Vorbereitungen<a class="headerlink" href="#Vorbereitungen">¶</a></h2><p>
</p><div class="section_2"><h3 id="Benutzer-und-Gruppe">Benutzer und Gruppe<a class="headerlink" href="#Benutzer-und-Gruppe">¶</a></h3><p>
Für debmirror wird der Benutzer <code class="notranslate">mirror</code> und die gleichnamige Gruppe angelegt.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo groupadd mirror
sudo useradd -g mirror -d /var/www/mirror -c "Ubuntu Mirror" mirror </pre></div></div></div><div class="section_2"><h3 id="Verzeichnisse">Verzeichnisse<a class="headerlink" href="#Verzeichnisse">¶</a></h3><p>
Für die Paketquellen werden einzelne Verzeichnisse angelegt und dem Benutzer und der Gruppe <code class="notranslate">mirror</code> zu gewiesen.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mkdir -p /var/www/mirror/ubuntu
sudo mkdir /var/www/mirror/ubuntu-security
sudo mkdir /var/www/mirror/ubuntu-updates
sudo mkdir /var/www/mirror/ubuntu-backports
sudo chown -R mirror:mirror /var/www/mirror </pre></div></div></div><div class="section_2"><h3 id="Skripte">Skripte<a class="headerlink" href="#Skripte">¶</a></h3><p>
Um das Spiegeln zu vereinfachen, ist der Einsatz von Skripten sinnvoll. Hier sind Skripte zum Spiegeln der Quellen von <a class="internal" href="./precise.html">Ubuntu 12.04</a> aufgeführt, die dazu benutzt werden können. Die Verwendung der Skripte mit anderen Ubuntu-Versionen funktioniert analog. Dazu muss bei der Option "<code class="notranslate">--dist=...</code>" <code class="notranslate">precise</code> durch <code class="notranslate">trusty</code> oder <code class="notranslate">xenial</code> usw. ersetzt werden.</p><p>Der Befehl <code class="notranslate">logger -t</code> in den Skripten sorgt für einen Eintrag im <strong>syslog</strong> (siehe auch <a class="internal" href="./logger.html">logger</a>).</p><ul><li><p><strong>/var/www/mirror/bin/mirror-ubuntu.bash</strong>: </p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#</span>
<span class="c1"># Spiegelt die Haupt-Ubuntu-Repostiories fuer Ubuntu 12.04</span>
<span class="c1">#</span>
logger -t mirror-ubuntu.bash<span class="o">[</span><span class="nv">$$</span><span class="o">]</span> Updating Ubuntu
debmirror /var/www/mirror/ubuntu --passive --progress --nosource             <span class="se">\</span>
--host<span class="o">=</span>ftp.inf.tu-dresden.de --root<span class="o">=</span>os/linux/dists/ubuntu --dist<span class="o">=</span>precise      <span class="se">\</span>
--section<span class="o">=</span>multiverse,universe,restricted,main --arch<span class="o">=</span>i386 --cleanup          <span class="se">\</span>
--verbose
logger -t mirror-ubuntu.bash<span class="o">[</span><span class="nv">$$</span><span class="o">]</span> Finished Updating Ubuntu
</pre></div>
</td></tr></table></div></li><li><p><strong>/var/www/mirror/bin/mirror-ubuntu-security.bash</strong>: </p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#</span>
<span class="c1"># Spiegelt die Ubuntu-Security-Repositories fuer Ubuntu 12.04</span>
<span class="c1">#</span>
logger -t mirror-ubuntu-security.bash<span class="o">[</span><span class="nv">$$</span><span class="o">]</span> Updating Ubuntu-Security
debmirror /var/www/mirror/ubuntu-security --passive --progress --nosource    <span class="se">\</span>
--host<span class="o">=</span>ftp.inf.tu-dresden.de --root<span class="o">=</span>os/linux/dists/ubuntu                    <span class="se">\</span>
--dist<span class="o">=</span>precise-security --section<span class="o">=</span>multiverse,universe,restricted,main         <span class="se">\</span>
--arch<span class="o">=</span>i386 --cleanup --verbose
logger -t mirror-ubuntu-security.bash<span class="o">[</span><span class="nv">$$</span><span class="o">]</span> Finished Updating Ubuntu-Security
</pre></div>
</td></tr></table></div></li><li><p><strong>/var/www/mirror/bin/mirror-ubuntu-updates.bash</strong>: </p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#</span>
<span class="c1"># Spiegelt die Ubuntu-Update-Repositories fuer Ubuntu 12.04</span>
<span class="c1">#</span>
logger -t mirror-ubuntu-updates.bash<span class="o">[</span><span class="nv">$$</span><span class="o">]</span> Updating Ubuntu-Updates
debmirror /var/www/mirror/ubuntu-updates --passive --progress --nosource     <span class="se">\</span>
--host<span class="o">=</span>ftp.inf.tu-dresden.de --root<span class="o">=</span>os/linux/dists/ubuntu                    <span class="se">\</span>
--dist<span class="o">=</span>precise-updates --section<span class="o">=</span>multiverse,universe,restricted,main          <span class="se">\</span>
--arch<span class="o">=</span>i386 --cleanup --verbose
logger -t mirror-ubuntu-updates.bash<span class="o">[</span><span class="nv">$$</span><span class="o">]</span> Finished Updating Ubuntu-Updates
</pre></div>
</td></tr></table></div></li><li><p><strong>/var/www/mirror/bin/mirror-ubuntu-backports.bash</strong>: </p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#</span>
<span class="c1"># Spiegelt die Ubuntu-Backport-Repositories fuer Ubuntu 12.04</span>
<span class="c1">#</span>
logger -t mirror-ubuntu-backports.bash<span class="o">[</span><span class="nv">$$</span><span class="o">]</span> Updating Ubuntu-Backports
debmirror /var/www/mirror/ubuntu-backports --passive --progress --nosource   <span class="se">\</span>
--host<span class="o">=</span>ftp.inf.tu-dresden.de --root<span class="o">=</span>os/linux/dists/ubuntu                    <span class="se">\</span>
--dist<span class="o">=</span>precise-backports --section<span class="o">=</span>multiverse,universe,restricted,main        <span class="se">\</span>
--arch<span class="o">=</span>i386 --cleanup --verbose
logger -t mirror-ubuntu-backports.bash<span class="o">[</span><span class="nv">$$</span><span class="o">]</span> Finished Updating Ubuntu-Backports
</pre></div>
</td></tr></table></div></li></ul><p>
</p><div class="section_3"><h4 id="Skripte-ausfuehrbar-machen">Skripte ausführbar machen<a class="headerlink" href="#Skripte-ausfuehrbar-machen">¶</a></h4><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chmod 700 mirror*bash </pre></div></div></div></div><div class="section_2"><h3 id="Schluessel-importieren">Schlüssel importieren<a class="headerlink" href="#Schluessel-importieren">¶</a></h3><p>
Wer sich mit dem <a class="internal" href="./gnupg/technischer_hintergrund.html">technischen Hintergrund</a> von GPG-Schlüsseln und dem <a class="internal" href="./gnupg/web_of_trust.html">Web of Trust</a> noch nicht auseinandergesetzt hat, dem sei dies an dieser Stelle dringend ans Herz gelegt.</p><p><strong>debmirror</strong> überprüft anhand des GPG-Schlüssels die Release-Daten. Aus diesem Grund wird noch der Schlüsselbund der Ubuntu-Rollen benötigt. Man tut sich selber keinen Gefallen, wenn man diese Überprüfung ausschaltet.</p><div class="bash"><div class="contents"><pre class="notranslate">su mirror -c "gpg --no-default-keyring --keyring trustedkeys.gpg --import /usr/share/keyrings/ubuntu-archive-keyring.gpg" </pre></div></div></div></div><div class="section_1"><h2 id="Benutzung">Benutzung<a class="headerlink" href="#Benutzung">¶</a></h2><p>
</p><div class="section_2"><h3 id="Spiegeln">Spiegeln<a class="headerlink" href="#Spiegeln">¶</a></h3><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Das Spiegeln erzeugt etwa 20 Gigabyte an Daten und bedeutet entsprechend ein hohes Downloadvolumen und Last auf dem Server, der gespiegelt wird. Daher sollte die Anleitung wirklich nur für einen Spiegel genutzt werden, der <span class="underline">alle</span> Pakete bereitstellen muss.</p><p>Jetzt kann man mit dem Skript <strong>mirror-ubuntu.bash</strong> den allgemeinen Mirror und mit <strong>mirror-ubuntu-security.bash</strong> den Security-Mirror spiegeln. Die Updates werden mit <strong>mirror-ubuntu-updates.bash</strong> und die Backports entsprechend mit <strong>mirror-ubuntu-backports.bash</strong> geholt.</p><p>Die Skripte sollten vom Benutzer <code class="notranslate">mirror</code> aufgerufen werden, damit die neuen Verzeichnisse dem richtigen Benutzer gehören:</p><div class="bash"><div class="contents"><pre class="notranslate">su mirror -c "/var/www/mirror/bin/mirror-ubuntu.bash"
su mirror -c "/var/www/mirror/bin/mirror-ubuntu-security.bash"
su mirror -c "/var/www/mirror/bin/mirror-ubuntu-updates.bash"
su mirror -c "/var/www/mirror/bin/mirror-ubuntu-backports.bash" </pre></div></div><p>
</p></div></div></div><div class="section_2"><h3 id="Lokal">Lokal<a class="headerlink" href="#Lokal">¶</a></h3><p>
Der lokale Mirror kann mit diesen Einträgen in der <strong>/etc/apt/sources.list</strong> benutzt werden (als <code class="notranslate">Version</code> bitte den jeweiligen Codenamen, z.B. <code class="notranslate">precise</code> für <a class="internal" href="./precise.html">Ubuntu 12.04</a> eintragen):</p><pre class="notranslate">deb file:/var/www/mirror/ubuntu VERSION universe multiverse main restricted
deb file:/var/www/mirror/ubuntu-security VERSION-security universe main restricted multiverse
deb file:/var/www/mirror/ubuntu-updates VERSION-updates main restricted universe multiverse
deb file:/var/www/mirror/ubuntu-backports VERSION-backports main restricted universe multiverse</pre></div><div class="section_2"><h3 id="Zugriff">Zugriff<a class="headerlink" href="#Zugriff">¶</a></h3><p>
</p><div class="section_3"><h4 id="Apache">Apache<a class="headerlink" href="#Apache">¶</a></h4><p>
Um einen Mirror für anderere Rechner anzubieten, ist es vorteilhaft dies über <a class="internal" href="./apache.html">Apache</a> zu erledigen, da so einfache Regeln für den Paketfilter möglich sind. In der <strong>/etc/apache2/httpd.conf</strong> kann ein Eintrag, abhängig von sonstiger Verwendung und Konfiguration des Apache, wie folgt aussehen.</p><pre class="notranslate">&lt;Directory /mirror&gt;
      Options Indexes FollowSymLinks
      AllowOverride None
      Order allow,deny
      allow from all
&lt;/Directory&gt;</pre><p>In die <strong>/etc/apt/sources.list</strong> der Clients ist dann folgendes einzutragen (als <code class="notranslate">Version</code> bitte den jeweiligen Codenamen, z.B. <code class="notranslate">precise</code> für <a class="internal" href="./precise.html">Ubuntu 12.04</a> und für <code class="notranslate">&lt;Rechner&gt;</code> die IP-Adresse oder den Rechnernamen des Mirrors eintragen):</p><pre class="notranslate">deb http://&lt;Rechner&gt;/mirror/ubuntu VERSION universe multiverse main restricted
deb http://&lt;Rechner&gt;/mirror/ubuntu-security VERSION-security universe main restricted multiverse
deb http://&lt;Rechner&gt;/mirror/ubuntu-updates VERSION-updates main restricted universe multiverse
deb http://&lt;Rechner&gt;/mirror/ubuntu-backports VERSION-backports main restricted universe multiverse</pre></div><div class="section_3"><h4 id="ProFTPD">ProFTPD<a class="headerlink" href="#ProFTPD">¶</a></h4><p>
Um einen anonymen FTP-Zugang zum Mirror anzubieten, kann beispielsweise <a class="internal" href="./proftpd.html">ProFTPD</a> verwendet werden. Die <strong>/etc/proftpd.conf</strong> ist dazu in einem Editor <sup><a href="#source-3">[3]</a></sup> mit Root-Rechten <sup><a href="#source-5">[5]</a></sup> wie folgt zu ergänzen.</p><pre class="notranslate">&lt;Anonymous ~mirror&gt;
   User                         ftp
   Group                        nogroup
   UserAlias                    anonymous ftp
   RequireValidShell            off
   # Anzahl der anonymen Logins begrenzen
   MaxClients                   20
   DisplayLogin                 welcome.msg
   DisplayFirstChdir            .message
   # Schreibrechte in der anonymen chroot verbieten
   &lt;Directory *&gt;
     &lt;Limit WRITE&gt;
       DenyAll
     &lt;/Limit&gt;

   &lt;/Directory&gt;
&lt;/Anonymous&gt;</pre><p>In die <strong>/etc/apt/sources.list</strong> der Clients ist dann Folgendes einzutragen (als <code class="notranslate">Version</code> bitte den jeweiligen Codenamen, z.B. <code class="notranslate">precise</code> für <a class="internal" href="./precise.html">Ubuntu 12.04</a> und für <code class="notranslate">&lt;Rechner&gt;</code> die IP-Adresse oder den Rechnernamen des Mirrors eintragen):</p><pre class="notranslate">deb ftp://&lt;Rechner&gt;/mirror/ubuntu VERSION universe multiverse main restricted
deb ftp://&lt;Rechner&gt;/mirror/ubuntu-security VERSION-security universe main restricted multiverse
deb ftp://&lt;Rechner&gt;/mirror/ubuntu-updates VERSION-updates main restricted universe multiverse
deb ftp://&lt;Rechner&gt;/mirror/ubuntu-backports VERSION-backports main restricted universe multiverse</pre></div></div><div class="section_2"><h3 id="Regelmaessige-Aktualisierung">Regelmäßige Aktualisierung<a class="headerlink" href="#Regelmaessige-Aktualisierung">¶</a></h3><p>
In die Datei <strong>/etc/cron.allow</strong> muss der Benutzer <code class="notranslate">mirror</code> in die nächste freie Zeile eingetragen werden, damit <code class="notranslate">mirror</code> auch eine eigene <a class="internal" href="./cron.html">cron</a>-Tabelle anlegen darf. Dazu wird die Datei in einem Editor <sup><a href="#source-3">[3]</a></sup> mit administrativen Rechten bearbeitet <sup><a href="#source-5">[5]</a></sup>.</p><p>Anschließend wird die cron-Tabelle für das automatische Aktualisieren des Spiegels angelegt.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo crontab -e -u mirror </pre></div></div><pre class="notranslate"> 0 1 * * * bash -l -c "/var/www/mirror/bin/mirror-ubuntu.bash"
 0 3 * * * bash -l -c "/var/www/mirror/bin/mirror-ubuntu-security.bash"
 0 5 * * * bash -l -c "/var/www/mirror/bin/mirror-ubuntu-updates.bash"
 0 7 * * * bash -l -c "/var/www/mirror/bin/mirror-ubuntu-backports.bash"</pre><p>Das sorgt dafür, dass die "Haupt-Pakete" um 01:00 Uhr nachts aktualisiert werden, die Sicherheitsupdates um 03:00 Uhr, die nicht-kritischen Updates um 05:00 Uhr und die Backports um 07:00 geholt werden.</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="./lokale_paketquellen.html">Lokale Paketquellen</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./ubuntu-mirror/a/revision/918693.html">Diese Revision</a> wurde am 10. November 2016 16:37 von <a href="https://ubuntuusers.de/user/aasche/">aasche</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./ubuntu-mirror.html">Ubuntu-Mirror</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>