<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>inetd › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./inetd.html">inetd</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/inetd">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./inetd/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./inetd/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./inetd/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./inetd/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./inetd/a/backlinks.html">inetd</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./dienste.html">Serverdienste starten/stoppen</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Konfiguration">Konfiguration
</a><ol class="arabic"><li><a class="crosslink" href="#Interne-Dienste">Interne Dienste
</a></li><li><a class="crosslink" href="#Beispielkonfiguration">Beispielkonfiguration
</a></li></ol></li><li><a class="crosslink" href="#TCP-Wrapper">TCP-Wrapper
</a><ol class="arabic"><li><a class="crosslink" href="#hosts-access-Dateien">hosts_access-Dateien
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>Ein <strong>inetd</strong>, auch <em>Internet-Superserver</em> genannt, verwaltet die Netzwerkverbindungen bestimmter Dienste. Je nach Konfiguration öffnet der Inetd verschiedene Ports und wartet auf Verbindungsanfragen. Erst wenn eine Anfrage eintrifft, wird der betreffende Serverprozess gestartet und seine Ein- und Ausgabe mit dem Datenstrom verknüpft.</p><p>Das hat mehrere Vorteile:</p><ul><li><p>Es läuft nur ein Server ständig im Hintergrund, anstatt mehrere verschiedene nur selten benutzte. </p></li><li><p>Es ist geradezu trivial, einen eigenen Serverdienst zu programmieren. Man braucht sich nicht um <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Socket">Sockets</a>, etc. zu kümmern, sondern benutzt einfach die Standardein- und -ausgabe. </p></li><li><p>Man kann das <strong>tcpd</strong>-Paket benutzen, um auf einfache Art mächtige Zugriffskontrollen zu implementieren. </p></li></ul><p>Leider gibt es auch ein paar Nachteile:</p><ul><li><p>Bei jeder neuen Verbindung den Serverdienst neu zu starten kostet Ressourcen. </p></li><li><p>Man kann nicht jeden beliebigen regulären Serverdienst über den Inetd betreiben, da diese in der Regel eigene Netzwerk-Sockets öffnen (was fehlschlägt, wenn der Port schon vom Inetd belegt ist). </p></li></ul><p>Daraus ergeben sich folgende Konsequenzen:</p><ul><li><p>Der Inetd eignet sich besonders für kleinere, eher selten benutzte Dienste, z.B. Konfigurations-Weboberflächen. Für stark ausgelastete Web- oder Mailserver ist er denkbar ungeeignet. </p></li><li><p>Serverdienste sind meistens <span class="underline">entweder</span> für den alleinstehenden Betrieb <span class="underline">oder</span> für den Betrieb mit Inetd ausgelegt und müssen dann dementsprechend verwendet werden. Einige Server, bei denen das sinnvoll ist, wie z.B. diverse FTP-Server, lassen sich durch eine Konfigurationsoption auf beide Arten einsetzen (aber nicht gleichzeitig). </p></li></ul><p><a class="crosslink anchor" href="#install" id="install"></a>
</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Der Original-Inetd stammte aus einer alten BSD-Version. Inzwischen gibt es aber zahlreiche Neuimplementierungen von anderen Leuten oder Projekten, von denen mehrere in den Ubuntu-Paketquellen vorhanden sind. Es braucht also nur <span class="underline">eines</span> der folgenden Pakete installiert zu werden <sup><a href="#source-1">[1]</a></sup>:</p><ul><li><p><strong>netkit-inetd</strong> (<em>universe</em>) </p></li><li><p><strong>openbsd-inetd</strong> (<em>main</em>) </p></li><li><p><strong>inetutils-inetd</strong> (<em>universe</em>)</p></li></ul><p>
Inkompatible Varianten:</p><ul><li><p><strong>xinetd</strong> (siehe unten) kann Einzeldateien pro Dienst, nützlich für <a class="internal missing" href="./puppet.html">Puppet</a> u.ä.</p></li></ul><p> 
Folgendes Paket ist optional, aber empfohlen:</p><ul><li><p><strong>tcpd</strong> (Zugriffsbeschränkungen über TCP-Wrappers <a class="crosslink" href="#tcpwrapper">s.u.</a> )</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install tcpd </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install tcpd </pre></div></div><p>
</p></div></div><p>Die meisten Inetds unterscheiden sich nur unter der Haube und benutzen dieselbe Konfigurationsdatei <strong>/etc/inetd.conf</strong>. Es gibt deswegen wohl nur in den seltensten Fällen Grund dazu, einen anderen zu wählen, als die Ubuntu-Entwickler für den <em>main</em>-Zweig ausgewählt haben. Bis einschließlich Edgy Eft war dies der <strong>netkit-inetd</strong>, ab Feisty Fawn wurde auf den <strong>openbsd-inetd</strong> umgestellt.</p><p>Etwas anders verhält es sich mit dem Abkömmling <strong>xinetd</strong>, der tatsächlich einige mächtigere Fähigkeiten besitzt als die traditionellen Vertreter dieses Genres. Diese Vorteile werden jedoch mit einer abweichenden Syntax der Konfiguration erkauft, die mehr Optionen bietet und dafür etwas komplexer ist. Die folgenden Informationen beziehen sich jetzt erstmal auf herkömmliche Inetds. Des Weiteren sei auf den Artikel <a class="internal" href="./xinetd.html">xinetd</a> verwiesen.</p><p><a class="crosslink anchor" href="#konfig" id="konfig"></a>
</p></div><div class="section_1"><h2 id="Konfiguration">Konfiguration<a class="headerlink" href="#Konfiguration">¶</a></h2><p>
Die Konfiguration des Inetd geschieht über die Datei <strong>/etc/inetd.conf</strong>. Jede Zeile in dieser Datei beschreibt einen Service. Leerzeilen und solche, die mit einem <strong>#</strong> beginnen, werden ignoriert. Nach jeder Änderung an dieser Datei muss der Inetd neugestartet werden <sup><a href="#source-4">[4]</a></sup>, z.B. so <sup><a href="#source-2">[2]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/openbsd-inetd restart </pre></div></div><p>Viele Dienste, die den Inetd benötigen, tragen bei der Installation selber eine passende Zeile in die Datei <strong>/etc/inetd.conf</strong> ein. Sollte das einmal nicht der Fall sein, oder wenn man einen eigenen Service installieren will, muss man dies mit Hilfe eines Texteditors und Root-Rechten selber erledigen <sup><a href="#source-4">[4]</a></sup>. Dabei besteht jede Zeile aus sieben Spalten, die jeweils durch Leerzeichen bzw. Tabulatoren voneinander getrennt sind. Diese werden im Folgenden beschrieben.</p><table><tr class="titel"><td colspan="3"> /etc/inetd.conf </td></tr><tr class="kopf"><td> Spalte </td><td> Eintrag </td><td> Funktion </td></tr><tr><td> 1: Service-Name </td><td> <code class="notranslate">Name</code> oder <code class="notranslate">Portnummer</code> </td><td> Dies ist der Name des Service, wie er in der Datei <strong>/etc/services</strong> vorkommt. Über diesen Namen und diese Datei ermittelt der Inetd den Port, den er mit diesem Dienst verknüpfen soll. Man kann stattdessen auch einfach die Portnummer verwenden. Namen sind aber meistens übersichtlicher.  </td></tr><tr class="highlight"><td> 2: Socket-Typ </td><td> <code class="notranslate">stream</code> oder <code class="notranslate">dgram</code> </td><td> Meistens <code class="notranslate">stream</code> (kontinuierlicher Datenstrom), manchmal aber auch <code class="notranslate">dgram</code> (einzelne Datenpakete).</td></tr><tr><td> 3: Protokoll </td><td> <code class="notranslate">tcp</code> oder <code class="notranslate">udp</code></td><td> Bei <code class="notranslate">tcp</code> muss die vorhergehende Option <code class="notranslate">stream</code> gewählt werden, bei <code class="notranslate">udp</code> <code class="notranslate">dgram</code>. Wenn man unsicher ist und in der Dokumentation des jeweiligen Dienstes keine Angabe hierzu findet, ist meistens <code class="notranslate">tcp</code> richtig.   </td></tr><tr class="highlight"><td> 4: wait/nowait </td><td> <code class="notranslate">wait</code> oder <code class="notranslate">nowait</code> </td><td> <code class="notranslate">wait</code> bedeutet, dass auch alle weiteren Pakete an diesen Port an denselben Prozess weitergeleitet werden. <code class="notranslate">nowait</code> bedeutet, dass der Prozess abgetrennt und der Port für neue Verbindungen wieder frei gemacht wird.<br/>TCP-(Stream-)Dienste sollten <span class="underline">immer</span> die Option <code class="notranslate">nowait</code> haben, wenn inetd ihnen <span class="underline">Verbindungen</span> übergeben soll, d.h. jeweils einen Client Socket, mit dem der Dienst per Standardein- und ausgabekanal kommunizieren kann.<br/>TCP mit "wait" führt dazu, dass der Dienst stattdessen den Serverkanal (<a class="external" href="http://manpages.ubuntu.com/manpages/trusty/man8/inetd.8.html" rel="nofollow">"master socket"</a>) übergeben bekommt. Analogie: Wenn ein Anruf reinkommt, startet inetd den Dienst, übergibt ihm das gesamte Telefon, und der Dienst muss dann selbst den Hörer abnehmen.<br/>Bei Dgram-Diensten hängt das von der Funktionsweise ab. </td></tr><tr><td> 5: Benutzerkonto </td><td> z.B. <code class="notranslate">root</code> oder <code class="notranslate">nobody</code> </td><td> Unter dieser Benutzerkennung wird der Dienst gestartet. Damit kann man den Service mit niedrigeren Rechten als unter Root starten, was der Sicherheit zugute kommt. Optional kann man abgetrennt durch einen Punkt auch eine Gruppe angeben.</td></tr><tr class="highlight"><td> 6: Server-Programm </td><td> <code class="notranslate">Pfad/zum/Programm</code> </td><td> Hier muss der volle Pfad des Programmes stehen, das den Serverdienst bereitstellt. Im Falle eines internen Dienstes des Inetd (<a class="crosslink" href="#internal">s.u.</a>) muss hier die Zeichenkette <code class="notranslate">internal</code> stehen.</td></tr><tr><td> 7: Kommandozeilen-Argumente </td><td><code class="notranslate">Programmname</code>, ggf. <code class="notranslate">Optionen</code> </td><td> Hier gehören die Argumente hin, die man dem Server-Programm übergeben möchte. Diese Spalte erstreckt sich in jedem Fall bis zum Ende der Zeile, und es sind auch Leerzeichen erlaubt.<div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Das erste Argument muss der Programmname sein. Erst dann kommen die eigentlichen Argumente.
</p></div></div>
Für interne Dienste muss hier ebenfalls die Zeichenkette <code class="notranslate">internal</code> stehen. </td></tr></table><p>
<a class="crosslink anchor" href="#internal" id="internal"></a>
</p><div class="section_2"><h3 id="Interne-Dienste">Interne Dienste<a class="headerlink" href="#Interne-Dienste">¶</a></h3><p>
Einige triviale Dienste, die traditionell zu Testzwecken auf Unix-Servern liefen, sind direkt in den Inetd eingebaut und können in der Konfigurationsdatei über das Schlüsselwort <code class="notranslate">internal</code> referenziert werden. Da diese Dienste wenig praktischen Nutzen haben und in der Vergangenheit öfter für <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Denial_of_Service">Denial-of-Service-Angriffe</a> missbraucht wurden, trifft man sie heutzutage nur noch sehr selten in aktiviertem Zustand an. Alle diese Dienste sind <code class="notranslate">stream/tcp</code>-Dienste.</p><p>Man kann auf diese Dienste mit einem Telnet-Client zugreifen. Um sie zu beenden, muss man 
<span class="key">Strg</span>  + 
<span class="key">]</span>  drücken und den Befehl <code class="notranslate">quit</code> absenden.</p><div class="bash"><div class="contents"><pre class="notranslate">$ telnet lucid-lamp echo </pre></div></div><p>Ausgabe:</p><pre class="notranslate">Trying 192.168.4.55...
Connected to lucid-lamp.otze.
Escape character is '^]'.
test
test</pre><p>Beenden:</p><div class="bash"><div class="contents"><pre class="notranslate">^]
telnet&gt; quit </pre></div></div><pre class="notranslate">Connection closed.</pre><table><tr class="titel"><td colspan="3"> Interne Dienst für inetd </td></tr><tr class="kopf"><td> Dienst </td><td> Port </td><td> Funktion </td></tr><tr><td> <code class="notranslate">echo</code></td><td> Port 7 </td><td> Dieser Dienst schickt immer genau die Zeichenketten zurück, die man an ihn sendet. </td></tr><tr class="highlight"><td> <code class="notranslate">discard</code> </td><td> Port 9 </td><td> Dieser Dienst verschluckt alle Eingaben und sendet nie etwas zurück. </td></tr><tr><td> <code class="notranslate">daytime</code> </td><td> Port 13</td><td> Dieser Dienst antwortet mit der genauen Zeit, die auf dem Server gilt, und beendet daraufhin die Verbindung. </td></tr><tr class="highlight"><td> <code class="notranslate">chargen</code> </td><td> Port 19 </td><td> Dieser Dienst antwortet mit einem endlosen Strom von ASCII-Zeichen, der erst endet, wenn man selber die Verbindung abbricht. </td></tr><tr><td> <code class="notranslate">time</code> </td><td> Port 37 </td><td> Dieser Dienst liefert ebenfalls die Serverzeit, allerdings in einem maschinenlesbaren Format. </td></tr></table><p>
</p></div><div class="section_2"><h3 id="Beispielkonfiguration">Beispielkonfiguration<a class="headerlink" href="#Beispielkonfiguration">¶</a></h3><p>
</p><pre class="notranslate"># Legende:
# Service       Typ     Proto   Wait    User    Programm        Argumente
# Interne Dienste. Auskommentiert, weil sinnlos:
#echo            stream  tcp     nowait  nobody  internal        internal
#discard         stream  tcp     nowait  nobody  internal        internal
#chargen         stream  tcp     nowait  nobody  internal        internal
#daytime         stream  tcp     nowait  nobody  internal        internal
#time            stream  tcp     nowait  nobody  internal        internal
# swat - Samba Web Administration Tool:
swat            stream  tcp     nowait  root    /usr/sbin/swat  swat
# Ein trivialer eigener "Dienst", der auf Port 3000 antwortet:
3000            stream  tcp     nowait  nobody  /bin/echo       echo Hallo Welt!</pre><p><a class="crosslink anchor" href="#tcpwrapper" id="tcpwrapper"></a>
</p></div></div><div class="section_1"><h2 id="TCP-Wrapper">TCP-Wrapper<a class="headerlink" href="#TCP-Wrapper">¶</a></h2><p>
TCP-Wrapper ist eine Bibliothek, mit der man Zugriffskontrollen für TCP-Verbindungen implementieren kann. Mit Hilfe des Inetds und des <code class="notranslate">tcpd</code> kann man diese Kontrollen praktischerweise für <span class="underline">jeden</span> inetd-fähigen Service implementieren. Nebenbei wird auch noch jeder Zugriffsversuch im <strong>syslog</strong> und <strong>daemon.log</strong> festgehalten.</p><p>Um einen inetd-Service über TCP-Wrapper zu schützen, muss man nur den Pfad des tcpd-Programms eintragen. Das eigentliche Server-Programm wird mit vollem Pfad als erstes Argument eingetragen, z.B. so:</p><pre class="notranslate"># tcp-wrapper-geschützte Dienste
swat            stream  tcp     nowait  root    /usr/sbin/tcpd  /usr/sbin/swat
3000            stream  tcp     nowait  nobody  /usr/sbin/tcpd  /bin/echo Hallo Welt!</pre><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Auch einige Stand-alone-Dienste wie z.B. <code class="notranslate">openssh</code> und <code class="notranslate">portmap</code> nutzen die TCP-Wrapper-Bibliothek, die sich im Paket <strong>libwrap0</strong> befindet. In diesen Fällen gilt der folgende Abschnitt also auch. 
</p></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Der <code class="notranslate">openbsd-inetd</code>-Server hat ebenfalls eingebaute libwrap-Unterstützung. Diese lässt sich durch Anlegen der Datei <strong>/etc/default/openbsd-inetd</strong> mit der einzigen folgenden Zeile aktivieren: (Neustart des Inetd-Servers erforderlich.)</p><p><code class="notranslate">OPTIONS="-l"</code></p><p>In diesem Fall braucht man nicht extra <strong>/usr/sbin/tcpd</strong> aufrufen, sondern die im Folgenden beschriebenen <em>hosts_access</em>-Dateien werden in jedem Fall beachtet. 
</p></div></div><div class="section_2"><h3 id="hosts-access-Dateien">hosts_access-Dateien<a class="headerlink" href="#hosts-access-Dateien">¶</a></h3><p>
Geregelt wird der Zugriff auf tcp-wrapper-geschützte Dienste durch die Dateien <strong>/etc/hosts.allow</strong> und <strong>/etc/hosts.deny</strong> (auch als <em>hosts_access</em>-Dateien bezeichnet). Diese können beliebig viele Regeln beinhalten, je eine pro Zeile. TCP-Wrapper geht bei jeder eingehenden Verbindung erst die <strong>hosts.allow</strong>- und dann die <strong>hosts.deny</strong>-Datei durch und stoppt, wenn eine Regel passt. Hierbei wiegt eine Erlaubnis per <strong>hosts.allow</strong> höher als ein Verbot per <strong>hosts.deny</strong>, und weiter oben stehende Regeln haben höhere Priorität. Passt keine einzige Regel, so wird die Verbindung ebenfalls zugelassen.</p><p>Am sichersten ist man, wenn man <code class="notranslate">ALL: ALL</code> in der <strong>hosts.deny</strong> einträgt und dann die Ausnahmen in der <strong>hosts.allow</strong> aufführt.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Wie erwähnt, benutzt auch der OpenSSH-Server diese Dateien. Man sollte also bei entfernten Rechnern Vorkehrungen treffen, damit man sich nicht selber aussperrt. Da diese Sperre nur neue Verbindungen betrifft, kann man nach einer Änderung der hosts_access-Dateien in einem weiteren Terminal testen, ob ein Login noch möglich ist, während man die ursprüngliche Shell offen hält. Am besten trägt man erstmal folgende Zeile in die <strong>hosts.allow</strong>-Datei ein:</p><p><code class="notranslate">sshd: ALL</code>
</p></div></div><div class="section_3"><h4 id="Syntax">Syntax<a class="headerlink" href="#Syntax">¶</a></h4><p>
Beide Dateien benutzen dieselbe Syntax, nur dass eben die Logik entgegengesetzt funktioniert. Leerzeilen und Kommentarzeilen (mit <strong>#</strong> am Anfang) werden ignoriert.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Am Ende der jeweiligen Dateien muss unbedingt ein Zeilenvorschub stehen. Steht am Ende der Datei eine Regel ohne abschließenden Zeilentrenner, so wird diese nicht korrekt verarbeitet. 
</p></div></div><p>Jede Zeile besteht aus dem Namen des Services, einem Doppelpunkt und einer Liste der berechtigten oder unberechtigten Clients.</p></div><div class="section_3"><h4 id="Servicename">Servicename<a class="headerlink" href="#Servicename">¶</a></h4><p>
Hier muss der Name des Programms eingetragen werden, nicht der Name des Ports, auf dem der Dienst lauscht! Das spezielle Wort <code class="notranslate">ALL</code> bezeichnet alle Dienste.</p></div><div class="section_3"><h4 id="Client-s">Client(s)<a class="headerlink" href="#Client-s">¶</a></h4><p>
Hier gibt es verschiedene Formen, die betreffenden Clients festzulegen. Die wichtigsten zeigt die folgende Tabelle:</p><table><tr class="titel"><td colspan="2"> Clients</td></tr><tr class="kopf"><td> Client </td><td> Funktion </td></tr><tr><td> <code class="notranslate">ALL</code> </td><td> Passt auf alle Hosts </td></tr><tr class="highlight"><td> <code class="notranslate">LOCAL</code> </td><td> Passt auf alle Hosts, deren Name keinen Punkt enthält </td></tr><tr><td> <code class="notranslate">host.domain.tld</code> </td><td> Hostname </td></tr><tr class="highlight"><td> <code class="notranslate">w.x.y.z</code> </td><td> IP-Adresse </td></tr><tr><td> <code class="notranslate">.domain.tld</code> </td><td> Domain </td></tr><tr class="highlight"><td> <code class="notranslate">x.y.z.</code> </td><td> Adress-Bereich, dessen IPs mit x.y.z. anfangen </td></tr><tr><td> <code class="notranslate">w.x.y.z/n</code> </td><td> Netzmaske </td></tr></table></div><div class="section_3"><h4 id="Beispiel">Beispiel<a class="headerlink" href="#Beispiel">¶</a></h4><p>
<strong>/etc/hosts.deny</strong>:</p><pre class="notranslate"># Alles verbieten, was nicht explizit erlaubt wird
ALL: ALL</pre><p><strong>/etc/hosts.allow</strong>:</p><pre class="notranslate"># Alle Verbindungen vom selben Rechner erlauben:
ALL: localhost
# Allen Rechnern der lokalen Domain Zugriff auf den Finger-Daemon erlauben
in.fingerd: LOCAL
# Unseren Hallo-Welt-Service für zwei bestimmte Rechner und ein Subnetz freigeben:
echo: 192.168.0.0/24 10.2.3.4 testserver.woauchimmer.de</pre><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Die hosts_access-Sprache ist noch viel mächtiger und besitzt noch viel mehr Optionen als hier dargestellt. Weitere Informationen findet man in den Manpages <em>hosts_access (5)</em> und <em>hosts_options (5)</em>. 
</p></div></div></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="./xinetd.html">xinetd</a> - Alternative</p></li><li><p><a class="internal" href="./serverdienste.html">Serverdienste</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsseite</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./inetd/a/revision/946200.html">Diese Revision</a> wurde am 12. Januar 2018 18:40 von <a href="https://ubuntuusers.de/user/svb-/">svb-</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./inetd.html">inetd</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>