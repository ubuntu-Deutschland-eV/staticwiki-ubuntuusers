<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>LXC › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./lxc.html">LXC</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/LXC">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./lxc/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./lxc/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./lxc/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./lxc/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./lxc/a/backlinks.html">LXC</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><p>
</p><div class="box advanced"><h3 class="box advanced">Artikel für fortgeschrittene Anwender</h3><div class="contents"><p>
Dieser Artikel erfordert mehr Erfahrung im Umgang mit
Linux und ist daher nur für fortgeschrittene Benutzer
gedacht.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a> </p></li></ol></div></div><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Einrichtung">Einrichtung
</a></li><li><a class="crosslink" href="#LXC-testen">LXC testen
</a></li><li><a class="crosslink" href="#Container">Container
</a></li><li><a class="crosslink" href="#Containerkonfiguration">Containerkonfiguration
</a></li><li><a class="crosslink" href="#Container-erstellen">Container erstellen
</a></li><li><a class="crosslink" href="#Container-starten-und-beenden">Container starten und beenden
</a></li><li><a class="crosslink" href="#Weitere-Befehle-zum-Verwalten-von-Containern">Weitere Befehle zum Verwalten von Containe...</a></li><li><a class="crosslink" href="#Hinweise">Hinweise
</a></li><li><a class="crosslink" href="#LXC-und-Hyper-V">LXC und Hyper-V
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><strong>L</strong>inu<strong>X</strong> <strong>C</strong>ontainer (LXC) bieten die Möglichkeit, Prozesse und Prozessgruppen zu isolieren, indem Kernel-Ressourcen virtualisiert und gegeneinander abgeschottet werden. Dies wird mit Hilfe der im Kernel enthaltenen <a class="interwiki interwiki-wikipedia_en" href="https://en.wikipedia.org/wiki/Cgroups">Cgroups</a> realisiert. Mit LXC kann man entweder einzelne Anwendungen oder ganze Linux-Distributionen in einem Container starten. Ähnliche Konzepte gibt es bei Linux-VServer oder Jails (FreeBSD) oder Zones (Solaris).</p><p>Es gibt zwei Werkzeugsammlungen zum Verwalten von Linux-Containern. Zum einen gibt es einen LXC-Treiber für <a class="external" href="http://libvirt.org/" rel="nofollow">libvirt</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>, das man zum Beispiel über <a class="internal" href="./virsh.html">virsh</a> bedient. Zum anderen gibt es das Projekt <a class="external" href="http://lxc.sourceforge.net/" rel="nofollow">LXC</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>, das in diesem Artikel beschrieben wird. Während libvirt darauf ausgelegt ist, unterschiedliche Virtualisierungslösungen zu verwalten, beschränkt sich LXC nur auf Linux-Container, bietet für diese aber eine größere und flexiblere Werkzeugsammlung.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Der Kernel von Ubuntu enthält ab Version 2.6.31 (Ubuntu 9.10) bereits alle Voraussetzungen zum Betreiben von LXC. Es müssen nur noch die Programme zur Verwaltung von Containern installiert werden:</p><ul><li><p><strong>lxc</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install lxc </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install lxc </pre></div></div><p>
</p></div></div><p>Wer ein komplettes System mittels LXC virtualisieren möchte, der benötigt zusätzlich:</p><ul><li><p><strong>debootstrap</strong> (Ubuntu/Debian-System erzeugen)</p></li><li><p><strong>bridge-utils</strong> (Programme für die Nutzung von Ethernet Bridge)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install debootstrap bridge-utils </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install debootstrap bridge-utils </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="Einrichtung">Einrichtung<a class="headerlink" href="#Einrichtung">¶</a></h2><p>
Zunächst muss das cgroup-Dateisystem eingehängt werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount cgroup -t cgroup /sys/fs/cgroup </pre></div></div><p>Damit das beim Starten von Ubuntu automatisch und dauerhaft geschieht, kann man das auch über die <a class="internal" href="./fstab.html">/etc/fstab</a> machen:
</p><pre class="notranslate">cgroup /sys/fs/cgroup cgroup defaults 0 0</pre></div><div class="section_1"><h2 id="LXC-testen">LXC testen<a class="headerlink" href="#LXC-testen">¶</a></h2><p>
Man kann jetzt bereits LXC ausprobieren, indem man in einem Terminal <sup><a href="#source-2">[2]</a></sup> folgenden Befehl eingibt:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo lxc-execute -n CONTAINERNAME /bin/bash </pre></div></div><p>Durch diesen Befehl startet man die Bash in einem Container namens <code class="notranslate">CONTAINERNAME</code>. Der Name kann frei gewählt werden, muss aber einmalig sein.</p><p>Lässt man sich jetzt die <a class="internal" href="./shell/ps.html">Prozessliste</a> anzeigen,</p><div class="bash"><div class="contents"><pre class="notranslate">ps -e </pre></div></div><p>
kann man nur die Prozesse des Containers sehen:</p><pre class="notranslate">  PID TTY          TIME CMD
    1 pts/8    00:00:00 lxc-init
    2 pts/8    00:00:00 bash
   86 pts/8    00:00:00 ps</pre></div><div class="section_1"><h2 id="Container">Container<a class="headerlink" href="#Container">¶</a></h2><p>
Linux-Container bestehen im Allgemeinen aus drei Teilen:</p><ul><li><p>Eine Konfigurationsdatei mit Informationen über die verwendeten Ressourcen</p></li><li><p>Eine Datei im <a class="internal" href="./fstab.html">fstab</a>-Format, welche die Einhängepunkte für den Container enthält. Diese Informationen kann man alternativ auch direkt in der Konfigurationsdatei angeben.</p></li><li><p>Das Root-Dateisystem des Containers, falls der Container eins benötigt</p></li></ul><p>
Soll nur eine einzelne Anwendung in einem Container ausgeführt werden, spricht man von einem Anwendungscontainer. <a class="crosslink" href="#LXC-testen">LXC testen</a> ist der einfachste Fall eines solchen Anwendungscontainers. Bei Anwendungscontainern sollte man sich genau überlegen, welche Ressourcen man isolieren will. Man kann zum Beispiel den Rechnernamen (<code class="notranslate">hostname</code>) ändern und das Netzwerk isolieren. Um Konflikte zwischen Dateien zu vermeiden, kann man Teile des Dateisystem neu einhängen, oder man erstellt ein eigenes Root-Dateisystem und kann Teile des Haupt-Dateisystems über Bind-Mounts gemeinsam nutzen. Wenn keine Konfiguration angegeben wird, werden nur Prozessnummern, System V IPC und Einhängepunkte virtualisiert und isoliert.</p><p>Wird ein vollständiges System in einem Container eingerichtet, spricht man von einem Systemcontainer. Die Konfiguration eines Systemcontainers ist einfacher, da man sich keine Gedanken über die isolierten Ressourcen machen muss, weil alles isoliert werden muss.</p></div><div class="section_1"><h2 id="Containerkonfiguration">Containerkonfiguration<a class="headerlink" href="#Containerkonfiguration">¶</a></h2><p>
Jede Zeile in einer Konfigurationsdatei steht für eine Einstellung und hat die Form <code class="notranslate">name = wert</code>:</p><p>
</p><table><tr class="titel"><td colspan="2">Containerkonfiguration </td></tr><tr class="kopf"><td>Einstellung </td><td> Beschreibung </td></tr><tr><td> <code class="notranslate">lxc.utsname</code> </td><td> Der <a class="internal" href="./rechnername.html">Rechnername</a> des Containers </td></tr><tr><td> <code class="notranslate">lxc.tty</code> </td><td> Anzahl der ttys des Containers  </td></tr><tr><td> <code class="notranslate">lxc.pts</code> </td><td> Wenn diese Einstellung vorhanden ist, hat der Container eigene Pseudo-TTYs. Der Wert 1024 beschreibt die Maximalanzahl; diese Beschränkung ist aber noch nicht implementiert. </td></tr><tr><td> <code class="notranslate">lxc.mount</code> </td><td> Eine Datei, die die Einhängepunkte des Containers enthält und aufgebaut ist wie die <a class="internal" href="./fstab.html">fstab</a> </td></tr><tr><td> <code class="notranslate">lxc.mount.entry</code> </td><td> Einzelner Einhängepunkt im Format einer fstab-Zeile. </td></tr><tr><td> <code class="notranslate">lxc.rootfs</code> </td><td> Das Verzeichnis, in dem sich das Root-Dateisystem des Containers befindet </td></tr><tr><td> <code class="notranslate">lxc.network.type</code> </td><td> Art der Netzwerkvirtualisierung, mögliche Werte sind: <code class="notranslate">empty</code>, <code class="notranslate">veth</code>, <code class="notranslate">vlan</code>, <code class="notranslate">macvlan</code>, <code class="notranslate">phys</code> </td></tr><tr><td> <code class="notranslate">lxc.network.flags</code> </td><td> Wenn hier <code class="notranslate">up</code> angegeben wird, wird das Netzwerkinterface aktiviert </td></tr><tr><td> <code class="notranslate">lxc.network.link</code> </td><td> Das vom Container verwendete Netzwerkinterface </td></tr><tr><td> <code class="notranslate">lxc.aa_profile</code> </td><td> Container werden von <a class="internal" href="./apparmor.html">AppArmor</a> abgesichert. Man kann hier ein eigenes Profil angeben oder mit <code class="notranslate">unconfined</code> das Standardprofil abschalten. </td></tr></table><p>Weitere Einstellungen und Hinweise findet man in der <a class="internal" href="./man.html">Manpage</a> zu <strong>lxc.conf</strong> und in den Beispielen unter <strong>/usr/share/doc/lxc/examples/</strong>.</p><div class="section_2"><h3 id="Netzwerk-einrichten">Netzwerk einrichten<a class="headerlink" href="#Netzwerk-einrichten">¶</a></h3><p>
Die Einrichtung einer <a class="internal" href="./netzwerkbrücke.html">Netzwerkbrücke</a> scheint zur Zeit die beste Möglichkeit zu sein, einen Container mit dem Netzwerk zu verbinden. Das Interface <code class="notranslate">br0</code> muss außerhalb des Containers konfiguriert werden. Wenn man WLAN verwendet, funktioniert eine Netzwerkbrücke nicht. Dann kann man libvirt verwenden, um eine <a class="external" href="http://berrange.com/posts/2009/12/13/routed-subnets-without-nat-for-libvirt-managed-virtual-machines-in-fedora/" rel="nofollow">Route</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> zu erstellen.</p></div></div><div class="section_1"><h2 id="Container-erstellen">Container erstellen<a class="headerlink" href="#Container-erstellen">¶</a></h2><p>
Einen Container erstellt man mit:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo lxc-create -n Containername -f Konfigurationsdatei </pre></div></div><p>
Der Befehl erzeugt im Verzeichnis <strong>/var/lib/lxc</strong> ein Unterverzeichnis <strong>Containername</strong>, in dem die Konfigurationsinformationen gespeichert werden.</p><p>Einen Container entfernen kann man mit:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo lxc-destroy -n Containername </pre></div></div><p>Um eine Containerkonfiguration zu ändern, kann man die Konfigurationsdatei im Containerverzeichnis direkt bearbeiten oder man löscht mit <code class="notranslate">lxc-destroy</code> den Container und erstellt ihn dann wieder neu mit <code class="notranslate">lxc-create</code>.</p><p>Es ist nicht unbedingt erforderlich, Container vor der Benutzung zur Erstellen. Man kann auch beim Starten des Containers die Konfiguration als Parameter übergeben.</p><div class="section_2"><h3 id="Container-aus-einer-Vorlage-erstellen">Container aus einer Vorlage erstellen<a class="headerlink" href="#Container-aus-einer-Vorlage-erstellen">¶</a></h3><p>
Eine Möglichkeit einen Container zu erstellen ist, eine vorhandene Vorlage zu verwenden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo lxc-create -n Containername -f Konfiguration -t Vorlagenname </pre></div></div><p>
Dabei können weitere Optionen übergeben werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo lxc-create -n Containername -f Konfiguration -t Vorlagenname -- Vorlagenoptionen </pre></div></div><p>
Man kann sich die Vorlagenoptionen mit folgendem Befehl anzeigen lassen:</p><div class="bash"><div class="contents"><pre class="notranslate">lxc-create -t Vorlagenname -h </pre></div></div><p>
Es stehen folgende Vorlagen zur Verfügung:</p><p>
</p><table><tr class="titel"><td colspan="2">LXC-Vorlagen </td></tr><tr class="kopf"><td>Vorlage </td><td> Beschreibung </td></tr><tr><td> <code class="notranslate">ubuntu</code> </td><td> über die Vorlagenoption „<code class="notranslate">-r RELEASE</code>“ kann die Ubuntuversion des Gastsystem angegeben werden. Standard ist die Version des Host-Systems. </td></tr><tr><td> <code class="notranslate">ubuntu-cloud</code> </td><td> erzeugt einen Ubuntu-Cloud-Container </td></tr><tr><td> <code class="notranslate">debian</code> </td><td> Debian GNU/Linux 6.0 (Squeeze), ca. 236 MB. Über die Umgebungsvariable <code class="notranslate">SUITE</code> kann eine andere Debian-Version ausgewählt werden. </td></tr><tr><td> <code class="notranslate">fedora</code> </td><td> benötigt die Pakete <strong>curl</strong> und <strong>yum</strong>, kann nicht mit <a class="internal" href="./systemd.html">systemd</a> umgehen und kann deshalb nur Fedora-Container bis einschließlich Version 14 erzeugen </td></tr><tr><td> <code class="notranslate">opensuse</code> </td><td> benötigt das Programm <code class="notranslate">zypper</code>, für das es allerdings noch kein Ubuntu-Paket gibt </td></tr><tr><td> <code class="notranslate">busybox</code> </td><td> sehr kleiner Systemcontainer, der vollständig auf busybox basiert, nur zu experimentellen Zwecken </td></tr><tr><td> <code class="notranslate">sshd</code> </td><td> Anwendungscontainer zum Betreiben von sshd, nur zu experimentellen Zwecken </td></tr></table><p>Die Vorlagen-Skripte finden sich im Verzeichnis <strong>/usr/lib/lxc/templates</strong>. Man kann sie als Vorlage für eigene Skripte verwenden. Das Root-Dateisystem dieser Container wird zusammen mit der Konfiguration unter <strong>/var/lib/lxc/Containername</strong> gespeichert und beim Verwenden des Befehls <code class="notranslate">lxc-destroy</code> samt aller darin vorgenommenen Veränderungen gelöscht.</p><p>Die Vorlagen-Skripte lassen sich auch direkt aufrufen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /usr/lib/lxc/templates/lxc-Vorlagenname -n CONTAINERNAME -p /Pfad/zum/Root-Dateisystem </pre></div></div><p>
Auf diese Weise ist es möglich, das Root-Dateisystem an einem anderen Ort zu speichern.</p><p>Minimalbeispiel einer Konfigurationsdatei für Vorlagen:</p><pre class="notranslate">lxc.network.type = veth
lxc.network.flags = up
lxc.network.link = br-lxc</pre><p>
Die Konfigurationsdatei wird durch die Vorlagen-Skripte um weitere Einträge erweitert.</p><div class="section_3"><h4 id="Die-Vorlagen-fuer-Ubuntu-und-Debian-Systeme">Die Vorlagen für Ubuntu- und Debian-Systeme<a class="headerlink" href="#Die-Vorlagen-fuer-Ubuntu-und-Debian-Systeme">¶</a></h4><p>
Die Vorlagen "ubuntu", "lucid",   "debian" und "lenny" erstellen ein Root-Dateisystem unter <strong>/var/lib/lxc/CONTAINERNAME</strong>. Beim ersten Aufruf wird das mittels <code class="notranslate">debootstrap</code> von den Ubuntu- oder Debian-Servern heruntergeladen und unter <strong>/var/cache/lxc/</strong> zwischengespeichert. Werden weitere Container mit derselben Vorlage erstellt, wird durch das Wiederverwenden dieses Caches die Erstellung enorm beschleunigt.</p><p>Wenn das Kommando beendet ist, erhält man den Hinweis, das Root-Passwort zu ändern. Das kann man machen, indem man mit <a class="internal" href="./chroot.html">chroot</a> das Root-Dateisystem des erstellten Containers betritt:</p><div class="bash"><div class="contents"><pre class="notranslate">chroot /var/lib/lxc/CONTAINERNAME/rootfs /bin/bash </pre></div></div><p>und dort das Passwort mit</p><div class="bash"><div class="contents"><pre class="notranslate">passwd root </pre></div></div><p>
ändert. Die Chroot-Umgebung verlässt man mit</p><div class="bash"><div class="contents"><pre class="notranslate">exit </pre></div></div><p>Wenn man eine <a class="internal" href="./lokale_paketquellen.html">lokale Paketquelle</a> wie <a class="internal" href="./lokale_paketquellen/apt-cacher-ng.html">apt-cacher-ng</a> einsetzt, kann man beim Erstellen von Containern über Vorlagen den Download minimieren, indem man die Umgebungsvariable <code class="notranslate">MIRROR</code> setzt, z.B.:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo MIRROR=http://localhost:3142/de.archive.ubuntu.com/ubuntu/ lxc-create -n lucid -t lucid </pre></div></div><p>
Man kann diese Umgebungsvariable auch in der Datei <strong>/etc/default/lxc</strong> festlegen.</p></div></div></div><div class="section_1"><h2 id="Container-starten-und-beenden">Container starten und beenden<a class="headerlink" href="#Container-starten-und-beenden">¶</a></h2><p>
</p><div class="section_2"><h3 id="Anwendungscontainer">Anwendungscontainer<a class="headerlink" href="#Anwendungscontainer">¶</a></h3><p>
Eine Anwendung in einem Container startet man mit:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo lxc-execute -n CONTAINERNAME Befehl </pre></div></div><p>
Wenn der Container nicht mit <code class="notranslate">lxc-create</code> erstellt wurde, muss man zusätzlich noch die Option <code class="notranslate">-f Konfiguration</code> angeben. Wird das Programm beendet, wird auch automatisch der Container beendet.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Konfigurationen mit der Einstellung <code class="notranslate">lxc.rootfs</code> sind nicht für Anwendungscontainer geeignet.
</p></div></div></div><div class="section_2"><h3 id="Systemcontainer-starten">Systemcontainer starten<a class="headerlink" href="#Systemcontainer-starten">¶</a></h3><p>
Einen Systemcontainer startet man mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo lxc-start -n Containername </pre></div></div><p>
Man erhält im aktiven Terminal eine Konsole, auf der man sich anmelden kann. Diese Konsole hat eine feste Größe von 80×24, unabhängig von der tatsächlichen Größe des Terminals und ist daher zum interaktiven Arbeiten nur bedingt geeignet. Die mit <code class="notranslate">lxc-console</code> geöffneten Konsolen haben diese Einschränkung nicht.</p><p>Alternativ kann man den Container auch als Dämon starten:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo lxc-start -n CONTAINERNAME -d </pre></div></div><p>
In diesem Fall kann man sich anmelden mit dem Befehl:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo lxc-console -n CONTAINERNAME </pre></div></div><p>(die Einstellung <code class="notranslate">lxc.tty</code> ist dafür in der Konfiguration erforderlich). Die LXC-Konsole beenden kann man mit den Tasten 
<span class="key">Strg</span>  + 
<span class="key">A</span>
<span class="key">Q</span> . Dabei bleibt man angemeldet und kann durch einen erneuten Aufruf von <code class="notranslate">lxc-console</code> die Sitzung fortführen.</p><p>Eine andere Möglichkeit zur Anmeldung am Gastsystem ist über <a class="internal" href="./ssh.html">SSH</a>.</p></div><div class="section_2"><h3 id="Systemcontainer-beenden">Systemcontainer beenden<a class="headerlink" href="#Systemcontainer-beenden">¶</a></h3><p>
Ein Systemcontainer sollte wie ein normales Betriebssystem <a class="internal" href="./herunterfahren.html">heruntergefahren</a> werden, indem man z.B. innerhalb des Gastsystems den Befehl (bei Ubuntu <code class="notranslate">sudo</code> voranstellen):</p><div class="bash"><div class="contents"><pre class="notranslate">shutdown -h now </pre></div></div><p>
oder</p><div class="bash"><div class="contents"><pre class="notranslate">halt </pre></div></div><p>
ausführt.</p><p>Sollte das aus irgendeinem Grund nicht möglich sein, kann man den Container mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo lxc-stop -n Containername </pre></div></div><p>
beenden.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Bevor das Hauptsystem heruntergefahren wird, sollten zuerst alle Container beendet werden. LXC macht das nicht selbständig. Für die Gastsysteme wäre das genauso, als wenn man einfach den Netzstecker ziehen würde.
</p></div></div></div></div><div class="section_1"><h2 id="Weitere-Befehle-zum-Verwalten-von-Containern">Weitere Befehle zum Verwalten von Containern<a class="headerlink" href="#Weitere-Befehle-zum-Verwalten-von-Containern">¶</a></h2><p>
</p><p>
</p><table><tr class="titel"><td colspan="3">Containerverwaltung </td></tr><tr class="kopf"><td>Befehl </td><td colspan="2">Beschreibung </td></tr><tr><td> <code class="notranslate">lxc-kill -n CONTAINERNAME SIGNUM</code> </td><td colspan="2">Das Signal <code class="notranslate">SIGNUM</code> wird an den ersten Benutzerprozess im Container gesendet </td></tr><tr><td> <code class="notranslate">lxc-monitor -n CONTAINERNAME</code> </td><td colspan="2">Der Zustand von Containern wird beobachtet. <code class="notranslate">CONTAINERNAME</code> kann auch ein regulärer Ausdruck sein, so dass mehrere oder alle Container beobachtet werden können. </td></tr><tr><td rowspan="2"><code class="notranslate">lxc-wait -n CONTAINERNAME -s ZUSTAND</code> </td><td colspan="2">Dieser Befehl wartet, bis der Container einen angegebenen Zustand angenommen hat. Dieser Befehl ist für Skripte nützlich. </td></tr><tr><td> <code class="notranslate">ZUSTAND</code> </td><td> Mögliche Zustände sind <code class="notranslate">STOPPED</code>, <code class="notranslate">STARTING</code>, <code class="notranslate">RUNNING</code>, <code class="notranslate">ABORTING</code> und <code class="notranslate">STOPPING</code>. Zustände können auch kombiniert werden (z.B. <code class="notranslate">RUNNING|STOPPED</code>) </td></tr><tr><td> <code class="notranslate">lxc-cgroup -n CONTAINERNAME SUBSYSTEM [WERT]</code> </td><td colspan="2">Eigenschaften des Containers können zur Laufzeit ausgelesen (ohne <code class="notranslate">WERT</code>) oder geändert (mit <code class="notranslate">WERT</code>) werden. </td></tr><tr><td rowspan="3"><code class="notranslate">lxc-ls</code> </td><td colspan="2">Anzeigen aller Container. Es stehen die gleichen Optionen wie für <a class="internal" href="./ls.html">ls</a> zu Verfügung, zum Beispiel: </td></tr><tr><td> <code class="notranslate">-l</code> </td><td> Informationen in Langform ausgeben </td></tr><tr><td> <code class="notranslate">-1</code> </td><td> Pro Zeile wird nur ein Container angezeigt. </td></tr><tr><td rowspan="4"><code class="notranslate">lxc-ps [Optionen]</code> </td><td colspan="2">Prozessinformationen anzeigen. Optionen sind: </td></tr><tr><td> <code class="notranslate">--name CONTAINERNAME</code> </td><td> Es werden die Prozesse von Containern angezeigt. <code class="notranslate">NAME</code> ist dabei eine durch Kommas getrennte Liste von Containern. </td></tr><tr><td> <code class="notranslate">--lxc</code> </td><td> Anzeige der Prozesse aller Container </td></tr><tr><td> <code class="notranslate">PS-OPTIONEN</code> </td><td> Die restlichen Optionen werden an den Befehl <a class="internal" href="./shell/ps.html">ps</a> weitergereicht. </td></tr><tr><td> <code class="notranslate">lxc-info -n CONTAINERNAME</code> </td><td colspan="2">Es wird der Zustand des Containers angezeigt. </td></tr><tr><td> <code class="notranslate">lxc-freeze -n CONTAINERNAME</code> </td><td colspan="2">Alle Prozesse innerhalb eines Containers werden angehalten. </td></tr><tr><td> <code class="notranslate">lxc-unfreeze -n CONTAINERNAME</code> </td><td colspan="2">Die mit <code class="notranslate">lxc-freeze</code> angehaltenen Prozesse eines Containers werden fortgesetzt. </td></tr><tr><td> <code class="notranslate">lxc-checkconfig</code> </td><td colspan="2">Überprüft, ob der Kernel LXC unterstützt (nur für ältere oder selbst erstellte Kernel notwendig) </td></tr><tr><td> <code class="notranslate">CONFIG=/path/to/config lxc-checkconfig</code> </td><td colspan="2">Überprüft, ob die Kernelkonfigurationsdatei <strong>/path/to/config</strong> LXC unterstützt. </td></tr></table><p>
Weitere Informationen liefern die <a class="internal" href="./man.html">Manpages</a> der einzelnen Befehle.</p></div><div class="section_1"><h2 id="Hinweise">Hinweise<a class="headerlink" href="#Hinweise">¶</a></h2><p>
LXC hat noch einige Einschränkungen im Vergleich mit anderen vergleichbaren Lösungen:</p><ul><li><p>Nicht alle Resourcen können vollständig isoliert werden. Das <strong>/proc/</strong>-Dateisystem des Host-Systems zum Beispiel muss in einem Container eingebunden werden. Das kann ein Sicherheitsproblem darstellen, denn dadurch können Programme, die im Container mit Root-Rechten ausgeführt werden, das Host-System beeinflussen. Deshalb sollten nicht vertrauenswürdige Benutzer oder Programme in einem Container niemals Root-Rechte erhalten. Seit <a class="internal" href="./precise_pangolin.html">Ubuntu 12.04</a> wird ein Container zwar durch <a class="internal" href="./apparmor.html">AppArmor</a> geschützt, aber das Ziel ist dabei, das Host-System vor versehentlichem Schaden durch den Container zu schützen und nicht vor bösartigen Aktionen.</p></li><li><p>LXC enthält noch keine Möglichkeit zur Live-Migration. Der dazu nötige Befehl <code class="notranslate">lxc-checkpoint</code> ist zwar schon vorhanden, aber noch nicht funktionsfähig.</p></li><li><p><a class="internal" href="./upstart.html">Upstart</a> und <a class="internal" href="./systemd.html">systemd</a> funktionieren nicht in einem Container.</p></li><li><p>Es ist zwar möglich, einem Container eine eigene IP-Adresse zuzuweisen, aber es ist nicht möglich zu verhindern, dass eine Anwendung im Container diese dann ändert.</p></li><li><p>Es fehlen verschiedene Einstellungsmöglichkeiten, wie das Festlegen eines garantierten Speichers oder einer maximalen Prozessanzahl.</p></li></ul><p>
Ein großer Vorteil von LXC ist die Integration in den Kernel. Durch die starke Modularisierung ist LXC auch sehr gut zur Anwendungsvirtualisierung geeignet.</p></div><div class="section_1"><h2 id="LXC-und-Hyper-V">LXC und Hyper-V<a class="headerlink" href="#LXC-und-Hyper-V">¶</a></h2><p>
Wird LXC in einem Hyper-V virtualisierten System eingesetzt, kann es zu Problemen bei der Verwendung einer Netzwerkbrücke kommen. Konkret kann es passieren, dass sich die virtuelle NIC nicht in den promiscous-Modus umschalten lässt (<a class="external" href="http://support.microsoft.com/kb/302348" rel="nofollow" title="http://support.microsoft.com/kb/302348">http://support.microsoft.com/kb/302348</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>).</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><div class="section_2"><h3 id="Intern">Intern<a class="headerlink" href="#Intern">¶</a></h3><p>
</p><ul><li><p><a class="internal" href="./arkose.html">Arkose</a> - auf LXC aufsetzende Sandbox-Lösung</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Ubuntu">Ubuntu<a class="headerlink" href="#Ubuntu">¶</a></h3><p>
</p><ul><li><p><a class="external" href="https://www.stgraber.org/2013/12/20/lxc-1-0-blog-post-series/" rel="nofollow">LXC 1.0: Blog post series</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Stéphane Graber, 12/2013 ff.</p></li><li><p><a class="external" href="https://www.stgraber.org/2016/03/11/lxd-2-0-blog-post-series-012/" rel="nofollow">LXD 2.0: Blog post series</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Stéphane Graber, 03/2016 ff.</p></li><li><p><a class="external" href="http://simos.info/blog/trying-out-lxd-containers-on-our-ubuntu/" rel="nofollow">Trying out LXD containers on our Ubuntu</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Blogbeitrag, 06/2016</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Allgemein">Allgemein<a class="headerlink" href="#Allgemein">¶</a></h3><p>
</p><ul><li><p><a class="external" href="http://www.ibm.com/developerworks/linux/library/l-lxc-containers/" rel="nofollow">LXC: Linux container tools</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - IBM developerWorks Linux Technical library, 02/2009</p></li><li><p><a class="external" href="http://lxc.teegra.net/" rel="nofollow">LXC HOWTO</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - für Arch-Linux, 12/2009</p></li><li><p><a class="external" href="http://en.opensuse.org/LXC" rel="nofollow">Gute Anleitung für openSUSE</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><p>
</p></div></div></div>
<p class="meta">
<a href="./lxc/a/revision/945818.html">Diese Revision</a> wurde am 29. Dezember 2017 01:24 von <a href="https://ubuntuusers.de/user/BillMaier/">BillMaier</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./lxc.html">LXC</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>