<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Windows-Partitionen_einbinden/NTFS-3G › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../windows-partitionen_einbinden/ntfs-3g.html">NTFS-3G</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Windows-Partitionen_einbinden/NTFS-3G">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../windows-partitionen_einbinden/ntfs-3g/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../windows-partitionen_einbinden/ntfs-3g/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../windows-partitionen_einbinden/ntfs-3g/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../windows-partitionen_einbinden/ntfs-3g/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../windows-partitionen_einbinden/ntfs-3g/a/backlinks.html">NTFS-3G</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="../trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../mount.html">mount (Partitionen temporär einbinden)</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../fstab.html">fstab (Partitionen statisch einbinden)</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../pakete_installieren.html">Installation von Programmen</a>, <em>optional</em></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../windows-partitionen_einbinden.html">Windows-Partitionen einbinden</a></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="../fuse.html">FUSE (Filesystem in Userspace)</a></p></li><li><p><a class="crosslink anchor" href="#source-6" id="source-6"></a> <a class="internal" href="../rechte.html">UNIX-Dateirechte</a></p></li><li><p><a class="crosslink anchor" href="#source-7" id="source-7"></a> <a class="internal" href="../acl.html">POSIX-ACL</a>, <em>optional</em></p></li><li><p><a class="crosslink anchor" href="#source-8" id="source-8"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-9" id="source-9"></a> <a class="internal" href="../sudo.html">Administrator-Rechte</a></p></li><li><p><a class="crosslink anchor" href="#source-10" id="source-10"></a> <a class="internal" href="../programme_kompilieren.html">Pakete aus dem Quellcode erstellen</a> (nur optional)</p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation-und-Verwendung">Installation und Verwendung
</a><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Transparente-Verwendung-in-Ubuntu">Transparente Verwendung in Ubuntu
</a></li><li><a class="crosslink" href="#NTFS-Partitionen-einhaengen">NTFS-Partitionen einhängen
</a></li><li><a class="crosslink" href="#Network-Assisted-Storage-NAS">Network Assisted Storage (NAS)
</a></li></ol></li><li><a class="crosslink" href="#Standard-Einstellungen">Standard-Einstellungen
</a></li><li><a class="crosslink" href="#Simulation-von-Dateirechten">Simulation von Dateirechten
</a><ol class="arabic"><li><a class="crosslink" href="#uid-und-gid">"uid" und "gid"
</a></li><li><a class="crosslink" href="#umask-fmask-und-dmask">"umask", "fmask" und "dmask"
</a></li></ol></li><li><a class="crosslink" href="#UNIX-Dateirechte-und-POSIX-ACL">UNIX-Dateirechte und POSIX-ACL
</a><ol class="arabic"><li><a class="crosslink" href="#permissions">"permissions"
</a></li><li><a class="crosslink" href="#acl">"acl"
</a></li></ol></li><li><a class="crosslink" href="#Windows-Kompatibilitaet">Windows-Kompatibilität
</a><ol class="arabic"><li><a class="crosslink" href="#User-Mapping">User-Mapping
</a></li><li><a class="crosslink" href="#Zugriffsrechte">Zugriffsrechte
</a></li><li><a class="crosslink" href="#Verknuepfungen">Verknüpfungen
</a></li><li><a class="crosslink" href="#compression">"compression"
</a></li><li><a class="crosslink" href="#inherit">"inherit"
</a></li></ol></li><li><a class="crosslink" href="#Daten-Sicherheit">Daten-Sicherheit
</a><ol class="arabic"><li><a class="crosslink" href="#Journaling">Journaling
</a></li><li><a class="crosslink" href="#Dateisystem-Inkonsistenz">Dateisystem-Inkonsistenz
</a></li></ol></li><li><a class="crosslink" href="#Tool-Sammlung-ntfsprogs">Tool-Sammlung "ntfsprogs"
</a><ol class="arabic"><li><a class="crosslink" href="#Defragmentierung">Defragmentierung
</a></li></ol></li><li><a class="crosslink" href="#Probleme-und-Loesungen">Probleme und Lösungen
</a><ol class="arabic"><li><a class="crosslink" href="#Dual-Boot-und-Ruhezustand-Hibernate">Dual-Boot und Ruhezustand (Hibernate)
</a></li><li><a class="crosslink" href="#Freigabe-von-NTFS-Partitionen-im-Netzwerk">Freigabe von NTFS-Partitionen im Netzwer...</a></li><li><a class="crosslink" href="#Unguenstige-Rechte-auf-externen-Partitionen">Ungünstige Rechte auf externen Partition...</a></li><li><a class="crosslink" href="#Remount-RW-nicht-moeglich">Remount RW nicht möglich
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>
<img alt="NTFS-3G.png" class="image-left" src="../_/d24bd424b4ca1b54e9b0edb12339002dcee4ef42.png"/>
<strong>NTFS</strong> (<strong>N</strong>ew <strong>T</strong>echnology <strong>F</strong>ile <strong>S</strong>ystem) ist ein proprietäres Dateisystem von Microsoft für das Betriebssystem Microsoft Windows NT und dessen Nachfolger. Im Gegensatz zum Dateisystem FAT bietet NTFS einen gezielten Zugriffsschutz auf Dateiebene sowie größere Datensicherheit durch partielles <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Journaling%20Dateisystem">Journaling</a>. Bei NTFS ist die Dateigröße nicht wie bei FAT auf 4 GB beschränkt.</p><p><strong>NTFS-3G</strong> (NTFS-Treiber der <strong>3</strong>.<strong>G</strong>eneration) ist ein auf FUSE <sup><a href="#source-5">[5]</a></sup> aufsetzender Treiber für das NTFS-Dateisystem für Linux und andere verwandte Betriebssysteme. Die erste stabile Version 1.0 wurde am 21. Februar 2007 veröffentlicht. Seither wurden zahlreiche Verbesserungen und Erweiterungen vorgenommen. Die wichtigste davon ist die volle Unterstützung der UNIX-Besitz- und Zugriffsrechte sowie der <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Access_Control_List">POSIX-ACL</a> <sup><a href="#source-7">[7]</a></sup> und die Interoperabilität mit Windows durch optionales User Mapping und Rechte-Vererbung seit der Version 2009.11.14. Außerdem wird nun seit der Version 2010.8.8 (8. August 2010) auch der transparente Schreib- und Lesezugriff in komprimierten Ordnern voll unterstützt. Mit der Version 2011.4.12 (10. April 2011) wurden nun alle Funktionen des früher eigenständigen Pakets <strong>ntfsprogs</strong> in NTFS-3G integriert.</p><p>Entwickelt und vertrieben wird NTFS-3G heute vom finnischen Unternehmen <a class="external" href="http://www.tuxera.com" rel="nofollow">Tuxera</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>, dessen CTO Szabolcs Szakacsits wesentlich zur Entwicklung des Treibers beigetragen hat. Der Dateisystemtreiber wird in einem dualen Lizenzsystem neben der freien Version (Community Version) auch als "Tuxera NTFS embedded" unter einer proprietären Lizenz für Unternehmen angeboten.</p><p>Dieser Artikel muss sich auf die wichtigsten Eigenschaften von NTFS-3G beschränken; eine vollständige Übersicht bietet das <a class="external" href="http://www.tuxera.com/community/ntfs-3g-manual" rel="nofollow">NTFS-3G Manual</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>. Allgemeine Hinweise zur Verwendung von Windows-Partitionen in Linux bietet der Artikel <a class="internal" href="../windows-partitionen_einbinden.html">Windows-Partitionen einbinden</a>.</p><div class="section_1"><h2 id="Installation-und-Verwendung">Installation und Verwendung<a class="headerlink" href="#Installation-und-Verwendung">¶</a></h2><p>
</p><div class="section_2"><h3 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h3><p>
NTFS-3g gehört zur Standardinstallation und ist deshalb auf jedem frisch installierten System vorhanden. Es ist durch das Paket <strong>ntfs-3g</strong> bereitgestellt.</p><p>Möchte man jedoch die jeweils neueste Version von NTFS-3G verwenden, so kann man deren stabilen Quelltext von der <a class="external" href="http://www.tuxera.com/community/ntfs-3g-download/" rel="nofollow">Projektseite</a> (<a class="external" href="http://jp-andre.pagesperso-orange.fr/advanced-ntfs-3g.html" rel="nofollow">Erweiterte Versionen</a>) und auch deren <a class="external" href="https://sourceforge.net/p/ntfs-3g/_list/git/" rel="nofollow">Entwicklerversionen</a> herunterladen und kompilieren <sup><a href="#source-10">[10]</a></sup>. Das Paket <strong>fuse</strong> sowie die zum Kompilieren benötigten Pakete <strong>gcc-4.5</strong> und <strong>libc-dev-bin</strong> sind in Ubuntu standardmäßig vorhanden, für jüngere Entwicklerversionen werden allerdings noch <strong>build-essential</strong> und <strong>libgcrypt-dev</strong> benötigt.</p></div><div class="section_2"><h3 id="Transparente-Verwendung-in-Ubuntu">Transparente Verwendung in Ubuntu<a class="headerlink" href="#Transparente-Verwendung-in-Ubuntu">¶</a></h3><p>
NTFS-Partitionen können wie andere Partitionen im <a class="internal" href="../dateimanager.html">Dateimanager</a> (z.B. Nautilus) mit einem Mausklick temporär eingebunden werden. Dabei wird automatisch ein Mountpunkt im Systemordner <strong>/media</strong> erzeugt. Wenn die Voraussetzungen dafür erfüllt sind (vor allem muss der eingeloggte Benutzer als Mitglied der Gruppe <code class="notranslate">fuse</code> Zugriff zum FUSE-Dateisystem haben), dann verwendet Ubuntu dafür automatisch den Treiber NTFS-3G.</p><p>Sind hingegen die Voraussetzungen für die Verwendung von NTFS-3G nicht gegeben, so verwendet Ubuntu als "Fallback" das Standard-NTFS-Kernelmodul. Da dieses bisher keinen wirklich sicheren Schreibzugriff gestattet, werden dann alle NTFS-Partitionen unabhängig von den jeweils angegebenen mount-Optionen im Modus <em>ro</em> (nur lesen, keine Schreibrechte) eingebunden.</p></div><div class="section_2"><h3 id="NTFS-Partitionen-einhaengen">NTFS-Partitionen einhängen<a class="headerlink" href="#NTFS-Partitionen-einhaengen">¶</a></h3><p>
NTFS-Partitionen lassen sich auf die gleiche Weise temporär <sup><a href="#source-1">[1]</a></sup> oder statisch <sup><a href="#source-2">[2]</a></sup> einhängen, wie Partitionen mit anderen Dateisystemen. Anders als beim Einbinden mit Mausklick muss man zuerst einen leeren Ordner als Mountpunkt einrichten. Die Angabe des Dateisystems (<code class="notranslate">ntfs</code>) bzw. des Treibers (<code class="notranslate">ntfs-3g</code>) ist optional, denn Ubuntu erkennt das Dateisystem NTFS automatisch. Wenn möglich, dann verwendet Ubuntu automatisch den Treiber NTFS-3G, ohne dass dies im Mount-Befehl oder im <strong>fstab</strong>-Eintrag angegeben werden muss. Folgende Befehlszeilen
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount PARTITION MOUNTPUNKT
sudo mount -t ntfs PARTITION MOUNTPUNKT
sudo mount -t ntfs-3g PARTITION MOUNTPUNKT </pre></div></div><p>
bewirken also das Gleiche. Zur Kennzeichnung der Partition kann deren <a class="internal" href="../uuid.html">UUID</a>, <a class="internal" href="../labels.html">Label</a> oder auch ihr Eintrag in <strong>/dev</strong> verwendet werden.
</p><div class="bash"><div class="contents"><pre class="notranslate"># Beispiel:
sudo mount -t ntfs UUID=58CC69AFCC6987D8 /media/Bilder </pre></div></div><p>
Soll die Partition statisch gemountet werden, lautet der entsprechende Eintrag in <strong>/etc/fstab</strong> <sup><a href="#source-2">[2]</a></sup>:
</p><pre class="notranslate">UUID=58CC69AFCC6987D8 /media/Bilder ntfs defaults 0 0</pre><p>Durch einen Eintrag der folgenden Art in <strong>/etc/fstab</strong> <sup><a href="#source-2">[2]</a></sup>
</p><pre class="notranslate">UUID=58CC69AFCC6987D8 /media/Bilder ntfs noauto,users 0 0</pre><p>
lässt sich das temporäre Mounten <sup><a href="#source-1">[1]</a></sup> so vorbereiten, dass man nicht mit "Administrator-Rechten" <sup><a href="#source-9">[9]</a></sup>, sondern auch gewöhnliche Benutzer mounten können. Dies ist aber nur möglich, wenn für die Datei <strong>/bin/ntfs-3g</strong> das <a class="internal" href="../rechte.html#Sonderrechte">SUID-Bit</a> gesetzt ist. Dies geschieht mit folgender Befehlszeile
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chmod +s /bin/ntfs-3g </pre></div></div><p>
In den Versionen vor NTFS-3G 1.2506 wird diese Möglichkeit noch nicht unterstützt.
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Der Einsatz des SUID-Bit ist eine mögliche Sicherheitslücke und sollte nur mit Bedacht verwendet werden.
</p></div></div><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Bei Einträgen  in <strong>/etc/fstab</strong> <sup><a href="#source-2">[2]</a></sup> ist zu beachten, dass bei NTFS-Partitionen im 6. (letzten) Feld die Ziffer 0 (Null) stehen muss, weil NTFS-3G eine automatische Prüfung des Dateisystems beim Einhängen nicht unterstützt.
</p></div></div><p>
Die meisten üblichen <a class="internal" href="../mount.html#Optionen">Mount-Optionen</a> werden auch von NTFS-3G unterstützt. Deshalb werden in diesem Artikel nur spezielle Optionen von NTFS-3G angesprochen.</p></div><div class="section_2"><h3 id="Network-Assisted-Storage-NAS">Network Assisted Storage (NAS)<a class="headerlink" href="#Network-Assisted-Storage-NAS">¶</a></h3><p>
<a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Network_Attached_Storage">Netzwerkfähige Speichergeräte (NAS)</a> verwenden häufig eine Linux-Version als Betriebssystem. NTFS-Partitionen werden dann dort intern meist mit "Tuxera NTFS embedded", der kommerziellen Version von NTFS-3G, eingebunden. Die Kommunikation mit den Clients erfolgt aber über einen Netzwerk-Dienst, z.B. <a class="internal" href="../samba.html">Samba</a> oder <a class="internal" href="../nfs.html">NFS</a>. Deshalb sind auf den Clients beim Einbinden die Mount-Optionen des jeweiligen Netzwerk-Dienstes (für Samba siehe <a class="internal" href="../samba_client_cifs.html">Samba Client cifs</a>) und nicht etwa die von NTFS-3G zu verwenden.</p></div></div><div class="section_1"><h2 id="Standard-Einstellungen">Standard-Einstellungen<a class="headerlink" href="#Standard-Einstellungen">¶</a></h2><p>
Beim Automatischen Einbinden von internen NTFS-Partitionen bei der Installation von Ubuntu, beim Einbinden mit Mausklick und bei Einbinden ohne die Angabe weiterer Mount-Parameter werden von NTFS-3G folgende Standard-Einstellungen verwendet:
</p><ul><li><p>Besitz- und Zugriffsrechte der Ordner und Dateien auf der Partition werden ignoriert.</p></li><li><p>Als scheinbarer Eigentümer und Gruppe wird für alle Ordner "Root/Root" angenommen (simuliert).</p></li><li><p>Jedermann hat auf alle Ordner und Dateien der Partition vollen Schreib- und Lesezugriff (Mode 0777).</p></li><li><p>Alle Dateien auf der Partition gelten von den Dateirechten her als ausführbar.</p></li><li><p>Als Eigentümer aller mittels NTFS-3G neu angelegter Ordner und Dateien gilt in Windows "Fremder Benutzer". Jedermann hat dort vollen Zugriff.</p></li></ul><p>
Beim automatischen Einbinden externer Laufwerke (auch USB-Sticks) beim Booten oder <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Hotplug">Hotplug</a> verwendet NTFS-3G in Ubuntu andere Standard-Einstellungen:
</p><ul><li><p>Besitz- und Zugriffsrechte der Ordner und Dateien auf der Partition werden ignoriert.</p></li><li><p>Als scheinbarer Eigentümer und Gruppe wird für alle Ordner USER/USER angenommen (simuliert), wobei USER den jeweils eingeloggten Benutzer bezeichnet.</p></li><li><p>Der Eigentümer hat auf alle Ordner und Dateien der Partition vollen Schreib- und Lesezugriff und die Mitglieder der Gruppe USER haben Lesezugriff (Mode 0750 bzw. 0640).</p></li><li><p>Alle Dateien auf der Partition gelten von den Dateirechten her als <em>nicht</em> ausführbar.</p></li><li><p>Als Eigentümer aller mittels NTFS-3G neu angelegter Ordner und Dateien gilt in Windows "Fremder Benutzer". Jedermann hat dort vollen Zugriff.</p></li></ul><p>
Werden externe Laufwerke nicht automatisch beim Booten oder Hotplug eingebunden, sondern durch einen Eintrag in <strong>/etc/fstab</strong>, so werden sie wie interne Laufwerke behandelt.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Weil dann dort jedermann uneingeschränkten Zugriff auf alle Dateien hat, kann es ein erhebliches Sicherheitsrisiko bedeuten, NTFS-Partitionen mit sensiblen Daten unter den Standard-Einstellungen von NTFS-3G einzubinden. Ganz besonders gilt dies für Windows-Systempartitionen in Dual-Boot-Systemen.
</p></div></div></div><div class="section_1"><h2 id="Simulation-von-Dateirechten">Simulation von Dateirechten<a class="headerlink" href="#Simulation-von-Dateirechten">¶</a></h2><p>
Ähnlich wie dies auch beim Einbinden von VFAT-Partitionen <sup><a href="#source-4">[4]</a></sup> möglich ist, kann NTFS-3G beim Einbinden von NTFS-Partitionen für diese Besitz- und Zugriffsrechte simulieren. Die simulierten Dateirechte gelten dann nur solange die Partition eingebunden bleibt, und können bei jedem erneuten Einbinden wieder unabhängig von ihren vorherigen Werten neu festgelegt werden. Die echten Dateirechte auf der NTFS-Partition werden davon nicht berührt.</p><p>Die simulierten Dateirechte gelten immer für die gesamte Partition. Für einzelne Dateien können sie mit dem Befehl <code class="notranslate">chmod</code> allenfalls weiter eingeschränkt, nicht aber erweitert werden. Der Befehl <code class="notranslate">chown</code> ist bei simulierten Dateirechten unwirksam.
</p><div class="section_2"><h3 id="uid-und-gid">"uid" und "gid"<a class="headerlink" href="#uid-und-gid">¶</a></h3><p>
Mit den Optionen <code class="notranslate">uid=UID</code> und <code class="notranslate">gid=GID</code> werden Benutzer und Gruppe für die Partition simuliert. Für UID und GID kann man wahlweise die numerischen Werte oder die Namen eintragen. Fehlt der Eintrag für <code class="notranslate">gid</code>, so wird die Hauptgruppe des angegebenen Benutzers gewählt. Fehlt hingegen der Eintrag für <code class="notranslate">uid</code>, so erscheint "Root" als Eigentümer.
</p></div><div class="section_2"><h3 id="umask-fmask-und-dmask">"umask", "fmask" und "dmask"<a class="headerlink" href="#umask-fmask-und-dmask">¶</a></h3><p>
Auch die Zugriffsrechte auf Ordner und Dateien können bereits beim Einbinden für die gesamte Partition eingeschränkt werden. Möchte man für Ordner und Dateien die gleichen Einschränkungen vornehmen, geschieht dies mittels <code class="notranslate">umask</code>. Getrennte Einschränkungen sind mit <code class="notranslate">dmask</code> (für Ordner) und <code class="notranslate">fmask</code> (für Dateien) möglich.</p><p>Bei diesen Optionen handelt es sich um <em>negative</em> Maskierungen in oktaler Darstellung (siehe dazu <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Unix-Dateirechte">Unix-Dateirechte</a>, d.h. die angegebenen Bits werden aus der Standard-Einstellung <em>gelöscht</em>. So bewirkt z.B. die Option <code class="notranslate">umask=0027</code> auf internen Partitionen den Modus 0750.
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die hier verwendete <em>negative</em> Maskierung darf nicht mit der <em>positiven</em> Maskierung verwechselt werden, die z.B. in <a class="internal" href="../samba.html">Samba</a> verwendet wird.
</p></div></div><p>
</p></div></div><div class="section_1"><h2 id="UNIX-Dateirechte-und-POSIX-ACL">UNIX-Dateirechte und POSIX-ACL<a class="headerlink" href="#UNIX-Dateirechte-und-POSIX-ACL">¶</a></h2><p>
NTFS-3G kann auch wie "echte" Linux-Dateisysteme (z.B. ext4) dateigebundene Besitz- und Zugriffsrechte vergeben und verwalten. Dies geschieht über die Mount-Optionen <code class="notranslate">permissions</code> und <code class="notranslate">acl</code>. Im Gegensatz zu den simulierten Dateirechten werden diese echten Dateirechte dauerhaft auf der NTFS-Partition eingetragen und sind nach dem Aushängen und erneuten Einbinden der Partition noch unverändert vorhanden.</p><p>Die Optionen <code class="notranslate">permissions</code> und <code class="notranslate">acl</code> setzen evtl. vorhandene konkurrierende Optionen zur Simulation von Dateirechten außer Kraft.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Obwohl sich mit den Optionen <code class="notranslate">permissions</code> und <code class="notranslate">acl</code> eingebundene NTFS-Partitionen wie vollwertige Linux-Dateisysteme verhalten, können Dateioperationen auf NTFS-Partitionen trotzdem deutlich langsamer sein.
</p></div></div><div class="section_2"><h3 id="permissions">"permissions"<a class="headerlink" href="#permissions">¶</a></h3><p>
Die in Linux verwendeten UNIX-Dateirechte <sup><a href="#source-6">[6]</a></sup> bestehen aus den Grundrechten <em>Lesen, Schreiben</em> und <em>Ausführen</em> sowie den Sonderrechten <em>setuid</em>, <em>setgid</em> und <em>sticky Bit</em>. Diese werden für den <em>Eigentümer</em>, die <em>Gruppe</em> und <em>Andere</em> getrennt festgelegt. Die Abbildung der Grundrechte auf die in NTFS verwendeten Windows-Dateirechte ist kein Problem. NTFS-3G bildet auch die Sonderrechte ab, sodass sich mit der Option <code class="notranslate">permissions</code> die Verwaltung der gesamten UNIX-Dateirechte auf einer NTFS-Partition in Linux genau so darstellt wie in einem "echten" Linux-Dateisystem. Auch lassen sich dann die Befehle <a class="internal" href="../chown.html">chown</a>, <a class="internal" href="../chgrp.html">chgrp</a> sowie <a class="internal" href="../chmod.html">chmod</a> auf NTFS-Partitionen ohne Einschränkungen zum nachträglichen Ändern von Dateirechten verwenden.</p></div><div class="section_2"><h3 id="acl">"acl"<a class="headerlink" href="#acl">¶</a></h3><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Dieser Abschnitt erfordert mehr Erfahrung im Umgang mit Windows und Linux und ist daher nur für fortgeschrittene Benutzer gedacht. 
</p></div></div><p>
Nicht nur die Identifikation der Benutzer und Gruppen, sondern auch die Verwaltung der Zugriffsrechte unterscheidet sich in Windows wesentlich von der in Linux. Während in Linux standardmäßig die UNIX Dateirechte <sup><a href="#source-6">[6]</a></sup> verwendet werden, wird unter Windows NT jedem Ordner und jeder Datei ein "<em>Security Descriptor</em>" zugeordnet, der eine <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Access%20Control%20List">ACL</a> (<span class="underline">A</span>ccess <span class="underline">C</span>ontrol <span class="underline">L</span>ist) enthalten kann. Ist keine ACL vorhanden, so erhält jeder Benutzer Vollzugriff auf das Objekt. Mit dieser ACL lassen sich die Zugriffsrechte wesentlich differenzierter festlegen als mit den UNIX-Dateirechten.</p><p>Seit der <a class="internal" href="../jaunty_jackalope.html">Ubuntu 9.04</a> werden nun auch in Ubuntu-Linux ACL <sup><a href="#source-7">[7]</a></sup> standardmäßig unterstützt. Diese entsprechen aber der (nicht offiziellen) Norm POSIX-1003.1e und sind mit den von Windows verwendeten ACL nicht identisch. NTFS-3G verwendet notwendigerweise zur Festlegung der Zugriffsrechte im NTFS-Dateisystem die Windows-ACL.</p><p>Die Option <code class="notranslate">permissions</code> bewirkt, dass beim Anlegen neuer Ordner und Dateien die UNIX-Dateirechte in eine Windows-ACL übernommen werden. Dies ist immer problemlos möglich. Durch die Option <code class="notranslate">acl</code> werden bei Ordnern und Dateien zusätzlich auch die POSIX-ACL von NTFS-3G unterstützt. Dies ist allerdings systembedingt nur in dem Rahmen möglich, wie diese sich in Windows-ACL übertragen lassen, was nicht in jedem Fall automatisch gewährleistet ist.</p></div></div><div class="section_1"><h2 id="Windows-Kompatibilitaet">Windows-Kompatibilität<a class="headerlink" href="#Windows-Kompatibilitaet">¶</a></h2><p>
</p><div class="section_2"><h3 id="User-Mapping">User-Mapping<a class="headerlink" href="#User-Mapping">¶</a></h3><p>
In der Regel wird man NTFS-Partitionen nicht nur in Linux, sondern abwechselnd in Linux und Windows benutzen. Dann wird man Wert darauf legen, dass beide Betriebssysteme gegenseitig die Besitz- und Zugriffsrechte anerkennen. Besonders wichtig ist dies bei Dual-Boot-Systemen.</p><p>Hierfür reicht es aber nicht aus, die Optionen <code class="notranslate">permissions</code> und nötigenfalls noch <code class="notranslate">acl</code> zu setzen. Denn Linux verwendet zur Identifikation von Benutzer und Gruppe die Zahlenwerte UID und GID, das Dateisystem NTFS verwendet dafür hingegen den Windows-spezifischen <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Security%20Identifier">SID</a>. NTFS-3G kann aber nicht selbständig erkennen, welche SID es jeweils einem UID oder GID zuordnen muss. Die Zuordnung von UID und GID zu SID geschieht vielmehr über eine auf der betreffenden NTFS-Partition befindliche, versteckte Datei <strong>.NTFS-3G/UserMapping</strong>.</p><p>Die Datei <strong>.NTFS-3G/UserMapping</strong> ist eine reine Textdatei. Die einzelnen Zeilen sind durch Doppelpunkte in drei Felder unterteilt. Das erste Feld enthält einen UID, das zweite einen GID und das dritte den jeweils zugeordneten SID. Da jedem UID und jedem GID ein eigener SID zuzuordnen ist, benötigt man für jede Kombination von Benutzer und Gruppe also zwei Zeilen; es ist nicht zulässig, UID und GID in der gleichen Zeile einzutragen. Zum Erstellen einer Zuordnungstabelle ist in NTFS-3G das Tool <code class="notranslate">ntfs-3g.usermap</code> enthalten.</p><p>Man muss nun in folgender Reihenfolge vorgehen:
</p><ol class="arabic"><li><p>Zuerst müssen die SID für alle Benutzer festliegen, die eigene Rechte auf der Partition haben sollen. Deshalb müssen als Erstes für diese in Windows Accounts eingerichtet werden.</p></li><li><p>Dann müssen diese Benutzer auf der Partition <em>von Windows aus</em> jeweils mindestens eine Datei oder einen Ordner anlegen, um ihren SID auf der Partition bekannt zu machen. Man merkt sich nun oder notiert, welchem Eigentümer und welcher Gruppe die einzelnen Dateien in Linux zugeordnet werden sollen.</p></li><li><p>Jetzt wechselt man ins Linux-Betriebssystem, <em>hängt aber dort die NTFS-Partition noch nicht ein</em>!</p></li><li><p>Nun gibt man in einem <a class="internal" href="../terminal.html">Terminal</a> folgende Befehlszeile ein</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ntfs-3g.usermap PARTITION </pre></div></div><p>wobei zur Kennzeichnung der Partition wieder wahlweise deren <a class="internal" href="../uuid.html">UUID</a>, <a class="internal" href="../labels.html">Label</a> oder auch ihr Eintrag in <strong>/dev</strong> verwendet werden kann.</p></li><li><p>Man erhält nun für jede der Dateien je eine Zeilen-Vorlage für den Eigentümer und für die Gruppe, in der der SID bereits eingetragen ist. Man muss diese Zeilen nur noch dadurch ergänzen, dass man den betreffenden UID bzw. GID ins richtige (!) Feld einträgt. Für UID und GID können wahlweise die numierischen Werte oder die Namen eingetragen werden.</p></li><li><p>Nun kann man die Partition in Linux einhängen. Eigentümer und Gruppen sollten einander nun in Windows und Linux wechselseitig erkennen.</p></li></ol><p>Der umgekehrte Weg, Dateien, die über NTFS-3G von Linux aus auf der Partition angelegt wurden, nachträglich einen SID zuzuordnen, ist nicht ohne großen administrativen Aufwand möglich.</p><p>Möglicherweise ist die Zuordnung zwischen den SID in Windows und den UID und GID in Linux nicht vollständig. Dann legt NTFS-3G für die dort fehlenden Linux-Benutzer zufällige SID an, die aber von Windows nicht zugeordnet werden können. Dateien dieser Benutzer erscheinen dann in Windows als Eigentum eines "fremden Benutzers", und jedermann hat darauf Zugriff. Umgekehrt erscheinen Dateien, die von Windows-Benutzern angelegt wurden, die in Linux unbekannt sind, dort als Eigentum von "Root", und jedermann hat darauf vollen Zugriff.</p><p>Wenn auf der NTFS-Partition eine Datei <strong>.NTFS-3G/UserMapping</strong> vorhanden ist, dann setzt NTFS-3G automatisch die Option <code class="notranslate">permissions</code>, auch wenn diese nicht eingetragen ist. Außerdem wird dann zusätzlich auch die Option <code class="notranslate">acl</code> gesetzt, sofern kein Eintrag für <code class="notranslate">permissions</code> vorliegt.</p><p>Mit der Option <code class="notranslate">usermapping=DATEINAME</code> kann auch eine beliebige andere Datei als Zuordnungsdatei verwendet werden, sodass man z.B. bei externen Laufwerken die Zuordnung abhängig vom Rechner festlegen kann. Die so festgelegte Zuordnungsdatei darf sich auch auf jeder anderen Partition befinden, also bei externen Laufwerken auch z.B. auf einer internen Partition des jeweiligen Rechners.</p></div><div class="section_2"><h3 id="Zugriffsrechte">Zugriffsrechte<a class="headerlink" href="#Zugriffsrechte">¶</a></h3><p>
Ist nur die Option <code class="notranslate">permissions</code>, nicht aber die Option <code class="notranslate">acl</code> gesetzt, so werden nur die die UNIX-Dateirechte <sup><a href="#source-6">[6]</a></sup> berücksichtigt. Diese lassen sich ohne Schwierigkeiten auf die Windows-ACL abbilden, sodass Windows die in Linux festgelegten Rechte vollständig berücksichtigen kann. Umgekehrt lassen sich aber die Windows-ACL nicht vollständig auf die UNIX-Dateirechte abbilden. NTFS-3G kann in diesem Fall nur solche in Windows getroffene Festlegungen berücksichtigen, die den UNIX-Dateirechten entsprechen.</p><p>Ist zusätzlich noch die Option <code class="notranslate">acl</code> gesetzt, so stehen in Linux die gesamten POSIX-ACL <sup><a href="#source-7">[7]</a></sup> zur Verfügung. Auf diese lassen sich praktisch alle Windows-ACL abbilden, sodass NTFS-3G alle in Windows festgelegten Dateirechte berücksichtigen kann. Leider sind aber nicht alle in den POSIX-ACL möglichen Kombinationen auch in Windows zulässig. Oftmals erkennt und berücksichtigt zwar Windows auch in diesen Fällen die in Linux festgelegten Rechte. Von Windows-Administrations-Werkzeugen werden sie aber falsch interpretiert bzw. fehlerhaft bearbeitet.</p><p>Aus diesen Gründen sollte man beide Systeme gut kennen und vor allem komplexe Dateirechte nur in demjenigen Betriebssystem administrieren, in dem sie festgelegt wurden.</p></div><div class="section_2"><h3 id="Verknuepfungen">Verknüpfungen<a class="headerlink" href="#Verknuepfungen">¶</a></h3><p>
NTFS-3G hat immer schon harte als auch <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Symbolische_Verkn%C3%BCpfung">Symbolische Verknüpfungen</a> ("Symlinks") auf NTFS-Partitionen unterstützt. Windows Ordner- und Volumen-Verweise (sog. Junctions) werden - <a class="external" href="http://www.tuxera.com/community/ntfs-3g-advanced/junction-points-and-symbolic-links/" rel="nofollow">soweit auflösbar</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - in Symlinks übersetzt, nicht jedoch die z.B. mittels Windows-Explorer erzeugten Verknüpfungsdateien (*.lnk). Seit der Version <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Microsoft%20Windows%20Vista">NT 6.0 (Vista)</a> (<a class="external" href="http://schinagl.priv.at/nt/hardlinkshellext/linkshellextension.html#download" rel="nofollow">mit Fremdtreiber auch unter XP</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>) werden symbolische Verknüpfungen auch von Windows unterstützt. Bis zum bisherigen Stand (<a class="external" href="http://jp-andre.pagesperso-orange.fr/advanced-ntfs-3g.html" rel="nofollow">NTFS-3G 2016.2.22AR.1</a>) unter Linux erzeugte und auch funktionelle Symlinks sind jedoch nicht Windows-kompatibel und erscheinen deshalb dort als ungültig, sodass sie bisher nur auf Partitionen sinnvoll sind, wo sie ausschließlich von Linux verwendet werden.</p></div><div class="section_2"><h3 id="compression">"compression"<a class="headerlink" href="#compression">¶</a></h3><p>
NTFS hat ein besonderes Speicherformat für komprimierte Dateien, das den Anwendungsprogrammen transparentes Lesen und Schreiben erlaubt. NTFS-3G konnte dieses Format schon immer lesen; seit der Version 2009.11.14 können auch neue komprimierte Dateien erzeugt oder weitere Dateien in komprimierte Ordner eingefügt werden. Erst seit der Version 2010.8.8 (Ubuntu 11.04 Natty) können jedoch auch bereits existierende komprimierte Dateien verändert oder überschrieben werden.</p><p>Wenn die Option <code class="notranslate">compression</code> gesetzt ist, werden Dateien von NTFS-3G in Ordnern, die als "<em>komprimiert</em>" gekennzeichnet sind, komprimiert gespeichert. In anderen Ordnern werden die Dateien dessen ungeachtet unkomprimiert gespeichert. Für das Lesen komprimierter Dateien ist diese Option nicht nötig.</p><p>Die Option <code class="notranslate">compression</code> betrifft nur das transparente Komprimieren und Dekomprimieren im speziellen NTFS-Format; die Verwendung anderer Kompressionsmethoden oder <a class="internal" href="../packprogramme.html">Packprogramme</a> wird davon nicht beeinflusst.</p></div><div class="section_2"><h3 id="inherit">"inherit"<a class="headerlink" href="#inherit">¶</a></h3><p>
In Windows werden beim Anlegen neuer Ordner und Dateien die Zugriffsrechte vom jeweils übergeordneten Ordner übernommen ("geerbt"), während diese in Ubuntu standardmäßig je nach dem gültigen Wert von <em>umask</em> unabhängig von den Zugriffsrechten des Ordners neu festgelegt werden. Ist die Option <code class="notranslate">inherit</code> gesetzt, werden beim Anlegen neuer Ordner die in Windows gültigen Regeln verwendet.</p><p>Die Option <code class="notranslate">inherit</code> betrifft nur die Zugriffsrechte; die Eigentumsrechte werden davon nicht berührt.</p></div></div><div class="section_1"><h2 id="Daten-Sicherheit">Daten-Sicherheit<a class="headerlink" href="#Daten-Sicherheit">¶</a></h2><p>
</p><div class="section_2"><h3 id="Journaling">Journaling<a class="headerlink" href="#Journaling">¶</a></h3><p>
NTFS-3G unterstützt "Partielles Journaling" und entspricht damit ungefähr der Default-Einstellung in ext3 und ext4. Dies bedeutet, dass nach einem ungeregelten Abbruch (auch Absturz) das inkonsistent gewordene Dateisystem als Ganzes wieder repariert werden kann. Dateien, bei denen im Moment des Abbruchs gerade Schreibvorgänge am Laufen waren, können aber trotzdem beschädigt sein. Ein Datenverlust kann deshalb nicht sicher ausgeschlossen werden.</p><p>"Full Journaling", wie es in ext3 und ext4 optional einstellbar und in ReiserFS Standard ist, lässt sich mit NTFS nicht verwirklichen.</p></div><div class="section_2"><h3 id="Dateisystem-Inkonsistenz">Dateisystem-Inkonsistenz<a class="headerlink" href="#Dateisystem-Inkonsistenz">¶</a></h3><p>
Dateisysteme mit fehlerhaftem Journal werden standardmäßig von NTFS-3G eingelesen und dabei repariert. Dies lässt sich durch die Mount-Option <code class="notranslate">norecover</code> unterbinden. Stärker beschädigte NTFS-Dateisysteme können eventuell von NTFS-3G nicht repariert werden; es kann sein, dass diese sich dann auch gar nicht mehr einbinden lassen, ohne dass vorher in Windows eine Reparatur mittels <code class="notranslate">chkdsk</code> durchgeführt wird. Auch das Tool <em>ntfsfix</em> (s.u.) kann oftmals solche Partitionen nicht selbst reparieren; es setzt dann aber ein Flag, dass beim nächsten Einbinden in Windows dort automatisch <code class="notranslate">chkdsk</code> ausgeführt wird.</p><p>Mit der Mount-Option <code class="notranslate">force</code> lässt sich erreichen, dass NTFS-3G auch schadhafte Partitionen einbindet. Da dann aber keine Datensicherheit gewährleistet ist, sollte man hiervon nur mit größter Vorsicht Gebrauch machen.</p></div></div><div class="section_1"><h2 id="Tool-Sammlung-ntfsprogs">Tool-Sammlung "ntfsprogs"<a class="headerlink" href="#Tool-Sammlung-ntfsprogs">¶</a></h2><p>
Mit den Routinen der Sammlung <strong>ntfsprogs</strong> lassen sich verschiedene Aufgaben mit NTFS-Partitionen durchführen. Seit der Ubuntu-Version 11.04 enthält das Paket <strong>ntfs-3g</strong> verbesserte Versionen der Werkzeuge aus den ntfsprogs. Man sollte deshalb die alte, eigenständige Sammlung nicht parallel zu diesem benutzen.</p><p>Um Versionsnummer und Syntax der einzelnen Routinen zu erhalten, genügt es, diese in einem <a class="internal" href="../terminal.html">Terminal</a> ohne Parameter aufzurufen.</p><p>Derzeit sind folgende Routinen vorhanden:</p><p>
</p><table><tr class="titel"><td colspan="2">"ntfsprogs" </td></tr><tr class="kopf"><td>Befehl </td><td> Beschreibung </td></tr><tr><td> <code class="notranslate">ntfsfix</code> </td><td> Identifiziert Fehler auf NTFS-Partitionen und versucht, diese zu bereinigen. Zwingt Windows, beim nächsten Aufruf die NTFS-Partition zu prüfen. <code class="notranslate">ntfsfix</code> ist kein vollwertiges Äquivalent zum Windows-Befehl <code class="notranslate">chkdsk</code>. Zwar werden von <code class="notranslate">ntfsfix</code> Dateifehler zuverlässig erkannt, doch können damit derzeit noch nicht alle davon auch repariert werden. </td></tr><tr><td> <code class="notranslate">mkntfs</code> </td><td> Formatiert eine Partition mit dem NTFS Dateisystem. </td></tr><tr><td> <code class="notranslate">ntfslabel</code> </td><td> Zeigt das <a class="internal" href="../labels.html">Label</a> einer NTFS-Partition an und erlaubt es, dieses zu verändern. </td></tr><tr><td> <code class="notranslate">ntfsundelete</code> </td><td> Stellt gelöschte Dateien auf einer NTFS-Partition wieder her. </td></tr><tr><td> <code class="notranslate">ntfsresize</code> </td><td> Ändert die Größe von NTFS-Partitionen. Kann (angeblich) auch ohne vorherige Defragmentierung verwendet werden. </td></tr><tr><td> <code class="notranslate">ntfsclone</code> </td><td> Erstellt ein Abbild einer NTFS-Partition und stellt diese aus dem Abbild wieder her. </td></tr><tr><td> <code class="notranslate">ntfscluster</code> </td><td> Ermittelt den Besitzer eines bestimmten Sektors oder Clusters auf einer NTFS-Partition. </td></tr><tr><td> <code class="notranslate">ntfsinfo</code> </td><td> Zeigt einige Informationen zu einer NTFS-Partition oder zu einer darauf befindlichen Datei/Ordner. </td></tr><tr><td> <code class="notranslate">ntfsls</code> </td><td> Listet Informationen über Dateien in einem Verzeichnis auf einer NTFS-Partition auf. </td></tr><tr><td> <code class="notranslate">ntfscat</code> </td><td> Verbindet Dateien auf einer NTFS-Partition und gibt deren Inhalt aus. </td></tr><tr><td> <code class="notranslate">ntfscp</code> </td><td> Überschreibt Dateien auf einer NTFS-Partition. </td></tr></table><p>Zur Anwendung der Routinen brauchen die betroffenen NTFS-Partitionen nicht eingebunden (gemountet) zu sein. Die früher vorhandene Routine <code class="notranslate">ntfsmount</code> ist durch <code class="notranslate">ntfs-3g</code> ersetzt.
</p><div class="section_2"><h3 id="Defragmentierung">Defragmentierung<a class="headerlink" href="#Defragmentierung">¶</a></h3><p>
Die Dateisysteme VFAT und NTFS neigen bekanntlich zur Fragmentierung und sollten deshalb nach längerem Gebrauch defragmentiert werden. In der Werkzeugsammlung ist bisher noch keine Routine zur Defragmentierung enthalten.</p><p>Zur Defragmentierung von VFAT- und NTFS-Partitionen eignet sich z.B. das Open-Source-Programm <a class="external" href="http://ultradefrag.sourceforge.net/de/index.html" rel="nofollow">UltraDefrag</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>. Das Programm wurde primär für Windows erstellt; eine geplante Linux-Version wird offenbar nicht mehr weiter entwickelt (Stand Juni 2014).</p></div></div><div class="section_1"><h2 id="Probleme-und-Loesungen">Probleme und Lösungen<a class="headerlink" href="#Probleme-und-Loesungen">¶</a></h2><p>
</p><div class="section_2"><h3 id="Dual-Boot-und-Ruhezustand-Hibernate">Dual-Boot und Ruhezustand (Hibernate)<a class="headerlink" href="#Dual-Boot-und-Ruhezustand-Hibernate">¶</a></h3><p>
Wird Windows in den Ruhezustand (Hibernation) versetzt, so wird der komplette RAM-Inhalt in einer speziellen Datei ("hiberfil.sys") gesichert. Deren Inhalt wird beim "Erwachen aus dem Ruhezustand" wieder ins RAM geladen, und man kann wieder da weiterarbeiten, wo man aufgehört hat. Waren beim "Einschlafen" Dateien geöffnet, darf auf diese mittels Linux auf keinen Fall schreibend zugegriffen werden, da sie dann inkonsistent zu dem gesicherten Ruhezustand werden, was dann infolge z.B. noch nicht auf Platte geschriebener Daten in aller Regel mindestens zu Datenverlust, oft aber auch zur Korruption des Dateisystems führt.</p><p>Findet NTFS-3G eine Partition im Ruhezustand vor, so wird diese Partition standardmäßig nicht, bzw. seit <a class="external" href="http://jp-andre.pagesperso-orange.fr/changelog.html" rel="nofollow">Version 2016.2.22AR.1</a> nur zum <span class="underline">Lesen ohne Schreibrechte</span> eingebunden, ungeachtet der im Mount-Befehl angegebenen Optionen. Dies scheint auch bei Nutzung der Schnellstart-Option ab Windows 8 zu gelten.
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Dieser Schreibschutz gilt <strong>nur</strong> für die Windows-Systempartition. <strong>Andere Partitionen</strong>, die beim "Einschlafen" von Windows im Zugriff waren, <strong>werden</strong> durch diesen Mechanismus <strong>nicht geschützt</strong>. Dies kann zu empfindlichem Datenverlust und auch Dateisystem-Korruption in Dual-Boot-Installationen führen, insbesondere wenn Daten wie beispielsweise <a class="internal" href="../mozilla_plattformübergreifend_nutzen.html">Mozilla-Profile plattformübergreifend</a> genutzt werden. So können z.B. sämtliche von Thunderbird gespeicherten E-Mails korrumpiert werden. <span class="underline">Besonders tückisch:</span> Windows kann auch völlig unbemerkt und unbeabsichtigt in den Ruhezustand gegangen sein (Standardverhalten bei Nichtbenutzung während bestimmter Zeit, im Akkubetrieb evtl. schon nach wenigen Minuten). Wehe wenn dann beim nächsten Systemstart automatisch oder nichtsahnend manuell Linux gebootet und dann automatisch per <code class="notranslate">fstab</code> oder manuell die ungeschützte z.B. Datenpartition eingebunden wird. <a class="external" href="https://bugs.launchpad.net/ubuntu/+source/ntfs-3g/+bug/1198507" rel="nofollow">Ein möglicher Schutzmechanismus</a> wurde bisher leider nicht umgesetzt. Ein gewisser Schutz kann dadurch erreicht werden, indem man <a class="internal" href="../grub_2/konfiguration.html#Bedeutung-der-Variablen">GRUB so konfiguriert</a>, dass beim automatischen Systemstart immer die zuletzt manuell ausgewählte Partition gebootet wird.</p><p>Wenn Windows unter der Schnellstart-Option (ab Version 8) neu startet, dann werden bei allen eingebundenen Partitionen die Metadaten auf den Wert zurückgesetzt, den sie beim letzten Herunterfahren von Windows hatten. Zwischenzeitlich unter Linux erfolgte Änderungen können dadurch verloren gehen. Deshalb wird dringend empfohlen, in Dual-Boot Systemen die Schnellstart-Option von Windows zu deaktivieren.</p><p>Nach den halbjährlichen, "großen" Updates von Windows 10 kann es außerdem vorkommen, dass die Schnellstart-Option nach dem Update wieder aktiviert ist. Dies sollte nach dem Update überprüft und wenn nötig wieder deaktiviert werden.
</p></div></div></div><div class="section_2"><h3 id="Freigabe-von-NTFS-Partitionen-im-Netzwerk">Freigabe von NTFS-Partitionen im Netzwerk<a class="headerlink" href="#Freigabe-von-NTFS-Partitionen-im-Netzwerk">¶</a></h3><p>
NTFS-Partitionen und auf ihnen befindliche Ordner lassen sich mit <a class="internal" href="../samba.html">Samba</a> und seit dem Linux-Kernel 2.6.27 auch mit <a class="internal" href="../nfs.html">NFS</a> im Netzwerk freigeben. Im Prinzip geht dies auch mit simulierten Dateirechten, da die Netzwerk-Dienste diese nicht von echten unterscheiden können.</p><p>Allerdings erweisen sich die Standard-Einstellungen oftmals als Hindernis. So sind z.B. auf automatisch eingehängten externen NTFS-Partitionen keine Samba-Freigaben mit Gast-Zugang möglich, weil "Andere" keinen Zugriff haben, und die von Nautilus vorgeschlagene nachträgliche Erweiterung der Zugriffsrechte funktioniert nicht. Auf mit Standard-Einstellungen eingebundenen internen NTFS-Partitionen sind keine persönlichen Freigaben mittels <em>net usershare</em> möglich, weil der eingeloggte Benutzer nicht deren (scheinbarer) Eigentümer ist.</p><p>Man muss deshalb simulierte Dateirechte bereits beim Mounten geeignet festlegen, oder aber über die Option <code class="notranslate">permissions</code> echte Dateirechte verwenden, die sich auch nachträglich jederzeit noch gezielt anpassen lassen.</p></div><div class="section_2"><h3 id="Unguenstige-Rechte-auf-externen-Partitionen">Ungünstige Rechte auf externen Partitionen<a class="headerlink" href="#Unguenstige-Rechte-auf-externen-Partitionen">¶</a></h3><p>
Nicht immer sind die beim automatischen Einbinden externer NTFS-Partitionen simulierten Rechte günstig (siehe dazu auch die <a class="internal" href="../windows-partitionen_einbinden.html#Simulierte-Dateirechte">Achtung-Box hier</a>). Möchte man diese ändern, so muss man die Partition entweder aushängen und mit veränderten Boot-Optionen von Hand wieder einhängen, oder aber für die Partition einen <strong>fstab</strong>-Eintrag mit geeigneten Boot-Optionen vornehmen. Beides kann lästig sein.</p><p>Eine einfache Alternative ist, auf der Partition ein User-Mapping zu simulieren. Hierzu genügt es, dort eine versteckte Datei <strong>.NTFS-3G/UserMapping</strong> anzulegen und in diese lediglich die Zeile 
</p><pre class="notranslate">::S-1-5-21-3141592653-589793238-462643383-10000</pre><p>
einzutragen. Die ersten beiden Felder für UID und GID bleiben leer, und die drei 9- bzw. 10-stelligen Zahlen für den SID sind beliebig wählbar bis 4294967295. NTFS-3G erkennt dann bei jedem Einbinden der Partition, dass dort ein (scheinbares) User-Mapping vorhanden ist, und bindet die Partition deshalb automatisch mit den Optionen <code class="notranslate">permissions</code> und <code class="notranslate">acl</code> ein. Damit können dann dort echte Dateirechte verwaltet werden wie bei einem Linux-Dateisystem.</p></div><div class="section_2"><h3 id="Remount-RW-nicht-moeglich">Remount RW nicht möglich<a class="headerlink" href="#Remount-RW-nicht-moeglich">¶</a></h3><p>
hat man ein Dateisystem mit RO-Option eingebunden, funktioniert das Remount mit Schreibrechten nicht (Stand: Ubuntu 12.4).</p><p><a class="external" href="https://bugs.launchpad.net/ubuntu/+source/ntfs-3g/+bug/186117" rel="nofollow" title="https://bugs.launchpad.net/ubuntu/+source/ntfs-3g/+bug/186117"><span class="longlink_show">https://bugs.launchpad.net/ubuntu/+s</span><span class="longlink_collapse">ource/ntfs-</span><span>3g/+bug/186117</span></a></p><p>Abhilfe ist hier erst ein umount zu machen und dann mit rw-Option zu mounten
</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="../fuse.html">FUSE (Dateisystem im Userspace)</a> wird von NTFS-3G benötigt.</p></li><li><p><a class="internal" href="../ms-windows_integration.html">MS-Windows Integration</a>: Hinweise zum Parallel-Betrieb von Linux und Windows.</p></li><li><p><a class="internal" href="../windows-partitionen_einbinden.html">Windows-Partitionen einbinden</a></p></li><li><p><a class="internal" href="../externe_laufwerke_statisch_einbinden.html">Externe Laufwerke statisch einbinden</a></p></li></ul><p>
</p><ul><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/ntfs-3g">ntfs-3g</a> in Wikipedia.</p></li><li><p><a class="external" href="http://www.tuxera.com/community/open-source-ntfs-3g/" rel="nofollow">NTFS-3G</a> <a class="external" href="http://www.tuxera.com/community/ntfs-3g-manual/" rel="nofollow">Manual</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://jp-andre.pagesperso-orange.fr/advanced-ntfs-3g.html" rel="nofollow">Erweiterte Versionen</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p>Neuester <a class="external" href="https://sourceforge.net/p/ntfs-3g/_list/git/" rel="nofollow">Quellcode</a> zum selbst Kompilieren.</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../windows-partitionen_einbinden/ntfs-3g/a/revision/944929.html">Diese Revision</a> wurde am 17. November 2017 19:56 von <a href="https://ubuntuusers.de/user/noisefloor/">noisefloor</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../windows-partitionen_einbinden.html">Windows-Partitionen einbinden</a></li>
<li><a href="../windows-partitionen_einbinden/ntfs-3g.html">NTFS-3G</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>