<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Dualboot-Windows_virtualisieren › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./dualboot-windows_virtualisieren.html">Dualboot-Windows virtualisieren</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Dualboot-Windows_virtualisieren">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./dualboot-windows_virtualisieren/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./dualboot-windows_virtualisieren/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./dualboot-windows_virtualisieren/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./dualboot-windows_virtualisieren/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./dualboot-windows_virtualisieren/a/backlinks.html">Dualboot-Windows virtualisieren</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./programme_starten.html">Starten von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./sudo.html">Root-Rechte</a></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="./virtualbox.html">VirtualBox</a></p></li><li><p><a class="crosslink anchor" href="#source-6" id="source-6"></a> <a class="internal" href="./shell/bash-skripting-guide_für_anfänger.html">Erstellen und Ausführen eines Skriptes</a></p></li></ol></div></div><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Sicherheitswarnung">Sicherheitswarnung
</a></li><li><a class="crosslink" href="#Windows-vorbereiten">Windows vorbereiten
</a></li><li><a class="crosslink" href="#EFI-vorbereiten">EFI vorbereiten
</a></li><li><a class="crosslink" href="#Aktuelle-VirtualBox-Version-installieren">Aktuelle VirtualBox-Version installieren
</a></li><li><a class="crosslink" href="#Virtuelle-Maschine-erstellen">Virtuelle Maschine erstellen
</a></li><li><a class="crosslink" href="#Festplattenzugriff-vorbereiten">Festplattenzugriff vorbereiten
</a></li><li><a class="crosslink" href="#Angleichung-Virtuell-an-Physikalisch">Angleichung Virtuell an Physikalisch
</a></li><li><a class="crosslink" href="#Erster-Start-von-Windows-in-VirtualBox">Erster Start von Windows in VirtualBox
</a></li><li><a class="crosslink" href="#Andere-Parallelsysteme">Andere Parallelsysteme
</a></li><li><a class="crosslink" href="#Problembehebung">Problembehebung
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/win-ubuntu.png" class="image-center" src="./_/06f806b3728b1037f575b11cbfcddce1b99df777.png"/></p><p>Dieser Artikel beschreibt die Möglichkeit, ein bereits auf der Festplatte installiertes (und im Dualboot auswählbares) Windows in einem Fenster von VirtualBox in Ubuntu starten und nutzen zu können. Dadurch hat man dieselben installierten Programme, Daten und Einstellungen in beiden Varianten zur Verfügung, und kann unter Ubuntu die parallel installierte Windows-Umgebung aufrufen.</p><p>Auch andere Parallelsysteme, wie z.B. ein weiteres parallel installiertes Ubuntu, können auf diese Weise in VirtualBox genutzt werden. Siehe dazu die Hinweise unter <a class="crosslink" href="#Andere-Parallelsysteme">Andere Parallelsysteme</a>.</p><p><img alt="WindowsRAW_screenshot.png" class="image-default" src="./_/e02de6c1c8474ce6586641f09e03ebad6c7ca250.png"/></p><div class="section_1"><h2 id="Sicherheitswarnung">Sicherheitswarnung<a class="headerlink" href="#Sicherheitswarnung">¶</a></h2><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Es wird eine Sicherungskopie des zu virtualisierenden Systems empfohlen.</p><p>Es ist ein Fall bekannt, in dem VirtualBox und/oder Ubuntu abgestürzt sind, während ein "virtualisiertes" Windows aktiv auf die Festplatte zugriff. Dies führte zur irreparablen Beschädigung des Windows-Systems.</p><p>Solange das Parallelsystem in VirtualBox läuft, darf von Ubuntu aus kein schreibender Zugriff auf dessen Partition(en) erfolgen. Dies kann zu Datenkorruption führen. Eine Möglichkeit zur Absicherung ist es, in der Datei <a class="internal" href="./fstab.html"><strong>/etc/fstab</strong></a> den Zugriff von Ubuntu auf die Gastsystem-Partitionen auf Nur-Lesen-Rechte zu begrenzen. Dazu editiert man <strong>/etc/fstab</strong> in einem Editor mit Root-Rechten<sup><a href="#source-4">[4]</a></sup></p><p>Für jede Windows-Systempartition ist folgender Eintrag hinzuzufügen (Als Beispiel mit <strong>sda1</strong> (System-reserviert) und <strong>sda2</strong> (System)):
</p><pre class="notranslate">/dev/sda1	/mnt/boot	ntfs	ro,nosuid,nodev,nofail,x-gvfs-show	0	0
/dev/sda2	/mnt/system	ntfs	ro,nosuid,nodev,nofail,x-gvfs-show	0	0</pre><p>Für Dateiaustausch kann die Funktion <em>"Gemeinsame Ordner"</em> von VirtualBox genutzt werden.
</p></div></div></div><div class="section_1"><h2 id="Windows-vorbereiten">Windows vorbereiten<a class="headerlink" href="#Windows-vorbereiten">¶</a></h2><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Dieser Artikel wurde mit <em>Windows 7 64-Bit</em>, <em>Windows 8.1</em> und <em>Windows 10</em> getestet.</p><p>Für <em>Windows 8</em> und <em>Windows 10</em> kann die Einschränkung gelten, daß es im VM-Betrieb nicht mit dem Internet verbunden werden darf und mindestens einmal im Monat im normalen Dualboot gestartet werden muß. Dies ist der Fall, wenn es eine Datei <strong>/sys/firmware/acpi/tables/MSDM</strong> gibt. Erklärung siehe <a class="crosslink" href="#Angleichung-Virtuell-an-Physikalisch">Angleichung Virtuell an Physikalisch</a>.
</p></div></div><div class="section_2"><h3 id="Treibervorbereitung-Windows-7">Treibervorbereitung: Windows 7<a class="headerlink" href="#Treibervorbereitung-Windows-7">¶</a></h3><p>
</p><ol class="arabic"><li><p>Im Ordner <strong>C:\WINDOWS\system32\drivers</strong> müssen folgende vier Dateien zu finden sein:</p><ul><li><p><strong>atapi.sys</strong></p></li><li><p><strong>intelide.sys</strong></p></li><li><p><strong>pciide.sys</strong></p></li><li><p><strong>pciidex.sys</strong></p></li><li><p>Fehlen sie dort, müssen sie gesucht und nach <strong>C:\WINDOWS\system32\drivers</strong> kopiert werden. Die Dateien liegen in einem Unterordner von <strong>C:\WINDOWS\system32\DriverStore\FileRepository</strong>, notfalls mit Hilfe der Suchfunktion des Explorers aufspüren. (In der Regel liegen bei Windows 7 die benötigten Treiber bereits im oben genannten Verzeichnis).</p></li></ul></li><li><p>Das Skript <strong>MergeIDE.reg</strong> trägt die obigen Treiber in der Windows-Registry ein.</p><ul><li><p>Eine Sicherungskopie von der Windows-Registry-Datei <strong>C:\WINDOWS\system32\config\SYSTEM</strong> machen mittels <em>"Ausführen... → </em><code class="notranslate">regedit</code><em> → Datei → Exportieren"</em>.</p></li><li><p><a class="external" href="https://www.virtualbox.org/attachment/wiki/Migrate_Windows/MergeIDE.zip" rel="nofollow">MergeIDE.zip</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/><img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/> herunterladen, entpacken und <strong>MergeIDE.reg</strong> per Doppelklick ausführen.</p></li></ul></li></ol><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Das Skript <strong>MergeIDE.reg</strong> stammt von <a class="external" href="http://support.microsoft.com/kb/314082" rel="nofollow">Microsoft</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> und wurde ursprünglich für XP entwickelt. Es hat sich als hilfreich und kompatibel für Windows 7 erwiesen. Ob es für Windows 8 oder 10 benötigt wird, ist noch ungeprüft. Die Batch-Datei <strong>MergeIDE.bat</strong> stammt vom <a class="external" href="http://www.heise.de/ct/artikel/Ab-in-die-VM-1077800.html" rel="nofollow">c't-Magazin</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> und ist unbrauchbar.
</p></div></div></div><div class="section_2"><h3 id="Windows-Produkt-Aktivierung">Windows Produkt-Aktivierung<a class="headerlink" href="#Windows-Produkt-Aktivierung">¶</a></h3><p>
Windows verlangt bei erheblicher Veränderung seiner Hardwareumgebung eine neue Produktaktivierung bei Microsoft per Internet oder Telefon. 
</p><ul><li><p>Der Betrieb in VirtualBox bedeutet für Windows eine solche erhebliche Veränderung. </p></li><li><p>Bei abwechselndem Betrieb in VirtualBox oder im Dualboot-Start würde das bedeuten, dass bei jedem Wechsel eine neue Produktaktivierung notwendig wird. Dies wird durch die <a class="crosslink" href="#Angleichung-Virtuell-an-Physikalisch">Angleichung der virtuellen Hardware an die physikalische Hardware</a> zu vermeiden gesucht. </p></li><li><p>Windows 7 hat sich regelmäßig erfolgreich virtualisieren lassen und konnte uneingeschränkt in VirtualBox genutzt werden.</p></li><li><p>Windows 8 und 10 kann unter Umständen nur ohne Internetverbindung virtualisiert werden, ansonsten wird innerhalb von VirtualBox die Verwendung blockiert, und es wechselt in den Status "Nicht aktiviert". Physikalisch läßt es sich auch dann problemlos wieder starten und mit Internet nutzen, der Status wird automatisch wieder auf "Aktiviert" gesetzt. Erklärung siehe <a class="crosslink" href="#Angleichung-Virtuell-an-Physikalisch">Angleichung Virtuell an Physikalisch</a>.</p></li><li><p>Eine Gewähr dafür, dass keine neue Produktaktivierung fällig wird, kann natürlich trotzdem nicht gegeben werden.</p></li></ul><p>
</p><div class="section_3"><h4 id="Product-Key">Product Key<a class="headerlink" href="#Product-Key">¶</a></h4><p>
Mit dem Programm <a class="external" href="http://www.chip.de/downloads/Windows-Product-Key-Viewer_58663752.html" rel="nofollow">pkeyui</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/><img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/> läßt sich der Product Key von Windows anzeigen. Es ist sinnvoll, diesen Key auf einem Zettel zu notieren.</p></div><div class="section_3"><h4 id="Daten-zur-Produktaktivierung-sichern">Daten zur Produktaktivierung sichern<a class="headerlink" href="#Daten-zur-Produktaktivierung-sichern">¶</a></h4><p>
</p><ul><li><p>Windows 7, 8.<strong>0</strong> : Mit Hilfe des Programmes <a class="external" href="http://www.chip.de/downloads/Advanced-Tokens-Manager_52007824.html" rel="nofollow">Advanced Tokens Manager</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/><img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/> ein Backup der Aktivierungsdaten machen.</p></li><li><p>Windows 8.<strong>1</strong>: Für Windows 8.1 kann bisher nur eine telefonische Aktivierung gesichert und wiederhergestellt werden, mit Hilfe des <a class="external" href="http://www.chip.de/downloads/Advanced-Tokens-Manager_52007824.html" rel="nofollow">Advanced Tokens Manager</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/><img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/>.</p></li><li><p>Windows 10: Vermutlich gilt dasselbe wie für Windows 8.1: Nur eine telefonische Aktivierung kann gesichert werden.</p></li></ul><p>
</p></div><div class="section_3"><h4 id="Produktaktivierung-wiederherstellen">Produktaktivierung wiederherstellen<a class="headerlink" href="#Produktaktivierung-wiederherstellen">¶</a></h4><p>
Sollte es durch den Betrieb von Windows in VirtualBox dazu kommen, dass eine neue Produktaktivierung fällig wird, so kann man mit Hilfe dieser Dateien zumindest für den physikalischen Betrieb den aktivierten Zustand wiederherstellen. In diesem Fall wird so vorgegangen:
</p><ul><li><p>Windows 7, 8.<strong>0</strong>: Mit Hilfe des Programms <em>Advanced Tokens Manager</em> den aktivierten Zustand wiederherstellen.</p></li><li><p>8.<strong>1</strong>, 10: Wiederherstellung mit <em>Advanced Tokens Manager</em>, falls telefonisch aktiviert. Ansonsten nur Wiederherstellung mit Hilfe des Supports von Microsoft, ggf. automatisch online, schlimmstenfalls telefonisch.</p></li></ul><p>
</p></div><div class="section_3"><h4 id="Windows-8-10-Produktaktivierung-hinauszoegern">Windows 8 / 10: Produktaktivierung hinauszögern<a class="headerlink" href="#Windows-8-10-Produktaktivierung-hinauszoegern">¶</a></h4><p>
<a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Erstausr%C3%BCster">OEM-Versionen</a> von Windows 8 und 10 können in VirtualBox ohne Internetverbindung einige Tage genutzt werden, bevor sie in den Status "Nicht aktiviert" wechseln. Durch einen physikalischen Start wird der Status "Aktiviert" wieder hergestellt. Erklärung siehe <a class="crosslink" href="#Angleichung-Virtuell-an-Physikalisch">Angleichung Virtuell an Physikalisch</a>. Die Frist zur ungestörten Nutzung in der VM kann auf 30 Tage verlängert werden, wenn in der Eingabeaufforderung von Windows diese Befehle ausgeführt werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">slmgr /sai 43200
slmgr /sri 43200 </pre></div></div></div></div></div><div class="section_1"><h2 id="EFI-vorbereiten">EFI vorbereiten<a class="headerlink" href="#EFI-vorbereiten">¶</a></h2><p>
Neue Computer werden statt mit dem klassischen <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/BIOS">BIOS</a> oft mit dem neueren  <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Extensible_Firmware_Interface">(U)EFI</a> gestartet. Ob der eigene Rechner per BIOS oder per EFI startet kann mit diesem Befehl geprüft werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">[ -d /sys/firmware/efi ] &amp;&amp; echo UEFI || echo BIOS </pre></div></div><p>
Startet der Computer mit EFI, muß "Secure Boot" und "Schnellstart" deaktiviert werden:
</p><div class="section_2"><h3 id="Secure-Boot-deaktivieren">Secure Boot deaktivieren<a class="headerlink" href="#Secure-Boot-deaktivieren">¶</a></h3><p>
Das Abschalten von Secure Boot wird beschrieben im Artikel <a class="internal" href="./efi_grundlagen.html#Secure-Boot">EFI Grundlagen</a>.
</p></div><div class="section_2"><h3 id="Schnellstart-deaktivieren">Schnellstart deaktivieren<a class="headerlink" href="#Schnellstart-deaktivieren">¶</a></h3><p>
</p><ul><li><p>Windows 8, 10: <a class="external" href="http://techfrage.de/question/1011/windows-8-schnellstart-deaktivieren-oder-aktivieren/" rel="nofollow">Schnellstart bei Windows 8 deaktivieren</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>.</p></li><li><p>Windows 7:</p><ul><li><p>Eingabeaufforderung -&gt; "Als Admin ausführen".</p></li><li><p><code class="notranslate">powercfg /h off</code> eingeben.</p></li></ul></li><li><p>Im EFI-BIOS <strong>fast-boot</strong> auf [ "Disabled" ] setzen.</p></li></ul><p>
</p></div></div><div class="section_1"><h2 id="Aktuelle-VirtualBox-Version-installieren">Aktuelle VirtualBox-Version installieren<a class="headerlink" href="#Aktuelle-VirtualBox-Version-installieren">¶</a></h2><p>
Die in den Paketquellen enthaltene Version von VirtualBox ist oft nicht auf dem neuesten Stand. Einige der verwendeten VirtualBox-Funktionen sind noch experimentell. Deshalb wird empfohlen, stets die aktuellste Version von VirtualBox zu verwenden, mindestens aber Version 4.2. Möglichkeiten der Installation aus Fremdquellen (Oracle) sind unter <a class="internal" href="./virtualbox/installation.html">VirtualBox/Installation</a> beschrieben. 
</p><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p><a class="internal" href="./virtualbox.html">VirtualBox</a> befindet sich in steter Weiterentwicklung. Einige der in diesem Artikel verwendeten Funktionen sind noch nicht Teil des offiziellen Supports, sondern befinden sich in Erprobungsphase. Bei Problemen mit solchen Funktionen besteht kein Anspruch auf Support von <a class="external" href="http://www.oracle.com/index.html" rel="nofollow">Oracle</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>; Oracle ist aber selbst an Rückmeldung und Support interessiert.
</p></div></div></div><div class="section_1"><h2 id="Virtuelle-Maschine-erstellen">Virtuelle Maschine erstellen<a class="headerlink" href="#Virtuelle-Maschine-erstellen">¶</a></h2><p>
</p><ol class="arabic"><li><p>VirtualBox starten <sup><a href="#source-5">[5]</a></sup></p></li><li><p>Neue virtuelle Maschine erstellen: <em>"Neu → Weiter"</em>.</p></li><li><p>Name "WindowsRAW" (andernfalls Skripte und Terminalbefehle anpassen) und Art des Betriebssystems einstellen <em>"→ Weiter"</em>.</p></li><li><p>Arbeitsspeicher zuweisen <em>"→ Weiter"</em>. (Der physikalische Speicher muss für beide Systeme aufgeteilt werden, für beide muss genug zur Verfügung stehen).</p></li><li><p><span class="underline">Kein</span> Festplattenmedium wählen.</p></li><li><p><em>"Virtuelle Maschine erzeugen → Weiter"</em>. Die virtuelle Maschine wird nun erstellt.</p></li><li><p>Auf <em>"Ändern"</em> klicken, um weitere Einstellungen vorzunehmen.</p></li><li><p>Unter <em>"System"</em> <em>"IO-APIC"</em> aktivieren (Häkchen setzen).</p></li><li><p>EFI: Wenn das System mit (U)EFI statt mit BIOS startet, muß unter <em>"System"</em> <em>"EFI aktivieren"</em> aktiviert werden (Häkchen setzen)</p></li><li><p>Unter <em>"Ändern → Netzwerk → Erweitert</em>" die Option <em>"Kabel verbunden"</em> abschalten. (Häkchen entfernen).</p></li><li><p>Sinnvoll ist es, den virtuellen Grafikkartenspeicher unter <em>"Anzeige"</em> zu erhöhen.</p></li></ol><p>
</p><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Im Ordner <strong>~/VirtualBox VMs</strong> liegen die virtuellen Maschinen von VirtualBox. Es ist ein neues Unterverzeichnis <strong>WindowsRAW</strong> entstanden. Darin werden die zugehörigen Dateien versammelt. Neu entstanden ist <strong>WindowsRAW.vbox</strong>, das die Konfiguration der VM enthält.
</p></div></div></div><div class="section_1"><h2 id="Festplattenzugriff-vorbereiten">Festplattenzugriff vorbereiten<a class="headerlink" href="#Festplattenzugriff-vorbereiten">¶</a></h2><p>
</p><div class="section_2"><h3 id="Windows-Partitionen-ermitteln">Windows-Partitionen ermitteln<a class="headerlink" href="#Windows-Partitionen-ermitteln">¶</a></h3><p>
<strong>Bevor Sie beginnen stellen Sie bitte sicher, dass die Festplatte oder Partition auf der sich Windows befindet nicht im System eingehangen ist.</strong></p><p>Es wird ermittelt, auf welchen Festplatten und Partitionen Windows installiert ist: <sup><a href="#source-3">[3]</a></sup>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo parted -l </pre></div></div><p>Die gefundenen Festplatten und ihre Partitionen werden ausgegeben. Dies kann bspw. so aussehen:
</p><pre class="notranslate">Disk /dev/sda: 1000GB
Sector size (logical/physical): 512B/4096B
Partition Table: gpt

Number  Start   End     Size    File system     Name                          Flags
 1      1049kB  420MB   419MB   ntfs            Basic data partition          hidden, diag
 2      420MB   735MB   315MB   fat32           EFI system partition          boot
 3      735MB   869MB   134MB                   Microsoft reserved partition  msftres
 4      869MB   299GB   298GB   ntfs            Basic data partition
 6      299GB   299GB   400MB   ext4
 7      299GB   301GB   1400MB  linux-swap(v1)
 8      301GB   481GB   180GB   ext4
 9      481GB   980GB   500GB   ext4
 5      980GB   1000GB  19.9GB  ntfs            Basic data partition          hidden, diag
</pre><p>
</p><ul><li><p>Windows befindet sich in diesem <span class="underline">Beispiel</span> auf der <span class="underline">Festplatte</span> <strong>/dev/sda</strong>. </p></li><li><p>Die Windows belegt in diesem Beispiel diese Festplatten-<span class="underline">Partitionen</span>:</p><ul><li><p>Nummer 1: "Basic data partition" (ntfs). Entspricht in diesem Beispiel <strong>/dev/sda1</strong></p></li><li><p>Nummer 3: "Microsoft reserved partition" (ntfs). Entspricht in diesem Beispiel <strong>/dev/sda3</strong></p></li><li><p>Nummer 4: "Basic data partition" (ntfs). Entspricht in diesem Beispiel <strong>/dev/sda4</strong></p></li><li><p>Nummer 5: "Basic data partition" (ntfs). Entspricht in diesem Beispiel <strong>devsda5</strong></p></li></ul></li><li><p>Die EFI-Bootpartition trägt hier die Nummer 2. Entspricht in diesem Beispiel <strong>/dev/sda2</strong></p></li><li><p>Die Partition 6,7,8 und 9 (ext4 und swap) sind in diesem Beispiel Ubuntu-Partitionen</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Bootloader-erzeugen">Bootloader erzeugen<a class="headerlink" href="#Bootloader-erzeugen">¶</a></h3><p>
Der <a class="external" href="http://www.tin.org/bin/man.cgi?section=8&amp;topic=install-mbr" rel="nofollow">Bootloader mbr</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> dient als Alternative zu <a class="internal" href="./grub.html">GRUB</a>, um damit Windows in VirtualBox booten zu können. <sup><a href="#source-1">[1]</a></sup></p><ul><li><p><strong>mbr</strong> (<em>universe</em>, bis Ubuntu 11.04 <em>main</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install mbr </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install mbr </pre></div></div><p>
</p></div></div><p>Es wird eine Bootloader-Datei <strong>WindowsRAW.mbr</strong> erzeugt: <sup><a href="#source-3">[3]</a></sup></p><div class="bash"><div class="contents"><pre class="notranslate">install-mbr --force ~/VirtualBox\ VMs/WindowsRAW/WindowsRAW.mbr </pre></div></div><p>
Benötigt wird der Wert von <code class="notranslate">disk identifier</code> der Bootfestplatte, in der Regel <strong>/dev/sda</strong>. Er wird angezeigt beim Aufruf von:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo fdisk -l </pre></div></div><p>In diese Datei wird mit folgendem Befehl der Wert von <code class="notranslate">disk identifier</code> (in der deutschen Version <code class="notranslate">Medienkennung</code>)eingetragen. Dabei <code class="notranslate">FESTPLATTENIDENTIFIKATION</code> durch den entsprechenden Wert ersetzen:
</p><div class="bash"><div class="contents"><pre class="notranslate">echo FESTPLATTENIDENTIFIKATION | sed -e 's/0x\(..\)\(..\)\(..\)\(..\)/0x\4\3\2\1/' | xxd -r |  dd of=~/VirtualBox\ VMs/WindowsRAW/WindowsRAW.mbr bs=1 seek=440 conv=notrunc  </pre></div></div><p>
Unter Umständen kann die Ausführung des Befehls einige Minuten dauern.</p></div><div class="section_2"><h3 id="Verweis-auf-Festplatte-erzeugen">Verweis auf Festplatte erzeugen<a class="headerlink" href="#Verweis-auf-Festplatte-erzeugen">¶</a></h3><p>
</p><ul><li><p>Tatsächlich notwendig sind nur die elementaren Systempartition(en) des zu virtualisierenden Parallelsystems. Bei einem EFI-System muß auch die EFI-Partition mit eingebunden werden. </p></li><li><p><code class="notranslate">WIN_PARTITION</code> muss durch die Nummer(n) der Windows-Partition(en) ersetzt werden. </p></li><li><p>Im Falle von <strong>/dev/sda1</strong> wird <strong><code class="notranslate">1</code></strong> eingesetzt, im Falle von <strong>/dev/sda2</strong> wird <strong><code class="notranslate">2</code></strong> eingesetzt usw. Sollen mehrere Partitionen eingebunden werden, wird z.B. <strong><code class="notranslate">1,2,3</code></strong> eingesetzt für <strong>/dev/sda1</strong>, <strong>/dev/sda2</strong> und <strong>dev/sda3</strong>. </p></li><li><p>Sollte sich Windows auf einer M2-SSD befinden, so müssen hier trotzdem die Endnummern angegeben werden. So wird beispielsweise im Falle <strong>/dev/nvme0n1p1</strong> auch nur eine <strong><code class="notranslate">1</code></strong> eingesetzt, auch wenn die Partion auf <strong>p1</strong> endet..</p></li><li><p>Auch <code class="notranslate">-rawdisk /dev/sda</code> muss ggf. angepasst werden, wenn Windows auf einer anderen Festplatte liegt (siehe <a class="crosslink" href="#Windows-Partitionen-ermitteln">Windows-Partitionen ermitteln</a>): <sup><a href="#source-3">[3]</a></sup></p></li></ul><p>
Mit folgendem Befehl wird ein Verweis auf die physikalische Festplatte erzeugt:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo VBoxManage internalcommands createrawvmdk -filename ~/VirtualBox\ VMs/WindowsRAW/WindowsRAW.vmdk -rawdisk /dev/sda -partitions WIN_PARTITION -mbr ~/VirtualBox\ VMs/WindowsRAW/WindowsRAW.mbr -relative </pre></div></div><p>Die Besitzrechte der von VBoxManage erzeugten Dateien müssen nun auf den aktuellen Benutzer übertragen werden: <sup><a href="#source-3">[3]</a></sup>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chown $USER ~/VirtualBox\ VMs/WindowsRAW/WindowsRAW.vmdk
sudo chown $USER ~/VirtualBox\ VMs/WindowsRAW/WindowsRAW-pt.vmdk </pre></div></div><p>Sollten mehrere Nutzer den Computer und die VM nutzen können, ist es sinnvoll den <strong> chown </strong> Befehl abzuändern:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chown $USER:vboxusers ~/VirtualBox\ VMs/WindowsRAW/WindowsRAW.vmdk
sudo chown $USER:vboxusers ~/VirtualBox\ VMs/WindowsRAW/WindowsRAW-pt.vmdk </pre></div></div><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Windows hat nur auf die mittels <code class="notranslate">-partitions</code> freigegebenen Partitionen Zugriff. Zwar sieht Windows alle Partitionen der unter <code class="notranslate">-rawdisk</code> angegebenen Festplatte, kann auf diesen jedoch nur Nullen lesen und nicht schreiben.</p><p>Sollte Windows eine Festplatte für sich haben, ist es unter Umständen daher sinnvoll alle Partitionen der Festplatte anzugeben.
</p></div></div><div class="section_3"><h4 id="Optional-Zusaetzliche-Festplattenverweise">Optional: Zusätzliche Festplattenverweise<a class="headerlink" href="#Optional-Zusaetzliche-Festplattenverweise">¶</a></h4><p>
Analog zum obigen Vorgehen können zusätzliche Festplattenverweise erzeugt werden. Der virtuelle MBR sollte Verwendung finden. Das verringert die Gefahr der Zerstörung des <span class="underline">physikalischen</span> Bootsektors (und damit meist <a class="internal" href="./grub.html">GRUB</a>).</p><ul><li><p>Beispiel 1: Partitionen einer anderen Festplatte </p><ul><li><p>Für die Partitionen <strong>/dev/sdb2</strong> und <strong>/dev/sdb4</strong> auf der Festplatte <strong>/dev/sdb</strong> lautet der Befehl: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo VBoxManage internalcommands createrawvmdk -filename ~/VirtualBox\ VMs/WindowsRAW/WindowsRAW_sdb.vmdk -rawdisk /dev/sdb -partitions 2,4 -mbr ~/VirtualBox\ VMs/WindowsRAW/WindowsRAW.mbr -relative </pre></div></div></li></ul></li><li><p>Beispiel 2: Vollständige andere Festplatte</p><ul><li><p>Für die gesamte Festplatte <strong>/dev/sdc</strong> lautet der Befehl: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo VBoxManage internalcommands createrawvmdk -filename ~/VirtualBox\ VMs/WindowsRAW/WindowsRAW_sdc.vmdk -rawdisk /dev/sdc -mbr ~/VirtualBox\ VMs/WindowsRAW/WindowsRAW.mbr </pre></div></div></li></ul></li></ul><p>Die Rechte müssen auch hier korrekt vergeben werden.</p></div></div><div class="section_2"><h3 id="Zugriffsrechte-erteilen">Zugriffsrechte erteilen<a class="headerlink" href="#Zugriffsrechte-erteilen">¶</a></h3><p>
</p><ul><li><p>Mit Root-Rechten <sup><a href="#source-4">[4]</a></sup> wird im Verzeichnis <strong>/etc/udev/rules.d</strong> eine Datei mit dem Namen <strong>VBoxWindowsRAW.rules</strong> angelegt. </p></li><li><p>In diese Datei wird eine <a class="internal" href="./udev.html">udev</a>-Regel eingetragen. Dafür gibt es zwei mögliche Varianten zur Auswahl. </p></li><li><p><code class="notranslate">KERNEL==sda1</code> muss ggf. angepasst werden, wenn Windows auf anderen Partition(en) liegt (siehe <a class="crosslink" href="#Windows-Partitionen-ermitteln">Windows-Partitionen ermitteln</a>). </p></li><li><p>Für jede Partition wird eine Zeile eingetragen.</p></li></ul><p>
Variante 1: (Für <code class="notranslate">BENUTZER</code> den eigenen Benutzernamen eintragen)</p><pre class="notranslate"># Zugriffsrechte für VirtualBox raw disk access
# Nur Benutzer BENUTZER kann direkt auf sda1 zugreifen
#
KERNEL=="sda1", OWNER="BENUTZER", MODE="0664" </pre><p>
Variante 2: </p><pre class="notranslate"># Zugriffsrechte für VirtualBox raw disk access
# Nur Gruppe vboxusers kann direkt auf sda1 zugreifen
#
KERNEL=="sda1", GROUP="vboxusers", MODE="0664" </pre><p>Zusatzbeispiele: </p><pre class="notranslate"># Zugriffsrechte für VirtualBox raw disk access
# Nur Gruppe vboxusers kann direkt auf die Partitionen sdb2 und sdb4 sowie auf die gesamte Festplatte sdc zugreifen
#
KERNEL=="sdb2", GROUP="vboxusers", MODE="0664" 
KERNEL=="sdb4", GROUP="vboxusers", MODE="0664" 
KERNEL=="sdc", GROUP="vboxusers", MODE="0664" </pre><p>Natürlich sind auch Kombinationen von Nutzer und Gruppe möglich.</p><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>VirtualBox benötigt für RAW-Festplatten Lese-, als auch Schreibzugriff. 
Andernfalls kann es vorkommen, dass VirtualBox auf das Medium nicht zugreifen kann und im Medienmanager einen Fehler ausgibt, der im ersten Moment auf fehlende Dateiberechtigungen für die oben erstellten vmdk-Dateien schließen lassen würde.
</p></div></div><p>Durch einen Systemneustart oder mit folgendem Befehl wird die Rechtevergabe wirksam gemacht: <sup><a href="#source-3">[3]</a></sup>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo udevadm trigger </pre></div></div><p>
(Im Zweifelsfall neu starten, der Befehl scheint nicht immer erfolgreich zu sein.)</p></div><div class="section_2"><h3 id="Festplattenverweis-einhaengen">Festplattenverweis einhängen<a class="headerlink" href="#Festplattenverweis-einhaengen">¶</a></h3><p>
Das Einhängen und Aushängen von Speichermedien ist unter  <em>"WindowsRAW → Ändern → Massenspeicher"</em> möglich. Dort werden auch virtuelle SATA- und IDE-Controller verwaltet. 
</p><ul><li><p>Für Windows 7 / 8 / 10 werden Festplatten und CD/DVD-Laufwerke <span class="underline">gewöhnlich</span> am virtuellen SATA-Controller eingehangen.</p></li><li><p>Gibt es Bootprobleme, kann es helfen, den virtuellen IDE-Controller zu verwenden. (Zusätzlich kann es helfen, den IDE-Controller auf <em>ICH6</em> zu setzen).</p></li><li><p>An den gewählten Einhängepunkt wird <strong>~/VirtualBox VMs/WindowsRAW/WindowsRAW.vmdk</strong> eingehangen.</p></li></ul></div></div><div class="section_1"><h2 id="Angleichung-Virtuell-an-Physikalisch">Angleichung Virtuell an Physikalisch<a class="headerlink" href="#Angleichung-Virtuell-an-Physikalisch">¶</a></h2><p>
Die folgenden Unterpunkte dienen dazu, die virtuellen Hardwaredaten den physikalischen Daten des Computers weitmöglichst anzugleichen. 
</p><ul><li><p>Dieser Aufwand dient allein dem Zweck, die Produktneuaktivierung von Windows zu vermeiden. </p></li><li><p>Für <a class="crosslink" href="#Andere-Parallelsysteme">andere Parallelsysteme</a> als Windows kann darauf verzichtet und beim <a class="crosslink" href="#Erster-Start-von-Windows-in-VirtualBox">nächsten Schritt</a> weitergemacht werden. </p></li><li><p>Vorinstallierte <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Erstausr%C3%BCster">OEM-Versionen</a> von Windows 8 und Windows 10 enthalten im BIOS meist eine MSDM-Tabelle, die der Hardwareerkennung dient. Ob der eigene Rechner eine MSDM-Tabelle enthält, kann man in Ubuntu sehen, indem man nachschaut, ob es eine Datei <strong>/sys/firmware/acpi/tables/MSDM</strong> gibt. Wenn das der Fall ist, reichen die virtuellen Hardwareanpassungen dieses Artikels nicht aus, um Windows uneingeschränkt in VirtualBox nutzen zu können. Daher kann bei <a class="crosslink" href="#Erster-Start-von-Windows-in-VirtualBox">nächsten Schritt</a> weitergemacht werden. Die Einschränkungen sind:</p><ul><li><p>Im virtuellen Betrieb darf keine Internetverbindung für Windows hergestellt werden.</p></li><li><p>Mindestens einmal im Monat muß Windows physikalisch im Dualboot gestartet werden.</p></li></ul></li></ul><p>
</p><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Für Überprüfung und Korrektur der Angleichung gibt es mehrere Möglichkeiten:
</p><ul><li><p>Die Skripte tragen die ermittelten Werte in die Datei <strong>WindowsRAW.vbox</strong> ein. Dort kann man nachsehen. </p></li><li><p><strong>WindowsRAW.vbox</strong> bitte nicht editieren! Eintragungen können durch Setzen von <code class="notranslate">""</code> statt z.B. <code class="notranslate">"&lt;EMPTY&gt;"</code> entfernt werden. Veränderungen sind nur mit Hilfe von <code class="notranslate">VBoxManage</code> zulässig.</p></li><li><p>Wenn eine <a class="internal" href="./desktop-cd.html">Ubuntu Desktop-CD</a> in WindowsRAW gebootet wird, kann z.B. mit Hilfe von <code class="notranslate">dmidecode</code> vieles überprüft werden. Vgl. auch die <a class="crosslink" href="#Problembehebung">Problembehebung</a>, ganz am Ende, zum Thema "Produktaktivierung".</p></li><li><p>Es gibt auch ein <a class="external" href="http://gnuwin32.sourceforge.net/packages/dmidecode.htm" rel="nofollow">dmidecode für Windows</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/>. In der <a class="external" href="http://windows.microsoft.com/de-de/windows-vista/command-prompt-frequently-asked-questions" rel="nofollow">Eingabeaufforderung von Windows</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> zeigt es dieselbe Ausgabe wie von Ubuntu her bekannt.</p></li></ul><p>
Jede Version (und ihre Installationsvarianten) von Windows haben verschiedene Schwerpunkte in der "Hardwarebewertung" der "Identitätsprüfung" des Computers. (Hinweise dazu in den <a class="crosslink" href="#Links">Links</a>). Einige scheinen allen mehr oder minder gemeinsam zu sein. Besonders wichtige Hardwaredaten sind: 
</p><ul><li><p>DmiSystemUuid (<code class="notranslate">dmidecode -t1</code>)</p></li><li><p>Seriennummer der Festplatte</p></li><li><p>Hardwareadressen der Netzwerkadapter</p></li><li><p>SLIC-Tabelle (nur Windows 7 sowie per Update von Vista/7 installiertes 8 oder 10)</p></li><li><p>DmiBoard-Parameter (<code class="notranslate">dmidecode -t2</code>)</p></li><li><p>Neu seit Windows 8 ist die MSDM-Tabelle. Diese ist komplexer aufgebaut als ihr Vorgänger SLIC. Sie enthält einen Hardware-Hash, der aus nicht öffentlich bekannten Eigenschaften der Hardware berechnet wird und dient der möglichst eindeutigen Wiedererkennung des Rechners. Der Schwerpunkt der Prüfung soll auf dem Mainboard liegen. Die virtuellen Hardwareanpassungen dieses Artikels reichen nicht aus, um diesem Hardware-Hash zu entsprechen. Mögliche Ansätze zur noch besseren virtuellen Hardwareangleichung werden in der <a class="crosslink" href="https://forum.ubuntuusers.de/post/8610408/">Diskussion zum Artikel</a> beschrieben.</p></li></ul></div></div><div class="section_2"><h3 id="SLIC-Tabelle">SLIC-Tabelle<a class="headerlink" href="#SLIC-Tabelle">¶</a></h3><p>
Die <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Erstausr%C3%BCster">OEM-Versionen</a> von Windows 7, also vom Hardwarehersteller vorinstallierte Windowsversionen, lesen aus dem BIOS die <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/SLIC">SLIC-Tabelle</a> aus, um zu überprüfen, ob sie auf dem "richtigen" Rechner installiert sind. Wurde von Windows 7 ein Update auf Windows 8 oder 10 gemacht, wird die SLIC-Tabelle auch ausgelesen.
</p><ul><li><p>Ob der eigene Rechner eine SLIC-Tabelle enthält, kann man in Ubuntu sehen, indem man nachschaut, ob es eine Datei <strong>/sys/firmware/acpi/tables/SLIC</strong> gibt. </p></li><li><p>OEM-Versionen von Windows 8 und 10 enthalten statt der SLIC-Tabelle meist eine MSDM-Tabelle. Sie kann genauso ausgelesen und eingebunden werden wie die SLIC-Tabelle. Leider genügt das nicht, um die Produktneuaktivierung zu vermeiden.</p></li><li><p>Sollte sich auf Ihrem Rechner weder eine MSDM-, noch eine SLIC-Tabelle befinden, können Sie sich ohne Probleme dem nächsten Abschnitt widmen.</p></li></ul><p>
</p><ul><li><p>Die SLIC-Tabelle wird ausgelesen und anschließend die Besitzrechte auf den aktuellen Benutzer übertragen: <sup><a href="#source-3">[3]</a></sup></p><div class="bash"><div class="contents"><pre class="notranslate">sudo dd if=/sys/firmware/acpi/tables/SLIC of=~/VirtualBox\ VMs/WindowsRAW/WindowsRAW_SLIC.bin 
sudo chown $USER ~/VirtualBox\ VMs/WindowsRAW/WindowsRAW_SLIC.bin </pre></div></div><p> </p></li><li><p>Die Datei <strong>~/VirtualBox VMs/WindowsRAW/WindowsRAW_SLIC.bin</strong> sollte exakt 374 Byte groß sein.</p></li><li><p>Die SLIC-Tabelle wird eingebunden mit dem Befehl: <sup><a href="#source-3">[3]</a></sup></p><div class="bash"><div class="contents"><pre class="notranslate">VBoxManage setextradata "WindowsRAW" "VBoxInternal/Devices/acpi/0/Config/CustomTable" "$HOME/VirtualBox VMs/WindowsRAW/WindowsRAW_SLIC.bin" </pre></div></div></li></ul></div><div class="section_2"><h3 id="Virtuelle-BIOS-Daten-angleichen">Virtuelle BIOS-Daten angleichen<a class="headerlink" href="#Virtuelle-BIOS-Daten-angleichen">¶</a></h3><p>
Es werden einige physikalische BIOS-Daten benötigt: <sup><a href="#source-3">[3]</a></sup></p><div class="bash"><div class="contents"><pre class="notranslate">sudo dmidecode -t0 </pre></div></div><p>Die Ausgabe kann z.B. so aussehen:</p><pre class="notranslate"># dmidecode 2.9
SMBIOS 2.3 present.

Handle 0x0000, DMI type 0, 20 bytes
BIOS Information
	Vendor: Phoenix Technologies LTD
	Version: R01-A0T   
	Release Date: 05/25/2005
	Address: 0xE63F0
	Runtime Size: 105488 bytes
	ROM Size: 512 kB
	Characteristics:
		ISA is supported
                [...]
        Bios Revision: 2.3
        Firmware Revision: 2.3</pre><p>
Außerdem:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo dmidecode -t1 </pre></div></div><p>Die Ausgabe kann z.B. so aussehen:</p><pre class="notranslate"># dmidecode 2.9
SMBIOS 2.3 present.

Handle 0x0001, DMI type 1, 25 bytes
System Information
	Manufacturer: 0001
	Product Name: WIM 2050
	Version:                
	Serial Number: System serial number                            
	UUID: 20202020-2020-2020-2020-202020202020
	Wake-up Type: Power Switch
        Family: To be filled by O.E.M.</pre><p>Des weiteren werden die Werte von <code class="notranslate">dmidecode -t2</code>, <code class="notranslate">dmidecode -t3</code>, <code class="notranslate">dmidecode -t4</code> und <code class="notranslate">dmidecode -t11</code> benötigt,</p><p>Es wird ein Skript mit dem Namen <strong>WindowsRAW_BIOS.sh</strong> erstellt, das die wichtigsten BIOS-Daten in die Konfiguration der virtuellen Maschine überträgt. Das Skript <span class="underline">nicht</span> wie gegeben ausführen, sondern den eben ermittelten Daten gemäß anpassen! <sup><a href="#source-6">[6]</a></sup>
</p><ul><li><p>Sind <code class="notranslate">Bios Revision</code> und <code class="notranslate">Firmware Revision</code> nicht angegeben, werden die Werte von <code class="notranslate">SMBIOS</code> verwendet. </p></li><li><p>Auch unsinnig erscheinende Einträge müssen wörtlich übernommen werden. </p></li><li><p>Leere oder nicht erscheinende Einträge werden mit <code class="notranslate">"&lt;EMPTY&gt;"</code> eingetragen. </p></li><li><p>Bei einem (U)EFI-System muß die Variable <code class="notranslate">CFG_PATH</code> angepaßt werden (<code class="notranslate">#</code> vor <code class="notranslate">CFG_PATH</code> entfernen).</p></li></ul><p>Das Skript wird einmal ausgeführt und danach nicht mehr benötigt:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#! /bin/bash</span>
<span class="nv">VM_NAME</span><span class="o">=</span><span class="s2">"WindowsRAW"</span>                                                          <span class="c1"># Name der Virtuellen Maschine</span>
<span class="nv">VSETED</span><span class="o">=</span><span class="s2">"VBoxManage setextradata </span><span class="nv">$VM_NAME</span><span class="s2">"</span>
<span class="nv">CFG_PATH</span><span class="o">=</span><span class="s2">"VBoxInternal/Devices/pcbios/0/Config"</span>                               <span class="c1"># klassisches BIOS-System</span>
<span class="c1"># CFG_PATH="VBoxInternal/Devices/efi/0/Config"                                  # EFI-System</span>


<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiBIOSVendor       <span class="s2">"string:Phoenix Technologies LTD"</span>       <span class="c1"># "Vendor" aus "dmidecode -t0"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiBIOSVersion      <span class="s2">"string:R01-A0T"</span>                        <span class="c1"># "Version" aus "dmidecode -t0"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiBIOSReleaseDate  <span class="s2">"string:05/25/2005"</span>                     <span class="c1"># "Release Date" aus "dmidecode -t0"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiBIOSReleaseMajor  <span class="s2">"2"</span>                                    <span class="c1"># "Bios Revision 1. Zahl" aus "dmidecode -t0"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiBIOSReleaseMinor  <span class="s2">"3"</span>                                    <span class="c1"># "Bios Revision 2. Zahl" aus "dmidecode -t0"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiBIOSFirmwareMajor <span class="s2">"2"</span>                                    <span class="c1"># "Firmware Revision 1. Zahl" aus "dmidecode -t0"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiBIOSFirmwareMinor <span class="s2">"3"</span>                                    <span class="c1"># "Firmware Revision 2. Zahl" aus "dmidecode -t0"</span>

<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiSystemVendor     <span class="s2">"string:0001"</span>                           <span class="c1"># "Manufacturer" aus "dmidecode -t1"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiSystemProduct    <span class="s2">"string:WIM 2050"</span>                       <span class="c1"># "Product Name" aus "dmidecode -t1"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiSystemVersion    <span class="s2">"&lt;EMPTY&gt;"</span>                               <span class="c1"># "Version" aus "dmidecode -t1"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiSystemSerial     <span class="s2">"string:System serial number"</span>           <span class="c1"># "Serial Number" aus "dmidecode -t1"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiSystemSKU        <span class="s2">"&lt;EMPTY&gt;"</span>                               <span class="c1"># "SKU Number" aus "dmidecode -t1"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiSystemUuid       <span class="s2">"string:20202020-2020-2020-2020-202020202020"</span>  <span class="c1"># "UUID" aus "dmidecode -t1"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiSystemFamily     <span class="s2">"string:To be filled by O.E.M."</span>         <span class="c1"># "Family" aus "dmidecode -t1"</span>

<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiBoardVendor      <span class="s2">"string:Notebook"</span>                       <span class="c1"># "Manufacturer" aus "dmidecode -t2"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiBoardProduct     <span class="s2">"string:WIM 2050"</span>                       <span class="c1"># "Product Name" aus "dmidecode -t2"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiBoardVersion     <span class="s2">"string:Rev.A"</span>                          <span class="c1"># "Version" aus "dmidecode -t2"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiBoardSerial      <span class="s2">"&lt;EMPTY&gt;"</span>                               <span class="c1"># "Serial Number" aus "dmidecode -t2"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiBoardAssetTag     <span class="s2">"string:asset"</span>                          <span class="c1"># "Asset Tag" aus "dmidecode -t2"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiBoardBoardType   <span class="s2">"1234"</span>                                  <span class="c1"># "Type" aus "dmidecode -t2", muss eine Zahl (Integer) oder "" sein</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiBoardLocInChass  <span class="s2">"string:locinchass"</span>                     <span class="c1"># "Location in Chassis" aus "dmidecode -t2"</span>

<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiChassisAssetTag  <span class="s2">"&lt;EMPTY&gt;"</span>                               <span class="c1"># "Asset Tag" aus "dmidecode -t3"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiChassisSerial    <span class="s2">"&lt;EMPTY&gt;"</span>                               <span class="c1"># "Serial Number" aus "dmidecode -t3"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiChassisVendor    <span class="s2">"string:Medion"</span>                         <span class="c1"># "Manufacturer" aus "dmidecode -t3"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiChassisVersion   <span class="s2">"string:N/A"</span>                            <span class="c1"># "Version" aus "dmidecode -t3"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiChassisType       <span class="s2">"1234"</span>                                 <span class="c1"># "Type" aus "dmidecode -t3", muss eine Zahl (Integer) oder "" sein</span>

<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiProcManufacturer  <span class="s2">"string:Intel"</span>                         <span class="c1"># "Manufacturer" aus "dmidecode -t4"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiProcVersion       <span class="s2">"string:Intel(R) Pentium(R) M processor"</span>  <span class="c1"># "Version" aus "dmidecode -t4"</span>

<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiOEMVBoxVer        <span class="s2">"string:SMBIOS 2.3"</span>                    <span class="c1"># "String 1" aus  "dmidecode -t11"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/DmiOEMVBoxRev        <span class="s2">"string:Customer Reference Platform"</span>   <span class="c1"># "String 2" aus  "dmidecode -t11"</span>
</pre></div>
</td></tr></table></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Sollte VirtualBox später für einen Parameter der mit &lt;EMPTY&gt; belegt ist einen Fehler ausgeben, bearbeiten Sie das Skript so, dass der bemängelte Wert einen sinnvollen Wert besitzt und führen Sie es erneut aus.
Wenn zum Beispiel <strong>dmidecode -t0</strong> keinen Parameter <code class="notranslate">Firmware Revision</code> angibt, so können Sie dort auch die Werte von <code class="notranslate">Bios Revision</code> nutzen.
</p></div></div><p>
</p></div><div class="section_2"><h3 id="Virtuelle-Festplattendaten-angleichen">Virtuelle Festplattendaten angleichen<a class="headerlink" href="#Virtuelle-Festplattendaten-angleichen">¶</a></h3><p>
Es werden einige Daten zur Festplatte benötigt. <code class="notranslate">/dev/sda</code> muss ggf. angepasst werden, wenn Windows z.B.
auf der <strong>/dev/sdb</strong>-Platte liegt (siehe <a class="crosslink" href="#Windows-Partitionen-ermitteln">Windows-Partitionen ermitteln</a>): <sup><a href="#source-3">[3]</a></sup></p><div class="bash"><div class="contents"><pre class="notranslate">sudo hdparm -i /dev/sda </pre></div></div><p>Die Ausgabe kann z.B. so aussehen:</p><pre class="notranslate">/dev/sda:

 Model=WDC WD1200BEVE-00WZT0, FwRev=01.01A01, SerialNo=WD-WX60A89E4748
 [...]</pre><p>Bei neueren Systemen (vor allem, wenn eine M2-SSD-Festplatte genutzt wird) kann es vorkommen, dass <strong>hdparm</strong> den Fehler <em>HDIO_GET_IDENTITY failed: Inappropriate ioctl for device</em> ausgibt. Sollte dies der Fall sein, installieren Sie das Package
</p><ul><li><p><strong>nvme-cli</strong> (xenial/universe)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install nvme-cli </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install nvme-cli </pre></div></div><p>
</p></div></div><p>und führen Sie den folgenden Befehl aus:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo nvme list </pre></div></div><p>Beispielsweise kann die Ausgabe so aussehen:</p><pre class="notranslate">Node             SN                   Model                                    Version  Namespace Usage                      Format           FW Rev  
---------------- -------------------- ---------------------------------------- -------- --------- -------------------------- ---------------- --------
/dev/nvme0n1     S2GLNCAGC14199E      Samsung SSD 950 PRO 256GB                1.1      1          59,24  GB / 256,06  GB    512   B +  0 B   1B0QBXX7
</pre><ul><li><p>Die ermittelten Daten zur <code class="notranslate">Model</code>, <code class="notranslate">FwRev</code> und <code class="notranslate">SerialNo</code> <em>(bzw. SN)</em> müssen in das folgende Skript <strong>WindowsRAW_HD.sh</strong> eingetragen werden. </p></li><li><p>Im Skript wird davon ausgegangen, dass die Festplatte am virtuellen Primary Master des virtuellen IDE-Controllers eingehangen wurde. Ansonsten ggf. anpassen.</p></li><li><p>Das Skript wird einmal ausgeführt und danach nicht mehr benötigt<sup><a href="#source-6">[6]</a></sup>.</p></li></ul><p>
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#! /bin/bash</span>
<span class="nv">VM_NAME</span><span class="o">=</span><span class="s2">"WindowsRAW"</span>                                                  <span class="c1"># Name der Virtuellen Maschine</span>
<span class="nv">VSETED</span><span class="o">=</span><span class="s2">"VBoxManage setextradata </span><span class="nv">$VM_NAME</span><span class="s2">"</span>

<span class="nv">CFG_PATH</span><span class="o">=</span><span class="s2">"VBoxInternal/Devices/piix3ide/0/Config/PrimaryMaster"</span>       <span class="c1"># (Festplatte hängt am Primary Master vom virtuellen IDE-Controller)</span>
<span class="c1"># CFG_PATH="VBoxInternal/Devices/piix3ide/0/Config/SecundaryMaster"     # (Alternativ: Festplatte hängt am Secundary Master vom virtuellen IDE-Controller)</span>
<span class="c1"># CFG_PATH="VBoxInternal/Devices/piix3ide/0/Config/PrimarySlave"        # (Alternativ: Festplatte hängt am Primary Slave vom virtuellen IDE-Controller)</span>
<span class="c1"># CFG_PATH="VBoxInternal/Devices/piix3ide/0/Config/SecundarySlave"      # (Alternativ: Festplatte hängt am Secundary Slave vom virtuellen IDE-Controller)</span>
<span class="c1"># CFG_PATH="VBoxInternal/Devices/ahci/0/Config/Port0"                   # (Alternativ: Festplatte hängt am Port 0 vom virtuellen SATA-Controller)</span>
<span class="c1"># CFG_PATH="VBoxInternal/Devices/ahci/0/Config/Port1"                   # (Alternativ: Festplatte hängt am Port 1 vom virtuellen SATA-Controller)</span>
<span class="c1"># CFG_PATH="VBoxInternal/Devices/ahci/0/Config/Port2"                   # (Alternativ: Festplatte hängt am Port 2 vom virtuellen SATA-Controller)</span>

<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/ModelNumber         <span class="s2">"string:WDC WD1200BEVE-00WZT0"</span>  <span class="c1"># "Model" aus "hdparm -i /dev/sda"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/FirmwareRevision    <span class="s2">"string:01.01A01"</span>               <span class="c1"># "FwRev" aus "hdparm -i /dev/sda"</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/SerialNumber        <span class="s2">"string:WD-WX60A89E4748"</span>        <span class="c1"># "SerialNo" aus "hdparm -i /dev/sda"</span>
</pre></div>
</td></tr></table></div></div><div class="section_2"><h3 id="Virtuelles-CD-DVD-Laufwerk-angleichen">Virtuelles CD/DVD-Laufwerk angleichen<a class="headerlink" href="#Virtuelles-CD-DVD-Laufwerk-angleichen">¶</a></h3><p>
Wenn ein physikalisches CD/DVD-Laufwerk vorliegt, muss ein virtuelles CD/DVD-Laufwerk am virtuellen SATA-Controller eingehangen werden. (Es ist zwar möglich, auch an den virtuellen IDE-Controller CD/DVD-Laufwerke einzuhängen, für diese können die Hardwaredaten aber nicht verändert werden.)
</p><ul><li><p>An den virtuellen SATA-Controller wird nun ein CD/DVD-Laufwerk eingehangen, falls noch nicht vorhanden. </p></li><li><p>Sind mehrere physikalische CD/DVD-Laufwerke angeschlossen, müssen auch für diese virtuelle CD/DVD-Laufwerke eingehangen und angepasst werden. </p></li></ul><p>
Es werden Angaben zum physikalischen CD/DVD-Laufwerk benötigt:</p><div class="bash"><div class="contents"><pre class="notranslate">cdrecord -scanbus </pre></div></div><p>Die Ausgabe kann z.B. so aussehen:
</p><pre class="notranslate">scsibus1:
        1,0,0   100) 'Optiarc ' 'DVD RW AD-7710H ' '1.S0' Removable CD-ROM
        1,1,0   101) *              
  [...]</pre><ul><li><p>Die drei nach <code class="notranslate">100)</code> stehenden Werte werden in das folgende Skript <strong>WindowsRAW_CD.sh</strong> eingetragen. </p></li><li><p>Im Skript wird davon ausgegangen, dass das CD/DVD-Laufwerk am ersten Port (= Port 0) vom virtuellen SATA-Controller eingehangen wurde, ansonsten ggf. anpassen. </p></li><li><p>Sind am Rechner mehrere CD/DVD-Laufwerke, müssen auch für diese virtuelle CD/DVD-Laufwerke eingerichtet und angepasst werden.</p></li><li><p>Das Skript wird einmal ausgeführt und danach nicht mehr benötigt. <sup><a href="#source-6">[6]</a></sup></p></li></ul><p>
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nv">VM_NAME</span><span class="o">=</span><span class="s2">"WindowsRAW"</span>                                    <span class="c1"># Name der Virtuellen Maschine</span>
<span class="nv">VSETED</span><span class="o">=</span><span class="s2">"VBoxManage setextradata </span><span class="nv">$VM_NAME</span><span class="s2">"</span>
<span class="nv">PORT</span><span class="o">=</span><span class="s2">"Port0"</span>                                            <span class="c1"># CD/DVD-Laufwerk hängt am ersten Port (=Port 0) vom virtuellen SATA-Controller</span>
<span class="c1"># PORT="Port1"                                            # (Alternativ: CD/DVD-Laufwerk hängt am zweiten Port (=Port 1) vom virtuellen SATA-Controller)</span>
<span class="c1"># PORT="Port2"                                            # (Alternativ: CD/DVD-Laufwerk hängt am dritten Port (=Port 2) vom virtuellen SATA-Controller)</span>
 
<span class="nv">CFG_PATH</span><span class="o">=</span><span class="s2">"VBoxInternal/Devices/ahci/0/Config/</span><span class="nv">$PORT</span><span class="s2">"</span>

<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/ATAPIVendorId       <span class="s2">"string:Optiarc"</span>                    <span class="c1"># Erster Wert (Hersteller)</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/ATAPIProductId      <span class="s2">"string:DVD RW AD-7710H"</span>            <span class="c1"># Zweiter Wert (Modell)</span>
<span class="nv">$VSETED</span> <span class="nv">$CFG_PATH</span>/ATAPIRevision       <span class="s2">"string:1.S0"</span>                       <span class="c1"># Dritter Wert (Versionsnummer)</span>
</pre></div>
</td></tr></table></div><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Sollte Ihr Rechner kein optisches Laufwerk besitzen, so können Sie trotzdem ohne Gefahr ein virtuelles Laufwerk über VirtualBox einhängen. <em>(Getestet mit Windows 10 - 25.07.2017)</em>
</p></div></div></div><div class="section_2"><h3 id="MAC-Adressen-der-virtuellen-Netzwerkadapter-angleichen">MAC-Adressen der virtuellen Netzwerkadapter angleichen<a class="headerlink" href="#MAC-Adressen-der-virtuellen-Netzwerkadapter-angleichen">¶</a></h3><p>
Es werden die MAC-Adressen der physikalischen Netzwerkadapter benötigt. Dieser Befehl listet alle Netzwerkadapter und ihre Hardwareadressen auf: <sup><a href="#source-3">[3]</a></sup></p><div class="bash"><div class="contents"><pre class="notranslate">ifconfig -a </pre></div></div><p>Die Ausgabe kann so aussehen:</p><pre class="notranslate">eth0      Link encap:Ethernet  Hardware Adresse 00:0a:e4:a3:ed:8a
          [...]</pre><p>
</p><ul><li><p>Die Hardwareadresse wird (ohne ":") in <em>"VirtualBox → WindowsRAW → Ändern → Netzwerk → Erweitert → Mac-Adresse"</em> eingegeben.</p></li><li><p>Für alle ermittelten Netzwerkadapter wird in VirtualBox ein Netzwerkadapter aktiviert und die jeweilige MAC-Adresse eingegeben. </p></li><li><p><code class="notranslate">ppp0</code> und <code class="notranslate">lo</code> haben keine MAC-Adresse und werden hier auch nicht benötigt.</p></li><li><p>Für den Betrieb nicht benötigte Netzwerkverbindungen können durch Entfernen des Häkchens bei <em>"Kabel verbunden"</em> vom Host getrennt werden.</p></li><li><p>Setzen Sie das Häkchen nun bei benötigten Verbindungen. <strong>(HINWEISE ZU MSDM-TABELLEN BEACHTEN!)</strong></p></li></ul></div></div><div class="section_1"><h2 id="Erster-Start-von-Windows-in-VirtualBox">Erster Start von Windows in VirtualBox<a class="headerlink" href="#Erster-Start-von-Windows-in-VirtualBox">¶</a></h2><p>
</p><ol class="arabic"><li><p>Windows erstmals in VirtualBox starten.</p></li><li><p>Es kann sein, dass das erste virtuelle Starten sehr lange dauert. Auch kann für längere Zeit ein nur schwarzer Bildschirm sichtbar sein. Geduldig sein, Windows schaut sich in der neuen Hardwareumgebung um und braucht Zeit. </p></li><li><p>Sollte Windows nicht komplett hochfahren, siehe Abschnitt <a class="crosslink" href="#Probleme-beim-Booten-von-Windows">Problembehebung</a>.</p></li><li><p>Windows bemerkt, dass sich die Hardware verändert hat und bietet an, viele neue Treiber zu installieren. Alle Angebote ablehnen, stattdessen die <a class="internal" href="./virtualbox/benutzung.html#Gasterweiterungen">Gasterweiterungen von VirtualBox</a> installieren. Die Gasterweiterungen scheinen im normalen Dualboot-Betrieb keine Probleme zu machen.</p></li><li><p>Windows neu starten.</p></li><li><p>Windows sollte nun virtuell und physikalisch problemlos starten, ohne eine neue Produktaktivierung zu verlangen.</p></li><li><p>Für Windows 7 kann nun die Internetverbindung in VirtualBox aktiviert werden.  Dafür unter <em>"Ändern → Netzwerk → Erweitert</em>" die Option <em>"Kabel verbunden"</em> anschalten. (Häkchen setzen).</p></li><li><p>Für Windows 8 und Windows 10 darf die Internetverbindung nicht aktiviert werden, falls das BIOS eine MSDM-Tabelle enthält. Es verweigert dann die Mitarbeit und muß heruntergefahren werden. </p></li></ol><p>
</p></div><div class="section_1"><h2 id="Andere-Parallelsysteme">Andere Parallelsysteme<a class="headerlink" href="#Andere-Parallelsysteme">¶</a></h2><p>
Dieser Artikel kann analog auch auf andere parallel installierte Betriebssysteme als Windows angewendet werden. Die Schritte <a class="crosslink" href="#Windows-vorbereiten">Windows vorbereiten</a> und <a class="crosslink" href="#Angleichung-Virtuell-an-Physikalisch">Virtuelle Hardware der physikalischen Hardware angleichen</a> können dann übergangen werden. 
</p><ul><li><p>Es können dabei insbesondere Treiberprobleme durch die abweichende virtuelle Hardware auftreten, die Betriebssystem-spezifisch zu lösen sind. Oft handelt es sich primär um Grafikkartentreiber-Probleme. </p></li><li><p>Die Gasterweiterungen von VirtualBox, die für viele Betriebssysteme angeboten werden, können einen Großteil dieser Probleme beheben. </p></li><li><p>Es kann, je nach System, nötig sein, für den jeweiligen physikalischen oder virtuellen Start verschiedene Konfigurationen zu verwenden. Diese können z.B. durch ein Skript, das während des Bootens ausgeführt wird, vorgenommen werden. (Beispiel: In einem Test mit Ubuntu 7.04 zeigte sich, dass zwei Varianten der Datei <strong>/etc/X11/Xorg.conf</strong> nötig waren, eine von VirtualBox bei Installation der Gasterweiterungen angelegte, und das Original, von dem VirtualBox ein Backup angelegt hatte.)</p></li><li><p>Eine Möglichkeit zu erkennen, ob das System in VirtualBox gestartet wurde, ist das Überprüfen des Grafikadapters. <code class="notranslate">lspci</code> enthält dann die Ausgabe <code class="notranslate">VirtualBox Graphics Adapter</code>. </p></li><li><p>Manche Systeme haben Probleme mit der <em><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Advanced%20Programmable%20Interrupt%20Controller">"IO-APIC"</a></em>-Option, die im Schritt <a class="crosslink" href="#Virtuelle-Maschine-erstellen">Virtuelle Maschine erstellen</a> aktiviert wurde. Auch kann <em>"IO-APIC"</em> die Performance verschlechtern. Versuchsweise kann <em>"IO-APIC"</em> deaktiviert werden.</p></li></ul><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>
</p><ul><li><p>Es darf <strong>niemals</strong> das aktuell laufende Betriebssystem in VirtualBox gestartet werden! Das führt zur totalen Zerstörung des Systems.</p></li><li><p>Durch Treiberanpassungen für den virtuellen Betrieb kann es dazu kommen, dass das System bei einem normalen physikalischen Start Probleme bekommt. Dies kann auch bei Verwendung der VirtualBox-Gasterweiterungen passieren.</p></li></ul></div></div><div class="section_2"><h3 id="Parallelsysteme-mit-systemd">Parallelsysteme mit systemd<a class="headerlink" href="#Parallelsysteme-mit-systemd">¶</a></h3><p>
Die meisten Linux Distributionen sind in den letzten Jahren von <a class="internal" href="./sysvinit.html">SysVinit</a> zu <a class="internal" href="./systemd.html">systemd</a> gewechselt. Wenn beim Bootvorgang in <a class="internal" href="./fstab.html">fstab</a> eingetragene Partitionen nicht gefunden werden, bleibt der Bootvorgang mit <a class="internal" href="./systemd.html">systemd</a> stehen. Für Partitionen, die im Parallelsystem in <strong>/etc/fstab</strong> eingetragen sind, aber nicht in die VM eingebunden werden sollen, muß im Parallelsystem die Datei <strong>/etc/fstab</strong> angepaßt werden. Die mount-Optionen der betroffenen Partitionen müssen ergänzt werden um die Option <code class="notranslate">nofail</code>. Um den entstehenden timeout von 90 Sekunden beim Bootvorgang auf 1 Sekunde abzukürzen, wird außerdem <code class="notranslate">x-systemd.device-timeout=1</code> eingetragen. Beispiel: 
</p><pre class="notranslate">UUID=5713b814-354b-84d7-9c40-307475c55c57    none    swap    sw,nofail,x-systemd.device-timeout=1    0    0</pre></div><div class="section_2"><h3 id="Paralleles-Ubuntu">Paralleles Ubuntu<a class="headerlink" href="#Paralleles-Ubuntu">¶</a></h3><p>
Ein parallel installiertes aktuelles Ubuntu lässt sich erfreulich unproblematisch mit VirtualBox starten. Es erkennt beim Booten selbständig, dass es in einer virtuellen Umgebung gestartet wird, und passt sich dem an. Der Bootvorgang dauert dabei etwas länger als gewohnt (getestet mit Ubuntu 10.04 und Xubuntu 11.10).</p><div class="section_3"><h4 id="Virtuellen-MBR-durch-GRUB-ersetzen">Virtuellen MBR durch GRUB ersetzen<a class="headerlink" href="#Virtuellen-MBR-durch-GRUB-ersetzen">¶</a></h4><p>
</p><ol class="arabic"><li><p>Zum ersten Booten braucht es z.B. die <a class="external" href="http://www.supergrubdisk.org/category/download/supergrub2diskdownload/" rel="nofollow">Super Grub2 Disk</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/><img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/></p></li><li><p>Um das Grub-Auswahlmenü auf das virtualisierte System zu begrenzen, wird innerhalb des virtualisierten Systems <code class="notranslate">sudo update-grub</code> ausgeführt. Dabei wird die <strong>physikalische</strong> Datei <strong>/boot/grub/grub.cfg</strong> auf der virtuell genutzten physikalischen Partition überschrieben.</p></li><li><p>Um Grub in den <a class="crosslink" href="#Bootloader-erzeugen">virtuellen Bootsektor</a> zu installieren, wird innerhalb des virtualisierten Systems <code class="notranslate">sudo grub-install /dev/sda</code> ausgeführt (<code class="notranslate">/dev/sda</code> muss ggf. angepasst werden).</p></li></ol><p>
</p></div><div class="section_3"><h4 id="Gasterweiterungen">Gasterweiterungen<a class="headerlink" href="#Gasterweiterungen">¶</a></h4><p>
</p><ul><li><p>Die Gasterweiterungen können über <em>"Geräte → Gasterweiterungen installieren"</em> als CD eingelegt werden. Installiert wird durch Ausführen von <strong>autorun.sh</strong>.</p></li><li><p>Nach einem Kernel-Update des virtualisierten Systems müssen die Gasterweiterungen neu installiert werden.</p></li></ul><p>
</p></div><div class="section_3"><h4 id="Gemeinsame-Ordner">Gemeinsame Ordner<a class="headerlink" href="#Gemeinsame-Ordner">¶</a></h4><p>
</p><ul><li><p>Zum Benutzen der Funktion <em>"Gemeinsame Ordner"</em> von VirtualBox muss der Benutzer (innerhalb des virtualisierten Ubuntu) der Gruppe <code class="notranslate">vboxsf</code> beitreten, z.B. mittels <code class="notranslate">sudo adduser $USER vboxsf</code>. Damit die Änderung wirksam wird, muss der virtuelle Benutzer sich ab- und wieder anmelden.</p></li><li><p>Permanent erzeugte gemeinsame Ordner werden von VirtualBox nach einem virtuellen Systemneustart automatisch eingebunden unter <strong>/media/sf_ORDNERNAME</strong>. Details und Varianten siehe <a class="external" href="https://www.virtualbox.org/manual/ch04.html#sharedfolders" rel="nofollow">VirtualBox Manual: Shared folders</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>. </p></li></ul><p>
</p></div><div class="section_3"><h4 id="Einschraenkungen">Einschränkungen<a class="headerlink" href="#Einschraenkungen">¶</a></h4><p>
</p><ul><li><p>Es darf nicht dieselbe SWAP-Partition wie die vom Host verwendet werden. Als eine mögliche Alternative kann eine <a class="internal" href="./swap.html#Swap-als-Datei">Swap-Auslagerungsdatei</a> angelegt werden.</p></li><li><p>Es ist auch über die Funktion <em>"Gemeinsame Ordner"</em> nicht möglich, dieselben Konfigurationsdateien aus /home zu nutzen wie der Host.</p></li></ul><p>
</p></div></div><div class="section_2"><h3 id="Ubuntu-in-Windows">Ubuntu in Windows<a class="headerlink" href="#Ubuntu-in-Windows">¶</a></h3><p>
Um Ubuntu in VirtualBox in Windows zu starten, wird wie folgt vorgegangen:
</p><ul><li><p>Für den direkten Festplattenzugriff ("raw disk access") werden Zugriffsrechte benötigt. Eine Möglichkeit ist es, die folgenden Befehle und Programme als Administrator zu starten. </p></li><li><p>Ein Verweis auf die Festplatte, auf der Ubuntu installiert ist, wird erzeugt. Dabei muss <code class="notranslate">HARDDISK</code> ersetzt werden durch den Windows-Pfad zur physikalischen Festplatte, z.B. <code class="notranslate">\\.\PhysicalDrive0</code> oder  <code class="notranslate">\\.\PhysicalDrive1</code>, und <code class="notranslate">MEINPFAD</code> durch den gewünschten Dateipfad. Ausgeführt wird der Befehl unter <em>"Start → Programme → Zubehör → Eingabeaufforderung"</em>. </p><div class="bash"><div class="contents"><pre class="notranslate">cd C:\Programme\Oracle\VirtualBox
VBoxManage internalcommands createrawvmdk -filename "C:\MEINPFAD\UbuntuRAW.vmdk" -rawdisk HARDDISK </pre></div></div></li><li><p>VirtualBox starten, eine VM erzeugen, <strong>UbuntuRAW.vmdk</strong> als Festplatte auswählen.</p></li><li><p>Die VM starten.</p></li><li><p>Es erscheint das GRUB Auswahlmenü. Hier muss Ubuntu gewählt werden. Keinesfalls darf Windows in Windows gebootet werden! Alternativ kann zum Booten die <a class="external" href="http://www.supergrubdisk.org/category/download/supergrub2diskdownload/" rel="nofollow">Super Grub2 Disk</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/><img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/> verwendet werden. </p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Es darf niemals Windows in Windows gebootet werden. Das führt zur Zerstörung des Betriebssystems und kann erhebliche Datenverluste nach sich ziehen.
</p></div></div></li><li><p>Nach erfolgreichem Start können die <a class="crosslink" href="#Gasterweiterungen">Gasterweiterungen</a> von VirtualBox installiert werden. </p></li><li><p>Für Datenaustausch gibt es die Funktion <a class="crosslink" href="#Gemeinsame-Ordner">Gemeinsame Ordner</a>.</p></li></ul></div></div><div class="section_1"><h2 id="Problembehebung">Problembehebung<a class="headerlink" href="#Problembehebung">¶</a></h2><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Pauschale Empfehlung: Bei Problemen sollte geprüft werden, ob die aktuellste Version von VirtualBox installiert ist. Siehe <a class="crosslink" href="#Aktuelle-Version-von-VirtualBox-installieren">Aktuelle Version von VirtualBox installieren</a>.
</p></div></div><p>
</p><div class="section_2"><h3 id="Fehlermeldungen-von-VirtualBox">Fehlermeldungen von VirtualBox<a class="headerlink" href="#Fehlermeldungen-von-VirtualBox">¶</a></h3><p>
</p><ul><li><p><em>VERR_ACCESS_DENIED</em>: Diese Fehlermeldung von VirtualBox oder <code class="notranslate">VBoxManage</code> erscheint, wenn die Zugriffsrechte auf die Festplatte nicht richtig vergeben wurden. </p><ul><li><p>Lösung: Siehe <a class="crosslink" href="#Zugriffsrechte-erteilen">Zugriffsrechte erteilen</a>.</p></li></ul></li><li><p><em>VERR_ALREADY_EXISTS</em>: Diese Fehlermeldung von <code class="notranslate">VBoxManage</code> erscheint, wenn die <strong>WindowsRAW.vmdk</strong>-Datei, die erzeugt werden soll, bereits existiert.</p><ul><li><p>Lösung: Anderen Dateinamen vergeben oder vorhandene Dateien <strong>WindowsRAW.vmdk</strong> und <strong>WindowsRAW-pt.vmdk</strong> löschen, falls sie nicht mehr benötigt werden. Wenn diese Dateien bereits in VirtualBox registriert sind, müssen sie dort entfernt werden:</p><ol class="arabic"><li><p>In VirtualBox unter <em>"Datei → Manager für virtuelle Medien ..."</em> <strong>WindowsRAW.vmdk</strong> auswählen.</p></li><li><p>Rechtsklick, <em>"Freigeben"</em> wählen.</p></li><li><p>Rechtsklick, <em>"Entfernen"</em> wählen.</p></li><li><p>Wird eine neue <strong>WindowsRAW.vmdk</strong> erzeugt und die VM WindowsRAW existiert bereits, muss man sie unter <em>"WindowsRAW → Ändern → Massenspeicher"</em> neu einhängen, am gleichen Einhängepunkt wie zuvor.</p></li></ol></li></ul></li><li><p><em>NS_ERROR_FAILURE</em>: Diese Fehlermeldung deutet auf fehlende Zugriffsrechte. Wenn der Fehler nach Überprüfen dieser möglichen Ursachen bestehen bleibt, kann dies in diesem <a class="crosslink topic" href="https://forum.ubuntuusers.de/topic/virtualbox-dualboot-windows-ns-error-failure/">Thread</a> besprochen werden.</p><ol class="arabic"><li><p>Möglichkeit: Gruppenzugehörigkeit zu <code class="notranslate">vboxusers</code> fehlt.</p><ul><li><p>Lösung: Der Gruppe <code class="notranslate">vboxusers</code> beitreten: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo adduser $USER vboxusers </pre></div></div><p> Danach vom System ab- und wieder anmelden, damit dies wirksam wird. Manchmal ist es nötig, anschließend VirtualBox neu zu initialisieren: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/vboxdrv restart   </pre></div></div><p> </p></li></ul></li><li><p>Möglichkeit: udev-Regel ist falsch.</p><ul><li><p>Lösung: Siehe <a class="crosslink" href="#Zugriffsrechte-erteilen">Zugriffsrechte erteilen</a>, udev-Regel kontrollieren, ggf. Neustarten, damit die udev-Regel ganz sicher vom System verwendet wird.</p></li></ul></li><li><p>Möglichkeit: <strong>WindowsRAW.vmdk</strong> und/oder <strong>WindowsRAW-pt.vmdk</strong> sind nicht Eigentum des aktuellen Benutzers.</p><ul><li><p>Lösung: Besitzrechte auf aktuellen Benutzer übertragen. <sup><a href="#source-3">[3]</a></sup> </p><div class="bash"><div class="contents"><pre class="notranslate">sudo chown $USER ~/VirtualBox\ VMs/WindowsRAW/WindowsRAW.vmdk
sudo chown $USER ~/VirtualBox\ VMs/WindowsRAW/WindowsRAW-pt.vmdk </pre></div></div></li></ul></li></ol></li><li><p><em>VERR_PDM_DEVINS_UNKNOWN_CFG_VALUES</em>: Die installierte Version von VirtualBox ist veraltet.</p><ul><li><p>Lösung: <a class="crosslink" href="#Aktuelle-VirtualBox-Version-installieren">Aktuelle Version von VirtualBox installieren</a>, mindestens 4.2 oder höher.</p></li></ul></li><li><p><em>VBOX_E_OBJECT_NOT_FOUND</em>: <strong>WindowsRAW.vmdk</strong> ist aus irgend einem Grund nicht richtig eingehangen.</p><ul><li><p>Lösung:</p><ol class="arabic"><li><p>In VirtualBox unter <em>"Datei → Manager für virtuelle Medien ..."</em> <strong>WindowsRAW.vmdk</strong> auswählen.</p></li><li><p>Rechtsklick, <em>"Freigeben"</em> wählen.</p></li><li><p>Rechtsklick, <em>"Entfernen"</em> wählen.</p></li><li><p>Unter <em>"WindowsRAW → Ändern → Massenspeicher"</em> die Datei <strong>~/VirtualBox VMs/WindowsRAW/WindowsRAW.vmdk</strong> neu einhängen, am gleichen Einhängepunkt wie zuvor.</p></li></ol></li></ul></li><li><p>Allgemein: Zugriffsrechteprobleme</p><ul><li><p>Gibt es Probleme mit der Rechtezuweisung, kann versuchsweise ein Beitritt des Benutzers zur Gruppe <code class="notranslate">disk</code> gemacht werden. Das räumt dem Benutzer allzu weite Zugriffsrechte ein, ist ein Sicherheitsrisiko und soll/darf keine Dauerlösung sein. Jedoch kann auf diese Weise gut geprüft werden, ob ein Rechteproblem vorliegt. </p></li></ul></li></ul><p>
</p></div><div class="section_2"><h3 id="Probleme-beim-Booten-von-Windows">Probleme beim Booten von Windows<a class="headerlink" href="#Probleme-beim-Booten-von-Windows">¶</a></h3><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Je nach Fehler bietet Windows manchmal Reparaturmöglichkeiten an. Diese sind meist weder hilfreich noch zielführend und bisweilen eine Gefahr für die Daten. Bitte nicht verwenden.</p><p>Für die Reparaturvorschläge in diesem Artikel bitte <span class="underline">niemals</span> Wiederherstellungs-CDs vom Hardwarehersteller verwenden.
</p></div></div><p>
</p><ul><li><p>Generell eine gute Hilfe: </p><ul><li><p><a class="external" href="http://www.supergrubdisk.org/category/download/supergrub2diskdownload/" rel="nofollow">Super Grub2 Disk</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/><img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/></p></li><li><p><a class="internal" href="./desktop-cd.html">Ubuntu Desktop-CD</a></p></li><li><p><a class="external" href="http://www.chip.de/artikel/Windows-7-Neu-installieren-mit-kostenlosem-ISO_46353107.html" rel="nofollow">Windows 7 Installations-DVD</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/></p></li><li><p><a class="external" href="http://www.computerbild.de/artikel/cb-Ratgeber-Kurse-Software-So-erstellen-Sie-eine-Reparatur-CD-fuer-Windows-7-7318355.html" rel="nofollow">Windows Reparatur-CD</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/></p></li><li><p><a class="external" href="http://www.drwindows.de/windows-anleitungen-und-faq/2566-erweiterte-reparaturfunktion-der-windows-dvd-notfall-cd.html" rel="nofollow"><em>"Eingabeaufforderung"</em> der Windows-CD</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li></ul></li><li><p>Nach Bluescreen startet Windows neu, bevor die Fehlermeldung gelesen werden kann.</p><ul><li><p>Lösung 1: Reboot durch VirtualBox verhindern lassen, damit der Fehler lesbar ist: </p><div class="bash"><div class="contents"><pre class="notranslate">VBoxManage setextradata "WindowsRAW" "VBoxInternal/PDM/HaltOnReset" 1  </pre></div></div><p> Dies kann rückgängig gemacht werden durch</p><div class="bash"><div class="contents"><pre class="notranslate">VBoxManage setextradata "WindowsRAW" "VBoxInternal/PDM/HaltOnReset" 0  </pre></div></div></li><li><p>Lösung 2: Windows physikalisch booten, unter <em>"Start → Einstellungen → Systemsteuerung → System → Erweitert → Starten und Wiederherstellen → Einstellungen"</em> wird der Haken bei <em>"Automatisch Neustart durchführen"</em> entfernt. Virtuell booten, jetzt sollte die Fehlermeldung lesbar sein.</p></li></ul></li><li><p>Nach dem Start von MBR bleibt der Boot stehen, auch nach langem Warten.</p><ul><li><p>Lösung 1: Super Grub2 Disk verwenden, sie umgeht den MBR.</p></li><li><p>Lösung 2: Neuen Windows-MBR erstellen. Dazu wie folgt vorgehen:</p><ol class="arabic"><li><p>Windows Installations- oder Reparatur-CD verwenden.</p></li><li><p>In VirtualBox mit Windows-CD booten. Eingabeaufforderung wählen.</p></li><li><p><code class="notranslate">bootrec /fixmbr</code> eingeben. Damit wird der virtuelle MBR überschrieben.</p></li><li><p>Windows ohne CD in VirtualBox neu starten.</p></li></ol></li></ul></li><li><p><em>"STOP 0x0000007B"</em></p><ul><li><p>Lösung 1: Den Schritt <a class="crosslink" href="#Treibervorbereitung-Windows-7">Treibervorbereitung: Windows 7</a> überprüfen, <strong>MergeIDE.reg</strong> erneut ausführen.</p></li><li><p>Lösung 2: <strong>WindowsRAW.vmdk</strong> am virtuellen IDE-Controller statt am SATA-Controller einhängen. Achtung: Das Skript für die <a class="crosslink" href="#Virtuelle-Festplattendaten-angleichen">Angleichung der Festplattendaten</a> muss bei dieser Lösungsvariante angepasst und erneut ausgeführt werden. Wenn sich der Einhängepunkt für das CD/DVD-Laufwerk ändert, auch Skript anpassen und erneut ausführen.</p></li><li><p>Lösung 3: Fehlerbehandlung auf dieser <a class="external" href="http://support.microsoft.com/kb/922976" rel="nofollow">Microsoft Support Seite</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/></p></li></ul></li><li><p><em>"STOP: 0x0000007E"</em> oder <em>"STOP 0x000000FC"</em></p><ul><li><p>Lösung: Es liegt ein Problem mit dem CPU-Treiber <strong>intelppm.sys</strong> vor. Eine Fehlerbehandlung findet sich auf dieser <a class="external" href="http://support.microsoft.com/kb/953356/de" rel="nofollow">Microsoft Support-Seite</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>.</p></li></ul></li><li><p>Windows fordert auf, Scandisk zu starten, oder will zur letzten als funktionierend bekannten Konfiguration zurückkehren, oder bleibt hängen ohne Fehlermeldung.</p><ul><li><p>Lösung: Ursache kann ein fehlerhafter Grafikkartentreiber sein (<strong>C:\WINDOWS\system32\agp440.sys</strong>). Einige Szenarien und ihre Lösung werden auf dieser <a class="external" href="http://support.microsoft.com/kb/324764" rel="nofollow">Microsoft Support-Seite</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> beschrieben. </p></li></ul></li><li><p><em>"Status: 0xc000000e Info: Fehler bei Startauswahl. Zugriff auf ein erforderliches Gerät nicht möglich."</em></p><ul><li><p>Lösung: Manchmal tritt dieser Fehler beim Booten von Windows 7 auf (Problembesprechung in diesem <a class="crosslink topic" href="https://forum.ubuntuusers.de/topic/dualboot-windows-virtualisieren-fehler-0xc0000/">Thread</a>). Der Disk Identifier ist zwischen dem nativen MBR und dem virtualisierten MBR unterschiedlich. Dies wird im Schritt <a class="crosslink" href="#Bootloader-erzeugen">Bootloader erzeugen</a> korrigiert; dieser Schritt sollte überprüft werden. Alternativ kann das Problem so behoben werden:</p><ol class="arabic"><li><p>Benötigt wird der Wert der <code class="notranslate">Festplattenidentifikation</code> aus der Ausgabe des Befehls </p><div class="bash"><div class="contents"><pre class="notranslate">sudo fdisk -l </pre></div></div><p> Dieser liegt im Hexadezimalformat vor, z.B. so: </p><pre class="notranslate">Festplattenidentifikation: 0xacbdacbd</pre></li><li><p>Eine beliebige <a class="internal" href="./desktop-cd.html">Desktop-CD</a> wird benötigt und damit WindowsRAW gebootet. </p></li><li><p>In der Desktop-CD-Arbeitsumgebung Terminal aufrufen und folgendes ausführen: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo fdisk /dev/sda  </pre></div></div></li><li><p><a class="internal" href="./fdisk.html">fdisk</a> bietet nun einen Befehlsmodus. Dort </p><div class="bash"><div class="contents"><pre class="notranslate">x </pre></div></div><p> eingeben, um den Expertenmodus aufzurufen (<code class="notranslate">m</code> zeigt sämtliche Optionen).</p></li><li><p>Anschließend </p><div class="bash"><div class="contents"><pre class="notranslate">i  </pre></div></div><p> eingeben. Es erscheint eine Aufforderung, die neue Festplattenidentifikation einzugeben. </p></li><li><p>Neue Festplattenidentifikation eingeben.</p></li><li><p>Mit folgendem Kommando MBR neu schreiben: </p><div class="bash"><div class="contents"><pre class="notranslate">w </pre></div></div></li><li><p>Desktop-CD entfernen, Windows neu booten. Der Fehler sollte behoben sein.</p></li></ol></li></ul></li></ul><p>
</p></div><div class="section_2"><h3 id="Sonstige-Probleme">Sonstige Probleme<a class="headerlink" href="#Sonstige-Probleme">¶</a></h3><p>
</p><ul><li><p>Die Funktion <em>"Neustart"</em> und/oder <em>"Herunterfahren"</em> von Windows funktioniert in beiden Betriebsmodi nicht mehr richtig. Windows beendet alle Programme, bleibt aber im Abmeldebildschirm, ohne ein Reset auszulösen bzw. den Computer auszuschalten. Die Maus bleibt beweglich. Die Ursache ist vermutlich ein <a class="external" href="https://www.virtualbox.org/ticket/9489#no3" rel="nofollow">Bug</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> in den Gasterweiterungen. </p><ul><li><p>Lösung: Bisweilen genügt es, in VirtualBox unter <em>"WindowsRAW → Ändern → Absolutes Zeigegerät aktivieren"</em> das Häkchen zu entfernen.</p></li><li><p>Behelfslösung: Abwarten, bis die Festplatte ruhig ist, um sicherzustellen, dass Windows alle nötigen Daten gesichert hat, dann (im Normalbetrieb) Computer per Knopfdruck ausschalten oder (in VirtualBox) Fenster schließen.</p></li></ul></li><li><p>Der native Windows Start funktioniert nach der Installation der VBox Gasterweiterungen nicht mehr, der Bootprozess bleibt im Bootsplash hängen.</p><ul><li><p>Mögliche Lösung: Windows nochmals als Gastsystem booten und in der Registrierung "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\VBoxGuest" den Wert für "Start" von 0 auf 3 ändern. Dies bewirkt, dass die Gasterweiterungen im nativen Start nicht mehr automatisch gestartet werden.</p></li></ul></li><li><p>Windows meldet nach Start in VirtualBox einen ATI-Treiber-Fehler.</p><ul><li><p>Lösung: Die VirtualBox-Gasterweiterungen stellen einen eigenen Grafikkarten-Treiber bereit. Wenn man Glück hat, bietet die Treibersoftware an, diesen Fehler in Zukunft nicht mehr anzuzeigen; dieses Angebot darf man annehmen. Im physikalischen Betrieb wird der ATI-Treiber problemlos weiter verwendet. </p></li></ul></li><li><p>Manche Firewalls machen Probleme, z.B. ZoneAlarm. </p><ul><li><p>Lösung: Abhilfe kann die Verwendung einer anderen Firewall schaffen.</p></li></ul></li><li><p>Advanced Tokens Manager: Bei Schwierigkeiten mit diesem Programm siehe <a class="external" href="http://www.joshcellsoftwares.com/2011/07/advanced-tokens-manager-activation.html" rel="nofollow">Herstellerseite</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>. Eventuell neueste Version von dort herunterladen.</p></li><li><p>Windows verlangt trotz aller <a class="crosslink" href="#Angleichung-Virtuell-an-Physikalisch">Angleichung der virtuellen Hardware</a> eine neue Produktaktivierung.</p><ul><li><p>Siehe <a class="crosslink" href="#Produktaktivierung-wiederherstellen">Produktaktivierung wiederherstellen</a>.</p></li><li><p>In der Datei <strong>~/VirtualBox VMs/WindowsRAW.vbox</strong> nachsehen, ob sich die Daten aus den Skripten dort wiederfinden lassen.</p></li><li><p>Alle Arbeitsschritte der <a class="crosslink" href="#Angleichung-Virtuell-an-Physikalisch">Angleichung der virtuellen Hardware</a> noch einmal genauestens prüfen. </p></li><li><p>Mit einer <a class="internal" href="./desktop-cd.html">Desktop-CD</a> in der Windows-VM die Ausgaben von <code class="notranslate">sudo dmidecode</code>, von <code class="notranslate">ifconfig -a</code> und von <code class="notranslate">sudo hdparm -i /dev/sda</code> überprüfen. </p></li><li><p>Probleme mit der Produktaktivierung können in diesem <a class="crosslink topic" href="https://forum.ubuntuusers.de/topic/dualboot-windows-virtualisieren-produktaktivie/">Thread</a> besprochen werden.</p></li></ul></li><li><p>Office 2010 verlangt trotz aller <a class="crosslink" href="#Angleichung-Virtuell-an-Physikalisch">Angleichung der virtuellen Hardware</a> eine neue Produktaktivierung.</p><ul><li><p>Siehe oben, gleiche Problembehebung wie für Windows.</p></li><li><p>Oft verschwindet das Problem, wenn Office 2010 im nativ gebooteten Windows <span class="underline">telefonisch</span> (nicht online!) neu aktiviert wird.</p></li></ul></li></ul><p>
</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><div class="section_2"><h3 id="Intern">Intern<a class="headerlink" href="#Intern">¶</a></h3><p>
</p><ul><li><p><a class="internal" href="./ms-windows_integration.html">MS-Windows Integration</a></p></li><li><p><a class="internal" href="./dualboot.html">Dualboot</a></p></li><li><p><a class="internal" href="./virtualbox.html">VirtualBox</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Extern">Extern<a class="headerlink" href="#Extern">¶</a></h3><p>
</p><ul><li><p><a class="external" href="http://www.virtualbox.org/manual/ch09.html#rawdisk" rel="nofollow">VirtualBox Manual: Chap. 9: Using a raw host hard disk from a guest</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="https://www.virtualbox.org/wiki/Migrate_Windows" rel="nofollow">VirtualBox Wiki: How to migrate existing Windows installations to VirtualBox</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="https://forums.virtualbox.org/viewtopic.php?f=2&amp;t=31759" rel="nofollow">VirtualBox-Forum: Discuss: HOWTO: Windows 7: In both VM and native</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="https://forums.virtualbox.org/viewtopic.php?f=2&amp;t=43678" rel="nofollow">VirtualBox-Forum: Windows 7 Licensing and Immutable Disks (about SLIC and DmiBoard)</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://support.microsoft.com/kb/314082" rel="nofollow">Microsoft Support-Seite betreffs MergeIDE</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/></p></li></ul><p>
</p></div></div></div>
<p class="meta">
<a href="./dualboot-windows_virtualisieren/a/revision/943679.html">Diese Revision</a> wurde am 16. September 2017 14:50 von <a href="https://ubuntuusers.de/user/Opinion/">Opinion</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./dualboot-windows_virtualisieren.html">Dualboot-Windows virtualisieren</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>