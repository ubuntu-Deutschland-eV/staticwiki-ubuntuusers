<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Bluetooth/Einrichtung › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../bluetooth/einrichtung.html">Einrichtung</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Bluetooth/Einrichtung">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../bluetooth/einrichtung/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../bluetooth/einrichtung/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../bluetooth/einrichtung/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../bluetooth/einrichtung/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../bluetooth/einrichtung/a/backlinks.html">Einrichtung</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="../xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../paketquellen_freischalten.html">Bearbeiten von Paketquellen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a><ol class="arabic"><li><a class="crosslink" href="#Ubuntu-16-04-Unity-und-64-Bit-Architektur">Ubuntu 16.04, Unity und 64-Bit-Architekt...</a></li><li><a class="crosslink" href="#Pruefung">Prüfung
</a></li><li><a class="crosslink" href="#Treiber">Treiber
</a></li></ol></li><li><a class="crosslink" href="#Konfiguration">Konfiguration
</a></li><li><a class="crosslink" href="#Verbindung-mit-dem-Mobiltelefon">Verbindung mit dem Mobiltelefon
</a></li><li><a class="crosslink" href="#Pairing">Pairing
</a><ol class="arabic"><li><a class="crosslink" href="#Dual-Boot-System">Dual-Boot System
</a></li></ol></li><li><a class="crosslink" href="#Deaktivierung-beim-Start-mit-systemd">Deaktivierung beim Start mit systemd
</a></li><li><a class="crosslink" href="#Konfigurationsdateien">Konfigurationsdateien
</a><ol class="arabic"><li><a class="crosslink" href="#main-conf">main.conf
</a></li><li><a class="crosslink" href="#rfcomm-conf-dpkg-remove">rfcomm.conf.dpkg-remove
</a></li></ol></li><li><a class="crosslink" href="#Datenuebertragung">Datenübertragung
</a><ol class="arabic"><li><a class="crosslink" href="#Dateien-vom-PC-zum-Mobiltelefon">Dateien vom PC zum Mobiltelefon
</a></li><li><a class="crosslink" href="#Dateien-vom-Mobiltelefon-zum-PC">Dateien vom Mobiltelefon zum PC
</a></li></ol></li><li><a class="crosslink" href="#Dienste">Dienste
</a></li><li><a class="crosslink" href="#Anwendungen">Anwendungen
</a></li><li><a class="crosslink" href="#Problembehebung">Problembehebung
</a><ol class="arabic"><li><a class="crosslink" href="#Firmware-fehlt">Firmware fehlt
</a></li><li><a class="crosslink" href="#Verzoegerte-stockende-Tonausgabe">Verzögerte/stockende Tonausgabe
</a></li><li><a class="crosslink" href="#Headset-wird-nicht-automatisch-aktiviert">Headset wird nicht automatisch aktiviert...</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/bluetooth.png" class="image-left" src="../_/f609f3f597195227b689f0495cf58767352011fd.png"/>
<a class="internal" href="../bluetooth.html">Bluetooth</a> ist eine Nahfeld-Funktechnik, die meist zur Kommunikation mit tragbaren Geräten wie z.B. Mobiltelefonen dient. Auch externe Peripheriegeräte wie Tastaturen, Zeigegeräte (Computer-Mäuse), Kopfhörer mit Mikrofon (Headsets) oder normale Kopfhörer können angebunden werden. Die notwendige Funkschnittstelle ist bei diesen Geräten bereits eingebaut. Beim Computer lässt sie sich via USB (Bluetooth-Dongle) nachrüsten, falls nicht bereits vorhanden.</p><p>Bei einer Standardinstallation von Ubuntu ist Bluetooth bereits über das Benachrichtigungsfeld im Panel installiert. Dieser Artikel gibt Hinweise, wie man das bei anderen Desktop-Umgebungen nachholt. In dieser Anleitung geht es nur um die grundsätzliche Einrichtung der Verbindung. Einzelne Anwendungen werden in separaten Artikeln besprochen.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Folgende Pakete müssen für ein korrektes Funktionieren von Bluetooth installiert sein <sup><a href="#source-1">[1]</a></sup>:</p><div class="section_2"><h3 id="Ubuntu-16-04-Unity-und-64-Bit-Architektur">Ubuntu 16.04, Unity und 64-Bit-Architektur<a class="headerlink" href="#Ubuntu-16-04-Unity-und-64-Bit-Architektur">¶</a></h3><p>
Gültig für <a class="internal" href="../xenial_xerus.html">Ubuntu 16.04</a> und der unter GUI <a class="internal" href="../unity.html">Unity</a> in der <a class="internal" href="../64-bit-architektur.html">64-Bit-Architektur</a>.</p><p>Nachfolgende Programme sind grundsätzlich in der Standardinstallation enthalten</p><ul><li><p><strong>bluez</strong></p></li><li><p><strong>bluez-cups</strong></p></li><li><p><strong>bluez-obexd</strong></p></li><li><p><strong>gnome-bluetooth</strong></p></li><li><p><strong>indicator-bluetooth</strong></p></li><li><p><strong>libbluetooth3:amd64</strong></p></li><li><p><strong>libgnome-bluetooth13:amd64</strong></p></li><li><p><strong>pulseaudio-module-bluetooth</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install bluez bluez-cups bluez-obexd gnome-bluetooth indicator-bluetooth libbluetooth3:amd64 libgnome-bluetooth13:amd64 pulseaudio-module-bluetooth </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install bluez bluez-cups bluez-obexd gnome-bluetooth indicator-bluetooth libbluetooth3:amd64 libgnome-bluetooth13:amd64 pulseaudio-module-bluetooth </pre></div></div><p>
</p></div></div><div class="section_3"><h4 id="Ubuntu-16-04-LXDE-und-32-Bit-Architektur">Ubuntu 16.04, LXDE und 32-Bit-Architektur<a class="headerlink" href="#Ubuntu-16-04-LXDE-und-32-Bit-Architektur">¶</a></h4><p>
zur Nutzung der GUI <a class="internal" href="../lxde.html">LXDE</a> in der 32-Bit-Architektur.</p><p>Nachfolgende Programme sind grundsätzlich in der Standardinstallation enthalten</p><ul><li><p><strong>blueman</strong></p></li><li><p><strong>bluez</strong></p></li><li><p><strong>bluez-obexd</strong></p></li><li><p><strong>libbluetooth3:i386</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install blueman bluez bluez-obexd libbluetooth3:i386 </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install blueman bluez bluez-obexd libbluetooth3:i386 </pre></div></div><p>
</p></div></div><p>Zur Nutzung der GUI unter <a class="internal" href="../xfce.html">Xfce</a>
</p><ul><li><p><strong>blueman</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install blueman </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install blueman </pre></div></div><p>
</p></div></div></div></div><div class="section_2"><h3 id="Pruefung">Prüfung<a class="headerlink" href="#Pruefung">¶</a></h3><p>
Vereinzelt werden USB-Sticks vom Computer nicht erkannt oder interne Funkschnittstellen sind defekt. Im Terminal <sup><a href="#source-3">[3]</a></sup> kann mit dem Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">lsusb | grep Bluetooth </pre></div></div><p>festgestellt werden, ob Bluetooth-Geräte am USB-Bus vorhanden sind. Dabei werden auch <a class="internal" href="../gerätemanager.html#USB">nähere Informationen zum Gerät</a> angezeigt. Zum Beispiel sieht die Ausgabe der betreffenden Zeile so aus:</p><pre class="notranslate">Bus 003 Device 004: ID 1310:0001 Roper Class 1 Bluetooth Dongle</pre></div><div class="section_2"><h3 id="Treiber">Treiber<a class="headerlink" href="#Treiber">¶</a></h3><p>
Gelegentlich fehlt auch der geeignete Treiber, siehe dazu <a class="internal" href="../wlan/linux-backports-modules.html">Linux-backports-modules</a>. Möglicherweise fehlt aber auch nur die <a class="crosslink" href="#Firmware_fehlt">Firmware</a>.</p></div></div><div class="section_1"><h2 id="Konfiguration">Konfiguration<a class="headerlink" href="#Konfiguration">¶</a></h2><p>
Nach der Installation muss der Bluetooth-Dienst evtl. neu gestartet werden. Dies geschieht im Terminal <sup><a href="#source-3">[3]</a></sup> mit dem Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service bluetooth restart </pre></div></div><p>
bzw. mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/bluetooth restart </pre></div></div><p>Sind die benötigten Pakete installiert, wird beim Einstecken des Bluetooth-Dongles normalerweise automatisch das <code class="notranslate">hcid</code> (Host Controller Interface Device) gestartet. Dieses dient als Schnittstelle zum Bluetooth-Gerät. Informationen über das Bluetooth-Gerät erhält man mit dem Befehl:</p><div class="bash"><div class="contents"><pre class="notranslate">hciconfig --all </pre></div></div><p>
Die Option <code class="notranslate">--all</code> sorgt dabei für eine erweiterte Informationsausgabe. Zum Beispiel sieht die Ausgabe so aus:</p><pre class="notranslate">hci0:   Type: USB
        BD Address: 00:0B:0D:33:8E:12 ACL MTU: 120:20 SCO MTU: 64:0
        UP RUNNING PSCAN ISCAN
        RX bytes:834 acl:21 sco:0 events:51 errors:0
        TX bytes:2926 acl:39 sco:0 commands:18 errors:0
        Features: 0xff 0xff 0x05 0x38 0x18 0x18 0x00 0x00
        Packet type: DM1 DM3 DM5 DH1 DH3 DH5 HV1 HV2 HV3
        Link policy: RSWITCH HOLD SNIFF PARK
        Link mode: SLAVE ACCEPT
        Name: 'konidesktop-0'
        Class: 0x100100
        Service Classes:
        Device Class: Computer, Uncategorized
        HCI Ver: 1.2 (0x2) HCI Rev: 0x0 LMP Ver: 1.2 (0x2) LMP Subver: 0x757
        Manufacturer: Silicon Wave (11)</pre><p>Von besonderem Interesse sind hier die BD-Hardware-Adresse in der zweiten Zeile sowie der Name und die Klasse (<code class="notranslate">Class</code>). Der Name wird automatisch vergeben und ist mit dem Namen des Computers identisch (bis auf das angehängte <code class="notranslate">-0</code>). Die Klasse gibt an, welche Geräteart mit diesem Bluetooth-Anschluss verbunden ist.</p><p>Wenn der Gerätename nicht angezeigt wird oder geändert werden soll, kann das mit folgendem Befehl leicht gemacht werden:</p><div class="bash"><div class="contents"><pre class="notranslate">hciconfig hci0 NAME NEUER_NAME </pre></div></div><p>Dabei steht in diesem Beispiel <code class="notranslate">hci0</code> für ein Bluetooth-Gerät, das mit dem Befehl hciconfig angezeigt wurde.</p></div><div class="section_1"><h2 id="Verbindung-mit-dem-Mobiltelefon">Verbindung mit dem Mobiltelefon<a class="headerlink" href="#Verbindung-mit-dem-Mobiltelefon">¶</a></h2><p>
Beim Mobiltelefon muss man nun die Bluetooth-Menüpunkte durchgehen - diese sind bei jedem Gerät woanders untergebracht. Besonders wichtig ist, dass es auf <em>"Sichtbar"</em> eingestellt wird. Außerdem kann ein Name vergeben werden, der nachher bei der Verbindung angezeigt wird. Bei einigen Telefonen kann man sich auch die verfügbaren Dienste anzeigen lassen.</p><p>Wenn man diese Einstellungen vorgenommen hat und Bluetooth am Mobilgerät eingeschaltet ist, kann man am Computer im Terminal mit dem folgenden Befehl nach verfügbaren Mobilgeräten suchen:</p><div class="bash"><div class="contents"><pre class="notranslate">hcitool scan </pre></div></div><p>
Nun werden alle gefundenen Geräte (außer dem PC, der die Anfrage gestartet hat) mit ihrer Hardware-Adresse und dem Namen angezeigt. Das sieht beispielsweise so aus:</p><pre class="notranslate">Scanning ...
        00:0E:07:73:3C:B1       K700i</pre><p>Die Hardware-Adresse des Mobilgerätes ist dementsprechend eine andere als die des USB-Dongles.</p></div><div class="section_1"><h2 id="Pairing">Pairing<a class="headerlink" href="#Pairing">¶</a></h2><p>
Der Begriff <em>Pairing</em> (Paarung) bezeichnet die (permanente) Bindung zweier Geräte aneinander. Bei Verbindungen über Bluetooth oder andere Funktechniken ist es sehr sinnvoll, wenn sich die Geräte bei jeder Verbindung automatisch identifizieren. Damit zwei Geräte aneinander gebunden werden können, müssen sie zunächst einander bekannt gemacht werden. Dies geschieht bei Bluetooth-Verbindungen durch eine gemeinsame <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/PersC3%B6nliche_Identifikationsnummer">PIN</a>. Diese Nummer muss bei der ersten Kontaktaufnahme auf allen beteiligten Geräten kurz nacheinander eingegeben werden. Je nach Anwendung kann eine PIN auch zufällig ausgewählt werden.</p><p>Sollte das Pairing fehlschlagen (Fehlermeldung des Mobiltelefons und es erscheint kein Fenster für den Schlüssel auf dem Desktop), so muss man unter GNOME bzw. Xfce ggf. das Bluetooth-Applet von Hand starten:</p><div class="bash"><div class="contents"><pre class="notranslate">bluetooth-applet </pre></div></div><p>Wenn das Pairing von einem Rechner mit der GUI Unity eingeleitet wird, muss im  Mobiltelefon in der Einstellung Bluetooth der Unter-Menüpunkt <em>"sichtbar"</em> aktiv sein.</p><p>Im rechten Teil des <a class="internal" href="../unity/unity_desktop.html#Anzeige-ohne-Aktivitaet">Unity-Panel</a> ist das Bluetooth- Symbol zu sehen. Nach dem Anklicken öffnet ein Fenster. In der untersten Zeile dieses Fenster muss das Feld <em>"Bluetooth-Einstellungen..."</em> aktiviert werden.</p><p>Ein weiteres Fenster namens <em>"Bluetooth"</em> wird geöffnet. Im unteren rechten Teil befindet sich der Button 
<span class="key">+</span> . Wird dieser Button betätigt, geht das Fenster <em>"Suchen nach Geräten"</em> auf, Im Feld Geräte erscheint das gefundene Mobiltelefon. Diese Zeile muss angeklickt werden und der Button 
<em>"weiter"</em> ist aktiviert. In der Default-Einstellung wird eine PIN automatisch generiert. Mit Betätigen des Buttons <em>"weiter"</em> wird diese sowohl auf dem Rechner als auch im Mobiltelefon angezeigt und muss auf beiden Geräten bestätigt werden.</p><div class="section_2"><h3 id="Dual-Boot-System">Dual-Boot System<a class="headerlink" href="#Dual-Boot-System">¶</a></h3><p>
Möchte man auf einem Dual-Boot System ein Bluetooth-Gerät verwenden, muss das Pairing üblicherweise beim Wechsel des Betriebssystems jedes Mal erneut durchgeführt werden. Das liegt daran, dass während des Pairings ein zufälliger Schlüssel generiert wird, der zusätzlich zur BD-Hardware-Adresse für die Authentifizierung notwendig ist. Um ein erneutes Pairing zu vermeiden, muss der Schlüssel auf dem System auslesen werden, bei dem das letzte Pairing durchgeführt wurde, und dieser in der entsprechenden Datei eintragen werden. Das Bluetooth-Gerät selbst merkt sich normalerweise nur die BD-Hardware-Adresse, den Rechnernamen und den dazugehörigen Schlüssel des letzten erfolgreichen Pairings.</p><p>Unter Linux werden die Daten unterhalb des Verzeichnis /var/lib/bluetooth/XX:XX:XX:XX:XX:XX gespeichert. Dabei ist XX:XX:XX:XX:XX:XX die BD-Hardware-Adresse des Bluetooth-Empfängers am eigenen Rechner. Je Bluetooth-Gerät ist ein weiteres Unterverzeichnis YY:YY:YY:YY:YY vorhanden, darin befindet sich eine Datei <strong>info</strong>.</p><p>Beispiel Verzeichnisstruktur mit zwei Bluetooth-Geräten:
</p><pre class="notranslate">root@z1:/var/lib/bluetooth# tree
.
└── 30:3A:64:14:F0:72
    ├── 34:23:87:F9:05:48
    │   └── info
    ├── cache
    │   ├── 00:02:5B:01:70:F7
    │   ├── 34:23:87:F9:05:48
    │   └── FC:58:FA:20:CA:B8
    ├── FC:58:FA:20:CA:B8
    │   ├── info
    │   └── info.OLD
    └── settings</pre><p>Aufbau einer info-Datei:
</p><pre class="notranslate">
[General]
Name=BM-8810
Class=0x240404
SupportedTechnologies=BR/EDR;
Trusted=true
Blocked=false
Services=&lt;some-cryptic-stuff&gt;;

[LinkKey]
Key=F4607551C779CE738DD85C1062213F05
Type=4
PINLength=</pre><p>Die richtige info-Datei findet man, wenn man 
</p><ul><li><p>die Mac-Adresse kennt, daraus ergibt sich der Verzeichnisname</p></li><li><p>sich am Inhalt der Angabe von [General].Name orientiert</p></li><li><p>zur Not das das Datum der info-Datei betrachtet, sie wird zum pairing-Zeitpunkt erstellt.</p></li></ul><p>
Konkretes Vorgehen:
</p><ul><li><p>Linux booten, Gerät unter Linux pairen</p></li><li><p>Windows booten, Gerät unter Windows pairen</p></li><li><p>Unter Windows den Key-Wert für die LinkKey-Angabe aus der Registry auslesen</p></li><li><p>Linux booten, in der passenden Info-Datei den Key ändern, reboot</p></li></ul><p>
Eine kurze Anleitung für den Austausch des Schlüssels für ein Windows/Linux Dual-Boot-System findet man unter <a class="external" href="https://superuser.com/questions/422435/how-to-use-bluetooth-devices-under-two-different-operation-systems/961688#961688" rel="nofollow">How to use bluetooth devices under two different operation systems?</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p></div></div><div class="section_1"><h2 id="Deaktivierung-beim-Start-mit-systemd">Deaktivierung beim Start mit systemd<a class="headerlink" href="#Deaktivierung-beim-Start-mit-systemd">¶</a></h2><p>
Die Deaktivierung erfolgt über ein systemd-Service anlegen. Dazu sollte die Datei
<strong>/lib/systemd/system/disablebluetooth.service</strong> mit folgendem Inhalt erstellt werden:
</p><pre class="notranslate">#########################################################################
#
# disablebluetooth.service
# systemd service: disable bluetooth at start
#
#########################################################################

[Unit]
Description=Disable Bluetooth

[Service]
Type=oneshot
ExecStart=/usr/sbin/rfkill block bluetooth

[Install]
WantedBy=multi-user.target

# EOF</pre><p>
Dieser Service muss danach noch aktiviert werden.
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo systemctl enable disablebluetooth.service  </pre></div></div></div><div class="section_1"><h2 id="Konfigurationsdateien">Konfigurationsdateien<a class="headerlink" href="#Konfigurationsdateien">¶</a></h2><p>
Mit der Installation bluez werden unter <strong>/etc/bluetooth/</strong> verschiedene Konfigurationsdateien angelegt. Bei Ubuntu 16.04 sind Änderungen  in der Datei <strong>rfcomm.conf.dpkg-remove</strong> notwendig, wenn dieses Merkmal genutzt werden soll. Dazu benötigt man <a class="internal" href="../sudo.html">Root-Rechte</a>.</p><div class="section_2"><h3 id="main-conf">main.conf<a class="headerlink" href="#main-conf">¶</a></h3><p>
Die Datei <strong>/etc/bluetooth/main.conf</strong> ist Ubuntu 16.04 und der unter GUI Unity vorhanden aber komplett <a class="internal" href="../shell/bash-skripting-guide_für_anfänger.html#Kommentare-einfuegen">auskommentiert</a>.</p><p><a class="crosslink anchor" href="#rfcomm" id="rfcomm"></a>
</p></div><div class="section_2"><h3 id="rfcomm-conf-dpkg-remove">rfcomm.conf.dpkg-remove<a class="headerlink" href="#rfcomm-conf-dpkg-remove">¶</a></h3><p>
Einige Programme benötigen zur Kommunikation eine serielle Schnittstelle. Diese wird bei Bluetooth mit <code class="notranslate">rfcomm</code> zur Verfügung gestellt. Damit lassen sich dem Mobiltelefon Modembefehle senden. Dies wird z.B. benötigt, wenn man den Akkustand abfragen oder über <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/GPRS">GPRS</a> ins Internet gehen will. Bei der Einrichtung wird das Mobilgerät mittels seiner Hardwareadresse an ein rfcomm-device gebunden. Evtl. muss dabei auch ein Kanal angegeben werden. Wie dies genau funktioniert, wird in der jeweiligen Anleitung für die entsprechende Software erklärt.</p><p>Die Datei <strong>rfcomm.conf.dpkg-remove</strong> enthält diejenigen rfcomm-devices, die beim Systemstart schon eingerichtet werden sollen. Ein recht gutes Beispiel ist bereits in der Datei gegeben.</p><p>Nähere Informationen zum Umgang mit rfcomm sind in der <a class="external" href="http://linuxcommand.org/man_pages/rfcomm1.html" rel="nofollow">rfcomm-manpage</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> erhältlich.
</p></div></div><div class="section_1"><h2 id="Datenuebertragung">Datenübertragung<a class="headerlink" href="#Datenuebertragung">¶</a></h2><p>
</p><div class="section_2"><h3 id="Dateien-vom-PC-zum-Mobiltelefon">Dateien vom PC zum Mobiltelefon<a class="headerlink" href="#Dateien-vom-PC-zum-Mobiltelefon">¶</a></h3><p>
<img alt="daten-sen.png" class="image-right" src="../_/2e13beb82c11940d59a007228b272e785aa8663e.png"/> Das Bluetooth-Symbol im Panel anklicken.</p><p>Wenn die Einstellung dem Bild entspricht und das Bluetooth-Symbol um ein Schloss- Symbol erweitert ist, besteht die Verbindung zum Mobiltelefon.</p><p>Auf das Feld "Dateien senden..." (siehe Mauszeiger im Bild) klicken und es öffnet das Fenster mit den Namen "Bluetooth-Datenübertragung". In diesem Fenster kann zwischen suchen (Lupensymbol), Abbrechen und Auswahl gewählt werden. Ist die zu sendende Datei gefunden und markiert, wird die Übertragung mit dem betätigen des Button Auswahl eingeleitet. Die Annahme am Mobiltelefon muss bestätigt werden. Bei einem Samsung GT-I8190 wird die Datei im <strong>Ordner</strong> Bluetooth abgelegt.</p></div><div class="section_2"><h3 id="Dateien-vom-Mobiltelefon-zum-PC">Dateien vom Mobiltelefon zum PC<a class="headerlink" href="#Dateien-vom-Mobiltelefon-zum-PC">¶</a></h3><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Im Artikel zu GNOME-Bluetooth unter der Überschrift <a class="internal" href="../bluetooth/gnome-bluetooth.html#Dateien-an-den-PC-senden">Dateien an den PC</a> und im Artikel zu gnome-user-share unter der Überschrift <a class="internal" href="../gnome-user-share.html#Dateien-ueber-Bluetooth-empfangen">Dateien über Bluetooth empfangen</a> sind die Abschnitte für Ubuntu 16.04 getestet.
</p></div></div><p>Auf der Seite <em>"Persönliche Dateifreigabe"</em> sind zwei Haken, wie im Wiki "Dateien über Bluetooth empfangen" beschrieben, zu setzen. Diese Seite erreicht man in der GUI Unity über die 1. Schaltfläche <em>"Rechner durchsuchen"</em> und gibt dort <em>"per"</em> ein.
</p></div></div><div class="section_1"><h2 id="Dienste">Dienste<a class="headerlink" href="#Dienste">¶</a></h2><p>
SDP (Service Discovery Protocol) dient zur Abfrage der auf dem entfernten Gerät verfügbaren Dienste (Bluetooth Profile). Welche Dienste das Gerät anbietet, lässt sich mit dem Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">sdptool browse </pre></div></div><p>auslesen. Verwendet man mehrere Bluetooth-Geräte, gibt man nach dem Befehl und einem Leerzeichen noch die Hardware-Adresse des gewünschten Gerätes an. Ansonsten werden alle Geräte ausgelesen. Die Liste kann unter Umständen recht lang sein und einige Dienste enthalten. Hier wird exemplarisch einer herausgegriffen:</p><pre class="notranslate">Service Name: OBEX File Transfer
Service RecHandle: 0x1000d
Service Class ID List:
  "OBEX File Transfer" (0x1106)
Protocol Descriptor List:
  "L2CAP" (0x0100)
  "RFCOMM" (0x0003)
    Channel: 7
  "OBEX" (0x0008)
Profile Descriptor List:
  "OBEX File Transfer" (0x1106)
    Version: 0x0100</pre><p>Wichtig sind hier der Name des Dienstes und der Kanal, über den er läuft. Jeder Dienst läuft über einen anderen Kanal und bietet eine andere Funktion an. Der hier aufgeführte <code class="notranslate">OBEX File Transfer</code> ist für das "Herunterladen" von Dateien vom Mobiltelefon zuständig. Dies kann entweder per Kommandozeile oder mit einem Programm wie KDEBluetooth geschehen. Dabei wird oft der Kanal 7 verwendet, möglich ist aber z.B. auch Kanal 11 bei Geräten der eSerie von Nokia.</p></div><div class="section_1"><h2 id="Anwendungen">Anwendungen<a class="headerlink" href="#Anwendungen">¶</a></h2><p>
Es gibt zahlreiche Programme, die Kommunikation, Datenaustausch, Synchronisation und mehr zwischen mobilen Geräten und dem Rechner über die Bluetooth-Schnittstelle ermöglichen. Diese sind im Artikel <a class="internal" href="../anwendungen_für_mobilgeräte.html">Anwendungen für Mobilgeräte</a> zusammengefasst. Auch stationäre Computer können per Bluetooth verbunden werden.</p></div><div class="section_1"><h2 id="Problembehebung">Problembehebung<a class="headerlink" href="#Problembehebung">¶</a></h2><p>
</p><div class="section_2"><h3 id="Firmware-fehlt">Firmware fehlt<a class="headerlink" href="#Firmware-fehlt">¶</a></h3><p>
Manche Broadcom-Bluetooth-Geräte benötigen eine spezielle Firmware, die aus Lizenzgründen nicht von Ubuntu direkt ausgeliefert werden darf. Dies äußert sich meist darin, dass Bluetooth zwar aktiviert werden kann, aber keine Geräte gefunden werden. Sicher feststellen lässt sich das Problem durch den Aufruf von:
</p><div class="bash"><div class="contents"><pre class="notranslate">dmesg | grep bluetooth </pre></div></div><p>Fehlt die Firmware, so taucht in der Ausgabe in etwa diese Zeile auf:
</p><pre class="notranslate">[ 12.314809] bluetooth hci0: Direct firmware load for brcm/BCM43142A0-04ca-2009.hcd failed with error -2</pre><p>oder 
</p><pre class="notranslate">[ 12.314809] bluetooth hci0: Direct firmware load for brcm/BCM.hcd failed with error -2</pre><p>In ersten Fall fehlt die Firmware <strong>BCM43142A0-04ca-2009.hcd</strong> für das Gerät mit der ID <strong>04ca:2009</strong>. Wird wie im zweiten Fall lediglich das Fehlen der Firmware <strong>brcm/BCM.hcd</strong> bemängelt, so muss die ID noch <a class="crosslink" href="#Pruefung">ermittelt werden</a>.</p><p>Die benötigte Datei lädt man aus <a class="interwiki interwiki-github" href="https://github.com/winterheart/broadcom-bt-firmware/tree/master/brcm">diesem Sammelrepository</a> herunter und platziert sie unter <strong>/lib/firmware/brcm</strong>. Dabei muss man die Datei ggf. umbenennen, so dass sie dem Namen in der obigen Meldung entspricht. Dies könnte in unserem zweiten Beispiel so aussehen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mv ~/Downloads/BCM43142A0-04ca-2009.hcd /lib/firmware/brcm/BCM.hcd </pre></div></div><p>Nach einem Neustart sollte das Bluetooth-Gerät nun korrekt funktionieren.</p><p>Sollte die passende Firmware noch nicht im Sammelrepository zu finden sein, so lässt sie sich aus dem vom Hersteller bereitgestellten Windows-Treiber extrahieren (Details dazu auf <a class="interwiki interwiki-github" href="https://github.com/winterheart/broadcom-bt-firmware">Github</a> und in <a class="interwiki interwiki-bug" href="https://launchpad.net/bugs/1366418">diesem Bug</a>).</p></div><div class="section_2"><h3 id="Verzoegerte-stockende-Tonausgabe">Verzögerte/stockende Tonausgabe<a class="headerlink" href="#Verzoegerte-stockende-Tonausgabe">¶</a></h3><p>
Hat man über Bluetooth-Kopfhörer Verzögerungen in der Tonausgabe oder läuft diese stockend, so hängt dies oft mit der A2DP-Implementierung zusammen und wie diese den Ton vor der Kodierung puffert.</p><p>Wenn die Tonqualität keine Rolle spielt (z.B. bei Telefonaten), kann man das Profil von A2DP auf HSP/HFP umstellen. Die Einstellung findet man in den Systemeinstellungen unter <em>"Klang -&gt; Ausgabe -&gt; Profil"</em>.</p><p>Mitunter kann es aber auch Abhilfe schaffen, die A2DP-Latenz zu verändern. Die nötigen Informationen ermittelt man mit dem Befehl:
</p><div class="bash"><div class="contents"><pre class="notranslate">pactl list | grep -Pzo '.*bluez_card(.*\n)*' </pre></div></div><p>Die Ausgabe sollte ungefähr so aussehen:
</p><pre class="notranslate">	Name: bluez_card.00_11_67_AD_2E_6C
	…
	Ports:
		headset-output: Freisprecheinrichtung (priority: 0, latency offset: 0 usec)
			Teil der/des Profil(s): headset_head_unit, a2dp_sink
		headset-input: Freisprecheinrichtung (priority: 0, latency offset: 0 usec)
			Teil der/des Profil(s): headset_head_unit</pre><p>Gebraucht werden daraus im folgenden Befehl der Name der Karte und der Port der Ausgabe (hier <strong>bluez_card.00_11_67_AD_2E_6C</strong> und <strong>headset-output</strong>). Erkennbar ist auch, dass keine Latenz (latency offset) eingestellt ist. Dies konfiguriert man nun mit dem Befehl:</p><div class="bash"><div class="contents"><pre class="notranslate">pactl set-port-latency-offset &lt;karte&gt; &lt;port&gt; 100000 </pre></div></div><p>Die Zahl hinten ist die Latenz, angegeben in Mikrosekunden (Millionstel Sekunden), in diesem Fall also 100ms. Abhängig von der Bluetooth-Karte muss der Wert mitunter angepasst werden. Stockt der Ton, muss der Wert größer sein, ist die Verzögerung zu groß, verringert man den Wert.</p></div><div class="section_2"><h3 id="Headset-wird-nicht-automatisch-aktiviert">Headset wird nicht automatisch aktiviert<a class="headerlink" href="#Headset-wird-nicht-automatisch-aktiviert">¶</a></h3><p>
Schaltet man ein Bluetooth-Headset ein, so möchte man nicht nur automatisches Pairing, sondern im Regelfall auch automatisch die Umstellung der Soundausgabe auf das Headset. Dies muss leider manuell erfolgen. Wird <a class="internal" href="../pulseaudio.html">PulseAudio</a> verwendet, so genügt es in der Datei <strong>/etc/pulse/default.pa</strong> die folgende Zeile zu ergänzen:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>load-module module-switch-on-connect
</pre></div>
</td></tr></table></div><p>
Siehe auch <a class="external" href="https://askubuntu.com/questions/271558/autoconnecting-to-bluetooth-device-on-startup-and-autochanging-audio-output" rel="nofollow">Autoconnecting to bluetooth device on startup and autochanging audio output</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="https://www.bluetooth.org/" rel="nofollow">Offizielle Bluetooth-Homepage</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p><a class="external" href="http://www.bluez.org/" rel="nofollow">Offical Linux Bluetooth Protocol Stack</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><p>
</p><ul><li><p><a class="external" href="https://kofler.info/bluetooth-konfiguration-im-terminal-mit-bluetoothctl/" rel="nofollow">Bluetooth-Konfiguration im Terminal mit bluetoothctl auf dem Raspberry Pi</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> – kofler.info</p></li><li><p><a class="external" href="http://oerks.de/tech/blueZ" rel="nofollow">Anleitung zu Bluetooth mit Debian</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="external" href="http://www.pro-linux.de/berichte/mobiltelefone.html#ToC6" rel="nofollow">Pro-Linux – Mobiltelefone</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="external" href="http://www.linux-community.de/Internal/Artikel/Print-Artikel/LinuxUser/2006/08/Datenaustausch-mit-ObexFTP-und-der-Bash" rel="nofollow">Datenaustausch mit ObexFTP und der Bash</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> – Artikel LinuxUser 08/2006</p></li><li><p><a class="external" href="http://www.linux-user.de/ausgabe/2005/07/056-gammu/" rel="nofollow">Telefonauskunft</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> – Artikel LinuxUser 07/2005</p></li><li><p><a class="external" href="http://www.linux-user.de/ausgabe/2005/01/051-bluetooth/" rel="nofollow">Telefonflirt</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> – Artikel LinuxUser 01/2005</p></li><li><p><a class="external" href="https://emanuelduss.ch/2013/02/befehle-beim-systemstart-ausfuhren-unter-arch-linux-mit-systemd/" rel="nofollow" title="https://emanuelduss.ch/2013/02/befehle-beim-systemstart-ausfuhren-unter-arch-linux-mit-systemd/">https://emanuelduss.ch/2013/02/befehle-beim-systemstart-ausfuhren-unter-arch-linux-mit-systemd/</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../bluetooth/einrichtung/a/revision/945948.html">Diese Revision</a> wurde am 2. Januar 2018 21:54 von <a href="https://ubuntuusers.de/user/Seeb%C3%A4r/">Seebär</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../bluetooth.html">Bluetooth</a></li>
<li><a href="../bluetooth/einrichtung.html">Einrichtung</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>