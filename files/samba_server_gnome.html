<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Samba_Server_GNOME › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./samba_server_gnome.html">Samba Server GNOME</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Samba_Server_GNOME">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./samba_server_gnome/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./samba_server_gnome/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./samba_server_gnome/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./samba_server_gnome/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./samba_server_gnome/a/backlinks.html">Samba Server GNOME</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal benutzen</a>, <em>optional</em></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./rechte.html">Dateirechte verändern</a>, <em>optional</em></p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Persoenliche-Freigaben-mit-net-usershare">Persönliche Freigaben mit "net usershare"
</a><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Freigabe-erstellen">Freigabe erstellen
</a><ol class="arabic"><li><a class="crosslink" href="#Schreibrechte">Schreibrechte
</a></li><li><a class="crosslink" href="#Gastzugriff-und-Benutzerkonto">Gastzugriff und Benutzerkonto
</a></li></ol></li><li><a class="crosslink" href="#Zugriffsrechte-automatisch-anpassen">Zugriffsrechte automatisch anpassen
</a></li><li><a class="crosslink" href="#Dateien-von-Windows-Partitionen-freigeben">Dateien von Windows-Partitionen freigebe...</a></li><li><a class="crosslink" href="#Zugriffsrechte-und-Sicherheit">Zugriffsrechte und Sicherheit
</a></li><li><a class="crosslink" href="#Persoenliche-Freigaben-im-Terminal">Persönliche Freigaben im Terminal
</a></li></ol></li><li><a class="crosslink" href="#Allgemeine-Freigaben-und-Einstellungen">Allgemeine Freigaben und Einstellungen
</a><ol class="arabic"><li><a class="crosslink" href="#Installation-2">Installation
</a></li><li><a class="crosslink" href="#Allgemeine-Freigaben">Allgemeine Freigaben
</a><ol class="arabic"><li><a class="crosslink" href="#Freigabe-hinzufuegen-oder-loeschen">Freigabe hinzufügen oder löschen
</a></li><li><a class="crosslink" href="#Eigenschaften">Eigenschaften
</a></li></ol></li><li><a class="crosslink" href="#Einstellungen">Einstellungen
</a><ol class="arabic"><li><a class="crosslink" href="#Server-Einstellungen">Server-Einstellungen
</a></li><li><a class="crosslink" href="#Benutzerkonto">Benutzerkonto
</a></li></ol></li></ol></li><li><a class="crosslink" href="#Probleme-und-Loesungen">Probleme und Lösungen
</a><ol class="arabic"><li><a class="crosslink" href="#system-config-samba-laesst-sich-nicht-starten">"system-config-samba" lässt sich nicht s...</a></li><li><a class="crosslink" href="#Der-Server-wird-nicht-erkannt">Der Server wird nicht erkannt
</a></li><li><a class="crosslink" href="#Heimnetzgruppe-auf-Windows-Clients">"Heimnetzgruppe" auf Windows-Clients
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a><ol class="arabic"><li><a class="crosslink" href="#Intern">Intern
</a></li><li><a class="crosslink" href="#Extern">Extern
</a></li></ol></li></ol></div><p><img alt="Samba_Server/samba-logo.png" class="image-left" src="./_/a8ef26a0d93a67702ef6b8f48761da6a0e0a2c2d.png"/>
Dieser Artikel bezieht sich in erster Linie auf die Desktop-Umgebung <a class="internal" href="./gnome.html">GNOME</a>, ist aber für <a class="internal" href="./mate.html">MATE</a>, <a class="internal" href="./unity.html">Unity</a> und in weiten Teilen auch für <a class="internal" href="./xfce.html">Xfce</a> (Xubuntu) und <a class="internal" href="./lxde.html">Lxde</a> (Lubuntu) gültig. Für <a class="internal" href="./kde.html">KDE</a> (Kubuntu) gibt es einen eigenen Artikel <a class="internal" href="./samba_server/kde.html">Samba Server/KDE</a>. Die Einrichtung eines Samba-Servers ohne graphische Benutzeroberfläche ist in <a class="internal" href="./samba_server.html">Samba Server</a> beschrieben.</p><p>Unter GNOME, Unity und MATE kann man sehr komfortabel Ordner und Dateien im Netzwerk freigeben und die wichtigsten Netzwerk-Einstellungen vornehmen. Oftmals kann man es sich damit ersparen, Eingaben über ein <a class="internal" href="./terminal.html">Terminal</a> vorzunehmen oder umfangreiche und veraltete Administrations-Tools wie <a class="internal" href="./archiv/samba_server_swat.html">Swat</a> oder <a class="external" href="http://dalalven.dtdns.net/linux/gadmintools-webpage/" rel="nofollow">gadmin-samba</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> einzusetzen.</p><p>Seit der Version 3.0.23 enthält die <a class="internal" href="./samba.html">Samba</a>-Suite das Tool <a class="internal" href="./samba_server/net_usershare.html">net usershare</a>. Dieses bietet alternativ zur klassischen Methode, Freigaben mit Root-Rechten über einen Eintrag in der Datei <a class="internal" href="./samba_server/smb.conf.html">/etc/samba/smb.conf</a> einzurichten, auch gewöhnlichen Benutzern die Möglichkeit, ihre eigenen Dateien ohne Root-Rechte freizugeben.</p><p>GNOME bietet Unterstützung für beide Verfahren, wobei standardmäßig <strong>nautilus-share</strong> installiert wird, das "net usershare" nutzt.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Das Programm <a class="internal" href="./gnome-user-share.html">gnome-user-share</a> ist trotz der Namensähnlichenkeit mit <strong>net usershare</strong> kein Werkzeug für Samba. Es bietet öffentliche Bluetooth- und Web-Freigaben (via Apache, HTTP, WebDAV), macht aber keinen Gebrauch von Samba.
</p></div></div><div class="section_1"><h2 id="Persoenliche-Freigaben-mit-net-usershare">Persönliche Freigaben mit "net usershare"<a class="headerlink" href="#Persoenliche-Freigaben-mit-net-usershare">¶</a></h2><p>
Der <a class="internal" href="./dateimanager.html">Dateimanager</a> <a class="internal" href="./nautilus.html">Nautilus</a> nutzt mit dem Zusatzpaket <strong>nautilus-share</strong> (standardmäßig installiert) das Samba-Tool "net usershare", um Verzeichnisse im Netzwerk freizugeben.</p><p>Persönliche Freigaben können nur von Mitgliedern der <a class="internal" href="./benutzer_und_gruppen.html">Gruppe</a> <code class="notranslate">sambashare</code> eingerichtet werden. Der Erstbenutzer ist standardmäßig Mitglied dieser Gruppe; neu hinzugefügte Benutzer müssen evtl. noch in dieser Gruppe eingetragen werden.</p><p>Für persönliche Freigaben gibt es keinen Eintrag in der allgemeinen Konfigurationsdatei <strong>/etc/samba/smb.conf</strong>. Statt dessen wird für jede dieser Freigaben im Ordner <strong>/var/lib/samba/usershares/</strong> eine eigene kleine Textdatei mit den nötigen Angaben angelegt. Diese ist Besitz des jeweiligen Benutzers; nur dieser kann sie verändern oder löschen. Normalerweise sollte diese Datei nicht mit einem Editor bearbeitet werden!</p><div class="section_2"><h3 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h3><p>
Damit Verzeichnisse im Netzwerk per SMB/CIFS Protokoll (bzw. als "Windows-Freigabe") angesprochen werden können, muss folgendes <a class="internal" href="./metapakete.html">Metapaket</a> aus den <a class="internal" href="./paketquellen.html">Paketquellen</a> installiert sein <sup><a href="#source-1">[1]</a></sup>:
</p><ul><li><p><strong>samba</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install samba </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install samba </pre></div></div><p>
</p></div></div><p>
Jedoch braucht man die Installation nicht unbedingt von Hand zu veranlassen, wenn man man mit Nautilus <a class="crosslink" href="#Persoenliche-Freigaben-mit-net-usershare">persönliche Freigaben</a> einrichten möchte. Beim Einrichten der ersten Freigabe erfolgt hier automatisch ein Hinweis auf ggf. noch fehlende Pakete, die nach nach einer Bestätigung per Mausklick einfach nachinstalliert werden können.</p><p>Der Dateimanager <a class="internal" href="./caja.html">Caja</a> (MATE) bietet die gleichen Möglichkeiten wie Nautilus, wenn zusätzlich zum Metapaket <strong>samba</strong> (<a class="crosslink" href="#Installation">s.o.</a>) noch das Paket 
</p><ul><li><p><strong>caja-share</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install caja-share </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install caja-share </pre></div></div><p>
</p></div></div><p>
von Hand nachinstalliert wird. Im Gegensatz dazu erlauben es die Dateimanager <a class="internal" href="./thunar.html">Thunar</a> und <a class="internal" href="./pcmanfm.html">PCManFM</a> (noch) nicht, Ordner oder Dateien mittels Mausklick freizugeben. Man muss dann auf ein Terminal<sup><a href="#source-2">[2]</a></sup> ausweichen (<a class="crosslink" href="#Persoenliche-Freigaben-im-Terminal">s.u.</a>)</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Die Installation von Samba auf einem Rechner mit direktem Zugang zum Internet (ohne Router mit NAT) oder zu unsicheren Netzen kann ein Sicherheitsrisiko sein. Nötigenfalls sollte man dann die Zugriffsmöglichkeit über die Optionen <code class="notranslate">interfaces</code> und <code class="notranslate">bind interfaces only</code> in der Datei <a class="internal" href="./samba_server/smb.conf.html">/etc/samba/smb.conf</a> einschränken.
</p></div></div><p><img alt="./persoenliche-Freigabe.png" class="image-right" src="./_/5685faa5c33ec179cbadf6d2d0acee4ecdb86c4e.png"/>
<img alt="./Ordner_freigeben.png" class="image-right" src="./_/4c585c7704a4c62bf57faf447c0882af8b6dfa67.png"/>
</p></div><div class="section_2"><h3 id="Freigabe-erstellen">Freigabe erstellen<a class="headerlink" href="#Freigabe-erstellen">¶</a></h3><p>
Nach einem <img alt="rechte Maustaste" class="image-default" src="./_/aa516ca8be74ff7de9b706b8ffc7a88e87e17fb5.png"/>-Klick auf ein Ordner-Symbol klickt man <em>"Freigabeoptionen"</em> an. Es öffnet sich das selbsterklärende nebenstehende Dialogfenster. Man trägt für die Freigabe einen Namen und optional einen Kommentar ein und hakt an, was gewünscht wird: überhaupt freigeben - Schreibrechte einräumen - Gastzugang (ohne Passwort) erlauben. Alternativ gelangt man auch über <em>"Eigenschaften -&gt; Ordner freigeben"</em> zum gleichen Dialog.</p><p>Persönliche Freigaben werden im Nautilus-Fenster durch das nebenstehend abgebildete Emblem (Doppelpfeil) oder ähnlich gekennzeichnet.</p><div class="section_3"><h4 id="Schreibrechte">Schreibrechte<a class="headerlink" href="#Schreibrechte">¶</a></h4><p>
Über Nautilus kann man mit "net usershare" Schreibrechte nur für alle oder für niemand einräumen. Insbesondere bedeutet dies, dass bei öffentlichen Freigaben mit Gastzugriff die (sinnvolle) Einstellung <em>"Besitzer darf schreiben und Gäste nur lesen"</em> nicht vorgesehen ist. Differenziertere Einstellungen sind über das Terminal möglich (<a class="crosslink" href="#Persoenliche-Freigaben-im-Terminal">s.u.</a>)</p></div><div class="section_3"><h4 id="Gastzugriff-und-Benutzerkonto">Gastzugriff und Benutzerkonto<a class="headerlink" href="#Gastzugriff-und-Benutzerkonto">¶</a></h4><p>
Öffentliche Freigaben (mit Gastzugriff) können sofort ohne weitere Vorbereitung eingerichtet werden. Möchte man jedoch den Zugriff auf Benutzer mit einem Benutzerkonto (Benutzername und Passwort) beschränken, muss zuvor ein solches eingerichtet werden. Hierfür sind Root-Rechte nötig. Wie dies geschehen kann, ist <a class="crosslink" href="#Benutzerkonto">weiter unten</a> beschrieben.</p><p><img alt="./Add_permissions.png" class="image-right" src="./_/6963caa26313477d7f258a2b535c383ccc5f6c42.png"/>
</p></div></div><div class="section_2"><h3 id="Zugriffsrechte-automatisch-anpassen">Zugriffsrechte automatisch anpassen<a class="headerlink" href="#Zugriffsrechte-automatisch-anpassen">¶</a></h3><p>
Weil Samba nichts erlauben kann, was auf dem Server selbst verboten ist, müssen oftmals noch die Zugriffsrechte<sup><a href="#source-3">[3]</a></sup> für die freigegebenen Dateien angepasst werden. Dafür erscheint dann ein neues Dialogfenster mit dem Vorschlag, diese Anpassung von Nautilus automatisch durchführen zu lassen. Leider erscheint dieses Dialogfenster auch dann, wenn eine solche Anpassung gar nicht möglich ist (z.B. FAT- oder NTFS-Partition).
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die automatische Anpassung der Zugriffsrechte<sup><a href="#source-3">[3]</a></sup> wird nur für die freigegebenen Dateien bzw. Ordner selbst durchgeführt; eventuell muss man zusätzlich noch die Zugriffsrechte übergeordneter Ordner von Hand anpassen.
</p></div></div></div><div class="section_2"><h3 id="Dateien-von-Windows-Partitionen-freigeben">Dateien von Windows-Partitionen freigeben<a class="headerlink" href="#Dateien-von-Windows-Partitionen-freigeben">¶</a></h3><p>
Mittels GNOME/Nautilus lassen sich auch Ordner und Dateien freigeben, die sich auf einer Partition mit einem der Windows-Dateisysteme FAT oder NTFS befinden. Allerdings gibt es dabei einiges zu beachten:
</p><ul><li><p>Über net usershare kann ein Benutzer immer nur Dateien freigeben, die ihm selbst gehören. Da Windows-Partitionen bei der Installation von Ubuntu standardmäßig als Besitz von <code class="notranslate">root</code> eingebunden werden, sind ggf. die Einträge in der Datei <a class="internal" href="./fstab.html">/etc/fstab</a> geeignet zu verändern (üblicherweise <code class="notranslate">uid=1000</code> statt <code class="notranslate">uid=0</code>).</p></li><li><p>Auch wenn ein entsprechendes Fenster erscheint, kann Nautilus die Zugriffsrechte auf FAT-Partitionen <span class="underline">nicht</span> anpassen. Insbesondere ist ein Gast-Zugriff auf eine Freigabe auf einer FAT-Partition nur dann möglich, wenn dieser über die Mount-Option <code class="notranslate">umask</code> in <strong>fstab</strong> erlaubt wird.</p></li><li><p>Auch bei NTFS-Partitionen die mit den Standard-Optionen eingebunden sind, lassen sich die Zugriffsrechte nicht nachträglich ändern. Mit den Mount-Optionen <code class="notranslate">permissions</code> und <code class="notranslate">acl</code> eingebundene NTFS-Partitionen verhalten sich dagegen wie Partitionen mit einem Linux-Dateisystem.</p></li></ul><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Für das Freigeben von Dateien und Ordnern auf FAT-Partitionen lassen sich die Besitz- und Zugriffsrechte nicht nachträglich anpassen. Sie müssen vorher schon beim <a class="internal" href="./mount.html">Einbinden</a> der Partitionen geeignet festgelegt werden. Nähere Einzelheiten siehe <a class="internal" href="./windows-partitionen_einbinden.html">Windows-Partitionen einbinden</a>.</p><p>Gleiches gilt für NTFS-Partitionen, wenn diese nicht mit den Mount-Optionen <code class="notranslate">permissions</code> und <code class="notranslate">acl</code> eingebunden sind. Siehe hierzu <a class="internal" href="./ntfs-3g.html">NTFS-3G</a>.
</p></div></div></div><div class="section_2"><h3 id="Zugriffsrechte-und-Sicherheit">Zugriffsrechte und Sicherheit<a class="headerlink" href="#Zugriffsrechte-und-Sicherheit">¶</a></h3><p>
Die automatische Änderung von Zugriffsrechten auf dem Server ohne detaillierte Rückmeldung kann bei unbedachter Anwendung leicht dazu führen, dass unbemerkt unerwünschte oder gar gefährliche Berechtigungen entstehen. Leicht wird vergessen, dass die veränderten Zugriffsrechte auf dem Server auch dann bestehen bleiben, wenn eine vorübergehende Freigabe wieder aufgehoben wird.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Zu großzügig gewährte Zugriffsrechte können vor allem in Netzwerken ein Sicherheitsrisiko darstellen! Auf Rechnern mit direkter Verbindung zum Internet (ohne Router) und Laptops, die sich gelegentlich auch mit fremden oder öffentlichen Netzen verbinden, sind öffentliche Freigaben (mit Gast-Zugang) grundsätzlich zu vermeiden.
</p></div></div></div><div class="section_2"><h3 id="Persoenliche-Freigaben-im-Terminal">Persönliche Freigaben im Terminal<a class="headerlink" href="#Persoenliche-Freigaben-im-Terminal">¶</a></h3><p>
Nicht alle Dateimanager bieten wie Nautilus die Möglichkeit, persönliche Freigaben einzurichten. Vielleicht möchte man auch die Zugriffsrechte auf persönliche Freigaben differenzierter gestalten, als Nautilus dies vorsieht. In diesen Fällen lassen sich persönliche Freigaben über ein Terminal<sup><a href="#source-2">[2]</a></sup> einrichten. Hierzu dient die Befehlszeile</p><div class="bash"><div class="contents"><pre class="notranslate">net usershare add NAME_DER_FREIGABE PFAD/ZUR/FREIGABE </pre></div></div><p>Werden keine Parameter angegeben, so werden die Freigaben ohne Schreibrechte und ohne Gastzugang erstellt. Die allgemeine Syntax für die Befehlszeile ist</p><div class="bash"><div class="contents"><pre class="notranslate">net usershare add sharename path [comment] [acl] [guest_ok=[y|n]] </pre></div></div><p>Unter <em>"acl"</em> können für die einzelnen Benutzer die Zugriffsrechte festgelegt werden (f = voller Zugriff, r = nur lesen, d = kein Zugriff). Vor den ACL muss jedoch zwingend ein Kommentar oder wenigstens ein "Platzhalter" ("") stehen. Beispiel:</p><div class="bash"><div class="contents"><pre class="notranslate">net usershare add Musik ~/Musik "" Everyone:f guest_ok=yes </pre></div></div><p>Löschen lassen sich persönliche Freigaben mittels</p><div class="bash"><div class="contents"><pre class="notranslate">net usershare delete NAME_DER_FREIGABE </pre></div></div><p>Eine ausführliche Beschreibung weiterer Möglichkeiten von "net usershare" findet sich im Artikel <a class="internal" href="./samba_server/net_usershare.html">Samba Server/net usershare</a>.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Sollte die Fehlermeldung "<em>net usershare add: malformed acl guest_ok=y (missing ':')</em>" auftauchen, so fehlt möglicherweise vor den ACL der Kommentar bzw. der Platzhalter ("")
</p></div></div></div></div><div class="section_1"><h2 id="Allgemeine-Freigaben-und-Einstellungen">Allgemeine Freigaben und Einstellungen<a class="headerlink" href="#Allgemeine-Freigaben-und-Einstellungen">¶</a></h2><p>
</p><div class="section_2"><h3 id="Installation-2">Installation<a class="headerlink" href="#Installation-2">¶</a></h3><p>
Um über GNOME (bzw. MATE, Unity oder Xfce) auch <a class="crosslink" href="#Allgemeine-Freigaben">allgemeine Freigaben</a> (mit Root-Rechten und <strong>smb.conf</strong>) erstellen sowie <a class="crosslink" href="#Server-Einstellungen">Server-Einstellungen</a> und <a class="crosslink" href="#Benutzerkonto">Benutzerkonten</a> verwalten zu können, muss zusätzlich zum Metapaket <strong>Samba</strong> (<a class="crosslink" href="#Installation">s.o.</a>) noch das Paket
</p><ul><li><p><strong>system-config-samba</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install system-config-samba </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install system-config-samba </pre></div></div><p>
</p></div></div><p>
installiert werden. Danach erscheint im Hauptmenü folgender Eintrag:</p><ul><li><p><em>"System -&gt; Systemverwaltung -&gt; Samba"</em></p></li></ul><p>Dieser Eintrag lässt sich jedoch nur aufrufen, wenn auch das Paket
</p><ul><li><p><strong>gksu</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install gksu </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install gksu </pre></div></div><p>
</p></div></div><p>
installiert ist, was seit <a class="internal" href="./raring.html">Ubuntu 13.04</a> nicht mehr in jeder Ubuntu-Version Standard ist.</p><p>Zusätzlich kann auch noch die Installation eines der folgenden Pakete sinnvoll sein:</p><ul><li><p><strong>samba-doc</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install samba-doc </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install samba-doc </pre></div></div><p>
</p></div></div><p>(Samba Dokumentation)
</p><ul><li><p><strong>samba-doc-pdf</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install samba-doc-pdf </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install samba-doc-pdf </pre></div></div><p>
</p></div></div><p>(das Selbe im pdf-Format)</p><p>Fehlende Pakete (aus dem Metapaket <strong>samba</strong>) werden beim Erstellen allgemeiner Freigaben nicht automatisch nachinstalliert. 
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Das Tool system-config-samba lässt sich auch mit anderen grafischen Oberflächen, vor allem auch Xfce (Xubuntu), verwenden. Bei LXDE (Lubuntu) muss noch zusätzlich das Paket <strong>python-glade2</strong> installiert werden.</p><p>Möglicherweise lässt sich system-config-samba erst starten, nachdem <span class="underline">manuell</span> die Datei <strong>/etc/libuser.conf</strong> erzeugt wurde, z.B. durch den Befhel </p><div class="bash"><div class="contents"><pre class="notranslate">sudo touch /etc/libuser.conf </pre></div></div><p>
</p></div></div><p><img alt="./system-config-samba.png" class="image-right" src="./_/5a987878392695fc842d8b76e4e66f2c28a1ba6a.png"/>
</p></div><div class="section_2"><h3 id="Allgemeine-Freigaben">Allgemeine Freigaben<a class="headerlink" href="#Allgemeine-Freigaben">¶</a></h3><p>
Mit "allgemein" oder "administrativ" werden solche Freigaben bezeichnet, die in die Datei <strong>/etc/samba/smb.conf</strong> eingetragen und damit unabhängig vom jeweils angemeldeten Benutzer verfügbar sind. Allgemeine Freigaben einzurichten, zu löschen oder zu verändern ist denjenigen Benutzern vorbehalten, die als Mitglieder der Gruppe <em>admin</em> berechtigt sind, über <a class="internal" href="./sudo.html">sudo</a> Root-Rechte zu erlangen.</p><p>Weil allgemeine Freigaben grundsätzlich mit Root-Rechten erstellt werden, entfällt bei ihnen auch die Einschränkung, dass jeder Benutzer nur seine eigenen Dateien freigeben kann.</p><p>Nach einem Mausklick auf den Menü-Eintrag</p><ul><li><p><em>"System -&gt; Systemverwaltung -&gt; Samba"</em></p></li></ul><p>
muss der Benutzer durch Eingabe seines System-Passworts seine Berechtigung nachweisen, mit Root-Rechten zu arbeiten. Danach öffnet sich das Dialogfenster. Dort sind alle bestehenden allgemeinen Freigaben, nicht jedoch die persönlichen Freigaben des jeweiligen Benutzers aufgeführt.</p><p><img alt="./Share-Zugang.png" class="image-right" src="./_/93f1caf484d87d63f45b635967aeaae2a8f6be1a.png"/>
<img alt="./Share-anlegen.png" class="image-right" src="./_/31fabf087453c83f76e00cf5411a517188f21bf9.png"/>
</p><div class="section_3"><h4 id="Freigabe-hinzufuegen-oder-loeschen">Freigabe hinzufügen oder löschen<a class="headerlink" href="#Freigabe-hinzufuegen-oder-loeschen">¶</a></h4><p>
Die Angaben eines frei wählbaren Namens, unter dem die Freigabe im Netz erscheint, und des kompletten Pfads auf dem Server sind verpflichtend; fakultativ kann noch ein Kommentar hinzugefügt werden, der dann von manchen Browsern auf dem Client angezeigt wird. Außerdem muss angegeben werden, ob die Freigabe beschreibbar sein und von Browsern auf dem Client angezeigt werden soll.</p><p>Unter "Zugang" kann für jeden Benutzer mit <a class="crosslink" href="#Benutzerkonto">Samba-Benutzerkonto</a> einzeln der Zugriff gestattet oder verboten werden. Unter den Benutzern erscheint standardmäßig auch der User "nobody". Unter diesem Namen greifen sowohl Windows als auch Nautilus auf öffentliche Freigaben (mit erlaubtem Gastzugriff) zu.</p></div><div class="section_3"><h4 id="Eigenschaften">Eigenschaften<a class="headerlink" href="#Eigenschaften">¶</a></h4><p>
Unter "Eigenschaften" lassen sich diese Angaben für bereits eingerichtete Freigaben nachträglich noch verändern.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die hier festgelegten Zugriffsrechte für Freigaben sind nur gültig im Rahmen der Dateirechte<sup><a href="#source-3">[3]</a></sup>, die auf dem Server selbst gelten. Samba kann nichts erlauben, was auf dem Server verboten ist. Eine automatische Anpassung von Dateirechten, wie sie Nautilus bei persönlichen Freigaben mit <em>net usershare</em> vornimmt, findet beim Einrichten allgemeiner Freigaben nicht statt. 
</p></div></div><p>Nautilus kennzeichnet allgemeine Freigaben (im Gegensatz zu persönlichen Freigaben) <span class="underline">nicht</span> durch ein besonderes Emblem. Ihre Funktion wird dadurch jedoch nicht eingeschränkt. Auf keinen Fall sollte man sich aber durch das fehlende Emblem dazu verleiten lassen, eine allgemeine Freigabe zusätzlich noch über Nautilus persönlich freizugeben!</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Es ist durchaus möglich, auf demselben Rechner persönliche und allgemeine Freigaben nebeneinander zu verwenden. Allerdings muss man es unbedingt vermeiden, dieselbe Datei oder denselben Ordner unter dem gleichen Namen doppelt (einmal persönlich und einmal allgemein) freizugeben!
</p></div></div></div></div><div class="section_2"><h3 id="Einstellungen">Einstellungen<a class="headerlink" href="#Einstellungen">¶</a></h3><p>
Die im Folgenden beschriebenen Einstellungen wirken sich sowohl auf persönliche Freigaben (über Nautilus mit net usershare erstellt) als auch auf allgemeine Freigaben (mit Eintrag in <strong>smb.conf</strong>) aus. Sie können in GNOME in dem Dialogfenster vorgenommen werden, das man über den Menü-Eintrag</p><ul><li><p><em>"System -&gt; Systemverwaltung -&gt; Samba"</em></p></li></ul><p>
nach Eingabe des System-Passworts mit Root-Rechten öffnet.</p><p><img alt="./Server-Sicherheit.png" class="image-right" src="./_/41331e85cfccfcbb372e58d3fc5c904f9688ace3.png"/>
<img alt="./Server-Einstellungen.png" class="image-right" src="./_/2dfec7811d386f5126d2020b54ebf1d5fe0a3c5f.png"/>
</p><div class="section_3"><h4 id="Server-Einstellungen">Server-Einstellungen<a class="headerlink" href="#Server-Einstellungen">¶</a></h4><p>
Mit <em>"Basis"</em> wird die Arbeitsgruppe und die im Netzwerk gültige Beschreibung des Servers festgelegt. In kleinen Heimnetzwerken ist es zu empfehlen, dass alle Rechner derselben Arbeitsgruppe angehören.</p><p>Bei <em>"Sicherheit"</em> ist im Regelfall der Authentifizierungsmodus <em>"Benutzer"</em> richtig. 
Passwörter sollten grundsätzlich verschlüsselt werden (wird auch von Windows so verlangt).</p><p>In dem Feld <em>"Guest Account"</em> wird festgelegt, wem Ordner und Dateien auf dem Server gehören sollen, die von Gästen über das Netzwerk angelegt werden. Wird hier nichts eingetragen, ist <code class="notranslate">nobody</code> Standard.</p><p>Alternativ können die Server-Einstellungen auch über einen Editor mit Root-Rechten durch Einträge im Teil <code class="notranslate">[global]</code> der Datei <strong>/etc/samba/smb.conf</strong> vorgenommen werden. Dort sind für Sonderfälle auch noch differenziertere Einstellungen möglich (siehe auch <a class="internal" href="./samba_server/smb.conf.html">Samba Server/smb.conf</a>).</p><p><img alt="./neuer-Benutzer.png" class="image-right" src="./_/72f0d267eb0d2379d6292c22c1f8d26d98060dbf.png"/>
</p></div><div class="section_3"><h4 id="Benutzerkonto">Benutzerkonto<a class="headerlink" href="#Benutzerkonto">¶</a></h4><p>
Samba führt auf dem Server eine eigene, von der System-Benutzerverwaltung getrennte Benutzer-Datenbank. Dort können aber grundsätzlich nur solche Benutzer eingetragen werden, die auf dem Server einen eigenen Account haben. Für jeden dort eingetragenen Benutzer kann man dann ein eigenes Samba-Passwort festlegen, über das er von einem beliebigen Client aus (auch von einem Windows-Rechner) auf geschützte Freigaben zugreifen darf. Dieses Samba-Passwort kann, muss aber nicht mit seinem System-Passwort übereinstimmen. Über den Eintrag <em>"Einstellungen -&gt; Samba-Benutzer"</em> können Einträge in der Samba-Datenbank hinzugefügt, geändert oder gelöscht werden.</p><p>Voreingestellt als Benutzer ist auch <code class="notranslate">nobody</code>. Dieser sollte keinesfalls gelöscht und auch nicht mit einem Passwort versehen werden, da Windows und Nautilus diesen Namen standardmäßig für den anonymen Zugriff auf öffentliche Freigaben verwenden.</p><p>Alternativ kann die Samba-Datenbank auch über ein Terminal mit Root-Rechten mit dem Befehl <code class="notranslate">smbpasswd</code> verwaltet werden. Siehe hierzu <a class="internal" href="./samba_server.html">Samba Server</a> und die <a class="internal" href="./man.html">Manpage</a> zu smbpasswd.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Obwohl persönliche und allgemeine Freigaben auf dem Server voneinander getrennt verwaltet werden, werden sie auf dem Client nicht unterschieden. Für beide bestehen dort genau die gleichen Zugriffsmöglichkeiten.
</p></div></div><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Das Tool "system-config-samba" legt  nicht – wie z.B. das veraltete Tool Swat – eine völlig neue Datei <strong>/etc/samba/smb.conf</strong> an, sondern es bearbeitet die vorhandene Datei. Wurde diese bereits vorher durch die Verwendung anderer Tools oder durch fehlerhafte Einträge beschädigt, funktioniert "system-config-samba" möglicherweise nicht. Eine unveränderte Kopie der bei der Installation von Samba eingerichteten Original-Datei <strong>smb.conf</strong> findet man üblicherweise im Ordner <strong>/usr/share/samba</strong>.
</p></div></div></div></div></div><div class="section_1"><h2 id="Probleme-und-Loesungen">Probleme und Lösungen<a class="headerlink" href="#Probleme-und-Loesungen">¶</a></h2><p>
</p><div class="section_2"><h3 id="system-config-samba-laesst-sich-nicht-starten">"system-config-samba" lässt sich nicht starten<a class="headerlink" href="#system-config-samba-laesst-sich-nicht-starten">¶</a></h3><p>
Wegen eines Fehlers (<a class="interwiki interwiki-bug" href="https://launchpad.net/bugs/1387274">1387274</a>) lässt sich system-config-samba in <a class="internal" href="./utopic.html">Ubuntu 14.10</a> und nachfolgenden Versionen auch dann nicht starten, wenn das Paket <strong>gksu</strong> installiert ist. Der Grund ist, dass die benötigte Datei <strong>/etc/libuser.conf</strong> fehlt. Damit system-config-samba startet, muss dann einmalig im Terminal folgender Befehl eingeben werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">  sudo touch /etc/libuser.conf </pre></div></div></div><div class="section_2"><h3 id="Der-Server-wird-nicht-erkannt">Der Server wird nicht erkannt<a class="headerlink" href="#Der-Server-wird-nicht-erkannt">¶</a></h3><p>
Zuerst sollte man immer überprüfen, ob der Name des Servers den Konventionen entspricht (maximal 15 Zeichen, keine unzulässigen Sonderzeichen usw.).</p><p>Wenn der Server trotzdem von keinem Client aus (auch nicht von Windows-Clients) über seinen Netbios-Namen erkannt wird, aber über seine IP ansprechbar ist, dann kann es sein, dass auf dem Server der Service "nmbd" beim Booten nicht korrekt gestartet wurde. Nach Eingabe folgender Zeile im Terminal sollte die Erkennung über den Netbios-Namen dann funktionieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service nmbd start </pre></div></div><p>
Mit folgendem Eintrag in <strong>/etc/rc.local</strong> (mit <a class="internal" href="./sudo.html">Root-Rechten</a> vorzunehmen) lässt sich dies automatisieren:
</p><pre class="notranslate">sleep 20
service nmbd start
exit 0               #(diese Zeile ist bereits vorhanden)</pre></div><div class="section_2"><h3 id="Heimnetzgruppe-auf-Windows-Clients">"Heimnetzgruppe" auf Windows-Clients<a class="headerlink" href="#Heimnetzgruppe-auf-Windows-Clients">¶</a></h3><p>
Mit Windows 7 hat Microsoft die Einrichtung "Heimnetzgruppe" geschaffen. Samba kann mit dieser nichts anfangen und kann weder als Client noch als Server einer Windows-Heimnetzgruppe beitreten. Zur störungsfreien Kommunikation von Linux-Systemen mit Windows-Rechnern empfiehlt es sich deshalb, dort die Heimnetzgruppe nicht zu verwenden.</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><div class="section_2"><h3 id="Intern">Intern<a class="headerlink" href="#Intern">¶</a></h3><p>
</p><ul><li><p><a class="internal" href="./heimnetzwerk.html">Heimnetzwerk</a>: Verschiedene Möglichkeiten, ein kleines privates Netzwerk einzurichten</p></li><li><p><a class="internal" href="./gnome.html">GNOME</a>, <a class="internal" href="./mate.html">MATE</a>, <a class="internal" href="./unity.html">Unity</a>, <a class="internal" href="./xfce.html">Xfce</a>, <a class="internal" href="./lxde.html">Lxde</a>: Ausführliche Informationen zum jeweiligen Desktop</p></li><li><p><a class="internal" href="./samba.html">Samba</a>: Grundlegende Informationen; dort finden sich auch weitere Links</p></li><li><p><a class="internal" href="./samba_server.html">Samba Server</a>: Weitere Informationen zum Einrichten eines Samba-Servers auch ohne GUI</p><ul><li><p><a class="internal" href="./samba_server/smb.conf.html">Samba Server/smb.conf</a>: Die Konfigurationsdatei eines Samba-Servers (mit Beispielen)</p></li><li><p><a class="internal" href="./samba_server/net_usershare.html">Samba Server/net usershare</a> - Persönliche Freigaben über Kommandozeilen erstellen</p></li></ul></li></ul><p>
</p></div><div class="section_2"><h3 id="Extern">Extern<a class="headerlink" href="#Extern">¶</a></h3><p>
</p><ul><li><p><a class="external" href="http://us1.samba.org/samba/" rel="nofollow">Die Homepage des Samba Projektes</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p><a class="external" href="http://samba.sernet.de/" rel="nofollow">Die deutsche Homepage des Samba Projektes</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="external" href="http://gertranssmb3.berlios.de/output/index.html" rel="nofollow">Samba-HOWTO-Sammlung</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li></ul><p></p></div></div></div>
<p class="meta">
<a href="./samba_server_gnome/a/revision/944899.html">Diese Revision</a> wurde am 13. November 2017 17:49 von <a href="https://ubuntuusers.de/user/Max-Ulrich_Farber/">Max-Ulrich_Farber</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./samba_server_gnome.html">Samba Server GNOME</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>