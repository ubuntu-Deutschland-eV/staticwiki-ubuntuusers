<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>ReportLab › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./reportlab.html">ReportLab</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/ReportLab">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./reportlab/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./reportlab/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./reportlab/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./reportlab/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./reportlab/a/backlinks.html">ReportLab</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./sudo.html">Root-Rechte</a>, <em>optional</em></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./packprogramme.html">Archive entpacken</a>, <em>optional</em></p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a><ol class="arabic"><li><a class="crosslink" href="#manuelle-Installation">manuelle Installation
</a></li><li><a class="crosslink" href="#Schriften-installieren">Schriften installieren
</a></li></ol></li><li><a class="crosslink" href="#Benutzung">Benutzung
</a><ol class="arabic"><li><a class="crosslink" href="#PDFs-generieren">PDFs generieren
</a></li><li><a class="crosslink" href="#Flowables">Flowables
</a></li><li><a class="crosslink" href="#Platypus">Platypus
</a></li><li><a class="crosslink" href="#Diagramme-generieren">Diagramme generieren
</a></li><li><a class="crosslink" href="#Dokumentation">Dokumentation
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/python.png" class="image-left" src="./_/0d925aa500a88b281392326c383880d31378667c.png"/>
<a class="external" href="http://www.reportlab.com/software/opensource/" rel="nofollow">ReportLab</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> bzw. genau genommen das ReportLab Toolkit ist ein umfangreiches <a class="internal" href="./python.html">Python</a>-Modul, welches zum Generieren von <a class="internal" href="./pdf.html">PDF</a>-Dateien aus Skripten heraus dient. Das Toolkit an sich steht unter einer freien OpenSource-Lizenz, die dahinter stehende Firma <a class="external" href="http://www.reportlab.com" rel="nofollow">ReportLab</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> bietet zusätzlich noch darauf aufbauende Module und Programme an, die das Generieren von PDFs weiter erleichtern sollen. Das Toolkit reicht aber völlig aus, zumal es einen großen Funktionsumfang hat, der sich uneingeschränkt nutzen lässt.</p><p>Im Gegensatz zu anderen Programmen, welche PDFs z.B. via Drucktreiber generieren, erzeugt ReportLab die Dateien nach der <a class="interwiki interwiki-wikipedia_en" href="https://en.wikipedia.org/wiki/Portable_Document_Format#Adobe.27s_versions">PDF1.4 Spezifikation</a>, d.h. sie enthalten z.B. durchsuchbaren Text und nicht nur Bilder. Weiterhin wird die Schrift vektorisiert eingebunden, so dass die Dokumente beliebig skalierbar sind.</p><p>Ab der Version 3 (erschienen im Februar 2014) funktioniert ReportLab auch mit Python 3, setzt aber mindestens die Python-Version 3.3 voraus.</p><p>Im Folgenden wird der Einfachheit halber von „ReportLab“ gesprochen, gemeint ist aber durchgehend das freie ReportLab Toolkit.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
ReportLab ist in den Paketquellen enthalten und kann für Python3 über das Paket:</p><ul><li><p><strong>python3-reportlab</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install python3-reportlab </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install python3-reportlab </pre></div></div><p>
</p></div></div><p>bzw. für Python 2 über das Paket</p><ul><li><p><strong>python-reportlab</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install python-reportlab </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install python-reportlab </pre></div></div><p>
</p></div></div><p>installiert werden<sup><a href="#source-1">[1]</a></sup>.</p><div class="section_2"><h3 id="manuelle-Installation">manuelle Installation<a class="headerlink" href="#manuelle-Installation">¶</a></h3><p>
Wer eine neuere Version als die aus den Paketquellen benötigt, kann diese via <a class="internal" href="./pip.html">pip</a> installieren, sowohl für Python 3 als auch für Python 2. Dabei wird auch die Python-Bibliothek <a class="external" href="https://pypi.python.org/pypi/Pillow" rel="nofollow">Pillow</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> mit installiert, welche wieder voraussetzt, dass die Pakete <strong>build-essential</strong>, <strong>python3-dev</strong> (für Python 3) bzw. <strong>python-dev</strong> (für Python 2), <strong>libjpeg8-dev</strong>, <strong>zlib1g-dev</strong> installiert sind.</p></div><div class="section_2"><h3 id="Schriften-installieren">Schriften installieren<a class="headerlink" href="#Schriften-installieren">¶</a></h3><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die manuelle Installation von Schriften ist nur notwendig, wenn man <a class="crosslink" href="#Diagramme-generieren">Diagramme generieren</a> möchte. Für die Erzeugung von PDFs ist dies <span class="underline">nicht</span> notwendig.
</p></div></div><p>Leider sind in der Standardinstallation einige Schriften nicht enthalten, die man aber benötigt, wenn Diagramme erstellt werden sollen. Daher müssen diese manuell installiert werden.</p><p>Dazu lädt man die Schriften als <strong>zip</strong>-Datei von der <a class="external" href="http://www.reportlab.com/ftp/fonts/pfbfer.zip" rel="nofollow">ReportLab Seite</a> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/> herunter und entpackt die Datei<sup><a href="#source-3">[3]</a></sup>. Die Dateien kopiert man nun - ggf. mit Root-Rechten<sup><a href="#source-2">[2]</a></sup> - ins Unterverzerzeichnis <strong>fonts</strong> der Reportlab Installation. Sollte <strong>fonts</strong> nicht existieren, so muss man das Verzeichnis natürlich erst anlegen.</p></div></div><div class="section_1"><h2 id="Benutzung">Benutzung<a class="headerlink" href="#Benutzung">¶</a></h2><p>
Man kann ReportLab auf mehreren Ebenen nutzen, welche unterschiedlich „komfortabel“ sind bzw. unterschiedlich detaillierte Zugriffe auf das Layout zu lassen. Dies wird im Folgenden beschrieben.</p><div class="section_2"><h3 id="PDFs-generieren">PDFs generieren<a class="headerlink" href="#PDFs-generieren">¶</a></h3><p>
Die unterste, für den Benutzer sinnvoll nutzbare Ebene bei der PDF-Generierung ist der „Canvas“. Dieser stellt eine leeres PDF-Dokument dar, welches dann mit Inhalt gefüllt werden kann:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">from</span> <span class="nn">reportlab.pdfgen</span> <span class="kn">import</span> <span class="n">canvas</span>
<span class="kn">from</span> <span class="nn">reportlab.lib.pagesizes</span> <span class="kn">import</span> <span class="n">A4</span>
<span class="kn">from</span> <span class="nn">reportlab.lib.units</span> <span class="kn">import</span> <span class="n">cm</span>

<span class="c1">#Anlegen des PDF Dokuments, Seitengröße DIN A4 Hochformat)</span>
<span class="n">pdf</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">Canvas</span><span class="p">(</span><span class="s1">'mein_pdf.pdf'</span><span class="p">,</span><span class="n">pagesize</span><span class="o">=</span><span class="n">A4</span><span class="p">)</span>
<span class="c1">#Holen der Seitenabmessung</span>
<span class="n">breite</span><span class="p">,</span> <span class="n">hoehe</span> <span class="o">=</span> <span class="n">A4</span>
<span class="c1">#Hinzufügen von diversen Elementen</span>
<span class="c1">#Der Nullpunkt des Dokuments ist unten links!</span>
<span class="c1">#Die Koordinaten werden nur teilweise in cm angegeben</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">drawString</span><span class="p">(</span><span class="mi">1</span><span class="o">*</span><span class="n">cm</span><span class="p">,</span><span class="mi">1</span><span class="o">*</span><span class="n">cm</span><span class="p">,</span><span class="s1">'Der Text steht links unten'</span><span class="p">)</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="s1">'Helvetica-Bold'</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">drawCentredString</span><span class="p">(</span><span class="n">breite</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">hoehe</span><span class="o">-</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">cm</span><span class="p">),</span><span class="s1">'Der Text steht oben zentriert'</span><span class="p">)</span>
<span class="c1">#und noch ein buntes Rechteck...</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">setStrokeColorRGB</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">setFillColorRGB</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">rect</span><span class="p">((</span><span class="n">breite</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">cm</span><span class="p">),(</span><span class="n">hoehe</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">cm</span><span class="p">),</span><span class="mi">6</span><span class="o">*</span><span class="n">cm</span><span class="p">,</span><span class="mi">6</span><span class="o">*</span><span class="n">cm</span><span class="p">,</span><span class="n">fill</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1">#PDF generieren und speichern</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">showPage</span><span class="p">()</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</td></tr></table></div><p>Der obige Code zeigt nur einen kleinen Ausschnitt der Möglichkeiten, Inhalt zum Canvas hinzuzufügen. ReportLab kennt noch weitere grafische Elemente: Bilder können eingebunden werden, Text kann in der Laufweite angepasst werden und vieles mehr. Bei der Positionierung der Element ist daran zu denken, dass der Nullpunkt einer Seite unten links ist, also wie in einem <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Kartesisches_Koordinatensystem">Kartesischen Koordinatensystem</a>.</p><p>Möchte man auf diese Art ein mehrseitiges PDF generieren, so muss zwischendurch <code class="notranslate">pdf.showPage()</code> aufgerufen werden (siehe folgendes Beispiel).</p><p>Der Canvas erlaubt zwar eine sehr detaillierte Layout-Kontrolle, ist aber ansonsten vergleichsweise unkomfortable („low-level“), da z.B. langer Text nicht automatisch umgebrochen wird:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">from</span> <span class="nn">reportlab.pdfgen</span> <span class="kn">import</span> <span class="n">canvas</span>
<span class="kn">from</span> <span class="nn">reportlab.lib.pagesizes</span> <span class="kn">import</span> <span class="n">A4</span>
<span class="kn">from</span> <span class="nn">reportlab.lib.units</span> <span class="kn">import</span> <span class="n">cm</span>

<span class="c1">#Anlegen des PDF Dokuments, Seitengröße DIN A4 Hochformat)</span>
<span class="n">pdf</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">Canvas</span><span class="p">(</span><span class="s1">'mein_pdf2.pdf'</span><span class="p">,</span><span class="n">pagesize</span><span class="o">=</span><span class="n">A4</span><span class="p">)</span>
<span class="c1">#der folgende Text läuft rechts aus der Seite heraus</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="s1">'Helvetica'</span><span class="p">,</span><span class="mi">72</span><span class="p">)</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">drawString</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">400</span><span class="p">,</span><span class="s1">'Dieser Text läuft rechts aus dem Dokuments heraus'</span><span class="p">)</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">showPage</span><span class="p">()</span>
<span class="c1">#etwas mehr Text für Seite 2</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">drawString</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">,</span><span class="s1">'Seite 2 :-)'</span><span class="p">)</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">showPage</span><span class="p">()</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</td></tr></table></div><p>Wer längeren Text hinzufügen möchte, der kann die im folgenden beschriebenen „Flowables“ benutzen.</p></div><div class="section_2"><h3 id="Flowables">Flowables<a class="headerlink" href="#Flowables">¶</a></h3><p>
„Flowables“ sind in ReportLab Element, welche in das Dokument „fließen“ können. Im Gegensatz zu den direkte Zeichenoperationen auf den PDF-Canvas formatieren sich Flowables in Teilen selber. So werden z.B. automatisch Zeilenumbrüche bei längeren Texten erzeugt, ebenso werden automatisch Abstände zum vorhergehenden Element eingehalten - was aber optional, wie vieles in ReportLab, manuell beeinflusst werden kann.</p><p>Es gibt Flowables u.a. für Text, Grafiken, Kombinationen daraus, Tabellen und diverse andere Elemente.</p><p>Das folgende Beispiel zeigt, wie Flowables in Kombination mit dem Canvas genutzt werden können. Durch die Definition des „Frames“ entfällt die Positionierung der Elemente, da Flowables innerhalb des Frames automatisch fortlaufend angeordnet werden.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">from</span> <span class="nn">reportlab.pdfgen</span> <span class="kn">import</span> <span class="n">canvas</span>
<span class="kn">from</span> <span class="nn">reportlab.lib.units</span> <span class="kn">import</span> <span class="n">cm</span>
<span class="kn">from</span> <span class="nn">reportlab.lib.pagesizes</span> <span class="kn">import</span> <span class="n">A4</span><span class="p">,</span> <span class="n">landscape</span>
<span class="kn">from</span> <span class="nn">reportlab.lib.styles</span> <span class="kn">import</span> <span class="n">getSampleStyleSheet</span>
<span class="kn">from</span> <span class="nn">reportlab.platypus</span> <span class="kn">import</span> <span class="n">Frame</span><span class="p">,</span> <span class="n">Paragraph</span>

<span class="c1">#Anlegen des PDFs im DIN A4 Querformat</span>
<span class="n">pdf</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">Canvas</span><span class="p">(</span><span class="s1">'mein_pdf3.pdf'</span><span class="p">,</span><span class="n">pagesize</span><span class="o">=</span><span class="n">landscape</span><span class="p">(</span><span class="n">A4</span><span class="p">))</span>
<span class="c1">#Holen der Seitenabmessung</span>
<span class="n">breite</span><span class="p">,</span> <span class="n">hoehe</span> <span class="o">=</span> <span class="n">landscape</span><span class="p">(</span><span class="n">A4</span><span class="p">)</span>
<span class="c1">#Definieren der Styles</span>
<span class="n">style</span> <span class="o">=</span> <span class="n">getSampleStyleSheet</span><span class="p">()</span>
<span class="c1">#Anlegen einer Liste, welche den Seiteninhalt enthält</span>
<span class="n">story</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c1">#Anlegen des Frames, in den der Inhalt eingefügt wird</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="mi">1</span><span class="o">*</span><span class="n">cm</span><span class="p">,</span><span class="mi">1</span><span class="o">*</span><span class="n">cm</span><span class="p">,</span><span class="n">breite</span><span class="o">-</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">cm</span><span class="p">),</span><span class="n">hoehe</span><span class="o">-</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">cm</span><span class="p">))</span>
<span class="c1">#Generieren von Inhalt</span>
<span class="n">story</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Paragraph</span><span class="p">(</span><span class="s1">'Überschrift 1'</span><span class="p">,</span><span class="n">style</span><span class="p">[</span><span class="s1">'Heading1'</span><span class="p">]))</span>
<span class="n">story</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Paragraph</span><span class="p">(</span><span class="s1">'''Das ReportLab Toolkit ist ein Python-Modul zum</span>
<span class="s1">Generieren von PDF Dokumenten. Es bietet zahlreiche Klassen und Funktionen</span>
<span class="s1">zur detaillierten Kontrolle des Inhalts und des Layouts. Weiterhin gibt es </span>
<span class="s1">Klassen zur Generierung von Diagrammen. Das ReportLab Toolkit steht</span>
<span class="s1">unter einer freien OpenSource Lizenz.'''</span><span class="p">,</span>
<span class="n">style</span><span class="p">[</span><span class="s1">'BodyText'</span><span class="p">]))</span>
<span class="n">story</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Paragraph</span><span class="p">(</span><span class="s1">'Überschrift 2'</span><span class="p">,</span><span class="n">style</span><span class="p">[</span><span class="s1">'Heading2'</span><span class="p">]))</span>
<span class="c1">#Hinzufügen des Inhalts</span>
<span class="n">f</span><span class="o">.</span><span class="n">addFromList</span><span class="p">(</span><span class="n">story</span><span class="p">,</span><span class="n">pdf</span><span class="p">)</span>
<span class="c1">#...und abspeichern</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</td></tr></table></div><p>Flowables können natürlich auch mit den anderen Canvas-Elementen kombiniert werden.</p><p>Allerdings werden so immer noch keine automatischen Seitenumbrüche erzeugt. Generiert man mehr Inhalt, fließt der Text unten aus der Seite hinaus. Es gibt zwar Funktionen, die den vorhandenen Restplatz auf einer Seite bestimmen können, ebenso ist der benötigte Platz eines Flowables abrufbar. Aber es ist recht mühsam, so selber Seitenumbrüche zu erzeugen, so dass man bei längeren Texten besser zum im Folgenden beschriebenen Platypus greift.</p></div><div class="section_2"><h3 id="Platypus">Platypus<a class="headerlink" href="#Platypus">¶</a></h3><p>
Platypus steht für „Page Layout and Typography Using Scripts“, was frei übersetzt so viel wie „automatisches Layout per Skript“ bedeutet. Hier wird ebenfalls auf Flowables als Inhaltselemente zurückgegriffen, zusätzlich wird aber noch eine Dokumentenvorlage definiert, welche das Gesamtlayout bestimmt.</p><p>Im folgenden Beispiel wird dies mit Hilfe der vordefinierter Vorlage „SimpleDocTemplate“ realisiert:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">from</span> <span class="nn">reportlab.lib.pagesizes</span> <span class="kn">import</span> <span class="n">A4</span>
<span class="kn">from</span> <span class="nn">reportlab.lib.styles</span> <span class="kn">import</span> <span class="n">getSampleStyleSheet</span>
<span class="kn">from</span> <span class="nn">reportlab.platypus</span> <span class="kn">import</span> <span class="n">Paragraph</span><span class="p">,</span> <span class="n">SimpleDocTemplate</span><span class="p">,</span> <span class="n">PageBreak</span>

<span class="c1">#Definieren der Styles</span>
<span class="n">style</span> <span class="o">=</span> <span class="n">getSampleStyleSheet</span><span class="p">()</span>
<span class="c1">#Anlegen einer Liste, welche den Seiteninhalt enthält</span>
<span class="n">story</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c1">#Generieren von Inhalt</span>
<span class="n">story</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Paragraph</span><span class="p">(</span><span class="s1">'Überschrift 1'</span><span class="p">,</span><span class="n">style</span><span class="p">[</span><span class="s1">'Heading1'</span><span class="p">]))</span>
<span class="n">story</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Paragraph</span><span class="p">(</span><span class="s1">'''Das ReportLab Toolkit ist ein Python-Modul zum</span>
<span class="s1">generieren von PDF Dokumenten. Es bietet zahlreiche Klassen und Funktionen</span>
<span class="s1">zur detaillierten Kontrolle des Inhalts und des Layouts. Weiterhin gibt es </span>
<span class="s1">Klassen zur Generierung von Diagrammen.'''</span><span class="p">,</span><span class="n">style</span><span class="p">[</span><span class="s1">'BodyText'</span><span class="p">]))</span>
<span class="n">story</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">PageBreak</span><span class="p">())</span>
<span class="n">story</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Paragraph</span><span class="p">(</span><span class="s1">'Überschrift 2'</span><span class="p">,</span><span class="n">style</span><span class="p">[</span><span class="s1">'Heading2'</span><span class="p">]))</span>
<span class="n">story</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Paragraph</span><span class="p">(</span><span class="s1">''' Das ReportLab Toolkit steht unter einer freien </span>
<span class="s1">OpenSource Lizenz.'''</span><span class="p">,</span><span class="n">style</span><span class="p">[</span><span class="s1">'BodyText'</span><span class="p">]))</span>
<span class="c1">#Anlegen des PDFs</span>
<span class="n">pdf</span> <span class="o">=</span> <span class="n">SimpleDocTemplate</span><span class="p">(</span><span class="s1">'mein_pdf4.pdf'</span><span class="p">,</span><span class="n">pagesize</span><span class="o">=</span><span class="n">A4</span><span class="p">)</span>
<span class="n">pdf</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">story</span><span class="p">)</span>
</pre></div>
</td></tr></table></div><p>Dies ist, wie gesagt, der einfachste Fall, da im SimpleDocTemplate bereits alle wichtigen Dinge vorkonfiguriert sind.</p><p>Eine wesentlich detaillierte Kontrolle lässt die Verwendung des „BaseDocTemplate“ zu. Hier können innerhalb eines Dokuments beliebige und beliebig viele Seitenvorlagen angelegt werden. Die Seitenvorlagen können wiederum beliebig definierte Frames enthalten. Somit sind auch komplexere Layouts mit mehreren Spalten, Wechsel zwischen Hoch- und Querformat innerhalb eines Dokuments, unterschiedlichen Rändern für linke und rechte Seiten und vieles mehr möglich. Außerdem kann eine feste Kopf- und Fußzeile pro Seite definiert werden, welche immer automatisch hinzugefügt wird.</p></div><div class="section_2"><h3 id="Diagramme-generieren">Diagramme generieren<a class="headerlink" href="#Diagramme-generieren">¶</a></h3><p>
Neben den oben vorgestellten Möglichkeiten zum generieren von PDFs bietet ReportLab auch Module an, mit welchen sich Diagramme generieren lassen. Diese lassen sich dann entweder als Bild- oder Vektordatei speichern oder direkt in ein mit ReportLab erzeugtes PDF einbauen. Es werden alle gängigen Arten wie Linie-, Balken und Tortendiagramm angeboten.</p><p>Das folgende Beispiel erstellt ein einfaches Balkendiagramm:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">from</span> <span class="nn">reportlab.graphics.shapes</span> <span class="kn">import</span> <span class="n">Drawing</span>
<span class="kn">from</span> <span class="nn">reportlab.graphics.charts.barcharts</span> <span class="kn">import</span> <span class="n">VerticalBarChart</span>
<span class="kn">from</span> <span class="nn">reportlab.graphics</span> <span class="kn">import</span> <span class="n">renderPM</span>

<span class="c1">#Festlegen der Gesamtgröße in Pixel</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">Drawing</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span><span class="mi">300</span><span class="p">)</span>
<span class="c1">#Daten für das Diagramm</span>
<span class="n">daten</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">),(</span><span class="mi">4</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">7</span><span class="p">)]</span>
<span class="c1">#Anlegen des Diagramms</span>
<span class="n">diagramm</span> <span class="o">=</span> <span class="n">VerticalBarChart</span><span class="p">()</span>
<span class="c1">#Positionierung und Größe des Diagramms</span>
<span class="n">diagramm</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">diagramm</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">diagramm</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">200</span>
<span class="n">diagramm</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">300</span>
<span class="c1">#Hinzufügen der Daten</span>
<span class="n">diagramm</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">daten</span>
<span class="c1">#Y-Achse (in ReportLab „valueAxis“) formatieren</span>
<span class="n">diagramm</span><span class="o">.</span><span class="n">valueAxis</span><span class="o">.</span><span class="n">valueMin</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">diagramm</span><span class="o">.</span><span class="n">valueAxis</span><span class="o">.</span><span class="n">valueMax</span> <span class="o">=</span> <span class="mi">16</span>
<span class="n">diagramm</span><span class="o">.</span><span class="n">valueAxis</span><span class="o">.</span><span class="n">valueStep</span> <span class="o">=</span> <span class="mi">2</span>
<span class="c1">#X-Achse (in ReportLab „categoryAxis“) formatieren</span>
<span class="n">diagramm</span><span class="o">.</span><span class="n">categoryAxis</span><span class="o">.</span><span class="n">categoryNames</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'A'</span><span class="p">,</span><span class="s1">'B'</span><span class="p">,</span><span class="s1">'C'</span><span class="p">]</span>
<span class="c1">#Diagramm zeichnen</span>
<span class="n">d</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">diagramm</span><span class="p">)</span>
<span class="c1">#... und speichernhttp://www.reportlab.com/software/opensource/rl-toolkit/guide/</span>
<span class="n">renderPM</span><span class="o">.</span><span class="n">drawToFile</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="s1">'diagramm1.png'</span><span class="p">,</span> <span class="s1">'PNG'</span><span class="p">)</span>
</pre></div>
</td></tr></table></div><p>Als Ausgabeformat wurde <strong>PNG</strong> gewählt, möglich sind aber u.a. auch <strong>JPG</strong>, <strong>PDF</strong> oder <strong>SVG</strong>.</p><p>ReportLab bietet weitreichende Formatierungsmöglichkeiten, sowohl die Daten, die Achsen als auch die Legende. Weitere Informationen findet man z.B. in der Dokumentation.</p></div><div class="section_2"><h3 id="Dokumentation">Dokumentation<a class="headerlink" href="#Dokumentation">¶</a></h3><p>
Wie weiter oben bereits erwähnt zeigen alle Beispiele nur einen kleine Ausschnitt der Möglichkeiten des ReportLab Toolkits. Wer sich näher damit beschäftigen möchte, dem sei die <a class="external" href="http://www.reportlab.com/software/opensource/rl-toolkit/guide/" rel="nofollow">offizielle Dokumentation</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> empfohlen, welche als PDF-Dokument heruntergeladen werden kann.</p><p>Alternativ kann man sich auch die Dokumentation über die Paketverwaltung installieren:</p><ul><li><p><strong>python-reportlab-doc</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install python-reportlab-doc </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install python-reportlab-doc </pre></div></div><p>
</p></div></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://www.reportlab.com/apis/reportlab/" rel="nofollow">API-Referenz</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://www.reportlab.com/snippets/" rel="nofollow">Code-Schnipsel</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>: nützliche Beispiele für die Nutzung von ReportLab</p></li><li><p><a class="external" href="http://rst2pdf.ralsina.me/stories/index.html" rel="nofollow">rst2pdf</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>: Textsatzsystem für die Umwandlung von <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/reStructuredText">reStructuredText</a> über ReportLab in druckfertige PDFs</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./reportlab/a/revision/940540.html">Diese Revision</a> wurde am 8. Mai 2017 22:40 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./reportlab.html">ReportLab</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>