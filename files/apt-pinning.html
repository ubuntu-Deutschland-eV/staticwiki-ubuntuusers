<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Apt-Pinning › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./apt-pinning.html">Apt-Pinning</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Apt-Pinning">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./apt-pinning/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./apt-pinning/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./apt-pinning/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./apt-pinning/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./apt-pinning/a/backlinks.html">Apt-Pinning</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><p>
</p><div class="box advanced"><h3 class="box advanced">Artikel für fortgeschrittene Anwender</h3><div class="contents"><p>
Dieser Artikel erfordert mehr Erfahrung im Umgang mit
Linux und ist daher nur für fortgeschrittene Benutzer
gedacht.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./sudo.html">Root-Rechte erlangen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./paketquellen_freischalten.html">Paketquellen freischalten</a></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="./apt.html">Verwenden von apt-get und apt-cache</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Regeln-fuer-das-Pinning">Regeln für das Pinning
</a><ol class="arabic"><li><a class="crosslink" href="#Pinning-per-Release">Pinning per Release
</a></li><li><a class="crosslink" href="#Pinning-nach-Ursprung">Pinning nach Ursprung
</a></li><li><a class="crosslink" href="#Pinning-per-Version">Pinning per Version
</a></li><li><a class="crosslink" href="#Parameter-fuer-Pinning-per-Release">Parameter für Pinning per Release
</a></li><li><a class="crosslink" href="#Werte-fuer-Pin-Priority">Werte für Pin-Priority
</a></li><li><a class="crosslink" href="#Gezielte-Umgehung-mit-apt-get">Gezielte Umgehung mit apt-get
</a></li></ol></li><li><a class="crosslink" href="#Beispiele">Beispiele
</a><ol class="arabic"><li><a class="crosslink" href="#Von-proposed-Quellen-downgraden">Von proposed-Quellen downgraden
</a></li><li><a class="crosslink" href="#Einzelne-Pakete-aus-aelterer-neuerer-Ubuntu-Version-installieren">Einzelne Pakete aus älterer/neuerer Ubun...</a></li><li><a class="crosslink" href="#Einzelne-Pakete-aus-einem-Sammel-PPA-installieren">Einzelne Pakete aus einem Sammel-PPA ins...</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/Oxygen/preferences-other.png" class="image-left" src="./_/c7f6ad50f5e85a8422a9cafd66f457ffc84cd3ae.png"/>
<em>Apt-Pinning</em> nennt man eine Technik, bei der bestimmte Paketquellen bevorzugt behandelt werden. So kann man z.B. bei einer LTS-Version bleiben, aber gezielt Pakete von einer neueren Version oder einer anderen inoffiziellen Quelle beziehen. Oder man kann an einem Paket in einer bestimmten Version festhalten und somit dessen Aktualisierung oder Deinstallation verhindern.</p><p>Das Pinning erfolgte früher traditionell in der Datei <strong>/etc/apt/preferences</strong>. Ab Ubuntu 10.04 sollte man den Ordner <strong>/etc/apt/preferences.d/</strong> nutzen, in dem man eine neue Datei mit einem beliebigen Namen anlegt. Idealerweise enthält der Dateiname dann einen Hinweis auf die jeweilige Paketquelle. Diese Datei darf entweder die Dateiendung <strong>.pref</strong> oder aber keine Endung besitzen (z.B. <strong>xenial.pin</strong> würde ignoriert werden).</p><p>Unabhängig vom Speicherort muss das Anlegen und die Bearbeitung mit einem Editor <sup><a href="#source-1">[1]</a></sup> mit <a class="internal" href="./sudo.html">Root-Rechten</a> <sup><a href="#source-2">[2]</a></sup> erfolgen. Im weiteren Verlauf folgen verschiedene Beispiele, wie man die jeweiligen Package-Informationen des gewünschten Pakets formuliert.</p><div class="section_1"><h2 id="Regeln-fuer-das-Pinning">Regeln für das Pinning<a class="headerlink" href="#Regeln-fuer-das-Pinning">¶</a></h2><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Das Folgende ist lediglich ein Beispiel, wie Pinning verwendet werden kann. Die konkreten Gewichtungen sind auf keinen Fall als Empfehlung zu verstehen. 
</p></div></div><p>Die Beispieldatei <strong>/etc/apt/sources.list</strong> soll hier als Beispiel wie folgt aussehen:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="c">## Offizielle Quellen</span>
<span class="k">deb</span> <span class="s">http://archive.ubuntu.com/ubuntu/</span> <span class="kp">xenial</span> <span class="kp">main</span> <span class="kp">restricted</span> <span class="kp">universe</span> <span class="kp">multiverse</span>
<span class="k">deb-src</span> <span class="s">http://archive.ubuntu.com/ubuntu/</span> <span class="kp">xenial</span> <span class="kp">main</span> <span class="kp">restricted</span> <span class="kp">universe</span> <span class="kp">multiverse</span>
<span class="c">## Inoffizielle Quelle</span>
<span class="k">deb</span> <span class="s">http://peters-ubuntupakete.example.org/ubuntu/</span> <span class="kp">xenial</span> <span class="kp">main</span> <span class="kp">restricted</span> <span class="kp">universe</span> <span class="kp">multiverse</span>
</pre></div>
</td></tr></table></div><div class="section_2"><h3 id="Pinning-per-Release">Pinning per Release<a class="headerlink" href="#Pinning-per-Release">¶</a></h3><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Grundsätzlich definiert eine Leerzeile einen neuen Abschnitt für einen weiteren Eintrag. Leerzeilen zwischen <code class="notranslate">Package</code>, <code class="notranslate">Pin</code> und <code class="notranslate">Pin-Priority</code> sind nicht erlaubt!
</p></div></div><p>
Als Beispiel soll die Datei <strong>/etc/apt/preferences.d/xenial</strong> dienen:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nl">Package</span><span class="p">:</span> <span class="o">*</span>
<span class="nl">Pin</span><span class="p">:</span> <span class="n">release</span> <span class="n">v</span><span class="o">=</span><span class="mf">12.04</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="n">Ubuntu</span>
<span class="n">Pin</span><span class="o">-</span><span class="nl">Priority</span><span class="p">:</span> <span class="mi">1000</span>
</pre></div>
</td></tr></table></div><p>
Von nun an haben alle Pakete aus offiziellen Paketquellen für die Version <a class="internal" href="./16.04.html">16.04</a> und dem Distributionsnamen (Label) <code class="notranslate">Ubuntu</code> Vorrang, selbst wenn es in anderen Quellen neuere Pakete gibt. Eine Formulierung wie "<code class="notranslate">Pin: release a=xenial</code>" hätte nicht ausgereicht, da es ja auch Paketquellen von Ubuntu 16.04 gibt, die <code class="notranslate">xenial-security</code>, <code class="notranslate">xenial-updates</code> etc. heißen. Erst wenn es Pakete dort nicht gibt, werden diese (soweit verfügbar) aus anderen Quellen installiert. Die verschiedenen Parameter für <em>"Pin: release"</em> werden im Abschnitt <a class="crosslink" href="#Parameter-fuer-Pinning-per-Release">Parameter für Pinning per Release</a> weiter unten erläutert.</p></div><div class="section_2"><h3 id="Pinning-nach-Ursprung">Pinning nach Ursprung<a class="headerlink" href="#Pinning-nach-Ursprung">¶</a></h3><p>
Für dieses Beispiel soll die Datei <strong>/etc/apt/preferences.d/peters-ubuntupakete</strong> dienen:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nl">Package</span><span class="p">:</span> <span class="o">*</span>
<span class="nl">Pin</span><span class="p">:</span> <span class="n">origin</span> <span class="n">peters</span><span class="o">-</span><span class="n">ubuntupakete</span><span class="p">.</span><span class="n">example</span><span class="p">.</span><span class="n">org</span>
<span class="n">Pin</span><span class="o">-</span><span class="nl">Priority</span><span class="p">:</span> <span class="mi">300</span>
</pre></div>
</td></tr></table></div><p>
Dieser Fall setzt die Priorität für eine bestimmte Internetadresse ("<code class="notranslate">origin</code>"). Die genaue Bedeutung der <em>"Pin-Priority"</em> wird im Abschnitt <a class="crosslink" href="#Werte-fuer-Pin-Priority">Werte für Pin-Priority</a> weiter unten erläutert.</p></div><div class="section_2"><h3 id="Pinning-per-Version">Pinning per Version<a class="headerlink" href="#Pinning-per-Version">¶</a></h3><p>
Der Dateiname für eine bestimmte Programmversion lautet z.B. <strong>/etc/apt/preferences.d/hello</strong>:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nl">Package</span><span class="p">:</span> <span class="n">hello</span>
<span class="nl">Pin</span><span class="p">:</span> <span class="n">version</span> <span class="mf">2.1.1</span><span class="o">*</span>
<span class="n">Pin</span><span class="o">-</span><span class="nl">Priority</span><span class="p">:</span> <span class="mi">1000</span>
</pre></div>
</td></tr></table></div><p>
Dieses Beispiel verhindert die Installation des Paketes <strong>hello</strong> in einer neueren Version als 2.1.1, aber auch die unbeabsichtigte „automatische“ Deinstallation aufgrund von Konflikten.</p></div><div class="section_2"><h3 id="Parameter-fuer-Pinning-per-Release">Parameter für Pinning per Release<a class="headerlink" href="#Parameter-fuer-Pinning-per-Release">¶</a></h3><p>
Folgende Parameter können für das Pinnen mittels <em>release</em> verwendet werden:</p><ul><li><p><strong>a (archive)</strong> - Der Name eines Repositories, z.B. <em>xenial</em> oder <em>xenial-backports</em></p></li><li><p><strong>c (components)</strong> - Der Bereich eines Repositories, z.B. <em>universe</em></p></li><li><p><strong>v (version)</strong> - Version des Repositories bzw. der Veröffentlichung, z.B. <em>16.04</em> für xenial</p></li><li><p><strong>o (origin)</strong> -  Die <em>Erzeuger</em> des Repositories z.B. <em>Ubuntu</em> oder <em>LP-PPA-eclipse-team</em>. Nicht zu Verwechseln mit <em>origin</em> als Quelle (Domainname). </p></li><li><p><strong>l (label)</strong> - Name der Distribution, z.B. <em>Ubuntu</em></p></li></ul><p>
Die genauen Werte können mittels des Befehls <code class="notranslate">apt-cache policy</code> nachgeschlagen werden. Hier ein Ausschnitt aus der Ausgabe dieses Kommandos:</p><pre class="notranslate">  25 http://packages.medibuntu.org xenial/free Packages
     release v=12.04,o=Medibuntu,a=xenial,l=Medibuntu,c=free
     origin packages.medibuntu.org
 500 http://de.archive.ubuntu.com xenial/main Packages
     release v=12.04,o=Ubuntu,a=xenial,l=Ubuntu,c=main
     origin de.archive.ubuntu.com
  50 http://ppa.launchpad.net xenial/main Packages
     release v=12.04,o=LP-PPA-eclipse-team,a=xenial,l=Ubuntu,c=main
     origin ppa.launchpad.net</pre><p>
Die Werte aus den release-Zeilen können ganz oder teilweise zum Pinning übernommen werden.</p></div><div class="section_2"><h3 id="Werte-fuer-Pin-Priority">Werte für Pin-Priority<a class="headerlink" href="#Werte-fuer-Pin-Priority">¶</a></h3><p>
Die Werte für "<em>Pin-Priority</em>" in der Datei <strong>/etc/apt/preferences</strong> müssen positive oder negative ganze Zahlen sein. Sie werden wie folgt interpretiert:</p><ul><li><p><strong>größer 999</strong>: Version wird in jedem Fall installiert, auch wenn das einen Downgrade des Paketes nach sich zieht</p></li><li><p><strong>von 990 bis 999</strong> - Version wird installiert, auch wenn sie nicht zum Release gehört, es sei denn ein aktuelleres Pakete ist bereits installiert</p></li><li><p><strong>von 500 bis 989</strong> - Version wird installiert, es sei denn, es gibt eine Version, die zum Release gehört oder eine aktuellere Version ist bereits installiert</p></li><li><p><strong>von 100 bis 499</strong> - Version wird installiert, es sei denn, es gibt eine aktuellere die nicht zum Release gehört oder die bereits installierte Version ist aktueller</p></li><li><p><strong>von 1 bis 99</strong> - Version wird nur dann installiert, wenn es keine bereits installierte gibt</p></li><li><p><strong>negativer Wert</strong> - Version wird nicht installiert</p></li></ul><p>
Das Paket mit der höchsten Punktzahl wird immer bevorzugt.</p><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Ausführlichere Informationen hierzu findet man in der <a class="internal" href="./man.html">Manpage</a> von <code class="notranslate">apt_preferences</code> oder im <a class="external" href="http://www.debian.org/doc/manuals/apt-howto/ch-apt-get.en.html#s-pin" rel="nofollow">APT HOWTO</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.
</p></div></div></div><div class="section_2"><h3 id="Gezielte-Umgehung-mit-apt-get">Gezielte Umgehung mit apt-get<a class="headerlink" href="#Gezielte-Umgehung-mit-apt-get">¶</a></h3><p>
Im Terminal <sup><a href="#source-2">[2]</a></sup> kann man mit <a class="internal" href="./apt-get.html">apt-get</a> gesetzte Prioritäten aber auch gezielt umgehen. Folgender Aufruf installiert z.B. das Programm <a class="internal" href="./mplayer.html">MPlayer</a> aus dem Paketbereich <code class="notranslate">xenial</code> (Ubuntu 16.04). Dabei werden Abhängigkeiten nach der Priorität erfüllt.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get -t xenial install mplayer-custom </pre></div></div></div></div><div class="section_1"><h2 id="Beispiele">Beispiele<a class="headerlink" href="#Beispiele">¶</a></h2><p>
</p><div class="section_2"><h3 id="Von-proposed-Quellen-downgraden">Von proposed-Quellen downgraden<a class="headerlink" href="#Von-proposed-Quellen-downgraden">¶</a></h3><p>
Mit Pinning gibt es eine vergleichsweise einfache Möglichkeit, ungewollte Upgrades auf Pakete aus den <em>proposed</em>-Quellen rückgängig zu machen, sprich auf die herkömmlichen und i.d.R. gut getesteten Pakete bzgl. Installationsroutine und Systemintegration downzugraden. Zuerst deaktiviert man die <code class="notranslate">proposed</code>-Quellen <sup><a href="#source-3">[3]</a></sup> und aktualisiert die Paketindexdateien. Dann legt man die Datei <strong>/etc/apt/preferences/no-proposed</strong> an:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nl">Package</span><span class="p">:</span> <span class="o">*</span>
<span class="nl">Pin</span><span class="p">:</span> <span class="n">release</span> <span class="n">a</span><span class="o">=</span><span class="n">ARCHIV</span><span class="o">*</span>
<span class="n">Pin</span><span class="o">-</span><span class="nl">Priority</span><span class="p">:</span> <span class="mi">1001</span>
</pre></div>
</td></tr></table></div><p>
Dabei ist <code class="notranslate">ARCHIV</code> durch den Codenamen der jeweiligen Ubuntu-Version zu ersetzen. Codenamen sind beispielsweise <code class="notranslate">trusty</code>, <code class="notranslate">xenial</code> usw. Nach dem Codenamen sollte ein Stern <code class="notranslate">*</code> gesetzt werden, damit auch Pakete aus den Quellen <code class="notranslate">ARCHIV-updates</code> und <code class="notranslate">ARCHIV-security</code> berücksichtigt werden.</p><p>Anschließend kann ein Upgrade bzw. Downgrade der Pakete durchgeführt werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get dist-upgrade </pre></div></div><p>
Nachdem die Paketversionen korrigiert wurden, sollte die Pinning-Datei wieder entfernt werden, damit irgendwann in Zukunft ein <a class="internal" href="./upgrade.html">Upgrade</a> auf eine neuere Ubuntu-Version ohne Probleme möglich ist.</p></div><div class="section_2"><h3 id="Einzelne-Pakete-aus-aelterer-neuerer-Ubuntu-Version-installieren">Einzelne Pakete aus älterer/neuerer Ubuntu-Version installieren<a class="headerlink" href="#Einzelne-Pakete-aus-aelterer-neuerer-Ubuntu-Version-installieren">¶</a></h3><p>
Mitunter möchte man eine aktuellere Version eines Pakets aus der nächsten Ubuntu-Version nutzen, ist aber nicht bereit, ein komplettes Upgrade zu machen. Oder aber man hat ein Upgrade hinter sich, die neue Version eines Programms macht jedoch Probleme und man würde lieber für dieses eine Paket zur früheren Version zurückkehren. Die Methode mit Apt-Pinning entspricht im Prinzip dem manuellen Herunterladen und Installieren der entsprechenden Pakete von <code class="notranslate">http://packages.ubuntu.com</code>, ist aber deutlich bequemer, besonders wenn verschiedene Abhängigkeiten ebenfalls einen Up- bzw. Downgrade erfordern.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Die Verwendung von Paketen aus anderen Ubuntu-Versionen kann im Einzelfall eine pragmatische Lösung sein, in der Regel ist aber davon abzuraten. Besonders bei einer großen Zahl an Abhängigkeiten sind Probleme vorprogrammiert.
</p></div></div><p>Beispiel: Das Paket <strong>subversion</strong> (siehe <a class="internal" href="./svn.html">Svn</a>) liegt für <a class="internal" href="./xenial.html">Ubuntu 16.04</a> ("<code class="notranslate">xenial</code>") in der Version 1.6.17 und für <a class="internal" href="./zesty.html">Ubuntu 17.04.10</a> ("<code class="notranslate">zesty</code>") in der Version 1.7.5 vor. Nach einem Upgrade auf Ubuntu 17.04 möchte man zur Version 1.6 des Pakets zurückkehren. Dazu fügt man den <a class="internal" href="./sources.list.html">Paketquellen</a> folgende Zeile hinzu <sup><a href="#source-3">[3]</a></sup>:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="k">deb</span> <span class="s">http://archive.ubuntu.com/ubuntu</span> <span class="kp">xenial</span> <span class="kp">main</span>
<span class="k">deb-src</span> <span class="s">http://archive.ubuntu.com/</span> <span class="kp">xenial</span> <span class="kp">main</span>
<span class="k">deb</span> <span class="s">http://archive.ubuntu.com/</span> <span class="kp">xenial-updates</span> <span class="kp">main</span>
<span class="k">deb</span> <span class="s">http://archive.ubuntu.com/</span> <span class="kp">xenial-security</span> <span class="kp">main</span>
</pre></div>
</td></tr></table></div><p>Nun wird in der Datei <strong>/etc/apt/preferences</strong> folgender Inhalt ergänzt (bzw. die Datei neu angelegt):
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nl">Package</span><span class="p">:</span> <span class="n">subversion</span>
<span class="nl">Pin</span><span class="p">:</span> <span class="n">version</span> <span class="mf">1.6</span><span class="o">*</span>
<span class="n">Pin</span><span class="o">-</span><span class="nl">Priority</span><span class="p">:</span> <span class="mi">1001</span>

<span class="nl">Package</span><span class="p">:</span> <span class="o">*</span>
<span class="nl">Pin</span><span class="p">:</span> <span class="n">release</span> <span class="n">v</span><span class="o">=</span><span class="mf">16.04</span><span class="p">,</span> <span class="n">l</span><span class="o">=</span><span class="n">Ubuntu</span>
<span class="n">Pin</span><span class="o">-</span><span class="nl">Priority</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
</pre></div>
</td></tr></table></div><p>Nun kann nach Aktualisieren der Paketlisten mit <a class="internal" href="./apt/apt-get.html#apt-get-update">apt-get update</a> das Paket <strong>subversion</strong> aus den Quellen von Ubuntu 16.04 installiert werden <sup><a href="#source-4">[4]</a></sup>. Wurde es bereits installiert, wird mit <a class="internal" href="./apt/apt-get.html#apt-get-dist-upgrade">apt-get dist-upgrade</a> automatisch die ältere Version installiert.</p><p>Unter Umständen müssen je nach Komplexität der Abhängigkeiten noch weitere Pinning-Einträge hinzugefügt werden.</p></div><div class="section_2"><h3 id="Einzelne-Pakete-aus-einem-Sammel-PPA-installieren">Einzelne Pakete aus einem Sammel-PPA installieren<a class="headerlink" href="#Einzelne-Pakete-aus-einem-Sammel-PPA-installieren">¶</a></h3><p>
Bei der Verwendung eines <a class="internal" href="./paketquellen_freischalten/ppa.html">Personal Packages Archiv</a> (PPA) tritt immer wieder das Problem auf, dass nach dem Einbinden und Aktualisieren nicht nur das gewünschte Programm, sondern - je nach PPA - eine ganze Reihe weiterer Programme in den Paketquellen auftaucht, die u.U. mit den Versionen aus den offiziellen Paketquellen kollidieren können. Die Nutzung dieser Sammel-PPAs kann deutlich vereinfacht werden, in dem man nur das oder die gewünschten Pakete aus einem PPA zulässt (und allen anderen blockiert). Zwingende Voraussetzung: das Paket hat keine speziellen Abhängigkeiten, die ebenfalls aus dem PPA stammen müssen.</p><p>Dazu legt man - vor dem Installieren des Pakets - eine Datei <strong>/etc/apt/preferences.d/LP-BENUTZER-PPA-NAME</strong> mit Root-Rechten und folgendem Inhalt an (<code class="notranslate">LP-BENUTZER-PPA-NAME</code> und Paketnamen bitte anpassen):</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nl">Package</span><span class="p">:</span> <span class="o">*</span>
<span class="nl">Pin</span><span class="p">:</span> <span class="n">release</span> <span class="n">o</span><span class="o">=</span><span class="n">LP</span><span class="o">-</span><span class="n">PPA</span><span class="o">-</span><span class="n">LP</span><span class="o">-</span><span class="n">BENUTZER</span><span class="o">-</span><span class="n">PPA</span><span class="o">-</span><span class="n">NAME</span>
<span class="n">Pin</span><span class="o">-</span><span class="nl">Priority</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>

<span class="nl">Package</span><span class="p">:</span> <span class="n">foo</span>
<span class="nl">Pin</span><span class="p">:</span> <span class="n">release</span> <span class="n">o</span><span class="o">=</span><span class="n">LP</span><span class="o">-</span><span class="n">PPA</span><span class="o">-</span><span class="n">LP</span><span class="o">-</span><span class="n">BENUTZER</span><span class="o">-</span><span class="n">PPA</span><span class="o">-</span><span class="n">NAME</span>
<span class="n">Pin</span><span class="o">-</span><span class="nl">Priority</span><span class="p">:</span> <span class="mi">500</span>

<span class="nl">Package</span><span class="p">:</span> <span class="n">bar</span>
<span class="nl">Pin</span><span class="p">:</span> <span class="n">release</span> <span class="n">o</span><span class="o">=</span><span class="n">LP</span><span class="o">-</span><span class="n">PPA</span><span class="o">-</span><span class="n">LP</span><span class="o">-</span><span class="n">BENUTZER</span><span class="o">-</span><span class="n">PPA</span><span class="o">-</span><span class="n">NAME</span>
<span class="n">Pin</span><span class="o">-</span><span class="nl">Priority</span><span class="p">:</span> <span class="mi">500</span>
</pre></div>
</td></tr></table></div><p>
Während der erste Abschnitt die Nutzung des PPAs praktisch untersagt, gilt dies nicht für die gewünschten Pakete <strong>foo</strong> und <strong>bar</strong>.</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="interwiki interwiki-ubuntu_doc" href="https://help.ubuntu.com/community/PinningHowto">PinningHowto</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="internal" href="./apt.html">apt</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsseite zum Paketmanagement mit APT</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./apt-pinning/a/revision/941044.html">Diese Revision</a> wurde am 11. Mai 2017 07:59 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./apt-pinning.html">Apt-Pinning</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>