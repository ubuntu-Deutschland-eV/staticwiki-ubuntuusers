<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>LiveCD_manuell_remastern › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./livecd_manuell_remastern.html">LiveCD manuell remastern</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/LiveCD_manuell_remastern">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./livecd_manuell_remastern/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./livecd_manuell_remastern/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./livecd_manuell_remastern/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./livecd_manuell_remastern/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./livecd_manuell_remastern/a/backlinks.html">LiveCD manuell remastern</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./mount.html">CDs oder CD-Images mounten</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Systemvoraussetzungen">Systemvoraussetzungen
</a></li><li><a class="crosslink" href="#Vorbereitung">Vorbereitung
</a><ol class="arabic"><li><a class="crosslink" href="#Vorbereiten-der-Umgebung">Vorbereiten der Umgebung
</a></li><li><a class="crosslink" href="#Platz-schaffen">Platz schaffen
</a></li><li><a class="crosslink" href="#Live-System-mounten">Live-System mounten
</a></li><li><a class="crosslink" href="#Live-System-umsiedeln">Live-System umsiedeln
</a></li></ol></li><li><a class="crosslink" href="#Bearbeiten-des-Live-Systems">Bearbeiten des Live-Systems
</a><ol class="arabic"><li><a class="crosslink" href="#Zugriff-auf-das-Live-System">Zugriff auf das Live-System
</a></li><li><a class="crosslink" href="#Bearbeiten-des-Live-Systems-2">Bearbeiten des Live-Systems
</a></li><li><a class="crosslink" href="#Bearbeiten-der-installierten-Pakete">Bearbeiten der installierten Pakete
</a></li><li><a class="crosslink" href="#Bearbeiten-der-Oberflaeche-GNOME">Bearbeiten der Oberfläche (GNOME)
</a></li><li><a class="crosslink" href="#Abschliessen-der-Modifikationen">Abschließen der Modifikationen
</a></li><li><a class="crosslink" href="#Komprimieren-des-Live-Systems">Komprimieren des Live-Systems
</a></li><li><a class="crosslink" href="#Erstellen-der-Live-CD">Erstellen der Live-CD
</a></li></ol></li></ol></div><p>Bei der Verwendung der Ubuntu Live-CD kann es vorkommen, dass man dort ganz bestimmte Funktionen oder Einstellungen vermisst (installierter <a class="internal" href="./ssh.html">Openssh-Server</a>, standardmäßig aktivierter <a class="internal" href="./vnc.html">VNC-Server</a>, usw.). Um dem Abhilfe zu verschaffen, ist es möglich, die Live-CD per Hand anzupassen. Die hierzu nötigen Schritte sollen im Verlauf dieser Anleitung erklärt werden.</p><div class="section_1"><h2 id="Systemvoraussetzungen">Systemvoraussetzungen<a class="headerlink" href="#Systemvoraussetzungen">¶</a></h2><p>
Das Remastern von Live-CDs erfordert, dass zeitweise mehrere unkomprimierte Kopien der Ausgangs-CD auf der Festplatte existieren. Deshalb sollte man dafür sorgen, dass  zumindest 3-5 Gigabyte Festplattenplatz sowie mindestens 512 Megabyte Arbeits- und Auslagerungsspeicher zur Verfügung stehen.</p><p>Des Weiteren müssen die folgenden Pakete auf dem System installiert <sup><a href="#source-1">[1]</a></sup> werden: 
</p><ul><li><p><strong>squashfs-tools</strong></p></li><li><p><strong>genisoimage</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install squashfs-tools genisoimage </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install squashfs-tools genisoimage </pre></div></div><p>
</p></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Es bietet sich außerdem an, eine  <a class="internal" href="./virtualisierung.html">Virtualisierungsumgebung</a> zu installieren, um das später erstellte CD-Image zu testen. So spart man Zeit und CD-Rohlinge. 
</p></div></div><p>
<img alt="remastered.jpg" class="image-right" src="./_/fd0020539015622b40ce100a41c20b374b442325.png"/>
</p></div><div class="section_1"><h2 id="Vorbereitung">Vorbereitung<a class="headerlink" href="#Vorbereitung">¶</a></h2><p>
Die folgenden Schritte sind so gefasst, dass man die einzelnen Befehle weitgehend per "Copy&amp;Paste" verwenden kann. Dennoch sollte man sich der Funktion der jeweiligen Befehle bewusst sein.</p><div class="section_2"><h3 id="Vorbereiten-der-Umgebung">Vorbereiten der Umgebung<a class="headerlink" href="#Vorbereiten-der-Umgebung">¶</a></h3><p>
Für das Remastern ist eine existierende Live-CD oder ein entsprechendes Image notwendig. Je nach Umgebung muss ein Image manuell eingehängt werden <sup><a href="#source-3">[3]</a></sup>.</p><p>Zunächst werden neue Umgebungsvariablen definiert. Sie enthalten Arbeitspfad und Quellpfad für die folgenden Schritte und müssen entsprechend angepasst werden. Die Variable <code class="notranslate">SOURCE</code> sollte dabei auf den Mountpoint der Ausgangsdaten zeigen, <code class="notranslate">WORK</code> definiert ein neues Verzeichnis für die eigentlichen Arbeitsschritte, welches direkt angelegt wird.</p><div class="bash"><div class="contents"><pre class="notranslate">export SOURCE="/media/cdrom0"
export WORK="~/remastern"
mkdir -p "${WORK}" </pre></div></div><p>Anschließend lässt sich der Inhalt des Installationsmediums wie folgt in das Arbeitsverzeichnis kopieren:</p><div class="bash"><div class="contents"><pre class="notranslate">cd "${WORK}"
mkdir ubuntu-livecd
cp -a "${SOURCE}/." ubuntu-livecd
sudo chmod -R u+w ubuntu-livecd </pre></div></div></div><div class="section_2"><h3 id="Platz-schaffen">Platz schaffen<a class="headerlink" href="#Platz-schaffen">¶</a></h3><p>
Bei einigen Ubuntudistributionen existieren zusätzliche Dateien, die nur für Windowsanwender von Interesse sind. Um Platz für weitere Pakete zu gewinnen, lassen sich diese Dateien entfernen.</p><p>Eine Möglichkeit Windowsdateien zu finden ist:</p><div class="bash"><div class="contents"><pre class="notranslate">find "${WORK}/ubuntu-livecd" -name "*.exe" </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Falls gewünscht wird, zusätzliche oder veränderte Inhalte für Windowsnutzer (anderer Autostart/Programme) zu hinterlegen, ist jetzt eine gute Gelegenheit. Im Live-CD Modus sind diese Inhalte allerdings nicht standardmäßig verfügbar.
</p></div></div></div><div class="section_2"><h3 id="Live-System-mounten">Live-System mounten<a class="headerlink" href="#Live-System-mounten">¶</a></h3><p>
Das Dateisystem der Live-CD befindet sich komprimiert in der Datei <strong>${WORK}/ubuntu-livecd/casper/filesystem.squashfs</strong> und wird beim Start von CD entpackt. Um Zugriff auf die Systemdateien zu erhalten, muss es entsprechend gemountet werden.</p><div class="bash"><div class="contents"><pre class="notranslate">mkdir "${WORK}/old"
sudo mount -t squashfs -o loop,ro "${WORK}/ubuntu-livecd/casper/filesystem.squashfs" "${WORK}/old" </pre></div></div></div><div class="section_2"><h3 id="Live-System-umsiedeln">Live-System umsiedeln<a class="headerlink" href="#Live-System-umsiedeln">¶</a></h3><p>
Das gemountete Live-System kann bisher nicht manipuliert werden, dazu ist eine schreibfähige Umgebung notwendig. Das originale Dateisystem nimmt ungefähr 2-2,5 GByte dekomprimierten Platz ein. Mit:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo dd if=/dev/zero of="${WORK}/ubuntu-fs.ext2" bs=1M count=3000
sudo mke2fs "${WORK}/ubuntu-fs.ext2" </pre></div></div><p>wird eine neue 3 GByte große Datei als zukünftige Heimat des Dateisystems angelegt und formatiert. Der Hinweis, dass es sich beim Ziel um kein reelles Blockgerät handelt, kann ignoriert werden. Möchte man mehrere Programme hinzufügen, sind 3 GByte Platz sehr knapp, zumal durch die Komprimierung deutlich größere Dateisysteme auf eine DVD passen. Hier sind Werte von 5 und mehr GByte - entsprechend einem "count=5000" - realistischer.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Will man weitere Pakete installieren, empfiehlt es sich zusätzlichen Speicherplatz einzuplanen. Sofern im Ausgleich keine weiteren Pakete gelöscht werden, erfordert dies ggf. allerdings ein größeres Installationsmedium, als eine DVD.
</p></div></div><p>Im Anschluss wird die neue Partition eingebunden und mit den Daten der Live-CD besiedelt.</p><div class="bash"><div class="contents"><pre class="notranslate">mkdir "${WORK}/new"
sudo mount -o loop "${WORK}/ubuntu-fs.ext2" "${WORK}/new"
sudo cp -a "${WORK}/old/." "${WORK}/new" </pre></div></div><p>Danach kann das ursprüngliche Dateisystem wieder entbunden werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo umount "${WORK}/old" </pre></div></div></div></div><div class="section_1"><h2 id="Bearbeiten-des-Live-Systems">Bearbeiten des Live-Systems<a class="headerlink" href="#Bearbeiten-des-Live-Systems">¶</a></h2><p>
</p><div class="section_2"><h3 id="Zugriff-auf-das-Live-System">Zugriff auf das Live-System<a class="headerlink" href="#Zugriff-auf-das-Live-System">¶</a></h3><p>
Damit während der Bearbeitung des neuen Live-Systems alle nötigen Funktionen zur Verfügung stehen, bedarf es wieder einiger kleiner Vorbereitungen.</p><p>Zuerst wird eine aktuelle Version der Datei <strong>/etc/resolv.conf</strong> im Live-System hinterlegt. Dies stellt sicher, dass Domainnamen auch innerhalb des Live-Systems aufgelöst werden können. Dieser Schritt ist auch notwendig, wenn keine Netzwerkverbindung besteht!</p><div class="bash"><div class="contents"><pre class="notranslate">sudo cp /etc/resolv.conf "${WORK}/new/etc/" </pre></div></div><p>Damit Programme innerhalb des Live-Systems störungsfrei betrieben werden können, muss weiterhin <strong>/proc</strong> Informationen über den Kernel- und Prozesszustände liefern können.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount -t proc -o bind /proc "${WORK}/new/proc" </pre></div></div><p>Werden zur Ausführung innerhalb des Live-Systems weitere tty benötigt, sind diese ebenfalls zu binden.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount -o bind /dev/pts "${WORK}/new/dev/pts" </pre></div></div><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Ggf. sollen dem Live-System Nutzer zusätzliche Dokumente zur Verfügung stehen. Beim Starten der Live-CD wird für den Nutzer ein Verzeichnis <strong>/home/ubuntu</strong> angelegt, das sich gut eignet zusätzliche Dokumente zu hinterlegen. Will man zB. ein Dokument auf dem Desktop des Live-CD Nutzers hinterlegen, erstellt man im Voraus das Verzeichnis <strong>${WORK}/new/home/ubuntu/Desktop</strong> und hinterlegt dort entsprechend die Datei(en). Um wie gewohnt mit den Dateien arbeiten zu können, empfielt es sich die Dateien per chown dem Live-System-Nutzer zuzuordnen.
</p></div></div><p>Jetzt kann das Live-System als neues Rootsystem verwendet werden</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chroot "${WORK}/new" /bin/bash </pre></div></div></div><div class="section_2"><h3 id="Bearbeiten-des-Live-Systems-2">Bearbeiten des Live-Systems<a class="headerlink" href="#Bearbeiten-des-Live-Systems-2">¶</a></h3><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Innerhalb der aktuellen chroot-Umgebung werden alle Änderungen relativ zum Wurzelverzeichnis des zukünftigen Livesystems ausgeführt. Das bedeutet insbesondere, dass nur bereits auf dem Livesystem vorhandene Programme und Einstellungen sichtbar sind.
</p></div></div></div><div class="section_2"><h3 id="Bearbeiten-der-installierten-Pakete">Bearbeiten der installierten Pakete<a class="headerlink" href="#Bearbeiten-der-installierten-Pakete">¶</a></h3><p>
Um Platz zu schaffen oder neue Funktionalitäten zur Verfügung zu stellen, kann die normale Paketverwaltung auf Konsolenebene verwendet werden, z.B. per <a class="internal" href="./apt-get.html">apt-get</a>. Eventuell sollen Pakete aus anderen Quellen installiert werden, hierzu kann die entsprechende Quelle in die Datei <a class="internal" href="./sources.list.html">sources.list</a> eingetragen werden.</p></div><div class="section_2"><h3 id="Bearbeiten-der-Oberflaeche-GNOME">Bearbeiten der Oberfläche (GNOME)<a class="headerlink" href="#Bearbeiten-der-Oberflaeche-GNOME">¶</a></h3><p>
Um eigene Einstellungen an der Oberfläche GNOME vorzunehmen, existiert das Kommandozeilentool <strong>gconftool-2</strong>. Eine Beschreibung aller Möglichkeiten dieses Tools wäre zu umfangreich. Einen Überblick bietet die zugehörige <a class="internal" href="./man.html">Manpage</a>. Im Folgenden werden nur einige Beispiele vorgestellt.</p><div class="section_3"><h4 id="Setzen-eines-eigenen-Wallpapers">Setzen eines eigenen Wallpapers<a class="headerlink" href="#Setzen-eines-eigenen-Wallpapers">¶</a></h4><p>
Das neue Wallpaper sollte außerhalb der chroot-Umgebung in das Verzeichnis <strong>${WORK}/new/usr/share/backgrounds</strong> kopiert werden, danach lässt sich das Wallpaper per:</p><div class="bash"><div class="contents"><pre class="notranslate">gconftool-2 \
    --direct \
    --config-source xml:readwrite:/etc/gconf/gconf.xml.defaults \
    --type=string \
    --set /desktop/gnome/background/picture_filename /usr/share/backgrounds/DATEINAME </pre></div></div><p>
setzen.</p></div><div class="section_3"><h4 id="Eine-andere-Systemschrift-einstellen">Eine andere Systemschrift einstellen<a class="headerlink" href="#Eine-andere-Systemschrift-einstellen">¶</a></h4><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">gconftool-2 \
    --direct \
    --config-source xml:readwrite:/etc/gconf/gconf.xml.defaults \
    --type=string --set /desktop/gnome/interface/font_name "FONTNAME FONTGROESSE" </pre></div></div></div><div class="section_3"><h4 id="Eine-andere-Standardanwendung-festlegen">Eine andere Standardanwendung festlegen<a class="headerlink" href="#Eine-andere-Standardanwendung-festlegen">¶</a></h4><p>
Leider unterstützt gconftool-2 noch nicht das Ändern von Standardanwendungen. Eine Anpassung ist aber leicht durch die Bearbeitung der Datei <strong>/etc/gnome/defaults.list</strong> möglich.</p></div></div><div class="section_2"><h3 id="Abschliessen-der-Modifikationen">Abschließen der Modifikationen<a class="headerlink" href="#Abschliessen-der-Modifikationen">¶</a></h3><p>
Wurden alle gewünschten Änderungen vorgenommen, ist es Zeit die Umgebung des Live-Systems wieder zu verlassen. Mit:</p><div class="bash"><div class="contents"><pre class="notranslate">exit
sudo umount "${WORK}/new/proc"
sudo umount "${WORK}/new/dev/pts"
sudo rm "${WORK}/new/etc/resolv.conf" </pre></div></div><p>wird die chroot-Umgebung verlassen und die induzierten Mountpoints und Netzwerkkonfigurationen werden entfernt.</p><p>Weiterhin ist es notwendig die vorgenommenen Änderungen im Live-System zu registrieren. Der Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chroot "${WORK}/new" dpkg-query -W --showformat='${Package} ${Version}\n' \
    &gt; "${WORK}/ubuntu-livecd/casper/filesystem.manifest" </pre></div></div><p>wechselt noch einmal kurzzeitig in die Umgebung des Live-Systems, um Änderungen innerhalb der Paketverwaltung zu aktualisieren.</p></div><div class="section_2"><h3 id="Komprimieren-des-Live-Systems">Komprimieren des Live-Systems<a class="headerlink" href="#Komprimieren-des-Live-Systems">¶</a></h3><p>
Unabhängig davon, wie viele Dateien während der Bearbeitung gelöscht wurden, existieren deren Daten noch immer im virtuellen Dateisystem und müssten beim Komprimieren mit erfasst werden. Deshalb werden im Folgenden die freigegebenen Bereiche im Dateisystem mit einer Datei voller Nullwerte überschrieben und im Anschluss gelöscht.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo dd if=/dev/zero of="${WORK}/new/dummyfile"
sudo rm "${WORK}/new/dummyfile" </pre></div></div><p>Danach lassen sich das Live-System komprimieren und die restlichen Mountpoints lösen. Das kann eine Weile dauern.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Seit Natty (11.04) ist in den <strong>squashfs-tools</strong> die Unterstützung für die sehr wirkungsvollen LZMA-Komprimierung enthalten. Zur Nutzung dessen muss man am Ende der 3. Zeile des folgenden Befehlsblocks nur <code class="notranslate">-comp xz</code> anfügen.
</p></div></div><div class="bash"><div class="contents"><pre class="notranslate">sudo rm "${WORK}/ubuntu-livecd/casper/filesystem.squashfs"
cd "${WORK}/new"
sudo mksquashfs . "${WORK}/ubuntu-livecd/casper/filesystem.squashfs"
cd "${WORK}"
sudo umount "${WORK}/new" </pre></div></div></div><div class="section_2"><h3 id="Erstellen-der-Live-CD">Erstellen der Live-CD<a class="headerlink" href="#Erstellen-der-Live-CD">¶</a></h3><p>
Damit die Fehlerprüfung der Live-CD funktioniert, erstellen wir noch einen neuen Hashwert. Danach sollten keine weiteren Änderungen an der CD vorgenommen werden!</p><div class="bash"><div class="contents"><pre class="notranslate">cd "${WORK}/ubuntu-livecd"
sudo find . -type f -print0 |xargs -0 md5sum |sudo tee md5sum.txt </pre></div></div><p>Schließlich beenden wir den Remastering-Prozess durch das Erstellen eines neuen CD-Images:</p><div class="bash"><div class="contents"><pre class="notranslate">cd "${WORK}"
sudo genisoimage \
    -o ubuntu-new.iso \
    -b isolinux/isolinux.bin \
    -c isolinux/boot.cat \
    -no-emul-boot \
    -boot-load-size 4 \
    -boot-info-table \
    -r \
    -V "Custom Ubuntu Live CD" \
    -cache-inodes  \
    -J \
    -l \
    ubuntu-livecd </pre></div></div><p></p></div></div></div>
<p class="meta">
<a href="./livecd_manuell_remastern/a/revision/938932.html">Diese Revision</a> wurde am 3. Mai 2017 17:46 von <a href="https://ubuntuusers.de/user/tomtomtom/">tomtomtom</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./livecd_manuell_remastern.html">LiveCD manuell remastern</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>