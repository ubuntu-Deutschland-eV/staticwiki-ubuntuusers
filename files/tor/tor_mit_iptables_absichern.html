<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Tor/Tor_mit_iptables_absichern › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../tor/tor_mit_iptables_absichern.html">Tor mit iptables absichern</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Tor/Tor_mit_iptables_absichern">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../tor/tor_mit_iptables_absichern/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../tor/tor_mit_iptables_absichern/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../tor/tor_mit_iptables_absichern/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../tor/tor_mit_iptables_absichern/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../tor/tor_mit_iptables_absichern/a/backlinks.html">Tor mit iptables absichern</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><p>
</p><div class="box advanced"><h3 class="box advanced">Artikel für fortgeschrittene Anwender</h3><div class="contents"><p>
Dieser Artikel erfordert mehr Erfahrung im Umgang mit
Linux und ist daher nur für fortgeschrittene Benutzer
gedacht.
</p></div></div><p>Wenn man <a class="internal" href="../tor.html">Tor</a> eingerichtet hat und die Regeln zum <a class="internal" href="../sicherheit/anonym_surfen.html">anonymen Surfen</a> beachtet, ist man ja eigentlich schon auf der sicheren Seite. Man könnte aber versehentlich Tor im Browser ausschalten, oder auch eine andere Anwendung, die aufs Internet zugreift, verwenden und so eine ungewollte Verbindung außerhalb von Tor starten. Auch Bugs in Firefox sind nicht ausgeschlossen. Diese Situation kann man verbessern, indem man mit einigen Firewall-Regeln ausgehende Verbindungen nur über Tor zulässt.</p><div class="section_1"><h2 id="Voraussetzung">Voraussetzung<a class="headerlink" href="#Voraussetzung">¶</a></h2><p>
<a class="internal" href="../iptables.html">iptables</a> ist üblicherweise in der Standardinstallation von Ubuntu enthalten. Ansonsten kann das entsprechende Paket</p><ul><li><p><strong>iptables</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install iptables </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install iptables </pre></div></div><p>
</p></div></div><p>nachinstalliert werden.</p></div><div class="section_1"><h2 id="Einrichtung">Einrichtung<a class="headerlink" href="#Einrichtung">¶</a></h2><p>
In einem Terminal wendet man folgende Schritte nacheinander an.</p><div class="section_2"><h3 id="Default-Regeln-sichern">Default Regeln sichern<a class="headerlink" href="#Default-Regeln-sichern">¶</a></h3><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo iptables-save &gt; /Pfad/zu/iptables_default </pre></div></div></div><div class="section_2"><h3 id="Neue-Regeln-festlegen">Neue Regeln festlegen<a class="headerlink" href="#Neue-Regeln-festlegen">¶</a></h3><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Neue Regeln gelten sofort! Man sollte lokal am Rechner angemeldet sein, da sonst die Remote-Verbindung beendet wird.
</p></div></div><p>Bestehende Regeln für <code class="notranslate">OUTPUT</code> löschen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo iptables -F OUTPUT </pre></div></div><p>Ausgehende Verbindungen für den Nutzer <code class="notranslate">debian-tor</code> zulassen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo iptables -A OUTPUT -j ACCEPT -m owner --uid-owner debian-tor </pre></div></div><p><code class="notranslate">localhost</code> kommunizieren lassen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo iptables -A OUTPUT -j ACCEPT -o lo </pre></div></div><p>Synchronisation für <a class="internal" href="../ntp.html">NTP</a> zulassen. (Die IPs der Server müssen verwendet werden, da der Host sonst nicht aufgelöst werden kann):</p><div class="bash"><div class="contents"><pre class="notranslate">sudo iptables -A OUTPUT -j ACCEPT -p udp --dport 123  </pre></div></div><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Eine akkurate Systemzeit ist wichtig bei der Verwendung von Tor. Wird die Systemzeit nicht synchronisiert, kann das die Anonymität gefährden.
</p></div></div><p>Alles, was nicht den oben genannten Filterregeln entspricht, wird ausgeschlossen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo iptables -P OUTPUT DROP </pre></div></div></div><div class="section_2"><h3 id="Neue-Konfiguration-sichern">Neue Konfiguration sichern<a class="headerlink" href="#Neue-Konfiguration-sichern">¶</a></h3><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo iptables-save &gt; /Pfad/zu/iptables_TOR_only </pre></div></div><p>Jetzt kann man bequem zwischen den beiden Konfigurationen hin und her wechseln.</p></div><div class="section_2"><h3 id="Zwischen-den-zwei-Konfigurationen-wechseln">Zwischen den zwei Konfigurationen wechseln<a class="headerlink" href="#Zwischen-den-zwei-Konfigurationen-wechseln">¶</a></h3><p>
</p><div class="section_3"><h4 id="Default-iptables-laden">Default iptables laden<a class="headerlink" href="#Default-iptables-laden">¶</a></h4><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo iptables-restore /Pfad/zu/iptables_default </pre></div></div></div><div class="section_3"><h4 id="Nur-Verbindungen-ueber-Tor-zulassen">Nur Verbindungen über Tor zulassen<a class="headerlink" href="#Nur-Verbindungen-ueber-Tor-zulassen">¶</a></h4><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo iptables-restore /Pfad/zu/iptables_TOR_only </pre></div></div><p>Man könnte jetzt auch zwei Schnellstarter auf ein Panel legen und per Mausklick wechseln.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Diese Konfiguration ist keine transparente Proxy-Konfiguration. Sie dient nur dazu, beim Browsen keine ungewollten Verbindungen außerhalb von Tor zuzulassen. Wie man allen Netzwerkverkehr über Tor routet, kann man hier nachlesen: <a class="external" href="https://trac.torproject.org/projects/tor/wiki/TheOnionRouter/TransparentProxy" rel="nofollow">Transparently Routing Traffic Through Tor</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>
</p></div></div><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Die Filterregeln mit iptables gehen bei jedem Neustart verloren. 
</p></div></div><p>Natürlich könnte man das System auch permanent mit <code class="notranslate">TOR_only</code> iptables starten lassen.</p></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><div class="section_2"><h3 id="Intern">Intern<a class="headerlink" href="#Intern">¶</a></h3><p>
</p><ul><li><p><a class="internal" href="../tor.html">Tor</a> <img alt="{Übersicht}" src="../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/></p><ul><li><p><a class="internal" href="../tor/installation.html">Installation</a></p></li><li><p><a class="internal" href="../tor/programme_zur_nutzung_von_tor_konfigurieren.html">Programme zur Nutzung von Tor konfigurieren</a></p></li><li><p><a class="internal" href="../tor/server.html">Server aufsetzen</a></p></li><li><p><a class="internal" href="../tor/gefahren.html">Gefahren bei Tor</a></p></li></ul></li><li><p><a class="internal" href="../sicherheit/anonym_surfen.html">Sicherheit/Anonym surfen</a></p></li></ul><p>
</p></div><div class="section_2"><h3 id="Extern">Extern<a class="headerlink" href="#Extern">¶</a></h3><p>
</p><ul><li><p><a class="external" href="https://torproject.org/" rel="nofollow">Website des Torprojekts</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p><a class="external" href="https://trac.torproject.org/projects/tor/wiki/TheOnionRouter/TransparentProxy" rel="nofollow">Transparently Routing Traffic Through Tor</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><p>
</p></div></div></div>
<p class="meta">
<a href="../tor/tor_mit_iptables_absichern/a/revision/426877.html">Diese Revision</a> wurde am 29. Mai 2012 01:18 von <a href="https://ubuntuusers.de/user/Lasall/">Lasall</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../tor.html">Tor</a></li>
<li><a href="../tor/tor_mit_iptables_absichern.html">Tor mit iptables absichern</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>