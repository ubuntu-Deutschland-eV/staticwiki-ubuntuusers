<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>awk › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./awk.html">awk</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/awk">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./awk/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./awk/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./awk/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./awk/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./awk/a/backlinks.html">awk</a></h1>
<div id="page"><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Erste-Schritte">Erste Schritte
</a><ol class="arabic"><li><a class="crosslink" href="#Bedingungen">Bedingungen
</a><ol class="arabic"><li><a class="crosslink" href="#Spezielle-Bedingungen">Spezielle Bedingungen
</a></li></ol></li><li><a class="crosslink" href="#Variablen">Variablen
</a></li><li><a class="crosslink" href="#Ausfuehrung-auf-der-Kommandozeile">Ausführung auf der Kommandozeile
</a></li><li><a class="crosslink" href="#Ausfuehrung-als-Skriptdatei">Ausführung als Skriptdatei
</a></li></ol></li><li><a class="crosslink" href="#Variablen-2">Variablen
</a><ol class="arabic"><li><a class="crosslink" href="#Builtin-Variablen">Builtin-Variablen
</a></li><li><a class="crosslink" href="#Variablen-uebergeben">Variablen übergeben
</a></li></ol></li><li><a class="crosslink" href="#Programmsteuerung">Programmsteuerung
</a><ol class="arabic"><li><a class="crosslink" href="#Bedingungen-2">Bedingungen
</a></li><li><a class="crosslink" href="#Schleifen">Schleifen
</a><ol class="arabic"><li><a class="crosslink" href="#while-Schleife">while-Schleife
</a></li><li><a class="crosslink" href="#do-while-Schleife">do-while-Schleife
</a></li><li><a class="crosslink" href="#for-Schleife">for-Schleife
</a></li><li><a class="crosslink" href="#break-und-continue">break und continue
</a></li></ol></li><li><a class="crosslink" href="#next-nextfile-und-exit">next, nextfile und exit
</a></li></ol></li><li><a class="crosslink" href="#Anweisungen">Anweisungen
</a></li><li><a class="crosslink" href="#Beispiele">Beispiele
</a><ol class="arabic"><li><a class="crosslink" href="#Spalten-ausgeben">Spalten ausgeben
</a></li><li><a class="crosslink" href="#Summe-bilden">Summe bilden
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a><ol class="arabic"><li><a class="crosslink" href="#Intern">Intern
</a></li><li><a class="crosslink" href="#Extern">Extern
</a></li></ol></li></ol></div><p><img alt="Wiki/Icons/terminal.png" class="image-left" src="./_/e81889fd6e485dd32e1cde611eabc18abced7993.png"/>
<a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/awk">awk</a> ist eine Skriptsprache zum Editieren und Analysieren von Texten. Eingabedaten werden dabei immer zeilenweise abgearbeitet. Der Name awk leitet sich von den Anfangsbuchstaben der Entwickler Alfred V. <strong>A</strong>ho, Peter J. <strong>W</strong>einberger und Brian W. <strong>K</strong>ernighan ab.</p><p>Ein Werkzeug mit ähnlichen Aufgabengebieten findet man bei <a class="internal" href="./sed.html">sed</a>, während die Programmiersprache <a class="internal" href="./perl.html">Perl</a> durch ihre unzählige Zusatzmodule praktisch unbegrenzt erweitert werden kann.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Der Interpreter ist in der Standardinstallation von Ubuntu bereits enthalten, kann ansonsten aber über das folgende Paket installiert <sup><a href="#source-1">[1]</a></sup> werden:</p><ul><li><p><strong>mawk</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install mawk </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install mawk </pre></div></div><p>
</p></div></div><p>
Darüber hinaus existieren noch die Pakete <a class="interwiki interwiki-packages" href="http://packages.ubuntu.com/gawk">gawk</a> (englische Dokumentation im <a class="internal" href="./info.html">info</a>-Format in <a class="interwiki interwiki-packages" href="http://packages.ubuntu.com/gawk-doc">gawk-doc</a>) und <a class="interwiki interwiki-packages" href="http://packages.ubuntu.com/original-awk">original-awk</a>.</p></div><div class="section_1"><h2 id="Erste-Schritte">Erste Schritte<a class="headerlink" href="#Erste-Schritte">¶</a></h2><p>
awk-Programme bestehen immer aus Kombinationen von Anweisungsblöcken und zugehörigen Bedingungen, welche für die aktuelle Eingabezeile erfüllt sein müssen, damit der Anweisungsblock ausgeführt wird. Wird keine Bedingung angegeben, wird die Anweisung für jede Eingabezeile ausgeführt. Wird nur die Bedingung, jedoch keine Anweisung angegeben, so wird die Standardanweisung ausgeführt, welche die Eingabezeile ausgibt. Anweisungsblöcke werden immer in geschweiften Klammern zusammengefasst.</p><p>Allgemeine Syntax mit Bedingung und Anweisung:</p><pre class="notranslate">Bedingung { Anweisungen }</pre><div class="section_2"><h3 id="Bedingungen">Bedingungen<a class="headerlink" href="#Bedingungen">¶</a></h3><p>
Eine übliche Bedingung ist der Vergleich mit einem <a class="internal" href="./reguläre_ausdrücke.html">regulären Ausdruck:</a>. Dies wird wie folgt geschrieben:
</p><pre class="notranslate">/regulärer Ausdruck/              # Kurzform für Vergleich mit der aktuellen Zeile
$0 ~ /regulärer Ausdruck/         # Langform
/^Hallo /                         # Beispiel: alle Zeilen, die mit "Hallo " beginnen
/[0-9]+\.[0-9]+/                  # komplexeres Beispiel: alle Zeilen, die eine Dezimalzahl mit "." als Trennzeichen enthalten (z.B. 3.45)</pre><p>Man kann auch andere Vergleiche durchführen. Statt <code class="notranslate">~</code> für "entspricht" lässt sich dabei auch immer <code class="notranslate">!~</code> für "entspricht nicht" nutzen.
</p><pre class="notranslate">Ausdruck ~ /regulärer Ausdruck/   # allgemein
$1 ~ /^Hallo$/                    # Beispiel: vergleicht das erste Feld der Zeile (siehe "Variablen"); (fast) identisch zum 1. Beispiel oben</pre><p>Schließlich kann man auch Vergleiche ohne reguläre Ausdrücke durchführen:
</p><pre class="notranslate">Ausdruck Operator Ausdruck        # allgemein
$1 == "Hallo"                     # Beispiel: wie "$1 ~ /^Hallo$/"
$1 &gt; 20                           # Beispiel: prüft, ob der Wert im ersten Feld größer als 20 ist</pre><p>Mehrere Bedingungen lassen sich auch mit <code class="notranslate">&amp;&amp;</code> (und) bzw. <code class="notranslate">||</code> (oder) verknüpfen.</p><div class="section_3"><h4 id="Spezielle-Bedingungen">Spezielle Bedingungen<a class="headerlink" href="#Spezielle-Bedingungen">¶</a></h4><p>
Es gibt die besonderen Bedingungen <code class="notranslate">BEGIN</code> und <code class="notranslate">END</code>. Anweisungen im <code class="notranslate">BEGIN</code> Block werden ausgeführt bevor die erste Zeile der Eingabedaten eingelesen wird. Hier können z.B. eigene Variablen initialisiert werden. Anweisungen im <code class="notranslate">END</code> Block werden nach der letzten Zeile ausgeführt.</p><p>Das Beispiel wertet die Datei <strong>/etc/hosts</strong> aus:
</p><div class="bash"><div class="contents"><pre class="notranslate">awk '
 BEGIN { print "Die IP Adresse von localhost ist: " }
 $2 == "localhost" { print $1 }
 END   { print "Das war die IP Adresse von localhost."}
 ' /etc/hosts </pre></div></div><p>Ergebnis:
</p><pre class="notranslate">Die IP Adresse von localhost ist: 
127.0.0.1
Das war die IP Adresse von localhost.</pre></div></div><div class="section_2"><h3 id="Variablen">Variablen<a class="headerlink" href="#Variablen">¶</a></h3><p>
awk setzt beim Einlesen jeder Zeile bestimmte Variablen. <code class="notranslate">$0</code> ist immer die komplette Zeile. Mit <code class="notranslate">$1</code>, <code class="notranslate">$2</code> usw. kann man auf die einzelnen Felder der Zeile zugreifen. Felder werden in der Voreinstellung durch <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Leerraum">Leerraum</a> (whitespace) voneinander getrennt. In der Variable <code class="notranslate">NF</code> steht die Anzahl der Felder in der aktuellen Zeile. Somit kann man auf die Felder <code class="notranslate">$1</code> - <code class="notranslate">$NF</code> zugreifen. Die Variable <code class="notranslate">NR</code> enthält die aktuelle Zeilennummer. Mit jeder neu eingelesenen Zeile wird <code class="notranslate">NR</code> um eins erhöht.</p></div><div class="section_2"><h3 id="Ausfuehrung-auf-der-Kommandozeile">Ausführung auf der Kommandozeile<a class="headerlink" href="#Ausfuehrung-auf-der-Kommandozeile">¶</a></h3><p>
awk-Skripte können auf der Kommandozeile ausgeführt werden. Eingabedaten werden entweder über den <a class="internal" href="./shell/umleitungen.html#stdin-stdout-stderr-Kanaele-der-Bash">Standardeingabekanal</a> gelesen oder aus einer oder mehreren angegebenen Dateien. Das Skript kann dabei in einfachen Hochkomma direkt hinter dem awk-Aufruf stehen. Wenn man zum Beispiel die IP-Adresse des <code class="notranslate">localhost</code>-Eintrags aus der Datei <strong>/etc/hosts</strong> auslesen möchte, könnte man das über folgendes Skript tun:</p><div class="bash"><div class="contents"><pre class="notranslate">awk '$2 == "localhost" { print $1 }' /etc/hosts </pre></div></div><p>Ergebnis:
</p><pre class="notranslate">127.0.0.1</pre><p>awk kann die Eingaben auch vom Standardeingabekanal lesen:
</p><div class="bash"><div class="contents"><pre class="notranslate">awk '$2 == "localhost" { print $1 }' &lt; /etc/hosts </pre></div></div></div><div class="section_2"><h3 id="Ausfuehrung-als-Skriptdatei">Ausführung als Skriptdatei<a class="headerlink" href="#Ausfuehrung-als-Skriptdatei">¶</a></h3><p>
Längere awk-Skripte werden auf der Kommandozeile schnell unübersichtlich. Daher können Skripte auch als Datei gespeichert werden. Auf der Kommandozeile können diese dann mit</p><div class="bash"><div class="contents"><pre class="notranslate">awk -f Datei </pre></div></div><p>
ausgeführt werden. Wenn also das Beispielskript in der Datei <strong>localhostip.awk</strong> gespeichert wäre, würde der Aufruf so erfolgen:</p><div class="bash"><div class="contents"><pre class="notranslate">awk -f localhostip.awk /etc/hosts  </pre></div></div><p>Alternativ kann man den Befehl <code class="notranslate">awk -f</code> auch in die Shebangzeile des Skripts packen:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="c1">#!/usr/bin/awk -f</span>
<span class="o">$</span><span class="mi">2</span> <span class="o">==</span> <span class="s2">"localhost"</span> <span class="p">{</span> <span class="kr">print</span> <span class="o">$</span><span class="mi">1</span> <span class="p">}</span>
</pre></div>
</td></tr></table></div><p>und dann dem Skript Ausführungsrechte geben:</p><div class="bash"><div class="contents"><pre class="notranslate">chmod a+x localhostip.awk  </pre></div></div><p>Der Aufruf erfolgt mit:</p><div class="bash"><div class="contents"><pre class="notranslate">./localhostip.awk /etc/hosts  </pre></div></div></div></div><div class="section_1"><h2 id="Variablen-2">Variablen<a class="headerlink" href="#Variablen-2">¶</a></h2><p>
Variablen müssen in awk-Skripten nicht speziell initialisiert werden. Es kann jederzeit einer neuen Variable ein Wert zugewiesen werden.</p><div class="section_2"><h3 id="Builtin-Variablen">Builtin-Variablen<a class="headerlink" href="#Builtin-Variablen">¶</a></h3><p>
awk belegt einige Variablen automatisch mit Werten. Diese können im laufenden Skript abgefragt und verändert werden, wobei Änderungen nicht bei allen Variablen sinnvoll sind. Einige davon zeigt die folgende Tabelle:</p><p>
</p><table><tr class="kopf"><td> Name </td><td> Bedeutung </td></tr><tr><td> <code class="notranslate">ARGC</code> </td><td> Anzahl der Argumente </td></tr><tr><td> <code class="notranslate">ARGV</code> </td><td> Array mit den übergebenen Argumenten </td></tr><tr><td> <code class="notranslate">ENVIRON</code> </td><td> Array der Umgebungsvariablen </td></tr><tr><td> <code class="notranslate">FILENAME</code> </td><td> Name der Eingabedatei </td></tr><tr><td> <code class="notranslate">NF</code> </td><td> Anzahl der Felder in derzeitigen Zeile </td></tr><tr><td> <code class="notranslate">NR</code> </td><td> Anzahl der Zeilen seit Skriptstart </td></tr><tr><td> <code class="notranslate">FNR</code> </td><td> Anzahl der Zeilen aus der aktuellen Eingabedatei </td></tr><tr><td> <code class="notranslate">FS</code> </td><td> Der aktuelle Feldtrenner. Anhand dieses Trenners werden die Variablen <code class="notranslate">$1 - $NF</code> belegt. </td></tr><tr><td> <code class="notranslate">FIELDWIDTHS</code> </td><td> Eine mit Leerzeichen getrennte Liste von Feldbreiten. Wenn diese Variable gesetzt wird, werden Felder nicht mehr anhand des Feldtrenners <code class="notranslate">FS</code> getrennt, sondern nach festen Breiten. Dies ist vor allem dann sinnvoll, wenn der auszuwertende Text mit festen Breiten formatiert ist. </td></tr></table></div><div class="section_2"><h3 id="Variablen-uebergeben">Variablen übergeben<a class="headerlink" href="#Variablen-uebergeben">¶</a></h3><p>
Oft ist es sinnvoll, dem awk-Skript eigene Variablen zu übergeben, welche dann im Skript verwendet werden können. Mit dem Aufrufparameter <code class="notranslate">-v</code> können solche Variablen gesetzt und im Skript genutzt werden.</p><div class="bash"><div class="contents"><pre class="notranslate">awk -v pre="IP von localhost ist:" -v post="Das war die IP von localhost." '
   BEGIN { print pre }
   $2 == "localhost" { print $1 }
   END   { print post}
' /etc/hosts </pre></div></div><p>Ergebnis:</p><pre class="notranslate">IP Adresse von localhost ist:
127.0.0.1
Das war die IP von localhost</pre></div></div><div class="section_1"><h2 id="Programmsteuerung">Programmsteuerung<a class="headerlink" href="#Programmsteuerung">¶</a></h2><p>
Auch awk hat einige Funktionen zur Programmsteuerung, die wahrscheinlich schon von anderen Programmiersprachen bekannt sind.</p><div class="section_2"><h3 id="Bedingungen-2">Bedingungen<a class="headerlink" href="#Bedingungen-2">¶</a></h3><p>
Mit <code class="notranslate">if-else</code> können Bedingungen überprüft werden und der Programmablauf entsprechend gesteuert werden.</p><pre class="notranslate">if (bedingung) {
    # Anweisungen wenn Bedingung erfüllt
} else {
    # Anweisungen wenn Bedingung nicht erfüllt
}</pre><p>Das Beispiel überprüft, ob eine Zahl <code class="notranslate">x</code> gerade oder ungerade ist. <code class="notranslate">%</code> steht für "Modulo" (der Rest bei einer Division mit Rest).
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
   <span class="kr">print</span> <span class="nx">x</span> <span class="s2">" ist eine gerade Zahl."</span> 
<span class="p">}</span> <span class="k">else</span>  <span class="p">{</span>
   <span class="kr">print</span> <span class="nx">x</span> <span class="s2">" ist eine ungerade Zahl."</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div><div class="section_2"><h3 id="Schleifen">Schleifen<a class="headerlink" href="#Schleifen">¶</a></h3><p>
Schleifen dienen der Wiederholung von Anweisungen.</p><div class="section_3"><h4 id="while-Schleife">while-Schleife<a class="headerlink" href="#while-Schleife">¶</a></h4><p>
In der <code class="notranslate">while</code>-Schleife wird eine Bedingung überprüft. Wenn die Bedingung wahr ist, wird der Schleifenkörper ausgeführt. Nach dem Schleifenkörper wird die Bedingung erneut überprüft usw. Es muss also sichergestellt werden, dass sich die Bedingung innerhalb der Schleife ändert, damit keine Endlosschleife entsteht.</p><pre class="notranslate">while (Bedingung) {
   Anweisung(en)
}</pre><p>Beispiel (gibt die Zahlen 1-9 aus):
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nx">i</span><span class="o">=</span><span class="mi">1</span>
<span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
   <span class="kr">print</span> <span class="nx">i</span>
   <span class="nx">i</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div><div class="section_3"><h4 id="do-while-Schleife">do-while-Schleife<a class="headerlink" href="#do-while-Schleife">¶</a></h4><p>
Die <code class="notranslate">do-while</code>-Schleife ist prinzipiell ähnlich zur <code class="notranslate">while</code>-Schleife, mit dem Unterschied, dass die Bedingung erst <span class="underline">nach</span> dem Durchlauf des Schleifenkörpers überprüft wird. Sie wird also immer mindestens einmal durchlaufen.</p><pre class="notranslate">do {
  Anweisung(en)
} while (Bedingung)</pre><p>Beispiel (gibt die Zahl 10 einmal aus, obwohl die Bedingung nicht erfüllt ist):
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nx">i</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">do</span> <span class="p">{</span>
   <span class="kr">print</span> <span class="nx">i</span>
<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</td></tr></table></div></div><div class="section_3"><h4 id="for-Schleife">for-Schleife<a class="headerlink" href="#for-Schleife">¶</a></h4><p>
Die for-Schleife ist immer dann hilfreich, wenn eine genau festgelegte Anzahl an Ausführungen des Schleifenkörpers gewünscht wird. Die Schleife besteht aus drei Teilen: Einer Initialisierung, einer Bedingung und einer Inkrement-Anweisung. Der Schleifenkörper wird ausgeführt, wenn die Bedingung erfüllt ist. Die Überprüfung der Bedingung findet bei der <code class="notranslate">for</code>-Schleife wie bei der <code class="notranslate">while</code>-Schleife vor dem Durchlauf des Schleifenkörpers statt.</p><pre class="notranslate">for(Initialisierung; Bedingung; Inkrement) {
   Anweisung(en)
}</pre><p>Beispiel (gibt die Zahlen 1-9 aus):
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
   <span class="kr">print</span> <span class="nx">i</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div><div class="section_3"><h4 id="break-und-continue">break und continue<a class="headerlink" href="#break-und-continue">¶</a></h4><p>
Mit den Befehlen <code class="notranslate">break</code> und <code class="notranslate">continue</code> kann der Ablauf innerhalb der Schleife kontrolliert werden. Mit <code class="notranslate">break</code> wird die Schleife sofort verlassen. Mit <code class="notranslate">continue</code> wird die der Schleifenkörper erneut von vorne durchlaufen, wodurch auf das <code class="notranslate">continue</code> folgende Anweisungen übersprungen werden. Bei einer <code class="notranslate">for</code>-Schleife wird dabei auch noch die Inkrement-Anweisung ausgeführt.</p></div></div><div class="section_2"><h3 id="next-nextfile-und-exit">next, nextfile und exit<a class="headerlink" href="#next-nextfile-und-exit">¶</a></h3><p>
Mit <code class="notranslate">next</code> kann awk angewiesen werden, sofort die nächste Zeile einzulesen und damit weiterzuarbeiten. Mit <code class="notranslate">nextfile</code> wird die Abarbeitung der derzeitigen Datei beendet und mit der nächsten Datei weitergemacht oder das Skript beendet, falls es die letzte Eingabedatei war. Mit <code class="notranslate">exit</code> wird das Skript sofort beendet.</p></div></div><div class="section_1"><h2 id="Anweisungen">Anweisungen<a class="headerlink" href="#Anweisungen">¶</a></h2><p>
Hinter einer Anweisung kann ein Semikolon eingefügt werden. Dies ist immer notwendig, wenn mehrere Anweisungen auf einer Zeile stehen.</p><p>Hier sollen noch ein paar weitere Anweisungen vorgestellt werden. Mehr findet man in der <a class="internal" href="./manpage.html">Manpage</a> von awk unter "8. Built-in functions" und "9. Input and output".</p><p>
</p><table><tr class="kopf"><td> Anweisung </td><td> Nutzung </td></tr><tr><td> <code class="notranslate">gsub(regulärer Ausdruck, Ersetzung, Variable)</code> </td><td> Ersetzt alle Vorkommen des regulären Ausdrucks in der Variablen. Wird keine Variable angegeben, wird <code class="notranslate">$0</code> verwendet. </td></tr><tr><td> <code class="notranslate">sub(regulärer Ausdruck, Ersetzung, Variable)</code> </td><td> Wie <code class="notranslate">gsub</code>, aber es wird höchstens eine Ersetzung vorgenommen. </td></tr><tr><td> <code class="notranslate">index(Zeichenkette 1, Zeichenkette 2)</code> </td><td> Sucht Zeichenkette 2 in Zeichenkette 1 und gibt die Position in Zeichenkette 1 oder 0 für "nicht gefunden" zurück. </td></tr><tr><td> <code class="notranslate">match(Zeichenkette, regulärer Ausdruck)</code> </td><td> Wie <code class="notranslate">index</code>, aber es wird nach einem regulären Ausdruck gesucht. </td></tr><tr><td> <code class="notranslate">length(Zeichenkette)</code> </td><td> Gibt die Länge der Zeichenkette zurück. </td></tr><tr><td> <code class="notranslate">substr(Zeichenkette, Start, Länge)</code> </td><td> Gibt den Ausschnitt aus der Zeichenkette zurück, der bei Index "Start" beginnt. Wird eine Länge angegeben, werden nur so viele Zeichen zurückgegeben. </td></tr></table></div><div class="section_1"><h2 id="Beispiele">Beispiele<a class="headerlink" href="#Beispiele">¶</a></h2><p>
Beispiele für awk-Skripte findet man u.a. in der <a class="internal" href="./manpage.html">Manpage</a> von awk unter "EXAMPLES". Ein paar sollen hier noch aufgeführt werden.</p><div class="section_2"><h3 id="Spalten-ausgeben">Spalten ausgeben<a class="headerlink" href="#Spalten-ausgeben">¶</a></h3><p>
awk wird oft verwendet, um eine bestimmte Spalte (hier: die erste) auszugeben. Eine ähnliche Funktion hat <a class="internal" href="./cut.html">cut</a>.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="p">{</span> <span class="kr">print</span> <span class="o">$</span><span class="mi">1</span> <span class="p">}</span>
</pre></div>
</td></tr></table></div><p>Werden die Spalten nicht durch Leerzeichen getrennt, kann man die Variable <code class="notranslate">FS</code> ändern, indem man awk mit folgendem Befehl aufruft:</p><div class="bash"><div class="contents"><pre class="notranslate">awk -F Neuer-FS-Wert '{ print $1 }' </pre></div></div></div><div class="section_2"><h3 id="Summe-bilden">Summe bilden<a class="headerlink" href="#Summe-bilden">¶</a></h3><p>
Dieses Skript erwartet Zeilen, die jeweils genau eine Zahl enthalten, und gibt die Anzahl der Zeilen, die Summe aller Zahlen sowie den Durchschnitt aus:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="p">{</span>
    <span class="nx">nr</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="nx">sum</span> <span class="o">+=</span> <span class="o">$</span><span class="mi">0</span>
<span class="p">}</span>
<span class="nb">END</span> <span class="p">{</span>
    <span class="kr">print</span> <span class="s2">"Anzahl:"</span><span class="p">,</span> <span class="nx">nr</span><span class="p">,</span> <span class="s2">"Summe:"</span><span class="p">,</span> <span class="nx">sum</span><span class="p">,</span> <span class="s2">"Durchschnitt:"</span><span class="p">,</span> <span class="nx">sum</span> <span class="o">/</span> <span class="nx">nr</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><div class="section_2"><h3 id="Intern">Intern<a class="headerlink" href="#Intern">¶</a></h3><p>
</p><ul><li><p><a class="internal" href="./skripting.html">Skripting</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> weitere Interpreter-Sprachen</p></li><li><p><a class="internal" href="./programmierung.html">Programmierung</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li></ul></div><div class="section_2"><h3 id="Extern">Extern<a class="headerlink" href="#Extern">¶</a></h3><p>
</p><ul><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/awk">Wikipedia-Artikel</a></p></li><li><p><a class="external" href="http://www.tldp.org/LDP/abs/html/awk.html" rel="nofollow">Kapitel zu awk</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> im "Advanced Bash Scripting Guide"</p></li><li><p><a class="external" href="https://www-user.tu-chemnitz.de/~hot/unix_linux_werkzeugkasten/awk.html" rel="nofollow">Die Programmiersprache AWK</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - TU Chemnitz</p></li></ul><p>
</p></div></div></div>
<p class="meta">
<a href="./awk/a/revision/943972.html">Diese Revision</a> wurde am 4. Oktober 2017 19:10 von <a href="https://ubuntuusers.de/user/kB/">kB</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./awk.html">awk</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>