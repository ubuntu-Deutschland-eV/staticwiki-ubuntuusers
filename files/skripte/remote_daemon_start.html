<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Skripte/Remote_Daemon_Start › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../skripte/remote_daemon_start.html">Remote Daemon Start</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Skripte/Remote_Daemon_Start">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../skripte/remote_daemon_start/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../skripte/remote_daemon_start/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../skripte/remote_daemon_start/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../skripte/remote_daemon_start/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../skripte/remote_daemon_start/a/backlinks.html">Remote Daemon Start</a></h1>
<div id="page"><p>
</p><div class="section_1"><h2 id="Einleitung">Einleitung<a class="headerlink" href="#Einleitung">¶</a></h2><p>
Hier wird erklärt, wie man einen Daemon per Remote (SSH-Verbindung) startet in dem Moment, in dem man ihn braucht. Dieser Artikel bezieht sich nicht allein auf Ubuntu, er kann auch für andere Derivate verwendet werden. Der Sinn eines solchen Skripts ist es die Serversicherheit zu erhöhen. Denn durch unnötig geöffnete Ports können Angreifer eindringen. Hier wird als Beispiel der <a class="internal" href="../proftpd.html">ProFTPD</a>-Daemon genommen, natürlich ist dieses Skript auf andere Daemons übertragbar mit den entsprechenden Anpassungen.</p></div><div class="section_1"><h2 id="Vorbereitungen">Vorbereitungen<a class="headerlink" href="#Vorbereitungen">¶</a></h2><p>
</p><div class="section_2"><h3 id="Erstellen-eines-Public-Keys">Erstellen eines Public Keys<a class="headerlink" href="#Erstellen-eines-Public-Keys">¶</a></h3><p>
Dieser Key wird benötigt, um sich später am Server ohne Passwort anzumelden. Dazu wird im Terminal <sup><a href="#source-2">[2]</a></sup> folgendes eingegeben. 
</p><div class="bash"><div class="contents"><pre class="notranslate">ssh-keygen -b 1024 -t dsa </pre></div></div><p>
Dieser Befehl erstellt ein 1024 bit DSA Key-Paar (einen für den Client, einen für den Server). Es wird nach einem Speicherort für den Key gefragt, diesen kann man auf Standard belassen. Bei der Passphrase-Frage wird nichts eingegeben, da man sich später über den erstellten Key automatisch identifiziert. Würde hier eine Passphrase eingegeben werden, so müsste diese bei jeder Verbindung eingegeben werden, um auf den eigentlichen Schlüssel zugreifen zu dürfen. Jetzt sollte das Verzeichnis noch so geschützt werden, dass andere User auf die Key-Datei nicht zugreifen können. Das geschieht mit folgendem Befehl.</p><div class="bash"><div class="contents"><pre class="notranslate">chmod o-rwx .ssh/ </pre></div></div><p>
Durch diesen Befehl hat nur der Besitzer, also der eigene User, Zugriffsrechte auf dieses Verzeichnis. 
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>
Es wird hier davon ausgegangen das der Benutzer-Account auf der Remote-Maschine mit <a class="internal" href="../sudo.html">sudo</a> über die notwendigen Rechte verfügt, um die Befehle ausführen zu können.</p></div></div></div><div class="section_2"><h3 id="Erstellen-des-Verzeichnisses-auf-dem-Server-und-Key-upload">Erstellen des Verzeichnisses auf dem Server und Key upload<a class="headerlink" href="#Erstellen-des-Verzeichnisses-auf-dem-Server-und-Key-upload">¶</a></h3><p>
Zum Erstellen des Key-Verzeichnisses muss im Terminal <sup><a href="#source-2">[2]</a></sup> folgendes eingegeben werden. Man sollte sich mit dem User anmelden den man später für die Verbindungen auch benutzen möchte. 
</p><div class="bash"><div class="contents"><pre class="notranslate">ssh [host] mkdir ~/.ssh </pre></div></div><p>
Der Key wird hier in das home Verzeichnis des Users geladen, bei [host] ist die IP-Adresse des betroffenen Servers einzutragen.</p><p>Mit dem nächsten Befehl wird der Key auf den Server übertragen: 
</p><div class="bash"><div class="contents"><pre class="notranslate">scp ~/.ssh/id_dsa.pub [user]@[host]:~/.ssh/authorized_keys </pre></div></div><p>
Bei <em>[host]</em> ist wieder die IP-Adresse des betroffenen Server einzutragen und bei <em>[user]</em> der User der für die Verbindung verwendet wird. Nun sind die Vorbereitungen abgeschlossen.</p></div></div><div class="section_1"><h2 id="Das-Skript">Das Skript<a class="headerlink" href="#Das-Skript">¶</a></h2><p>
</p><div class="section_2"><h3 id="Fuer-den-Servertyp-Standalone">Für den Servertyp "Standalone"<a class="headerlink" href="#Fuer-den-Servertyp-Standalone">¶</a></h3><p>
Das eigentlich Bash-Skript zum Starten und Stoppen des Daemons ist sehr simpel und von daher später auch leicht anzupassen. Zu erst muss ein Editor <sup><a href="#source-1">[1]</a></sup> geöffnet werden. 
</p><pre class="notranslate">#!/bin/bash

ssh [user]@[host] sudo /etc/init.d/proftpd start

gftp

ssh [user]@[host] sudo /etc/init.d/proftpd stop</pre><p>
Die erste Zeile sagt dem System, dass es sich hier um ein Bash-Skript handelt. In der zweiten Zeile wird nun der <a class="internal" href="../proftpd.html">ProFTPD</a> gestartet. Danach öffnet sich das FTP-Programm gftp. Das ist an den entsprechenden Client anzupassen der bevorzugt wird. Nachdem alle Dateien übertragen wurden und der FTP-Client beendet wurde, wird mit der letzten Zeile der Daemon wieder beendet und somit auch der Port geschlossen. Natürlich ist hier auch wieder <em>[host]</em> und <em>[user]</em> anzupassen.  Nur noch als .sh Datei speichern und dann kann die Datei im Terminal <sup><a href="#source-2">[2]</a></sup> mit folgendem Befehl ausgeführt werden: 
</p><div class="bash"><div class="contents"><pre class="notranslate">./Skriptname.sh </pre></div></div></div><div class="section_2"><h3 id="Fuer-den-Servertyp-inetd">Für den Servertyp "inetd"<a class="headerlink" href="#Fuer-den-Servertyp-inetd">¶</a></h3><p>
Hier sind nur ein paar Änderungen am Skript nötig: 
</p><pre class="notranslate">#!/bin/bash

ssh [user]@[host] sudo /etc/init.d/inetd start

gftp

ssh [user]@[host] sudo /etc/init.d/inetd stop</pre><p>
Die Funktion ist die gleiche wie beim Servertyp "Standalone".</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>
Das Skript stoppt und startet jedesmal den Internet-Super-Server. Es sollte darauf geachtet werden, dass dadurch nicht wichtige Dienste mit gestoppt werden. Des weiteren wurde dieses Skript im Betrieb getestet.</p></div></div><hr/><p></p></div></div></div>
<p class="meta">
<a href="../skripte/remote_daemon_start/a/revision/456627.html">Diese Revision</a> wurde am 2. August 2012 10:21 von <a href="https://ubuntuusers.de/user/frustschieber/">frustschieber</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../skripte.html">Skripte</a></li>
<li><a href="../skripte/remote_daemon_start.html">Remote Daemon Start</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>