<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Skripte/Auto_OFF › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../skripte/auto_off.html">Auto OFF</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Skripte/Auto_OFF">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../skripte/auto_off/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../skripte/auto_off/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../skripte/auto_off/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../skripte/auto_off/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../skripte/auto_off/a/backlinks.html">Auto OFF</a></h1>
<div id="page"><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../sudo.html">Root-Rechte</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../rechte.html">Rechte für Dateien und Ordner ändern</a> </p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Vorbereitungen">Vorbereitungen
</a><ol class="arabic"><li><a class="crosslink" href="#Cron-Job">Cron-Job
</a></li><li><a class="crosslink" href="#Skript">Skript
</a></li><li><a class="crosslink" href="#Konfigurationsdatei">Konfigurationsdatei
</a></li></ol></li><li><a class="crosslink" href="#Dauerlauf-erzwingen">Dauerlauf erzwingen
</a></li><li><a class="crosslink" href="#Zeitgesteuertes-Aufwachen">Zeitgesteuertes Aufwachen
</a><ol class="arabic"><li><a class="crosslink" href="#ACPI-Wakeup">ACPI-Wakeup
</a></li><li><a class="crosslink" href="#NVRAM-Wakeup">NVRAM-Wakeup
</a></li></ol></li><li><a class="crosslink" href="#Erweiterungen">Erweiterungen
</a><ol class="arabic"><li><a class="crosslink" href="#Andere-Dienste">Andere Dienste
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>Auto OFF dient dem automatischen Abschalten eines Computers bei Nichtbenutzung. Dies ist beispielsweise sinnvoll, wenn sich ein Server nach einem bestimmten Zeitraum (z.B. 20 Minuten) ohne Zugriffe selbsttätig abschalten soll. Der Server wird per <a class="internal" href="../wake_on_lan.html">Wake On LAN</a> oder <a class="crosslink" href="#Zeitgesteuertes-Aufwachen">zeitgesteuert</a> geweckt.</p><div class="section_1"><h2 id="Vorbereitungen">Vorbereitungen<a class="headerlink" href="#Vorbereitungen">¶</a></h2><p>
</p><div class="section_2"><h3 id="Cron-Job">Cron-Job<a class="headerlink" href="#Cron-Job">¶</a></h3><p>
Ein <a class="internal" href="../cron.html">Cron</a>-Job ruft das Skript alle 20 Minuten auf. Dazu wird eine neue Datei <strong>/etc/cron.d/checkshutdown</strong> erzeugt. Diese Datei wird in einem Editor<sup><a href="#source-1">[1]</a></sup> mit Root-Rechten<sup><a href="#source-2">[2]</a></sup> bearbeitet:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span># Auto shutdown
*/20 * * * * root /usr/local/sbin/checkshutdown.sh
</pre></div>
</td></tr></table></div></div><div class="section_2"><h3 id="Skript">Skript<a class="headerlink" href="#Skript">¶</a></h3><p>
Das vom <a class="internal" href="../cron.html">Cron Job</a> aufgerufene Skript prüft, ob 
</p><ul><li><p>bestimmte Programme laufen </p></li><li><p>bestimmte Dämonen aktiv sind</p></li><li><p>noch Samba Verbindungen aktiv sind</p></li><li><p>User eingeloggt sind</p></li><li><p>andere PCs noch eingeschaltet sind</p></li></ul><p>
Nur wenn zwei mal hintereinander keine Aktivität mehr vorhanden ist, wird per "<code class="notranslate">Halt</code>"-Befehl abgeschaltet.</p><p>Das folgende Skript wird in einen Editor<sup><a href="#source-4">[4]</a></sup> kopiert und mit Root-Rechten<sup><a href="#source-2">[2]</a></sup> als <strong>/usr/local/sbin/checkshutdown.sh</strong> gespeichert. Außerdem muss es ausführbar gemacht werden<sup><a href="#source-3">[3]</a></sup>:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#</span>
<span class="c1">#set -x</span>

. /etc/autoshutdown.conf

logit<span class="o">()</span>
<span class="o">{</span>
	logger -p local0.notice -s -- AutoShutdown: <span class="nv">$*</span>
<span class="o">}</span>

IsOnline<span class="o">()</span>
<span class="o">{</span>
        <span class="k">for</span> i in <span class="nv">$*</span><span class="p">;</span> <span class="k">do</span>
		ping <span class="nv">$i</span> -c1
		<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"0"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
		  logit PC <span class="nv">$i</span> is still active, auto shutdown terminated
		  <span class="k">return</span> <span class="m">1</span>
		<span class="k">fi</span>
        <span class="k">done</span>

	<span class="k">return</span> <span class="m">0</span>
<span class="o">}</span>

IsRunning<span class="o">()</span>
<span class="o">{</span>
        <span class="k">for</span> i in <span class="nv">$*</span><span class="p">;</span> <span class="k">do</span>
		<span class="k">if</span> <span class="o">[</span> <span class="sb">`</span>pgrep -c <span class="nv">$i</span><span class="sb">`</span> -gt <span class="m">0</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
		  logit <span class="nv">$i</span> still active, auto shutdown terminated
                  <span class="k">return</span> <span class="m">1</span>
                <span class="k">fi</span>
        <span class="k">done</span>

        <span class="k">return</span> <span class="m">0</span>
<span class="o">}</span>

IsDamonActive<span class="o">()</span>
<span class="o">{</span>
        <span class="k">for</span> i in <span class="nv">$*</span><span class="p">;</span> <span class="k">do</span>
                <span class="k">if</span> <span class="o">[</span> <span class="sb">`</span>pgrep -c <span class="nv">$i</span><span class="sb">`</span> -gt <span class="m">1</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
                  logit <span class="nv">$i</span> still active, auto shutdown terminated
                  <span class="k">return</span> <span class="m">1</span>
                <span class="k">fi</span>
        <span class="k">done</span>

        <span class="k">return</span> <span class="m">0</span>
<span class="o">}</span>

IsPortInUse<span class="o">()</span>
<span class="o">{</span>
        <span class="k">for</span> i in <span class="nv">$*</span><span class="p">;</span> <span class="k">do</span>
                <span class="nv">LANG</span><span class="o">=</span>C netstat -an <span class="p">|</span> grep -q <span class="s2">"</span><span class="si">${</span><span class="nv">myIp</span><span class="si">}</span><span class="s2">:</span><span class="si">${</span><span class="nv">i</span><span class="si">}</span><span class="s2">.*ESTABLISHED</span>$<span class="s2">"</span>
                <span class="nv">Err</span><span class="o">=</span><span class="si">${</span><span class="p">?</span><span class="si">}</span>
                <span class="k">if</span> <span class="o">[</span> <span class="si">${</span><span class="nv">Err</span><span class="si">}</span> -eq <span class="m">0</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
                  logit <span class="s2">"Port </span><span class="si">${</span><span class="nv">i</span><span class="si">}</span><span class="s2"> is still in use, auto shutdown terminated"</span>
                  <span class="k">return</span> <span class="m">1</span>
                <span class="k">fi</span>
        <span class="k">done</span>

        <span class="k">return</span> <span class="m">0</span>
<span class="o">}</span>

IsBusy<span class="o">()</span>
<span class="o">{</span>
	<span class="c1"># Samba</span>
	<span class="k">if</span> <span class="o">[</span> <span class="s2">"x</span><span class="nv">$SAMBANETWORK</span><span class="s2">"</span> !<span class="o">=</span> <span class="s2">"x"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
		<span class="k">if</span> <span class="o">[</span> <span class="sb">`</span>/usr/bin/smbstatus -b <span class="p">|</span> grep <span class="nv">$SAMBANETWORK</span> <span class="p">|</span> wc -l <span class="sb">`</span> !<span class="o">=</span> <span class="s2">"0"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
		  logit samba connected, auto shutdown terminated
	  	  <span class="k">return</span> <span class="m">1</span>
		<span class="k">fi</span>
	<span class="k">fi</span>

	<span class="c1">#damons that always have one process running</span>
	IsDamonActive <span class="nv">$DAMONS</span>
        <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"1"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
                <span class="k">return</span> <span class="m">1</span>
        <span class="k">fi</span>

	<span class="c1">#backuppc, wget, wsus, ....</span>
        IsRunning <span class="nv">$APPLICATIONS</span>
	<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"1"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
                <span class="k">return</span> <span class="m">1</span>
        <span class="k">fi</span>

        <span class="c1"># check network-ports</span>
        <span class="k">if</span> <span class="o">[</span> <span class="s2">"x</span><span class="si">${</span><span class="nv">NETWORKPORTS</span><span class="si">}</span><span class="s2">"</span> !<span class="o">=</span> <span class="s2">"x"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
                <span class="nv">myIp</span><span class="o">=</span><span class="k">$(</span><span class="nv">LANG</span><span class="o">=</span>C /sbin/ifconfig <span class="p">|</span> sed -n <span class="s2">"/inet addr/ { s|^[a-z ]*:\([0-9\.]*\).*</span>$<span class="s2">|\1|p }"</span> <span class="p">|</span> head -n <span class="m">1</span><span class="k">)</span>
                IsPortInUse <span class="si">${</span><span class="nv">NETWORKPORTS</span><span class="si">}</span>
                <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"1"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
                        <span class="k">return</span> <span class="m">1</span>
                <span class="k">fi</span>
        <span class="k">fi</span>

	<span class="c1"># Read logged users</span>
	<span class="nv">USERCOUNT</span><span class="o">=</span><span class="sb">`</span>who <span class="p">|</span> wc -l<span class="sb">`</span><span class="p">;</span>
	<span class="c1"># No Shutdown if there are any users logged in</span>
	<span class="nb">test</span> <span class="nv">$USERCOUNT</span> -gt <span class="m">0</span> <span class="o">&amp;&amp;</span> <span class="o">{</span> logit some users still connected, auto shutdown terminated<span class="p">;</span> <span class="k">return</span> <span class="m">1</span><span class="p">;</span> <span class="o">}</span>

        IsOnline <span class="nv">$CLIENTS</span>
        <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"1"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
                <span class="k">return</span> <span class="m">1</span>
        <span class="k">fi</span>

	<span class="k">return</span> <span class="m">0</span>
<span class="o">}</span>

<span class="nv">COUNTFILE</span><span class="o">=</span><span class="s2">"/var/spool/shutdown_counter"</span>
<span class="nv">OFFFILE</span><span class="o">=</span><span class="s2">"/var/spool/shutdown_off"</span>

<span class="c1"># turns off the auto shutdown</span>
<span class="k">if</span> <span class="o">[</span> -e <span class="nv">$OFFFILE</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
	logit auto shutdown is turned off by existents of <span class="nv">$OFFFILE</span>
	<span class="nb">exit</span> <span class="m">0</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$AUTO_SHUTDOWN</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"true"</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$AUTO_SHUTDOWN</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"yes"</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span> 
	IsBusy
	<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"0"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
		<span class="c1"># was it not busy already last time? Then shutdown.</span>
		<span class="k">if</span> <span class="o">[</span> -e <span class="nv">$COUNTFILE</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
	        	<span class="c1"># shutdown</span>
	        	rm -f <span class="nv">$COUNTFILE</span>
		        logit auto shutdown caused by cron
        		/sbin/halt -p
		        <span class="nb">exit</span> <span class="m">0</span>
		<span class="k">else</span>
			<span class="c1"># shut down next time</span>
			touch <span class="nv">$COUNTFILE</span>
			logit marked <span class="k">for</span> shutdown in next try
			<span class="nb">exit</span> <span class="m">0</span>
		<span class="k">fi</span>
	<span class="k">else</span>
		rm -f <span class="nv">$COUNTFILE</span>
		<span class="c1">#logit aborted</span>
		<span class="nb">exit</span> <span class="m">0</span>
	<span class="k">fi</span>
<span class="k">fi</span>

logit malfunction
<span class="nb">exit</span> <span class="m">1</span>
</pre></div>
</td></tr></table></div></div><div class="section_2"><h3 id="Konfigurationsdatei">Konfigurationsdatei<a class="headerlink" href="#Konfigurationsdatei">¶</a></h3><p>
Die Konfigurations-Datei <strong>/etc/autoshutdown.conf</strong> wird in einen Editor<sup><a href="#source-4">[4]</a></sup> erstellt und mit Root-Rechten<sup><a href="#source-2">[2]</a></sup> abgespeichert. Hier kann man eigene Programme, Dämonen, Sambanetzwerke und Client-Rechner eintragen.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="c1"># Turn on auto shutdown</span>
<span class="nv">AUTO_SHUTDOWN</span><span class="o">=</span>yes

<span class="c1"># Damons that always have one process running, only if more that one process is active we prevent the shutdown</span>
<span class="c1"># The values are used with grep, so just a unique portion is sufficient</span>
<span class="nv">DAMONS</span><span class="o">=</span><span class="s2">"rsync BackupPC_"</span>

<span class="c1"># Important applications that shall prevent the shutdown</span>
<span class="c1"># The values are used with grep, so just a unique portion is sufficient</span>
<span class="nv">APPLICATIONS</span><span class="o">=</span><span class="s2">"BackupPC_nightly BackupPC_dump wsus wget screen mlnet"</span>

<span class="c1"># Network IP range for checking any open samba connections</span>
<span class="c1"># The value is used with grep, so just a unique portion is sufficient</span>
<span class="nv">SAMBANETWORK</span><span class="o">=</span><span class="s2">"192.168.1."</span>

<span class="c1"># Names or IP for computers that shall prevent the shutdown</span>
<span class="c1"># We ping these computers in the list to check whether they are active.</span>
<span class="nv">CLIENTS</span><span class="o">=</span><span class="s2">"sonne mond stern 192.168.1.10 192.168.1.11 192.168.1.12"</span>

<span class="c1"># List of ports</span>
<span class="c1"># we check all of them, if there in use</span>
<span class="nv">NETWORKPORTS</span><span class="o">=</span><span class="s2">"22"</span>
</pre></div>
</td></tr></table></div></div></div><div class="section_1"><h2 id="Dauerlauf-erzwingen">Dauerlauf erzwingen<a class="headerlink" href="#Dauerlauf-erzwingen">¶</a></h2><p>
Man kann den "auto shutdown" mit verschiedenen Methoden unterbinden.
</p><ul><li><p>Indem die Datei <strong>/var/spool/shutdown_off</strong> erzeugt wird. Es genügt dabei, dass diese Datei existiert, der Inhalt ist egal. </p></li><li><p>In der Konfigurationsdatei <strong>/etc/autoshutdown.conf</strong> den Schalter "<code class="notranslate">AUTO_SHUTDOWN=no</code>" aufnehmen.</p></li><li><p>Umbenennen der Datei <strong>/etc/cron.d/checkshutdown</strong> in <strong>/etc/cron.d/checkshutdown.off</strong>. Cron startet keine Dateien mit einem Punkt im Namen.</p></li></ul><p>
</p></div><div class="section_1"><h2 id="Zeitgesteuertes-Aufwachen">Zeitgesteuertes Aufwachen<a class="headerlink" href="#Zeitgesteuertes-Aufwachen">¶</a></h2><p>
Es existieren mehrere Möglichkeiten, den Rechner über die Uhr (RTC) aufzuwecken. Bei neuer Hardware funktioniert ACPI am besten (siehe <a class="internal" href="../rtcwake.html">rtcwake</a>), bei älterer Hardware kommt man eventuell mit <strong>nvram-wakeup</strong> aus dem gleichnamigen Paket zum Ziel.</p><ul><li><p><a class="external" href="http://www.vdr-wiki.de/wiki/index.php/Kategorie:Wakeup" rel="nofollow">Wakeup</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - vdr-wiki.de</p></li></ul><p>
</p><div class="section_2"><h3 id="ACPI-Wakeup">ACPI-Wakeup<a class="headerlink" href="#ACPI-Wakeup">¶</a></h3><p>
</p><ul><li><p><a class="external" href="http://www.vdr-wiki.de/wiki/index.php/ACPI_Wakeup" rel="nofollow">vdr-wiki.de</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="external" href="http://www.mythtv.org/wiki/ACPI_Wakeup" rel="nofollow">mhythtv.org</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><p>
</p></div><div class="section_2"><h3 id="NVRAM-Wakeup">NVRAM-Wakeup<a class="headerlink" href="#NVRAM-Wakeup">¶</a></h3><p>
</p><ul><li><p><a class="interwiki interwiki-sourceforge" href="http://sourceforge.net/projects/nvram-wakeup">Projektseite</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://www.vdr-wiki.de/wiki/index.php/NVRAM_WakeUp" rel="nofollow">vdr-wiki.de</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/></p></li><li><p><a class="external" href="http://www.vdr-wiki.de/wiki/index.php/C't-VDR_-_NVRAM_WakeUp" rel="nofollow">C't-VDR - NVRAM WakeUp</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/></p></li></ul><p>
</p></div></div><div class="section_1"><h2 id="Erweiterungen">Erweiterungen<a class="headerlink" href="#Erweiterungen">¶</a></h2><p>
</p><div class="section_2"><h3 id="Andere-Dienste">Andere Dienste<a class="headerlink" href="#Andere-Dienste">¶</a></h3><p>
<a class="internal" href="../nfs.html">NFS</a> wird noch nicht auf aktive Verbindungen überwacht. Man kann sich behelfen, indem der Client-PC in die Clientliste (<code class="notranslate">CLIENTS=</code>) eingetragen wird.</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="../skripte.html">Skripte</a> <img alt="{Übersicht}" src="../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsseite</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../skripte/auto_off/a/revision/772428.html">Diese Revision</a> wurde am 13. Dezember 2014 20:48 von <a href="https://ubuntuusers.de/user/DeepBlue23/">DeepBlue23</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../skripte.html">Skripte</a></li>
<li><a href="../skripte/auto_off.html">Auto OFF</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>