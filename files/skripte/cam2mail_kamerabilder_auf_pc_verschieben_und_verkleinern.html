<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Skripte/cam2mail_Kamerabilder_auf_PC_verschieben_und_verkleinern › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../skripte/cam2mail_kamerabilder_auf_pc_verschieben_und_verkleinern.html">cam2mail Kamerabilder auf PC verschieben und verkleinern</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Skripte/cam2mail_Kamerabilder_auf_PC_verschieben_und_verkleinern">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../skripte/cam2mail_kamerabilder_auf_pc_verschieben_und_verkleinern/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../skripte/cam2mail_kamerabilder_auf_pc_verschieben_und_verkleinern/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../skripte/cam2mail_kamerabilder_auf_pc_verschieben_und_verkleinern/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../skripte/cam2mail_kamerabilder_auf_pc_verschieben_und_verkleinern/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../skripte/cam2mail_kamerabilder_auf_pc_verschieben_und_verkleinern/a/backlinks.html">cam2mail Kamerabilder auf PC verschieben und verkleinern</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="../trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../rechte.html">Rechte für Dateien und Ordner ändern</a></p></li></ol></div></div><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Problembeschreibung">Problembeschreibung
</a><ol class="arabic"><li><a class="crosslink" href="#Hintergrund">Hintergrund
</a></li></ol></li><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Bedienung">Bedienung
</a></li><li><a class="crosslink" href="#Probleme-und-Einschraenkungen">Probleme und Einschränkungen
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><div class="section_1"><h2 id="Problembeschreibung">Problembeschreibung<a class="headerlink" href="#Problembeschreibung">¶</a></h2><p>
Fotos einer Digitalkamera, wie etwa eines Smartphones, sollen möglichst unkompliziert auf einen Computer verschoben (<a class="internal" href="../rsync.html">synchronisiert</a>), zusätzlich verkleinert und datensparsam per Email verschickt werden können - daher kommt auch der Name des Skripts. Alle Schritte, die keine Benutzerinteraktion erfordern, werden voll automatisiert, alle anderen werden mit den beiden grafischen Hinweisfenstern begleitet.</p><p>Falls man für jemanden den Computer betreut, braucht man bloß selbst noch einmal die Kamera anschließen, den Vorgang abwarten und kann anschließend eine komplette <a class="internal" href="../datensicherung.html">Datensicherung</a> dieses Computers anstoßen, welche ebenfalls alle Bilder enthält. Der Speicher der Kamera ist anschließend für z.B. den nächsten Urlaub wieder komplett leer. Eventuell vorhandene Videos werden einfach mit in den selben Ordner kopiert, aber nicht verkleinert.</p><p>So vereinfacht das Skript unbedarften Benutzern das Nutzen von Digitalkameras teilweise erheblich, minimiert den Betreuungsaufwand und es muss auch deutlich weniger erklärt werden. Beziehungsweise kommen die Erklärungstexte als grafisches Fenster, welches auch ausgedruckt neben den PC bzw. die Kamera gelegt werden kann.</p><div class="section_2"><h3 id="Hintergrund">Hintergrund<a class="headerlink" href="#Hintergrund">¶</a></h3><p>
Oft stellt sich heraus, dass mit Computern sehr unerfahrene Personen auch mit einfachen Grundlagen Probleme haben, etwa dem Markieren mehrerer Dateien sowie dem Verschieben und Einfügen in einen anderen Ordner. Dennoch nutzt heute fast jeder eine Digitalkamera und sei es nur in Form eines Smartphones. Das Verschieben neuer Fotos auf den Computer kann ohne Hilfestellung überfordern. Dazu kommt das Problem, dass nur neue Bilder verschoben werden sollen (Synchronisation). Man könnte nun bestätigen, dass man alle bereits vorhandenen Bilder nicht noch einmal verschieben möchte - aber verkleinern müsste man sie auch noch - nicht mehr und nicht weniger. Doch bereits die Schritte davor werfen Probleme auf:
</p><ul><li><p>Wie schließe ich die Kamera an?</p></li><li><p>Wie kann ich 300 Bilder auf einmal markieren?</p></li></ul><p>Um für diese Nutzergruppe die Nutzung deutlich zu vereinfachen, ist dieses Skript geschrieben worden. Es kann unter der <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/GPLv2">GPLv2</a>-Lizenz frei benutzt, als Anregung gesehen und verändert werden.</p><p>Ein häufiger Anwendungsfall der Nutzung von Digitalfotos ist das Versenden per Email. Deshalb ist das Skript von Grund auf so aufgebaut, dass alle neu übertragenen Bilder zusätzlich in einer verkleinerten Version bereitgestellt werden. Dies spart Übertragungsvolumen, Sende- und Empfangszeit sowie Speicher beim Empfänger. Im Anschluss erfolgt ein grafisches Dialogfenster, welches die Schritte beschreibt, wie man die Bilder in drei Schritten an eine Email anhängt - konkret am Beispiel vom Standard-Emailprogramm <a class="internal" href="../thunderbird.html">Thunderbird</a> unter (X/L)Ubuntu (GNOME/ MATE).</p><p>Man kann die Texte im Skript mit etwas Sorgfalt natürlich an seine eigenen Bedürfnisse anpassen bzw. kürzen - oder den zukünftigen Nutzer darauf hinweisen, dass bestimmte Hinweise ignoriert werden können. Zum Beispiel könnte man in Zeile 95 <code class="notranslate">X,0 GB</code> mit der tatsächlichen Speichergröße des Kameraspeichers anpassen, damit sie leichter im Dateimanager gefunden werden kann, z.B. als <em>"Datenträger 8,0 GB"</em>. Mit einigen grundlegenden <a class="internal" href="../shell.html">Shell</a>-Kenntnissen kann man auch Funktionen weglassen, ändern oder hinzufügen. Dabei sind jedoch die Hinweise unter <a class="crosslink" href="#Bedienung">Bedienung</a> sowie <a class="crosslink" href="#Probleme-und-Einschraenkungen">Probleme und Einschränkungen</a> zwingend zu beachten.</p><p>So sieht das Skript aus - es enthält vor allem in Englisch weitere Kommentare und Hinweise für Entwickler, die wichtigen für Anwender aber kurz in Deutsch und ausführlich hier Artikel:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1"># Linux/ tested on Ubuntu Linux</span>
<span class="c1"># cam2mail - move (not copy!) all files from cam and scale size down (with zenity dialog in German language/ de)</span>

<span class="c1"># DEUTSCH: verschiebe (nicht kopiere!) alles von Cam/Handy und verkleinere Bilder (in ~/bin/cam2mail abspeichern,</span>
<span class="c1"># per Rechtsklick ausführbar machen, in Autostart aufrufen, imagemagick und zenity installieren, in Zeile 33</span>
<span class="c1"># "# Settings and folders:" Ordner etc. anpassen)</span>

<span class="c1"># Author: Benno-007</span>
<span class="c1"># Email: linuxgehtned@habmalnefrage.de</span>

<span class="c1"># LICENCE: GPLv2</span>
<span class="c1">#     This program is free software; you can redistribute it and/or modify it</span>
<span class="c1"># under the terms of the GNU General Public License as published by the Free</span>
<span class="c1"># Software Foundation; only GPLv2. This program is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY</span>
<span class="c1"># or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more</span>
<span class="c1"># details. You should have received a copy of the GNU General Public License along</span>
<span class="c1"># with this program; if not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="c1"># must be executable and should run in autostart from user</span>
<span class="c1"># extra requirements: imagemagick zenity </span>
<span class="c1"># suggestions: nautilus</span>

<span class="c1"># good script and rsync log location (within $PATH): ~/bin/cam2mail</span>
<span class="nv">log</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/bin/cam2mail"</span>

<span class="c1">### Info: pics on cam will be deleted on cam when successfull transmitted to PC:</span>
<span class="c1">### deleted pics on cam: check numbers of cam pictures when deleting one and shoot a new foto to fill out this number gap!</span>
<span class="c1">### otherwise this old number pic can be lost while next sync!</span>
<span class="c1">### deleted pics on PC: will be re-rsync-ed -&gt; that means: after the sync delete all pics on cam before deletion of a pic on ### PC or they will come back from cam</span>

<span class="c1"># Settings and folders:</span>
<span class="nv">cam</span><span class="o">=</span><span class="s2">"/media/A1B2-C3D4/DCIM/100CASIO"</span> 
<span class="nv">source</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/Bilder/Kamera/gross"</span>
<span class="nv">dest</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/Bilder/Kamera/klein"</span>
<span class="nv">tmp</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/Bilder/Kamera/tmp"</span>		<span class="c1"># temporärer Ordner zum Verkleinern</span>
<span class="nv">scale</span><span class="o">=</span><span class="s2">"30%"</span>
<span class="nv">quality</span><span class="o">=</span><span class="s2">"75"</span>

<span class="c1"># First time tasks:</span>

<span class="k">if</span> <span class="o">[</span> ! -d <span class="s2">"</span><span class="nv">$log</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  mkdir -p <span class="s2">"</span><span class="nv">$log</span><span class="s2">"</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> ! -d <span class="s2">"</span><span class="nv">$source</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  mkdir -p <span class="s2">"</span><span class="nv">$source</span><span class="s2">"</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> ! -d <span class="s2">"</span><span class="nv">$dest</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  mkdir -p <span class="s2">"</span><span class="nv">$dest</span><span class="s2">"</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> ! -d <span class="s2">"</span><span class="nv">$tmp</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  mkdir -p <span class="s2">"</span><span class="nv">$tmp</span><span class="s2">"</span>
<span class="k">fi</span>

<span class="c1"># for autodetection of cam:</span>
<span class="c1"># Autostart with integrated cam check within script -&gt; /home/USERNAME/bin/cam2mail/cam2mail</span>
<span class="k">while</span> true<span class="p">;</span> <span class="k">do</span>

<span class="c1"># main program if cam is plugged in</span>
<span class="k">if</span> <span class="o">[</span> -d <span class="s2">"</span><span class="nv">$cam</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  <span class="k">if</span> zenity --question --text<span class="o">=</span><span class="s2">"Fotos (und Videos) werden kopiert und verkleinert und anschließend auf der Kamera ALLE FOTOS und Videos automatisch ohne weitere Nachfrage GELÖSCHT! Der Vorgang kann mehrere Minuten dauern und ist erst beendet, wenn ein neues Informationsfenster erscheint. Bitte jetzt mit "</span>Ja<span class="s2">" bestätigen und ABWARTEN..."</span><span class="p">;</span> <span class="k">then</span>
    mv <span class="s2">"</span><span class="nv">$log</span><span class="s2">"</span>/rsync.log <span class="s2">"</span><span class="nv">$log</span><span class="s2">"</span>/rsync.log.old <span class="m">2</span>&gt;/dev/null
    mv <span class="s2">"</span><span class="nv">$log</span><span class="s2">"</span>/rsync2.log <span class="s2">"</span><span class="nv">$log</span><span class="s2">"</span>/rsync2.log.old <span class="m">2</span>&gt;/dev/null
    <span class="k">if</span> rsync --stats -PSvahHAXx --log-file<span class="o">=</span><span class="s2">"</span><span class="nv">$log</span><span class="s2">"</span>/rsync.log --compare-dest<span class="o">=</span><span class="s2">"</span><span class="nv">$source</span><span class="s2">"</span>/ <span class="s2">"</span><span class="nv">$cam</span><span class="s2">"</span>/ <span class="s2">"</span><span class="nv">$tmp</span><span class="s2">"</span><span class="p">;</span> <span class="k">then</span>
       <span class="nv">rsyncerror</span><span class="o">=</span><span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span>
    <span class="k">fi</span>
    <span class="nb">echo</span> Minification...
    <span class="nb">echo</span> Please wait...
    <span class="k">if</span> <span class="o">[</span> <span class="k">$(</span>find <span class="s2">"</span><span class="nv">$tmp</span><span class="s2">"</span> -iname <span class="s1">'*.jpg'</span> <span class="p">|</span> wc -l<span class="k">)</span> -gt <span class="s2">"0"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
      <span class="nb">cd</span> <span class="s2">"</span><span class="nv">$tmp</span><span class="s2">"</span>
<span class="c1"># type jpg or JPG file format end available on your cam!</span>
      <span class="k">for</span> i in *.<span class="o">{</span>JPG,jpg<span class="o">}</span><span class="p">;</span> <span class="k">do</span>
       convert <span class="s2">"</span><span class="nv">$i</span><span class="s2">"</span> -scale <span class="s2">"</span><span class="nv">$scale</span><span class="s2">"</span> -quality <span class="s2">"</span><span class="nv">$quality</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$dest</span><span class="s2">"</span>/<span class="s2">"</span><span class="nv">$i</span><span class="s2">"</span>
      <span class="k">done</span>
      <span class="nb">echo</span> <span class="s2">"Copying original of new minified pictures from temporay location to destination (error is normal if there are no new pictures to sync and shrink)..."</span>
    <span class="k">fi</span>
    <span class="k">if</span> rsync --stats -PSvahHAXx --log-file<span class="o">=</span><span class="s2">"</span><span class="nv">$log</span><span class="s2">"</span>/rsync2.log --remove-source-files <span class="s2">"</span><span class="nv">$tmp</span><span class="s2">"</span>/ <span class="s2">"</span><span class="nv">$source</span><span class="s2">"</span> <span class="m">1</span>&gt;/dev/null<span class="p">;</span> <span class="k">then</span>
<span class="c1"># delete camera only if every data rsync here and above is without error; check that "$cam" is set and is not "/" to prevent </span>
<span class="c1"># unwanted deletions of system folders "/*" or "//*"; input "//" (transformed to "///*" is not prevented but normally not </span>
<span class="c1"># used and would only delete SOME files likes kernels in "/" but ONLY if you run the script as root what IS NOT RECOMMENDED!</span>
      <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$rsyncerror</span><span class="s2">"</span> <span class="o">==</span>  <span class="s2">"0"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
         <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$cam</span><span class="s2">"</span> !<span class="o">=</span> <span class="s2">""</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
           <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$cam</span><span class="s2">"</span> !<span class="o">=</span> <span class="s2">"/"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
             rm  <span class="s2">"</span><span class="nv">$cam</span><span class="s2">"</span>/*
           <span class="k">fi</span>
         <span class="k">fi</span>
      <span class="k">fi</span>
    <span class="k">fi</span>
    rmdir <span class="s2">"</span><span class="nv">$tmp</span><span class="s2">"</span>
    nautilus <span class="s2">"</span><span class="nv">$dest</span><span class="s2">"</span>
    zenity --no-wrap --info --text<span class="o">=</span><span class="s2">"</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">"1. Übertragung beendet:\n\nDu kannst nun die Kamera (\"X,0 GB\") im Dateimanager (Ordnersymbol) sicher entfernen. Das Kabel erst danach vom PC abziehen.\n\n2. Fotoauswahl treffen:\n\nNun kannst du in den verkleinerten Fotos ans Ende scrollen. Zum Vergrößern ein Foto doppelklicken. Zwischen den Fotos mit den Pfeiltasten der Tastatur \"Links\"/ \"Rechts\" wechseln. Merke oder notiere dir nun die Bildnummer(n), die du versenden willst.\n\n3. Fotos per Email versenden:\n\nNun kannst du ins Emailprogramm \"Thunderbird\" wechseln. Dort öffnest du eine alte Email zum Antworten mit \"Antworten\". Oben links mit dem Büroklammer-Symbol (\"Anhang\") die VERKLEINERTEN Fotos aus dem Ordner "</span><span class="nv">$dest</span><span class="s2">" (voreingestellt) auswählen und einzeln auswählen:\n\nEs können beliebig viele Fotos (besser nicht mehr als drei auf einmal) auf einmal angehangen werden, indem du beim einfachen Anklicken die Taste STRG gedrückt hältst. Oder indem du mehrfach die Büroklammer aufrufst. Welche Fotos du angehangen hast, siehst du in der zu sendenden Email oben rechts. Nun kannst du die Email ganz normal versenden. Du kannst diesen Hinweis nun mit \"OK\" schließen."</span> <span class="p">|</span> fold -s<span class="k">)</span><span class="s2">"</span>
  <span class="k">fi</span>
<span class="c1"># leave after first sync, do not repeat sync while Autostart session</span>
  <span class="nb">exit</span> <span class="m">0</span>
<span class="k">fi</span>
sleep <span class="m">3</span>
<span class="k">done</span>
</pre></div>
</td></tr></table></div></div></div><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Das Skript verwendet <a class="internal" href="../imagemagick.html">ImageMagick</a> zur Verkleinerung der Bilder sowie <a class="internal" href="../zenity.html">Zenity</a> für die Dialoge. Beide Pakete müssen ggf. nachinstalliert<sup><a href="#source-1">[1]</a></sup> werden<sup><a href="#source-2">[2]</a></sup>:</p><ul><li><p><strong>imagemagick</strong></p></li><li><p><strong>zenity</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install imagemagick zenity </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install imagemagick zenity </pre></div></div><p>
</p></div></div><p>Nun legt man einen Unterordner <strong>bin</strong> sowie <strong>bin/cam2mail</strong> in seinem <a class="internal" href="../homeverzeichnis.html">Homeverzeichnis</a> an, speichert das Skript dort in einer gleichnamigen Textdatei <strong>cam2mail</strong> und macht das Skript danach per Rechtsklick ausführbar<sup><a href="#source-3">[3]</a></sup>. Wer diese Schritte bequem über allgemeingültige <a class="internal" href="../terminal.html">Terminal</a>-Befehle erledigen möchte, kann dazu folgende Befehle verwenden:</p><ol class="arabic"><li><p>Verzeichnis <strong>bin/cam2mail</strong> im eigenen Homeverzeichnis wird angelegt: </p><div class="bash"><div class="contents"><pre class="notranslate">mkdir -p ~/bin/cam2mail </pre></div></div></li><li><p>Skript markieren, kopieren und in einem <a class="internal" href="../editor.html">Editor</a> einfügen und als Datei <strong>cam2mail</strong> abspeichern<sup><a href="#source-4">[4]</a></sup>.</p></li><li><p>Das Skript ausführbar machen: </p><div class="bash"><div class="contents"><pre class="notranslate">chmod u+x ~/bin/cam2mail/cam2mail </pre></div></div></li></ol><p>
Anschließend müssen noch die Angaben <code class="notranslate">Settings and folders</code> für die Einstellungen der gewünschten Verkleinerungsqualität, dem Ordner der Kamera und dem Zielordner in Zeile 34-39 angepasst werden. Die Qualität sollte wegen der Dateigröße 75-95 nicht übersteigen, zur Verkleinerung ist standardmäßig 30% eingestellt, was bei den meisten großen Bildern der heutigen Kameras für eine Email mehr als ausreicht und dennoch übergroße Dateianhänge oder unerwünschtes horizontales Scrollen beim Empfänger minimiert.</p><p>Die Ordner sollten nicht freigelassen werden, um unbeabsichtigte Programmierfehler zu vermeiden, auch wenn für den gröbsten Fehler ein Sicherungsmechanismus gegen versehentliches Löschen eingebaut ist. Den genauen Ordner der Kamera erfährt man, indem man diese ansteckt und anschließend unter<sup><a href="#source-2">[2]</a></sup>
</p><div class="bash"><div class="contents"><pre class="notranslate">mount </pre></div></div><p>
in der letzten Zeile nachsieht - oder einfach im <a class="internal" href="../dateimanager.html">Dateimanager</a>. Die anderen Ordner sind für die großen, die kleinen sowie temporär gespeicherte Bilder (kurzzeitig für die Verkleinerung) und müssen existieren. Sie werden bei Erstbenutzung des Skriptes automatisch angelegt.</p><p>Anschließend werden die Bilder bei Bestätigung der Nachfrage automatisch synchronisiert, zusätzlich verkleinert (dies muss ein anderer Ordner sein, sonst werden die Originale verkleinert) sowie auf der Kamera gelöscht. Dieses Vorgehen soll nicht ohne weitere Überlegungen geändert werden, wie unter <a class="crosslink" href="#Probleme-und-Einschraenkungen">Probleme und Einschränkungen</a> erläutert wird.</p></div><div class="section_1"><h2 id="Bedienung">Bedienung<a class="headerlink" href="#Bedienung">¶</a></h2><p>
Man steckt zuvor die Kamera an. Das Programm kann anschließend über das <a class="internal" href="../terminal.html">Terminal</a> gestartet und getestet<sup><a href="#source-2">[2]</a></sup> werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">~/bin/cam2mail/cam2mail </pre></div></div><p>
Das Programm startet und führt mit wenigen Dialogschritten durch den Vorgang. Es ist zu beachten, dass während den Kopier-, Verkleinerungs- und Löschvorgängen einige Minuten vergehen könnten, in welche noch keine neue Meldung vom Skript kommt. Diese Zeit muss abgewartet werden und hängt von der Menge, Größe und Verkleinerungsstufe der Bilder ab.</p><p>
</p><table style="float: left; clear: right; margin-top: 0px; border: none"><tr class="titel"><td> <img alt="cam2mail.png" class="image-default" src="../_/ebb55fee93a38c59818b953f6dea9f36ed1b558e.png"/></td></tr><tr class="normal"><td style="text-align: center; width: 300px"> cam2mail: Dialogfenster</td></tr></table><p>Funktioniert es ordnungsgemäß, kann man es als
</p><div class="bash"><div class="contents"><pre class="notranslate">/home/BENUTZERNAME/bin/cam2mail/cam2mail </pre></div></div><p>
in den <a class="internal" href="../autostart.html">Autostart</a> eintragen, wobei der eigene <code class="notranslate">BENUTZERNAME</code> des eigenen <a class="internal" href="../homeverzeichnis.html">Homeverzeichnisses</a> einzutragen ist. Es wird im Skript in Zeile 100 dann endlos alle 3 Sekunden geprüft, ob die Kamera angesteckt wurde - eleganter könnte man das natürlich mit <a class="internal" href="../udev.html">udev</a> regeln, aber es gibt auch Vorteile solcher einfacher Lösungen, die sich zudem im <a class="internal" href="../homeverzeichnis.html">Homeverzeichnis</a> mit sichern lassen. Man steckt nun die Kamera an, das Programm startet automatisch durch den Autostart und führt mit wenigen Dialogschritten durch den Vorgang.</p><p>Eingetragen sind die Unterstützung für die Bilder-Dateiendungen <strong>JPG</strong> sowie <strong>jpg</strong>, ansonsten muss man dies in Zeile 76 anpassen. Dann sind allerdings eventuell weitere Anpassungen nötig, falls die Verkleinerung nicht direkt klappt. Die meisten Kameras und Smartphones speichern als <strong>jpg</strong>-Dateien ab.</p><p>Wenn man nun den PC neugestartet (oder schneller: neu eingeloggt) hat und der Autostart damit aktiv wurde, kann man das Programm nochmals testen. Zuvor sollte man ein neues Testfoto geschossen haben, was übertragen, verkleinert und gelöscht werden soll.</p><p>Nach Beendigung des Verschiebe-Vorgangs wird der im Skript in Zeile 94 voreingestellte <a class="internal" href="../dateimanager.html">Dateimanager</a> Nautilus zum Öffnen des Ordners der verkleinerten Bilder gestartet - dort kann entsprechend auch ein anderer eingetragen werden, muss aber nicht.</p><p>Zusätzlich kann man zum Beispiel unter Ubuntu im Standard-Dateimanager <a class="internal" href="../nautilus.html">Nautilus</a> ausschließlich den Ordner der Bilder (bei <a class="internal" href="../14.04.html">14.04</a>: Einstellung gespeichert für alle Ordner) mit den Tastenkombinationen 
<span class="key">Strg</span>  + 
<span class="key">2</span>  in die Vorschauansicht bringen sowie mit mehrfachem 
<span class="key">Strg</span>  + 
<span class="key">+</span>  soweit vergrößern wie gewünscht, damit nicht auch noch ein weiteres Fenster mit einem weiteren Programm (Bildbetrachter oder Bildverarbeitung) erklärt werden muss, solange man die Bilder nur verwalten möchte und nur als einfach zu benutzende Vorschau braucht.</p><p>Ein Doppelklick öffnet ohnehin die große Ansicht in einem externen Bildbetrachter und danach kann man meist die Pfeiltasten oder die Leertaste zum Weiterblättern verwenden. Mit <em>"X"</em> im Fenstertitel schließt man ein Fenster, muss man für die Zielgruppe ggf. auch noch erklären. Es bietet sich auch an, den Ordner für die kleinen Bilder im Emailprogramm bereits voreinzustellen, was eine erhebliche Erleichterung für die weniger mit Ordnerkonzepten vertraute Zielgruppe darstellt.</p><p>Wenn die Kamera nicht mehr erkannt wird, ist zu prüfen, ob der PC - wie für eine erneute Erkennung nach dem Abziehen erforderlich - neugestartet wurde (keine Bereitschaft oder Ruhezustand) oder ob der Ordner der Kamera sich verändert haben könnte. Dies liegt daran, dass das Skript nach dem ersten Synchronisationsvorgang beendet wird und damit der Autostart bis zum Neustart nicht mehr wirksam ist. Das ist der Nachteil der Autostart-Variante, jedoch einfacher als eine udev-Regel und leicht zu sichern.</p><p>Wie im Folgenden erklärt wird, sollte man bei Verwendung des Skriptes zur Rücksichtnahme auf die Synchronisation auch einzelne Bilder stets nur auf dem Computer und nicht auf der Kamera löschen.</p></div><div class="section_1"><h2 id="Probleme-und-Einschraenkungen">Probleme und Einschränkungen<a class="headerlink" href="#Probleme-und-Einschraenkungen">¶</a></h2><p>
Das Skript ist wie beschrieben auf einen ganz konkreten und eigentlich privaten Zweck zugeschnitten und wird freigegeben, wie es ist. Voraussetzung ist, dass die Kamera einen <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/USB-Massenspeicher">USB-Massenspeicher</a>-Modus anbietet, damit man einen dazugehörigen Kameraordner mit den Fotos eintragen kann. Der Name des Verzeichnispfades (mit <a class="internal" href="../mount.html">Mountpoint</a>) basiert meist auf einer <a class="internal" href="../uuid.html">UUID</a> oder einem <a class="internal" href="../labels.html">Label</a> - da sich diese beim Formatieren ändern, darf man in dieser Konfiguration also nicht ohne Änderung des Ordnernamens im Skript die Speicherkarte formatieren (bei vielen Modellen auch nicht alle Bilder löschen) oder gar wechseln. Es wird vom einfachen Benutzer mit der immer gleichen Speicherkarte ausgegangen.</p><p>Des Weiteren soll dem unbedarften Benutzer auch diese Arbeit und Aufmerksamkeit für das manuelle Löschen der Bilder abgenommen werden, indem bereits übertragene Bilder automatisch von der Kamera gelöscht werden.</p><p>Das ist auch dafür wichtig, damit die dadurch freiwerdenden Durchnummerierungen der Bilder von den meisten Kameras sonst noch einmal verwendet und entsprechend beim nächsten Benutzen des Programmes noch einmal kopiert würden, was die alten Bilder mit der ehemals selben Nummer überschreiben und damit unwiederbringlich löschen würde. Wem diese Erklärung zu kompliziert war: Kein Bild geht verloren, wenn man einzelne Bilder immer nur auf dem Computer löscht anstatt auf der Kamera. Dies sollte man dem zukünftigen Benutzer noch mit auf den Weg geben.</p><p>Alle Synchronisationsvorgänge mit <a class="internal" href="../rsync.html">rsync</a> werden abwechselnd in den selben vier <a class="internal" href="../logdateien.html">Logdateien</a> <strong>rsync[2].log[.old]</strong> im standardmäßigen Ordner des Skriptes <strong>~/bin/cam2mail</strong> protokolliert, welcher sich in Zeile 26 anpassen lässt - man sollte also bei Fragen und Problemen zunächst dort nachsehen und im Problemfall diese Dateien auf jeden Fall an einen zweiten sicheren Ort kopieren, bevor man sie mit weiteren Versuchen neu überschreiben lässt. Damit stellt man sicher, dass man im Nachhinein noch auswerten kann, welche Aktionen wann wie mit welchen Bildern durchgeführt wurden. Weitere Spezialvorgänge oder Sonderfälle werden von dem Skript nicht abgedeckt.</p><p>Für diesen konkreten Einsatzzweck funktioniert es hervorragend. Jede kleinere Abweichung vom deklarierten Programmiercode oder erheblich vom Bedienzweck kann Nebenwirkungen wie Verlust der Bilder oder gar anderer Daten zur Folge haben. Das Skript sollte aus Sicherheitsgründen daher <span class="underline">nicht</span> mit <a class="internal" href="../sudo.html">sudo</a>-Rechten ausgeführt werden, wie jedes andere Benutzerskript auch. Hält man sich an diese Hinweise und benutzt es, wie es ist, funktioniert es einfach, zuverlässig und sicher wie gewünscht - wie jedes andere gewöhnliche Programm auch.</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="../skripte.html">Skripte</a> <img alt="{Übersicht}" src="../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/></p></li><li><p><a class="internal" href="../bilder_verwalten.html#Bilder-importieren">Bilder verwalten</a> <img alt="{Übersicht}" src="../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/></p></li><li><p><a class="internal" href="../verzeichnisstruktur.html">Verzeichnisstruktur</a></p></li><li><p><a class="internal" href="../autostart.html">Autostart</a></p></li><li><p><a class="internal" href="../rsync.html">rsync</a></p></li><li><p><a class="internal" href="../imagemagick.html">ImageMagick</a></p></li><li><p><a class="internal" href="../zenity.html">Zenity</a></p></li><li><p><a class="internal" href="../shell.html">Shell</a></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../skripte/cam2mail_kamerabilder_auf_pc_verschieben_und_verkleinern/a/revision/940182.html">Diese Revision</a> wurde am 7. Mai 2017 13:42 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../skripte.html">Skripte</a></li>
<li><a href="../skripte/cam2mail_kamerabilder_auf_pc_verschieben_und_verkleinern.html">cam2mail Kamerabilder auf PC verschieben und verkleinern</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>