<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Skripte/zeitgesteuerte_Befehlsausführung › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../skripte/zeitgesteuerte_befehlsausführung.html">zeitgesteuerte Befehlsausführung</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Skripte/zeitgesteuerte_Befehlsausführung">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../skripte/zeitgesteuerte_befehlsausführung/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../skripte/zeitgesteuerte_befehlsausführung/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../skripte/zeitgesteuerte_befehlsausführung/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../skripte/zeitgesteuerte_befehlsausführung/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../skripte/zeitgesteuerte_befehlsausführung/a/backlinks.html">zeitgesteuerte Befehlsausführung</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../rechte.html">Rechte für Dateien und Ordner ändern</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Ausfuehrung-nach-Ablauf-einer-Zeitspanne">Ausführung nach Ablauf einer Zeitspanne
</a><ol class="arabic"><li><a class="crosslink" href="#Skript">Skript
</a></li><li><a class="crosslink" href="#Benutzung">Benutzung
</a></li><li><a class="crosslink" href="#Anwendungsbeispiel-mit-VLC">Anwendungsbeispiel mit VLC
</a></li></ol></li><li><a class="crosslink" href="#Ausfuehrung-zu-einer-Uhrzeit">Ausführung zu einer Uhrzeit
</a><ol class="arabic"><li><a class="crosslink" href="#Skript-2">Skript
</a></li><li><a class="crosslink" href="#Anwendungsbeispiel-mit-MPlayer">Anwendungsbeispiel mit MPlayer
</a></li></ol></li><li><a class="crosslink" href="#Flexible-und-genaue-Ausfuehrung-nach-Zeitspanne-oder-Uhrzeit">Flexible und genaue Ausführung nach Zeitsp...</a><ol class="arabic"><li><a class="crosslink" href="#Skript-3">Skript
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/terminal.png" class="image-left" src="../_/e81889fd6e485dd32e1cde611eabc18abced7993.png"/>
Die folgenden Skripte erlauben es, zum Ende eines bestimmten Zeitintervalls oder zu einer bestimmten Uhrzeit einen Befehl im Terminal ausführen zu lassen – solange der Benutzer, von dem das Skript ausgeführt wird, angemeldet ist.</p><p>Als Anwendungsbeispiel wird das Abspielen von Multimediadateien mittels <a class="internal" href="../vlc.html">VLC</a>, <a class="internal" href="../mplayer.html">MPlayer</a> oder <a class="internal" href="../totem.html">Totem</a> aufgeführt. Man kopiert die Bash-Skripte mit einem Editor<sup><a href="#source-2">[2]</a></sup> in eine Datei, speichert sie danach und macht sie ausführbar<sup><a href="#source-3">[3]</a></sup>.</p><p>Grafische Alternativen bieten folgende Programme:</p><ul><li><p><a class="internal" href="../alarm_clock.html">Alarm Clock</a></p></li><li><p><a class="interwiki interwiki-launchpad" href="https://launchpad.net/wakeup">Wakeup</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="https://extensions.gnome.org/extension/53/pomodoro/" rel="nofollow">Pomodoro</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> (GNOME 3)</p></li><li><p><a class="internal" href="../kalarm.html">KAlarm</a> (KDE)</p></li><li><p><a class="internal" href="../ktimer.html">KTimer</a> (KDE)</p></li></ul><p>
</p><div class="section_1"><h2 id="Ausfuehrung-nach-Ablauf-einer-Zeitspanne">Ausführung nach Ablauf einer Zeitspanne<a class="headerlink" href="#Ausfuehrung-nach-Ablauf-einer-Zeitspanne">¶</a></h2><p>
Es müssen die Stunden, Minuten und Sekunden nach deren Ablauf der Befehl ausgeführt werden soll, angegeben werden.</p><div class="section_2"><h3 id="Skript">Skript<a class="headerlink" href="#Skript">¶</a></h3><p>
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
sleep <span class="k">$((</span><span class="m">3600</span><span class="o">*</span><span class="nv">$1</span> <span class="o">+</span> <span class="m">60</span><span class="o">*</span><span class="nv">$2</span> <span class="o">+</span> <span class="nv">$3</span><span class="k">))</span>
<span class="c1"># Hier den auszuführenden Befehl einfügen</span>
</pre></div>
</td></tr></table></div></div><div class="section_2"><h3 id="Benutzung">Benutzung<a class="headerlink" href="#Benutzung">¶</a></h3><p>
Grundsätzlich muss das Programm so im Terminal<sup><a href="#source-1">[1]</a></sup> aufgerufen werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">./skriptname.sh &lt;Stunden&gt; &lt;Minuten&gt; &lt;Sekunden&gt; </pre></div></div><p>
<strong>skriptname.sh</strong> steht für den gewählten Dateinamen. Das Ausführen via Nautilus funktioniert nicht, da die Zeitparameter angegeben werden müssen.</p><ul><li><p>Für <code class="notranslate">&lt;Stunden&gt;</code> setzt man die Anzahl der Stunden ein.</p></li><li><p>Für <code class="notranslate">&lt;Minuten&gt;</code> setzt man die Anzahl der Minuten ein.</p></li><li><p>Für <code class="notranslate">&lt;Sekunden&gt;</code> setzt man die Anzahl der Sekunden ein.</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Anwendungsbeispiel-mit-VLC">Anwendungsbeispiel mit VLC<a class="headerlink" href="#Anwendungsbeispiel-mit-VLC">¶</a></h3><p>
Als Befehl wird folgendes in Zeile 3 eingefügt:
</p><div class="bash"><div class="contents"><pre class="notranslate">vlc -f -R --no-osd $4 </pre></div></div><p>Wer nicht möchte, dass das Video wiederholt wird, entfernt einfach den Parameter <code class="notranslate">-R</code>. Wer keinen Vollbild-Modus möchte oder Musik hört, kann den Parameter <code class="notranslate">-f</code> entfernen.</p><p>Zum Aufrufen des Skriptes muss dann noch der Pfad zur Mediendatei, beziehungsweise die URL hinzugefügt werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">./skriptname.sh &lt;Stunden&gt; &lt;Minuten&gt; &lt;Sekunden&gt; &lt;Pfad/URL&gt; </pre></div></div></div></div><div class="section_1"><h2 id="Ausfuehrung-zu-einer-Uhrzeit">Ausführung zu einer Uhrzeit<a class="headerlink" href="#Ausfuehrung-zu-einer-Uhrzeit">¶</a></h2><p>
Diese Variante erlaubt es, eine Uhrzeit im Format <code class="notranslate">hhmm</code> einzugeben zu der der Befehl ausgeführt werden soll.</p><div class="section_2"><h3 id="Skript-2">Skript<a class="headerlink" href="#Skript-2">¶</a></h3><p>
Dieses Skript ist auch aus dem Dateimanager mittels der Option <em>Im Terminal ausführen</em> ausführbar. Es arbeitet mit Eingabe der Uhrzeit durch den Benutzer direkt im Terminal.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nb">echo</span> <span class="s2">"Wann soll der Befehl ausgeführt werden? (hhmm)"</span>
<span class="nb">read</span> u
<span class="k">while</span> <span class="o">[</span> <span class="k">$(</span>date +%H%M<span class="k">)</span> -ne <span class="nv">$u</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>
    sleep <span class="m">55</span>
<span class="k">done</span>
<span class="c1"># Hier den auszuführenden Befehl einfügen</span>
</pre></div>
</td></tr></table></div><p>Da dieses Skript, um CPU-Last zu sparen, nur alle 55 Sekunden die Uhrzeit überprüft, wird der Befehl nicht genau um hh:mm:00 ausgeführt, sondern bis zu 55 Sekunden später.</p></div><div class="section_2"><h3 id="Anwendungsbeispiel-mit-MPlayer">Anwendungsbeispiel mit MPlayer<a class="headerlink" href="#Anwendungsbeispiel-mit-MPlayer">¶</a></h3><p>
Hier wird zusätzlich der Pfad zur Datei abgefragt.
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nb">echo</span> <span class="s2">"Wann soll geweckt werden? (hhmm)"</span>
<span class="nb">read</span> u

<span class="nb">echo</span> <span class="s2">"Welche Datei? (Pfad zur Mediendatei kopieren und einfügen)"</span>
<span class="nb">read</span> p

<span class="k">while</span> <span class="o">[</span> <span class="k">$(</span>date +%H%M<span class="k">)</span> -ne <span class="nv">$u</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>
    sleep <span class="m">55</span>
<span class="k">done</span>

mplayer <span class="nv">$p</span>
</pre></div>
</td></tr></table></div></div></div><div class="section_1"><h2 id="Flexible-und-genaue-Ausfuehrung-nach-Zeitspanne-oder-Uhrzeit">Flexible und genaue Ausführung nach Zeitspanne oder Uhrzeit<a class="headerlink" href="#Flexible-und-genaue-Ausfuehrung-nach-Zeitspanne-oder-Uhrzeit">¶</a></h2><p>
Das nachfolgende Skript eignet sich, um einen Befehl flexibel entweder zu einer bestimmten Uhrzeit oder nach einer Zeitspanne auszuführen. Dabei wird der Befehl <code class="notranslate">date</code> verwendet, um die eingegebene Zeit um zurechnen und als Befehl wird Totem gestartet. Die Zeit kann theoretisch bis auf die Nanosekunde genau festgelegt werden.</p><p>Man führt das Skript so aus:
</p><div class="bash"><div class="contents"><pre class="notranslate">./wecker.sh &lt;Zeitspanne|Uhrzeit&gt; &lt;Datei&gt; </pre></div></div><p>
</p><ul><li><p><strong>wecker.sh</strong> muss durch den Namen des Skripts ausgetauscht werden.</p></li><li><p><code class="notranslate">&lt;Zeitspanne|Uhrzeit&gt;</code> kann durch die Zeitspanne oder Uhrzeit, zu bzw. nach der man geweckt werden möchte, ersetzt werden. Mögliche Eingaben sind: <code class="notranslate">HH:MM</code>, <code class="notranslate">HH:MM:SS</code>, <code class="notranslate">"YYYY-MM-DD HH:MM"</code>, <code class="notranslate">"tomorrow 11:00"</code>, <code class="notranslate">100sec</code>, <code class="notranslate">30min</code>, <code class="notranslate">20hours</code>, <code class="notranslate">"1hours 15min"</code>, ...</p></li><li><p><code class="notranslate">&lt;Datei&gt;</code> kann durch den Dateinamen der Multimediadatei ersetzt werden.</p></li></ul><p>Die Parameterangaben sind optional. Sie können auch im Programm selber angegeben werden. Enthalten die Parameter Leerzeichen, dann müssen sie in Anführungszeichen eingeschlossen werden. Es kann keine Datei ohne Zeitspanne eingegeben werden.</p><div class="section_2"><h3 id="Skript-3">Skript<a class="headerlink" href="#Skript-3">¶</a></h3><p>
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">]</span>
<span class="k">then</span>
    <span class="nv">zeit</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
<span class="k">else</span>
    <span class="nb">echo</span> <span class="s2">"Wann soll der Wecker klingeln?"</span>
    <span class="nb">read</span> zeit
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> -f <span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span> <span class="o">]</span>
<span class="k">then</span>
    <span class="nv">dateiname</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span>
<span class="k">else</span>
    <span class="nb">echo</span> <span class="s2">"Welche Datei soll abgespielt werden?"</span>
    <span class="nb">read</span> dateiname
<span class="k">fi</span>

<span class="nv">jetzt</span><span class="o">=</span><span class="k">$(</span>date +%s<span class="k">)</span> <span class="c1"># Zeit jetzt, in Sekunden seit 1970</span>
<span class="nv">spaeter</span><span class="o">=</span><span class="k">$(</span>date -d <span class="s2">"</span><span class="nv">$zeit</span><span class="s2">"</span> +%s<span class="k">)</span> <span class="c1"># Zeit für die Ausführung des Befehls, in Sekunden seit 1970</span>
<span class="nv">spaeterlesbar</span><span class="o">=</span><span class="k">$(</span>date -d <span class="s2">"</span><span class="nv">$zeit</span><span class="s2">"</span> +%Y-%m-%d-%H:%M:%S<span class="k">)</span> <span class="c1"># menschenlesbare Zeit für die Ausführung des Befehls</span>
<span class="nv">sleepsekunden</span><span class="o">=</span><span class="k">$((</span><span class="nv">$spaeter</span> <span class="o">-</span> <span class="nv">$jetzt</span><span class="k">))</span> <span class="c1"># Zeit in Sekunden für sleep</span>
<span class="nb">echo</span> <span class="s2">"in </span><span class="k">$((</span><span class="nv">$sleepsekunden</span> <span class="o">/</span> <span class="m">60</span><span class="k">))</span><span class="s2"> minuten um </span><span class="nv">$spaeterlesbar</span><span class="s2"> wird der Befehl ausgeführt."</span> <span class="c1"># kleine Ausgabe um zu sehen, ob man alles richtig eingegeben hat</span>
sleep <span class="nv">$sleepsekunden</span>

totem <span class="nv">$dateiname</span> <span class="c1"># auszuführender Befehl</span>
</pre></div>
</td></tr></table></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="../at.html">at</a> - zeitgesteuerte Ausführung von Kommandozeilenprogrammen</p></li><li><p><a class="internal" href="../skripte.html">Skripte</a> <img alt="{Übersicht}" src="../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../skripte/zeitgesteuerte_befehlsausführung/a/revision/858473.html">Diese Revision</a> wurde am 16. Dezember 2015 10:08 von <a href="https://ubuntuusers.de/user/aasche/">aasche</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../skripte.html">Skripte</a></li>
<li><a href="../skripte/zeitgesteuerte_befehlsausführung.html">zeitgesteuerte Befehlsausführung</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>