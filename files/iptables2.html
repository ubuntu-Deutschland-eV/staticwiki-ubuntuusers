<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>iptables2 › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./iptables2.html">iptables2</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/iptables2">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./iptables2/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./iptables2/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./iptables2/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./iptables2/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./iptables2/a/backlinks.html">iptables2</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><div class="box improvable"><h3 class="box improvable">Ausbaufähige Anleitung</h3><div class="contents"><p>
Dieser Anleitung fehlen noch einige Informationen. Wenn Du etwas
verbessern kannst, dann editiere den Beitrag, um die Qualität
des Wikis noch weiter zu verbessern.
</p><hr/><p><strong>Anmerkung:</strong> Dieser Artikel beschreibt die grundsätzliche Funktionalität von iptables. Weitere Beispiele und Details, insbesonders zum Thema NAT (Network Address Translation) können hinzugefügt werden.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./paketquellen_freischalten.html">Bearbeiten von Paketquellen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a></p></li></ol></div></div><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Grundlagen-der-Paketpruefung">Grundlagen der Paketprüfung
</a></li><li><a class="crosslink" href="#Funktionsweise-von-iptables">Funktionsweise von iptables
</a><ol class="arabic"><li><a class="crosslink" href="#Tabellen">Tabellen
</a></li><li><a class="crosslink" href="#Chains">Chains
</a></li><li><a class="crosslink" href="#Definition-der-Filterregel">Definition der Filterregel
</a></li><li><a class="crosslink" href="#Policies">Policies
</a></li></ol></li><li><a class="crosslink" href="#Weitere-Optionen-und-Moeglichkeiten">Weitere Optionen und Möglichkeiten
</a></li><li><a class="crosslink" href="#Einsatz-von-iptables">Einsatz von iptables
</a></li><li><a class="crosslink" href="#Graphische-Benutzeroberflaeche">Graphische Benutzeroberfläche
</a></li><li><a class="crosslink" href="#Links">Links
</a><ol class="arabic"><li><a class="crosslink" href="#Intern">Intern
</a></li><li><a class="crosslink" href="#Extern">Extern
</a></li></ol></li></ol></div><p>Mit Hilfe von <a class="external" href="http://www.iptables.org/projects/iptables/index.html" rel="nofollow">iptables</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> wird <a class="external" href="http://www.netfilter.org" rel="nofollow">Netfilter</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> , der IP-Paketfilter des <a class="internal" href="./kernel.html">Linuxkernels</a> konfiguriert. Paketfilter werden üblicherweise in Routern und Firewalls eingesetzt.</p><p>iptables und Netfilter wurden mit dem Linux Kernel 2.4 eingeführt und unverändert in den Kernel 2.6 übernommen.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
iptables ist üblicherweise in der Standardinstallation von Ubuntu enthalten. Ansonsten kann das entsprechende Paket</p><ul><li><p><strong>iptables</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install iptables </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install iptables </pre></div></div><p>
</p></div></div><p>nachinstalliert werden <sup><a href="#source-1">[1]</a></sup>.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die in diesem Artikel dargestellten Inhalte beziehen sich auf die IPv4-Implementation von iptables. Zu beachten ist, dass Rechner in der Standard-Installation zusätzlich immer auch IPv6 bedient und die entsprechenden Regeln analog auch mit <strong>ip6tables</strong> gepflegt werden müssen. Regeln über iptables (=IPv4) haben keinerlei Auswirkungen, wenn der Rechner über IPv6 angesprochen wird und dementsprechend erweist sich die IPv4-iptables als nicht weiter relevant.
</p></div></div></div><div class="section_1"><h2 id="Grundlagen-der-Paketpruefung">Grundlagen der Paketprüfung<a class="headerlink" href="#Grundlagen-der-Paketpruefung">¶</a></h2><p>
Ist der Paketfilter des Kernel aktiv (d.h. sind mit iptables erstellte Filterregeln konfiguriert), so werden alle IP-Datenpakete geprüft. Ankommende Pakete werden geprüft, bevor sie an die Zielanwendung geleitet werden, ausgehende Pakete werden geprüft, bevor sie den Rechner verlassen. Agiert der Rechner als Router (z.B. in einem Netzwerk), so werden die Pakete während der Weiterleitung geprüft. Außerdem besteht auch die Möglichkeit der Paketmanipulation. Die Art der Prüfung lässt sich mit Hilfe von iptables sehr detailliert vorgeben.</p></div><div class="section_1"><h2 id="Funktionsweise-von-iptables">Funktionsweise von iptables<a class="headerlink" href="#Funktionsweise-von-iptables">¶</a></h2><p>
Die Paketprüfung und die mit iptables zu erstellenden Filterregeln sind dreistufig aufgebaut. Es gibt (hierarchisch von oben nach unten):
</p><ul><li><p>Tabellen</p></li><li><p>sogenannte "Chains" (Ketten)</p></li><li><p>die eigentliche Filterregeln</p></li></ul><p>Trifft eine in einer Tabelle und Chain definierte Regel zu, so wird die in der Regel hinterlegte <a class="crosslink" href="#aktion">Aktion</a> ausgeführt. Sollte keine Regel zutreffen (was durchaus nichts ungewöhnliches ist), so wird die in der Tabelle hinterlegte, allgemein gültige <a class="crosslink" href="#policy">Policy</a> angewendet.</p><div class="section_2"><h3 id="Tabellen">Tabellen<a class="headerlink" href="#Tabellen">¶</a></h3><p>
In den Tabellen werden Filterregeln zu Gruppen zusammengefasst, unterteilt nach der grundsätzlichen Aufgabe. Es gibt vier wichtige Tabellen (=Regelsätze), in der die Filterregeln hinterlegt werden können:</p><table><tr class="titel"><td colspan="2"><strong>verschiedene Tabellen von iptables</strong></td></tr><tr class="kopf"><td><strong>Tabelle</strong></td><td><strong>Beschreibung</strong></td></tr><tr><td><code class="notranslate">filter</code></td><td>Dies ist die Standardtabelle. Wie der Name vermuten lässt werden hier alle "reinen" Filterregeln hinterlegt.</td></tr><tr><td><code class="notranslate">nat</code></td><td>Diese Tabelle wird in der Regel für Adressumsetzung (NAT = Network Address Translation) und spezielle Weiterleitungen (Port Forwarding) eingesetzt.</td></tr><tr><td><code class="notranslate">mangle</code></td><td>Diese Tabelle wird in der Regel bei gewünschter Paketmanipulation eingesetzt.</td></tr><tr><td><code class="notranslate">raw</code></td><td>Diese Tabelle wird in der Regel eingesetzt um Ausnahmen vom Connection Tracking zu definieren.</td></tr></table><p>
</p></div><div class="section_2"><h3 id="Chains">Chains<a class="headerlink" href="#Chains">¶</a></h3><p>
Jede Tabelle enthält verschiedene Chains. Die Chains legen fest, wann ein Paket geprüft wird (z.B. bevor es versendet wird). Es gibt fünf verschiedene Chains, wobei nicht jede Chain in jeder Tabelle vorkommt.</p><table><tr class="titel"><td colspan="3"><strong>Chains von iptables</strong></td></tr><tr class="kopf"><td><strong>Chain</strong></td><td><strong>für Tabelle</strong></td><td><strong>Beschreibung</strong></td></tr><tr><td><code class="notranslate">INPUT</code></td><td><code class="notranslate">filter</code>, <code class="notranslate">mangle</code></td><td>Wird auf alle Pakete angewendet, die an einen lokalen Prozess gerichtet sind.</td></tr><tr><td><code class="notranslate">OUTPUT</code></td><td><code class="notranslate">filter</code>, <code class="notranslate">nat</code>, <code class="notranslate">mangle</code>, <code class="notranslate">raw</code></td><td>Wird auf alle Pakete angewendet, die von einem lokalen Prozess stammen.</td></tr><tr><td><code class="notranslate">FORWARD</code></td><td><code class="notranslate">filter</code>, <code class="notranslate">mangle</code></td><td>Wird auf alle Pakete angewendet, die geroutet werden.</td></tr><tr><td><code class="notranslate">PREROUTING</code></td><td><code class="notranslate">nat</code>, <code class="notranslate">mangle</code>, <code class="notranslate">raw</code></td><td>Wird auf alle Pakete angewendet, <em>bevor</em> diese geroutet werden.</td></tr><tr><td><code class="notranslate">POSTROUTING</code></td><td><code class="notranslate">nat</code>, <code class="notranslate">mangle</code></td><td>Wird auf alle Pakete angewendet, <em>nachdem</em> diese geroutet wurden.</td></tr></table><p>
</p></div><div class="section_2"><h3 id="Definition-der-Filterregel">Definition der Filterregel<a class="headerlink" href="#Definition-der-Filterregel">¶</a></h3><p>
In den Tabellen und Chains werden die Filterregelsätze festgelegt. Dies geschieht über einen Aufruf von iptables im Terminal <sup><a href="#source-3">[3]</a></sup>, wobei die allgemeine Syntax von iptables wie folgt ist:</p><div class="bash"><div class="contents"><pre class="notranslate">iptables &lt;Option&gt; </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Der Aufruf von iptables erfordert immer <a class="internal" href="./sudo.html">Root-Rechte</a>.
</p></div></div><p>Dazu kennt iptables eine Vielzahl von Optionen, von den im folgenden einige (primär für die Tabelle "filter" und die Chains <code class="notranslate">INPUT</code>, <code class="notranslate">OUTPUT</code> und <code class="notranslate">FORWARD</code>) erklärt werden.</p><p><a class="crosslink anchor" href="#optionen" id="optionen"></a>
</p><table><tr class="titel"><td colspan="2"><strong>Optionen für Filterregeln</strong></td></tr><tr class="kopf"><td><strong>Option</strong></td><td><strong>Beschreibung</strong></td></tr><tr><td><code class="notranslate">-t Tabelle</code></td><td>Diese Filterregel gilt für die Tabelle "Tabelle".</td></tr><tr><td><code class="notranslate">-I Chain [Position]</code></td><td>Regel wird an Position "Position" der Kette "Chain" eingefügt. Bei Nichtangabe der Position wird die Regel am Anfang der Kette eingefügt.</td></tr><tr><td><code class="notranslate">-A Chain</code></td><td>Regel wird an die Kette "Chain" angehängt.</td></tr><tr><td><code class="notranslate">-D Chain</code></td><td>Regel wird aus der Kette "Chain" gelöscht.</td></tr><tr><td><code class="notranslate">-F Chain</code></td><td>Alle Regeln der Kette "Chain" löschen.</td></tr><tr><td><code class="notranslate">-L Chain</code></td><td>Liste alle Regeln der Kette "Chain" auf.</td></tr><tr><td><code class="notranslate">-p Protokoll</code></td><td>Das Paket wird nur geprüft, wenn es gemäß "IP-Protokoll" ist (z.B. TCP, UDP, ICMP).</td></tr><tr><td><code class="notranslate">-s IP-Adresse</code></td><td>Das Paket wird nur geprüft, wenn es von der definierten IP-Adresse stammt.</td></tr><tr><td><code class="notranslate">-d IP-Adresse</code></td><td>Das Paket wird nur geprüft, wenn es an die definierte IP-Adresse gesendet wird.</td></tr><tr><td><code class="notranslate">-i Netzwerkschnittstelle</code></td><td>Das Paket wird nur geprüft, wenn es über die definierte Netzwerkschnittstelle eingegangen ist.</td></tr><tr><td><code class="notranslate">-o Netzwerkschnittstelle</code></td><td>Das Paket wird nur geprüft, wenn es über die definierte Netzwerkschnittstelle versendet wird.</td></tr><tr><td><code class="notranslate">--sport Port-Nr</code> oder <code class="notranslate">--source-port Port-Nr</code></td><td>Das Paket wird nur geprüft, wenn es von der definierten Port-Nummer stammt. Muss zwingend in Verbindung mit -p benutzt werden!</td></tr><tr><td><code class="notranslate">--dport Port-Nr</code> oder <code class="notranslate">-destination-port Port-Nr</code></td><td>Das Paket wird nur geprüft, wenn es an die definierte Port-Nummer gesendet wird. Muss zwingend in Verbindung mit -p benutzt werden!</td></tr><tr><td><code class="notranslate">-j Aktion</code></td><td>Legt fest, welche Aktion auf das Paket angewendet werden soll, wenn alle Prüfkriterien erfüllt wurden. Weitere Details siehe <a class="crosslink" href="#aktion">hier</a>.</td></tr><tr><td><code class="notranslate">-P Chain Aktion</code></td><td>Legt eine Policy für eine Chain fest, falls keine Filterregel zutrifft. Weitere Details siehe <a class="crosslink" href="#policy">hier</a>.</td></tr></table><p>
<a class="crosslink anchor" href="#aktion" id="aktion"></a>
Trifft ein Filterregel auf ein Paket zu, muss noch festgelegt werden, wie mit dem Paket verfahren werden soll (Option <code class="notranslate">-j Aktion</code>, siehe oben). Bei "normaler" Filterung sind die häufigsten Aktionen:</p><table><tr class="titel"><td colspan="2"><strong>verschiedene Aktionen, die auf ein Paket angewendet werden</strong></td></tr><tr class="kopf"><td><strong>Aktion</strong></td><td><strong>Beschreibung</strong></td></tr><tr><td><code class="notranslate">ACCEPT</code></td><td>Das Paket wird akzeptiert und angenommen.</td></tr><tr><td><code class="notranslate">DROP</code></td><td>Das Paket wird nicht angenommen, der Sender erhält keine Nachricht.</td></tr><tr><td><code class="notranslate">REJECT</code></td><td>Das Paket wird nicht angenommen, der Sender wird benachrichtigt.</td></tr><tr><td><code class="notranslate">LOG</code></td><td>Die Paketdaten werden im System-Log festgehalten, anschließend wird die nächste Regel der Chain geprüft und ggf. angewendet.</td></tr></table><p>
Das sind nur einige (wenige) Optionen und Aktionen, welche hauptsächlich zur "reinen" Filterung angewendet werden. iptables kennt noch viele weitere Optionen und Möglichkeiten, welche <a class="crosslink" href="#weitere_optionen">hier</a> kurz beschrieben werden.</p><p><a class="crosslink anchor" href="#policy" id="policy"></a>
</p></div><div class="section_2"><h3 id="Policies">Policies<a class="headerlink" href="#Policies">¶</a></h3><p>
Aufgrund der Vielzahl von Möglichkeiten kann man nicht für jedes mögliche Paket (d.h. Kombination aus Protokoll, Netzwerkschnittstelle, Port etc.) eine Filterregel aufstellen. Daher kann für jede Chain eine sogenannten Policy (frei übersetzt: Grundsatzregel) definiert werden. Die Policy wird immer dann angewendet, wenn keine andere Filterregel zutrifft.</p><p>Die Policy setzt sich in der Regel aus dem Tabellennamen (optional), der Chain und der Aktion zusammen. Ein Beispiel:</p><div class="bash"><div class="contents"><pre class="notranslate">iptables -P INPUT DROP </pre></div></div><p>Hier wird festgelegt, dass für die Tabelle "filter" (im Befehl nicht explizit erwähnt, da Standard) alle eingehenden Pakete nicht angenommen werden, sofern sie keiner Filterregel entsprechen.</p><p><a class="crosslink anchor" href="#weitere_optionen" id="weitere_optionen"></a>
</p></div></div><div class="section_1"><h2 id="Weitere-Optionen-und-Moeglichkeiten">Weitere Optionen und Möglichkeiten<a class="headerlink" href="#Weitere-Optionen-und-Moeglichkeiten">¶</a></h2><p>
Neben den oben beschriebenen Funktionen können mit Hilfe von iptables noch viele andere Regeln und Aktionen für Netfilter erstellt werden. So beherrscht iptables / Netfilter z.B. auch "stateful inspection", d.h. Pakete werden in Abhängigkeit vom Zustand der Verbindung geprüft. "Zustand der Verbindung" bedeutet, ob das Paket z.B. zu einer bestehenden Verbindung gehört (also ein "Folgepaket" ist) oder ob es sich um eine neue Verbindung handelt. Weiterhin lassen sich mit iptables in Abhängigkeit vom Paket (bzw. der Paketprüfung) Sprünge in andere Chains realisieren. Außerdem können mit iptables eine Vielzahl von Paketmanipulationen durchgeführt werden.</p><p>Eine sehr ausführliche Übersicht und Anleitung geben die <a class="internal" href="./man.html">Manpages</a> zu iptables sowie die <a class="external" href="http://www.iptables.org/documentation/index.html" rel="nofollow">Dokumentation</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> auf der Homepage.</p></div><div class="section_1"><h2 id="Einsatz-von-iptables">Einsatz von iptables<a class="headerlink" href="#Einsatz-von-iptables">¶</a></h2><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>In der Desktop Grundinstallation hat Ubuntu keine offenen Ports, die speziell über eine Firewall geschützt werden müssten. Weitere Informationen findet man im Artikel <a class="internal" href="./sicherheit.html">Sicherheit</a> und <a class="internal" href="./personal_firewalls.html">Personal Firewalls</a>.
</p></div></div><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Zu bedenken ist, dass unter Linux auch ein Teil der Interprozesskommunikation über das (interne) Netzwerk läuft, nämlich über die Netzwerkschnittstelle "lo" (z.B. <a class="internal" href="./xserver.html">XServer</a> oder <a class="internal" href="./cups.html">CUPS</a>). Definiert man mit iptables Filterregel und richtet keine Regeln bzw. Policy für "lo" ein, so kann dies zu Fehlfunktionen bis hin zum Absturz des Systems führen!
</p></div></div><p>Im ersten Beispiel wird überprüft, welche Filterregeln bereits hinterlegt sind. In der Grundinstallation von Ubuntu sollte hier nichts auftauchen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo iptables -t filter -L </pre></div></div><p>
</p><pre class="notranslate">Chain INPUT (policy ACCEPT)
target     prot opt source               destination         

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination</pre><div class="bash"><div class="contents"><pre class="notranslate">sudo iptables -t nat -L </pre></div></div><p>
</p><pre class="notranslate"> 
Chain PREROUTING (policy ACCEPT)
target     prot opt source               destination         

Chain POSTROUTING (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         </pre><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo iptables -t mangle -L </pre></div></div><p>
</p><pre class="notranslate">Chain PREROUTING (policy ACCEPT)
target     prot opt source               destination         

Chain INPUT (policy ACCEPT)
target     prot opt source               destination         

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         

Chain POSTROUTING (policy ACCEPT)
target     prot opt source               destination         </pre><div class="bash"><div class="contents"><pre class="notranslate">sudo iptables -t raw -L </pre></div></div><p>
</p><pre class="notranslate">Chain PREROUTING (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination          </pre><p>Im zweiten Beispiel wird eine rudimentäre Firewall mit iptables aufgebaut. Dazu werden für die Netzwerkschnittstelle eth0 die Ports und Protokolle für http und https freigegeben.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>In der Datei <strong>/etc/services</strong> befindet sich eine vollständige Liste aller (systemspezifischen) Ports und der zugehörigen Protokolle.
Die Policy wird vor dem Löschen(flushen) aller Regeln zuerst auf ACCEPT gesetzt, denn sonst könnte es passieren, dass alles blockiert wird!
</p></div></div><div class="bash"><div class="contents"><pre class="notranslate">iptables -P INPUT ACCEPT			 				#Policy für Tabelle filter, INPUT Chain 
iptables -P OUTPUT ACCEPT			 				#Policy für Tabelle filter, OUTPUT Chain
iptables -P FORWARD ACCEPT		 					#Policy für Tabelle filter, FORWARD Chain
iptables -F                              					#alle Regeln löschen
iptables -A INPUT -i lo -j ACCEPT	 					#eingehende Kommunikation für lo (Localhost) zulassen
iptables -A OUTPUT -o lo -j ACCEPT	 					#ausgehende Kommunikation für lo (Localhost zulassen
iptables -A OUTPUT -o eth0 -p tcp --dport 80 --sport 1024:65535	-j ACCEPT	#ausgehende HTTP Verbindungen für Ports 1024 -&gt; 65535 zulassen
iptables -A OUTPUT -o eth0 -p tcp --dport 443 --sport 1024:65535 -j ACCEPT	#ausgehende HTTPS Verbindungen für Ports 1024 -&gt; 65535 zulassen
iptables -A INPUT -i eth0 -m state --state RELATED,ESTABLISHED -j ACCEPT	#eingehende Pakete für existierende Verbindungen zulassen
iptables -A OUTPUT -o eth0 -m state --state RELATED,ESTABLISHED -j ACCEPT	#ausgehende Pakete für existierende Verbindungen zulassen
iptables -P INPUT DROP			 					#Policy für Tabelle filter, INPUT Chain
iptables -P OUTPUT DROP			 					#Policy für Tabelle filter, OUTPUT Chain
iptables -P FORWARD DROP		 					#Policy für Tabelle filter, FORWARD Chain </pre></div></div><p>Es handelt sich hier um ein Beispiel und <span class="underline">keine</span> vollständig eingerichtete Firewall!</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die mit iptables erstellten Regeln sind <span class="underline">flüchtig</span>, d.h. sie bleiben nur bis zum Ausschalten des Computers erhalten! Will man dauerhaft Regeln einrichten, so sollten diese in einem entsprechenden Skript hinterlegt werden, das bei Systemstart automatisch gestartet wird (siehe hierzu <a class="internal" href="./rc.local.html">rc.local</a> und / oder <a class="internal" href="./upstart.html">Upstart</a> bzw iptables-persistent).</p><p>Sehr vereinfacht wird das Erstellen und Verwalten von iptables Regeln mit fertigen Konfigurationswerkzeugen wie z.B. <strong>firehol</strong>.
</p></div></div></div><div class="section_1"><h2 id="Graphische-Benutzeroberflaeche">Graphische Benutzeroberfläche<a class="headerlink" href="#Graphische-Benutzeroberflaeche">¶</a></h2><p>
Die richtige Konfiguration von iptables auf der Kommandozeile ist sicherlich alles andere als trivial oder übersichtlich, insbesonders wenn man komplexere Regelwerke erstellen möchte (z.B. für einen Netzwerkrouter, der ggf. auch noch Firewall-Funktionalität haben soll).</p><p>Es gibt jedoch eine Reihe von (teilweise graphischen) Benutzeroberflächen, die diese Arbeit mit iptables erleichtern. So sind z.B. folgende Oberflächen über die Paketverwaltung <sup><a href="#source-1">[1]</a></sup> von Ubuntu verfügbar:</p><ul><li><p><a class="interwiki interwiki-packages" href="http://packages.ubuntu.com/firehol">firehol</a></p></li><li><p><a class="interwiki interwiki-packages" href="http://packages.ubuntu.com/guidedog">guidedog</a></p></li><li><p><a class="interwiki interwiki-packages" href="http://packages.ubuntu.com/kmyfirewall">kmyfirewall</a></p></li><li><p><a class="interwiki interwiki-packages" href="http://packages.ubuntu.com/pyroman">pyroman</a></p></li><li><p><a class="interwiki interwiki-packages" href="http://packages.ubuntu.com/shorewall">shorewall</a></p></li></ul><p>
</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><div class="section_2"><h3 id="Intern">Intern<a class="headerlink" href="#Intern">¶</a></h3><p>
</p><ul><li><p><a class="internal" href="./ufw.html">ufw</a> - vereinfachte Einrichtung von iptables-Regeln</p></li><li><p><a class="internal" href="./skripte/nathelper.html">nathelper</a> - Perl-Skript zum Einrichten von NAT</p></li><li><p><a class="internal" href="./skripte/anfd.html">anfd</a> - Perl-Skript zum Einrichten einer applikationsabhängigen Firewall</p></li><li><p><a class="internal" href="./router.html">Router</a> - Einrichtung eines einfachen Routers unter Linux</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Extern">Extern<a class="headerlink" href="#Extern">¶</a></h3><p>
</p><ul><li><p><a class="external" href="http://www.pl-forum.de/t_netzwerk/iptables.html" rel="nofollow">Einführung in iptables</a> - <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> Relativ ausführliche Einführung in iptables</p></li><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Netfilter">Netfilter / iptables</a> -  Wikipedia-Eintrag zu Netfilter und iptables</p></li><li><p><a class="external" href="http://blog.telpl.de/iptables-regeln-zeitgesteuert.html" rel="nofollow">Iptables – Regeln zeitgesteuert</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Blogbeitrag, 05/2009</p></li><li><p><a class="external" href="https://help.ubuntu.com/community/IptablesHowTo" rel="nofollow">Basic iptables howto</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Official Ubuntu Documentation, Community Help Wiki</p></li><li><p><a class="external" href="http://www.howtogeek.com/177621/the-beginners-guide-to-iptables-the-linux-firewall" rel="nofollow">The Beginner’s Guide to iptables, the Linux Firewall</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><p>
</p></div></div></div>
<p class="meta">
<a href="./iptables2/a/revision/943721.html">Diese Revision</a> wurde am 20. September 2017 13:03 von <a href="https://ubuntuusers.de/user/damadmai/">damadmai</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./iptables2.html">iptables2</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>