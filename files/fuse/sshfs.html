<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>FUSE/sshfs › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../fuse/sshfs.html">sshfs</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/FUSE/sshfs">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../fuse/sshfs/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../fuse/sshfs/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../fuse/sshfs/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../fuse/sshfs/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../fuse/sshfs/a/backlinks.html">sshfs</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="../xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="../trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../pakete_installieren.html">Pakete installieren</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../paketquellen_freischalten.html">Bearbeiten von Paketquellen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../editor.html">Einen Texteditor öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="../autostart.html">Automatischer Start von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-6" id="source-6"></a> <a class="internal" href="../fuse.html">FUSE einrichten</a> </p></li><li><p><a class="crosslink anchor" href="#source-7" id="source-7"></a> <a class="internal" href="../sudo.html">Root-Rechte erlangen</a></p></li><li><p><a class="crosslink anchor" href="#source-8" id="source-8"></a> <a class="internal" href="../rechte.html">Rechte von Dateien ändern</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Benutzung">Benutzung
</a><ol class="arabic"><li><a class="crosslink" href="#Optionen">Optionen
</a></li><li><a class="crosslink" href="#Automount">Automount
</a></li><li><a class="crosslink" href="#sshfs-haengt-sich-auf-timeout">sshfs hängt sich auf - timeout
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><a class="external" href="https://github.com/libfuse/sshfs" rel="nofollow">sshfs</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>  ist ein <a class="internal" href="../fuse.html">FUSE</a>-Modul, mit dem man entfernte Rechner über <a class="internal" href="../ssh.html">SSH</a> in das eigene Dateisystem einbinden kann. Der Vorteil gegenüber einer ssh-Shell ist, dass man damit die Dateien und Verzeichnisse auf dem entfernten Rechner sehr komfortabel editieren, kopieren oder verschieben kann – genau wie die Dateien und Verzeichnisse auf den lokalen Festplatten. Dies erfordert auf dem Server ein sftp-Programm. Das ist bei den meisten SSH-Servern, wie OpenSSH, standardmäßig dabei, aber auf einigen embedded Geräten, wie OpenWRT, sind dafür spezielle Programm-Pakete notwendig.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Folgendes Paket muss installiert <sup><a href="#source-1">[1]</a></sup> werden:</p><ul><li><p><strong>sshfs</strong> (<em>universe</em> <sup><a href="#source-2">[2]</a></sup>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install sshfs </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install sshfs </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="Benutzung">Benutzung<a class="headerlink" href="#Benutzung">¶</a></h2><p>
Vor dem Ausführen von sshfs muss FUSE eingerichtet sein <sup><a href="#source-6">[6]</a></sup> und ein Verzeichnis erstellt werden, in welches der entfernte Rechner eingehängt werden soll. Außerdem muss der Benutzer, unter dem <code class="notranslate">sshfs</code> verwendet werden soll, als Mitglied der Gruppe <code class="notranslate">fuse</code> eingetragen werden. Im folgenden wird von <strong>~/fusessh</strong> als Verzeichnis für den entfernten Rechner ausgegangen.</p><p>Das Einhängen erfolgt im Terminal <sup><a href="#source-3">[3]</a></sup> über folgenden Befehl, vorher sollte aber noch ein Ordner namens <strong>fusessh</strong> erstellt werden:</p><div class="bash"><div class="contents"><pre class="notranslate">mkdir ~/fusessh </pre></div></div><div class="bash"><div class="contents"><pre class="notranslate">sshfs Benutzername@irgendEinRechner:/pfad_auf_dem_server/ ~/fusessh </pre></div></div><p>Falls ein Passwort für die Verbindung erforderlich ist, erscheint in der Konsole eine Abfrage. Das Aushängen erfolgt analog zu den anderen FUSE-Modulen mit:</p><div class="bash"><div class="contents"><pre class="notranslate">fusermount -u ~/fusessh </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>sshfs unterstützt Hardlinks nur ab OpenSSH-Server-Version 5.7 oder neuer. Bei älteren OpenSSH-Versionen ist es daher nicht möglich, sshfs für eine Datensicherung mit <a class="internal" href="../dirvish.html">dirvish</a> oder ähnlichem zu nutzen. Die OpenSSH-Version kann ermittelt werden indem man sich per ssh auf dem Server anmeldet und /usr/sbin/sshd -V eingibt.
</p></div></div><div class="section_2"><h3 id="Optionen">Optionen<a class="headerlink" href="#Optionen">¶</a></h3><p>
sshfs bietet eine Reihe von Optionen, wie z.B. <code class="notranslate">-p 222</code>, falls der <a class="internal" href="../ssh.html">SSH-Server</a> auf Port 222 lauschen sollte. Mit den Optionen <code class="notranslate">-o idmap=user -o uid=USERID -o gid=GROUPID</code> kann man "User Mapping" aktivieren. Dies ist hilfreich, falls die auf dem Server gespeicherten Dateien einen Eigentümer haben, der auf dem Client nicht vorhanden ist. Beispiel:</p><div class="bash"><div class="contents"><pre class="notranslate">sshfs Benutzername@irgendEinRechner:/pfad_auf_dem_server/ ~/fusessh -o idmap=user -o uid=$(id -u) -o gid=$(id -g) </pre></div></div><p>Eine genaue Übersicht der Parameter kann man in der <a class="internal" href="../man.html">Manualseite</a> von sshfs nachlesen.</p></div><div class="section_2"><h3 id="Automount">Automount<a class="headerlink" href="#Automount">¶</a></h3><p>
Falls man das Dateisystem automatisch beim Systemstart oder bei der Anmeldung einbinden lassen will, muss man die <a class="internal" href="../ssh.html#Authentifizierung-ueber-Public-Keys">SSH-Authentifizierung</a> über Public-Keys einrichten. Man ist nun nicht mehr gezwungen, das Server-Passwort einzutippen. Wichtig für das Einbinden ("mount") während des Systemstarts ist, dass sich die privaten Schlüssel ("private keys") im Root-Verzeichnis <strong>/root/.ssh/</strong> befinden oder explizit über den Parameter <strong>-o IdentityFile=/Pfad/zum/publickkey/Schlüsseldateiname</strong> angegeben werden.</p><div class="section_3"><h4 id="Beim-Systemstart">Beim Systemstart<a class="headerlink" href="#Beim-Systemstart">¶</a></h4><p>
</p><div class="section_4"><h5 id="ueber-die-etc-fstab">über die /etc/fstab<a class="headerlink" href="#ueber-die-etc-fstab">¶</a></h5><p>
In der Datei <strong>/etc/fstab</strong> muss mit Root-Rechten <sup><a href="#source-7">[7]</a></sup> in einem Editor <sup><a href="#source-4">[4]</a></sup> eine Zeile hinzugefügt werden:</p><pre class="notranslate">sshfs#Benutzername@irgendEinRechner:/pfad_auf_dem_server/ ~/fusessh fuse uid=1003,gid=100,umask=0,allow_other,_netdev 0 0</pre><p>Der Parameter <code class="notranslate">_netdev</code> ist wichtig, da das System sonst beim Booten nicht weiß, dass eine funktionierende Netzwerkverbindung zum Einbinden der Partition erforderlich ist.</p></div><div class="section_4"><h5 id="per-Dispatcher">per Dispatcher<a class="headerlink" href="#per-Dispatcher">¶</a></h5><p>
Man legt mit Root-Rechten <sup><a href="#source-7">[7]</a></sup> in einem Editor <sup><a href="#source-4">[4]</a></sup> eine Datei im Ordner <strong>/etc/NetworkManager/dispatcher.d/</strong> an. Der Dateiname sollte mit einer Zahl beginnen, die die Startreihenfolge festlegt, wie beispielsweise <strong>02sshfs</strong>. Nach der Erstellung des Skriptes muss dieses ausführbar gemacht werden<sup><a href="#source-8">[8]</a></sup>.</p><p>Ein Beispielskript sieht z.B. so aus:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nv">IFACE</span><span class="o">=</span><span class="nv">$1</span>    <span class="c1">#wird vom NetworkManager übergeben</span>
<span class="nv">BEFEHL</span><span class="o">=</span><span class="nv">$2</span>   <span class="c1">#wird vom NetworkManager übergeben</span>

<span class="c1">#SSHFS-Einstellungen</span>
<span class="nv">PORT</span><span class="o">=</span><span class="m">22</span> <span class="c1">#ssh-Port des Zielsystems</span>
<span class="nv">PFAD</span><span class="o">=</span><span class="s2">"/Pfad/Zielordner"</span> <span class="c1"># ABSOLUTE PFADANGABE im lokalen System</span>
<span class="nv">KEY</span><span class="o">=</span><span class="s2">"/home/user/.mykeys/my_rsakey"</span> <span class="c1">#eigener privater Schlüssel</span>

<span class="k">case</span> <span class="s2">"</span><span class="nv">$BEFEHL</span><span class="s2">"</span> in 
  up<span class="o">)</span>
    <span class="c1">#SSHFS-Verbindung herstellen</span>
    <span class="c1">#ACHTUNG: die Optionen sind Beispiele und haben keinen Anspruch auf allgemeine Gültigkeit!</span>
    /usr/bin/sshfs -p<span class="nv">$PORT</span> user@server:relativer_pfad_auf_dem_server/ <span class="nv">$PFAD</span> -o <span class="nv">uid</span><span class="o">=</span><span class="m">1000</span>,gid<span class="o">=</span><span class="m">1000</span>,nomap<span class="o">=</span>ignore,allow_other,IdentityFile<span class="o">=</span><span class="nv">$KEY</span>
    <span class="p">;;</span>
  down<span class="o">)</span>
    /bin/fusermount -u <span class="nv">$PFAD</span>
    <span class="p">;;</span>
  *<span class="o">)</span>
    <span class="nb">echo</span> $<span class="s2">"usage: </span><span class="nv">$0</span><span class="s2"> {up|down}"</span> 
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">esac</span>
</pre></div>
</td></tr></table></div><p>Weiterführende Informationen zu Dispatcher-Skripten gibt es unter <a class="internal" href="../networkmanager/dispatcher.html">NetworkManager/Dispatcher</a>.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Es besteht die Möglichkeit, ein sshfs-mount ebenfalls über die <a class="internal" href="../interfaces.html#Start-Stop-Skripte">/etc/network/interfaces</a> einzubinden, bei Verwendung des <a class="internal" href="../networkmanager.html">Network Managers</a> (NM) oder <a class="internal" href="../wicd.html">Wicd</a> sollte von einer Bearbeitung der <strong>/etc/network/interfaces</strong> aber abgesehen werden!
</p></div></div></div></div><div class="section_3"><h4 id="Nach-der-Anmeldung-eines-Anwenders">Nach der Anmeldung eines Anwenders<a class="headerlink" href="#Nach-der-Anmeldung-eines-Anwenders">¶</a></h4><p>
Den sshfs-Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">sshfs Benutzername@irgendEinRechner:/pfad_auf_dem_server/ ~/fusessh </pre></div></div><p>muss man dazu bei jeder Anmeldung automatisch ausführen lassen <sup><a href="#source-5">[5]</a></sup>.</p></div></div><div class="section_2"><h3 id="sshfs-haengt-sich-auf-timeout">sshfs hängt sich auf - timeout<a class="headerlink" href="#sshfs-haengt-sich-auf-timeout">¶</a></h3><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Es kann vorkommen, dass sich die Verbindung mit sshfs nach einer Weile aufhängt und nicht mehr reagiert, obwohl das Einbinden geklappt hatte und man auch auf die Dateien und Ordner auf dem anderen Rechner zugreifen konnte.
</p></div></div><p>Laut <a class="external" href="http://sourceforge.net/p/fuse/wiki/SshfsFaq/#sshfs-hangs-after-a-while" rel="nofollow">FUSEWiki</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> gibt es dafür zwei Lösungsansätze:</p><p>1) In der Datei <strong>.ssh/config</strong> folgende Zeile hinzufügen (liegt im Homeverzeichnis des Anwenders, bzw. wenn man Automount beim Systemstart macht, ist die Datei <strong>/root/.ssh/config</strong> zu ändern):</p><pre class="notranslate">ServerAliveInterval 15</pre><p>Falls die Datei <strong>config</strong> nicht existiert, wird sie neu angelegt.</p><p>2) Oder man fügt beim oben stehenden sshfs-Befehl die Option <code class="notranslate">-o ServerAliveInterval=15</code> ein. Dieser Lösungsansatz wurde zwar nicht laut <a class="external" href="http://sourceforge.net/p/fuse/wiki/SshfsFaq/#sshfs-hangs-after-a-while" rel="nofollow">FUSEWiki</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> getestet, aber sollte theoretisch auch funktionieren.</p><div class="bash"><div class="contents"><pre class="notranslate">sshfs -o ServerAliveInterval=15 Benutzername@irgendEinRechner:/pfad_auf_dem_server/ ~/fusessh </pre></div></div><p>Diese sollte die ssh-Verbindung aufrechterhalten, auch wenn über einen längeren Zeitraum keine Aktivitäten stattfinden.</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://heise.de/-1646679" rel="nofollow">HowTo bei heise open</a></p></li><li><p><a class="external" href="http://ubuntu.wordpress.com/2005/10/28/how-to-mount-a-remote-ssh-filesystem-using-sshfs/" rel="nofollow">Anleitung für sshfs</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p><a class="external" href="http://doc.ubuntu-fr.org/sshfs" rel="nofollow">Anleitungen im französischen Wiki</a> <img alt="{fr}" src="../_/a4d7caed6af30e5c7549b4de45c71ed5f7036425.png"/> </p></li><li><p><a class="external" href="http://dokan-dev.net/en/category/sshfs/" rel="nofollow">sshfs für Windows</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../fuse/sshfs/a/revision/942590.html">Diese Revision</a> wurde am 19. Juli 2017 21:21 von <a href="https://ubuntuusers.de/user/frustschieber/">frustschieber</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../fuse.html">FUSE</a></li>
<li><a href="../fuse/sshfs.html">sshfs</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>