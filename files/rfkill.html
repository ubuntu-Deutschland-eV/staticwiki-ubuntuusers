<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>rfkill › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./rfkill.html">rfkill</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/rfkill">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./rfkill/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./rfkill/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./rfkill/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./rfkill/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./rfkill/a/backlinks.html">rfkill</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./sudo.html">Root-Rechte</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./editor.html">Einen Editor mit Root-Rechten öffnen</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Bedienung">Bedienung
</a><ol class="arabic"><li><a class="crosslink" href="#Geraete-u-Schaltzustand-auflisten">Geräte u. Schaltzustand auflisten
</a></li><li><a class="crosslink" href="#Funkgeraete-schalten">Funkgeräte schalten
</a></li></ol></li><li><a class="crosslink" href="#Automatisches-Schalten-beim-Systemstart">Automatisches Schalten beim Systemstart
</a></li><li><a class="crosslink" href="#Problembehandlung-allgemein">Problembehandlung allgemein
</a><ol class="arabic"><li><a class="crosslink" href="#Schalter-steht-auf-aus">Schalter steht auf "aus"
</a></li><li><a class="crosslink" href="#Hardwareschalter-oder-Taste-nkombination-wirkt-nicht">Hardwareschalter oder Taste(nkombination...</a></li><li><a class="crosslink" href="#Kernelmodul-ist-nicht-geladen">Kernelmodul ist nicht geladen
</a></li><li><a class="crosslink" href="#Geraet-ohne-Hardwareschalter-zeigt-Hard-blocked-an">Gerät ohne Hardwareschalter zeigt "Hard ...</a></li></ol></li><li><a class="crosslink" href="#Modulspezifische-Probleme">Modulspezifische Probleme
</a><ol class="arabic"><li><a class="crosslink" href="#Modul-acer-wmi">Modul acer_wmi
</a></li><li><a class="crosslink" href="#Module-dell-laptop-dell-wmi">Module dell_laptop, dell_wmi
</a></li></ol></li><li><a class="crosslink" href="#Nicht-von-rfkill-unterstuetzte-Hardware">Nicht von rfkill unterstützte Hardware
</a><ol class="arabic"><li><a class="crosslink" href="#ASUS-Notebooks">ASUS Notebooks
</a></li><li><a class="crosslink" href="#asus-nb-wmi">asus-nb-wmi
</a></li><li><a class="crosslink" href="#Intel-Pro-Wireless-2x00b-g-Adapter">Intel Pro Wireless 2x00b/g Adapter
</a></li><li><a class="crosslink" href="#FSC-Amilo-Acer-Aspire-Travelmate">FSC Amilo, Acer Aspire/Travelmate
</a></li><li><a class="crosslink" href="#ltere-FSC-Amilo-Notebooks">Ältere FSC Amilo Notebooks
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/Oxygen/network-wireless.png" class="image-left" src="./_/38fd8b4c090ac74473598b0041039b9b1a2248c8.png"/>
Das Subsystem <a class="external" href="http://www.kernel.org/doc/Documentation/rfkill.txt" rel="nofollow">rfkill</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> des Linux-Kernels bietet eine Schnittstelle, um an das System angeschlossene drahtlose Kommunikationsgeräte – nachfolgend einfach "Funkgeräte" genannt – ein- und ausschalten zu können. Ziel ist, wenn diese Art der Kommunikation nicht benötigt wird, durch Ausschalten des entsprechenden Adapters sowohl das Senden von Radiowellen zu unterbinden als auch den Stromverbrauch des Systems zu senken.</p><p>In der Praxis kommt rfkill vor allem bei in Notebooks <span class="underline">intern</span> verbauten Adaptern für
</p><ul><li><p><a class="internal" href="./bluetooth.html">Bluetooth</a></p></li><li><p><a class="internal" href="./wlan.html">WLAN</a> – Wireless LAN, von Herstellern auch als <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Wi-Fi">Wi-Fi</a> bezeichnet</p></li><li><p><a class="internal" href="./umts.html">UMTS</a> – von Herstellern oft als WWAN für <em>"Wireless WAN"</em> bezeichnet</p></li><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/WiMAX">WiMAX</a></p></li><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Wireless_USB">Wireless USB</a> – auch als <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/UWB">UWB</a> für <em>"Ultra Wide Band"</em> bezeichnet</p></li></ul><p>zum Einsatz. Es gibt aber auch unterstützte PCMCIA- bzw. Cardbus-Adapter.</p><p>Das Subsystem macht seine Steuerungsmöglichkeiten über die sysfs-Schnittstelle als Dateien unterhalb von <strong>/sys/class/rfkill/</strong> und über die Gerätedatei <strong>/dev/rfkill</strong> zugänglich.</p><p>Zum einfachen Ein- und Ausschalten der Funkgeräte durch den Benutzer gibt es das Kommandozeilenprogramm <a class="external" href="http://linuxwireless.org/en/users/Documentation/rfkill" rel="nofollow">rfkill</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>, dessen Bedienung das Thema dieses Artikel sein soll.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Das Programm rfkill ist in Ubuntu über das Paket</p><ul><li><p><strong>rfkill</strong></p></li></ul><p>
bereits standardmäßig installiert.</p></div><div class="section_1"><h2 id="Bedienung">Bedienung<a class="headerlink" href="#Bedienung">¶</a></h2><p>
</p><div class="section_2"><h3 id="Geraete-u-Schaltzustand-auflisten">Geräte u. Schaltzustand auflisten<a class="headerlink" href="#Geraete-u-Schaltzustand-auflisten">¶</a></h3><p>
Die Liste der im System verfügbaren Funkgeräte erhält man im Terminal <sup><a href="#source-1">[1]</a></sup> mit diesem Kommando:</p><div class="bash"><div class="contents"><pre class="notranslate">rfkill list </pre></div></div><p>Die beispielhafte Ausgabe:
</p><pre class="notranslate">0: phy0: Wireless LAN
	Soft blocked: no
	Hard blocked: no
1: tpacpi_bluetooth_sw: Bluetooth
	Soft blocked: no
	Hard blocked: no
2: tpacpi_wwan_sw: Wireless WAN
	Soft blocked: no
	Hard blocked: no
4: hci0: Bluetooth
	Soft blocked: no
	Hard blocked: no</pre><p>
zeigt ein Notebook mit WLAN-, Bluetooth- und UMTS-Adapter. Alle Adapter sind eingeschaltet.</p><p>Um nur die Geräte einer Klasse anzuzeigen verwendet man:
</p><div class="bash"><div class="contents"><pre class="notranslate">rfkill list BEZEICHNER </pre></div></div><p>Den <code class="notranslate">BEZEICHNER</code> für die gewünschte Geräteklasse ermittelt man anhand <a class="crosslink" href="#tabelle1">Tabelle 1</a>. So selektiert man z.B. nur die WLAN-Geräte mit:
</p><div class="bash"><div class="contents"><pre class="notranslate">rfkill list wifi </pre></div></div><p>Ausgabe:
</p><pre class="notranslate">0: phy0: Wireless LAN
	Soft blocked: no
	Hard blocked: no</pre><div class="section_3"><h4 id="Soft-blocked">Soft blocked<a class="headerlink" href="#Soft-blocked">¶</a></h4><p>
Die Ausgabezeile
</p><pre class="notranslate">	Soft blocked: no / yes</pre><p>
zeigt den per Software gewählten Schaltzustand des Funkgeräts: <code class="notranslate">no = ein</code>, <code class="notranslate">yes = aus</code>.</p><p>Bei vielen Notebooks kann der Zustand "Soft blocked" auch über eine Taste geändert werden, z.B. 
<span class="key">Fn</span>  + 
<span class="key">F5</span>  für Bluetooth und WLAN bei ThinkPads.</p></div><div class="section_3"><h4 id="Hard-blocked">Hard blocked<a class="headerlink" href="#Hard-blocked">¶</a></h4><p>
Manche Notebooks – insbesondere Business-Baureihen – verfügen zusätzlich über einen Hardwareschalter zum kompletten Deaktivieren der Funkgeräte (z.B. im Flugzeug). Betätigt man diesen, so ist bei allen Funkgeräten die Zeile
</p><pre class="notranslate">	Hard blocked: yes</pre><p>
zu sehen.</p></div></div><div class="section_2"><h3 id="Funkgeraete-schalten">Funkgeräte schalten<a class="headerlink" href="#Funkgeraete-schalten">¶</a></h3><p>
Zum Schalten von "Soft blocked" benutzt man folgende Kommandos:
</p><div class="bash"><div class="contents"><pre class="notranslate">rfkill block   BEZEICHNER   # ausschalten
rfkill unblock BEZEICHNER   # einschalten </pre></div></div><p>Den Zustand von "Hard blocked" kann man <span class="underline">nicht</span> per Software schalten. Siehe auch <a class="crosslink" href="#Problembehandlung">Problembehandlung</a>.
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Wer als Desktop nicht <a class="internal" href="./gnome.html">GNOME</a> oder <a class="internal" href="./unity.html">Unity</a> einsetzt, benötigt zum Schalten Root-Rechte <sup><a href="#source-2">[2]</a></sup> bzw. ein vorangestelltes <code class="notranslate">sudo</code>.
</p></div></div><p>Die <code class="notranslate">BEZEICHNER</code> für die Geräteklassen zeigt folgende Tabelle:</p><p><a class="crosslink anchor" href="#tabelle1" id="tabelle1"></a>
</p><p>
</p><table><tr class="titel"><td colspan="2"> Tabelle 1: Geräteklassen für Funkgeräte </td></tr><tr class="kopf"><td> Bezeichner </td><td> Geräteklasse </td></tr><tr><td> <code class="notranslate">all</code> </td><td> alle Funkgeräte </td></tr><tr><td> <code class="notranslate">wifi</code>,  <code class="notranslate">wlan</code> </td><td> WLAN </td></tr><tr><td> <code class="notranslate">bluetooth</code> </td><td> Bluetooth </td></tr><tr><td> <code class="notranslate">wwan</code> </td><td> UMTS (WWAN) </td></tr><tr><td> <code class="notranslate">uwb</code>, <code class="notranslate">ultrawideband</code> </td><td> Wireless USB </td></tr><tr><td> <code class="notranslate">wimax</code> </td><td> WiMAX </td></tr><tr><td> <code class="notranslate">gps</code> </td><td> GPS </td></tr></table><div class="section_3"><h4 id="Auswahl-ueber-die-Geraetenummer">Auswahl über die Gerätenummer<a class="headerlink" href="#Auswahl-ueber-die-Geraetenummer">¶</a></h4><p>
Alternativ kann man über die in der Ausgabe von <code class="notranslate">rfkill list</code> gezeigte Nummer das zu schaltende Funkgerät auswählen:
</p><div class="bash"><div class="contents"><pre class="notranslate">rfkill block   NUMMER    # ausschalten
rfkill unblock NUMMER    # einschalten </pre></div></div><p>Um das WLAN aus dem obigen Beispiel auszuschalten, verwendet man also:
</p><div class="bash"><div class="contents"><pre class="notranslate">rfkill block 0 </pre></div></div><p>Für Bluetooth zeigt <code class="notranslate">rfkill list</code> meist zwei Geräte an – aus der obigen Beispielausgabe:
</p><pre class="notranslate">1: tpacpi_bluetooth_sw: Bluetooth
4: hci0: Bluetooth</pre><p>Möchte man Strom sparen, sollte man das Gerät <code class="notranslate">1: tpacpi_bluetooth_sw</code> ausschalten. Das Gerät <code class="notranslate">4: hci0</code> steuert <span class="underline">nicht</span> die Stromversorgung des Bluetooth-Adapters. Um sicher zu sein, verwendet man besser die Geräteklasse <code class="notranslate">bluetooth</code>.</p></div></div></div><div class="section_1"><h2 id="Automatisches-Schalten-beim-Systemstart">Automatisches Schalten beim Systemstart<a class="headerlink" href="#Automatisches-Schalten-beim-Systemstart">¶</a></h2><p>
Um Funkgeräte bereits beim Systemstart auszuschalten, fügt man die betreffenden Kommandos in <a class="internal" href="./rc.local.html">/etc/rc.local</a> hinzu. Das Beispiel schaltet Bluetooth und WLAN aus:
</p><pre class="notranslate">rfkill block bluetooth
rfkill block wifi</pre><p>Unter Umständen ist auch die umgekehrte Vorgehensweise – nämlich das Einschalten eines Adapters beim Systemstart – nötig:
</p><pre class="notranslate">rfkill unblock wifi</pre><p>
(beobachtet beim ThinkPad Edge E320)</p></div><div class="section_1"><h2 id="Problembehandlung-allgemein">Problembehandlung allgemein<a class="headerlink" href="#Problembehandlung-allgemein">¶</a></h2><p>
</p><div class="section_2"><h3 id="Schalter-steht-auf-aus">Schalter steht auf "aus"<a class="headerlink" href="#Schalter-steht-auf-aus">¶</a></h3><p>
<span class="underline">Symptom:</span> <code class="notranslate">rfkill list</code> zeigt für <span class="underline">alle</span> Funkgeräte "Hard blocked: yes". Beispiel:
</p><pre class="notranslate">0: tpacpi_bluetooth_sw: Bluetooth
	Soft blocked: yes
	Hard blocked: yes
1: tpacpi_wwan_sw: Wireless WAN
	Soft blocked: yes
	Hard blocked: yes
2: phy0: Wireless LAN
	Soft blocked: yes
	Hard blocked: yes</pre><p><span class="underline">Behebung:</span> den Schalter betätigen. Er ist oft recht versteckt an einer der Schmalseiten des Notebooks angebracht, daher sollte man bei der Suche danach nicht zu schnell aufgeben.</p><p>Oft finden sich Hinweise auf einen Hardwareschalter auch mit der Abfrage
</p><pre class="notranslate">dmesg | egrep 'radio|kill|switch'</pre></div><div class="section_2"><h3 id="Hardwareschalter-oder-Taste-nkombination-wirkt-nicht">Hardwareschalter oder Taste(nkombination) wirkt nicht<a class="headerlink" href="#Hardwareschalter-oder-Taste-nkombination-wirkt-nicht">¶</a></h3><p>
</p><ul><li><p>Einige Hardwareschalter funktionieren nur während des Systemstarts bevor Ubuntu (Linux) gestartet ist (z.B. beim <a class="crosslink" href="http://forum.ubuntuusers.de/post/3277002/">Acer Aspire 1825PTZ</a>).</p></li><li><p>Beim Acer Aspire One entfernt man "Hard blocked" durch <em>einmaliges</em> Betätigen der Hardwaretaste während sich das Netbook im BIOS-Setup befindet.</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Kernelmodul-ist-nicht-geladen">Kernelmodul ist nicht geladen<a class="headerlink" href="#Kernelmodul-ist-nicht-geladen">¶</a></h3><p>
<span class="underline">Symptom:</span> eines (oder mehrere) der integrierten Funkgeräte des Notebooks taucht in der Ausgabe von <code class="notranslate">rfkill list</code> nicht auf.</p><p><span class="underline">Behebung:</span> zuständig für das Schalten sind die folgenden Kernelmodule (die Liste kann je nach Kernelversion abweichen):
</p><ul><li><p><strong>acer_wmi</strong></p></li><li><p><strong>amilo_rfkill</strong></p></li><li><p><strong>asus_laptop</strong></p></li><li><p><strong>asus_wmi</strong></p></li><li><p><strong>classmate_laptop</strong></p></li><li><p><strong>compal_laptop</strong></p></li><li><p><strong>dell_laptop</strong></p></li><li><p><strong>eeepc_laptop</strong></p></li><li><p><strong>fujitsu_laptop</strong></p></li><li><p><strong>hp_wmi</strong></p></li><li><p><strong>ideapad_laptop</strong></p></li><li><p><strong>intel_oaktrail</strong></p></li><li><p><strong>msi_laptop</strong></p></li><li><p><strong>panasonic_laptop</strong></p></li><li><p><strong>samsung_laptop</strong></p></li><li><p><strong>sony_laptop</strong></p></li><li><p><strong>thinkpad_acpi</strong></p></li><li><p><strong>toshiba_acpi</strong></p></li><li><p><strong>toshiba_bluetooth</strong></p></li><li><p><strong>xo1_rfkill</strong></p></li></ul><p>
Normalerweise wird das passende Kernelmodul automatisch geladen. Eine schnelle Überprüfung, ob eines der oben aufgelisteten Module geladen ist, macht man mit folgendem Kommando:
</p><div class="bash"><div class="contents"><pre class="notranslate">lsmod | egrep '_acpi|_bluetooth|intel_oaktrail|_laptop|_rfkill|_wmi' </pre></div></div><p>Zeigt die Ausgabe keines der Module, lädt man probeweise einzelne Module aus der Liste – vorzugsweise beginnend mit dem zum Herstellernamen passenden – mittels
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo modprobe MODULNAME </pre></div></div><p>und prüft mit
</p><div class="bash"><div class="contents"><pre class="notranslate">rfkill list </pre></div></div><p>
ob das fehlende Funkgerät nun angezeigt wird.</p><p>Dabei ist es wichtig, die nicht passenden Module sogleich wieder zu entfernen mit
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo modprobe -r MODULNAME </pre></div></div><p>Hat man auf diese Weise das benötigte Modul gefunden, so kann man es künftig beim Systemstart automatisch laden, indem man eine zusätzliche Zeile mit dem Modulnamen an die Datei <a class="internal" href="./kernelmodule.html#Module-automatisch-laden">/etc/modules</a> anfügt. Beispiel:
</p><div class="bash"><div class="contents"><pre class="notranslate">echo "hp_wmi" | sudo tee -a /etc/modules </pre></div></div></div><div class="section_2"><h3 id="Geraet-ohne-Hardwareschalter-zeigt-Hard-blocked-an">Gerät ohne Hardwareschalter zeigt "Hard blocked" an<a class="headerlink" href="#Geraet-ohne-Hardwareschalter-zeigt-Hard-blocked-an">¶</a></h3><p>
<span class="underline">Symptom:</span> bei manchen Geräten, z.B. ThinkPad Edge wurde
</p><pre class="notranslate">0: tpacpi_bluetooth_sw: Bluetooth
    Soft blocked: yes
    Hard blocked: yes
1: phy0: Wireless LAN
    Soft blocked: yes
    Hard blocked: yes</pre><p>
bzw. beim Thinkpad X121e
</p><pre class="notranslate">1: tpacpi_wwan_sw: Wireless WAN
Soft blocked: no
Hard blocked: yes</pre><p>
beobachtet.</p><p><span class="underline">Behebung:</span> folgende Maßnahmen sollte man in der angegebenen Reihenfolge probieren:
</p><ol class="arabic"><li><p>im BIOS unter <em>"Config -&gt; Network -&gt; Wireless LAN ..."</em> prüfen, ob der WLAN Adapter auch wirklich aktiviert ist (beobachtet beim ThinkPad Edge E520)</p></li><li><p><a class="internal" href="./tp-smapi.html#Hardware-Reset">Hardware-Reset</a></p></li><li><p><a class="internal" href="./tp-smapi.html#BIOS-Default-Settings">BIOS Default Settings</a></p></li><li><p>Einschalten des betroffenen Adapters über ein parallel installiertes Windows</p></li></ol><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Beim ThinkPad X121e kann der Hardware-Reset dazu führen, dass das Notebook überhaupt nicht mehr startet (2 Fälle im Forum aufgetreten) und das Gerät in die Werkstatt muss. Alle anderen Modelle sind von diesem Problem jedoch nicht betroffen.
</p></div></div></div></div><div class="section_1"><h2 id="Modulspezifische-Probleme">Modulspezifische Probleme<a class="headerlink" href="#Modulspezifische-Probleme">¶</a></h2><p>
Dieser Abschnitt beschreibt Probleme einzelner Kernelmodule. Ob eines der hier erwähnten Kernelmodule auf der eigenen Hardware geladen wurde, kann man mit dem Kommando
</p><div class="bash"><div class="contents"><pre class="notranslate">lsmod | egrep 'acer|dell' </pre></div></div><p>
herausfinden.</p><div class="section_2"><h3 id="Modul-acer-wmi">Modul acer_wmi<a class="headerlink" href="#Modul-acer-wmi">¶</a></h3><p>
</p><div class="section_3"><h4 id="Laedt-auf-unpassender-Hardware">Lädt auf unpassender Hardware<a class="headerlink" href="#Laedt-auf-unpassender-Hardware">¶</a></h4><p>
Das Modul <a class="internal" href="./acer-wmi.html">acer_wmi</a> wird bei einigen Notebook-Modellen geladen obwohl es dafür nicht vorgesehen ist und blockiert dadurch den rfkill-Mechanismus.</p><p><span class="underline">Symptom:</span> in der Ausgabe von <code class="notranslate">rfkill list</code> ist eine zweite WLAN-Instanz namens "acer-wireless" zu sehen. Beispiel:
</p><pre class="notranslate">1: acer-wireless: Wireless LAN
        Soft blocked: yes
        Hard blocked: no
3: phy0: Wireless LAN
        Soft blocked: no
        Hard blocked: no</pre><p><span class="underline">Behebung:</span> zuerst entlädt man <code class="notranslate">acer_wmi</code>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo modprobe -r acer_wmi </pre></div></div><p>um danach ggf. das herstellerspezifische Modul (s.o.) zu entladen und erneut zu laden
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo modprobe -r MODULNAME
sudo modprobe MODULNAME </pre></div></div><p>Bringt das Entladen von <code class="notranslate">acer_wmi</code> den gewünschten Erfolg, so kann man künftig dessen automatisches Laden durch <a class="internal" href="./kernelmodule.html#Automatisches-Laden-verhindern-Blacklisting">Blacklisting</a> unterbinden:
</p><div class="bash"><div class="contents"><pre class="notranslate">echo "blacklist acer_wmi" | sudo tee /etc/modprobe.d/blacklist-acer_wmi.conf </pre></div></div></div><div class="section_3"><h4 id="Modulparameter-notwendig">Modulparameter notwendig<a class="headerlink" href="#Modulparameter-notwendig">¶</a></h4><p>
In einigen Fällen hilft es <code class="notranslate">acer_wmi</code> mit dem Parameter <code class="notranslate">wireless=1</code> zu laden. Wenn der manuelle Test mit 
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo modprobe -rv acer_wmi              # entladen
sudo modprobe -v  acer_wmi wireless=1   # neu laden </pre></div></div><p>erfolgreich verläuft, kann man den Parameter mittels
</p><div class="bash"><div class="contents"><pre class="notranslate">echo "options acer_wmi wireless=1" | sudo tee /etc/modprobe.d/acer_wmi.conf </pre></div></div><p>
permanent machen.</p><p>Bei älteren Acer- bzw. FSC-Notebooks lohnt ggf. ein Blick in <a class="internal" href="./acer_hotkeys.html">ACER Hotkeys</a>.</p></div></div><div class="section_2"><h3 id="Module-dell-laptop-dell-wmi">Module dell_laptop, dell_wmi<a class="headerlink" href="#Module-dell-laptop-dell-wmi">¶</a></h3><p>
Das fürs Schalten zuständige Modul <code class="notranslate">dell_laptop</code> ist fehlerhaft und muss bei einigen Modellen seit Ubuntu 10.10 ebenfalls gesperrt werden, insbesondere wenn zusätzlich das Modul <code class="notranslate">dell_wmi</code> (zuständig für Funktionstasten) verwendet wird (<a class="crosslink post" href="https://forum.ubuntuusers.de/post/2750887/">Beispiel</a>).</p><p><span class="underline">Symptom</span>: die Abfrage mit rfkill zeigt:</p><pre class="notranslate">0: dell-wifi: Wireless LAN
	Soft blocked: yes
	Hard blocked: yes</pre><p><span class="underline">Behebung:</span>
</p><div class="bash"><div class="contents"><pre class="notranslate">echo "blacklist dell_laptop" | sudo tee -a /etc/modprobe.d/blacklist.conf </pre></div></div></div></div><div class="section_1"><h2 id="Nicht-von-rfkill-unterstuetzte-Hardware">Nicht von rfkill unterstützte Hardware<a class="headerlink" href="#Nicht-von-rfkill-unterstuetzte-Hardware">¶</a></h2><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Dieser Abschnitt befasst sich mit Hardware, die nicht vom rfkill-Framework unterstützt wird. Die nachfolgend besprochenen Lösungen wurden <span class="underline">nicht</span> systematisch mit allen zu Beginn aufgeführten Ubuntu-Versionen geprüft.
</p></div></div><p>Um den Adapter bereits beim Systemstart in den gewünschten Zustand zu bringen, fügt man den gezeigten Schalt-Befehl in <a class="internal" href="./rc.local.html">/etc/rc.local</a> hinzu.</p><div class="section_2"><h3 id="ASUS-Notebooks">ASUS Notebooks<a class="headerlink" href="#ASUS-Notebooks">¶</a></h3><p>
Prüfung, ob die Steuermodule geladen werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">lsmod | grep -i asus </pre></div></div><p>
Ausgabe ist dann in der Regel:
</p><pre class="notranslate">asus_nb_wmi             
asus_wmi               </pre><p>Das Modul <em>asus_nb_wmi</em> bietet die entsprechende Option <em>wapf</em>. Es können entsprechende Parameter vorgegeben werden, <strong>0</strong> - <strong>1</strong> oder <strong>4</strong> sind möglich:
</p><div class="bash"><div class="contents"><pre class="notranslate">echo "options asus_nb_wmi wapf=1" | sudo tee /etc/modprobe.d/asus.conf </pre></div></div><p>
Parameter <strong>0</strong> und <strong>1</strong> schaltet den Hardwareswitch für WLAN und Bluetooth, <strong>4</strong> entsprechend den Softswitch bei Systemstart.</p><p>Bei einigen älteren Modellen von ASUS schaltet man den WLAN-Adapter so (zuvor muss das Modul <code class="notranslate">asus_laptop</code> geladen sein):
</p><div class="bash"><div class="contents"><pre class="notranslate">echo 1 | sudo tee /sys/devices/platform/asus_laptop/wlan   # einschalten 
echo 0 | sudo tee /sys/devices/platform/asus_laptop/wlan   # ausschalten </pre></div></div><p>bzw. in <strong>rc.local</strong>:
</p><pre class="notranslate">echo 1 &gt; /sys/devices/platform/asus_laptop/wlan   # einschalten 
echo 0 &gt; /sys/devices/platform/asus_laptop/wlan   # ausschalten</pre><p>Um Bluetooth und UMTS/WWAN zu schalten, verwendet man in den Kommandos <strong>/sys/devices/platform/asus_laptop/bluetooth</strong> bzw. <strong>wwan</strong>.</p><p>Zusätzlich kann ein Systemskript umgeschrieben werden um die Tastenkombination 
<span class="key">Fn</span>  + 
<span class="key">F2</span>  zu aktivieren (<a class="crosslink post" href="https://forum.ubuntuusers.de/post/1506096/">Forenartikel</a>). Dazu editiert man mit Root-Rechten <sup><a href="#source-3">[3]</a></sup> die Datei <strong>/etc/acpi/asus-wireless.sh</strong> und ersetzt den Inhalt durch:
</p><pre class="notranslate">#!/bin/sh
WLAN_CTL=/sys/devices/platform/asus_laptop/wlan

[ -w $WLAN_CTL ] || exit 1

if [ "$(cat $WLAN_CTL)" = "0" ] ; then
    echo 1 &gt; $WLAN_CTL
else
    echo 0 &gt; $WLAN_CTL
fi</pre></div><div class="section_2"><h3 id="asus-nb-wmi">asus-nb-wmi<a class="headerlink" href="#asus-nb-wmi">¶</a></h3><p>
In manchen Fällen wird das asus-nb-wmi Modul geladen, obwohl es nicht nötig ist (ähnlich wie das Modul acer_wmi, siehe oben). rfkill zeigt dann ebenfalls zwei WLAN Instanzen, so wie bei dem Modul acer_wmi, und führt zu einem softblock des Moduls.</p><p>Man kann das automatische Laden des Moduls so unterbinden:</p><div class="bash"><div class="contents"><pre class="notranslate">echo "blacklist asus-nb-wmi" | sudo tee /etc/modprobe.d/blacklist-asus_wmi.conf  </pre></div></div></div><div class="section_2"><h3 id="Intel-Pro-Wireless-2x00b-g-Adapter">Intel Pro Wireless 2x00b/g Adapter<a class="headerlink" href="#Intel-Pro-Wireless-2x00b-g-Adapter">¶</a></h3><p>
Dieser Adapter funktioniert nicht mit rfkill, da der Treiber mit <strong>lib80211</strong> arbeitet. Er läßt sich jedoch wie folgt schalten:
</p><div class="bash"><div class="contents"><pre class="notranslate">for i in /sys/bus/pci/drivers/ipw2200/*/rf_kill ; do echo 0 | sudo tee $i ; done   # einschalten
for i in /sys/bus/pci/drivers/ipw2200/*/rf_kill ; do echo 1 | sudo tee $i ; done   # ausschalten </pre></div></div><p>bzw. in <strong>rc.local</strong>:
</p><pre class="notranslate">for i in /sys/bus/pci/drivers/ipw2200/*/rf_kill ; do echo 0 &gt; $i ; done   # einschalten
for i in /sys/bus/pci/drivers/ipw2200/*/rf_kill ; do echo 1 &gt; $i ; done   # ausschalten</pre><p>Bei einigen Modellen ist zudem ein Modulparameter nötig, um die WLAN-LED zu aktivieren. Ist der Test 
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo modprobe -rfv ipw2200
sudo modprobe -v ipw2200 led=1 </pre></div></div><p>erfolgreich, macht man die Einstellung permanent:
</p><div class="bash"><div class="contents"><pre class="notranslate">echo "options ipw2200 led=1" | sudo tee /etc/modprobe.d/ipw2200.conf </pre></div></div><p>Im Fall der Intel 2100b ist <code class="notranslate">ipw2200</code> durch <code class="notranslate">ipw2100</code> zu ersetzen.</p></div><div class="section_2"><h3 id="FSC-Amilo-Acer-Aspire-Travelmate">FSC Amilo, Acer Aspire/Travelmate<a class="headerlink" href="#FSC-Amilo-Acer-Aspire-Travelmate">¶</a></h3><p>
(nur 32bit-Systeme)</p><p>Bei einigen älteren Modellen der genannten Baureihen (vollständige Liste im Modulquelltext <a class="external" href="http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=blob;f=drivers/input/misc/wistron_btns.c" rel="nofollow">wistron_btns.c</a> ab Zeile 260) läßt sich mit Hilfe des Kernelmoduls <code class="notranslate">wistron_btns</code> die Hardwaretaste zum Schalten des WLAN in Betrieb nehmen. Zeigt das manuelle Laden des Moduls mit
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo modprobe -v wistron_btns </pre></div></div><p>den gewünschten Erfolg, so kann man es künftig beim Systemstart automatisch laden, indem man eine zusätzliche Zeile an die Datei <a class="internal" href="./kernelmodule.html#Module-automatisch-laden">/etc/modules</a> anfügt:
</p><div class="bash"><div class="contents"><pre class="notranslate">echo "wistron_btns" | sudo tee -a /etc/modules </pre></div></div></div><div class="section_2"><h3 id="ltere-FSC-Amilo-Notebooks">Ältere FSC Amilo Notebooks<a class="headerlink" href="#ltere-FSC-Amilo-Notebooks">¶</a></h3><p>
(nur Ubuntu 12.04)</p><p>Hier sind drei Varianten zu unterscheiden:</p><ol class="arabic"><li><p>fsam7400</p></li><li><p>fsam7440</p></li><li><p>fsaa1655g</p></li></ol><p>
</p><div class="section_3"><h4 id="Modul-fsam7400-im-Kernel">Modul fsam7400 (im Kernel)<a class="headerlink" href="#Modul-fsam7400-im-Kernel">¶</a></h4><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Benutzerberichten zufolge (Quellen: <a class="external" href="http://ubuntuforums.org/showthread.php?p=11573566#post11573566" rel="nofollow">Ubuntu-Forum Artikel 1</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>, <a class="external" href="https://secure.kitserve.org.uk/content/xorg-and-wireless-ubuntu-and-debian-fujitsu-siemens-amilo-pro-v2000d" rel="nofollow">Ubuntu-Forum Artikel 2</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>) funktioniert <code class="notranslate">fsam7400</code> ab Kernel 3.0 bzw. Ubuntu 11.10 nicht mehr. Als alternative Lösung bietet sich das <a class="crosslink" href="#FSC-Amilo-Acer-Aspire-Travelmate">vorstehend beschriebene</a> Modul <code class="notranslate">wistron_btns</code> an.
</p></div></div><p>Nun lädt man das Modul mit
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo modprobe -v fsam7400 radio=1 </pre></div></div><p>
und prüft, ob sich der Adapter im Terminal schalten läßt mit:
</p><div class="bash"><div class="contents"><pre class="notranslate">echo 1 | sudo tee /proc/fsam7400/radio  # einschalten
echo 0 | sudo tee /proc/fsam7400/radio  # ausschalten </pre></div></div><p>War der vorstehende Test erfolgreich, kann man das Modul automatisch beim Systemstart laden
</p><div class="bash"><div class="contents"><pre class="notranslate">echo "fsam7400" | sudo tee -a /etc/modules </pre></div></div><p>
und den gewünschten Schaltzustand festlegen
</p><div class="bash"><div class="contents"><pre class="notranslate">echo "options fsam7400 radio=1" | sudo tee /etc/modprobe.d/fsam7400.conf  # an
echo "options fsam7400 radio=0" | sudo tee /etc/modprobe.d/fsam7400.conf  # aus </pre></div></div></div><div class="section_3"><h4 id="Modul-fsam7440-nicht-im-Kernel">Modul fsam7440 (nicht im Kernel)<a class="headerlink" href="#Modul-fsam7440-nicht-im-Kernel">¶</a></h4><p>
Quellcode des Moduls herunterladen: 
</p><ul><li><p><a class="crosslink" href="./rfkill.html">Ubuntu 10.10 und höher</a> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/></p></li></ul><p>
Entpacken: 
</p><div class="bash"><div class="contents"><pre class="notranslate">tar xvfz fsam7440-0.4_fixed_10.10_and_up.tar.gz
cd fsam7440-0.4_fixed_10.10_and_up </pre></div></div><p>Kompilieren und installieren (diesen Schritt bei einem Kernelupdate wiederholen oder <a class="internal" href="./dkms.html">DKMS</a> verwenden):
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install linux-headers-$(uname -r) build-essential
make 
sudo make install </pre></div></div><p>Nun lädt man das Modul mit
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo modprobe -rfv fsam7400 # ggf. Modul aus vorigem Fall entladen
sudo modprobe -v fsam7440 radio=1 </pre></div></div><p>
und verfährt danach wie im Abschnitt zu <a class="crosslink" href="#Modul-fsam7400-im-Kernel">fsam7400</a> gezeigt – dabei sind alle Vorkommen von <code class="notranslate">fsam7400</code> durch <code class="notranslate">fsam7440</code> zu ersetzen.</p></div><div class="section_3"><h4 id="Modul-fsaa1655g-nicht-im-Kernel">Modul fsaa1655g (nicht im Kernel)<a class="headerlink" href="#Modul-fsaa1655g-nicht-im-Kernel">¶</a></h4><p>
Modul herunterladen und entpacken (Quellen: <a class="external" href="http://marvec.org/amilo/" rel="nofollow">1</a>, <a class="external" href="http://ubuntuforums.org/showthread.php?t=1530962" rel="nofollow">2</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>):
</p><div class="bash"><div class="contents"><pre class="notranslate">wget http://www.marvec.org/amilo/fsaa1655g-kernel-2.6.26.tar.bz2
mkdir fsaa1655g
tar xvCfj fsaa1655g fsaa1655g-kernel-2.6.26.tar.bz2  </pre></div></div><p>Kompilieren und installieren (diesen Schritt bei einem Kernelupdate wiederholen oder <a class="internal" href="./dkms.html">DKMS</a> verwenden):
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install linux-headers-$(uname -r) build-essential
cd fsaa1655g
make 
sudo make install </pre></div></div><p>Nun lädt man das Modul mit
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo modprobe -rfv fsam7440 # ggf. Modul aus vorigem Fall entladen
sudo modprobe -v fsaa1655g  </pre></div></div><p>
und verfährt danach wie im Abschnitt zu <a class="crosslink" href="#Modul-fsam7400-im-Kernel">fsam7400</a> gezeigt – dabei sind alle Vorkommen von <code class="notranslate">fsam7400</code> durch <code class="notranslate">fsaa1655g</code> zu ersetzen.</p></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://www.kernel.org/doc/Documentation/rfkill.txt" rel="nofollow">rfkill</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> – Dokumentation der Kernel-Schnittstelle</p></li><li><p><a class="external" href="http://linuxwireless.org/en/users/Documentation/rfkill" rel="nofollow">linuxwireless.org rfkill</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> – Dokumentation des Kommandozeilen-Werkzeugs </p></li><li><p><a class="internal" href="./acer-wmi.html">acer-wmi</a> – Artikel zum Kernelmodul <code class="notranslate">acer_wmi</code></p></li><li><p><a class="internal" href="./acer_hotkeys.html">Acer Hotkeys</a> – Werkzeug für ältere Notebooks, nur 32-Bit Systeme</p></li><li><p><a class="internal" href="./kernelmodule.html">Kernelmodule</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Grundlagenartikel zur Handhabung von Kernelmodulen</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./rfkill/a/revision/937291.html">Diese Revision</a> wurde am 6. März 2017 13:42 von <a href="https://ubuntuusers.de/user/tomtomtom/">tomtomtom</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./rfkill.html">rfkill</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>