<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Festplattenschutz › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./festplattenschutz.html">Festplattenschutz</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Festplattenschutz">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./festplattenschutz/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./festplattenschutz/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./festplattenschutz/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./festplattenschutz/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./festplattenschutz/a/backlinks.html">Festplattenschutz</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Paketen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./paketinstallation_deb.html">Ein einzelnes Paket installieren</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./editor.html">Einen Editor mit Root-Rechten öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="./xfce_panel.html">Erweiterungen für das Xfce Panel</a></p></li><li><p><a class="crosslink anchor" href="#source-6" id="source-6"></a> <a class="internal" href="./paketquellen_freischalten/ppa.html#PPA-hinzufuegen">PPA hinzufügen</a></p></li></ol></div></div><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Nicht-unterstuetzte-Hardware">Nicht unterstützte Hardware
</a></li><li><a class="crosslink" href="#Installation">Installation
</a><ol class="arabic"><li><a class="crosslink" href="#Kernelmodul-hdaps-installieren">Kernelmodul hdaps installieren
</a></li><li><a class="crosslink" href="#berwachungsdaemon-hdapsd-installieren">Überwachungsdämon hdapsd installieren
</a></li></ol></li><li><a class="crosslink" href="#Konfiguration">Konfiguration
</a><ol class="arabic"><li><a class="crosslink" href="#Ubuntu-16-04-und-neuer">Ubuntu 16.04 und neuer
</a></li><li><a class="crosslink" href="#Ubuntu-14-04">Ubuntu 14.04
</a></li></ol></li><li><a class="crosslink" href="#Funktionstest">Funktionstest
</a><ol class="arabic"><li><a class="crosslink" href="#Problembehebung">Problembehebung
</a></li></ol></li><li><a class="crosslink" href="#Optionale-Anwendungen">Optionale Anwendungen
</a><ol class="arabic"><li><a class="crosslink" href="#Panel-Anzeige-des-Festplattenschutzes">Panel-Anzeige des Festplattenschutzes
</a></li><li><a class="crosslink" href="#Visualisierungen-der-Raumlage">Visualisierungen der Raumlage
</a></li><li><a class="crosslink" href="#Orientierung-der-Raumachsen-korrigieren">Orientierung der Raumachsen korrigieren
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a><ol class="arabic"><li><a class="crosslink" href="#Intern">Intern
</a></li><li><a class="crosslink" href="#Allgemeine-Informationen">Allgemeine Informationen
</a></li><li><a class="crosslink" href="#Weitere-HDAPS-basierte-Anwendungen">Weitere HDAPS-basierte Anwendungen
</a></li><li><a class="crosslink" href="#Fremdquellen">Fremdquellen
</a></li></ol></li></ol></div><p><img alt="Wiki/Icons/hd.png" class="image-left" src="./_/8c254286abff1c2469aaf34f1afc7cc1444f7ae9.png"/>
Dieser Artikel beschreibt den Softwareteil des aktiven Festplattenschutzes für IBM/Lenovo ThinkPads unter Linux, den <a class="external" href="http://www.thinkwiki.org/wiki/HDAPS" rel="nofollow">IBM Active Protection System Linux Driver (HDAPS)</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>. Seit 2003 verfügen viele ThinkPad-Modelle auf der Hauptplatine über einen Bewegungs-Sensor, ein sogenanntes <a class="interwiki interwiki-wikipedia_en" href="https://en.wikipedia.org/wiki/Accelerometer">Accelerometer</a>, das vor allem dazu dienen soll, den Lesearm der Festplatte im Falle eines Sturzes innerhalb von Millisekunden zu "parken", damit die Festplatte nicht beschädigt wird. Die hier vorgestellte Softwarelösung funktioniert mit allen aktuellen Notebook-Festplatten.</p><p>Einen ähnlichen Sensor haben u.a. Notebooks von Acer (<em>"GraviSense"</em>) und Apple (<em>"Sudden Motion Sensor"</em>), allerdings gibt es dafür keine Software.</p><p>In jüngerer Zeit werden bestimmte Festplatten-Modelle für Notebooks mit einem integrierten Sensor ausgestattet, meist als <em>"Free Fall Sensor"</em> bezeichnet. Dieser Festplattentyp sorgt ohne Softwareunterstützung eigenständig für den Parkvorgang. Die Sensordaten jedoch sind nicht für die unten beschriebenen weiteren Anwendungen zugänglich.</p><div class="section_1"><h2 id="Nicht-unterstuetzte-Hardware">Nicht unterstützte Hardware<a class="headerlink" href="#Nicht-unterstuetzte-Hardware">¶</a></h2><p>
Trotz eines vorhandenen Sensors unterstützt HDAPS nicht folgende Modelle:</p><ul><li><p>ThinkPad-Baureihen S, SL, L, E/Edge sowie X100e und X121e – es wird eine andere Hardware eingesetzt, für die kein Treiber existiert</p></li><li><p>ThinkPad L430, L530, T430(s), T530, W530, X230 sowie alle neueren Baureihen – Kernelmodul <code class="notranslate">hdaps</code> lädt nicht</p></li><li><p>Nicht-ThinkPad-Baureihen von Lenovo</p></li><li><p>Notebooks anderer Hersteller</p></li></ul><p>
</p></div><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
<span class="underline">Vorbemerkung:</span> es ist von Vorteil die im folgenden angegebenen Pakete für Kernelmodul und Überwachungsdämon einzeln nacheinander zu installieren. Tut man es stattdessen in einem Schritt, so zieht der Überwachungsdämon zunächst ein veraltetes Kernelmodul an, was einen Neustart erforderlich macht.</p><div class="section_2"><h3 id="Kernelmodul-hdaps-installieren">Kernelmodul hdaps installieren<a class="headerlink" href="#Kernelmodul-hdaps-installieren">¶</a></h3><p>
Das in den offiziellen Kerneln enthaltene Modul <code class="notranslate">hdaps</code> ist für den Festplattenschutz nicht geeignet, deshalb wird hier eine gepatchte Version aus dem Projekt <a class="internal" href="./tp-smapi.html">tp-smapi</a> verwendet.</p><p>Zu installieren ist das Paket:
</p><ul><li><p><strong>tp-smapi-dkms</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install tp-smapi-dkms </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install tp-smapi-dkms </pre></div></div><p>
</p></div></div></div><div class="section_2"><h3 id="berwachungsdaemon-hdapsd-installieren">Überwachungsdämon hdapsd installieren<a class="headerlink" href="#berwachungsdaemon-hdapsd-installieren">¶</a></h3><p>
Für den Dämon ist das Paket
</p><ul><li><p><strong>hdapsd</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install hdapsd </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install hdapsd </pre></div></div><p>
</p></div></div><p>
zu installieren.</p></div></div><div class="section_1"><h2 id="Konfiguration">Konfiguration<a class="headerlink" href="#Konfiguration">¶</a></h2><p>
</p><div class="section_2"><h3 id="Ubuntu-16-04-und-neuer">Ubuntu 16.04 und neuer<a class="headerlink" href="#Ubuntu-16-04-und-neuer">¶</a></h3><p>
Die Konfiguration des Überwachungsdämons wird in der Datei <strong>/etc/hdapsd.conf</strong> vorgenommen, die mit Root-Rechten editiert werden muss <sup><a href="#source-3">[3]</a></sup>.
</p><pre class="notranslate">device="sda";          # eine Festplatte; entspricht Option -d 
device=["sda", "sdb"]; # mehrere Festplatten 

sensitivity=15;        # höhere Werte bedeuten geringere Empfindlichkeit und umgekehrt; entspricht Option -s 
adaptive=true;         # entspricht Option -a</pre></div><div class="section_2"><h3 id="Ubuntu-14-04">Ubuntu 14.04<a class="headerlink" href="#Ubuntu-14-04">¶</a></h3><p>
Die Konfiguration des Überwachungsdämons wird in der Datei <strong>/etc/default/hdapsd</strong> vorgenommen, die mit Root-Rechten editiert werden muss <sup><a href="#source-3">[3]</a></sup>.</p><pre class="notranslate">START=yes         # falls hdaps beim Systemstart mitgestartet werden soll
DISK=sda          # oder sdb, hda, hdb; je nach Festplatte bzw. Kernel; entspricht Option -d 
SENSITIVITY=15    # höhere Werte bedeuten geringere Empfindlichkeit und umgekehrt; entspricht Option -s 
FORCEENABLE="no"  # hdaps für die Platte erzwingen mit "yes"; entspricht Option -f
OPTIONS=""        # weitere Optionen</pre><p>Der Punkt <code class="notranslate">SENSITIVITY</code> stellt die Empfindlichkeit ein (<em>höhere</em> Werte bedeuten eine <em>geringere</em> Empfindlichkeit). 
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Einige Benutzer berichten, dass mit dem Vorgabewert 15 der Schutz zu empfindlich eingestellt ist. Es empfiehlt sich daher stets einen <a class="crosslink" href="#Funktionstest">Funktionstest</a> zu machen und gegebenenfalls den Wert zu erhöhen. Andernfalls besteht die Gefahr frühzeitigen Verschleißes der Festplatte(n).
</p></div></div><p>Die Option <code class="notranslate">-a</code> kann hinzugefügt werden, um bei Benutzung der internen Tastatur die Empfindlichkeit automatisch zu senken. Bei einigen Festplatten wird die HDAPS-Fähigkeit fälschlicherweise nicht erkannt, dann probehalber <code class="notranslate">FORCEENABLE="yes"</code> setzen.</p><p>Nach einer Anpassung der Konfiguration ist stets der Dämon mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service hdapsd restart </pre></div></div><p>neu zu starten.</p></div></div><div class="section_1"><h2 id="Funktionstest">Funktionstest<a class="headerlink" href="#Funktionstest">¶</a></h2><p>
Für den Test ist zunächst der bei der Installation automatisch im Hintergrund gestartete Dämon anzuhalten <sup><a href="#source-4">[4]</a></sup></p><div class="bash"><div class="contents"><pre class="notranslate">sudo service hdapsd stop </pre></div></div><p>und im Vordergrund wieder zu starten mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hdapsd -d sda -s 15 </pre></div></div><p>Beim Funktionstest wird <strong>/etc/default/hdapsd</strong> nicht gelesen, da der Dämon direkt gestartet wird. Deshalb ist die Empfindlichkeit (und ggf. andere Optionen) wie gezeigt in der Kommandozeile anzugeben.</p><p>Nun das ThinkPad sanft "schütteln"; es sollten Ausgaben ähnlich dieser erscheinen:</p><pre class="notranslate">Sun Oct 25 22:17:34 2009: Starting hdapsd
Sun Oct 25 22:17:34 2009: WARNING: You did not supply any devices to protect, trying autodetection.
Sun Oct 25 22:17:34 2009: Adding autodetected device: sda
Sun Oct 25 22:17:34 2009: Selected interface: HDAPS
Sun Oct 25 22:17:35 2009: Selected HDAPS input device: /dev/input/event21
Sun Oct 25 22:17:36 2009: parking
Sun Oct 25 22:17:37 2009: un-parking
Sun Oct 25 22:17:40 2009: parking
Sun Oct 25 22:17:41 2009: un-parking</pre><p>Nach dem Test den Dämon mit 
<span class="key">Strg</span>  + 
<span class="key">C</span>  beenden und wieder im Hintergrund starten mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service hdapsd start </pre></div></div><div class="section_2"><h3 id="Problembehebung">Problembehebung<a class="headerlink" href="#Problembehebung">¶</a></h3><p>
</p><div class="section_3"><h4 id="Fehlermeldung-Error-Not-parked">Fehlermeldung "Error! Not parked ..."<a class="headerlink" href="#Fehlermeldung-Error-Not-parked">¶</a></h4><p>
Erscheint beim Funktionstest die Meldung</p><pre class="notranslate">Error! Not parked when we thought we were... (paged out and timer expired?)</pre><p>so gibt es zwei mögliche Ursachen:</p><ol class="arabic"><li><p>Es laufen mehrere Instanzen des Dämons, die sich gegenseitig in die Quere kommen</p></li><li><p>Die Festplatte ist nicht HDAPS-fähig (gilt insbesondere, wenn schon <code class="notranslate">FORCEENABLE="yes"</code> gesetzt ist)</p></li></ol><p>
Den ersten Fall kann man überprüfen mit</p><div class="bash"><div class="contents"><pre class="notranslate">ps -ef | grep hdapsd | grep -v grep </pre></div></div><p>Wenn keine Ausgabe erfolgt, ist kein Dämon gestartet. Andernfalls stoppt man alle Instanzen mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo killall hdapsd </pre></div></div><p>und prüft erneut wie oben gezeigt.</p><p>Schlägt danach der Funktionstest erneut mit derselben Meldung fehl, so trifft die zweite Möglichkeit zu. In diesem Fall könnte ein Firmware-Update der Festplatte Abhilfe schaffen. Auf dieser <a class="external" href="http://www.thinkwiki.org/wiki/Problem_with_APS_harddisk_parking#Supported.2Funsupported_harddrive_firmwares" rel="nofollow">Seite</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> sind bekannte, nicht funktionierende Festplatten bzw. Firmware-Versionen mit "not parked" gekennzeichnet.</p></div><div class="section_3"><h4 id="Fehlermeldung-WARNING-Could-not-find-hdaps-input-device">Fehlermeldung "WARNING: Could not find hdaps input device  ..."<a class="headerlink" href="#Fehlermeldung-WARNING-Could-not-find-hdaps-input-device">¶</a></h4><p>
Die Ausgaben</p><pre class="notranslate">WARNING: Could not find hdaps input device (No such file or directory). You may be using an incompatible version of the hdaps module. Falling back to reading the position from sysfs (uses more power).
Use '-y' to silence this warning.
Could not open /sys/devices/platform/hdaps/sampling_rate: No such file or directory.
Do you have the hdaps module loaded?</pre><p>weisen darauf hin, daß das <a class="crosslink" href="#Kernelmodul-hdaps-installieren">Installieren des Kernelmoduls</a> fehlgeschlagen ist. Dadurch wird das ungeeignete Modul <code class="notranslate">hdaps</code> aus dem Standard-Kernel verwendet. Dies kann man zusätzlich mit dem folgendem Befehl prüfen</p><div class="bash"><div class="contents"><pre class="notranslate">modinfo hdaps </pre></div></div><p>Das <em>falsche</em> Modul aus dem Standard-Kernel liefert</p><pre class="notranslate">filename:       /lib/modules/KERNEL-VERSION/drivers/hwmon/hdaps.ko ...</pre><p>Das <em>richtige</em> Modul aus <strong>tp-smapi-dkms</strong> liefert</p><pre class="notranslate">filename:       /lib/modules/KERNEL-VERSION/updates/dkms/hdaps.ko ...</pre></div><div class="section_3"><h4 id="Fehlermeldung-Could-not-find-a-suitable-interface">Fehlermeldung "Could not find a suitable interface"<a class="headerlink" href="#Fehlermeldung-Could-not-find-a-suitable-interface">¶</a></h4><p>
Die Ausgabe</p><pre class="notranslate">Could not find a suitable interface</pre><p>weist darauf hin, dass das Modul <code class="notranslate">hdaps</code> nicht geladen werden konnte. Weitere Informationen zur Ursache liefert der Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">sudo modprobe -v hdaps </pre></div></div><p>Sollte dort die Ausgabe</p><pre class="notranslate">WARNING: Error inserting thinkpad_ec (/lib/modules/.../thinkpad_ec.ko): No such device or address</pre><p>erscheinen, so sollte man mit den in <a class="crosslink" href="http://wiki.ubuntuusers.de/tp-smapi#Problembehebung">tp-smapi (Abschnitt Problembehebung)</a> beschriebenen Maßnahmen fortfahren.</p></div><div class="section_3"><h4 id="Fehlermeldung-Could-not-read-from-sys-block-sda-device-unload-heads">Fehlermeldung "Could not read from /sys/block/sda/device/unload_heads ..."<a class="headerlink" href="#Fehlermeldung-Could-not-read-from-sys-block-sda-device-unload-heads">¶</a></h4><p>
Ursache der Meldungen</p><pre class="notranslate">Could not read from /sys/block/sda/device/unload_heads: Operation not supported
Could not detect any devices.</pre><p>ist, dass die Festplatte nicht HDAPS-fähig ist bzw. die Fähigkeit nicht erkannt wird. Letzteres ist bei älteren IDE-Festplatten nach dem ATA-Standard &lt; 7 der Fall. Solche Festplatten erkennt man an der Ausgabe des Befehls</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hdparm -I /dev/sda </pre></div></div><pre class="notranslate">Standards:
	Used: ATA/ATAPI-6 T13 1410D revision 3a 
	Supported: 6 5 4 </pre><p>Zur Behebung kann man versuchsweise <code class="notranslate">hdapsd</code> mit der Option <code class="notranslate">-f</code> (und Angabe des Geräts) aufrufen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hdapsd -d sda -s 15 -f </pre></div></div><p>War der Test mit <code class="notranslate">-f</code> erfolgreich, kann man die Einstellung in <strong>/etc/default/hdapsd</strong> übernehmen:</p><pre class="notranslate">FORCEENABLE="yes"</pre><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Um in diesem Fall sicherzustellen, daß die Köpfe tatsächlich geparkt werden, sollte man auf das beim Parken entstehende leise Klickgeräusch achten!
</p></div></div><p>Erscheint hingegen mit <code class="notranslate">-f</code> die Fehlermeldung
</p><pre class="notranslate">Error! Not parked ...</pre><p>
so ist höchstwahrscheinlich die Festplatte nicht HDAPS-fähig. Weitere Hinweise dazu im betreffenden <a class="crosslink" href="#Fehlermeldung-Error-Not-parked">Abschnitt</a>.</p></div></div></div><div class="section_1"><h2 id="Optionale-Anwendungen">Optionale Anwendungen<a class="headerlink" href="#Optionale-Anwendungen">¶</a></h2><p>
Um den aktuellen Zustand der Festplatte dauernd im Blick zu haben, existieren Panel-Applets und Visualisierungsprogramme, welche die Daten des Sensors und das Verhalten des HDAPS-Dämons überwachen und darstellen. Inzwischen sind aber auch eine Reihe eher spielerischer Anwendungen entstanden, welche auf die Ablesungen insbesondere des Sensors zurückgreifen, um durch Klopfzeichen oder Schwenken des Laptops Prozesse auszulösen und Programme zu steuern. Einige Beispiele hierzu sind <a class="crosslink" href="#Weitere-HDAPS-basierte-Anwendungen">am Ende dieses Artikels</a> zusammengetragen.</p><div class="section_2"><h3 id="Panel-Anzeige-des-Festplattenschutzes">Panel-Anzeige des Festplattenschutzes<a class="headerlink" href="#Panel-Anzeige-des-Festplattenschutzes">¶</a></h3><p>
</p><div class="section_3"><h4 id="Unter-Unity-GNOME-3">Unter Unity / GNOME 3<a class="headerlink" href="#Unter-Unity-GNOME-3">¶</a></h4><p>
Unity-Benutzern steht <a class="external" href="http://gnome-hdaps-osd.sourceforge.net/" rel="nofollow">gnome-hdaps-osd</a> zur Verfügung. Diese Lösung ist auch kompatibel zu GNOME 3.</p></div><div class="section_3"><h4 id="Unter-Xfce">Unter Xfce<a class="headerlink" href="#Unter-Xfce">¶</a></h4><p>
Seit Ubuntu 9.10 gibt es für Xfce ein Applet zum Visualisieren des HDAPS-Status. Dazu installiert man das Paket</p><ul><li><p><strong>xfce4-hdaps</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install xfce4-hdaps </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install xfce4-hdaps </pre></div></div><p>
</p></div></div><p>und fügt danach das Applet dem Panel hinzu <sup><a href="#source-5">[5]</a></sup>.</p></div><div class="section_3"><h4 id="Weitere">Weitere<a class="headerlink" href="#Weitere">¶</a></h4><p>
Für den <a class="internal" href="./avant_window_navigator.html">Avant Window Navigator</a> gibt es das ThinkHDAPS Applet.</p></div></div><div class="section_2"><h3 id="Visualisierungen-der-Raumlage">Visualisierungen der Raumlage<a class="headerlink" href="#Visualisierungen-der-Raumlage">¶</a></h3><p>
<img alt="hdaps-gl.png" class="image-right" src="./_/2bd907ae1b1df508502a263bd85a7c1b879429d2.png"/>
Es bestehen verschiedene kleine Anwendungen, die die aktuelle Raumlage des Laptops anzeigen können. Empfohlen sei hier <a class="external" href="http://sourceforge.net/projects/hdaps/files/hdaps-gl/" rel="nofollow">hdaps-gl</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p><div class="section_3"><h4 id="Installation-aus-PPA">Installation aus PPA<a class="headerlink" href="#Installation-aus-PPA">¶</a></h4><p>
Hierzu ist das <a class="external" href="http://thinkwiki.de/Ubuntu_ThinkPad_Extras_PPA" rel="nofollow">ThinkPad Extras PPA</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> freizuschalten.</p><p>Adresszeile zum <a class="internal" href="./paketquellen_freischalten/ppa.html#PPA-hinzufuegen">Hinzufügen</a> des PPAs:
</p><ul><li><p><strong>ppa:linrunner/thinkpad-extras</strong> </p></li></ul><div class="box warning"><h3 class="box warning">Hinweis!</h3><div class="contents"><p>
Zusätzliche <a class="internal" href="./fremdquellen.html">Fremdquellen</a> können das System gefährden. 
</p><hr/><p>Ein PPA unterstützt nicht zwangsläufig alle Ubuntu-Versionen. Weitere Informationen sind der <img alt="Wiki/Vorlagen/PPA/ppa.png" class="image-default" src="./_/237f3a0f00c3091056c1a912d81e924e8391ed6b.png"/> <a class="external" href="https://launchpad.net/~linrunner/+archive/thinkpad-extras" rel="nofollow">PPA-Beschreibung</a> des Eigentümers/Teams <a class="interwiki interwiki-lpuser" href="https://launchpad.net/~linrunner">linrunner</a> zu entnehmen.
</p></div></div><p>
Damit Pakete aus dem PPA genutzt werden können, müssen die Paketquellen <a class="internal" href="./paketquellen_freischalten.html">neu eingelesen</a> werden.</p><p>Nach dem Aktualisieren der Paketquellen kann das folgende Paket installiert werden:</p><ul><li><p><strong>hdaps-utils</strong> (<em>ppa</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install hdaps-utils </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install hdaps-utils </pre></div></div><p>
</p></div></div><p>Die Echtzeit-Visualisierung kann danach mit folgendem Befehl aufgerufen werden <sup><a href="#source-4">[4]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">hdaps-gl </pre></div></div><p>Beim Neigen des Notebooks bleibt die Raumlage des von <strong>hdaps-gl</strong> angezeigten Notebooks stabil. Neigt es sich in die falsche Richtung, so ist <a class="crosslink" href="#Orientierung-der-Raumachsen-korrigieren">die Orientierung der Raumachsen zu korrigieren</a>.</p><p>Mit <strong>hdaps-utils</strong> wird auch ein Programm namens <code class="notranslate">hdaps-pivot</code> installiert, das Lageveränderungen numerisch an die Konsole ausgibt. Es wird mit folgendem Befehl gestartet:</p><div class="bash"><div class="contents"><pre class="notranslate">hdaps-pivot </pre></div></div></div></div><div class="section_2"><h3 id="Orientierung-der-Raumachsen-korrigieren">Orientierung der Raumachsen korrigieren<a class="headerlink" href="#Orientierung-der-Raumachsen-korrigieren">¶</a></h3><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die hier beschriebene Konfiguration ist für eine korrekte Funktion nur des Festplattenschutzes nicht notwendig!
</p></div></div><p>Das Kernelmodul <strong>hdaps</strong> enthält eine Tabelle mit den richtigen Voreinstellungen für die Orientierung der Raumachsen vieler ThinkPad-Modelle.  Für eine Änderung dieser Voreinstellungen (auch im Fall unbekannter Modelle) ist entweder beim Laden des Kernelmoduls <strong>hdaps</strong> der Modul-Parameter <code class="notranslate">invert</code> oder zur Laufzeit das Sysfs-Attribut <strong>/sys/devices/platform/hdaps/invert</strong> einzustellen.</p><table style="width: 30%; text-align: right; float: right; margin-left: 15px"><tr class="titel"><td colspan="3"> Parameter invert </td></tr><tr class="kopf"><td> Wert </td><td> R </td><td> P </td></tr><tr><td> 0 </td><td> X </td><td> Y </td></tr><tr><td> 1 </td><td> -X </td><td> -Y </td></tr><tr><td> 2 </td><td> -X </td><td> Y </td></tr><tr><td> 3 </td><td> X </td><td> -Y </td></tr><tr><td> 4 </td><td> Y </td><td> X </td></tr><tr><td> 5 </td><td> -Y </td><td> -X </td></tr><tr><td> 6 </td><td> -Y </td><td> X </td></tr><tr><td> 7 </td><td> Y </td><td> -X </td></tr></table><p>
Der Parameter <code class="notranslate">invert</code> kann die Werte 0 bis 7 annehmen. In der nebenstehenden Tabelle geben X und Y die Ausgänge des Sensors, R ein seitliches Neigen des Notebooks und P ein Neigen nach vorne oder hinten an.</p><p>Am einfachsten ermittelt man die richtige Einstellung durch Ausprobieren:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo sh -c "echo W &gt; /sys/devices/platform/hdaps/invert"
hdaps-gl </pre></div></div><p>wobei <code class="notranslate">W</code> durch den gewünschten Wert zu ersetzen ist. Nach jeder Änderung des Parameters muß <strong>hdaps-gl</strong> neu gestartet werden.</p><p>Soll die so ermittelte Einstellung dauerhaft eingerichtet werden, ist mit einem Editor mit Root-Rechten<sup><a href="#source-4">[4]</a></sup>  die Konfigurationsdatei <strong>/etc/modprobe.d/hdaps.conf</strong> mit folgendem Inhalt zu erstellen:</p><pre class="notranslate">options hdaps invert=W</pre></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><div class="section_2"><h3 id="Intern">Intern<a class="headerlink" href="#Intern">¶</a></h3><p>
</p><ul><li><p><a class="internal" href="./tp-smapi.html">tp-smapi</a> –  ThinkPad-spezifische Akkufunktionen</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Allgemeine-Informationen">Allgemeine Informationen<a class="headerlink" href="#Allgemeine-Informationen">¶</a></h3><p>
</p><ul><li><p>Die Einträge im <a class="external" href="http://www.thinkwiki.org" rel="nofollow">ThinkWiki</a> zu <a class="external" href="http://www.thinkwiki.org/wiki/Active_Protection_System" rel="nofollow">APS</a>, <a class="external" href="http://www.thinkwiki.org/wiki/HDAPS" rel="nofollow">HDAPS</a> und <a class="external" href="http://www.thinkwiki.org/wiki/Tp_smapi" rel="nofollow">tp-smapi</a> (alle <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ) </p></li><li><p><a class="external" href="https://sourceforge.net/mailarchive/forum.php?forum_name=hdaps-devel" rel="nofollow">Mailingliste der Entwickler des Linux-Treibers</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p>Technische Daten zum Sensor <a class="external" href="http://www.analog.com/en/prod/0,2877,ADXL320,00.html" rel="nofollow">http://www.analog.com/en/prod/0,2877,ADXL320,00.html</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li></ul><p>
</p></div><div class="section_2"><h3 id="Weitere-HDAPS-basierte-Anwendungen">Weitere HDAPS-basierte Anwendungen<a class="headerlink" href="#Weitere-HDAPS-basierte-Anwendungen">¶</a></h3><p>
</p><ul><li><p>Arbeitsfläche wechseln durch Antippen des Laptops: <a class="external" href="http://weblogs.mozillazine.org/gerv/archives/2006/09/stablilised_smackpad.html" rel="nofollow">SmackPad</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> bzw. <a class="external" href="http://www.gnome.org/~fherrera/gtollina.c" rel="nofollow">gtollina</a> <img alt="{es}" src="./_/c166234c9ff1cc2e1d1e9f1cf7055c69eb1cd356.png"/>. </p></li><li><p>Einen Bewegungs-Alarm einbauen: <a class="external" href="http://www.thinkwiki.org/wiki/Script_for_theft_alarm_using_HDAPS" rel="nofollow" title="http://www.thinkwiki.org/wiki/Script_for_theft_alarm_using_HDAPS">http://www.thinkwiki.org/wiki/Script_for_theft_alarm_using_HDAPS</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> (Vorsicht: dies ist kein wirksamer Diebstahlschutz!)</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Fremdquellen">Fremdquellen<a class="headerlink" href="#Fremdquellen">¶</a></h3><p>
</p><ul><li><p><a class="external" href="http://thinkpad-wiki.org/Ubuntu_ThinkPad_Extras_PPA" rel="nofollow">Ubuntu ThinkPad Extras PPA</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> – Paket aus dem Abschnitt <a class="internal" href="./festplattenschutz.html#Visualisierungen-der-Raumlage">Visualisierungen der Raumlage</a>.</p></li></ul><p>
</p></div></div></div>
<p class="meta">
<a href="./festplattenschutz/a/revision/940424.html">Diese Revision</a> wurde am 8. Mai 2017 17:51 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./festplattenschutz.html">Festplattenschutz</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>