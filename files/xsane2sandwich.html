<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>xsane2sandwich › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./xsane2sandwich.html">xsane2sandwich</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/xsane2sandwich">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./xsane2sandwich/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./xsane2sandwich/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./xsane2sandwich/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./xsane2sandwich/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./xsane2sandwich/a/backlinks.html">xsane2sandwich</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./editor.html">Einen Editor verwenden</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./rechte.html">Rechte für Dateien und Ordner ändern</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./sudo.html">Root-Rechte</a></p></li></ol></div></div><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Vorbereitung">Vorbereitung
</a><ol class="arabic"><li><a class="crosslink" href="#Nutzung-ab-Trusty">Nutzung ab Trusty
</a></li></ol></li><li><a class="crosslink" href="#Konfiguration">Konfiguration
</a></li><li><a class="crosslink" href="#Funktionsweise">Funktionsweise
</a></li><li><a class="crosslink" href="#Benutzung">Benutzung
</a><ol class="arabic"><li><a class="crosslink" href="#Beispiel">Beispiel
</a></li></ol></li><li><a class="crosslink" href="#xsane2OCRmyPDF">xsane2OCRmyPDF
</a></li><li><a class="crosslink" href="#Alternativen">Alternativen
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>
<img alt="XSane/xsane-logo.png" class="image-left" src="./_/f2dfa6da37105e77c232b5cab004a8e96d4b3c07.png"/>
xsane2sandwich ist ein Wrapper-Skript für <a class="internal" href="./xsane.html">XSane</a>, mit dem einfach durchsuchbare <a class="internal" href="./pdf.html">PDF</a>-Dateien mit einer eingebetteten Textebene erstellt werden können. Verwendet werden das Texterkennungsprogramm <a class="internal" href="./tesseract-ocr.html">tesseract-ocr</a> (ab Version 3.0x), um die Textebene in einem <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/HOCR_(Standard)">hOCR/html</a>-Format zu erstellen, <code class="notranslate">convert</code> aus <a class="internal" href="./imagemagick.html">ImageMagick</a>, um die Bildausgabe von XSane in ein verarbeitbares Format umzuformen, <code class="notranslate">hocr2pdf</code> aus der <a class="internal" href="./exactimage.html">ExactImage</a>-Suite zur Zusammenführung der Ebenen, sowie <a class="internal" href="./pdftk.html">pdftk</a>, um mehrseitige PDF-Dateien zu erstellen. Die PDF-Erstellung von XSane selbst kann keine integrierte Texterkennung liefern, man kann darüber erstellte PDFs aber z.B. mit <a class="internal" href="./pdfsandwich.html">pdfsandwich</a> mit einer Textlage versehen.</p><div class="section_1"><h2 id="Vorbereitung">Vorbereitung<a class="headerlink" href="#Vorbereitung">¶</a></h2><p>
Folgende Pakete müssen installiert <sup><a href="#source-1">[1]</a></sup> werden:</p><ul><li><p><strong>xsane</strong> (<em>universe</em>)</p></li><li><p><strong>imagemagick</strong></p></li><li><p><strong>tesseract-ocr</strong> (<em>universe</em>, sowie die gewünschten Sprachpakete)</p></li><li><p><strong>pdftk</strong></p></li><li><p><strong>exactimage</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install xsane imagemagick tesseract-ocr pdftk exactimage </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install xsane imagemagick tesseract-ocr pdftk exactimage </pre></div></div><p>
</p></div></div><p>Das Skript selbst in einen Editor <sup><a href="#source-2">[2]</a></sup> kopieren, als <strong>xsane2sandwich.sh</strong> abspeichern und ausführbar<sup><a href="#source-3">[3]</a></sup> machen.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#    xsane2sandwich - pdf with ocr directly from xsane</span>
<span class="c1">#    Copyright (C) 2012, 2013 Heinrich Schwietering</span>
<span class="c1"># </span>
<span class="c1">#    This program is free software: you can redistribute it and/or modify</span>
<span class="c1">#    it under the terms of the GNU General Public License as published by</span>
<span class="c1">#    the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1">#    (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1">#    This program is distributed in the hope that it will be useful,</span>
<span class="c1">#    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1">#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1">#    GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1">#    You should have received a copy of the GNU General Public License</span>
<span class="c1">#    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c1">#</span>
<span class="c1">##############################################################################</span>
<span class="c1">#</span>
<span class="c1">#                           xsane2sandwich 0.2</span>
<span class="c1">#</span>
<span class="c1">#                *** pdf with searchable text layer ***</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">##############################################################################</span>
<span class="c1"># </span>
<span class="c1"># xsane2sandwich is a wrapper script to produce ocred pdf files with xsane.</span>
<span class="c1"># It produces pdf files with a hidden, searchable text layer. tesseract-ocr is</span>
<span class="c1"># used to produce a hOCR/html-file. convert is needed to produce a readable</span>
<span class="c1"># for hocr2pdf. </span>
<span class="c1"># The scan is converted into a pdf file using hocr2pdf, a part of exact image. </span>
<span class="c1"># Multipage pdf files are produced using pdftdk, a title value is added, too.</span>
<span class="c1"># </span>

<span class="nv">TEMP_DIR</span><span class="o">=</span>/tmp/    <span class="c1"># folder for temporary files (all files)</span>
<span class="nv">ERRORLOG</span><span class="o">=</span><span class="s2">"xsane2sandwich.log"</span>  <span class="c1"># file where STDERR goes </span>

<span class="k">if</span> <span class="o">[[</span> -z <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>  <span class="o">]]</span>
  <span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">"Usage: </span><span class="nv">$0</span><span class="s2"> [OPTIONS]</span>
<span class="s2">  You need to run the script as OCR-application for xsane!</span>
<span class="s2">  xsane2sandwich uses a .tif file created with convert, and produces </span>
<span class="s2">  a 'split' pdf file. The scan result is ocred using tesseract and processed</span>
<span class="s2">  with hocr2pdf to add a hidden text layer. Multipage pdf files are possible, </span>
<span class="s2">  using pdftdk.</span>
<span class="s2">  </span>
<span class="s2">  OPTIONS:</span>
<span class="s2">    -i &lt;filename&gt; - temporary XSANE file</span>
<span class="s2">    -o &lt;filename&gt; - name for the output</span>
<span class="s2">    -l &lt;language&gt; - defines the language used for recognition</span>
<span class="s2">    -a &lt;-hocr2pdf-option&gt; - additional hocr2pdf options, optional</span>
<span class="s2"> </span>
<span class="s2">  Progress- &amp; error-messages will be stored in this logfile:</span>
<span class="s2">     </span><span class="nv">$TEMP_DIR$ERRORLOG</span><span class="s2"></span>

<span class="s2">  xsane2sandwich depends on</span>
<span class="s2">    - XSane, http://www.xsane.org/</span>
<span class="s2">    - convert, part of ImageMagick, http://www.imagemagick.org/script/index.php</span>
<span class="s2">    - tesseract-ocr 3.0x, https://github.com/tesseract-ocr</span>
<span class="s2">    - hocr2pfd, part of ExactImage, http://www.exactcode.de/site/open_source/exactimage/</span>
<span class="s2">    - pdftk, http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/</span>

<span class="s2">  Some coding was stolen from 'ocube'</span>
<span class="s2">  http://www.geocities.com/thierryguy/ocube.html</span>

<span class="s2">  This pdfsandwich adaption is based on xsane2tess  </span>
<span class="s2">  http://doc.ubuntu-fr.org/xsane2tess, </span>

<span class="s2">  Hints always welcome! heinrich (dot) schwietering (at) gmx (dot) de</span>
<span class="s2">"</span>
  <span class="nb">exit</span>
<span class="k">fi</span>

<span class="c1"># get options...</span>
<span class="k">while</span> <span class="nb">getopts</span> <span class="s2">":i:o:l:a:"</span> OPTION
  <span class="k">do</span>
  <span class="k">case</span> <span class="nv">$OPTION</span> in 
    i<span class="o">)</span>  <span class="c1"># input filename (with path)</span>
      <span class="nv">FILE_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span>
    <span class="p">;;</span>
    o<span class="o">)</span>  <span class="c1"># output filename</span>
      <span class="nv">FILE_OUT_LONG</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span>
    <span class="p">;;</span>
    l<span class="o">)</span>  <span class="c1"># recognition language</span>
      <span class="nv">LANG</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span>
    <span class="p">;;</span>
    a<span class="o">)</span>  <span class="c1"># additional hocr2pdf option  </span>
      <span class="nv">HOCROPT</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span>
    <span class="p">;;</span>
  <span class="k">esac</span>
<span class="k">done</span>

<span class="c1"># redirects STDERR to ERRORLOG</span>
<span class="nb">exec</span> <span class="m">2</span>&gt;&gt;<span class="nv">$TEMP_DIR$ERRORLOG</span>

<span class="c1"># strips extension from FILE_OUT_LONG</span>
<span class="nv">FILE_OUT</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">FILE_OUT_LONG</span><span class="p">%.*</span><span class="si">}</span><span class="s2">"</span>

<span class="nb">echo</span> <span class="s2">"~~~+++~~~~+++~~~"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="c1">#produces a tif file for hocr2pdf</span>
<span class="nv">TIF_FILE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$TEMP_DIR</span><span class="s2">""xsane2tessResult"</span>.tif
convert <span class="s2">"</span><span class="nv">$FILE_PATH</span><span class="s2">"</span> -compress none  <span class="s2">"</span><span class="nv">$TIF_FILE</span><span class="s2">"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>

<span class="c1">#create pdfmark</span>
<span class="nb">echo</span> <span class="s2">"InfoKey: Title"</span> &gt; <span class="nv">$FILE_OUT</span>.pdfmark
<span class="nb">echo</span> <span class="s2">"InfoValue:`basename </span><span class="nv">$FILE_OUT</span><span class="s2">`"</span> &gt;&gt; <span class="nv">$FILE_OUT</span>.pdfmark
<span class="nb">echo</span> <span class="s2">"InfoKey: Producer"</span> &gt;&gt; <span class="nv">$FILE_OUT</span>.pdfmark
<span class="nb">echo</span> <span class="s2">"InfoValue: xsane2sandwich"</span> &gt;&gt; <span class="nv">$FILE_OUT</span>.pdfmark

<span class="c1"># produce hocr-file file with tesseract</span>
tesseract <span class="s2">"</span><span class="nv">$FILE_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">"</span> -l <span class="s2">"</span><span class="nv">$LANG</span><span class="s2">"</span> <span class="s2">"hocr"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="nb">echo</span> <span class="s2">"tesseract -l </span><span class="nv">$LANG</span><span class="s2"> </span><span class="nv">$ENCOPT</span><span class="s2"> hocr used"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>


<span class="c1"># combine hocr-result with image and produce a pdf file</span>
hocr2pdf <span class="nv">$HOCROPT</span> -i <span class="s2">"</span><span class="nv">$TIF_FILE</span><span class="s2">"</span> -o <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.new.pdf"</span> &lt; <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.html"</span>

<span class="c1"># check if outputfile exists</span>
<span class="k">if</span> <span class="o">[[</span> -a <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.pdf"</span> <span class="o">]]</span>

     <span class="c1">#add new page to existing file using pdftk</span>
     <span class="k">then</span> pdftk <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.pdf"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.new.pdf"</span> cat output <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.2.pdf"</span>
     mv <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.2.pdf"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.pdf"</span>
     <span class="nb">echo</span> <span class="s2">"file added to </span><span class="nv">$FILE_OUT</span><span class="s2">.pdf"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
     rm <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.new.pdf"</span>

     <span class="c1">#if not start new output file</span>
     <span class="k">else</span> mv <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.new.pdf"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.pdf"</span>
     <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.pdf started"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>

<span class="k">fi</span>

<span class="c1"># set pdf title</span>
     pdftk <span class="nv">$FILE_OUT</span>.pdf update_info <span class="nv">$FILE_OUT</span>.pdfmark output <span class="nv">$FILE_OUT</span>-neu.pdf <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
     mv <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-neu.pdf"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.pdf"</span>

<span class="c1"># Remove temporary files</span>
rm <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.txt"</span>
rm <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.html"</span>
rm <span class="s2">"</span><span class="nv">$TIF_FILE</span><span class="s2">"</span>
rm <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.pdfmark"</span>
<span class="nb">echo</span> <span class="s2">"~~~+++~~~~+++~~~"</span><span class="k">$(</span>date +%c<span class="k">)</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
</pre></div>
</td></tr></table></div><p>Das Skript ist eine Weiterentwicklung des <a class="internal" href="./tesseract-ocr.html#xsane2tess">xsane2tess</a>-Skriptes, das auf <a class="external" href="http://doc.ubuntu-fr.org/xsane2tess" rel="nofollow">ubuntu-fr.org</a> <img alt="{fr}" src="./_/a4d7caed6af30e5c7549b4de45c71ed5f7036425.png"/> veröffentlicht worden ist. 
Man kopiert es am besten mit Root-Rechten<sup><a href="#source-4">[4]</a></sup> nach <strong>/usr/local/bin</strong>, so lässt sich das Skript von allen Benutzern verwenden.</p><div class="section_2"><h3 id="Nutzung-ab-Trusty">Nutzung ab Trusty<a class="headerlink" href="#Nutzung-ab-Trusty">¶</a></h3><p>
Die von der unter Trusty Ubuntu 14.04 eingesetzte Tesseract-Version 3.03 speichert die hocr-Dateien mit den Textlageinformationen nicht mehr mit der <strong>.html</strong>-Endung sondern mit einer <strong>.hocr</strong>-Endung ab. Daher muss im Skript in einem Editor nach Zeile 112</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nb">echo</span> <span class="s2">"tesseract -l </span><span class="nv">$LANG</span><span class="s2"> </span><span class="nv">$ENCOPT</span><span class="s2"> hocr used"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
</pre></div>
</td></tr></table></div><p>etwas wie</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>cp <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.hocr"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.html"</span>
</pre></div>
</td></tr></table></div><p>eingefügt werden, damit hocr2pdf die Daten wieder richtig zusammensetzen kann. Leider kommt es allerdings vermehrt zu Problemen mit überdimensionierten Schriften und damit verbunden schlechter Passung der Textlage, schlimmstenfalls können sogar ganze Textlagenteile so groß sein, dass sie nicht mehr komplett eingebunden werden können. Daher unter <a class="crosslink" href="#xsane2OCRmyPDF">xsane2OCRmyPDF</a> eine Version, die <a class="internal" href="./ocrmypdf.html">OCRmyPDF</a> für die Texterstellung verwendet.</p></div></div><div class="section_1"><h2 id="Konfiguration">Konfiguration<a class="headerlink" href="#Konfiguration">¶</a></h2><p>
Das Temporärverzeichnis in <strong>xsane2sandwich.sh</strong> (Zeile 35) kann entsprechend der eigenen Wünsche angepasst werden (auf schließendes <strong>/</strong> achten!), dort wird auch die <strong>xsane2sandwich.log</strong>-Datei abgelegt. In der Log-Datei kann man ggf. Fehlermeldungen einsehen, falls das Skript nicht wie erwartet funktionieren sollte.</p></div><div class="section_1"><h2 id="Funktionsweise">Funktionsweise<a class="headerlink" href="#Funktionsweise">¶</a></h2><p>
Die mit XSane eingescannten Vorlagen werden einer Texterkennung mit tesseract-ocr unterzogen. Mit Verwendung des  Konfigurationsskriptes <strong>hocr</strong> entsteht eine <strong>html</strong>-Datei, in der neben dem Text auch die Position der Wörter recht exakt gespeichert wird. Mit hocr2pdf wird eine Bildversion mit der hocr/html-Lage in einer PDF-Datei zusammengefasst, in entsprechenden Betrachtern (<a class="internal" href="./evince.html">Evince</a> etc.) kann der Text durchsucht werden, und die Text-Fundstellen werden in der "Bildlage" angezeigt. Sollen mehrseitige PDF-Dateien erstellt werden, wird für die OCR-Erkennung derselbe Dateiname angegeben. Das Skript überprüft, ob bereits eine PDF-Datei mit dem Namen im angegebenen Verzeichnis vorhanden ist, und hängt, falls sie gefunden wird, eine weitere Seite an (dafür wird eine pdftk-Funktion verwendet). So lassen sich auch zu einem späteren Zeitpunkt die PDF-Dateien erweitern. Mit pdftk wird außerdem ein Titel (der Name der PDF-Datei ohne Erweiterung) in das Dokument eingetragen, sodass bei einem Indizieren (z.B. via <a class="internal" href="./tracker.html">Tracker</a>) der Titel korrekt ausgegeben werden kann (Dank für die Anregung dazu an <a class="crosslink user" href="https://ubuntuusers.de/user/matzeSG/">matzeSG</a>).</p></div><div class="section_1"><h2 id="Benutzung">Benutzung<a class="headerlink" href="#Benutzung">¶</a></h2><p>
In <em>"XSane -&gt; Einstellung -&gt; Konfiguration -&gt; Texterkennung"</em> wird als OCR-Befehl <em>"/PFAD/ZU/xsane2sandwich.sh"</em> sowie weitere Optionen zur Steuerung angegeben. Als weitere Optionen werden <em>"-i"</em>, für die Ausgabedatei <em>"-o"</em> angeben, die weiteren Felder bleiben leer. Die Option <em>"Benutze GUI Fortschritts Pipe"</em> darf nicht angehakt sein (nicht nur wegen der orthographischen Mängel...), da sonst das Wrapper-Skript nicht geschlossen werden kann. Mit <code class="notranslate">-a</code> können zusätzliche Optionen für hocr2pdf angegeben werden.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die XSane-Funktion <em>"Mehrseitig"</em> kann für diese Art der PDF-Erstellung nicht genutzt werden, auch nicht das Ausgabeformat "PDF"! Deartig erstellte Dokumente können nur nachträglich mit Programmen wie <a class="internal" href="./ocrmypdf.html">OCRmyPDF</a>, <a class="internal" href="./pdfsandwich.html">pdfsandwich</a> oder <a class="internal" href="./pdfocr.html">pdfocr</a> mit einer Textlage versehen werden! Ein Anhängen weiterer Scans an bestehende PDF-Dateien ist mit xsane2sandwich hingegen möglich.
</p></div></div><p>Für Scanner mit automatischem Vorlageneinzug (ADF) in <em>"Einstellungen -&gt; Konfiguration -&gt; Speichern -&gt; Dateinamenzähler Länge"</em> den Eintrag <em>"nicht aktiv"</em> wählen, und den Dateizählerwert, wenn die Einstellungsmöglichkeit vorhanden ist, auf <code class="notranslate">0</code> setzen, da XSane ansonsten automatisch für jeden neuen Scan einen erhöhten Zähler an die Datei anhängt; damit kann das Skript aber keine mehrseitige Datei erstellen!</p><div class="section_2"><h3 id="Beispiel">Beispiel<a class="headerlink" href="#Beispiel">¶</a></h3><p>
</p><pre class="notranslate">/PFAD/ZU/xsane2sandwich.sh -l deu -a "-s"</pre><p>verwendet Tesseract mit deutscher Sprache, als zusätzliche Angabe die <a class="internal" href="./exactimage.html#hocr2pdf">hocr2pdf-Option</a> <code class="notranslate">-s</code> ("sloppy text"), die für Texte mit unterschiedlichen Laufweiten bessere Ergebnisse liefern kann. Die zusätzlichen Optionen, insbesondere wenn mehrere verwendet werden sollen, müssen in Anführungsstrichen stehen!</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Die Angaben müssen sehr exakt erfolgen, es dürfen zwischen den Optionen <span class="underline">nur einfache</span> Leerzeichen verwendet werden, sonst kommt es zu Fehlern! 
</p></div></div><p>Die Vorlage wird in XSane im <a class="internal" href="./xsane.html#Betrachter">Betrachter-Modus</a> erstellt. Im Betrachter dann die Texterkennung (<img alt="xsane/xsane-ocr.jpg" class="image-default" src="./_/4e3625efd312583aec31a27d72d118b883c2ed49.png"/>-Taste) wählen, die Ausgabe mit der Erweiterung <strong>.txt</strong> wählen (<span class="underline">nicht</span> PDF!), es wird intern ein PDF-Datei daraus erstellt. Alternativ kann auch das Ausgabeformat <em>"TEXT"</em> gewählt werden, und als Modus <em>"Speichern"</em>, wenn keine weiteren Einstellungen nötig sind. Dann wird der Scan direkt umgewandelt, ohne den Betrachter zu öffnen. Als Auflösung werden 300 dpi empfohlen, die besten Ergebnisse erzielt man meist mit der Einstellung <em>"Strichzeichnung"</em> (für sehr kleine Schriften, bei Waschzettel etc. ggf. höhere Auflösungen verwenden). Bei vorhandenem Dateinamen wird automatisch eine weitere Seite an die bestehende PDF-Datei im angegebenen Verzeichnis (Schreibrechte nötig!) angehängt.</p><p>Die Qualität der Texterkennung ist natürlich von der Qualität und dem Aufbau der Vorlage abhängig; je "verschachtelter" Text und Grafikelemente sind, desto schwieriger wird die exakte Zerlegung, und damit die Texterkennung. Für einfache Texte/Briefe etc. sollte es keine Probleme geben; bei sehr großen Unterschieden in den Zeichengrößen kann es allerdings zu Fehldarstellungen kommen.</p></div></div><div class="section_1"><h2 id="xsane2OCRmyPDF">xsane2OCRmyPDF<a class="headerlink" href="#xsane2OCRmyPDF">¶</a></h2><p>
Da die Passung der Textlagen mit von Tesseract 3.03 ausgegebenen hOCR-Dateien und daraus mit <code class="notranslate">hocr2pdf</code> erstellten PDF-Dateien stark zu wünschen übriglässt, hier eine Skript-Version, die für die Texterkennung <a class="internal" href="./ocrmypdf.html">OCRmyPDF</a> verwendet. Die Funkionsweise ist nahezu identisch mit der oben beschriebenen Version; die Option <code class="notranslate">-a</code> bezieht sich auf zusätzlich verwendbare OCRmyPDF-Optionen.</p><p>Um möglichst kleine PDF-Dateigrößen zu erzielen, verwendet die Version 0.3 <code class="notranslate">tiff2pdf</code> (aus dem Paket <strong>libtiff-tools</strong>) um mit <code class="notranslate">convert</code> erstellte <strong>tif</strong>-Dateien in ein PDF umzuwandeln.</p><ul><li><p><strong>libtiff-tools</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install libtiff-tools </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install libtiff-tools </pre></div></div><p>
</p></div></div><p>Gegenüber der bisherigen Erstellung der PDF-Rohdateien mit <code class="notranslate">convert</code> ergeben sich erhebliche Reduzierungen auf bis zu 1/8 der PDF-Größe (Dank für den <a class="crosslink post" href="https://forum.ubuntuusers.de/post/7172903/">Hinweis</a> an <a class="crosslink user" href="https://ubuntuusers.de/user/TausB/">TausB</a>).</p><p>Das Skript benötigt zudem <a class="internal" href="./yad.html">yad</a>, um abzufragen, ob weitere Scans angehängt werden sollen; die Texterkennung erfolgt erst, wenn alle Vorlagen eingescannt sind. Um an ein bereits mit Textlayer versehenes PDF weitere Seiten anzuhängen, muss für die OCRmyPDF-Optionen in -a <code class="notranslate">-f</code> (erzwingt Texterkennung) verwendet werden, ansonsten verweigert OCRmyPDF die Bearbeitung des PDFs. Eine Korrektur der Textlage ist für diese Version allerdings derzeit nicht möglich. Die Logdatei wird unter <strong>xsane2OCRmyPDF.log</strong> in <strong>/tmp</strong> abgelegt, bei der Angabe des Dateinnamens in XSane ist eine Endungsangabe nicht nötig.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#    xsane2OCRmyPDF - pdf with ocr directly from xsane</span>
<span class="c1">#    Copyright (C) 2014 Heinrich Schwietering</span>
<span class="c1"># </span>
<span class="c1">#    This program is free software: you can redistribute it and/or modify</span>
<span class="c1">#    it under the terms of the GNU General Public License as published by</span>
<span class="c1">#    the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1">#    (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1">#    This program is distributed in the hope that it will be useful,</span>
<span class="c1">#    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1">#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1">#    GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1">#    You should have received a copy of the GNU General Public License</span>
<span class="c1">#    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c1">#</span>
<span class="c1">##############################################################################</span>
<span class="c1">#</span>
<span class="c1">#                           xsane2OCRmyPDF 0.3.1</span>
<span class="c1">#</span>
<span class="c1">#                *** pdf with searchable text layer ***</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">##############################################################################</span>
<span class="c1"># </span>
<span class="c1"># xsane2OCRmyPDF is a wrapper script to produce ocred pdf files with xsane.</span>
<span class="c1"># It produces pdf files with a hidden, searchable text layer. tiff2pdf </span>
<span class="c1"># (libtiff) is used to produce an initial pdf file from a tif file, multipage </span>
<span class="c1"># pdf files are combined using pdftdk.</span>
<span class="c1"># OCRmyPDF, utilizing tesseract-ocr, is used to  produce a pdf file with a </span>
<span class="c1"># text layer.</span>
<span class="c1"># </span>

<span class="nv">TEMP_DIR</span><span class="o">=</span>/tmp/    <span class="c1"># folder for temporary files (all files)</span>
<span class="nv">ERRORLOG</span><span class="o">=</span><span class="s2">"xsane2OCRmyPDF.log"</span>  <span class="c1"># file where STDERR goes </span>

<span class="k">if</span> <span class="o">[[</span> -z <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>  <span class="o">]]</span>
  <span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">"Usage: </span><span class="nv">$0</span><span class="s2"> [OPTIONS]</span>
<span class="s2">  You need to run the script as OCR-application for xsane!</span>
<span class="s2">  xsane2OCRmyPDF uses a pdf file created with convert and tiff2pdf. The result is</span>
<span class="s2">  processed with OCRmyPDF to add a hidden text layer. Multipage pdf files are possible, </span>
<span class="s2">  using pdftdk.</span>
<span class="s2">  </span>
<span class="s2">  OPTIONS:</span>
<span class="s2">    -i &lt;filename&gt; - temporary XSANE file</span>
<span class="s2">    -o &lt;filename&gt; - name for the output</span>
<span class="s2">    -l &lt;language&gt; - defines the language used for recognition</span>
<span class="s2">    -a &lt;options&gt; - additional OCRmyPDF option e.g. to use convert or unpaper, optional</span>
<span class="s2"> </span>
<span class="s2">  Progress- &amp; error-messages will be stored in this logfile:</span>
<span class="s2">     </span><span class="nv">$TEMP_DIR$ERRORLOG</span><span class="s2"></span>

<span class="s2">  xsane2OCRmyPDF depends on</span>
<span class="s2">    - XSane, http://www.xsane.org/</span>
<span class="s2">    - convert, part of ImageMagick, http://www.imagemagick.org/script/index.php</span>
<span class="s2">    - tiff2pdf, part of libtiff, http://www.remotesensing.org/libtiff/</span>
<span class="s2">    - OCRmyPDF, https://https://github.com/jbarlow83/OCRmyPDF</span>
<span class="s2">    - unpaper, https://www.flameeyes.eu/projects/unpaper</span>
<span class="s2">    - tesseract-ocr 3.0x, https://github.com/tesseract-ocr</span>
<span class="s2">    - pdftk, http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/</span>
<span class="s2">    - yad, http://sourceforge.net/projects/yad-dialog/</span>

<span class="s2">  Some coding was stolen from 'ocube'</span>
<span class="s2">  http://www.geocities.com/thierryguy/ocube.html</span>

<span class="s2">  This OCRmyPDF adaption is based on xsane2tess  </span>
<span class="s2">  http://doc.ubuntu-fr.org/xsane2tess, </span>

<span class="s2">  Hints always welcome! heinrich (dot) schwietering (at) gmx (dot) de</span>
<span class="s2">"</span>
  <span class="nb">exit</span>
<span class="k">fi</span>

<span class="c1"># get options...</span>
<span class="k">while</span> <span class="nb">getopts</span> <span class="s2">":i:o:l:a:"</span> OPTION
  <span class="k">do</span>
  <span class="k">case</span> <span class="nv">$OPTION</span> in 
    i<span class="o">)</span>  <span class="c1"># input filename (with path)</span>
      <span class="nv">FILE_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span>
    <span class="p">;;</span>
    o<span class="o">)</span>  <span class="c1"># output filename</span>
      <span class="nv">FILE_OUT_LONG</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span>
    <span class="p">;;</span>
    l<span class="o">)</span>  <span class="c1"># recognition language</span>
      <span class="nv">LAN</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span>
    <span class="p">;;</span>
    a<span class="o">)</span>  <span class="c1"># additional OCRmyPDF option  </span>
      <span class="nv">OCROPT</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span>
    <span class="p">;;</span>
  <span class="k">esac</span>
<span class="k">done</span>

<span class="c1"># redirects STDERR to ERRORLOG</span>
<span class="nb">exec</span> <span class="m">2</span>&gt;&gt;<span class="nv">$TEMP_DIR$ERRORLOG</span>

<span class="c1"># strips extension from FILE_OUT_LONG</span>
<span class="nv">FILE_OUT</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">FILE_OUT_LONG</span><span class="p">%.*</span><span class="si">}</span><span class="s2">"</span>

<span class="nb">echo</span> <span class="s2">"~~~+++~~~~+++~~~"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>

<span class="c1">#produces a pdf file for OCRmyPDF</span>
convert <span class="s2">"</span><span class="nv">$FILE_PATH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.1.tif"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
tiff2pdf -o <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.1.pdf"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.1.tif"</span>  <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="c1"># check if output file exists</span>
    <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> -a <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.pdf"</span> <span class="o">]]</span>

     <span class="c1">#add new page to existing file using pdftk</span>
     <span class="k">then</span> pdftk <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.pdf"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.1.pdf"</span> cat output <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.2.pdf"</span>
     mv <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.2.pdf"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.pdf"</span>
     <span class="nb">echo</span> <span class="s2">"file added to </span><span class="nv">$FILE_OUT</span><span class="s2">.pdf"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>

     <span class="c1">#if not start new output file</span>
     <span class="k">else</span> cp <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.1.pdf"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.pdf"</span>
     <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.pdf started"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
     <span class="k">fi</span> <span class="o">}</span>

<span class="c1"># Asks for further scans to be added</span>
<span class="k">$(</span>yad --geometry -0-0 --title<span class="o">=</span><span class="s2">"xsane2OCRmyPDF"</span> --button<span class="o">=</span>Ja:2 --button<span class="o">=</span>Nein:4 --text<span class="o">=</span><span class="s2">"Sollen weitere Seiten gescannt werden?"</span><span class="k">)</span>
<span class="nv">ret</span><span class="o">=</span><span class="nv">$?</span>
<span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">4</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
<span class="c1"># produce a pdf file with OCRmyPDF</span>
     ocrmypdf -l <span class="nv">$LAN</span> <span class="nv">$OCROPT</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.pdf"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.new.pdf"</span>
     mv <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.new.pdf"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.pdf"</span>
     <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.pdf ocred using OCRmyPDF"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="k">fi</span> <span class="o">}</span>


<span class="c1"># Remove temporary files</span>
rm <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.1.pdf"</span>
rm <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.1.tif"</span>
rm <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"~~~+++~~~~+++~~~"</span><span class="k">$(</span>date +%c<span class="k">)</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
</pre></div>
</td></tr></table></div><p>Die Metadaten können automatisiert mit <a class="internal" href="./exiftool.html">ExifTool</a> bearbeitet werden. Um z.B. den in XSane verwendeten Dateinamen, und den jeweiligen Benutzer als Autor des PDF-Dokumentes einzutragen, kann das Skript um folgenden Eintrag (vor den "Aufräumanweisungen" am Ende) ergänzt werden:</p><pre class="notranslate"># write metadata
exiftool -Title="${FILE_OUT##*/}" -Author="$USER" -Subject="${FILE_OUT##*/}" -Producer="xsane2OCRmyPDF" -m -overwrite_original "$FILE_OUT.pdf" </pre><p>Weiter Angaben sind natürlich möglich, siehe die <a class="internal" href="./man.html">manpage</a> zu <code class="notranslate">exiftool</code>.</p><p>OCRmyPDF bietet - zumindest ab Version 4.2  - auch die Möglichkeit, die Metadaten als Optionen mit anzugeben (siehe in der Hilfe-Funktion des Programms), diese müssten dann in der XSane-Konfigurationszeile mit aufgenommen werden.</p></div><div class="section_1"><h2 id="Alternativen">Alternativen<a class="headerlink" href="#Alternativen">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="./gscan2pdf.html">gscan2pdf</a> liefert momentan mit dem OCR-Engine <a class="internal" href="./tesseract-ocr.html">tesseract-ocr</a> gute Ergebnisse für "Sandwich-PDFs", da damit auch eine akzeptable Layout-Erkennung für die Passung der Lagen möglich ist.</p></li><li><p><a class="internal" href="./ocrmypdf.html">OCRmyPDF</a> ist ein Kommandozeilenprogramm, das momentan mit <a class="internal" href="./tesseract-ocr.html">tesseract-ocr</a> die besten Ergebnisse für die Textebenenerkennung und Passung für grafische PDF-Dateien liefert.</p></li><li><p><a class="internal" href="./pdfsandwich.html">pdfsandwich</a> beschreitet einen ganz ähnlichen Weg; es lassen sich allerdings keine PDF-Dateien erstellen, sondern nur bestehende um die Text-Lage erweitern. Ursprünglich für <a class="internal" href="./cuneiform-linux.html">cuneiform</a> konzipiert (und damit nur bis Version 0.8.0 sinnvoll verwendbar), existiert inzwischen auch eine Version für tesseract-ocr 3.03. die die interne PDF-Erstellung von tesseract verwendet.</p></li><li><p><a class="internal" href="./pdfocr.html">pdfocr</a> funktioniert nach ganz ähnlichem Prinzip wie pdfsandwich, hat aber mit Cuneiform &gt; 0.9.0 dieselben Probleme.</p></li><li><p>In diesem <a class="external" href="http://blog.konradvoelkel.de/2010/01/linux-ocr-and-pdf-problem-solved/" rel="nofollow">Blogeintrag</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> von Konrad Voelkel wird eine ähnliche Vorgehensweise beschrieben.</p></li><li><p>Weiterer Beitrag von Konrad Voelkel, der die Erstellung von <a class="external" href="http://www.konradvoelkel.com/2013/03/scan-to-pdfa/" rel="nofollow">PDF/a-Dateien</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> behandelt.</p></li><li><p><a class="internal" href="./ocrodjvu.html">ocrodjvu</a> ist ein neu entwickeltes Programm, um Texterkennung für <a class="internal" href="./djvu.html">DjVu</a>-Dateien durchzuführen. Eine Konvertierung von PDF-Dateien kann mittels <a class="internal" href="./pdf2djvu.html">pdf2djvu</a> erfolgen, mit <a class="internal" href="./xsane2djvu.html">xsane2djvu</a> auch eine direkte Erstellung. Die Texterkennung arbeitet generell zuverlässiger und die Dateien sind bei gleicher Qualität wesentlich kleiner als im PDF (Portable Document Format).</p></li></ul><p>
</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="./pdf.html">PDF</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> - Übersichtsartikel</p></li><li><p><a class="internal" href="./texterkennung.html">Texterkennung</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> - Übersichtsartikel</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./xsane2sandwich/a/revision/938467.html">Diese Revision</a> wurde am 29. April 2017 18:41 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./xsane2sandwich.html">xsane2sandwich</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>