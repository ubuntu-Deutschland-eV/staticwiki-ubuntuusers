<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>UniFi_Controller › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./unifi_controller.html">UniFi Controller</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/UniFi_Controller">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./unifi_controller/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./unifi_controller/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./unifi_controller/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./unifi_controller/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./unifi_controller/a/backlinks.html">UniFi Controller</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./dienste.html">Umgang mit Diensten</a></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="./sudo.html">Root-Rechte</a></p></li></ol></div></div><p><img alt="Ubiquiti_Logo.png" class="image-left" src="./_/a81fba43ae8423a3fee02ad34a686f5eab6e9f24.png"/></p><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Inbetriebnahme">Inbetriebnahme
</a></li><li><a class="crosslink" href="#Problembehebung">Problembehebung
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>Unter dem Label UniFi vertreibt die Firma <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Ubiquiti_Networks">Ubiquiti_Networks</a> eine Reihe aktiver Netzwerkkomponenten, die über eine einfache Weboberfläche – den UniFi Controller – eingerichtet und gesteuert werden können. Dieser Controller basiert auf dem UniFi-Server, der mit dem Controller zusammen installiert wird und als Hintergrunddienst läuft. Diese Seite beschreibt die Inbetriebnahme dieses UniFi Controllers unter Ubuntu.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Der UniFi Controller steht in den offiziellen Quellen nicht zur Verfügung. Er kann entweder als deb-Paket direkt von der Ubiquiti-Seite heruntergeladen werden, oder man nutzt eine Fremdquelle, die Ubiquity zur Verfügung stellt. Wenn man den UniFi Controller regelmäßig benötigt, um ein Netzwerk zu überwachen, ist die Nutzung der Fremdquelle der bessere Weg, da man dann automatisch mit Updates versorgt wird. Wenn man den Controller nur benötigt, um Netzwerkkomponenten einmalig einzurichten, genügt das deb-Paket.</p><div class="section_2"><h3 id="Direkte-Installation">Direkte Installation<a class="headerlink" href="#Direkte-Installation">¶</a></h3><p>
</p><p>Von Ubiquiti Networks werden 
<a class="external" href="http://download.ubnt.com/unifi" rel="nofollow">DEB-Pakete</a> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/> angeboten. 
Die unterstützten Ubuntuversionen und Architekturen werden aufgelistet.
Nachdem man sie für die korrekte Ubuntuversion und Architektur geladen hat, müssen <a class="internal" href="./paketinstallation_deb.html">DEB-Pakete noch installiert werden</a>.
</p><div class="box warning"><h3 class="box warning">Hinweis!</h3><div class="contents"><p>
<a class="internal" href="./fremdquellen.html">Fremdpakete</a> können das System gefährden. 
</p></div></div></div><div class="section_2"><h3 id="Installation-ueber-die-Fremdquelle">Installation über die Fremdquelle<a class="headerlink" href="#Installation-ueber-die-Fremdquelle">¶</a></h3><p>
</p><p>Um aus der <a class="internal" href="./fremdquellen.html">Fremdquelle</a> zu installieren, muss man unabhängig von der Ubuntu-Version die folgende <a class="internal" href="./paketquellen_freischalten.html">Paketquelle freischalten</a>:
</p><div class="box warning"><h3 class="box warning">Hinweis!</h3><div class="contents"><p>
Zusätzliche <a class="internal" href="./fremdquellen.html">Fremdquellen</a> können das System gefährden. 
</p></div></div><p>
</p><pre class="notranslate">deb http://www.ubnt.com/downloads/unifi/debian unifi5 ubiquiti</pre><p>Um die <a class="internal" href="./fremdquellen.html">Fremdquelle</a> zu authentifizieren, kann man  den Signierungsschlüssel mit folgendem Befehl importieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com C0A52C50  </pre></div></div></div></div><div class="section_1"><h2 id="Inbetriebnahme">Inbetriebnahme<a class="headerlink" href="#Inbetriebnahme">¶</a></h2><p>
</p><div class="section_2"><h3 id="Zugewiesener-Speicherplatz">Zugewiesener Speicherplatz<a class="headerlink" href="#Zugewiesener-Speicherplatz">¶</a></h3><p>
Der Unifi Controller nutzt eine <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/MongoDB">Mongo-Datenbank</a>. Für den Controller und für die MongoDB werden dabei für Log-Dateien über 6 GB Speicherplatz reserviert. Wenn auf dem Installationsmedium nicht so viel Platz zur Verfügung steht (oder nicht so viel Platz zur Verfügung gestellt werden soll), bestehen zwei Möglichkeiten: entweder lagert man die entsprechenden Log-Dateien aus, oder man weist das System an, mit kleineren Log-Dateien zu arbeiten. Für die erste Variante muss in verlinkbarer Umgebung genügend Speicherplatz vorhanden sein; die zweite empfiehlt sich nur, wenn vom System sonst keine MongoDBs genutzt werden.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Wird keine der folgenden Massnahmen ergriffen und stehen am Installationsort keine 6GB zur Verfügung, kann der Controller nicht gestartet werden.
</p></div></div><div class="section_3"><h4 id="1-Weg-Auslagerung-der-Log-Dateien">1. Weg: Auslagerung der Log-Dateien<a class="headerlink" href="#1-Weg-Auslagerung-der-Log-Dateien">¶</a></h4><p>
Nach der Installation liegen die betroffenen Log-Dateien einerseits in <strong>/var/lib/unifi/db/journal</strong>, andererseits in <strong>/var/lib/mongodb/journal</strong>. Sollen die Log-Dateien ausgelagert werden, müssen beide Verzeichnisse an einen Speicherort verschoben werden, auf dem genügend Platz zur Verfügung steht, und dieser Speicherort ist dann zu verlinken:</p><div class="bash"><div class="contents"><pre class="notranslate"># Verschieben der Log-Dateien
sudo mv -R /var/lib/unifi/db/journal /Ort/mit/Platz/unifi_journal
sudo mv -R /var/lib/mongodb/journal /Ort/mit/Platz/mongodb_journal

# Verlinken der Log-Dateien
sudo ln -s /Ort/mit/Platz/unifi_journal /var/lib/unifi/db/journal
sudo ln -s /Ort/mit/Platz/mongodb_journal /var/lib/mongodb/journal </pre></div></div></div><div class="section_3"><h4 id="2-Weg-Reduktion-der-Log-Dateien">2. Weg: Reduktion der Log-Dateien<a class="headerlink" href="#2-Weg-Reduktion-der-Log-Dateien">¶</a></h4><p>
Damit die MongoDB nicht von selbst die Log-Dateien anzulegen versucht, ist als erstes zu unterbinden, dass MongoDB automatisch als Hintergrundsdienst läuft. Dazu muss die Datei <strong>/etc/init/mongodb.conf</strong> mit root-Rechten <sup><a href="#source-2">[2]</a></sup> geöffnet werden. Die Zeile</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>ENABLE_MONGODB="yes"
</pre></div>
</td></tr></table></div><p>ist umzustellen auf</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nv">ENABLE_MONGODB</span><span class="o">=</span><span class="s2">"no"</span>
</pre></div>
</td></tr></table></div><p>Danach muss UniFi mitgeteilt werden, dass bloß kleine (oder auch gar keine) Log-Dateien anzulegen sind. Hierfür muss die Datei <strong>/usr/lib/unifi/data/system.properties</strong> mit root-Rechten <sup><a href="#source-2">[2]</a></sup> editiert werden. Um kleine Log-Dateien von je 128 MB statt je 1 GB anzulegen, ist bei der Zeile <code class="notranslate">unifi.db.extraargs</code> das Kommentarzeichen (<code class="notranslate">#</code>) zu entfernen und die Option <code class="notranslate">--smallfiles</code> zu ergänzen:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>unifi.db.extraargs<span class="o">=</span>--smallfiles
</pre></div>
</td></tr></table></div><p>Um gar keine Log-Dateien anzulegen, ist bei der Zeile <code class="notranslate">unifi.db.nojournal=false</code> das Kommentarzeichen (<code class="notranslate">#</code>) zu entfernen und die Option auf <code class="notranslate">true</code> zu setzen:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>unifi.db.nojournal<span class="o">=</span><span class="nb">true</span>
</pre></div>
</td></tr></table></div><p>Nun muss der UniFi-Server als Dienst neu gestartet werden <sup><a href="#source-4">[4]</a></sup>, danach lässt sich der Controller normal benutzen.</p></div></div><div class="section_2"><h3 id="Bedienung">Bedienung<a class="headerlink" href="#Bedienung">¶</a></h3><p>
Der UniFi Controller wird nach der Installation automatisch als <a class="internal" href="./systemd/service_units.html">systemd Service Unit</a> gestartet. 
Der UniFi Controller ist über einen beliebigen graphischen Webbrowser unter einer der beiden folgenden Adressen anzusprechen:</p><ul><li><p><code class="notranslate">http://&lt;hostname&gt;:8080</code></p></li><li><p><code class="notranslate">https://&lt;hostname&gt;:8443</code></p></li></ul><p>
Bei einer lokalen Installation kann <code class="notranslate">&lt;hostname&gt;</code> durch <code class="notranslate">localhost</code> oder <code class="notranslate">127.0.0.1</code> ersetzt werden; ansonsten ist die Server-IP einzutragen.</p><p>Beim ersten Aufruf wird der Nutzer aufgefordert, ein Admin-Konto anzulegen, über das die Steuerung der Netzwerkkomponenten von nun an von einem beliebigen Rechner aus unternommen werden kann (sofern der Host in Reichweite ist).</p><p>Die weiteren Möglichkeiten des Controllers (Statistiken zu einzelnen Netzwerkkomponenten und zu verbundenen Clients, Hauspläne mit der Reichweite einzelner Access-Points, etc.) unterscheiden sich unter Ubuntu nicht von anderen Betriebssystemen. Die Bedienung ist selbstklärend.</p></div><div class="section_2"><h3 id="nderung-der-Standard-Ports">Änderung der Standard-Ports<a class="headerlink" href="#nderung-der-Standard-Ports">¶</a></h3><p>
Standardmäßig arbeitet UniFI mit folgenden Ports:</p><p>
</p><table><tr class="titel"><td colspan="2"> Standard-Ports von UniFi </td></tr><tr class="kopf"><td> Port </td><td> Dienst </td></tr><tr><td> 8080 </td><td> http-Schnittstelle </td></tr><tr><td> 8443 </td><td> https-Schnittstelle </td></tr><tr><td> 27117 </td><td> MongoDB-Schnittstelle </td></tr></table><p>Sämtliche Ports lassen sich in der Datei <strong>/usr/lib/unifi/data/system.properties</strong> umdefinieren, beim Bearbeiten sind Root-Rechte notwendig<sup><a href="#source-5">[5]</a></sup>. Dazu ist bei den entsprechenden Zeilen auch das Kommentarzeichen zu entfernen.</p></div><div class="section_2"><h3 id="Temporaere-Nutzung">Temporäre Nutzung<a class="headerlink" href="#Temporaere-Nutzung">¶</a></h3><p>
Standardmäßig läuft der UniFi Server als ständiger Dienst auf dem System, auf das er installiert wurde. Wird der UniFi-Controller nur benötigt, um einen einzelnen Access-Point einzurichten oder ein kleines Netzwerk, das nicht ständig überwacht werden muss, so ist es sinnvoll, den Dienst auszuschalten. Dabei ist in der Datei <strong>/etc/init.d/unifi</strong> (wie <a class="crosslink" href="#2-Weg-Reduktion-der-Log-Dateien">oben</a> analog für die MongoDB beschrieben) die Option <code class="notranslate">ENABLE_UNIFI=yes</code> auf <code class="notranslate">no</code> umzustellen. Der Dienst lässt sich dann weiterhin manuell starten <sup><a href="#source-4">[4]</a></sup>, wenn er benötigt wird.</p></div></div><div class="section_1"><h2 id="Problembehebung">Problembehebung<a class="headerlink" href="#Problembehebung">¶</a></h2><p>
In der aktuellen Version 5.2.9 funktioniert die Passwort-Zurücksetzung noch nicht. Wer daher sein Admin-Passwort verlegt hat, muss entweder den Controller neu installieren, oder folgendes Brecheisen verwenden:</p><p>Zuerst ist sicherzustellen, dass die MongoDB läuft:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service mongodb restart </pre></div></div><p>Dann ist über folgenden Befehl herauszufinden, unter welchem Benutzernamen man sein Konto hinterlegt hat:</p><div class="bash"><div class="contents"><pre class="notranslate">mongo --port 27117 ace --eval "db.admin.find().forEach(printjson);" </pre></div></div><p>Das führt zu folgender Ausgabe (wobei die Option <code class="notranslate">name</code> den gesuchten Benutzernamen ausgibt):</p><div class="bash"><div class="contents"><pre class="notranslate">MongoDB shell version: 2.6.10
connecting to: 127.0.0.1:27117/ace
{
	"_id" : ObjectId("0123456789abcdef01234567"),
	"name" : "NAME",
	"email" : "EMAIL",
	"x_shadow" : "IRGENDEIN-UNLESERLICHER-HASH",
	"time_created" : NumberLong(0123456789),
	"last_site_name" : "default",
} </pre></div></div><p>Nun ist ein neues Passwort zu erstellen (der Befehl <strong>mkpasswd</strong> findet sich im Paket <strong>whois</strong> <sup><a href="#source-1">[1]</a></sup> ):</p><div class="bash"><div class="contents"><pre class="notranslate">mkpasswd -m sha-512 </pre></div></div><p>Der Passwort-Hash, den man erhält, ist nun über folgenden Befehl in die MongoDB einzutragen (sowohl <code class="notranslate">"NAME"</code> als auch <code class="notranslate">"PASSWORT-HASH"</code> sind durch die eigenen Angaben zu ersetzen):</p><div class="bash"><div class="contents"><pre class="notranslate">mongo --port 27117 ace --eval 'db.admin.update( { "name" : "NAME" }, { $set : { "x_shadow" : "PASSWORT-HASH" } } )' </pre></div></div><p>Danach kann man sich unter dem Benutzernamen mit dem neu erstellten Passwort normal anmelden.</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="https://www.ubnt.com" rel="nofollow" title="https://www.ubnt.com">https://www.ubnt.com</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./unifi_controller/a/revision/944214.html">Diese Revision</a> wurde am 14. Oktober 2017 22:07 von <a href="https://ubuntuusers.de/user/noisefloor/">noisefloor</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./unifi_controller.html">UniFi Controller</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>