<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>partimage › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./partimage.html">partimage</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/partimage">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./partimage/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./partimage/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./partimage/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./partimage/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./partimage/a/backlinks.html">partimage</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./rechte.html">Rechte für Dateien und Ordner ändern</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Grundsaetzliches">Grundsätzliches
</a></li><li><a class="crosslink" href="#Verwendung">Verwendung
</a></li><li><a class="crosslink" href="#Sonderfaelle">Sonderfälle
</a></li><li><a class="crosslink" href="#Alternativen">Alternativen
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/terminal.png" class="image-left" src="./_/e81889fd6e485dd32e1cde611eabc18abced7993.png"/>
<a class="external" href="http://www.partimage.org/" rel="nofollow">Partimage</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ist ein Kommandozeilenprogramm, mit dem sich ganze Partitionen sichern lassen. Es werden nur benutzte Sektoren der Partition gesichert und die Daten können komprimiert werden. Die entstehenden Image-Dateien benötigen daher weniger Speicherplatz als die zu sichernde Partition selbst. Partimage eignet sich gut, um den Zustand des Systems zu einem bestimmten Zeitpunkt zu sichern und später wiederherstellen zu können. Auch Windows-Partitionen können (z.B. vor der Installation von Ubuntu) gesichert werden.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Die Dateisysteme <code class="notranslate">ext4</code> und <code class="notranslate">btrfs</code> werden nicht unterstützt! Siehe dazu auch den Abschnitt <a class="crosslink" href="#Alternativen">Alternativen</a> am Ende des Artikels.
</p></div></div><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Das folgende Paket ist zu installieren <sup><a href="#source-1">[1]</a></sup>:</p><ul><li><p><strong>partimage</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install partimage </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install partimage </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="Grundsaetzliches">Grundsätzliches<a class="headerlink" href="#Grundsaetzliches">¶</a></h2><p>
Es können nur Partitionen gesichert werden, die nicht gerade im schreibbaren Zustand verwendet werden. Eine Sicherung der Systempartition ist daher ohne weiteres nur von einem separaten Wartungssystem oder einer Live-CD aus möglich. Die Ubuntu <a class="internal" href="./desktop-cd.html">Desktop-CD</a> enthält Partimage nicht, es muss dort erst installiert werden. Auf der <a class="external" href="http://www.partimage.org/Download" rel="nofollow">Homepage von partimage</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ist eine eigene Live-CD erhältlich. Auch <a class="external" href="http://www.knopper.net/knoppix/" rel="nofollow">Knoppix</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> ist ein Beispiel für eine Live-CD, die von Haus aus partimage enthält.</p></div><div class="section_1"><h2 id="Verwendung">Verwendung<a class="headerlink" href="#Verwendung">¶</a></h2><p>
Partimage wird im Terminal <sup><a href="#source-2">[2]</a></sup> verwendet, der Startbefehl lautet:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo partimage </pre></div></div><p>Die Oberfläche wird per Tastatur bedient.</p><div class="section_2"><h3 id="Sicherung">Sicherung<a class="headerlink" href="#Sicherung">¶</a></h3><p>
Im ersten Schritt muss zunächst mit den Pfeiltasten die zu sichernde Partition gewählt werden. Dann geht es mit 
<span class="key">Tab ⇆</span>  weiter zur Eingabe von Ort und Name der Sicherungsdatei. Für eine externe USB-Festplatte könnte die Pfadangabe z.B. so aussehen: <strong>/mnt/sdb1/partimage.gz</strong>, wobei <strong>partimage.gz</strong> hierbei den frei wählbaren Dateinamen und die Komprimierung (gzip) angibt. Die Laufwerksbezeichnung kann aus der Auflistung der von Partimage erkannten Partitionen entnommen werden. Im Bild ist ein Beispiel für ein komprimiertes Abbild zu sehen.</p><p><img alt="./partimage-save-screen1.png" class="image-center" src="./_/a4c3c6a4308faf0c420a9f5793f8d74cdbbe5a05.png"/></p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Wenn Knoppix benutzt wird, muss die Partition, auf der das Image gespeichert werden soll, zunächst beschreibbar gemacht werden. Das geht über das Kontextmenü der Partitionsicons auf der Arbeitsfläche. 
</p></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Wenn die SystemRescueCD benutzt wird, muss die Partition, auf der das Image gespeichert werden soll, zunächst eingehängt werden. Geschieht dies nicht, betreffen die Fehlermeldungen von partimage die misslungene Erstellung des temp-Files. Die Rescue-CD warnt jedoch nach dem Booten vor dem Einhängen unter <strong>/mnt</strong> und empfiehlt, vorher <strong>/mnt/mydir</strong> anzulegen. Somit würde die Pfadangabe lauten: <strong>/mnt/mydir/sdb1/partimage.gz</strong>.
</p></div></div><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Wegen eines Softwarefehlers in Partimage können gzip-komprimierte Archive zwar die 2-Gigabyte-Grenze beim Erstellen überschreiten, allerdings muss man vor dem Zurückschreiben diese Archive mit gunzip wieder manuell entpacken. 
</p></div></div><p>Weiter mit 
<span class="key">F5</span> . Nun kann die Komprimierungsmethode und eine eventuelle Aufteilung in mehrere kleinere Dateien eingestellt werden. Zwischen den Optionen wechselt man wieder mit den Pfeiltasten, zur Auswahl einer Option dient die Leertaste.</p><p><img alt="./partimage-save-screen2.png" class="image-center" src="./_/b1b6f039aac484d241409a72366688f30d28d4cc.png"/></p><p>Weiter wieder mit 
<span class="key">F5</span> . Vor der eigentlichen Sicherung kann noch eine kurze Beschreibung eingegeben werden. Danach muss man einige Sekunden warten, je nach Größe der Partition. Vor Beginn der Sicherung wird noch eine Zusammenfassung mit Informationen über die Partition angezeigt. Die eigentliche Sicherung kann besonders bei Verwendung der stärkeren bz2-Kompression einige Zeit in Anspruch nehmen.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Wegen eines Softwarefehlers in Partimage können aus mit bzip2 komprimierten Archiven keine Master-Boot-Records (MBR) rückgesichert werden. Dies ist nur möglich, wenn das Archiv vor dem Rücksichern manuell entpackt wird. 
</p></div></div></div><div class="section_2"><h3 id="Ruecksicherung">Rücksicherung<a class="headerlink" href="#Ruecksicherung">¶</a></h3><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>partimage selbst ist nicht in der Lage Partitionen zu erstellen. Möchte man in eine neue Partition rücksichern (statt eine vorhandene zu verwenden), muss diese folglich <a class="internal" href="./partitionierung.html">vorher erstellt</a> werden.
</p></div></div><p>Zuerst muss die wiederherzustellende Partition und die Sicherungsdatei ausgewählt werden. Diese Sicherungsdatei bekam für die Aufteilung eine zusätzliche Zahlenendung (<strong>.000</strong>), die mit anzugeben ist. Außerdem muss <em>"Rücksicherung aus einer Datei"</em> gewählt werden, dies erfolgt mittels Pfeiltasten und Leertaste.</p><p><img alt="./partimage-restore-screen1.png" class="image-center" src="./_/ede1569a775d31c1cfba59e21f0ee92540a2b951.png"/></p><p>Weiter mit 
<span class="key">F5</span> . Dann wird der Beschreibungstext der Sicherung angezeigt. Bei der Rücksicherung kann der freie Platz auf der Partition mit Nullen überschrieben werden. So werden alle zuvor auf der Partition befindlichen Daten sicher gelöscht.</p><p><img alt="./partimage-restore-screen2.png" class="image-center" src="./_/2775803e1257557d06da06667a5db54b39285897.png"/></p><p>Weiter mit 
<span class="key">F5</span> . Wieder werden erst Informationen über die Partition angezeigt, wonach dann die Rücksicherung erfolgt. Zum Schluss gibt es wieder eine Erfolgsmeldung.</p><p>Sollte das Image auf eine andere, größere Partition kopiert worden sein, hat das resultierende Dateisystem nur die Größe der Ursprungspartition. Mit <code class="notranslate">resize2fs</code> können ext2- und ext3-Dateisysteme leicht auf die gesamte Partition ausgedehnt werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo resize2fs /dev/... </pre></div></div></div></div><div class="section_1"><h2 id="Sonderfaelle">Sonderfälle<a class="headerlink" href="#Sonderfaelle">¶</a></h2><p>
</p><div class="section_2"><h3 id="Sicherung-im-Netzwerk">Sicherung im Netzwerk<a class="headerlink" href="#Sicherung-im-Netzwerk">¶</a></h3><p>
Partimage stellt auch eine Serverkomponente bereit, die es ermöglicht, Partitionen über das Netzwerk zu sichern. Dies ist zum Beispiel dann sinnvoll, wenn keine weitere Partition bzw. kein externes Laufwerk zur Verfügung steht, um die Image-Dateien aufzunehmen. Auch zur Übertragung einer Image-Datei auf mehrere Rechner eignet sich die Netzwerkkomponente. Die Daten können verschlüsselt übertragen werden.</p><p>Der Server ist dabei der Computer, der die Image-Dateien aufnehmen soll. Der Client ist der Rechner mit der zu sichernden Partition.</p><div class="section_3"><h4 id="Vorbereitung-des-Servers">Vorbereitung des Servers<a class="headerlink" href="#Vorbereitung-des-Servers">¶</a></h4><p>
</p><ul><li><p>Zur Nutzung über das Netzwerk muss auf dem Server das folgende Paket installiert <sup><a href="#source-1">[1]</a></sup> werden: </p><ul><li><p><strong>partimage-server</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install partimage-server </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install partimage-server </pre></div></div><p>
</p></div></div></li></ul><p>
</p><ul><li><p>Auf dem Server muss (falls nicht schon vorhanden) ein Verzeichnis angelegt werden, in dem später die Image-Dateien landen sollen: </p><div class="bash"><div class="contents"><pre class="notranslate">mkdir /home/BENUTZERNAME/Zielordner </pre></div></div></li></ul><p>
</p><ul><li><p>In diesem Verzeichnis muss der Benutzer partimag Schreibrechte haben, was z. B. durch die folgenden zwei Befehle erreicht werden kann <sup><a href="#source-4">[4]</a></sup>: </p><div class="bash"><div class="contents"><pre class="notranslate">chgrp partimag /home/BENUTZERNAME/Zielordner
chmod g+w /home/BENUTZERNAME/Zielordner </pre></div></div><p> Die Schreibrechte für den Benutzer partimag sind notwendig, weil der Server zwar mit Root-Rechten gestartet wird, aber später mit der uid des Benutzers partimag weiterläuft. Der Benutzer partimag wird automatisch bei der Installation des Pakets partimage-server angelegt.</p></li></ul><p>
</p><ul><li><p>Außerdem muss mindestens einer der auf dem Server bereits vorhandenen Benutzer für die Benutzung des Programms partimaged (der Server-Komponente von partimage) über das Netzwerk eingerichtet werden. Dazu wird die Datei <strong>/etc/partimaged/partimagedusers</strong> mit Root-Rechten in einem Editor geöffnet <sup><a href="#source-3">[3]</a></sup> und der Name des Benutzers in eine neue Zeile eingetragen.</p></li></ul><p>
</p><ul><li><p>Außerdem muss die IP-Adresse des Servers ermittelt und ggf. notiert werden, z. B. durch den folgenden Befehl: </p><div class="bash"><div class="contents"><pre class="notranslate">ifconfig </pre></div></div></li></ul><p>
</p></div><div class="section_3"><h4 id="Server-starten">Server starten<a class="headerlink" href="#Server-starten">¶</a></h4><p>
Jetzt kann die Serverkomponente von partimage gestartet werden, und zwar mit dem Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">sudo partimaged </pre></div></div></div><div class="section_3"><h4 id="Bedienung-des-Clients">Bedienung des Clients<a class="headerlink" href="#Bedienung-des-Clients">¶</a></h4><p>
Auf dem Client muss natürlich partimage <a class="crosslink" href="#Installation">installiert</a> sein. Die Bedienung des Clients erfolgt wie oben unter <a class="crosslink" href="#Verwendung">Verwendung</a> beschrieben, nur dass die Option <em>"Verbindung zum Server"</em> mit den Pfeiltasten/der Leertaste ausgewählt wird und bei <em>"IP-Adresse"</em> die des Servers angegeben wird. Im Feld <em>"Imagedatei erstellen/benutzen"</em> wird das Verzeichnis aus der Sicht des Servers (ohne den Netzwerkpfad) und ein Dateiname angegeben, also z.B. <strong>/home/BENUTZERNAME/Zielordner/Zieldatei</strong>.</p><p>Nach dem Drücken von 
<span class="key">F5</span>  erfolgt der Login auf dem Server. Dazu müssen Benutzername und Passwort desjenigen Benutzers angegeben werden, der zuvor für die Nutzung des Servers eingerichtet wurde (=dessen Benutzername in der Datei <strong>/etc/partimaged/partimagedusers</strong> eingetragen wurde).</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Oben wurde bereits der Hinweis gegeben, dass eine eingebundene Partition nicht mit partimage gesichert werden kann. Es muss also ggf. eine <a class="internal" href="./desktop-cd.html">Desktop-CD</a> verwendet werden, falls die Root-Partition von Ubuntu gesichert werden soll oder auf dem Client (noch) kein Ubuntu installiert ist.
</p></div></div></div><div class="section_3"><h4 id="Ruecksicherung-2">Rücksicherung<a class="headerlink" href="#Ruecksicherung-2">¶</a></h4><p>
Die Rücksicherung über das Netzwerk erfolgt wie unter <a class="crosslink" href="#Rücksicherung">Rücksicherung</a> beschrieben, nur das wiederum die Netzwerkadresse eingetragen werden muss. Auf dem Rechner mit der/den Image-Dateie(n) muss dazu partimaged gestartet werden, auf dem Client partimage, ggf. von einer Desktop-CD, wenn außer dem wiederherzustellenden Betriebssystem keines vorhanden ist.</p></div></div><div class="section_2"><h3 id="Rootpartition-sichern">Rootpartition sichern<a class="headerlink" href="#Rootpartition-sichern">¶</a></h3><p>
Vorgehensweise, um die Rootpartition mit Hilfe der <a class="internal" href="./desktop-cd.html">Desktop-CD</a> zu sichern.</p><div class="section_3"><h4 id="Voraussetzung">Voraussetzung<a class="headerlink" href="#Voraussetzung">¶</a></h4><p>
Es wird eine zweite Partition außerhalb der Rootpartition benötigt, die genug Platz hat, um das Image der Rootpartition aufzunehmen.</p><p>Beispiel: die Rootpartition ist 25 GB groß, benutzt werden hiervon ca. 13 GB. Bei der einzigen hier möglichen Kompression (.gz) würde das Image ca. 6,7 GB groß werden.</p><p>Der Computer wird von der Desktop-CD gestartet.</p></div><div class="section_3"><h4 id="Installation-2">Installation<a class="headerlink" href="#Installation-2">¶</a></h4><p>
Das folgende Paket ist zu installieren <sup><a href="#source-1">[1]</a></sup>:</p><ul><li><p><strong>partimage</strong>, <em>universe</em></p></li></ul><p>
Als nächstes wird die Partition, auf die das Image gespeichert werden soll, angebunden. In diesem Beispiel wird die Partition <strong>/dev/sda2</strong> nach <strong>/mnt</strong> angebunden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount /dev/sda2 /mnt </pre></div></div></div><div class="section_3"><h4 id="Sicherung-2">Sicherung<a class="headerlink" href="#Sicherung-2">¶</a></h4><p>
Partimage wird gestartet:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo partimage </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Als Komprimierungsmethode empfiehlt sich nur <a class="internal" href="./gzip.html">gzip</a>. Bei der Komprimierung mit <a class="internal" href="./bzip2.html">bzip2</a> kann sonst beim Rücksichern des Images der MBR nicht zurückgesichert werden (es sei denn das Image wird zuvor manuell entpackt).
</p></div></div><p>Die weitere Vorgehensweise entspricht der oben beschriebenen zur Sicherung und Rücksicherung von NICHT-Rootpartitionen.</p></div></div><div class="section_2"><h3 id="Verwendung-mit-EVMS-und-Mappergeraeten">Verwendung mit EVMS- und Mappergeräten<a class="headerlink" href="#Verwendung-mit-EVMS-und-Mappergeraeten">¶</a></h3><p>
Unter Verwendung der graphischen Oberfläche können nur "gewöhnliche" Partitionen gewählt werden, also z.B. <strong>/dev/sda8</strong> oder <strong>/dev/sdb2</strong>. Aber auch EVMS-Volumes oder Devicemapper-Geräte (z.B. verschlüsselte Partitionen) lassen sich sichern, wenn man sie bereits auf der Kommandozeile angibt. Dabei muss der MBR bereits von der Sicherung ausgeschlossen werden (Option <code class="notranslate">-M</code>).</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Bei der Rücksicherung von Partitions-Images, die mit Hilfe von EVMS-Snapshots erstellt wurden, steht man vor einem Problem: Die Partitionsgrößen stimmen nicht überein. Es scheint, als könne man aber die Sicherung auf die dem evms-Volume zugrundeliegende Partition zurückspielen. Diese etwas seltsame Vorgehensweise sollte man vor ernsthafter Anwendung unbedingt selbst austesten. 
</p></div></div></div><div class="section_2"><h3 id="Batch-Modus">Batch-Modus<a class="headerlink" href="#Batch-Modus">¶</a></h3><p>
Partimage kann auch angewiesen werden, gar keine Fragen zu stellen, so dass es im Rahmen eines Scripts eingesetzt werden kann. Die Option dazu ist <code class="notranslate">-b</code>.</p></div><div class="section_2"><h3 id="Beispiel">Beispiel<a class="headerlink" href="#Beispiel">¶</a></h3><p>
Die folgende Zeile aus einem Skript sichert einen Schnappschuss der Systempartition in eine Datei, deren Name das aktuelle Datum enthält. Unter <strong>/var/backup</strong> ist ein externer Datenträger eingebunden:</p><div class="bash"><div class="contents"><pre class="notranslate">partimage -Mb save /dev/evms/root-snapshot /var/backup/root_$(date --iso-8601).partimage.gz </pre></div></div></div><div class="section_2"><h3 id="Problembehebung">Problembehebung<a class="headerlink" href="#Problembehebung">¶</a></h3><p>
Beim Start von partimage erscheint unter Umständen folgende Meldung: 
</p><blockquote><p>"/dev/dm inode nicht vorhanden"</p></blockquote><p>
Partimage bietet dann an, diesen anzulegen, was aber nicht funktioniert. Abhilfe kann man auf zwei Wegen schaffen:</p><ul><li><p>Die einfache und tatsächlich funktionierende Variante ist: So oft 
<span class="key">⏎</span>  drücken, bis die Meldung verschwindet. partimage ist im Normalfall problemlos verwendbar. </p></li><li><p>Die eigentliche, korrekte Vorgehensweise verlangt nach folgendem Befehl im Terminal <sup><a href="#source-2">[2]</a></sup>: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo mknod -m 644 /dev/dm b 240 0 </pre></div></div></li></ul><p>
Um das Problem dauerhaft zu beseitigen, ist folgender Eintrag in der Datei <strong>/etc/rc.local</strong> nötig:</p><div class="bash"><div class="contents"><pre class="notranslate">mknod -m 644 /dev/dm b 240 0 </pre></div></div></div></div><div class="section_1"><h2 id="Alternativen">Alternativen<a class="headerlink" href="#Alternativen">¶</a></h2><p>
</p><ul><li><p>Mit Hilfe des Befehls <a class="internal" href="./shell/dd.html">dd</a> (<strong>D</strong>isk <strong>D</strong>ump) können ebenfalls komplette Partitionen oder Festplatten gesichert bzw. geklont werden. </p></li></ul><p>
</p><ul><li><p>Das Programm <a class="internal" href="./fsarchiver.html">fsarchiver</a> ermöglicht das Kopieren von Partitionen auf Dateiebene. Anders als partimage kann fsarchiver auch mit dem Dateisystem ext4 umgehen. </p></li></ul><p>
</p><ul><li><p>Eine weitere Alternative ist <a class="external" href="http://ping.windowsdream.com/" rel="nofollow">PING</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> (steht für "partimage is not ghost" und ist nur namentlich mit partimage verwandt). Das Projekt hat eine ausführliche <a class="external" href="http://ping.windowsdream.com/ping/howto-2.01.html" rel="nofollow">Anleitung</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> mit Screenshots.</p></li></ul><p>
</p><ul><li><p><a class="internal" href="./systemrescuecd.html">SystemRescueCD</a> - diese Linux Live-CD enthält viele Werkzeuge wie <a class="internal" href="./gparted.html">GParted</a>, partimage und vieles mehr.</p></li></ul><p>
</p><ul><li><p>Wer eine einfach zu bedienende Komplettsammlung zur Datensicherung und weiteren Werkzeugen auf Live-CD sucht, sollte sich auch <a class="external" href="http://www.redobackup.org/" rel="nofollow">Redo Backup and Recovery</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> anschauen.</p></li></ul><p>
</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://www.partimage.org/" rel="nofollow">Homepage</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p><a class="internal" href="./parted_magic.html">Parted Magic</a> - weitere Live-CD mit Partimage </p></li><li><p><a class="external" href="http://www.clonezilla.org/" rel="nofollow">Clonezilla</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Sichern und Wiederherstellen von Partitionen und/oder Festplatten</p></li><li><p><a class="external" href="http://www.linux-user.de/ausgabe/2007/05/082-partimage/index.html" rel="nofollow">Partitionen sichern und wiederherstellen</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - LinuxUser, 05/2007 </p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./partimage/a/revision/938907.html">Diese Revision</a> wurde am 3. Mai 2017 16:17 von <a href="https://ubuntuusers.de/user/frustschieber/">frustschieber</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./partimage.html">partimage</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>