<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Installation_auf_Flashmedien › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./installation_auf_flashmedien.html">Installation auf Flashmedien</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Installation_auf_Flashmedien">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./installation_auf_flashmedien/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./installation_auf_flashmedien/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./installation_auf_flashmedien/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./installation_auf_flashmedien/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./installation_auf_flashmedien/a/backlinks.html">Installation auf Flashmedien</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><p>
</p><div class="box advanced"><h3 class="box advanced">Artikel für fortgeschrittene Anwender</h3><div class="contents"><p>
Dieser Artikel erfordert mehr Erfahrung im Umgang mit
Linux und ist daher nur für fortgeschrittene Benutzer
gedacht.
</p></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./paketquellen_freischalten/ppa.html">Ein PPA freischalten</a>, <em>optional</em></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./kompilieren.html">Kompilieren von Programmen</a>, <em>optional</em></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./packprogramme.html">Archive entpacken</a>, <em>optional</em></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-6" id="source-6"></a> <a class="internal" href="./installation/partitionierung.html">Partitionierung</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Flashbench">Flashbench
</a><ol class="arabic"><li><a class="crosslink" href="#PPA">PPA
</a></li><li><a class="crosslink" href="#Aus-dem-Quellcode">Aus dem Quellcode
</a></li></ol></li><li><a class="crosslink" href="#Die-Erasureblockgroesse-ermitteln">Die Erasureblockgröße ermitteln
</a></li><li><a class="crosslink" href="#Werte">Werte
</a></li><li><a class="crosslink" href="#Partitionieren-der-SD-Karte">Partitionieren der SD-Karte
</a></li><li><a class="crosslink" href="#Dateisystem-anlegen">Dateisystem anlegen
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/Tango/media-flash.png" class="image-left" src="./_/65fd7ef5ae8b498717d95b9bf2b642cb272b2091.png"/>
Dieser Artikel soll einen kurzen Überblick verschaffen, wie eine SD-Karte für optimale Geschwindigeit vorzubereiten ist, um darauf ein Ubuntu-/Linuxsystem optimal zu betreiben. Der Artikel selber versteht sich als Vorbereitung für die <a class="internal" href="./installation_auf_externen_speichermedien.html">Installation auf externen Speichermedien</a>.</p><p>Da Linux standardmäßig für die Nutzung auf klassischen Festplatten optimiert ist, soll dieser Artikel dabei helfen, Zugriffszeiten und Schreibzugriffe zu reduzieren bzw. zu optimieren. Während bei einer normalen Festplatte bei Änderungen einer Datei nur die zu ändernden Daten neu geschrieben bzw. erweitert werden, müssen bei einer SD-Karte ganze Bereiche ausgelesen und neu geschrieben werden. Dieses mag bei großen Dateien unwichtig sein (ob nun 1004 MiB statt 1000 MiB neu geschrieben werden), aber wenn viele kleine Dateien geschrieben werden müssen (z.B. 3 Logdateien à 4 KiB = 12 KiB oder 3 × 4 MiB = 12 MiB), die verteilt auf der SD-Karte liegen, führt dieses zu erheblichen Geschwindigkeitseinbrüchen beim Schreibvorgang. Um dieses zu verhindern, kann das Speichermedium dahingehend optimiert werden, Schreibvorgänge vorzuhalten und erst ab einer gewissen Größe diese, sozusagen "in einem Rutsch", abzuarbeiten.</p><p>Es empfiehlt sich, die SD-Karte nicht während der Installation, sondern bereits im Vorfeld entsprechend zu optimieren. Die benötigten Daten zur optimalen Partitionierung liefert das Werkzeug <a class="interwiki interwiki-github" href="https://github.com/bradfa/flashbench">Flashbench</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Da Speicherkarten bzw. -Sticks grundsätzlich, bis auf extrem teure Sonderausführungen, relativ langsam im Vergleich zu Festplatten sind, empfiehlt es sich immer, <a class="internal" href="./lubuntu.html">Lubuntu</a> bzw. <a class="internal" href="./xubuntu.html">Xubuntu</a> als Grundsystem für die Installation zu nutzen. Diese Systeme sind für die Verwendung auf leistungsschwacher Hardware ausgelegt. Außerdem empfiehlt sich mindestens eine SD-Karte der Geschwindigkeitskategorie Class 6 oder höher!
</p></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Im Folgenden ist <code class="notranslate">/DEV/SD_KARTE</code> immer durch den tatsächlichen Datenträger zu ersetzen. <code class="notranslate">/dev/SD_KARTE1</code>, <code class="notranslate">/dev/SD_KARTE2</code>, usw. sind verschiedene Partitionen (siehe auch <a class="internal" href="./systeminformationen_ermitteln.html#Festplatten">Systeminformationen ermitteln</a>).
</p></div></div><div class="section_1"><h2 id="Flashbench">Flashbench<a class="headerlink" href="#Flashbench">¶</a></h2><p>
Das Programm ist ab <a class="internal" href="./trusty.html">Ubuntu 14.04</a> Bestandteil der offiziellen Paketquellen. Folgendes Paket muss installiert werden <sup><a href="#source-1">[1]</a></sup>:</p><ul><li><p><strong>flashbench</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install flashbench </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install flashbench </pre></div></div><p>
</p></div></div><p>
Nun stehen die beiden Programme <strong>flashbench</strong> und <strong>flashbench-erase</strong> zur Verfügung.</p><div class="section_2"><h3 id="PPA">PPA<a class="headerlink" href="#PPA">¶</a></h3><p>
Für <a class="internal" href="./precise.html">Ubuntu 12.04</a> steht ein inoffizielles PPA <sup><a href="#source-2">[2]</a></sup> zur Verfügung, über das Flashbench installiert werden kann.</p><p>Adresszeile zum <a class="internal" href="./paketquellen_freischalten/ppa.html#PPA-hinzufuegen">Hinzufügen</a> des PPAs:
</p><ul><li><p><strong>ppa:lasall/flashbench</strong> </p></li></ul><div class="box warning"><h3 class="box warning">Hinweis!</h3><div class="contents"><p>
Zusätzliche <a class="internal" href="./fremdquellen.html">Fremdquellen</a> können das System gefährden. 
</p><hr/><p>Ein PPA unterstützt nicht zwangsläufig alle Ubuntu-Versionen. Weitere Informationen sind der <img alt="Wiki/Vorlagen/PPA/ppa.png" class="image-default" src="./_/237f3a0f00c3091056c1a912d81e924e8391ed6b.png"/> <a class="external" href="https://launchpad.net/~lasall/+archive/flashbench" rel="nofollow">PPA-Beschreibung</a> des Eigentümers/Teams <a class="interwiki interwiki-lpuser" href="https://launchpad.net/~lasall">lasall</a> zu entnehmen.
</p></div></div><p>
Damit Pakete aus dem PPA genutzt werden können, müssen die Paketquellen <a class="internal" href="./paketquellen_freischalten.html">neu eingelesen</a> werden.</p><p>Nach dem Aktualisieren der Paketquellen erfolgt die Installation wie oben angegeben.</p></div><div class="section_2"><h3 id="Aus-dem-Quellcode">Aus dem Quellcode<a class="headerlink" href="#Aus-dem-Quellcode">¶</a></h3><p>
Zum Kompilieren <sup><a href="#source-3">[3]</a></sup> aus dem Quellcode wird folgendes <a class="internal" href="./metapaket.html">Metapaket</a> benötigt:</p><ul><li><p><strong>build-essential</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install build-essential </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install build-essential </pre></div></div><p>
</p></div></div><p>
Jetzt muss die aktuelle Version von Flashbench als Archivdatei <a class="interwiki interwiki-github" href="https://github.com/bradfa/flashbench/archive/linaro.zip">linaro.zip</a> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/> heruntergeladen und anschließend entpackt <sup><a href="#source-4">[4]</a></sup> werden.</p><p>Nun wird ein Terminal geöffnet und in das entpackte Verzeichnis gewechselt (<code class="notranslate">XYZ</code> ist entsprechend der Version anzupassen). Das Programm wird durch Eingabe des Befehles <code class="notranslate">make</code> kompiliert <sup><a href="#source-5">[5]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">cd flashbench-XYZ
make </pre></div></div><p>
Nun stehen im selben Verzeichnis 2 neue ausführbare Dateien zu Verfügung: <strong>flashbench</strong> und <strong>erase</strong>.</p><pre class="notranslate">-rw-rw-r-- 1 user user 18092 Aug 10 00:10 COPYING
-rw-rw-r-- 1 user user  2872 Aug 10 00:10 dev.c
-rw-rw-r-- 1 user user   521 Aug 10 00:10 dev.h
-rw-rw-r-- 1 user user 15968 Aug 10 00:13 dev.o
-rw<strong class="highlighted">x</strong>rw<strong class="highlighted">x</strong>r-<strong class="highlighted">x</strong> 1 user user 13004 Aug 10 00:13 <strong class="highlighted">erase</strong>
-rw-rw-r-- 1 user user   679 Aug 10 00:10 erase.c
-rw-rw-r-- 1 user user 11208 Aug 10 00:13 erase.o
-rw<strong class="highlighted">x</strong>rw<strong class="highlighted">x</strong>r-<strong class="highlighted">x</strong> 1 user user 98129 Aug 10 00:13 <strong class="highlighted">flashbench</strong>
-rw-rw-r-- 1 user user 22024 Aug 10 00:10 flashbench.c
-rw-rw-r-- 1 user user 86176 Aug 10 00:13 flashbench.o
-rw-rw-r-- 1 user user   364 Aug 10 00:10 Makefile
-rw-rw-r-- 1 user user  5085 Aug 10 00:10 README
-rw-rw-r-- 1 user user 17196 Aug 10 00:10 vm.c
-rw-rw-r-- 1 user user  1576 Aug 10 00:10 vm.h
-rw-rw-r-- 1 user user 68288 Aug 10 00:13 vm.o</pre></div></div><div class="section_1"><h2 id="Die-Erasureblockgroesse-ermitteln">Die Erasureblockgröße ermitteln<a class="headerlink" href="#Die-Erasureblockgroesse-ermitteln">¶</a></h2><p>
Nun kann mit Flashbench schnell und sicher die Erasureblockgröße von Flashmedien ermittelt werden. Je nachdem, ob Flashbench nur kompiliert oder richtig installiert wurde, werden folgende Befehle zum Starten benötigt <sup><a href="#source-3">[3]</a></sup>:</p><ul><li><p>Flashbench nach Installation ausführen: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo flashbench -a /dev/SD_KARTE  --blocksize=1024 </pre></div></div></li><li><p>Flashbench nach Kompiliervorgang im Quellverzeichnis ausführen: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo ./flashbench -a /dev/SD_KARTE  --blocksize=1024 </pre></div></div></li></ul><p>
</p><table><tr class="titel"><td colspan="6">(verkürzte) Ausgabe Flashbench </td></tr><tr class="kopf"><td> </td><td> align </td><td> pre </td><td> on </td><td> post </td><td> diff </td></tr><tr><td> 8 MiB </td><td> 8388608 </td><td> 724µs </td><td> 1.04ms </td><td> 768µs </td><td> 299µs </td></tr><tr class="highlight"><td>4 MiB </td><td> 4194304 </td><td> 741µs </td><td> 1.08ms </td><td> 788µs </td><td> 317µs </td></tr><tr class="highlight"><td>2 MiB </td><td> 2097152 </td><td> 745µs </td><td> 950µs </td><td> 811µs </td><td> 171µs </td></tr><tr><td> 1 MiB </td><td> 1048576 </td><td> 745µs </td><td> 945µs </td><td> 807µs </td><td> 169µs </td></tr></table><p>Die Ausgabe ist auf einen "Sprung" in der letzten Spalte (diff) abzusuchen (normalerweise zwischen 2 und 16 MiB). In diesem Beispiel sieht man zwischen 2 MiB und 4 MiB einen plötzlichen Anstieg der Differenzzeiten von 171µs auf 317µs. In diesem Beispiel ist 4 MiB die Erasureblockgröße, mit der ab hier gerechnet wird.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Als Erasureblock wird der Block bezeichnet, welcher bei allen Flashmedien komplett ausgelesen und neu geschrieben werden muss, um Daten auf einem Flashmedium zu ändern. Hinkendes Beispiel: Um einen "Plattfuß" am PKW zu beheben, müssen alle 4 Reifen (4 MiB-Block) ab- und wieder angeschraubt werden, obwohl eigentlich nur ein Reifen (1 Bit) gewechselt werden muss.
</p></div></div></div><div class="section_1"><h2 id="Werte">Werte<a class="headerlink" href="#Werte">¶</a></h2><p>
Kurze Übersicht der Werte, mit denen im weiteren Verlauf gearbeitet wird:</p><p>
</p><table><tr class="titel"><td colspan="3">Ermittelte Werte </td></tr><tr><td> Erasureblocksize </td><td> 4 MiB </td><td> gemessen mit Flashbench </td></tr><tr><td> SD-Karten Pagesize </td><td> 8 KiB </td><td> Standardwert von SD-Karten </td></tr><tr><td> Blocksize ext4 </td><td> 4 KiB </td><td> </td></tr><tr><td> stride-Wert ext4 </td><td> 2 </td><td> 2x Blocksize 4KiB = 8 KiB Pagesize </td></tr><tr><td> stripe-size ext4 </td><td> 512 </td><td> </td></tr><tr><td> optimale Sektorgröße </td><td> 8192 </td><td> jede Partition muss auf ein Vielfaches von 8192 beginnen: 4 MiB (4*1024*1024 Byte) Erasursize / 512 Byte Größe einzelner Sektor = 8192 Sektoren </td></tr></table></div><div class="section_1"><h2 id="Partitionieren-der-SD-Karte">Partitionieren der SD-Karte<a class="headerlink" href="#Partitionieren-der-SD-Karte">¶</a></h2><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Beim Formatieren des Datenträgers gehen alle darauf befindlichen Daten verloren.
</p></div></div><p>Mit <a class="internal" href="./parted.html">parted</a> steht ein Tool zur Verfügung, dass das manuelle Rechnen für optimales Alignment erspart.</p><ol class="arabic"><li><p>Zuerst wird in den interaktiven Modus für den entsprechenden Datenträger gewechselt:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo parted -a optimal /dev/SD_KARTE </pre></div></div></li><li><p>Anschließend wird eine neue Partitionstabelle erstellt:</p><div class="bash"><div class="contents"><pre class="notranslate">mklabel msdos </pre></div></div></li><li><p>Und dann die Einheit für Ein- und Ausgabeformat auf das besser lesbare MiB gesetzt.</p><div class="bash"><div class="contents"><pre class="notranslate">unit MiB </pre></div></div></li><li><p>Anschließend wird die erste Partition angelegt. <code class="notranslate">STARTWERT</code> und <code class="notranslate">ENDWERT</code> sind dabei Anfangs- und Endwert vom Anfang des Datenträgers gemessen und werden in MiB angegeben. Die Differenz <code class="notranslate">STARTWERT - ENDWERT</code> muss durch den mit Flashbench ermittelten Wert teilbar sein. Für den Bootloader sollten am Anfang der Platte mindestens ca. 2 MiB freigelassen werden: </p><div class="bash"><div class="contents"><pre class="notranslate">mkpart primary ext4 STARTWERT ENDWERT </pre></div></div><p> </p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Alle weiteren Partitionen werden mit dem selben Befehl erstellt, aber mit angepassten Start- und Endwerten. Welche Größe die Partitionen haben müssen/sollten und welche Partitionen nötig sind, wird im Artikel <a class="internal" href="./partitionierung.html">Partitionierung</a> erklärt.
</p></div></div></li><li><p>Anschließend wird von Units auf Sektoren umgestellt:</p><div class="bash"><div class="contents"><pre class="notranslate">unit s </pre></div></div></li><li><p>Nun sollte die Konfiguration überprüft werden:</p><div class="bash"><div class="contents"><pre class="notranslate">print </pre></div></div><p>Die Partitionen sollten nun jeweils auf einer ungeraden Zahl enden, damit die nachfolgende Partition auf einem Vielfachen der optimale Sektorgröße (im Beispiel 8192) beginnen kann!</p></li><li><p>Mit </p><div class="bash"><div class="contents"><pre class="notranslate">align-check opt N </pre></div></div><p> kann nachgeschaut werden, ob die Partition <code class="notranslate">N</code> (natürliche Zahl) korrekt ausgerichtet ist. Ist dies der Fall, sieht man eine Ausgabe der Form:</p><div><div class="contents"><pre class="notranslate">1 aligned </pre></div></div></li></ol><p>
</p></div><div class="section_1"><h2 id="Dateisystem-anlegen">Dateisystem anlegen<a class="headerlink" href="#Dateisystem-anlegen">¶</a></h2><p>
Nun müssen die Dateisysteme für die erstellten Partitionen, z.B. für <strong>/</strong> und <strong>/home</strong> mit den oben ermittelten <a class="crosslink" href="#Werte">Werten</a> angelegt werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mkfs.ext4 -O^has_journal -E stride=2,stripe-width=512 -b 4096 -L SDroot /dev/SD_KARTE1
sudo mkfs.ext4 -O^has_journal -E stride=2,stripe-width=512 -b 4096 -L SDhome /dev/SD_KARTE2 </pre></div></div><p>
Erklärung der Parameter:</p><p>
</p><table><tr class="titel"><td colspan="2">mkfs.ext4 Parameter </td></tr><tr><td> -O ^has_journal </td><td> kein Journal anlegen </td></tr><tr><td> -E Stride=2,stripe-width=512 </td><td> <code class="notranslate">Stride=2</code> bedeutet 2x 4096 Byte Blockwidth = 8 KiB<br/><code class="notranslate">stripe-width=512</code> ist der Erasurewert -&gt; 512 (*8 KiB Blockwidth=4 MiB Erasuresize) </td></tr><tr><td> -b </td><td> Blockwidth 4096 Byte </td></tr><tr><td> -L </td><td> Name der Partition (optional) </td></tr></table><p>
Nun ist die SD-Karte sowohl entsprechend ausgerichtet (Alignment) als auch das Dateisystem entsprechend modifiziert. Das Grundsystem kann nun installiert werden.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Während der Installation ist darauf zu achten, das als Installationsart <em>"etwas anderes"</em> angeklickt wird und die Partitionen nicht formatiert werden!
</p></div></div><p>Nach der Installation sollten/können noch einige Parametern geändert werden. Dazu sind die folgenden Dateien mit dem Editor zu bearbeiten:</p><p>
</p><table><tr class="titel"><td>Datei </td><td> Ergänzen/Bearbeiten </td><td> Auswirkung </td></tr><tr><td rowspan="5" style="width: 175pt"><strong>/etc/sysctl.conf</strong> </td><td> <code class="notranslate">vm.swappiness=0</code> </td><td> Auslagerung auf die Swap-Partition maximal hinauszögern </td></tr><tr><td> <code class="notranslate">vm.vfs_cache_pressure=50</code> </td><td> 50% RAM reservieren für das Cachen/Vorhalten von Dateien </td></tr><tr><td> <code class="notranslate">vm.dirty_ratio=40</code> </td><td> in %, Speicherbelegung für Vordergrund-Schreibcache </td></tr><tr><td> <code class="notranslate">vm.dirty_background_ratio=20</code> </td><td> in %, Speicherbelegung Hintergrund-Schreibcache </td></tr><tr><td> <code class="notranslate">vm.dirty_writeback_centisecs=12000</code> </td><td> <div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Datenverlust. Zwingt das System, geplante Schreibvorgänge auf der Festplatte solange vorzuhalten, bis der Wert abgelaufen ist. Problematisch bei einem plötzlichem Absturz des Systems ist, das möglicherweise die komplette Zeitspanne in den Logdateien fehlt und die Fehlersuche somit wesentlich erschwert wird bzw. Produktivdaten, welche vorgehalten, aber noch nicht geschrieben wurden, verloren gehen!
</p></div></div>Wert in hundertstel Sekunden. In diesem Beispiel werden erst nach 2 Minuten (=12000 Centisecs) Daten aus dem Speicher auf die SD-Karte schreiben </td></tr><tr><td> <strong>/etc/default/grub</strong> </td><td> <code class="notranslate">GRUB_CMDLINE_LINUX_DEFAULT="quiet splash elevator=noop"</code> (erweitert um <code class="notranslate">elevator=noop</code>, siehe <a class="internal" href="./grub_2/konfiguration.html#Bedeutung-der-Variablen">GRUB 2/Konfiguration</a>)<br/>Anschließend GRUB <a class="internal" href="./grub_2/konfiguration.html#Grub-Konfiguration-updaten">aktualisieren</a>. </td><td> Weist den Kernel an, die Schreibverwaltung an den Hypervisor zu übergeben. </td></tr></table><p>
Für weitere Optimierungsmöglichkeiten empfiehlt sich ein Blick ins Wiki zum Thema <a class="internal" href="./ssd.html">SSD-Festplatten</a>.</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://blog.nuclex-games.com/2009/12/aligning-an-ssd-on-linux/" rel="nofollow">Aligning an SSD on Linux</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Blogbeitrag, 12/2009</p></li><li><p><a class="external" href="http://www.cyberciti.biz/faq/linux-kernel-tuning-virtual-memory-subsystem/#comments/" rel="nofollow">Tuning The VM (memory) Subsystem</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Blogbeitrag, 10/2009</p></li><li><p><a class="external" href="http://lonesysadmin.net/2008/02/21/elevatornoop/" rel="nofollow">elevator=noop</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Blogbeitrag, 02/2008</p></li><li><p><a class="internal" href="./ssd.html">SSD</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li><li><p><a class="internal" href="./installation.html">Installation</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./installation_auf_flashmedien/a/revision/896828.html">Diese Revision</a> wurde am 8. Juni 2016 19:10 von <a href="https://ubuntuusers.de/user/aasche/">aasche</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./installation_auf_flashmedien.html">Installation auf Flashmedien</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>