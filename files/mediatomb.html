<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Mediatomb › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./mediatomb.html">Mediatomb</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Mediatomb">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./mediatomb/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./mediatomb/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./mediatomb/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./mediatomb/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./mediatomb/a/backlinks.html">Mediatomb</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Seit 2013 ruht die Entwicklung von Mediatomb. Ein fork ist <a class="external" href="http://gerbera.io/" rel="nofollow">Gerbera</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./sudo.html">Root-Rechte</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Einstellungen">Einstellungen
</a></li><li><a class="crosslink" href="#Bedienung">Bedienung
</a></li><li><a class="crosslink" href="#Problembehebung">Problembehebung
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="/MT_logo.png" class="image-left" src="./_/d7b50c69627214184d46548e3c0e9188bce8c971.png"/>
<a class="external" href="http://mediatomb.cc/" rel="nofollow">MediaTomb</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ist ein freier UPnP-Medienserver (<a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Universal_Plug_and_Play">Universal Plug and Play</a>), der es erlaubt, Mediendaten wie Filme und Musik über das Netzwerk an UPnP-fähige Geräte zu verteilen. Dazu zählen auch Geräte, die als <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/DLNA">DLNA</a>-fähig gekennzeichnet sind. Da in letzter Zeit vermehrt DLNA-fähige Geräte wie Fernseher, Internetradios oder Spielekonsolen (z.B. PS3), auf den Markt kommen, bietet MediaTomb eine komfortable Lösung zur Übertragung von Musik oder Filmen vom Computer auf das jeweilige Gerät.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
MediaTomb befindet sich in den offiziellen Paketquellen. Folgende Pakete müssen installiert werden<sup><a href="#source-1">[1]</a></sup>:</p><ul><li><p><strong>mediatomb</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install mediatomb </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install mediatomb </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="Einstellungen">Einstellungen<a class="headerlink" href="#Einstellungen">¶</a></h2><p>
Die Einstellungen des Servers lassen sich mit einen Editor bearbeiten. Eine Anpassung kann nötig sein, wenn es zu Problemen <a class="internal" href="./mediatomb.html#DLNA-TVs-z-B-Samsung">mit der Verbindung</a> UPnP-Geräten kommt. Dazu muss man mit einem Editor<sup><a href="#source-3">[3]</a></sup> mit Root-Rechten<sup><a href="#source-4">[4]</a></sup> die Datei <strong>/etc/mediatomb/config.xml</strong> editieren.<br/>Eine genaue Beschreibung der einzelnen Optionen findet man auf der Homepage von <a class="external" href="http://mediatomb.cc/pages/documentation#id2536421" rel="nofollow">MediaTomb</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p><p>Bei <a class="internal" href="./xenial.html">Ubuntu 16.04</a> muss die Netzwerkschnittstelle <code class="notranslate">MT_INTERFACE</code> in der Datei <strong>/etc/default/mediatomb</strong> angepasst werden:
</p><pre class="notranslate">## Network interface on which the server will run, you need to edit this!
#MT_INTERFACE="lo"
MT_INTERFACE="enp0s25" #or whatever you external interface is</pre><div class="section_2"><h3 id="Server-starten-stoppen">Server starten/stoppen<a class="headerlink" href="#Server-starten-stoppen">¶</a></h3><p>
Nach der Installation wird MediaTomb automatisch beim Hochfahren des Computers gestartet.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Der Server verfügt über einen integrierten Dateisystem-Browser in der Benutzeroberfläche, d.h. jeder, der Zugriff auf die MediaTomb-Weboberfläche hat, kann das Dateisystem durchsuchen (mit Benutzerberechtigungen, unter denen der Server läuft) und auch Daten herunterladen. Falls Sie die maximale Sicherheit wünschen - deaktivieren Sie die Benutzeroberfläche vollständig.</p><p>Eine Konto-Authentifizierung bietet zwar einen einfachen Schutz, der z.B. Kinder zurückhalten könnte, aber es ist nicht sicher genug für einen Einsatz in einer nicht vertrauenswürdigen Umgebung.
</p></div></div><p>Da der Server in einer Home-LAN-Umgebung verwendet werden soll, ist die Benutzeroberfläche normalerweise aktiviert und eine Konto-Authentifizierung  deaktiviert, so dass jeder in Ihrem Netzwerk eine Verbindung zur Benutzeroberfläche herstellen kann.</p><p>Deswegen ist ratsam, den Server nicht permanent sondern nur dann laufen lassen, wenn er tatsächlich benötigt wird. Dafür soll man ihn dauerhaft deaktivieren:</p><ul><li><p>Für Systemen mit dem <a class="internal" href="./systemd.html">systemd</a>: </p></li></ul><div class="bash"><div class="contents"><pre class="notranslate">sudo systemctl disable mediatomb.service </pre></div></div><p>Prüfen, ob der Server deaktiviert ist:
</p><div class="bash"><div class="contents"><pre class="notranslate">systemctl is-enabled mediatomb.service </pre></div></div><p>Falls die Ausgabe "disabled" lautet, ist der Server tatsächlich dauerhaft deaktiviert.<br/>Mann kann auch den Status abfragen:</p><div class="bash"><div class="contents"><pre class="notranslate">systemctl status mediatomb.service </pre></div></div><p>Bei deaktivierten Server sieht dann die Status-Ausgabe so aus:</p><pre class="notranslate">● mediatomb.service - UPnP MediaServer
   Loaded: loaded (/lib/systemd/system/mediatomb.service; disabled; vendor preset: enabled)
   Active: inactive (dead)</pre><p>Mit dem Befehl kann der MediaTomb-Daemon wieder dauerhaft aktiviert werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo systemctl enable mediatomb.service </pre></div></div><ul><li><p>Für Systemen mit dem <a class="internal" href="./upstart.html">Upstart</a> legt man eine neue <strong>/etc/init/mediatomb.override</strong> Datei an: </p></li></ul><div class="bash"><div class="contents"><pre class="notranslate">sudo sh -c "echo 'manual' &gt; /etc/init/mediatomb.override" </pre></div></div><p>Möchte man den Init-Job wieder aktivieren, löscht man einfach die <strong>/etc/init/mediatomb.override</strong>-Datei (oder entfernt das Schlüsselwort "manual" in dieser Datei).</p><p>Manuelles Starten kann je nach Ubuntu-Version via <a class="internal" href="./systemd.html">systemd</a> / <a class="internal" href="./upstart.html">Upstart</a> bzw. das Skript <strong>/etc/init/mediatomb.conf</strong> erfolgen. Die Steuerung des Dienstes über das SysV-Init Skript <strong>/etc/init.d/mediatomb</strong> ist zwar möglich, aber inzwischen veraltet:</p><ul><li><p>Server starten: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo service mediatomb start </pre></div></div><p> oder </p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/mediatomb start </pre></div></div></li><li><p>Server stoppen: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo service mediatomb stop </pre></div></div><p> oder </p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/mediatomb stop </pre></div></div></li><li><p>Server neustarten: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo service mediatomb restart </pre></div></div><p> oder </p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/mediatomb restart </pre></div></div></li><li><p>Status abfragen: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo service mediatomb status </pre></div></div><p> oder </p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/mediatomb status </pre></div></div></li></ul><p>
Dies läßt sich automatisieren, indem die entsprecheden Programmstarter ins Verzeichnis <strong>/usr/share/applications/</strong> (systemweit) bzw. <strong>~/.local/share/applications/</strong> (für den lokalen Benutzer) platziert werden:</p><p><strong>/usr/share/applications/mediatomb-server-start.desktop</strong>
</p><pre class="notranslate">[Desktop Entry]
Name=MediaTomb server start
Comment=Starts MediaTomb server
Exec=sudo systemctl start mediatomb.service
Terminal=true
Icon=mediatomb.png
Type=Application
Categories=AudioVideo;</pre><p><strong>/usr/share/applications/mediatomb-server-stop.desktop</strong>
</p><pre class="notranslate">[Desktop Entry]
Name=MediaTomb server stop
Comment=Stop MediaTomb server
Exec=sudo systemctl stop mediatomb.service
Terminal=true
Icon=mediatomb.png
Type=Application
Categories=AudioVideo;</pre><p>Dann läßt sich der MediaTomb-Server über den Menüeintrag <em>"Anwendungen -&gt; Multimedia -&gt; MediaTomb server start"</em> starten und über den Menüeintrag <em>"Anwendungen -&gt; Multimedia -&gt; MediaTomb server stop"</em> stoppen (im aufpoppenden Terminal-Fenster muss noch ein Benutzer-Passwort für den Befehl <code class="notranslate">sudo</code> eingegeben werden).</p></div></div><div class="section_1"><h2 id="Bedienung">Bedienung<a class="headerlink" href="#Bedienung">¶</a></h2><p>
</p><div class="section_2"><h3 id="Programmaufruf">Programmaufruf<a class="headerlink" href="#Programmaufruf">¶</a></h3><p>
Nach erfolgreichem Start des Servers kann man das Programm über den Menüpunkt <em>"Anwendungen -&gt; Multimedia -&gt; MediaTomb"</em> aufrufen. Daraufhin startet ein Browser und öffnet die Weboberfläche von MediaTomb. Alternativ erreicht man das auch durch Aufruf der Adresse <code class="notranslate">http://localhost:49152</code> (der Standard-Port <code class="notranslate">49152</code> kann angepasst werden; z.B. <code class="notranslate">50500</code> bei <a class="internal" href="./xenial.html">Ubuntu 16.04</a>). <br/>Erhält man die Meldung
</p><blockquote><p>"MediaTomb UI is disabled. Check your configuration."</p></blockquote><p>
muss in der Datei <strong>/etc/mediatomb/config.xml</strong> der Eintrag <code class="notranslate">ui enabled="no"</code> auf "<code class="notranslate">yes</code>" gesetzt werden. In den Zeilen darunter lässt sich festlegen, ob der Zugang nur per Benutzernamen und Passwort möglich sein soll. Dazu wird "<code class="notranslate">accounts enabled</code>" auf "<code class="notranslate">yes</code>" gesetzt und bei "<code class="notranslate">user</code>" und "<code class="notranslate">password</code>" entsprechend ein Benutzername und ein Passwort eingesetzt.</p><p>Dem Menüeintrag <em>"Anwendungen -&gt; Multimedia -&gt; MediaTomb"</em> entspricht der Programmstarter <strong>/usr/share/applications/mediatomb.desktop</strong>:
</p><pre class="notranslate">[Desktop Entry]
Name=MediaTomb
Comment=MediaTomb UPnP MediaServer web user interface.
Exec=/usr/bin/x-www-browser /var/lib/mediatomb/mediatomb.html
Icon=mediatomb.png
Terminal=false
Type=Application
Categories=AudioVideo;</pre><p>Der Link <strong>/usr/bin/x-www-browser</strong> zeigt auf einen Browser (standardmäßig auf den Firefox). Möchte man einen anderen Browser für die MediaTomb-Benutzeroberfläche nutzen, korrigiert man die Exec-Zeile des systemweiten Programmstarter <strong>/usr/share/applications/mediatomb.desktop</strong> (kann aber bei einem Update überschrieben werden) oder legt einen lokalen Programmstarter <strong>~/.local/share/applications/mediatomb.desktop</strong> an:</p><p>
</p><table style="float: right; clear: left; margin-top: 0px; border: none"><tr class="titel"><td> <img alt="/MT_03.png" class="image-default" src="./_/1da8374d4746c2b1c66597a74d37a2ca440aed8c.png"/></td></tr><tr class="normal"><td style="text-align: center; width: 300px"> Benutzeroberfläche von MediaTomb</td></tr></table><pre class="notranslate">[Desktop Entry]
Name=MediaTomb
Comment=MediaTomb UPnP MediaServer web user interface
Exec=chromium-browser --incognito /var/lib/mediatomb/mediatomb.html
Icon=mediatomb.png
Terminal=false
Type=Application
Categories=AudioVideo;</pre><p>Die Oberfläche ist in 3 Bereiche aufgeteilt. Links oben kann man zwischen den Anzeigemodi <em>"Database"</em> und <em>"Filesystem"</em>  wechseln. Links unten findet man eine Verzeichnisstruktur in Baumdarstellung. Der große Bereich rechts beinhaltet die jeweiligen Inhalte und die Schaltflächen zur Interaktion mit dem Programm.</p></div><div class="section_2"><h3 id="Anzeigemodus-Database">Anzeigemodus Database<a class="headerlink" href="#Anzeigemodus-Database">¶</a></h3><p>
</p><p>
</p><table style="float: right; clear: left; margin-top: 0px; border: none"><tr class="titel"><td> <img alt="/MT_04.png" class="image-default" src="./_/e9a5c9fb52554bce3b93fda5c3e944d80d78d768.png"/></td></tr><tr class="normal"><td style="text-align: center; width: 300px"> Anzeigemodus Database</td></tr></table><p>
In diesem Modus werden alle freigegebenen Objekte angezeigt. Auf diese kann nun mit einem UPnP-fähigen Gerät über das Netzwerk zugegriffen werden.</p><p>Zur Interaktion mit dem Programm stehen verschiedene Schaltflächen zur Verfügung. Die wichtigsten sind:
</p><ul><li><p><img alt="/MT_10.png" class="image-default" src="./_/638c464fea818d53d49941538b4ea8027bd21eb0.png"/>  "Add item": Fügt ein neues Objekt hinzu</p></li><li><p><img alt="/MT_11.png" class="image-default" src="./_/27f87256cdcf66b1419a95fd74e8b9d18e5d86c6.png"/>  "Edit": Mit dieser Schaltfläche können verschiedene Informationen des Objekts bearbeitet werden. </p></li><li><p><img alt="/MT_12.png" class="image-default" src="./_/599f14cd3a3c46dfdb7773a9d4664cc4f4a4bae6.png"/> "Remove": Deaktiviert die Freigabe des jeweiligen Objekts und entfernt es aus der Datenbank.</p></li><li><p><img alt="/MT_13.png" class="image-default" src="./_/f8474a70678b2fee156829a0d677bf095593568c.png"/>  "Remove all": Entfernt das Objekt und alle Referenzen aus der Datenbank</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Anzeigemodus-Filesystem">Anzeigemodus Filesystem<a class="headerlink" href="#Anzeigemodus-Filesystem">¶</a></h3><p>
</p><p>
</p><table style="float: right; clear: left; margin-top: 0px; border: none"><tr class="titel"><td> <img alt="/MT_05.png" class="image-default" src="./_/71cc56e2dff35e8e832ea817116cbd8fdc3adac3.png"/></td></tr><tr class="normal"><td style="text-align: center; width: 300px"> Anzeigemodus Filesystem</td></tr></table><p>
Dieser Modus zeigt das Dateisystem des verwendeten Computers an. Über die Baumstruktur kann man zu den Objekten navigieren, die freigegeben werden sollen. Dabei können sowohl einzelne Dateien oder auch ganze Ordner freigegeben werden. Für die Ordnerfreigabe besteht zusätzlich die Möglichkeit, eine automatische Aktualisierung des Inhalts zu aktivieren (<em>autoscan</em>). Dadurch wird der Inhalt des betroffenen Ordners innerhalb eines frei definierbaren Zeitintervalls auf Veränderungen überprüft.</p><p>Folgende Schaltflächen stehen zur Verfügung:
</p><ul><li><p><img alt="/MT_20.png" class="image-default" src="./_/10f1ba6f2ece5d181a3feb850ed77df14c0bc144.png"/>  "Add": Fügt eine Datei oder einen Ordner der Datenbank hinzu und gibt sie frei.</p></li><li><p><img alt="/MT_21.png" class="image-default" src="./_/d8ab502d4771ec1c91ace5bbe526ab54504fc3d8.png"/>  "Add as autoscan dir": Fügt einen Ordner der Datenbank hinzu und aktiviert die automatische Aktualisierung.</p></li></ul><p>
</p></div></div><div class="section_1"><h2 id="Problembehebung">Problembehebung<a class="headerlink" href="#Problembehebung">¶</a></h2><p>
</p><div class="section_2"><h3 id="OpenVPN">OpenVPN<a class="headerlink" href="#OpenVPN">¶</a></h3><p>
Unter Umständen kann es zu Problemen kommen, wenn Mediatomb und OpenVPN gleichzeitig installiert sind. Das Problem äußert sich darin, dass die Weboberfläche von Mediatomb zwar erreichbar ist, der eigentliche UPNP-Service aber nicht. Die Ursache ist hierfür, dass Mediatomb den UPNP-Service scheinbar an die Netzwerkschnittstelle <code class="notranslate">tun0</code>, welche von OpenVPN angelegt wird, bindet. Stattdessen soll Mediatomb sich an die übliche Netzwerkschnittstelle binden, normalerweise also <code class="notranslate">eth0</code> oder <code class="notranslate">wlan0</code>. Ein einfacher Eingriff in der Datei <strong>/etc/default/mediatomb</strong> löst das Problem:</p><pre class="notranslate">...
# The network interface for MediaTomb to bind to and for which the multicast
# routing entry should be added; "" if the route shouldn't be added at all.
# For example: INTERFACE="eth0"
INTERFACE="eth0"
...</pre></div><div class="section_2"><h3 id="Firewall">Firewall<a class="headerlink" href="#Firewall">¶</a></h3><p>
Netzwerkgeräte machen ihren UPnP-Dienst via UDP über die Multicast-Adresse <code class="notranslate">239.255.255.250:1900</code> auf Basis des Simple Service Discovery Protocol (<a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Simple_Service_Discovery_Protocol">SSDP</a>) bekannt. Von daher muss sichergestellt werden, dass die Firewall den UDP-Port <code class="notranslate">1900</code> nicht blockiert. Außerdem wird MediaTomb standardmäßig für die Kommunikation einen freien Port wählen (ab <code class="notranslate">49152</code>).</p><p>Die Ports für MediaTomb können bei Verwendung von <a class="internal" href="./ufw.html">ufw</a> auf folgende Weise zugelassen werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ufw allow 1900/udp
sudo ufw allow 49152/tcp
sudo ufw allow 49152/udp </pre></div></div><p>Unabhängig davon, ob eine Firewall benutzt wird oder nicht, kann es sinnvoll sein, einen Zugang zur MediaTomb-Steuerung von anderen Rechnern im LAN zu verbieten. Ansonsten kann man das lokale Dateisystem via MediaTomb-GUI durchstöbern (<code class="notranslate">http://SERVER-IP:49152</code>). Man kann auch die Media-Dateien nur auf den bestimmten Netzwerkgeräten abspielen zu lassen.</p><p>Hier ist ein Beispiel, wie sich solche Logik auf der Basis vom IP-Paketfilter <a class="internal" href="./iptables2.html">iptables</a> implementieren läßt.</p><p>Beispiel-IP-Adressen:
</p><ul><li><p><code class="notranslate">192.168.0.111</code> - ein PC, auf dem MediaTomb läuft</p></li><li><p><code class="notranslate">192.168.0.100</code> - ein DLNA-Netzwerkgerät, z. B. ein Fernseher (oder ein PC, auf dem VLC läuft), das die Media-Dateien bekommen darf.</p></li></ul><p>
Regeln für die Datei <strong>/etc/iptables.rules</strong>:</p><pre class="notranslate">*filter
-A INPUT -s 192.168.0.111/32 -p tcp -m tcp --dport 49152 -j ACCEPT
-A INPUT -s 192.168.0.111/32 -p udp -m udp --dport 49152 -j ACCEPT
-A INPUT -s 192.168.0.100/32 -p tcp -m tcp --dport 49152 -j ACCEPT
-A INPUT -s 192.168.0.100/32 -p udp -m udp --dport 49152 -j ACCEPT
-A INPUT ! -s 127.0.0.1/32 -p tcp -m tcp --dport 49152 -j DROP
-A INPUT ! -s 127.0.0.1/32 -p udp -m udp --dport 49152 -j DROP
-A OUTPUT ! -d 239.255.255.250 -p udp -m udp --dport 1900 -j DROP
COMMIT</pre><p>Die ensprechenden iptables-Regel kann man bei einem MediaTomb-Start aus dem <a class="internal" href="./upstart.html">Upstart</a> Skript <strong>/etc/init/mediatomb.conf</strong> aktivieren bzw. bei einem MediaTomb-Stop deaktivieren lassen:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>description <span class="s2">"MediaTomb UPnP media server"</span>
author      <span class="s2">"Daniel van Vugt &lt;vanvugt in launchpad&gt;"</span>

start on <span class="o">(</span>local-filesystems and net-device-up IFACE!<span class="o">=</span>lo<span class="o">)</span>
stop on runlevel <span class="o">[</span>!2345<span class="o">]</span>
respawn

env <span class="nv">CONFIGXML</span><span class="o">=</span>/etc/mediatomb/config.xml
env <span class="nv">LOGFILE</span><span class="o">=</span>/var/log/mediatomb.log
env <span class="nv">DEFAULT</span><span class="o">=</span>/etc/default/mediatomb

<span class="c1"># need for a firewall logging in the /var/log/syslog</span>
env <span class="nv">LOGGER</span><span class="o">=</span><span class="s2">"/usr/bin/logger -s -p daemon.info -t FirewallHandler"</span>
<span class="c1">#--------------</span>

script
	<span class="o">[</span> -r <span class="nv">$DEFAULT</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> . <span class="nv">$DEFAULT</span>
	<span class="o">[</span> ! <span class="nv">$USER</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nv">USER</span><span class="o">=</span>root
	<span class="o">[</span> ! <span class="nv">$GROUP</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nv">GROUP</span><span class="o">=</span><span class="nv">$USER</span>
	<span class="k">if</span> <span class="o">[</span> -n <span class="s2">"</span><span class="nv">$INTERFACE</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
		<span class="nv">INTERFACE_ARG</span><span class="o">=</span><span class="s2">"-e </span><span class="nv">$INTERFACE</span><span class="s2">"</span>
		<span class="nv">$ROUTE_ADD</span> <span class="nv">$INTERFACE</span>
	<span class="k">fi</span>

	<span class="c1"># insert a mediatomb firewall rules</span>
	<span class="k">if</span> <span class="o">[</span> ! -r /etc/iptables.rules <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
		<span class="si">${</span><span class="nv">LOGGER</span><span class="si">}</span> <span class="s2">"No iptables rules exist to restore."</span>
	<span class="k">elif</span> <span class="o">[</span> ! -x /sbin/iptables-restore <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
		<span class="si">${</span><span class="nv">LOGGER</span><span class="si">}</span> <span class="s2">"No program exists to restore iptables rules."</span>
	<span class="k">else</span>
		<span class="si">${</span><span class="nv">LOGGER</span><span class="si">}</span> <span class="s2">"Restoring a mediatomb iptables rules"</span>
		/sbin/iptables-restore &lt; /etc/iptables.rules
	<span class="k">fi</span>
	<span class="c1">#-------------------------------------</span>

	<span class="nb">exec</span> mediatomb <span class="se">\</span>
		-c <span class="nv">$CONFIGXML</span> <span class="se">\</span>
		-u <span class="nv">$USER</span> <span class="se">\</span>
		-g <span class="nv">$GROUP</span> <span class="se">\</span>
		-l <span class="nv">$LOGFILE</span> <span class="se">\</span>
		<span class="nv">$INTERFACE_ARG</span> <span class="se">\</span>
		<span class="nv">$OPTIONS</span>
end script

post-stop script
	<span class="o">[</span> -r <span class="nv">$DEFAULT</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> . <span class="nv">$DEFAULT</span>
	<span class="k">if</span> <span class="o">[</span> -n <span class="s2">"</span><span class="nv">$INTERFACE</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
		<span class="nv">$ROUTE_DEL</span> <span class="nv">$INTERFACE</span>
	<span class="k">fi</span>

	<span class="c1"># remove a mediatomb firewall rules</span>
	<span class="k">if</span> <span class="o">[</span> -x /sbin/iptables-save <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
		<span class="si">${</span><span class="nv">LOGGER</span><span class="si">}</span> <span class="s2">"Remove a mediatomb iptables rules"</span>
		/sbin/iptables-save <span class="p">|</span> egrep -v <span class="s2">"49152|1900"</span> <span class="p">|</span> /sbin/iptables-restore
	<span class="k">else</span>
		<span class="si">${</span><span class="nv">LOGGER</span><span class="si">}</span> <span class="s2">"No program exists to save iptables rules."</span>
	<span class="k">fi</span>
	<span class="c1">#----------------</span>
end script
</pre></div>
</td></tr></table></div></div><div class="section_2"><h3 id="Darstellung-von-Umlauten">Darstellung von Umlauten<a class="headerlink" href="#Darstellung-von-Umlauten">¶</a></h3><p>
Dieses Problem resultiert daher, dass standardmäßig kein erweiterter Zeichensatz spezifiziert ist. Das kann man durch folgende Schritte beheben.</p><p>Falls MediaTomb gerade läuft, sollte der Server zunächst gestoppt werden. Anschließend muss man mit einem Editor<sup><a href="#source-3">[3]</a></sup> mit Root-Rechten<sup><a href="#source-4">[4]</a></sup> die Datei <strong>/etc/mediatomb/config.xml</strong> editieren. Nun sucht man sich folgende Zeile heraus:</p><pre class="notranslate">&lt;import hidden-files="no"&gt; </pre><p>
Unterhalb dieser Zeile, fügt man folgende zwei xml-Knoten ein:</p><pre class="notranslate">&lt;filesystem-charset&gt;UTF-8&lt;/filesystem-charset&gt;
&lt;metadata-charset&gt;UTF-8&lt;/metadata-charset&gt;</pre><p>
Nach dem Speichern der Datei und dem Start von MediaTomb, müssen die betreffenden Dateien einmal neu eingelesen werden. Dazu werden diese aus der Freigabeliste entfernt und neu hinzugefügt. Jetzt sollten die Umlaute korrekt dargestellt werden.</p></div><div class="section_2"><h3 id="Fehlermeldungen-bezueglich-der-Datenbank">Fehlermeldungen bezüglich der Datenbank<a class="headerlink" href="#Fehlermeldungen-bezueglich-der-Datenbank">¶</a></h3><p>
Es kann von Zeit zu Zeit vorkommen, dass die Datenbank-Datei fehlerhaft ist. Das macht sich z.B. durch Fehlermeldungen wie diese bemerkbar:
</p><blockquote><p>"error: database disk image is malformed"</p></blockquote><p>
Um dieses Problem zu beheben, muss MediaTomb gestoppt und die fehlerhafte Datenbank gelöscht werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo rm /var/lib/mediatomb/mediatomb.db </pre></div></div><p>
Bei dem nächsten Start wird automatisch eine neue Datei angelegt. Zu beachten ist allerdings, dass auch sämtliche Freigaben neu angelegt werden müssen.</p></div><div class="section_2"><h3 id="DLNA-TVs-z-B-Samsung">DLNA TVs (z.B. Samsung)<a class="headerlink" href="#DLNA-TVs-z-B-Samsung">¶</a></h3><p>
Einige Fernsehgeräte brauchen einen speziellen <a class="external" href="http://mediatomb.cc/dokuwiki/faq:faq#dlna_tvs" rel="nofollow">Abschnitt</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> in der Datei <strong>/etc/mediatomb/config.xml</strong>, um die Inhalte vom Media-Server wiedergeben zu können:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nt">&lt;protocolInfo</span> <span class="na">extend=</span><span class="s">"yes"</span><span class="nt">/&gt;</span><span class="c">&lt;!-- For PS3 support change to "yes" --&gt;</span>
 
<span class="nt">&lt;custom-http-headers&gt;</span>
  <span class="c">&lt;!-- Samsung needs it --&gt;</span>
  <span class="nt">&lt;add</span> <span class="na">header=</span><span class="s">"transferMode.dlna.org: Streaming"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;add</span> <span class="na">header=</span><span class="s">"contentFeatures.dlna.org: DLNA.ORG_OP=01;DLNA.ORG_CI=0;DLNA.ORG_FLAGS=01500000000000000000000000000000"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/custom-http-headers&gt;</span>
</pre></div>
</td></tr></table></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><div class="section_2"><h3 id="Intern">Intern<a class="headerlink" href="#Intern">¶</a></h3><p>
</p><ul><li><p>Andere DLNA-Server (Auswahl):</p><ul><li><p><a class="internal" href="./readymedia.html">ReadyMedia</a> (früher miniDLNA)</p></li><li><p><a class="internal" href="./ushare.html">uShare</a></p></li><li><p><a class="internal" href="./plex_media_server.html">Plex Media Server</a></p></li></ul></li><li><p><a class="internal" href="./musik_verwalten.html">Musik verwalten</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> weitere Möglichkeiten, um einen Medienserver aufzubauen</p></li><li><p><a class="internal" href="./gupnp_tools.html">GUPnP Tools</a> - ein Werkzeug, mit dem man verschiedene Informationen über den Status von UPnP-Geräten abrufen kann</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Extern">Extern<a class="headerlink" href="#Extern">¶</a></h3><p>
</p><ul><li><p><a class="external" href="http://mediatomb.cc/" rel="nofollow">Projektseite</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p><ul><li><p><a class="interwiki interwiki-ubuntu_doc" href="https://help.ubuntu.com/community/MediaTomb">Wiki-Eintrag bei ubuntu.com</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul></li><li><p><a class="external" href="http://www.be-jo.net/de/2009/11/medienserver-fur-die-ps3/" rel="nofollow">Anleitung für Mediatomb und PS3</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Blogbeitrag, 11/2009</p></li><li><p>Allgemeine Information in der Wikipedia:</p><ul><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/DLNA">DLNA</a></p></li><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Universal_Plug_and_Play">UPnP</a></p></li><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Streaming_Media">Medienstreaming</a></p></li></ul></li><li><p><a class="external" href="http://www.ps3mediaserver.org/" rel="nofollow">PS 3 Media Server</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - alternativer DLNA-Media-Server</p></li><li><p><a class="external" href="https://oss.linn.co.uk/trac/wiki/Kinsky" rel="nofollow">Kinsky UPnP Control Point</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><p>
</p></div></div></div>
<p class="meta">
<a href="./mediatomb/a/revision/944654.html">Diese Revision</a> wurde am 2. November 2017 19:47 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./mediatomb.html">Mediatomb</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>