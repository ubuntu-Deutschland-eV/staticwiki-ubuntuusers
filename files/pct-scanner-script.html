<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>pct-scanner-script › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./pct-scanner-script.html">pct-scanner-script</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/pct-scanner-script">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./pct-scanner-script/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./pct-scanner-script/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./pct-scanner-script/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./pct-scanner-script/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./pct-scanner-script/a/backlinks.html">pct-scanner-script</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./sudo.html">Root-Rechte</a></p></li></ol></div></div><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Bedienung">Bedienung
</a><ol class="arabic"><li><a class="crosslink" href="#Optionen">Optionen
</a><ol class="arabic"><li><a class="crosslink" href="#Beispiele">Beispiele
</a></li></ol></li></ol></li><li><a class="crosslink" href="#Konfiguration">Konfiguration
</a></li><li><a class="crosslink" href="#Problemloesungen">Problemlösungen
</a></li><li><a class="crosslink" href="#Erstellung-von-Riesen-PDFs">Erstellung von Riesen-PDFs
</a><ol class="arabic"><li><a class="crosslink" href="#Nicht-verwendbare-Optionen">Nicht verwendbare Optionen
</a></li><li><a class="crosslink" href="#DjVu-Dateien-werden-nicht-erstellt">DjVu-Dateien werden nicht erstellt
</a></li></ol></li><li><a class="crosslink" href="#Erweiterte-Moeglichkeiten">Erweiterte Möglichkeiten
</a><ol class="arabic"><li><a class="crosslink" href="#Groesse-Schwellwert-Gamma-Wert">Größe, Schwellwert, Gamma-Wert
</a></li><li><a class="crosslink" href="#Encodierung-mit-didjvu-Texterkennung-mit-ocrodjvu">Encodierung mit didjvu, Texterkennung mi...</a><ol class="arabic"><li><a class="crosslink" href="#Farbscans">Farbscans
</a></li><li><a class="crosslink" href="#Graycsale-Scans">Graycsale-Scans
</a></li><li><a class="crosslink" href="#Schwarz-Weiss-Scans">Schwarz-Weiß-Scans
</a></li></ol></li><li><a class="crosslink" href="#ocrodjvu-Einstellungen">ocrodjvu-Einstellungen
</a></li></ol></li><li><a class="crosslink" href="#Alternativen">Alternativen
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/terminal.png" class="image-left" src="./_/e81889fd6e485dd32e1cde611eabc18abced7993.png"/>
pct-scanner-scripts ist eine Sammlung von Skripten, um einfach Vorlagen zu scannen und (einzelne oder mehrseitige) <a class="internal" href="./djvu.html">DjVu</a>, <a class="internal" href="./pdf.html">PDF</a>- oder (nur einseitige) JPEG-Dateien, z.B. für Archivierungszwecke zu erstellen. Mehrseitige Scans können automatisch produziert und auch manuell erweitert werden, verwendet werden können sowohl einfache Flachbett-Scanner als auch Geräte mit automatischem Dokumenteinzug (<a class="interwiki interwiki-wikipedia_en" href="https://en.wikipedia.org/wiki/Automatic_document_feeder">ADF</a>). Über Konfigurationsskripte lassen sich individuelle Arbeitsabläufe für verschiedene Aufgaben steuern, um nicht immer alle gewünschten Optionen auf der Kommandozeile eingeben zu müssen. Damit ist das Skript sehr vielseitig einsetzbar. Es wurde von <a class="external" href="http://www.tuxcrafter.net/pages/about.html" rel="nofollow">Jelle de Jong</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>, von der niederländischen Firma <a class="external" href="http://www.powercraft.nl/pages/home.html" rel="nofollow">PowerCraft</a> <img alt="{nl}" src="./_/f7eca866a6a32fb37a163c9cd43f822f7afe89f6.png"/>, entwickelt. Verwendet werden u.a. scanadf (aus dem Paket <strong>sane</strong>) und PDF/DjVu-Werkzeuge.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Das Programm ist in den Ubuntu-Quellen vorhanden, installiert<sup><a href="#source-1">[1]</a></sup> werden muss das Paket</p><ul><li><p><strong>pct-scanner-scripts</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install pct-scanner-scripts </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install pct-scanner-scripts </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="Bedienung">Bedienung<a class="headerlink" href="#Bedienung">¶</a></h2><p>
Die allgemeine Syntax auf der Kommandozeile<sup><a href="#source-2">[2]</a></sup> lautet</p><div class="bash"><div class="contents"><pre class="notranslate">pct-scanner-script [Optionen] </pre></div></div><p>In der "Standardeinstellung" (siehe Beispiele, zweite Zeile) wird ein "lineart"-Scan mit der <code class="notranslate">source</code>-Option  <code class="notranslate">ADF</code> in einer Auflösung von 600 dpi erstellt, der dann in ein DjVu-Dokument umgewandelt wird. Soll auch noch eine PDF-Version erzeugt werden, muss ggf. vorher in der Konfigurationsdatei <strong>/etc/pct-scanner-script.conf</strong> (s. u. Abschnitt "Konfiguration") bei dem jeweiligen Block die Option <code class="notranslate">NOPDF=1</code> entweder gelöscht oder mit einem <code class="notranslate">#</code> davor auskommentiert werden (<code class="notranslate">NOPDF=0</code> oder <code class="notranslate">NOPDF=NO</code> funktionieren leider nicht in allen Versionen). Das Dokument wird anschließend zur Kontrolle in <a class="internal" href="./evince.html">Evince</a> geöffnet. Standard für die Speicherung ist <strong>~/scanscripts</strong>, in dem dann die Ordner <strong>input</strong>, <strong>output</strong> und <strong>processing</strong> erstellt werden. Die Verarbeitung der Scans erfolgt über das Skript <strong>/usr/lib/pct-scanner-scripts/pct-scanner-script-process</strong>.</p><p>Das Skript erstellt, wenn es nicht durch die Optionen <code class="notranslate">-p | --nopdf</code> oder  <code class="notranslate">-j | --nodjvu</code> daran gehindert wird, (mehrseitige) Dateien nach dem Muster  <strong>document-multi-page-color/grayscale/linart.pdf</strong> bzw <strong>document-multi-page-color/graysacle/lineart.djvu</strong> im Ordner <strong>scanscript/output</strong>. Ggf. werden in <strong>scanscript/processing/jpeg</strong> von allen Scans <strong>.jpeg</strong>-Bilder abgelegt. Es empfiehlt sich, nach Abschluss einer Scanaufgabe die Option <code class="notranslate">-e | --clean</code> zu verwenden (<span class="underline">vorher</span> aber das eigentliche Ergebnis sichern, es wird dabei mit gelöscht!), oder das Verzeichnis hin und wieder manuell zu leeren.</p><div class="section_2"><h3 id="Optionen">Optionen<a class="headerlink" href="#Optionen">¶</a></h3><p>
</p><p>
</p><table style="width: 97%"><tr class="titel"><td colspan="2"> pct-scanner-script </td></tr><tr class="kopf"><td> Option </td><td> Funktion </td></tr><tr><td> <code class="notranslate">-h</code>, <code class="notranslate">--help</code>, <code class="notranslate">-?</code> </td><td> Hilfe </td></tr><tr class="highlight"><td> <code class="notranslate">-l</code>, <code class="notranslate">--lineart</code> </td><td> Scannen in Schwarz-Weiß ("lineart") [empfohlen] </td></tr><tr><td> <code class="notranslate">-c,</code> <code class="notranslate">--color</code> </td><td> Scannen in Farbe, wenn unterstützt </td></tr><tr class="highlight"><td> <code class="notranslate">-g</code>, <code class="notranslate">--grayscale </code> </td><td> Scannen in Graustufen, wenn unterstützt </td></tr><tr><td> <code class="notranslate">-o</code>, <code class="notranslate">--outdir /PFAD/ZUM/SPEICHERVERZEICHNIS</code> </td><td> Angabe des Speicherverzeichnis [auf genügend Speicherkapazität achten!] </td></tr><tr class="highlight"><td> <code class="notranslate">-s</code>, <code class="notranslate">--source QUELLE</code> </td><td> Einstellung der Scan-Quelle, z.B. <code class="notranslate">ADF</code> oder <code class="notranslate">Flatbed</code>, siehe <code class="notranslate">--search</code> </td></tr><tr><td> <code class="notranslate">-r</code>, <code class="notranslate">--resolution N</code> </td><td> Einstellung der Scan-Auflösung in dpi, mögliche Einstellungen siehe <code class="notranslate">--search</code> </td></tr><tr class="highlight"><td> <code class="notranslate">-d</code>, <code class="notranslate">--device GERÄTENAME</code> </td><td> Einstellung des Gerätes ("device resolution"), siehe <code class="notranslate">--search</code> </td></tr><tr><td> <code class="notranslate">-m</code>, <code class="notranslate">--resume N</code> </td><td> Wiederaufnahme-Zähler für die Seiten-Nummer einstellen </td></tr><tr class="highlight"><td> <code class="notranslate">-e</code>, <code class="notranslate">--clean</code> </td><td> Löscht alle Dateien im Speicherverzeichnis </td></tr><tr><td> <code class="notranslate">-p</code>, <code class="notranslate">--nopdf</code> </td><td> Keine Erstellung von <a class="internal" href="./pdf.html">PDF</a>-Dokumenten [empfohlen] </td></tr><tr class="highlight"><td> <code class="notranslate">-j</code>, <code class="notranslate">--nodjvu</code> </td><td> Keine Erstellung von <a class="internal" href="./djvu.html">DjVu</a>-Dokumenten </td></tr><tr><td> <code class="notranslate">-a</code>, <code class="notranslate">--search</code> </td><td> Suche nach Scannern und den verwendbaren Parametern </td></tr><tr class="highlight"><td> <code class="notranslate">-n</code>, <code class="notranslate">--config KONFIGURATIONSNAME</code> </td><td> Verwendung eine Vorgabe-Konfiguration, wenn vorhanden </td></tr><tr><td> <code class="notranslate">-v</code>, <code class="notranslate">--version</code> </td><td> Ausgabe der Version und Infos zum Autor </td></tr><tr class="highlight"><td> <code class="notranslate">-b,</code> <code class="notranslate">--verbose</code> </td><td> "gesprächige" Ausgabe, liefert mehr Informationen zu den Prozessen </td></tr></table><div class="section_3"><h4 id="Beispiele">Beispiele<a class="headerlink" href="#Beispiele">¶</a></h4><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">pct-scanner-script --search
pct-scanner-script --lineart --outdir /home/[benutzer] --source ADF --resolution 600 --device net:192.168.1.1:hpaio:/usb/Officejet_J5700_series?serial=CN7BOCF3HP04TC
pct-scanner-script --resume 11 --lineart --outdir /home/[benutzer] --source ADF --resolution 600 --device net:192.168.1.1:hpaio:/usb/Officejet_J5700_series?serial=CN7BOCF3HP04TC </pre></div></div><p>Verwendung eines Konfigurationsskriptes:</p><div class="bash"><div class="contents"><pre class="notranslate">pct-scanner-script --lineart
pct-scanner-script --config config0
pct-scanner-script --clean --config config0 --nopdf --verbose </pre></div></div></div></div></div><div class="section_1"><h2 id="Konfiguration">Konfiguration<a class="headerlink" href="#Konfiguration">¶</a></h2><p>
Die Konfiguration des Skriptes erfolgt über die Dateien <strong>/etc/pct-scanner-script.conf</strong> sowie die Steuerungsdateien im Verzeichnis <strong>/etc/pct-scanner-script.conf.d/</strong>. Darin können die meisten Optionen eingestellt werden, sodass das Programm nicht mit den Parametern gestartet werden muss. Dabei kann man mit der Option <code class="notranslate">--config</code> auch bestimmte Abschnitte der Konfigurationsdatei auswählen; <code class="notranslate">--lineart --config MeineKonfiguration</code> würde die Befehle aus Sektion <code class="notranslate">[lineart-MeineKonfiguration]</code> aus der gewünschten Konfigurationsdatei verwenden. Innerhalb der Optionsdatei kann mit <code class="notranslate">OPEN=COMMAND</code> ein externes Programm zur Weiterverarbeitung aufgerufen werden, also z.B. ein Betrachter, oder auch ein direkter Druckaufruf nach Beendigung des Scans (Beispiele in der Datei <a class="external" href="https://secure.powercraft.nl/svn/packages/trunk/source/pct-scanner-scripts/pct-scanner-scripts-devel/notes" rel="nofollow">notes</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>).</p><p>Die Optionen auf der Kommandozeile überschreiben die in den Konfigurationsdateien; Angaben aus Konfigurationsdateien (in <strong>/etc/pct-scanner-script.conf.d/</strong>) mit höheren Nummern überschreiben diejenigen mit niedrigeren Nummern, nicht aber die auf der Kommandozeile angegebenen.</p><p>Dazu ein Beispiel: der Befehl
</p><div class="bash"><div class="contents"><pre class="notranslate">pct-scanner-script --config lineart1 </pre></div></div><p>ruft die (hier für einen  <a class="internal" href="./scanner/gt68xx.html">gt68xx-Scanner</a> modifizierte) Konfiguration <strong>50configuration</strong>, Sektion <code class="notranslate">[lineart1]</code> in <strong>/etc/pct-scanner-script.conf.d</strong> auf:</p><pre class="notranslate"># pct-scanner-script --config lineart1
[lineart1]
LINEART=1
DEVICE=gt68xx
SOURCE=Flatbed
RESOLUTION=300
OUTDIR=${HOME}
NOPDF=1
OPEN=$(which djview)</pre><p>Das Ergebnis wird gleich in <a class="internal" href="./djview.html">DjView</a> geöffnet.</p><p>Wäre die Datei <strong>60configuration</strong> vorhanden, in der in Sektion <code class="notranslate">[lineart1]</code> eine Auflösung von 150 dpi stünde, würde dieser Wert verwendet werden. Der Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">pct-scanner-script -r 600 --config lineart1 </pre></div></div><p>hätte aber absolute Priorität, und würde statt dessen die Auflösung auf 600 dpi setzen.</p><p>In den Konfigurationsdateien werden in einem Editor<sup><a href="#source-3">[3]</a></sup> die gewünschten Parameter als Zahlenwert <code class="notranslate">1</code> für "Verwenden" nach der Angabe geschaltet (z.B. <code class="notranslate">NOPDF=1</code>); oder als für das Backend verwendbares Kommando (z.B. <code class="notranslate">DEVICE:gt68xx</code>), nähere Informationen liefert die Verwendung der Option <code class="notranslate">--search</code> sowie ein Blick in die mitgelieferten Konfigurationsdateien.</p></div><div class="section_1"><h2 id="Problemloesungen">Problemlösungen<a class="headerlink" href="#Problemloesungen">¶</a></h2><p>
</p></div><div class="section_1"><h2 id="Erstellung-von-Riesen-PDFs">Erstellung von Riesen-PDFs<a class="headerlink" href="#Erstellung-von-Riesen-PDFs">¶</a></h2><p>
Die Größe der erzeugten PDF-Dateien entspricht bei Eingabe von DIN-A4 dem Format RA0 (mehr als ein Quadratmeter!) (siehe Erläuterung in <a class="internal" href="./pdf.html#oversized">PDF</a>). Um die Größe auf das tatsächliche Eingabeformat zurückzuführen, in eine Editor mit Root-Rechten die Datei <strong>/usr/lib/pct-scanner-scripts/scanner-script-process</strong> direkt <span class="underline">vor</span> den Vorkommen von</p><pre class="notranslate">        $STRACE convert "$sourcefile" ...</pre><p>die Zeile</p><pre class="notranslate">        SIZE=`identify "$sourcefile" | cut -d " " -f 3 `</pre><p>einfügen, und in den entsprechenden Zeilen den <code class="notranslate">convert</code>-Befehl nach <code class="notranslate">"$sourcefile"</code> um die Optionen</p><pre class="notranslate">-resize $SIZE -units PixelsPerInch -density 300x300</pre><p>ergänzen. So bleibt die Größe der PDF-Dateien beim Eingangswert/Scangröße; eine <a class="internal" href="./texterkennung.html">Texterkennung</a> ist damit für die Ausgabedateien problemlos möglich.</p><div class="section_2"><h3 id="Nicht-verwendbare-Optionen">Nicht verwendbare Optionen<a class="headerlink" href="#Nicht-verwendbare-Optionen">¶</a></h3><p>
Das Skript verwendet Optionen, die ggf. für das eingesetzte Backend nicht nutzbar sind (z.B. die Option <code class="notranslate">--source</code> für einen <a class="internal" href="./scanner/gt68xx.html">gt68xx-Scanner</a> wie Mustek 1200 UB Plus, die zwar bei der Ausgabe zu <code class="notranslate">--search</code> angezeigt, aber als <code class="notranslate">[inactive]</code> beschrieben wird). Um trotzdem einen derartigen Scanner verwenden zu können, werden in der Datei <strong>/usr/bin/pct-scanner-script</strong> (in einem Editor mit Root-Rechten) alle Vorkommen von <code class="notranslate">--source $SOURCE</code> gelöscht werden, weil sonst der Scanprozess nicht startet, und das Programm mit der Meldung</p><pre class="notranslate">scanadf: attempted to set inactive option source</pre><p>abgebrochen wird. Die nächste Version soll aber eine <code class="notranslate">--nosource</code>-Option enthalten, die das Problem umgeht.</p></div><div class="section_2"><h3 id="DjVu-Dateien-werden-nicht-erstellt">DjVu-Dateien werden nicht erstellt<a class="headerlink" href="#DjVu-Dateien-werden-nicht-erstellt">¶</a></h3><p>
Ggf. gibt es Probleme, DjVu-Dateien zu erstellen. Die im <strong>pct-scanner-script-process</strong> eingesetzte scanadf-System-Variable <code class="notranslate">$SCAN_RES</code> (siehe <a class="internal" href="./man.html">Manpage</a> für scanadf) wird aus nicht geklärten Gründen immer als "0" ausgegeben, was dazu führt, dass eine DjVu-Datei mit dieser Auflösung erstellt werden soll, was schlichtweg nicht möglich ist. Abhilfe schafft hier der (laut Entwickler allerdings nicht ganz saubere) Umweg, die <code class="notranslate">$RESOLUTION</code>-Variable aus dem Hauptskript zu exportieren. Dazu integriert man</p><pre class="notranslate">    [ ! -z "$RESOLUTION" ] &amp;&amp; export RESOLUTION="$RESOLUTION"</pre><p>in der <code class="notranslate">function setup_environment()</code>-Sektion im <strong>pct-scanner-script</strong> (ca. Zeile 300). Außerdem müssen in <strong>pct-scanner-script-process</strong> die <code class="notranslate">$SCAN_RES</code>-Variablen durch <code class="notranslate">$RESOLUTION</code> ersetzt werden, am einfachsten in einem Editor mit einer Suchen-Ersetzen-Funktion zu bewerkstelligen. Alternative Lösung: Im process-Skript die Auflösung manuell festlegen, was aber zu einer starren Auflösungsgröße führt. Das Problem soll aber in der nächsten offiziellen Version gelöst werden.</p><p>Bei weiteren Verweisen auf unbrauchbare Optionen können diese in den Skripten (Editor mit Root-Rechten verwenden) auskommentiert/gelöscht werden. Hinweise auf derartige Probleme liefert die Verwendung der <code class="notranslate">--verbose</code>-Option, mit deren Ausgabe man ggf. Inkompatibilitäten erkennen kann, oder der Aufruf mit</p><div class="bash"><div class="contents"><pre class="notranslate">bash -x pct-scanner-script [Optionen] </pre></div></div><p>der eine noch umfangreichere Ausgabe zu den vorgenommenen Schritten aufzeigt.</p><p>Die Log-Datei <strong>status.log</strong>, die im Verzeichnis <strong>scanscript/output/</strong> angelegt wird, ist leider in diesen Fällen nicht sonderlich hilfreich, da dort nur ausgegeben wird, was passiert sein sollte, nicht was wirklich passiert ist.</p></div></div><div class="section_1"><h2 id="Erweiterte-Moeglichkeiten">Erweiterte Möglichkeiten<a class="headerlink" href="#Erweiterte-Moeglichkeiten">¶</a></h2><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Diese Beschreibungen beziehen sich auf die Version aus dem <a class="external" href="https://secure.powercraft.nl/svn/packages/trunk/source/pct-scanner-scripts/pct-scanner-scripts-devel/" rel="nofollow">aktuellen Entwicklungszweig</a> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/>, sie sollten z.T. mit der nächsten offiziellen Veröffentlichung in das Programm integriert werden. Die Entwicklung stagniert aber, bis auf kleinere bug-Fixes hat sich seit Erstellung des Artikels (Sommer 2010) nicht viel getan, allerdings wurde die Möglichkeit aufgenommen worden, eine benutzerspezifische Konfigurationsdatei <strong>~./.pct-scanner-script.conf</strong> zu verwenden, die Vorrang vor den anderen Konfigurationseinstellungen hat. Außerdem wird auf die Erstellung einzelner <strong>.jpg</strong>-Dateien verzichtet (neue Pakete ggf. irgendwann auf <a class="external" href="http://packages.debian.org/search?lang=de&amp;searchon=sourcenames&amp;keywords=pct-scanner-scripts" rel="nofollow">debian.org</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>, allerdings ist auch im September 2015 noch nichts passiert, die Entwicklung ist wohl eingestellt).</p><p>Beziehen kann man die Version mit dem Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">svn checkout https://secure.powercraft.nl/svn/packages/trunk/source/pct-scanner-scripts/pct-scanner-scripts-devel/ pct-scanner-script-x.x.x </pre></div></div><p>Ein Paket lässt sich daraus allerdings nicht ohne Weiteres erstellen, die entsprechenden Dateien können aber mit Root-Rechten<sup><a href="#source-4">[4]</a></sup> in die jeweiligen Verzeichnisse kopiert werden.
</p></div></div><div class="section_2"><h3 id="Groesse-Schwellwert-Gamma-Wert">Größe, Schwellwert, Gamma-Wert<a class="headerlink" href="#Groesse-Schwellwert-Gamma-Wert">¶</a></h3><p>
Für die Entwicklerversion ist die Möglichkeit vorgesehen, auch andere Optionen, die das verwendete Backend bietet, einsetzen zu können. Sowohl in <strong>/etc/pct-scanner-script.conf</strong> als auch in den Dateien im Unterverzeichnis <strong>/etc/pct-scanner-script.conf.d/</strong> kann eine Zeile in der Art</p><pre class="notranslate">OPTIONS="-l 5.000mm -t 5.000mm -x 200.000mm -y 275.000mm --threshold 163 --gamma-value 1.75"</pre><p>verwendet werden, die auch weitere für das jeweilige <a class="internal" href="./sane.html#Backend">Backend</a> verwendbare Optionen beinhalten kann (Option <code class="notranslate">--search</code> listet die Möglichkeiten auf). Dabei können die als <code class="notranslate">[inactive]</code> gekennzeichneten Optionen meist nicht verwendet werden; das ist z.T. auch vom verwendeten Scan-Modus abhängig. Das Beispiel dient zur Anpassung eines Schwarz-Weiß-Scans, für den die Optionen <code class="notranslate">--treshold 163</code> und <code class="notranslate">--gamma-value 1.75</code> verwendet werden, außerdem beginnt der Scanbereich erst jeweils 5 mm von oben und links versetzt, die Breite ist auf 200, die Länge auf 275 mm begrenzt (<code class="notranslate">-l 5.000mm -t 5.000mm -x 200.000mm -y 275.000mm</code>).</p></div><div class="section_2"><h3 id="Encodierung-mit-didjvu-Texterkennung-mit-ocrodjvu">Encodierung mit didjvu, Texterkennung mit ocrodjvu<a class="headerlink" href="#Encodierung-mit-didjvu-Texterkennung-mit-ocrodjvu">¶</a></h3><p>
Das Skript lässt auch den Einsatz des sehr leistungsfähigen DjVu-Encoders <a class="internal" href="./didjvu.html">didjvu</a> zu, außerdem kann mit <a class="internal" href="./ocrodjvu.html">ocrodjvu</a> auch gleich eine Texterkennung für die DjVu-Dateien erfolgen. Ggf. liefern die aktuellen Versionen dieser Programme bessere Ergebnisse als die in den Quellen vorliegenden Versionen, die oft veraltet sind. Hinweise dazu in den entsprechenden Wiki-Artikeln.</p><div class="section_3"><h4 id="Farbscans">Farbscans<a class="headerlink" href="#Farbscans">¶</a></h4><p>
Für den Aufruf des Encoder und der Texterkennung aus <strong>pct-scanner-script-process</strong> wird in der Sektion <code class="notranslate">function process_color()</code> zur Encodierung eines Farbscans in eine DjVu-Datei die Zeile</p><pre class="notranslate">        c44 -dpi $RESOLUTION "$sourcefile" $OUTDIR/scanscript/processing/document-single-page-$filename.djvu $EXEC_VERBOSE</pre><p>durch</p><pre class="notranslate">       didjvu encode -o $OUTDIR/scanscript/processing/document-single-page-noocr.djvu --dpi $RESOLUTION "$sourcefile" $EXEC_VERBOSE
       ocrodjvu --engine tesseract --language deu -o $OUTDIR/scanscript/processing/document-single-page-$filename.djvu $OUTDIR/scanscript/processing/document-single-page-noocr.djvu $EXEC_VERBOSE</pre><p>ersetzt. Da ocrodjvu keine Ausgabedatei mit dem Namen der Eingabedatei erstellen kann, wird zunächst mit didjvu eine temporäre "noocr"-Datei erstellt, die dann mit der Texterkennung wieder in die weiterzuverarbeitende Datei <strong>document-single-page-$filename.djvu</strong> umgewandelt wird.</p></div><div class="section_3"><h4 id="Graycsale-Scans">Graycsale-Scans<a class="headerlink" href="#Graycsale-Scans">¶</a></h4><p>
Grayscale-Scans lassen sich ebenfalls mit didjvu unter der Verwendung der Option <code class="notranslate">--fg-crcb none</code> und <code class="notranslate">--bg-crcb none</code> erstellen, der Aufruf erfolgt entsprechend durch Ersetzung der Zeile</p><pre class="notranslate">        c44 -crcbnone -dpi $RESOLUTION "$sourcefile" $OUTDIR/scanscript/processing/document-single-page-$filename.djvu $EXEC_VERBOSE</pre><p>in der Sektion <code class="notranslate">function process_grayscale()</code> durch</p><pre class="notranslate">       didjvu encode -o $OUTDIR/scanscript/processing/document-single-page-noocr.djvu --dpi $RESOLUTION --fg-crcb none --bg-crcb none "$sourcefile" $EXEC_VERBOSE
       ocrodjvu --engine tesseract --language deu -o $OUTDIR/scanscript/processing/document-single-page-$filename.djvu $OUTDIR/scanscript/processing/document-single-page-noocr.djvu $EXEC_VERBOSE</pre></div><div class="section_3"><h4 id="Schwarz-Weiss-Scans">Schwarz-Weiß-Scans<a class="headerlink" href="#Schwarz-Weiss-Scans">¶</a></h4><p>
Für "lineart" liefert der standardmäßig verwendete Encoder <a class="external" href="http://djvu.sourceforge.net/doc/man/cjb2.html" rel="nofollow">cjb2</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ggf. bessere Ergebnisse als didjvu (geringere Dateigrößen, da keine Hintergrundebene erstellt wird), entsprechend wird in <code class="notranslate">function process_lineart()</code> die Zeile</p><pre class="notranslate">        cjb2 -verbose -clean -dpi $RESOLUTION "$sourcefile" $OUTDIR/scanscript/processing/document-single-page-$filename".djvu $EXEC_VERBOSE</pre><p>durch die Zeilen</p><pre class="notranslate">        cjb2 -verbose -clean -dpi $RESOLUTION "$sourcefile" $OUTDIR/scanscript/processing/document-single-page-noocr.djvu $EXEC_VERBOSE
        ocrodjvu --engine tesseract --language deu -o $OUTDIR/scanscript/processing/document-single-page-$filename.djvu $OUTDIR/scanscript/processing/document-single-page-noocr.djvu $EXEC_VERBOSE</pre><p>ersetzt. Der Aufruf kann natürlich jeweils um weitere Optionen für die Programme ergänzt werden (siehe die jeweilige <a class="internal" href="./man.html">Manpage</a>).</p></div></div><div class="section_2"><h3 id="ocrodjvu-Einstellungen">ocrodjvu-Einstellungen<a class="headerlink" href="#ocrodjvu-Einstellungen">¶</a></h3><p>
Die Einstellungen für ocrodjvu zu dem gewünschten OCR-Engine, Sprache etc. findet man in den <a class="internal" href="./ocrodjvu.html#Optionen">ocrodjvu-Optionen</a>, in den Beispielen wird <a class="internal" href="./tesseract-ocr.html">tesseract-ocr</a> für deutschsprachige Texte verwendet. Allerdings kann es hier allgemein zu Problemen kommen, wenn die Auflösung zu hoch gewählt wurde, empfohlen werden daher höchstens 300 dpi, die als Werte in <strong>pct-scanner-sript.conf</strong> oder eigenen Konfigurationedateien verwendet werden sollten. Ggf. hilft es, hinter die Optionen für ocrodjvu ein <code class="notranslate">&lt;/dev/null</code> zu verwenden. Wenn höhere Auflösungen verwendet werden (im Skript wird standardmäßig <code class="notranslate">600 dpi</code> eingesetzt) kann die Verarbeitung der einzelnen Seiten sehr lange dauern! Unter Cuneiform kommt es dabei recht häufig zu Abstürzen, tesseract liefert momentan verlässlicher gute Ergebnisse.</p><p>Falls eine Texterkennung nicht gewünscht ist, kann die ocrodjvu-Zeile natürlich weggelassen werden, dann muss aber in den Encoderzeilen jeweils <code class="notranslate">noocr</code> wieder durch <code class="notranslate">$filename</code> ersetzt werden, damit die Weiterverarbeitung gewährleistet ist.</p><p>Auch die Verwendung von ocrodjvu ist als Funktion für die nächste Version geplant.</p></div></div><div class="section_1"><h2 id="Alternativen">Alternativen<a class="headerlink" href="#Alternativen">¶</a></h2><p>
</p><ul><li><p>Mit <a class="internal" href="./gscan2pdf.html">gscan2pdf</a> können auch mehrseitige DjVu-Dateien angelegt werden, allerdings ist eine <a class="internal" href="./djvu.html#Aufbau-des-Formats">Segmentierung</a> nicht möglich. </p></li><li><p><a class="internal" href="./xsane2djvu.html">xsane2djvu</a> ist ein Wrapper, um direkt aus <a class="internal" href="./xsane.html">XSane</a> heraus <a class="internal" href="./djvu.html">DjVu</a>-Dateien mit einer integrierten Texterkennung zu erstellen. Es können direkt ein- oder mehrseitigen Dokumente erstellt werden, zur Encodierung können verschiedene Programme genutzt werden.</p></li><li><p><a class="internal" href="./djvubind.html">djvubind</a> ist ein Kommandozeilenprogramm, mit dem aus <strong>.tiff</strong>-Vorlagen DjVu-Dokumente (z.B. als E-Books) erstellt werden können. Das Programm kann allerdings momentan nur schwarz-weiße <strong>.tiff-</strong>Dateien verarbeiten (z.B. <a class="internal" href="./scan_tailor.html">Scan Tailor</a>-Ausgaben); die Texterkennung erfolgt standardmäßig mit <a class="internal" href="./tesseract-ocr.html">tesseract-ocr</a>.</p></li></ul><p>
</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="https://secure.powercraft.nl/svn/packages/" rel="nofollow">Datei-Verzeichnis</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> auf powercraft.nl</p></li><li><p><a class="external" href="http://www.tuxcrafter.net/pages/projects.html" rel="nofollow">Entwickler-Seite</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./pct-scanner-script/a/revision/938410.html">Diese Revision</a> wurde am 28. April 2017 19:21 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./pct-scanner-script.html">pct-scanner-script</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>