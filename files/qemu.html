<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>QEMU › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./qemu.html">QEMU</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/QEMU">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./qemu/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./qemu/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./qemu/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./qemu/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./qemu/a/backlinks.html">QEMU</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./paketquellen_freischalten.html">Bearbeiten von Paketquellen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="./kernelmodule.html">Umgang mit Kernelmodulen (Treibern)</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Grafische-Oberflaechen-fuer-QEMU">Grafische Oberflächen für QEMU
</a></li><li><a class="crosslink" href="#Geschwindigkeit">Geschwindigkeit
</a></li><li><a class="crosslink" href="#Installation-eines-Betriebssystems">Installation eines Betriebssystems
</a></li><li><a class="crosslink" href="#QEMU-Umgebung">QEMU Umgebung
</a></li><li><a class="crosslink" href="#Zugriff-vom-Gast-auf-bestehende-Daten">Zugriff vom Gast auf bestehende Daten
</a></li><li><a class="crosslink" href="#Optionen">Optionen
</a></li><li><a class="crosslink" href="#Problembehebung">Problembehebung
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><a class="external" href="http://wiki.qemu.org/Main_Page" rel="nofollow">QEMU</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ist ein freier <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Emulator">Emulator</a> und Virtualisierer. Mit ihm ist es möglich, ein anderes Betriebssystem in einem Fenster zu booten und so zu benutzen, als sei es normal gestartet worden. Eine grundsätzliche Einführung zu diesem Thema findet man im Artikel <a class="internal" href="./virtualisierung.html">Virtualisierung</a>.</p><p>Einige Merkmale von QEMU sind:
</p><ul><li><p>läuft in Kombination mit <a class="internal" href="./kvm.html">KVM</a> fast mit nativer Geschwindigkeit</p></li><li><p>kann bis zu vier virtuelle Festplatten einbinden</p></li><li><p>man benötigt für den Gast keine Gasterweiterungen (wie bei <a class="internal" href="./virtualbox.html">VirtualBox</a> oder <a class="internal" href="./vmware_player.html">VMware</a> notwendig)</p></li><li><p>sehr viele <a class="crosslink" href="#Optionen">Optionen</a> zum Starten des Gastsystems, wie z.B. Multiprozessor-Emulation auch bei Einprozessor-Systemen</p></li><li><p>kann auch andere Prozessorarchitekturen wie z.B. PowerPC oder ARM emulieren</p></li></ul><p>
QEMU ist auch für <a class="external" href="http://www.nongnu.org/qemu/download.html" rel="nofollow">andere Plattformen</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> wie Windows und MacOS erhältlich.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
QEMU wird in Kombination mit <a class="internal" href="./kvm.html">KVM</a> „geliefert“ und kann durch folgendes Paket installiert <sup><a href="#source-1">[1]</a></sup> werden:
</p><ul><li><p><strong>qemu-system-x86</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install qemu-system-x86 </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install qemu-system-x86 </pre></div></div><p>
</p></div></div><p>Dieses Paket enthält allerdings „nur“ die Emulation von x86-Maschinen (32- und 64-Bit). Möchte man andere Hardware-Plattformen emulieren, so braucht man zusätzlich das Paket</p><ul><li><p><strong>qemu-system</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install qemu-system </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install qemu-system </pre></div></div><p>
</p></div></div><div class="section_2"><h3 id="Symlink">Symlink<a class="headerlink" href="#Symlink">¶</a></h3><p>
Danach muss noch eine Verknüpfung auf die gewünschte Standard-Systemarchitektur (typischerweise <code class="notranslate">i386</code> bzw. <code class="notranslate">x86_64</code>) gesetzt werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ln -s /usr/bin/qemu-system-ARCHITEKTUR /usr/bin/qemu </pre></div></div><p><code class="notranslate">ARCHITEKTUR</code> ist dabei durch die gewünschte Prozessorarchitektur zu ersetzen.</p></div><div class="section_2"><h3 id="Qemu-User-Mode">Qemu User Mode<a class="headerlink" href="#Qemu-User-Mode">¶</a></h3><p>
Wenn man nur den Qemu User Mode installieren möchte:</p><ul><li><p><strong>qemu-user</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install qemu-user </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install qemu-user </pre></div></div><p>
</p></div></div></div></div><div class="section_1"><h2 id="Grafische-Oberflaechen-fuer-QEMU">Grafische Oberflächen für QEMU<a class="headerlink" href="#Grafische-Oberflaechen-fuer-QEMU">¶</a></h2><p>
Dieser Artikel beschreibt die Einrichtung und Startparameter für QEMU ausschließlich über ein Terminal<sup><a href="#source-3">[3]</a></sup>. Der Vollständigkeit halber seien hier aber noch einige grafische Programme für QEMU aufgeführt, die den Einstieg in QEMU wesentlich erleichtern. Auch wenn sie für spezielle Desktopumgebungen entworfen wurden, sind sie natürlich auch unter anderen Umgebungen lauffähig.</p><ul><li><p><a class="internal" href="./gnome.html">GNOME</a>:</p><ul><li><p><strong>qemu-launcher</strong> (<em>universe</em>)</p></li><li><p><strong>qemulator</strong> (<em>universe</em>)</p></li><li><p><strong>qemuctl</strong> (<em>universe</em>)</p></li><li><p><strong><a class="internal" href="./virt-manager.html">virt-manager</a></strong></p></li></ul></li><li><p><a class="internal" href="./kde.html">KDE</a>:</p><ul><li><p><strong>qtemu</strong> (<em>universe</em>)</p></li><li><p><strong><a class="internal" href="./aqemu.html">AQEMU</a></strong></p></li></ul></li><li><p><a class="internal" href="./shell.html">Shell</a>:</p><ul><li><p><strong><a class="internal" href="./virsh.html">virsh</a></strong> bietet auch einige Funktionen des QEMU-Monitors</p></li></ul></li></ul><p>
<img alt="Wiki/Icons/develop.png" class="image-right" src="./_/1caeb2bee62b980b85b2da65576d19deb6eaf303.png"/>
</p></div><div class="section_1"><h2 id="Geschwindigkeit">Geschwindigkeit<a class="headerlink" href="#Geschwindigkeit">¶</a></h2><p>
QEMU kommuniziert direkt mit dem Kernel, so dass das Gastsystem annähernd mit der Geschwindigkeit des Wirtssystems läuft. Wie man herausfindet, ob der Prozessor diese Hardwarevirtualisierung unterstützt, steht im Artikel <a class="internal" href="./kvm.html">KVM</a>.</p><p><img alt="Wiki/Icons/download_manager.png" class="image-right" src="./_/ad539367426142518e9aab5e9745113476cf0598.png"/>
</p></div><div class="section_1"><h2 id="Installation-eines-Betriebssystems">Installation eines Betriebssystems<a class="headerlink" href="#Installation-eines-Betriebssystems">¶</a></h2><p>
Alle folgenden Befehle werden in einem Terminal <sup><a href="#source-3">[3]</a></sup> eingegeben.</p><div class="section_2"><h3 id="Virtuelle-Festplatte-einrichten">Virtuelle Festplatte einrichten<a class="headerlink" href="#Virtuelle-Festplatte-einrichten">¶</a></h3><p>
Um ein Betriebssystem in einer Virtuellen Maschine installieren zu können, muss als erstes der Container (eine virtuelle Festplatte, angelegt als Datei) erstellt werden:</p><div class="bash"><div class="contents"><pre class="notranslate">qemu-img create BOOTSYSTEM.img 10G </pre></div></div><p>Anstatt <code class="notranslate">BOOTSYSTEM</code> sollte man einen geeigneten Namen wählen. In diesem Fall erstellt man einen 10 GB großen Container im raw-Format. Man kann die Größe des Containers auch in MiB angeben, also bezogen auf das obige Beispiel <code class="notranslate">10240M</code> (10 * 1024) statt <code class="notranslate">10G</code>.</p><p>Je nachdem, in welcher Art von <a class="internal" href="./dateisystem.html">Dateisystem</a> dieser Container liegt, wächst die Datei ggf. erst dann dynamisch an, wenn tatsächlich Daten darin gespeichert werden. Damit ist sie anfangs 0 Bytes groß, auch wenn die meisten Programme (z.B.) 10 GiB zeigen. Dies ist z.B. bei einer typischen Ubuntu-Installation auf einem <a class="internal" href="./ext.html">ext</a>-Dateisystem der Fall (bezogen auf das Host-System; der Gast in der VM ist egal). Möchte man solche <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Sparse-Datei">Sparse-Dateien</a> auch auf älteren Dateisystemen nutzen oder andere Verbesserungen nutzen, so kann man ein anderes Format wie <code class="notranslate">qed</code> oder <code class="notranslate">qcow2</code> angeben:</p><div class="bash"><div class="contents"><pre class="notranslate">qemu-img create -f qcow2 BOOTSYSTEM.img 10G </pre></div></div><p>Eine Übersicht über die möglichen Formate bietet <a class="external" href="http://qemu-buch.de/de/index.php/QEMU-KVM-Buch/_Speichermedien/_Image-Formate" rel="nofollow">qemu-buch.de</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>.</p></div><div class="section_2"><h3 id="Installation-von-CD-oder-CD-Image">Installation von CD oder CD-Image<a class="headerlink" href="#Installation-von-CD-oder-CD-Image">¶</a></h3><p>
Wenn der Container erstellt ist, kann man nun ein Betriebssystem darin installieren. Es sollte dabei von vornherein bedacht werden, welche Arbeitsspeicher-Anforderungen (RAM) das zu installierende System hat. Entsprechend wird QEMU mit der Option <code class="notranslate">-m SPEICHERGRÖSSE</code> gestartet. Richtwerte können der Tabelle in <a class="internal" href="./virtualisierung.html#Gastsystem">Gastsystem</a> entnommen werden.</p><p>Start des Installationsvorgangs mittels CD-ROM-Laufwerk, es wird dem Gastsystem 256 MiB Speicher zur Verfügung gestellt:
</p><div class="bash"><div class="contents"><pre class="notranslate">qemu-system-ARCHITEKTUR -enable-kvm -hda BOOTSYSTEM.img -cdrom /dev/cdrom -boot d -m 256 </pre></div></div><p>Das <code class="notranslate">-boot d</code> bedeutet, dass QEMU von CD-ROM booten soll. Wenn die Installations-CD als ISO-Image vorliegt, geht das analog dazu: 
</p><div class="bash"><div class="contents"><pre class="notranslate">qemu-system-ARCHITEKTUR -enable-kvm -hda BOOTSYSTEM.img -cdrom DATEINAME.iso -boot d -m 256 </pre></div></div><p>
Bei ARCHITEKTUR ist die festgelegte Standard-Architektur einzugefügen (für AMD64 lautet der Befehl beispielsweise <code class="notranslate">qemu-system-x86_64</code>)</p><p>Nach erfolgreicher Installation muss die Option <code class="notranslate">-boot d</code> weggelassen werden, damit anstatt vom CD-ROM-Laufwerk von der virtuellen Festplatte im Container gebootet wird. Ein ISO-Abbild (Abbild-Datei) beispielsweise einer Installations-DVD von Windows kann man mit einem <a class="internal" href="./brennprogramme.html">Brennprogramm</a> erstellen. QEMU kommt mit ISO-Images besser zurecht als mit DVDs.</p></div><div class="section_2"><h3 id="Overlay-Images-anlegen">Overlay-Images anlegen<a class="headerlink" href="#Overlay-Images-anlegen">¶</a></h3><p>
QEMU bietet die Möglichkeit, mit Overlay-Dateien (übersetzt: "Überlagerungsdateien") zu arbeiten. Dabei werden neue und geänderte Daten nicht in die Original Imagedatei sondern in die Overlay-Datei geschrieben. Das original Image bleibt unverändert. Diese ist z.B. dann praktisch, wenn man eine "saubere" Grundinstallation eines Systems hat und "Experimente" mit dem Overlay-Image gemacht werden, welche sich nicht auf das Original auswirken. Ebenso kann man mehrere Overlays für ein Image anlegen.</p><p>Um ein Overlay-Image anzulegen dient folgender Befehl:</p><div class="bash"><div class="contents"><pre class="notranslate">qemu-img create -b mein_image.img -f qcow2 mein_overlay.ovl </pre></div></div><p>Der Name der Overlay-Datei kann dabei beliebig sein und muss nichts mit den Namen des Images zu tun haben. Danach kann man die virtuelle Maschine normal booten, nur dass anstatt des Images die Overlay-Datei als Festplatte angegeben werden muss, also z.B.</p><div class="bash"><div class="contents"><pre class="notranslate">qemu -hda mein_overlay.ovl </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die Overlay-Dateien sind "Delta-Images", d.h. in der Overlay-Datei werden Änderungen relativ zum Original Image gespeichert. Ändert man das zugrunde liegende Image, nachdem eine Overlay-Datei angelegt wurde, funktioniert die Overlay-Datei nicht mehr!
</p></div></div><p>Es ist auch möglich, Änderungen der Overlay-Datei ins zugrunde liegende Image zu schreiben. Informationen hierzu findet man im <a class="external" href="http://qemu-buch.de/de/index.php/QEMU-KVM-Buch/_Speichermedien/_Images_anlegen/_Overlay-Images_anlegen" rel="nofollow">QEMU-Handbuch</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>.</p></div><div class="section_2"><h3 id="Festplatten-von-Virtualbox-in-QEMU-nutzen">Festplatten von Virtualbox in QEMU nutzen<a class="headerlink" href="#Festplatten-von-Virtualbox-in-QEMU-nutzen">¶</a></h3><p>
Für den Fall, dass man bereits existierende virtuelle Festplatten im <a class="internal" href="./virtualbox.html">Virtualbox</a>-Format <strong>.vdi</strong> nutzt, kann man diese für QEMU nutzbar machen.</p><div class="bash"><div class="contents"><pre class="notranslate">VBoxManage clonehd /pfad/zur/virtualbox_platte/system.vdi /pfad/zur/kvm_platte/system.img --format raw </pre></div></div><p>
Je nach Größe des Abbildes kann die Konvertierung einige Zeit in Anspruch nehmen. Mehr Informationen über das Nutzen von Images anderer Virtualisierer und Emulatoren findet man im deutschsprachigen <a class="external" href="http://qemu-buch.de/de/index.php/QEMU-KVM-Buch/_Speichermedien/_Festplatten-Images_anderer_Virtualisierungssoftware" rel="nofollow">QEMU-Handbuch</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>.</p><p><img alt="Wiki/Icons/globe.png" class="image-right" src="./_/0e63649076d692ec94a052a853308637d7cf4e42.png"/>
</p></div></div><div class="section_1"><h2 id="QEMU-Umgebung">QEMU Umgebung<a class="headerlink" href="#QEMU-Umgebung">¶</a></h2><p>
Während das Betriebssystem installiert wird, sollte man sich mit der Umgebung von QEMU etwas vertraut machen.</p><div class="section_2"><h3 id="Tastenkombinationen">Tastenkombinationen<a class="headerlink" href="#Tastenkombinationen">¶</a></h3><p>
</p><table><tr><td colspan="2" style="text-align: center; background-color: #E2C890"><strong>Tastenkombination von QEMU</strong></td></tr><tr style="background-color: #F9EAAF"><td><strong>Tasten</strong></td><td><strong>Erklärung</strong></td></tr><tr><td>
<span class="key">Strg</span>  + 
<span class="key">Alt</span> </td><td>Maus aus dem QEMU-Fenster befreien</td></tr><tr><td>
<span class="key">Strg</span>  + 
<span class="key">Alt</span>  + 
<span class="key">2</span> </td><td>vom Gast in den <a class="crosslink" href="#QEMU-Monitor">QEMU-Monitor</a> wechseln</td></tr><tr><td>
<span class="key">Strg</span>  + 
<span class="key">Alt</span>  + 
<span class="key">1</span> </td><td>vom QEMU-Monitor ins Gast-Betriebssystem wechseln</td></tr><tr><td>
<span class="key">Strg</span>  + 
<span class="key">Alt</span>  + 
<span class="key">F</span> </td><td>zwischen Fenster- und Vollbildmodus wechseln</td></tr></table><p>
</p></div><div class="section_2"><h3 id="QEMU-Monitor">QEMU-Monitor<a class="headerlink" href="#QEMU-Monitor">¶</a></h3><p>
Der Monitor von QEMU (manchmal auch QEMU-Konsole genannt) bietet eine Reihe von Möglichkeiten zur Verwaltung und Steuerung der virtuellen Maschine. So kann hierüber auch der Wechsel von CD-ROM-Medien oder Disketten erfolgen.</p><p>Einige davon sind:</p><table><tr><td colspan="2" style="text-align: center; background-color: #E2C890"><strong>Befehle für den QEMU-Monitor</strong></td></tr><tr style="background-color: #F9EAAF"><td><strong>Befehl</strong></td><td><strong>Erklärung</strong></td></tr><tr><td><code class="notranslate">info GERÄT</code></td><td>gibt Infos über das virtuelle Gerät aus; mögliche Geräte sind u.a. <code class="notranslate">block</code> (Festplatte[n], CD-ROM), <code class="notranslate">snapshot</code>, <code class="notranslate">usb</code> und <code class="notranslate">network</code></td></tr><tr><td> <code class="notranslate">change GERÄT GERÄTEDATEI</code> </td><td> Tauscht ein Wechselmedium (CD/DVD, Diskette) aus (siehe: <a class="crosslink" href="#Wechseldatentraeger">Wechseldatenträger</a>) </td></tr><tr><td><code class="notranslate">commit</code></td><td>schreibt einen Snapshot, sofern QEMU mit der Option <code class="notranslate">-snapshot</code> gestartet wurde</td></tr><tr><td><code class="notranslate">screendump DATEI</code></td><td>erstellt ein Bildschirmfoto, wobei das recht ungewöhnliche Dateiformat <strong>ppm</strong> verwendet wird. Beispiel: <code class="notranslate">screendump BILDNAME.ppm</code></td></tr><tr><td><code class="notranslate">sendkey ctrl-alt-f1</code></td><td>sendet die Tastenkombination 
<span class="key">Strg</span>  + 
<span class="key">Alt</span>  + 
<span class="key">F1</span>  an das Gastsystem (ruft in einem Ubuntu-Gast die <a class="internal" href="./terminal.html#Virtuelle-Konsole">virtuelle Konsole</a> auf)</td></tr><tr><td><code class="notranslate">help [befehl]</code></td><td>zeigt eine Hilfe für alle Befehle oder nur für den Befehl <code class="notranslate">befehl</code></td></tr></table><p>
Eine vollständige Übersicht über die Befehle der QEMU-Konsole findet man im <a class="external" href="http://qemu-buch.de/de/index.php/QEMU-KVM-Buch/_Anhang/_QEMU-Monitor" rel="nofollow">QEMU-KVM-Buch</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>.</p><div class="section_3"><h4 id="Wechseldatentraeger">Wechseldatenträger<a class="headerlink" href="#Wechseldatentraeger">¶</a></h4><p>
QEMU kann während der Virtualisierung nicht automatisch feststellen, ob eine CD oder Diskette eingelegt oder gewechselt wurde. Dies wird über den QEMU-Monitor erledigt. Im QEMU-Monitor erkundigt man sich über den Befehl <code class="notranslate">info block</code> zuerst, welche Geräte angeschlossen sind und wie sie heißen:</p><div class="bash"><div class="contents"><pre class="notranslate">info block
ide1-cd0: type=cdrom removable=1 locked=0 file=/dev/cdrom ro=0 drv=host_cdrom encrypted=0
ide0-hd0: type=hd removable=0 file=/PFAD/ZUM/CONTAINER.img ro=0 drv=qcow2 encrypted=0
... </pre></div></div><p>In diesem Beispiel heißt das CD-ROM-Gerät <code class="notranslate">ide1-cd0</code> und die Gerätedatei <strong>/dev/cdrom</strong>. Entsprechend wird QEMU durch die Eingabe von</p><div class="bash"><div class="contents"><pre class="notranslate">change ide1-cd0 /dev/cdrom </pre></div></div><p>mitgeteilt, dass eine CD eingelegt/gewechselt wurde, und man kann mit dem Gastsystem darauf zugreifen. Bei dem Wechsel von Disketten müssen die Optionen entsprechend angepasst werden.</p></div></div><div class="section_2"><h3 id="Netzwerk">Netzwerk<a class="headerlink" href="#Netzwerk">¶</a></h3><p>
</p><div class="section_3"><h4 id="Host">Host<a class="headerlink" href="#Host">¶</a></h4><p>
Der Host ist von einem Gastsystem aus über die IP-Adresse 10.0.2.2 erreichbar.</p></div><div class="section_3"><h4 id="DHCP">DHCP<a class="headerlink" href="#DHCP">¶</a></h4><p>
Hat man sein Netzwerk per <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/DHCP">DHCP</a> konfiguriert, sollten Internet und Netzwerk automatisch funktionieren.</p><p>QEMU legt allerdings für jede VM ein eigenes Netzwerk an. Es werden IP-Adressen aus dem Bereich 10.0.0.0/8 vergeben. Weiterhin befindet sich jede VM standardmäßig in einem eigenen Netz, sodass Anfragen ins Internet wie gewohnt funktionieren, die VMs sich aber weder untereinander sehen, noch mit physischen Geräten im LAN kommunizieren können. Unter Umständen kann es praktikabel sein, die VMs im gleichen Netz zu betreiben, wie die physischen Geräte. So werden dann beispielsweise die virtuellen Maschinen in die gleiche LAN-Infrastruktur und -Adressraum eingebunden wie die physischen Maschinen. Hierzu ist zunächst die Einrichtung einer <a class="internal" href="./netzwerkbrücke.html">Netzwerkbrücke</a> erforderlich. Hierbei ist zu beachten, dass bei der Brücke nicht zwei Netzwerkkarten überbrückt werden (z.B. <em>eth0</em> und <em>wlan0</em>) sondern nur die Netzwerkkarte, die am LAN angebunden ist. In der <strong>/etc/network/interfaces</strong> sind also etwa solche Zeilen einzutragen:</p><pre class="notranslate">auto br0
iface br0 inet static
address 192.168.1.200
network 192.168.1.0
netmask 255.255.255.0
broadcast 192.168.1.255
gateway 192.168.1.1
bridge_ports eth1
bridge_fd 9
bridge_hello 2
bridge_maxage 12
bridge_stp off</pre><p><strong>eth1</strong> ist in diesem Fall die am LAN angeschlossene Schnittstelle. Die Adressen sind entsprechend den Gegebenheiten anzupassen.</p><p>Die Brücke bekommt statisch eine eigene IP-Adresse zugewiesen. Um Konflikte mit der automatischen Adressvergabe des DHCP-Servers zu vermeiden sollte man hier eine wählen, die sich zwar im gleichen Subnetz befindet, aber außerhalb des erlaubten Adressraums des DHCP-Servers liegt (im o.g. Beispiel vergibt der DHCP-Server nur Adressen von 192.168.1.1 bis 192.168.1.100).</p><p>Zu beachten ist, dass, wenn man einen Host mit grafischer Oberfläche betreibt, die Verwaltung der Netzwerkkarten u.U. dem Network-Applet der GUI obliegt. Das sollte man für den vorliegenden Fall abschalten, in dem man in der <strong>/etc/network/interfaces</strong> die für die am LAN angebundene Schnittstelle zuständigen Zeilen wie folgt anpasst:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span># The primary network interface
auto eth1
iface eth1 inet dhcp
</pre></div>
</td></tr></table></div><p>Im Network-Applet sollte die entsprechende Schnittstelle dann als "wird nicht verwaltet" angezeigt werden.</p><p>Beim Starten der VM verwendet man dann das TUN/TAP interface anstelle dem user mode. Das bewerkstelligt man, in dem man das Start-Argument:</p><pre class="notranslate">-net user (...)</pre><p>durch ein folgendes ersetzt</p><pre class="notranslate">-net tap,vlan=1,script="/etc/qemu-ifup"</pre><p>Das Script sollte bereits an der entsprechenden Stelle vorhanden sein und etwa so aussehen:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/sh</span>

<span class="nv">nic</span><span class="o">=</span><span class="nv">$1</span>

<span class="k">if</span> <span class="o">[</span> -f /etc/default/qemu-kvm <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    . /etc/default/qemu-kvm
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> -z <span class="s2">"</span><span class="nv">$TAPBR</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nv">switch</span><span class="o">=</span><span class="k">$(</span>ip route list <span class="p">|</span> awk <span class="s1">'/^default / { print $5 }'</span><span class="k">)</span>
    <span class="k">if</span> <span class="o">[</span> ! -d <span class="s2">"/sys/class/net/</span><span class="si">${</span><span class="nv">switch</span><span class="si">}</span><span class="s2">/bridge"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        <span class="nv">switch</span><span class="o">=</span>virbr0
    <span class="k">fi</span>
<span class="k">else</span>
    <span class="nv">switch</span><span class="o">=</span><span class="nv">$TAPBR</span>
<span class="k">fi</span>

ifconfig <span class="nv">$nic</span> <span class="m">0</span>.0.0.0 up
brctl addif <span class="si">${</span><span class="nv">switch</span><span class="si">}</span> <span class="nv">$nic</span>
</pre></div>
</td></tr></table></div><p>Der Vollständigkeit halber hier noch mal ein komplettes Start-Script für eine Maschine:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="c1"># This script created by AQEMU</span>
/usr/bin/qemu-system-x86_64  -smp <span class="m">2</span> -cpu phenom -soundhw es1370 -k de -enable-kvm -m <span class="m">3500</span> -localtime -hda <span class="s2">"/media/raid_a/windows_7_x86.img"</span> -boot <span class="nv">once</span><span class="o">=</span>c,menu<span class="o">=</span>off -net nic,vlan<span class="o">=</span><span class="m">1</span>,macaddr<span class="o">=</span><span class="m">00</span>:c9:29:b8:7c:ee -net tap,vlan<span class="o">=</span><span class="m">1</span>,script<span class="o">=</span><span class="s2">"/etc/qemu-ifup"</span> -name <span class="s2">"Windows 7 x86"</span> <span class="nv">$*</span>
</pre></div>
</td></tr></table></div><p>Jetzt sollte die VM beim starten wie eine physische Maschine im LAN eingebunden werden und von überall her erreichbar sein; umgekehrt sollten auch alle Netzwerkressourcen aus dem LAN der VM zur Verfügung stehen.</p></div><div class="section_3"><h4 id="statisch-IP-Adressvergabe">statisch IP-Adressvergabe<a class="headerlink" href="#statisch-IP-Adressvergabe">¶</a></h4><p>
Wer sein Netzwerk per statischer IP-Adressierung konfiguriert hat, muss ein paar kleinere Einstellungen vornehmen, um dem Gast den Internetzugang zu ermöglichen.</p><p>Als erstes wird die Netzwerkkonfiguration des Wirtssystems angepasst. Dazu muss man eine Netzwerkbrücke erstellen. Näheres ist unter <a class="internal" href="./netzwerkbrücke.html">Netzwerkbrücke</a> zu finden.</p><p>Nachdem die Netzwerkbrücke eingerichtet ist, startet man die VMs mit folgenden zusätzlichen Parametern:</p><div class="bash"><div class="contents"><pre class="notranslate">qemu -hda image.img -boot c -net nic,macaddr=00:00:00:00:00:00 -net tap </pre></div></div><p>Bei <code class="notranslate">macaddr</code> muss eine gültige beliebige MAC-Adresse angegeben werden. Jede VM sollte mit einer anderen MAC-Adresse gestartet werden, da es sonst zu Problemen kommt. Jetzt kann man in den verschiedenen VMs ganz normal wie bei einem normalen Rechner das Netzwerk einrichten.</p><p><img alt="Wiki/Icons/home.png" class="image-right" src="./_/6591064e6227c93b7f7852c6629f6c70f7d4b448.png"/>
</p></div></div></div><div class="section_1"><h2 id="Zugriff-vom-Gast-auf-bestehende-Daten">Zugriff vom Gast auf bestehende Daten<a class="headerlink" href="#Zugriff-vom-Gast-auf-bestehende-Daten">¶</a></h2><p>
QEMU kann, bis auf eine <a class="crosslink" href="#Datenaustauschpartition">Ausnahme</a>, nicht ohne weiteres auf Partitionen oder Verzeichnisse des Wirtssystems zugreifen. Um die Daten des Wirtssystems lesen zu können, bedarf es ein wenig Vorbereitung. Jede Methode hat ihre Vor- und Nachteile.</p><div class="section_2"><h3 id="Einzelne-Dateien">Einzelne Dateien<a class="headerlink" href="#Einzelne-Dateien">¶</a></h3><p>
Um einzelne Dateien auszutauschen, kann man die Tools <a class="internal" href="./tar.html">tar</a> und <code class="notranslate">nc</code>, sowie die Fähigkeit der <a class="internal" href="./bash.html">Bash</a> zum Netzwerkzugriff nutzen, sofern diese in Host und Gastsystem zur Verfügung stehen (z.B. beides Linux).</p><p>Dazu führt man jeweils einen Befehl in einem Terminal <sup><a href="#source-3">[3]</a></sup> aus:</p><div class="bash"><div class="contents"><pre class="notranslate"># Host sendet an Gast
tar c DATEIEN | nc -v -l 8080            # auf dem Host
tar x &lt; /dev/tcp/10.0.2.2/8080           # auf dem Gast

# Gast sendet an Host
nc -v -l 8080 | tar x                    # auf dem Host
tar c DATEIEN &gt; /dev/tcp/10.0.2.2/8080   # auf dem Gast </pre></div></div></div><div class="section_2"><h3 id="Partitions-Abbild">Partitions-Abbild<a class="headerlink" href="#Partitions-Abbild">¶</a></h3><p>
Per <a class="internal" href="./dd.html">dd</a> können ganze Partitionen in eine <strong>.img</strong>-Datei kopiert und als zweite Festplatte in QEMU eingebunden werden:</p><div class="bash"><div class="contents"><pre class="notranslate">qemu -hda BOOTSYSTEM.img -hdb PFAD/ZUR/PARTITIONSKOPIE.img -m 256 </pre></div></div></div><div class="section_2"><h3 id="Ausgesuchte-Daten-in-einer-Iso-Datei">Ausgesuchte Daten in einer Iso-Datei<a class="headerlink" href="#Ausgesuchte-Daten-in-einer-Iso-Datei">¶</a></h3><p>
Mit einem <a class="internal" href="./brennprogramme.html">Brennprogramm</a> können Verzeichnisse und Daten von verschiedenen Partitionen in einer ISO-Datei abgespeichert werden. Diese lässt sich als CD-ROM in QEMU einbinden:</p><div class="bash"><div class="contents"><pre class="notranslate">qemu -hda BOOTSYSTEM.img -cdrom PFAD/ZUR/ISODATEI.iso -m 256 </pre></div></div></div><div class="section_2"><h3 id="Datenaustauschpartition">Datenaustauschpartition<a class="headerlink" href="#Datenaustauschpartition">¶</a></h3><p>
Es ist auch möglich, QEMU direkt mit der Angabe einer Partition zu starten. Diese Partition unterliegt allerdings gewissen Einschränkungen:
</p><ol class="arabic"><li><p>Die Größe der Partition beträgt maximal 504 MiB</p></li><li><p>Sie muss mit Fat16 formatiert sein</p></li></ol><p>Eingebunden wird sie beim Start von QEMU mit:</p><div class="bash"><div class="contents"><pre class="notranslate">qemu -hda BOOTSYSTEM.img -hdb fat:EINHÄNGEPUNKT -m 256 </pre></div></div><p>Für einen (experimentellen) schreibenden Zugriff siehe <strong>/usr/share/doc/qemu/qemu-doc.html</strong>, Abschnitt "Virtual FAT disk images" (<a class="external" href="http://qemu.weilnetz.de/qemu-doc.html#disk_005fimages_005ffat_005fimages" rel="nofollow">Online-Version</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>) und <a class="external" href="https://en.wikibooks.org/wiki/QEMU/Devices/Storage#Virtual_FAT_filesystem_.28VVFAT.29" rel="nofollow">Wikibooks</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p><p>Zwei Probleme können dabei auftreten (Wirt: Ubuntu 8.04, Gast: Ubuntu 8.04):</p><ol class="arabic"><li><p>Änderung an den Dateien im Wirtssystem wurden erst nach einem <code class="notranslate">unmount</code> und einem erneuten <code class="notranslate">mount</code> sichtbar. </p></li><li><p>Es trat der Fehler "exception Emask 0x0 SAct 0x0 SErr 0x0 action 0x2" auf und führte zum Einfrieren des Gastsystems. Die Lösung ist in <a class="external" href="https://bugs.launchpad.net/ubuntu/+source/linux-source-2.6.20/+bug/104581/comments/25" rel="nofollow">Kommentar 25</a> von <a class="interwiki interwiki-bug" href="https://launchpad.net/bugs/104581">Bugreport #104581</a> beschrieben. Danach muss die Platte aber mit <code class="notranslate">/dev/hdb1</code> eingebunden werden.</p></li></ol><p>
</p></div><div class="section_2"><h3 id="Per-Samba">Per Samba<a class="headerlink" href="#Per-Samba">¶</a></h3><p>
Ist im Host-System ein <a class="internal" href="./samba.html">Sambaserver</a> installiert, kann man mit QEMU auch auf dessen Freigaben per Netzwerk zugreifen:
</p><ol class="arabic"><li><p>Freigaben im Host-System einrichten. Sie müssen mit Lese- und Schreibrecht versehen sein.</p></li><li><p>Beim Aufruf von QEMU muss zusätzlich die Option <code class="notranslate">-net nic,vlan=0 -net user,smb=/path/to/local/dir</code> verwendet werden:</p><div class="bash"><div class="contents"><pre class="notranslate">qemu -hda BOOTSYSTEM.img -m 256 -net nic,vlan=0 -net user,smb=/path/to/local/dir/ </pre></div></div></li><li><p>Der Zugriff vom Gast erfolgt über die URL <code class="notranslate">10.0.2.2</code>:</p><ol class="arabic"><li><p>Windows: In der Adressleiste (z.B. vom Arbeitsplatz) einfach die URL <code class="notranslate">\\10.0.2.2</code> eingeben</p></li><li><p>Ubuntu: In der Adressleiste (z.B. von <a class="internal" href="./nautilus.html">Nautilus</a> oder <a class="internal" href="./dolphin.html">Dolphin</a>) einfach die URL <code class="notranslate">smb://10.0.2.2</code> eingeben</p></li></ol></li></ol><div style="clear: both"><div class="contents"></div></div><p>
</p><table style="float: left; margin: 10px 5px; border: none"><tr><td style="text-align: center; background-color: #E2C889; border: none"> <img alt="samba_win.png" class="image-default" src="./_/343fe9d5f430cce9c2bad44e954182f6a9b471b7.png"/> </td></tr><tr><td style="text-align: center; background-color: #F9EAAF; border: none"> Windows</td></tr></table><div><div class="contents"></div></div><p>
</p><table style="float: left; margin: 10px 5px; border: none"><tr><td style="text-align: center; background-color: #E2C889; border: none"> <img alt="samba_ubuntu.png" class="image-default" src="./_/85d306e4c90afde22b9f23fbcd4f3c88d94fb382.png"/> </td></tr><tr><td style="text-align: center; background-color: #F9EAAF; border: none"> Ubuntu</td></tr></table><div><div class="contents"></div></div><div style="clear: both"><div class="contents"></div></div><p><img alt="Wiki/Icons/settings.png" class="image-right" src="./_/1d753a0c1aac7e227c08fed298522e0b82eadc9f.png"/>
</p></div></div><div class="section_1"><h2 id="Optionen">Optionen<a class="headerlink" href="#Optionen">¶</a></h2><p>
</p><div class="section_2"><h3 id="Startoptionen">Startoptionen<a class="headerlink" href="#Startoptionen">¶</a></h3><p>
Unter den zahlreichen Startoptionen können besonders folgende nützlich sein: 
</p><table><tr><td colspan="2" style="text-align: center; background-color: #E2C890"> <strong>Optionen von QEMU</strong> </td></tr><tr style="background-color: #F9EAAF"><td> <strong>Option</strong></td><td><strong>Erklärung </strong> </td></tr><tr><td> <code class="notranslate">-hda Datei</code> </td><td> gibt das Image der primären Festplatte an. Weitere Platten können mit <code class="notranslate">-hdb</code>, <code class="notranslate">-hdc</code> und <code class="notranslate">-hdd</code> angegeben werden </td></tr><tr><td> <code class="notranslate">-fda Datei</code> </td><td> gibt Diskettenlaufwerke an. Man kann das reale Diskettenlaufwerk verwenden, wenn man <code class="notranslate">/dev/fd0</code> als Dateiname angibt </td></tr><tr><td> <code class="notranslate">-cdrom Datei</code> </td><td> gibt das zu verwendende CD-Laufwerk an. Es kann ein Gerät wie <strong>/dev/cdrom</strong> oder eine Imagedatei angegeben werden </td></tr><tr><td> <code class="notranslate">-daemonize</code> </td><td> löst den Qemu-Prozess vom Terminal; das Terminal kann nach dem Start ohne Beeinträchtigung geschlossen werden </td></tr><tr><td> <code class="notranslate">-boot Laufwerksbuchstabe</code> </td><td> gibt an, von welchem Laufwerk gestartet werden soll. <code class="notranslate">a</code> steht für Diskette, <code class="notranslate">c</code> für Festplatte, <code class="notranslate">d</code> für CD-ROM und <code class="notranslate">n</code> für einen Netzwerk-Boot </td></tr><tr><td> <code class="notranslate">-m Speichergröße</code> </td><td> gibt den zu verwendenden Arbeitsspeicher in MiB an. Vorbereitung dazu s.o. </td></tr><tr><td> <code class="notranslate">-usb</code></td><td> USB wird mit emuliert bzw. die Schnittstellen des Wirts stehen zur Verfügung. Mit <code class="notranslate">-usb -usbdevice tablet</code> kann der Mauszeiger sowohl im Gast- als auch im Host-System genutzt werden, ohne ständig mit 
<span class="key">Strg</span>  + 
<span class="key">Alt</span>  umschalten zu müssen </td></tr><tr><td> <code class="notranslate">-vga std</code> </td><td> es wird eine generische VGA Karte emuliert; diese Option wird nur benötigt, wenn die Auflösung &gt;= 1280x1024 sein soll / muss </td></tr><tr><td> <code class="notranslate">-soundhw KARTE</code> </td><td> es wird die Soundkarte <code class="notranslate">KARTE</code> emuliert; zur Auswahl stehen: <code class="notranslate">sb16</code>, <code class="notranslate">es1370</code> und <code class="notranslate">all</code></td></tr><tr><td> <code class="notranslate">-smp X</code> </td><td> es werden X CPU in der virtuellen Maschine genutzt, die Anzahl der virtuellen CPUs kann höher sein als die der realen des Wirts </td></tr><tr><td> <code class="notranslate">-vnc :X </code></td><td>Die Ausgabe des Bildschirms erfolgt per <a class="internal" href="./vnc.html">VNC</a> auf Display <code class="notranslate">X</code> und nicht auf den normalen Bildschirm des Wirts, Details siehe auch <a class="crosslink" href="#QEMU-per-VNC">hier</a></td></tr><tr><td> <code class="notranslate">-snapshot</code> </td><td> Dies bewirkt, dass Änderungen nicht in das Festplattenimage geschrieben, sondern in einer temporären Datei gespeichert werden. Erst mit den Tasten 
<span class="key">Strg</span>  + 
<span class="key">Alt</span>  + 
<span class="key">S</span>  oder dem Kommando <strong>commit</strong> in der QEMU-Konsole werden die Änderungen übernommen</td></tr><tr><td> <code class="notranslate">-k XX</code> </td><td> setzt das Tastaturlayout auf den angegebenen Wert <code class="notranslate">XX</code> z.B. <code class="notranslate">-k de</code> für deutsch, <code class="notranslate">-k en</code> für englisch, etc... (Hilfreich bei Problemen mit der Eingabe und Sonderzeichen in Verbindung mit VNC) </td></tr><tr><td> <code class="notranslate">-redir tcp:X::Y</code> </td><td> Leitet die TCP-Verbindung von Port <code class="notranslate">X</code> des Wirtes auf den Port <code class="notranslate">Y</code> des Gastsystems um. D.h. <code class="notranslate">-redir tcp:8008::80</code> macht einen Apache-Server (bei Standardkonfiguration) des Gastsystems unter <code class="notranslate">http://localhost:8008</code> auf dem Wirt sichtbar. Oder <code class="notranslate">-redir tcp:8022::22</code> erlaubt ssh-Zugriff (bei Standardkonfiguration) auf das Gastsystem vom Wirt via <code class="notranslate">ssh -p 8022 localhost</code></td></tr><tr><td> <code class="notranslate">-no-quit</code> </td><td> Deaktiviert die Fenster-Schließen-Option. Verhindert z.B., dass beim Drücken von 
<span class="key">Alt</span>  + 
<span class="key">F4</span>  das Fenster geschlossen und die VM beendet wird, wenn die Kombination eigentlich für den Gast gedacht war (z.B. dort Fenster schließen oder zur 4. <a class="internal" href="./terminal.html#Virtuelle-Konsole">Virtuellen Konsole</a> wechseln). QEMU kann weiterhin mit <code class="notranslate">quit</code> im <a class="crosslink" href="#QEMU-Monitor">QEMU-Monitor</a> beendet werden</td></tr><tr><td> <code class="notranslate">-cpu X</code> </td><td> Legt den Typ der CPU fest, mittels <code class="notranslate">-cpu host</code> kann die Host-CPU definiert werden (funktioniert nur in Verbindung mit aktiviertem KVM: <code class="notranslate">-enable-kvm</code>) </td></tr></table><p>
Dies ist nur ein (sehr) kleiner Ausschnitt der Optionen. Besonders im Bereich der Netzwerk-Optionen gibt es sehr viele Möglichkeiten. Eine vollständige Übersicht findet man in den <a class="internal" href="./man.html">Manpages</a>, in <strong>/usr/share/doc/qemu/qemu-doc.html</strong> oder im <a class="external" href="http://wiki.qemu.org/Qemu-doc.html" rel="nofollow">QEMU-Wiki</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p></div><div class="section_2"><h3 id="Portforwarding-z-B-SSH">Portforwarding (z.B. SSH)<a class="headerlink" href="#Portforwarding-z-B-SSH">¶</a></h3><p>
Wie unter den <a class="crosslink" href="#Startoptionen">Startoptionen</a> aufgeführt, kann man Dienste vom Gast auf dem Host erreichen. Die alte Syntax wird in Zukunft wegfallen und wurde bereits parallel durch folgende ersetzt:
</p><div class="bash"><div class="contents"><pre class="notranslate">qemu [weitere Optionen] -hostfwd=::2222-10.0.2.20:22 </pre></div></div><p>
In diesem Beispiel wird der Port 22 des Gastes auf den Port 2222 des Hosts weitergeleitet, um den Gast vom Host mit
</p><div class="bash"><div class="contents"><pre class="notranslate">ssh -p 2222 localhost </pre></div></div><p>
erreichen zu können.</p><p>Damit dies richtig funktioniert, muss die Option ggf. in den richtigen Netzwerkkontext eingebettet werden - standardmäßig ist das der sehr einfach zu benutzende, aber vergleichsweise sehr langsame und unflexible Modus <code class="notranslate">user network</code> (Benutzer-Netzwerk):
</p><div class="bash"><div class="contents"><pre class="notranslate">qemu [weitere Optionen] -net nic,macaddr=52:54:00:12:34:56 -net user,hostfwd=::2222-10.0.2.20:22 </pre></div></div><p>
Die MAC-Adresse ist die standardmäßig voreingestellte mit <code class="notranslate">55</code> am Ende, um Eins erhöht, und kann weiter verändert bzw. die <code class="notranslate">56</code> weiter erhöht werden. Jede virtuelle Maschine im Netzwerk muss seine eigene, unverwechselbare MAC haben.</p></div><div class="section_2"><h3 id="Andere-Architekturen-emulieren">Andere Architekturen emulieren<a class="headerlink" href="#Andere-Architekturen-emulieren">¶</a></h3><p>
QEMU ist nicht auf die Virtualisierung / Emulation von x86 Prozessoren beschränkt, es können auch eine Vielzahl von anderen Architekturen emuliert werden. Welche dies aktuell sind kann man <a class="external" href="http://qemu.weilnetz.de/qemu-doc.html#QEMU-System-emulator-for-non-PC-targets" rel="nofollow">hier</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> nachschauen.</p><p>Die allgemeine Syntax ist</p><div class="bash"><div class="contents"><pre class="notranslate">qemu-system-ARCHITEKTUR [OPTIONEN] </pre></div></div><p>wobei <code class="notranslate">ARCHITEKTUR</code> entsprechend ersetzt werden muss.</p></div><div class="section_2"><h3 id="Reine-Prozessemulation">Reine Prozessemulation<a class="headerlink" href="#Reine-Prozessemulation">¶</a></h3><p>
QEMU beherrscht auch die "reine" Prozessemulation, auch "User-Space-Emulation" genannt. D.h. dass anstatt eines kompletten Systems wird "nur" ein einzelnes Programm ("Binary") im Emulations-Modus ausgeführt. Die Prozess-Emulation für ein 32-bit i386 System wird z.B. mit folgendem Befehl aufgerufen:</p><div class="bash"><div class="contents"><pre class="notranslate">qemu-i386 PROGRAMMNAME </pre></div></div><p>Die Emulation funktioniert natürlich nur, wenn das Programm keine weiteren Bibliotheken dynamisch nachlädt.</p><p>Außer der i386-Emulation beherrscht QEMU u.a. auch die Prozessemulation für SPARC, PPC, ARM und einige mehr. Detaillierte Informationen findet man in der <a class="external" href="http://qemu.weilnetz.de/qemu-doc.html#QEMU-User-space-emulator" rel="nofollow">QEMU-Dokumenation</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p></div><div class="section_2"><h3 id="QEMU-per-VNC">QEMU per VNC<a class="headerlink" href="#QEMU-per-VNC">¶</a></h3><p>
Wie weiter oben  bereits erwähnt kann man die virtuelle Maschine auch so starten, dass diese per VNC (und nicht über den lokalen Rechner) erreichbar ist, eben mit der Option <code class="notranslate">-vnc X</code>, wobei <code class="notranslate">X</code> das Display ist. Startet man QEMU also z.B. über</p><div class="bash"><div class="contents"><pre class="notranslate">qemu -hda image.img -vnc :1 </pre></div></div><p>so ist die virtuelle Maschine danach über einen <a class="internal" href="./vnc.html#Der-Client">VNC-Client</a> via Port 5901 (5900 + Displaynummer) erreichbar.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die Verbindung läuft per Voreinstellung komplett unverschlüsselt und ohne Authentifizierung. Dies ist aber auch möglich; Details hierzu findet man an <a class="external" href="http://qemu.weilnetz.de/qemu-doc.html#vnc_005fsecurity" rel="nofollow">dieser Stelle</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> auf der QEMU-Dokumentation.
</p></div></div><p>
Qemu unterstützt nativ auch über VNC keine Zwischenablage, das Projekt verweist dafür auf <code class="notranslate">spice</code> anstatt VNC. Dazu benötigt man die Pakete <code class="notranslate">spice-client-gtk</code> auf dem Hostsystem sowie <code class="notranslate">spice-vdagent</code> im Gastsystem. Weitere Konfigurationen von letzterem sind nötig und führten bisher beim Autor nicht zum Erfolg (bitte ergänzen, Ansatz unter Problemlösungen vorhanden).</p></div><div class="section_2"><h3 id="QEMU-Festplattenimages-unter-Linux-einbinden">QEMU-Festplattenimages unter Linux einbinden<a class="headerlink" href="#QEMU-Festplattenimages-unter-Linux-einbinden">¶</a></h3><p>
Das Einbinden von QEMU-Images wird in der <a class="external" href="http://calamari.reverse-dns.net:980/cgi-bin/moin.cgi/FrequentlyAskedQuestions#head-fad4784282921e388578dc410a32230898cf844b" rel="nofollow">FAQ</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> (toter Link) mit einem Link auf <a class="external" href="http://wiki.xensource.com/xenwiki/DmUserspace" rel="nofollow">DmUserspace</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> beantwortet. Damit lassen sich jedoch nur qcow-Partitionen mounten.</p><p>Informationen findet man z.B. unter <a class="external" href="http://qemu-buch.de/de/index.php/QEMU-KVM-Buch/_Speichermedien/_QEMU-Images_im_Host-System_einbinden" rel="nofollow">qemu-buch.de</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>.</p><div class="section_3"><h4 id="Alternativ-ueber-NBD-mounten">Alternativ über NBD mounten<a class="headerlink" href="#Alternativ-ueber-NBD-mounten">¶</a></h4><p>
Qemu bietet die Möglichkeit, die Images über das Netzwerk anzubieten, dass lässt sich aber auch prima missbrauchen um sie auf dem eigenen Rechner einzubinden. Aber Achtung: Das Image darf dabei nicht von Qemu oder einem anderen Programm in Benutzung sein.</p><p>Zuerst muss NBD geladen werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo modprobe nbd </pre></div></div><p>Sollte man sehr viele Partitionen im Image haben kann es nötig sein zusätzlich die Anzahl der Partitionen zu erhöhen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo modprobe nbd max_part=63 </pre></div></div><p>Jetzt wird das Image in eine Art Loopdevice gemapped. <strong>pfad/zu/qemu.img</strong> muss man natürlich entsprechend anpassen und sollte <strong>/dev/nbd0</strong> schon vergeben sein kann man auch diese Zahl anpassen.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo qemu-nbd --connect=/dev/nbd0 /kompletter/pfad/zu/qemu.img </pre></div></div><p>Mit folgendem Befehl kann man sich die Partitionen anzeigen lassen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo fdisk -l /dev/nbd0 </pre></div></div><p>Und so mountet man das Image:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount /dev/nbd0p1 /mnt </pre></div></div><p>Wenn man fertig ist sollte man das Image wieder freigeben. Zahlen gegebenenfalls anpassen.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo umount /dev/nbd0p1
sudo qemu-nbd -d /dev/nbd0 </pre></div></div></div></div><div class="section_2"><h3 id="USB-Geraete-durchreichen">USB Geräte durchreichen<a class="headerlink" href="#USB-Geraete-durchreichen">¶</a></h3><p>
Qemu ist in der Lage USB Geräte des Wirts zum Gast durchzureichen. Damit USB Unterstützung grundsätzlich funktionieren kann, muss die Startoption <code class="notranslate">-usb</code> angegeben werden. Es gibt zahlreiche Möglichkeiten ein USB Gerät an das Gastsystem durchzureichen. Dabei sind die folgenden zwei Methoden besonders praktikabel:</p><ol class="arabic"><li><p>Angabe von "Vendor-" und "Product-ID" des betreffenden USB Geräts</p></li><li><p>Angabe von USB-Bus und Port des Wirts, an dem man beabsichtigt das USB Gerät anzuschließen</p></li></ol><p>
</p><div class="section_3"><h4 id="1-Methode">1. Methode<a class="headerlink" href="#1-Methode">¶</a></h4><p>
Die "Vendor-" und "Product-ID" mit</p><div class="bash"><div class="contents"><pre class="notranslate">lsusb </pre></div></div><p>
ermitteln. Die Ausgabe enthält z.B eine Zeile wie folgt:</p><pre class="notranslate">Bus 002 Device 026: ID 090c:1000 Silicon Motion, Inc. - Taiwan (formerly Feiya Technology Corp.) 64MB QDI U2 DISK</pre><p>
Dieser USB-Stick hat die "Vendor-ID" <code class="notranslate">090c</code> und "Product-ID" <code class="notranslate">1000</code>. Die Syntax für die entsprechende Startoption lautet:</p><div class="bash"><div class="contents"><pre class="notranslate">qemu [OPTIONEN] -usb -usbdevice host:&lt;vendor_id&gt;:&lt;product_id&gt; </pre></div></div><p>
Im Qemu-Monitor macht man das mit:</p><div class="bash"><div class="contents"><pre class="notranslate">usb_add host:&lt;vendor_id&gt;:&lt;product_id&gt; </pre></div></div><p>
Wenn alles gut gegangen ist, sollte sich das USB Gerät nun im Gast anmelden. Leider gibt es aber auch exotischere USB Geräte die sich so nicht zur Mitarbeit bewegen lassen. Unter Umständen wird die "Vendor-" und "Product-ID" nicht korrekt an das Gastsystem weitergereicht. In einem Windows XP Gast z.B. macht sich dieses Problem als "Unbekanntes Gerät" bemerkbar.</p></div><div class="section_3"><h4 id="2-Methode">2. Methode<a class="headerlink" href="#2-Methode">¶</a></h4><p>
Verweigert ein USB Gerät die Mitarbeit oder möchte man prinzipiell einen ausgewählten USB-Port an einen Gast weiterreichen, dann kann man folgende Methode ausprobieren. Nach dem Anstecken kann mit:</p><div class="bash"><div class="contents"><pre class="notranslate">dmesg | tail -n 20 </pre></div></div><p>
der USB-Bus und Port des betreffenden Geräts ermittelt werden. Der interessante Teil der Ausgabe sieht dann z.B. so aus:</p><pre class="notranslate">[29383.460263] usb 6-1: new full-speed USB device number 14 using uhci_hcd
[29383.622414] usb 6-1: New USB device found, idVendor=10c4, idProduct=8044
[29383.622427] usb 6-1: New USB device strings: Mfr=1, Product=2, SerialNumber=3
[29383.622436] usb 6-1: Product: USB Debug Adapter
[29383.622444] usb 6-1: Manufacturer: Silicon Laboratories
[29383.622450] usb 6-1: SerialNumber: EC30000D370
[29385.340305] usb 6-1: reset full-speed USB device number 14 using uhci_hcd
[29385.688125] usb 6-1: reset full-speed USB device number 14 using uhci_hcd</pre><p>
In diesem Fall hängt das Gerät also an USB-Bus 6 Port 1. Die Syntax für die entsprechende Startoption lautet:</p><div class="bash"><div class="contents"><pre class="notranslate">qemu [OPTIONEN] -usb -device usb-host,bus=usb-bus.0,hostbus=&lt;bus&gt;,hostport=&lt;port&gt; </pre></div></div><p>
Dabei ist <code class="notranslate">bus</code> die soeben ermittelte USB-Bus Adresse und <code class="notranslate">port</code> der entsprechende USB-Port. Im Qemu-Monitor geht das so:</p><div class="bash"><div class="contents"><pre class="notranslate">device_add usb-host,bus=usb-bus.0,hostbus=&lt;bus&gt;,hostport=&lt;port&gt; </pre></div></div><p>
Weiterführende Informationen dazu findet man im <a class="external" href="http://www.kraxel.org/cgit/qemu/tree/docs/usb2.txt" rel="nofollow">USB 2.0 Quick Start</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> Dokument.</p><p><img alt="Wiki/Icons/hint.png" class="image-right" src="./_/373498fdc2029677a28c73a7dbfd03875da129fa.png"/>
</p></div></div></div><div class="section_1"><h2 id="Problembehebung">Problembehebung<a class="headerlink" href="#Problembehebung">¶</a></h2><p>
<a class="crosslink anchor" href="#shm_mount" id="shm_mount"></a>
</p><div class="section_2"><h3 id="Virtuelle-Maschine-bekommt-nicht-genug-RAM">Virtuelle Maschine bekommt nicht genug RAM<a class="headerlink" href="#Virtuelle-Maschine-bekommt-nicht-genug-RAM">¶</a></h3><p>
Startet man QEMU mit der Option <code class="notranslate">-m XXX</code>, aber die virtuelle Maschine bekommt trotzdem nicht genug Speicher, ist vielleicht das virtuelle Dateisystem unter <strong>/dev/shm</strong> bzw. ab <a class="internal" href="./oneiric.html">Ubuntu 11.10</a> <strong>/run/shm</strong> zu klein. Dann kann man in der <a class="internal" href="./fstab.html">/etc/fstab</a> folgende Ergänzung vornehmen (Verzeichnis ggfs. anpassen) <sup><a href="#source-4">[4]</a></sup>:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="c1"># /dev/shm Vergrößern für QEMU</span>
none            /dev/shm        tmpfs   defaults,size<span class="o">=</span>528M
</pre></div>
</td></tr></table></div><p>
Hier steht nun "size=528M" für 528 MiB. Dieser Wert muss ggf. angepasst werden und sollte etwas größer sein, als der tatsächlich für den Gast benötigte RAM, da unter <strong>/dev/shm</strong> noch weitere Daten abgelegt werden. Ohne neu booten zu müssen, kann man das tmpfs gleich neu einbinden <sup><a href="#source-3">[3]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount -o remount /dev/shm </pre></div></div><p>
Wenn man nun QEMU startet, kann man mit dem Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">df | egrep 'shm|File' </pre></div></div><p>
überprüfen, wie viel des virtuellen RAM genutzt wird.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Man sollte darauf achten, dass man QEMU nicht mehr RAM zuweist als dem Wirt-Rechner, da QEMU dann instabil laufen könnte. Außerdem sollte man dem Wirt-System genügend RAM lassen, dass es noch flüssig läuft. Die genauen Systemanforderungen kann man den Release Notes von Ubuntu und seinen Derivaten entnehmen. Die Untergrenze für RAM liegt bei 128-512 MiB.
</p></div></div></div><div class="section_2"><h3 id="gnome-terminal-im-Ubuntu-Gast-hat-Grafikfehler-Streifen">gnome-terminal im Ubuntu-Gast hat Grafikfehler (Streifen)<a class="headerlink" href="#gnome-terminal-im-Ubuntu-Gast-hat-Grafikfehler-Streifen">¶</a></h3><p>
Der unter Ubuntu als Host vorinstallierte <code class="notranslate">vmware</code>-Treiber schafft Abhilfe:
</p><div class="bash"><div class="contents"><pre class="notranslate">... -vga vmware ... </pre></div></div></div><div class="section_2"><h3 id="ping-funktioniert-auf-dem-Gast-nach-Installation-nicht">ping funktioniert auf dem Gast nach Installation nicht<a class="headerlink" href="#ping-funktioniert-auf-dem-Gast-nach-Installation-nicht">¶</a></h3><p>
Qemu startet einen Gast standardmäßig im Modus <a class="external" href="https://en.wikibooks.org/wiki/QEMU/Networking#User_mode_networking" rel="nofollow"><code class="notranslate">user network</code></a>, welches keinen <code class="notranslate">ping</code> unterstützt.</p><p>Eine Alternative zu <code class="notranslate">user network</code> mit <code class="notranslate">TUN/TAP interface</code> wird im Abschnitt <a class="internal" href="./qemu.html#Netzwerk">Netzwerk</a> erklärt.</p><p>Alternativ zu <code class="notranslate">ping</code> kann man andere Tools zu verwenden, um auf dem Gast nach der Installation zu prüfen, ob Internetverbindung von Gast mit dem weltweiten Internet hergestellt wurde. Ein alternativer Befehl wäre:</p><div class="bash"><div class="contents"><pre class="notranslate">wget -O - fsf.org 2&gt;&amp;1|grep free|wc </pre></div></div><p>wobei die Ausgabe dann so oder ähnlich aussehen sollte:
</p><pre class="notranslate">27     269    2980</pre></div><div class="section_2"><h3 id="Ubuntu-ist-extrem-langsam">Ubuntu ist extrem langsam<a class="headerlink" href="#Ubuntu-ist-extrem-langsam">¶</a></h3><p>
Grafische Effekte brauchen ab Ubuntu 12.10 eine Grafikkarte mit 3D-Beschleunigung. Eine sehr schnelle Alternative ist mit dem Paket <code class="notranslate">lubuntu-desktop</code> (<a class="internal" href="./lubuntu.html">Lubuntu</a>) erreichbar. Falls es Ubuntu sein soll, kann man versuchen, in <a class="internal" href="./ccsm.html">CCSM</a> einige grafische Effekte abzustellen sowie für ein allgemein flotteres Arbeiten die Auflösung des Gastes in den Systemeinstellungen herabzusetzen.</p><p>Desweiteren beschleunigt <code class="notranslate">spice</code> die Grafikausgabe erheblich, läuft aber eventuell nur unter Ubuntu als Gast frei von Darstellungsfehlern:</p><p>Installieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install spice-client-gtk </pre></div></div><p>
Qemu mit <code class="notranslate">spice</code>-Passwort starten:
</p><div class="bash"><div class="contents"><pre class="notranslate">qemu -spice port=1511,password=123 ... </pre></div></div><p>
<code class="notranslate">spicy</code> starten (grafisch) und <code class="notranslate">localhost</code> auf Port <code class="notranslate">1511</code> eingeben, das Passwort wird nach <em>Verbinden</em> abgefragt:
</p><div class="bash"><div class="contents"><pre class="notranslate">spicy </pre></div></div></div><div class="section_2"><h3 id="Virtuelle-Festplatte-ist-voll">Virtuelle Festplatte ist voll<a class="headerlink" href="#Virtuelle-Festplatte-ist-voll">¶</a></h3><p>
Das Festplattenimage kann in zwei Schritten vergrößert werden. Zunächst wird die Imagedatei, die auf der realen Festplatte des Hosts liegt, vergrößert, z.B. um 10 GB:</p><div class="bash"><div class="contents"><pre class="notranslate">qemu-img resize Pfad/zum/Image.img +10GB </pre></div></div><p>
Nun muss noch die Partition der virtuellen Festplatte vergrößert werden. Die geschieht wie die Imagevergrößerung einer echten Festplatte. Hierzu lädt man sich am Besten ein Iso von gparted <a class="external" href="http://gparted.sourceforge.net/download.php" rel="nofollow">herunter</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>. Anschließend startet man die virtuelle Maschine vom Image aus, so wie man einen echten Rechner von einer CD aus starten würde:</p><div class="bash"><div class="contents"><pre class="notranslate">qemu -hda Pfad/zum/Image.img -boot d -cdrom Pfad/zum/iso/gparted-live-0.14.0-1.iso -m 256 </pre></div></div><p>
Nun wählt man zuerst die Sprache aus und wählt dann Option <em>"(1)"</em>, den Xserver starten. Jetzt lässt sich die Größe der Partition bequem grafisch an die neue virtuelle Festplattengröße anpassen. Zum Starten muss lediglich das Icon von gparted angeklickt werden.</p></div><div class="section_2"><h3 id="Die-Maus-und-oder-die-Tastatur-funktioniert-nicht">Die Maus und/oder die Tastatur funktioniert nicht<a class="headerlink" href="#Die-Maus-und-oder-die-Tastatur-funktioniert-nicht">¶</a></h3><p>
Wenn es sich um ein USB-Gerät handelt, empfiehlt es sich, folgende zwei Optionen zu verwenden:</p><pre class="notranslate">-usb -usbdevice tablet</pre></div><div class="section_2"><h3 id="Mauszeiger-ist-nicht-sichtbar">Mauszeiger ist nicht sichtbar<a class="headerlink" href="#Mauszeiger-ist-nicht-sichtbar">¶</a></h3><p>
Beim Ausprobieren von einer Ubuntu Live-DVD als Gast kann es vorkommen, dass der Mauszeiger zwar funktiniert aber im Gast System nur nicht sichtbar ist. Mögliche Lösung: im Gast System ein Terminal starten den Mauszeiger darüber führen. Der Mauszeiger ist nun sichtbar, das Terminal kann geschlossen werden. (Quelle: <a class="external" href="https://bugs.launchpad.net/ubuntu/+source/qemu/+bug/1285508" rel="nofollow" title="https://bugs.launchpad.net/ubuntu/+source/qemu/+bug/1285508">https://bugs.launchpad.net/ubuntu/+source/qemu/+bug/1285508</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>)</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://www.linuxforen.de/forums/showthread.php?t=141201" rel="nofollow">Anleitung auf Linuxforen.de</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Eine umfangreiche Einführung </p></li><li><p><a class="external" href="http://qemu.weilnetz.de/qemu-doc.html" rel="nofollow">QEMU User-Dokumentation</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Die offizielle Dokumentation; auch unter <strong>/usr/share/doc/qemu/qemu-doc.html</strong></p></li><li><p><a class="external" href="http://qemu-buch.de" rel="nofollow">QEMU-Buch</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Sehr gute Anleitung</p></li><li><p><a class="external" href="http://bochs.sourceforge.net/" rel="nofollow">Bochs</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Ein weiterer freier Plattform-Emulator</p></li><li><p><a class="external" href="http://www.reddit.com/r/archlinux/comments/1fg3y9/guide_to_running_windows_7_in_qemu/" rel="nofollow">Guide to running Windows 7 in QEMU</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Anleitung aus 2013 für Arch Linux. Leicht verständlich und knapp, funktioniert genauso gut unter Ubuntu</p></li><li><p><a class="external" href="http://wiki.openmoko.org/wiki/OpenMoko_under_QEMU" rel="nofollow">Anleitung im OpenMoko-Wiki für QEMU</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Das Betriebssystem <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/OpenMoko">OpenMoko</a> unter QEMU</p></li><li><p><a class="interwiki interwiki-ubuntu_doc" href="https://help.ubuntu.com/community/WindowsXPUnderQemuHowTo">Windows XP under QEMU HowTo</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Dokumentation von Ubuntu.com</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./qemu/a/revision/940747.html">Diese Revision</a> wurde am 9. Mai 2017 00:45 von <a href="https://ubuntuusers.de/user/Shakesbier/">Shakesbier</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./qemu.html">QEMU</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>