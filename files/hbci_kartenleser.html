<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>HBCI_Kartenleser › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./hbci_kartenleser.html">HBCI Kartenleser</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/HBCI_Kartenleser">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./hbci_kartenleser/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./hbci_kartenleser/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./hbci_kartenleser/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./hbci_kartenleser/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./hbci_kartenleser/a/backlinks.html">HBCI Kartenleser</a></h1>
<div id="page"><div class="box improvable"><h3 class="box improvable">Ausbaufähige Anleitung</h3><div class="contents"><p>
Dieser Anleitung fehlen noch einige Informationen. Wenn Du etwas
verbessern kannst, dann editiere den Beitrag, um die Qualität
des Wikis noch weiter zu verbessern.
</p><hr/><p><strong>Anmerkung:</strong> Der Artikel müsste für die Verwendung mit aktuellen Kartenlesern überarbeitet werden, da einige der genannten Geräte nur noch von historischer Bedeutung sind. Außerdem sind die Installationsangaben zu den benötigten Paketen und zum Chipcard Daemon verwirrend.
</p></div></div><p>
</p><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./paketquellen_freischalten.html">Bearbeiten von Paketquellen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./editor.html">Ein Editor öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="./programme_kompilieren.html">Pakete aus dem Quellcode erstellen</a> </p></li><li><p><a class="crosslink anchor" href="#source-6" id="source-6"></a> <a class="internal" href="./paketinstallation_deb.html">Manuelle Installation einzelner Pakete</a> </p></li><li><p><a class="crosslink anchor" href="#source-7" id="source-7"></a> <a class="internal" href="./packprogramme.html">Archive entpacken</a> </p></li><li><p><a class="crosslink anchor" href="#source-8" id="source-8"></a> <a class="internal" href="./benutzer_und_gruppen.html">Benutzer einer Gruppe zuweisen</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Getestete-Kartenleser">Getestete Kartenleser
</a></li><li><a class="crosslink" href="#Grundinstallation">Grundinstallation
</a></li><li><a class="crosslink" href="#Optionale-Programme">Optionale Programme
</a></li><li><a class="crosslink" href="#Chipcardserver">Chipcardserver
</a></li><li><a class="crosslink" href="#libchipcard-3-4">libchipcard 3/4
</a></li><li><a class="crosslink" href="#PC-SC-Treiber">PC/SC-Treiber
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Finanzverwaltung/gnucash_logo.png" class="image-left" src="./_/85c42cb8d5e7142517d2dc0f4be6f165aa4f08c3.png"/>
<a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Homebanking_Computer_Interface">HBCI</a> (Homebanking Computer Interface), inzwischen auch als <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Financial_Transaction_Services">FinTS</a> bekannt, ist ein offener Standard für den Bereich Electronic Banking und Kundenselbstbedienung und gehört derzeit zu den sichersten Verfahren für <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Electronic_Banking">Online-Banking</a>. Dazu benötigt man einen speziellen Kartenleser für die von den Banken ausgegebenen HBCI-Karten. Diese Karten haben die Größe einer EC-Karte.</p><p>Die Bibliothek <a class="external" href="http://www.aquamaniac.de/sites/libchipcard/" rel="nofollow">libchipcard</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> stellt die Kommunikation zwischen Kartenleser und Homebanking-Anwendung her. Obwohl libchipcard so konzipiert ist, dass Kartenleser automatisch erkannt und eingerichtet werden, gibt es in der Praxis immer wieder Probleme und damit Handlungsbedarf, um die drei Komponenten (HBCI-Karte, Kartenleser und Software) zur Zusammenarbeit zu bewegen.</p><p><a class="internal" href="./hibiscus.html">Hibiscus</a> und die kommerziellen Programme <a class="external" href="http://www.matrica.de/produkte/produktmpx.html" rel="nofollow">Moneyplex</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> sowie <a class="external" href="http://www.starmoney.de/index.php?id=starmoney" rel="nofollow">Starmoney</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> (unter Linux mittels <a class="internal" href="./wine.html">Wine</a> nutzbar) benutzen die <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Kartenleseger%C3%A4t#Software-Schnittstellen">CT-API</a>-Schnittstelle, um Kartenleser anzusprechen und benötigen daher libchipcard nicht.</p><div class="section_1"><h2 id="Getestete-Kartenleser">Getestete Kartenleser<a class="headerlink" href="#Getestete-Kartenleser">¶</a></h2><p>
</p><ul><li><p>ReinerSCT Cyberjack Pinpad Sicherheitsklasse 2 (USB)</p></li><li><p>ReinerSCT Cyberjack Secoder (<a class="external" href="http://www.reiner-sct.com/index.php?option=content&amp;task=view&amp;id=234" rel="nofollow">mit Treibern von ReinerSCT</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>)</p></li><li><p>ReinerSCT RFID Standard (<a class="external" href="http://www.reiner-sct.com/index.php?option=content&amp;task=view&amp;id=243" rel="nofollow">mit Treibern von ReinerSCT</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> und <a class="interwiki interwiki-sourceforge" href="http://sourceforge.net/projects/pcsc-ctapi">CT-API-Wrapper</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>)</p></li><li><p>Towitoko Micro (seriell)</p></li><li><p>Omnikey Cardman 3121 (<a class="crosslink" href="#PC-SC-Treiber">mit PC/SC-Treiber und CT-API-Wrapper</a>) </p></li><li><p>KOBIL EMV CAP - SecOVID Reader III (<a class="crosslink" href="#PC-SC-Treiber">mit PC/SC-Treiber</a> und <a class="external" href="http://www.kobil.com/de/support/treiber.html" rel="nofollow">mit Treibern von Kobil</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>)</p></li><li><p>Cherry ST-1044U (<a class="crosslink" href="#PC-SC-Treiber">mit PC/SC-Treiber</a>)</p></li><li><p>Cherry ST-1144 (<a class="crosslink" href="#PC-SC-Treiber">mit PC/SC-Treiber</a>)</p></li><li><p>Cherry TC 1100 (<a class="crosslink" href="#PC-SC-Treiber">mit PC/SC-Treiber</a>)</p></li><li><p>Cherry TC 1300 (<a class="crosslink" href="#PC-SC-Treiber">mit PC/SC-Treiber</a>)</p></li><li><p>Cherry ST-2000UCZ (<a class="crosslink" href="#PC-SC-Treiber">mit PC/SC-Treiber</a>)</p></li><li><p>Cherry Tastatur KC 1000 SC (<a class="crosslink" href="#PC-SC-Treiber">mit PC/SC-Treiber</a>)</p></li></ul><p>
</p></div><div class="section_1"><h2 id="Grundinstallation">Grundinstallation<a class="headerlink" href="#Grundinstallation">¶</a></h2><p>
Folgende Pakete werden benötigt <sup><a href="#source-1">[1]</a></sup>:</p><ul><li><p><strong>aqbanking-tools</strong> (<em>universe</em> )</p></li><li><p><strong>libaqbanking35</strong> (<em>universe</em> )</p></li><li><p><strong>libaqbanking-data</strong> (<em>universe</em> )</p></li><li><p><strong>libaqofxconnect7</strong> (<em>universe</em> )</p></li><li><p><strong>libaqhbci22</strong> (<em>universe</em>  )</p></li><li><p><strong>libchipcard-data</strong> (<em>universe</em>)</p></li><li><p><strong>libchipcard-tools</strong> (<em>universe</em>)</p></li><li><p><strong>libchipcard-libgwenhywfar60-plugins</strong> (<em>universe</em> )</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install aqbanking-tools libaqbanking35 libaqbanking-data libaqofxconnect7 libaqhbci22 libchipcard-data libchipcard-tools libchipcard-libgwenhywfar60-plugins </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install aqbanking-tools libaqbanking35 libaqbanking-data libaqofxconnect7 libaqhbci22 libchipcard-data libchipcard-tools libchipcard-libgwenhywfar60-plugins </pre></div></div><p>
</p></div></div><p>
Für Ubuntu 14.04 muss das Paket <strong>libaqbanking35</strong> durch eine ältere Version ersetzt werden: 
<strong>libaqbanking34</strong></p><p>Für <a class="internal" href="./kde.html">KDE</a>: </p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install qbankmanager libchipcard-tools libchipcard-libgwenhywfar47-plugins libchipcard-data libchipcardd0 libchipcard-ctapi0 libchipcardc2 libaqbanking20-plugins libaqbanking20-plugins-qt libaqbanking20 aqbanking-tools libqbanking5 libaqbanking-plugins-libgwenhywfar47 libaqbanking-data </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install qbankmanager libchipcard-tools libchipcard-libgwenhywfar47-plugins libchipcard-data libchipcardd0 libchipcard-ctapi0 libchipcardc2 libaqbanking20-plugins libaqbanking20-plugins-qt libaqbanking20 aqbanking-tools libqbanking5 libaqbanking-plugins-libgwenhywfar47 libaqbanking-data </pre></div></div><p>
</p></div></div><p>Die übrigen Abhängigkeiten werden automatisch aufgelöst.</p><div class="section_2"><h3 id="Chipcard-Daemon">Chipcard Daemon<a class="headerlink" href="#Chipcard-Daemon">¶</a></h3><p>
Der chipcard-daemon ist ein Programm, dass im Hintergrund für die richtige Ansprache des Kartenlesers sorgt.
Der chipcard-daemon wird in der Regel als Benutzer der Gruppe <code class="notranslate">chipcard</code> gestartet. Alle Benutzer, die einen HBCI-Leser benutzen wollen, müssen also der Gruppe <code class="notranslate">chipcard</code> angehören. Normaler Weise ist die Gruppe bereits angelegt. Wenn nicht, muss man sie selbst hinzufügen. Dazu benutzt man entweder die grafischen Tools der jeweiligen Oberfläche <sup><a href="#source-8">[8]</a></sup> (Systemverwaltung) oder auf der Kommandozeile:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo addgroup chipcard </pre></div></div><p>Danach fügt man den BENUTZERNAME der Gruppe hinzu</p><div class="bash"><div class="contents"><pre class="notranslate">sudo usermod -aG chipcard BENUTZERNAME </pre></div></div></div></div><div class="section_1"><h2 id="Optionale-Programme">Optionale Programme<a class="headerlink" href="#Optionale-Programme">¶</a></h2><p>
Folgende Programme sind in den Ubuntu-Quellen vorhanden und arbeiten mit <strong>libchipcard2</strong> zusammen. Je nachdem, welches Programm man bevorzugt einsetzen möchte, sollte dieses installiert werden:</p><ul><li><p><a class="internal" href="./gnucash.html">GnuCash</a> - Finanzverwaltung für GNOME </p></li><li><p><a class="internal" href="./kmymoney.html">KMyMoney</a> - Finanzverwaltung für KDE </p></li></ul><p>
</p><div class="section_2"><h3 id="Installation-Towitoko-micro-seriell">Installation Towitoko micro seriell<a class="headerlink" href="#Installation-Towitoko-micro-seriell">¶</a></h3><p>
Die Treiber-Version 2.0.7 befindet sich in den Ubuntu Quellen und arbeitet einwandfrei mit <strong>libchipcard2/3/4</strong> zusammen, folgendes Paket muss installiert <sup><a href="#source-1">[1]</a></sup> werden:</p><ul><li><p><strong>libtowitoko2</strong> (<em>universe</em> )</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install libtowitoko2 </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install libtowitoko2 </pre></div></div><p>
</p></div></div><p>Jetzt muss noch der Libchipcard-Server/-Client eingerichtet werden, damit der Leser erkannt wird. Dazu öffnet man mit einem Editor mit Root-Rechten <sup><a href="#source-4">[4]</a></sup> eine leere Datei und fügt folgende Zeilen ein:</p><pre class="notranslate">enabled="1"

server {
        typ="local"
# Hardy, falls Hardy eingesetzt wird die nächste Zeile auskommentieren, das heißt # entfernen 
#       addr="/var/run/chipcardd.sock"
 }

#
# Settings used for the PC/SC ressource manager
#


  driver {
    char driverType="ctapi"
    char driverName="tow_ctapi"
    char driverDataDir="/usr/lib/chipcard/server/drivers/ctapi"
    char libraryFile="/usr/lib/libtowitoko.so.2.0.0"
  
    vars {
     char WriteBoundary="32" # for Towitoko 2.0.7
     # char WriteBoundary="249" # for Towitoko 2.0.8 (not yet released)
    }
    
    reader {
      char readerType="tow_cdm"
      char readerName="tow1"
      int slots="1"
      char busType="serial"
      int port="0" # 0=COM1, 1=COM2 etc
    }
  } # driver</pre><p>Folgende Argumente überprüfen auf Richtigkeit und gegebenfalls korrigieren:</p><ul><li><p><code class="notranslate">addr=</code>, je nach Ubuntu-Version die entsprechende Zeile mit # aus/-kommentieren </p></li><li><p><code class="notranslate">char libraryFile</code> auf den korrekten Pfad zur Treiber-DLL überprüfen </p></li><li><p><code class="notranslate">int port</code>, COM Port des angeschlossenen Kartenlesers angeben, <code class="notranslate">0=COM1</code>, <code class="notranslate">1=COM2</code> usw. </p></li></ul><p>Die restlichen Argumente können ohne Änderungen übernommen werden. Die Angaben für Server und Client sind identisch.</p></div><div class="section_2"><h3 id="USB-HBCI-Kartenleser">USB HBCI-Kartenleser<a class="headerlink" href="#USB-HBCI-Kartenleser">¶</a></h3><p>
HBCI-Kartenleser mit USB-Anschluss sind wesentlich einfacher zu installieren, da sie automatisch erkannt werden. Daher dürfte die folgenden Installationsanleitung für den ReinerSCT Cyberjack Pinpad auf andere Kartenleser übertragbar sein.</p><div class="section_3"><h4 id="ReinerSCT-Cyberjack-Pinpad-Sicherheitsklasse-2-USB">ReinerSCT Cyberjack Pinpad Sicherheitsklasse 2 (USB)<a class="headerlink" href="#ReinerSCT-Cyberjack-Pinpad-Sicherheitsklasse-2-USB">¶</a></h4><p>
</p><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Dieser Kartenleser wird vom Hersteller nicht mehr unterstützt. Für neuere Modelle eignet sich das Paket <strong>libifd-cyberjack6</strong>, das in den offiziellen Paketquellen enthalten ist. Zusätzlich existiert mit dem Paket <strong>fxcyberjack</strong> eine grafische Oberfläche zur Konfiguration des Lesers.
</p></div></div><p>
Der Hersteller ReinerSCT bietet fertige Treiberpakete für die verschiedenen Distributionen an, unter anderem auch für die verschiedenen Ubuntu-Versionen. Von der Herstellerseite das passende, neueste DEB-Paket zur eingesetzten Ubuntu-Version <a class="external" href="http://www.reiner-sct.com/support/support-anfrage/" rel="nofollow">herunterladen</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> und installieren <sup><a href="#source-6">[6]</a></sup>.</p><div class="box warning"><h3 class="box warning">Hinweis!</h3><div class="contents"><p>
<a class="internal" href="./fremdquellen.html">Fremdpakete</a> können das System gefährden. 
</p></div></div><p>Bei älteren Kartenlesern mit der ID-Nummer 100 (alte Ecom/Pinpad, herauszufinden mit dem Befehl <code class="notranslate">lsusb</code>), kann evtl. die automatische Erkennung nicht funktionieren. Hier  einmalig den Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">sudo cyberjack addflags 0x100000 </pre></div></div><p>eingeben. Dadurch schickt der Treiber bei jedem Initialisieren des Lesers ein Reset-Kommando.</p><p>Bei manchen gehen die Leser nur mit folgendem (kleineren) Flag (den anderen zurücksetzten):</p><div class="bash"><div class="contents"><pre class="notranslate">sudo cyberjack addflags 0x10000 </pre></div></div><p>Evtl. muss noch der Libchipcard-Server/-Client eingerichtet werden, damit der Leser erkannt wird, dazu einen Editor <sup><a href="#source-4">[4]</a></sup> mit Root-Rechten öffnen und folgende Zeilen kopieren und in eine leere Datei einfügen:</p><pre class="notranslate">enabled="1"

server {
        typ="local"
        addr="/var/run/chipcard.sock"
 }</pre><p>Die Angaben für Server und Client sind identisch. Als <strong> /etc/chipcard/client/chipcardc.conf</strong> und <strong>/etc/chipcard/server/chipcardd.conf</strong> speichern und wie folgt die entsprechenden Rechte setzen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chmod 644 /etc/chipcard/client/chipcardc.conf
sudo chmod 644 /etc/chipcard/server/chipcardd.conf </pre></div></div><p>Der Cyberjack Pinpad hat einen USB-Anschluss und benötigt daher keine Treiberangaben, er wird automatisch von <strong>libchipcard2</strong> gefunden und erkannt.</p><p>Zu beachten gilt noch beim Cyberjack Pinpad, dass beim Kontoabgleich das abgefragte Passwort blind am Pinpad eingetippt und mit <em>OK</em> bestätigt werden muss, am Bildschirm erscheint nur die Aufforderung, das Passwort am Pinpad einzutippen. Es erscheint kein visuelle Rückmeldung wie sonst üblich mit Sternchen (*****) in einem Eingabefeld.</p><p>Optional gibt es ein <a class="external" href="http://sourceforge.net/project/showfiles.php?group_id=34542" rel="nofollow">Diagnosewerkzeug (cyberjack-diag)</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> für den Cyberjack Pinpad. Dieses Paket liegt nur im Quellcode vor und muss kompiliert <sup><a href="#source-5">[5]</a></sup> werden, es steht aber im Konflikt mit dem Cyberjack-Treiber, weil in beiden die Datei <strong>cyberjack</strong> enthalten ist. Es kann nur mit <code class="notranslate">dpkg --force-all -i cyberjack-diag_*_i386.deb</code> installiert werden, dies ist aber nicht zu empfehlen. Alternativ kann man das DEB-Paket entpacken <sup><a href="#source-7">[7]</a></sup> und die ausführbare Datei <strong>fxcyberjack</strong> starten. Diese bietet eine GUI zur Analyse und Überprüfung für die Einrichtung des Kartenlesers mit Lösungsvorschlägen bei Problemen.</p><p>Es kann Probleme im Zusammenspiel vom Cyberjack Pinpad-Treiber (libifd-cyberjack6) mit AqBanking geben, weil eine benötigte Treiber-Bibliothek umbenannt worden ist. Abhilfe schafft ein symbolische Verknüpfung auf den neuen Dateinamen <a class="external" href="http://www.pclinuxos.com/forum/index.php?topic=121995.15" rel="nofollow">Quelle</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>:
</p><div class="bash"><div class="contents"><pre class="notranslate"># Verzeichnis wechseln
cd /usr/lib/pcsc/drivers
# Symbolische Verknüpfung anlegen
sudo ln -s /usr/lib/readers/libifd-cyberjack.bundle ifd-cyberjack.bundle
# pcscd-Dienst neu starten
sudo /etc/init.d/pcscd restart  </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Das Auslesen einer HBCI-Karte für das Anlegen eines neuen Kontos scheint mit den aktuellen Versionen von <a class="internal" href="./gnucash.html">GnuCash</a> (1:2.6.6-2ubuntu2, wily), AqBanking (5.6.1beta-1build1, wily) und libifd-cyberjack6 (3.99.5final.sp08) nicht mehr zu funktionieren. Alternativ ist die Verwendung von <a class="internal" href="./hibiscus.html">Hibiscus</a> (2.6.12-0ubuntu1~trusty~ppa1) möglich.
</p></div></div><p>Möchte man mit anderen Programmen als den obengenannten Homebanking-Anwendungen auf den Cyberjack-Kartenleser zugreifen, z.B. mit Kommandozeilenwerkzeugen, dann muss man den eigenen Benutzernamen und den Benutzer <code class="notranslate">chipcard</code> zur Gruppe <code class="notranslate">cyberjack</code> hinzufügen <sup><a href="#source-8">[8]</a></sup>. Ein Terminal <sup><a href="#source-3">[3]</a></sup> öffnen und folgenden Befehl ausführen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo adduser $USER cyberjack
# user durch den eigenen Usernamen ersetzen
sudo adduser chipcard cyberjack </pre></div></div></div></div></div><div class="section_1"><h2 id="Chipcardserver">Chipcardserver<a class="headerlink" href="#Chipcardserver">¶</a></h2><p>
Um zu überprüfen, ob die Einrichtung korrekt war, ein Terminal <sup><a href="#source-3">[3]</a></sup> öffnen und den Chipcard-Server mit folgendem Befehl temporär starten:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chipcardd4 --pidfile /var/run/chipcard.pid </pre></div></div><p>Die gewählte Homebanking Anwendung starten und den Aqbanking-Einrichtungsassistent starten, siehe dazu in den Wikis zu den einzelnen Anwendungen.</p><p><strong>libchipcard2</strong> richtet automatisch einen Dienst ein, dieser Dienst erkennt aber den Kartenleser alleine nicht, daher muss noch ein Befehlszeile in die <strong>/etc/rc.local</strong> eingefügt werden, dieser Dienst ermöglicht dann den korrekten Zugriff auf den Leser.  Dazu einen Editor <sup><a href="#source-4">[4]</a></sup> mit Root-Rechten starten, die Datei <strong>/etc/rc.local</strong> öffnen und den oben genannten Befehl zum Starten des Chipcards Server kopieren und einfügen vor dem Befehl <strong>exit 0</strong> und abspeichern:</p><div class="section_2"><div class="section_3"><h4 id="etc-rc-local">/etc/rc.local<a class="headerlink" href="#etc-rc-local">¶</a></h4><p>
</p><pre class="notranslate">#!/bin/sh -e
sudo chipcardd4 --pidfile /var/run/chipcard.pid
exit 0</pre><p>Nach dem nächsten Neustart steht der Chipcard-Server zur Verfügung.</p></div></div></div><div class="section_1"><h2 id="libchipcard-3-4">libchipcard 3/4<a class="headerlink" href="#libchipcard-3-4">¶</a></h2><p>
Diese Pakete sind voneinander abhängig, z.B. <a class="internal" href="./archiv/qbankmanager.html">Qbankmanager</a> 0.9.41 arbeitet nicht mit <strong>libchipcard2</strong> zusammen. Für KMyMoney reicht die Version aus den Quellen, aber es muss diese <a class="external" href="http://www.aquamaniac.de/sites/home/index.php" rel="nofollow">(KMyMoney Banking Plugin) Erweiterung</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> zusätzlich kompiliert <sup><a href="#source-5">[5]</a></sup> und installiert <sup><a href="#source-6">[6]</a></sup> werden. Gnucash wurde noch nicht zusammen mit <strong>libchipcard/3/4</strong> getestet. Diese Versionen liegen nur im Quellcode vor und müssen selber kompiliert <sup><a href="#source-5">[5]</a></sup> werden, worauf hier nicht näher eingegangen wird. Der sichtliche Vorteil dieser Versionen ist der optisch verbesserte Dialog beim Konto-Abgleich, welcher nicht, wie bei libchipcard2, in Fortschrittsbalken-Anzeige und Dialogfenster zweigeteilt ist.</p><p>Der Towitoko-Treiber arbeitet auch sehr gut mit libchipcard3/4  zusammen, der Cyberjack Treiber arbeitet zur Zeit nur mit libchipcard2  zusammen.</p><ul><li><p><a class="external" href="http://www.aquamaniac.de/sites/home/index.php" rel="nofollow">libchipcard3/4</a> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/> </p></li><li><p><a class="external" href="http://sourceforge.net/project/showfiles.php?group_id=115695" rel="nofollow">aqbanking 2.3.*</a> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/> </p></li><li><p><a class="external" href="http://sourceforge.net/project/showfiles.php?group_id=88769" rel="nofollow">gwenhywfar3</a> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/> </p></li></ul><p>
Es gilt gegenüber libchipcard2 Folgendes zu beachten :</p><div class="section_2"><h3 id="libchipcard3">libchipcard3<a class="headerlink" href="#libchipcard3">¶</a></h3><p>
</p><ul><li><p>Der Server-/Clientpfad liegt nicht in <strong>/etc/chipcard-*</strong> sondern in <strong>/usr/etc/chipcard3/client</strong>  und <strong>/usr/etc/chipcard3/server</strong> </p></li><li><p>Die Einrichtungsdatei heißen dementsprechend <strong>chipcardd3.conf</strong> / <strong>chipcardc3.conf</strong> </p></li><li><p>Der Aufruf zum Starten des Servers lautet: </p></li></ul><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chipcardd3 --pidfile /var/run/chipcardd3.pid </pre></div></div></div><div class="section_2"><h3 id="libchicard4">libchicard4<a class="headerlink" href="#libchicard4">¶</a></h3><p>
</p><ul><li><p>Server-/Clientpfad in  <strong>/usr/etc/chipcard/client</strong>  und <strong>/usr/etc/chipcard/server</strong> </p></li><li><p>Die Einrichtungsdatei heißen dementsprechend <strong>chipcardd.conf</strong> / <strong>chipcardc.conf</strong> </p></li><li><p>Der Aufruf zum Starten des Servers lautet: </p></li></ul><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chipcardd --pidfile /var/run/chipcardd.pid </pre></div></div></div></div><div class="section_1"><h2 id="PC-SC-Treiber">PC/SC-Treiber<a class="headerlink" href="#PC-SC-Treiber">¶</a></h2><p>
Für viele USB-Kartenleser (<a class="external" href="http://pcsclite.alioth.debian.org/section.html" rel="nofollow">Übersicht</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>) lassen sich aus den Quellen Treiber nachinstallieren, um den Kartenleser über die PC/SC-Schnittstelle anzusprechen.</p><p>Folgende Pakete werden benötigt <sup><a href="#source-1">[1]</a></sup>:</p><ul><li><p><strong>pcscd</strong> (<em>universe</em>)</p></li><li><p><strong>pcsc-tools</strong> (<em>universe</em>)</p></li><li><p><strong>libpcsclite1</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install pcscd pcsc-tools libpcsclite1 </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install pcscd pcsc-tools libpcsclite1 </pre></div></div><p>
</p></div></div><p>
Im Paket <strong>pcsc-tools</strong> ist das Programm <a class="interwiki interwiki-ubuntuapps" href="https://apps.ubuntu.com/cat/applications/pcsc-tools">Gscriptor</a> enthalten. Nach der Installation PC neu starten.</p><p>Ein Test offenbart, ob der Kartenleser erkannt wurde:</p><div class="bash"><div class="contents"><pre class="notranslate">pcsc_scan </pre></div></div><div class="section_2"><div class="section_3"><h4 id="KOBIL-EMV-CAP-SecOVID-Reader-III">KOBIL EMV CAP - SecOVID Reader III<a class="headerlink" href="#KOBIL-EMV-CAP-SecOVID-Reader-III">¶</a></h4><p>
Zusätzlich zum PCSC-Treiber wird nur das Paket  <a class="interwiki interwiki-packages" href="http://packages.ubuntu.com/libccid">libccid</a> (bei 14.04 zur Zeit <code class="notranslate">libccid_1.4.15-1</code>) benötigt. In der Regel ist das Paket schon installiert. Wenn nicht, gibt es das Paket auf der Herstellerseite (die dort angebotene Version 1.4.5-1 sollte nur eingesetzt werden, wenn die Version aus den offiziellen Paketquellen noch älter ist).</p><p>Der Hersteller Kobil bietet fertige Treiberpakete für die verschiedenen Distributionen an, unter anderem auch für die verschiedenen Ubuntu-Versionen. Von der Herstellerseite das passende, neueste Deb-Paket zur eingesetzten Ubuntu-Version <a class="external" href="http://www.kobil.com/de/support/downloads/driver-download.html" rel="nofollow">herunterladen</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> und installieren <sup><a href="#source-6">[6]</a></sup>.</p><div class="box warning"><h3 class="box warning">Hinweis!</h3><div class="contents"><p>
<a class="internal" href="./fremdquellen.html">Fremdpakete</a> können das System gefährden. 
</p></div></div></div></div><div class="section_2"><h3 id="Installation-des-Wrappers">Installation des Wrappers<a class="headerlink" href="#Installation-des-Wrappers">¶</a></h3><p>
<a class="internal" href="./finanzverwaltung.html">Homebanking-Clients</a> wie  z. B. Hibiscus sprechen den Kartenleser allerdings über die CT-API-Schnittstelle an. Um den Kartenleser für diese Programme verfügbar zu machen, ist ein sogenannter "Wrapper" (engl. <em>Hülle</em>) nötig, der die Befehle übersetzt.</p><div class="section_3"><h4 id="Installation-eines-Pakets-fuer-pcsc-ctapi-wrapper">Installation eines Pakets für pcsc-ctapi-wrapper<a class="headerlink" href="#Installation-eines-Pakets-fuer-pcsc-ctapi-wrapper">¶</a></h4><p>
</p><div class="box warning"><h3 class="box warning">Hinweis!</h3><div class="contents"><p>
<a class="internal" href="./fremdquellen.html">Fremdpakete</a> können das System gefährden. 
</p></div></div><p>Auf der Projektseite gibt es die <a class="external" href="http://sourceforge.net/projects/pcsc-ctapi/files/Ubuntu%208.04%20Hardy/libpcsc-ctapi-wrapper0_0.2-1_i386/libpcsc-ctapi-wrapper0_0.2-1_i386.deb/download" rel="nofollow">Version 0.2</a> als Paket für pcsc-ctapi-wrapper. Da das Paket keine Abhängigkeiten hat, funktioniert es auch mit neueren Ubuntu Versionen. Die für die Einrichtung benötigte Datei findet sich dann unter <strong>/usr/lib/libpcsc-ctapi-wrapper.so.0.2</strong>. Dieses Paket eignet sich <strong>nicht </strong>für ein 64bit-System!</p></div><div class="section_3"><h4 id="Selber-kompilieren">Selber kompilieren<a class="headerlink" href="#Selber-kompilieren">¶</a></h4><p>
Die neueste Version <a class="interwiki interwiki-sourceforge" href="http://sourceforge.net/projects/pcsc-ctapi/files/pcsc-ctapi/0.3/pcsc-ctapi-wrapper-0.3.tar.gz/download">pcsc-ctapi-wrapper-0.3.tar.gz</a> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/> des Wrappers liegt nicht als fertiges Paket vor und muss daher selber kompiliert werden <sup><a href="#source-5">[5]</a></sup>. Die für die Einrichtung benötigte Datei findet sich dann unter <strong>/usr/local/lib/libpcsc-ctapi-wrapper.so.0.3</strong>. Eine Anleitung zum korrekten Kompilieren gibt es <a class="external" href="https://www.willuhn.de/wiki/doku.php?id=support:list:kartenleser:cyberjack_e-com_ubuntu" rel="nofollow">hier</a>.</p></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://www.hbci-zka.de/links.htm" rel="nofollow">FinTS</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="external" href="http://www.libchipcard.de/installhelp/img0.html" rel="nofollow">Chipkarte einrichten</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="external" href="http://www.matrica.de/service/faq5.html" rel="nofollow">Kartenleser unter Moneyplex</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="internal" href="./hbci_kartenleser_mit_hibiscus.html">Anleitung für HBCI-Kartenleser mit Hibiscus</a></p></li><li><p><a class="interwiki interwiki-sourceforge" href="http://sourceforge.net/projects/pcsc-ctapi">Projektseite pcsc-ctapi-wrapper</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="internal" href="./finanzverwaltung.html">Finanzverwaltung</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./hbci_kartenleser/a/revision/940195.html">Diese Revision</a> wurde am 7. Mai 2017 14:06 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./hbci_kartenleser.html">HBCI Kartenleser</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>