<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Festplattenstatus › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./festplattenstatus.html">Festplattenstatus</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Festplattenstatus">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./festplattenstatus/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./festplattenstatus/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./festplattenstatus/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./festplattenstatus/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./festplattenstatus/a/backlinks.html">Festplattenstatus</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./pakete_installieren.html">Installation von Paketen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./dienste.html">Dienste automatisch starten</a> </p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="./paketinstallation_deb.html">Ein einzelnes Paket installieren</a></p></li><li><p><a class="crosslink anchor" href="#source-6" id="source-6"></a> <a class="internal" href="./sudo.html">Root-Rechte</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Grundlagen">Grundlagen
</a></li><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Verwendung">Verwendung
</a><ol class="arabic"><li><a class="crosslink" href="#Aktivierung">Aktivierung
</a></li><li><a class="crosslink" href="#SSDs-und-neue-Festplattenmodelle">SSDs und neue Festplattenmodelle
</a></li><li><a class="crosslink" href="#smartctl">smartctl
</a></li><li><a class="crosslink" href="#GSmartControl">GSmartControl
</a></li><li><a class="crosslink" href="#smartd">smartd
</a></li><li><a class="crosslink" href="#smart-notifier">smart-notifier
</a></li><li><a class="crosslink" href="#hddtemp">hddtemp
</a></li></ol></li><li><a class="crosslink" href="#Ernstfall-testen">Ernstfall testen
</a><ol class="arabic"><li><a class="crosslink" href="#Vorbereitung">Vorbereitung
</a></li><li><a class="crosslink" href="#Test">Test
</a></li><li><a class="crosslink" href="#Aufraeumen">Aufräumen
</a></li></ol></li><li><a class="crosslink" href="#Problembehebung">Problembehebung
</a><ol class="arabic"><li><a class="crosslink" href="#Externe-USB-Gehaeuse">Externe USB-Gehäuse
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a><ol class="arabic"><li><a class="crosslink" href="#Intern">Intern
</a></li><li><a class="crosslink" href="#Extern">Extern
</a></li></ol></li></ol></div><p><img alt="Wiki/Icons/hd.png" class="image-left" src="./_/8c254286abff1c2469aaf34f1afc7cc1444f7ae9.png"/> 
Magnetische Massenspeichergeräte (Festplatten) arbeiten in mechanisch-technischen Grenzbereichen. Die Frage, ob sie irgendwann versagen, stellt sich daher nicht – interessant ist nur, wann dies der Fall sein wird. Bei den meisten Beschädigungen ist zwar eine Wiederherstellung durch Spezialisten möglich, welche aber ausgesprochen kostenintensiv ist und daher selten eine wirkliche Option darstellt.</p><p>Da diese Erkenntnisse nicht neu sind, wurden Strategien entworfen, wie sich Festplatten selbst reparieren können. Zusätzlich sollen sie die Sicherheit gewähren, dass das, was wichtig ist, nämlich die Daten auf dem Gerät, erst gar nicht zu Schaden kommen können. Die Hersteller der Geräte (P-ATA-, S-ATA- und SCSI-Industriestandardgeräte) haben ein Diagnosesystem entwickelt, welches den aktuellen Festplattenstatus möglichst genau bestimmen kann. Anhand dessen soll dieses über einen gewissen Zeitraum Prognosen liefern, wann welche Beschädigung vermutlich eintritt. Diese Technik trägt den Namen <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/S.M.A.R.T.">S.M.A.R.T.</a> (Self-Monitoring, Analysis and Reporting Technology) und dessen Verwendung mit den <a class="external" href="https://www.smartmontools.org/" rel="nofollow">S.M.A.R.T. Monitoring Tools</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> (smartmontools) ist Inhalt dieses Artikels.</p><p>Neben regelmäßigen <a class="internal" href="./datensicherung.html">Sicherheitskopien</a> kann der Benutzer auch <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/RAID">RAID-Modi</a> (z.B. Software RAID-1 via LVM) verwenden, um seine Daten sicher zu halten.</p><p>Eine 100 prozentige Sicherheit, dass S.M.A.R.T. den Nutzer rechtzeitig alarmiert, gibt es nicht. Bei einer älteren Studie aus dem Jahr 2007 von Google, bei der 100.000 Festplatten, die in den Rechenzentren des Konzerns ihren Dienst versagten, analysiert wurden, zeigten lediglich 64% der Platten rechtzeitig Probleme an. Die komplette Studie kann als PDF-Dokument <a class="external" href="http://static.googleusercontent.com/media/research.google.com/de//archive/disk_failures.pdf" rel="nofollow">heruntergeladen werden</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>. Ergänzend zu S.M.A.R.T. kann z.B. noch regelmäßig eine Überprüfung der Festplatte mittels <a class="internal" href="./festplatten_problembehebung.html#Datentraeger-ueberpruefen">badblocks</a> erfolgen.</p><div class="section_1"><h2 id="Grundlagen">Grundlagen<a class="headerlink" href="#Grundlagen">¶</a></h2><p>
S.M.A.R.T. unterscheidet drei Datensammel-Kategorien:</p><ul><li><p><em>Online Tests</em> nehmen keinen direkten Einfluss auf die eigentliche Tätigkeit des Gerätes, weswegen sie jederzeit durchgeführt werden können (die Namensgebung ist in der Hinsicht etwas ungeschickt). </p></li><li><p><em>Offline Tests</em> können Auswirkungen auf den regulären Betrieb haben. Daher führt die Festplatte, falls nicht explizit anders eingestellt, diese Tests selbstständig in der sogenannten Idle-Zeit aus, das heißt salopp formuliert, wenn die Festplatte sowieso nichts Besseres zu tun hat. </p></li><li><p><em>Self Tests</em> laufen nicht automatisch, sondern müssen explizit angestoßen werden. Diese Tests können sich von Minuten bis zu Stunden hinziehen und liefern viele Daten. </p></li></ul><p>
</p></div><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Grundlage jeglicher Tests sind die Programme <code class="notranslate">smartctl</code> und der Daemon <code class="notranslate">smartd</code>, die im folgenden Paket enthalten sind:</p><ul><li><p><strong>smartmontools</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install smartmontools </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install smartmontools </pre></div></div><p>
</p></div></div><p>Neben der Kommandozeile stehen mit der <a class="internal" href="./laufwerksverwaltung.html">Laufwerksverwaltung</a> oder <a class="crosslink" href="#GSmartControl">GSmartControl</a> grafische Diagnosewerkzeuge zur Verfügung.</p></div><div class="section_1"><h2 id="Verwendung">Verwendung<a class="headerlink" href="#Verwendung">¶</a></h2><p>
</p><div class="section_2"><h3 id="Aktivierung">Aktivierung<a class="headerlink" href="#Aktivierung">¶</a></h3><p>
S.M.A.R.T., zu deutsch in etwa Selbstüberwachungs-, Analyse- und Benachrichtigungstechnik, läuft völlig autonom innerhalb des Geräts ab und ist in der Lage, Werte und Einstellungen zu speichern. Durch unsinnig restriktive BIOS-Einstellungen ist diese Funktion bei älteren Rechnern manchmal abgeschaltet. Erhält man während des Bootvorgangs eine Meldung wie 
</p><blockquote><p>IDE Primary Master S.M.A.R.T. capable but disabled</p></blockquote><p>
so wird S.M.A.R.T. erkannt, ist aber manuell abgeschaltet. Wie die notwendigen Einstellungen im BIOS vorgenommen werden, um S.M.A.R.T. wieder zu aktivieren, geht über diesen Artikel hinaus. Das <a class="external" href="http://www.bios-info.de/" rel="nofollow">BIOS-Kompendium</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> ist hierfür aber eine gute Anlaufstelle. Im Zweifelsfall sollte man auch die Dokumentation des Mainboards zu Rate ziehen.</p></div><div class="section_2"><h3 id="SSDs-und-neue-Festplattenmodelle">SSDs und neue Festplattenmodelle<a class="headerlink" href="#SSDs-und-neue-Festplattenmodelle">¶</a></h3><p>
SSDs werden erst ab Version 5.40, also ab <a class="internal" href="./oneiric.html">Ubuntu 11.10</a>, offiziell unterstützt. Wegen der rasanten Entwicklung bei SSDs und aufgrund neuer Festplattenmodelle haben die smartmontools-Versionen eine Update-Funktion für die intern genutzte Datenbank bekommen. Damit erhält man jeweils eine aktuelle <strong>drivedb.h</strong>, die bei der Identifizierung der Speichermedien hilft. Um die Datenbank zu aktualisieren, dient folgender Befehl:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo update-smart-drivedb </pre></div></div><p>Jetzt werden auch aktuelle SSDs, die erst kurz auf dem Markt sind, richtig erkannt und alle SSD-spezifischen Attribute korrekt angezeigt. Dies gilt ebenso für neue Festplattenmodelle, die möglicherweise noch nicht in der Datenbank enthalten sind. Die Ausgabe von</p><div class="bash"><div class="contents"><pre class="notranslate">sudo smartctl -a /dev/sda </pre></div></div><p>
zeigt an, ob die Festplatte in der Datenbank enthalten ist:</p><pre class="notranslate">Device is: In smartctl database ...</pre><p>
Falls die Festplatte nicht enthalten ist, sollte wie oben beschrieben die Datenbank manuell aktualisiert werden.</p><p>Hinweis: Aufgrund von Änderungen in der Infrastruktur von Sourceforge stimmt seit mindestens Anfang August 2013 der ursprüngliche Download-Link in update-smart-drivedb nicht mehr. Durch Änderung der URL in <strong>/usr/sbin/update-smart-drivedb</strong> kann das Problem behoben werden:</p><pre class="notranslate"># ViewVC repository browser
## MANUALLY UPDATED: commented orginial URL and inserted URL from script of smartmontools v6.2 package.
## SRCEXPR='http://smartmontools.svn.sourceforge.net/viewvc/smartmontools/$location/smartmontools/drivedb.h?revision=HEAD'
SRCEXPR='http://sourceforge.net/p/smartmontools/code/HEAD/tree/$location/smartmontools/drivedb.h?format=raw'</pre><p>Alternativ nimmt dieser Befehl in einem <a class="internal" href="./terminal.html">Terminal</a> eingegeben die obige Änderung vor:</p><pre class="notranslate">sed -i "/^SRCEXPR/{s#=.*#='https://sourceforge.net/p/smartmontools/code/HEAD/tree/\$location/smartmontools/drivedb.h?format=raw'#}" $(which update-smart-drivedb)</pre><p>Ab <a class="internal" href="./xenial.html">Ubuntu 16.04</a> ist der Aufruf von <code class="notranslate">update-smart-drivedb</code> nicht mehr möglich, da das entsprechende Programm aus dem Paket <strong>smartmontools</strong> aufgrund von Sicherheitsbedenken - die Aktualisierung erfolgt nicht über die zentrale Paketverwaltung - herausgenommen wurde. Eine Aktualisierung der Datenbank <strong>drivedb.h</strong> kann jedoch manuell vorgenommen werden. Dazu muss die Datenbank von <a class="external" href="https://www.smartmontools.org/browser/branches?rev=4325&amp;order=name" rel="nofollow">smartmontools</a> heruntergeladen werden und im Verzeichnis <strong>/var/lib/smartmontools/drivedb/</strong> abgelegt werden. Ggf. sollten noch die Rechte der Datenbank aktualisiert werden. Zusammenfassend kann die Aktualisierung wie folgt durchgeführt werden <sup><a href="#source-1">[1]</a></sup>:</p><pre class="notranslate">wget https://www.smartmontools.org/export/4325/branches/RELEASE_6_4_DRIVEDB/smartmontools/drivedb.h
sudo mv /var/lib/smartmontools/drivedb/drivedb.h /var/lib/smartmontools/drivedb/drivedb.h.bak
sudo mv drivedb.h /var/lib/smartmontools/drivedb/
sudo chown -c root:root /var/lib/smartmontools/drivedb/drivedb.h</pre></div><div class="section_2"><h3 id="smartctl">smartctl<a class="headerlink" href="#smartctl">¶</a></h3><p>
<a class="interwiki interwiki-sourceforge2" href="http://smartmontools.sourceforge.net">smartctl</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ist ein Kommandozeilenprogramm, welches S.M.A.R.T.-Statusmeldungen von modernen <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/ATA/ATAPI">ATA-</a> und <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Small_Computer_System_Interface">SCSI-Festplatten</a> auslesen kann. Diese Selbstüberwachung erlaubt das Erkennen eventuell drohender Hardwaredefekte. Dieses Programm wird auch benötigt, um die Load-Cycle-Counts einer Notebook-Festplatte festzustellen. Hierzu hilft der Artikel <a class="internal" href="./notebook-festplatten-bug.html">Notebook-Festplatten-Bug</a> weiter.</p><p>Um das Programm nutzen zu können, muss man den entsprechenden <a class="internal" href="./datenträger.html">Gerätenamen</a> wissen. Außerdem sind <a class="internal" href="./sudo.html">Root-Rechte</a> erforderlich. Ein Befehl <sup><a href="#source-1">[1]</a></sup> ist immer nach dem folgenden Muster aufgebaut:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo smartctl -PARAMETER GERÄTENAME </pre></div></div><p>Für den jeweiligen <code class="notranslate">GERÄTENAMEN</code> siehe den separaten Artikel <a class="internal" href="./datenträger.html#Wie-heissen-die-Datentraeger">Datenträger</a>. Verschiedene Parameter können kombiniert werden.</p><table style="width: 95%"><tr class="titel"><td colspan="2"> smartctl</td></tr><tr class="kopf"><td style="width: 20%"> Parameter</td><td>Beschreibung</td></tr><tr><td> <code class="notranslate">-i</code> </td><td> Gibt an, ob S.M.A.R.T. verfügbar ist </td></tr><tr><td> <code class="notranslate">-h</code> </td><td> Befehlsreferenz ausgeben </td></tr><tr><td> <code class="notranslate">-s on</code> </td><td> S.M.A.R.T. wird aktiviert </td></tr><tr><td> <code class="notranslate">-a</code> </td><td> zusammenfassende Ausgabe aller Festplatteninformationen und Testergebnisse (bei ATA gleichbedeutend mit <code class="notranslate">-H -i -c -A -l error -l selftest -l selective</code>, bei SCSI mit <code class="notranslate">-H -i -A -l error -l selftest</code>) </td></tr><tr><td> <code class="notranslate">-A</code> </td><td> Werte aller Attribute </td></tr><tr><td> <code class="notranslate">-H</code> </td><td> Abfrage des Gesundheitszustands </td></tr><tr><td> <code class="notranslate">-c</code> </td><td> Überprüfung, welche Tests (TEST) möglich sind / Zeit, die diese benötigen / Anzeige des momentanen Testfortschrittes (Self-test execution status) </td></tr><tr><td> <code class="notranslate">-S on</code> </td><td> Automatisches Speichern der Einstellungen </td></tr><tr><td> <code class="notranslate">-t</code> TEST</td><td> Durchführung des möglichen Tests (short, offline, long ...) </td></tr><tr><td> <code class="notranslate">-o on</code> </td><td> Startet die <em>Offline Tests</em> mit einem 4-Stunden-Zyklus </td></tr><tr><td> <code class="notranslate">-t long</code> </td><td> Startet einen langen selftest. Der Test ist auch unter dem Synonym Oberflächenanalyse bekannt. </td></tr><tr><td> <code class="notranslate">-t short</code> </td><td> Startet einen kurzen selftest. Der Test ist zwar kurz, dauert aber mindestens eine Minute (auch wenn die Konsole sofort wieder freigegeben wird). Die Endzeit ist angegeben. </td></tr><tr><td> <code class="notranslate">-t offline</code> </td><td> Startet sofort die Offline Tests (Anzeige der Ergebnisse nur mit <code class="notranslate">-l error</code> oder <code class="notranslate">-a</code>) </td></tr><tr><td> <code class="notranslate">-l selftest</code> </td><td> Zeigt das Log des letzten Selbsttests </td></tr><tr><td> <code class="notranslate">-X</code> </td><td> Test abbrechen </td></tr><tr><td> <code class="notranslate">-l error</code> </td><td> Fehlermeldungen ausgeben </td></tr></table><p>
Weitere Parameter sind den <a class="internal" href="./man.html">Manpages</a> zu entnehmen.</p><div class="section_3"><h4 id="Schnelltest">Schnelltest<a class="headerlink" href="#Schnelltest">¶</a></h4><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo smartctl -H /dev/sda #Status der ersten SATA Platte </pre></div></div><pre class="notranslate">smartctl 5.41 2011-06-09 r3365 [x86_64-linux-3.2.0-37-generic] (local build)
Copyright (C) 2002-11 by Bruce Allen, http://smartmontools.sourceforge.net

=== START OF READ SMART DATA SECTION ===
SMART overall-health self-assessment test result: PASSED</pre><p>Das Ergebnis <code class="notranslate">PASSED</code> bedeutet, dass keine Fehler gefunden wurden. Hier gilt jedoch zu beachten, dass lediglich interne Daten ausgelesen und keine Überprüfung durchgeführt wird. Erscheint <code class="notranslate">FAILED</code>, droht ein Defekt und ein damit verbundener Datenverlust.</p></div><div class="section_3"><h4 id="Ausfuehrlicher-Test">Ausführlicher Test<a class="headerlink" href="#Ausfuehrlicher-Test">¶</a></h4><p>
Für aussagekräftigere Ergebnisse ist ein ausführlicher Test des Laufwerks üblich.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo smartctl -t long /dev/sda #Status der ersten SATA Platte ermitteln </pre></div></div><p>Die Zeit der Beendigung des Tests wird danach angezeigt und hängt unter anderem von der Festplattengröße, -geschwindigkeit und möglicherweise den gefundenen Fehlern ab (üblicherweise etwa zwischen 20 und 60 Minuten). Nach Ablauf dieser Zeit kann man die Ergebnisse anzeigen lassen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo smartctl -a /dev/sda #Status der ersten SATA Platte anzeigen </pre></div></div><p>Das Ergebnis des Tests befindet sich direkt unter der Tabelle. Die Tabelle wird im nächsten Abschnitt <a class="crosslink" href="#Abfrage-der-Attribute">Abfrage der Attribute</a> interpretiert. Zur Interpretation der Ausgaben kann man sich auch an das Forum <a class="interwiki interwiki-forum" href="https://forum.ubuntuusers.de/forum/sicherheit">Sicherheit</a> wenden.</p></div><div class="section_3"><h4 id="Abfrage-der-Attribute">Abfrage der Attribute<a class="headerlink" href="#Abfrage-der-Attribute">¶</a></h4><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo smartctl -A /dev/sda #erste SATA-Platte </pre></div></div><pre class="notranslate">smartctl 5.41 2011-06-09 r3365 [x86_64-linux-3.2.0-37-generic] (local build)
Copyright (C) 2002-11 by Bruce Allen, http://smartmontools.sourceforge.net

=== START OF READ SMART DATA SECTION ===
SMART Attributes Data Structure revision number: 16
Vendor Specific SMART Attributes with Thresholds:
ID# ATTRIBUTE_NAME          FLAG     VALUE WORST THRESH TYPE      UPDATED  WHEN_FAILED RAW_VALUE
  1 Raw_Read_Error_Rate     0x000f   198   192   051    Pre-fail  Always       -       20052
  3 Spin_Up_Time            0x0003   173   172   021    Pre-fail  Always       -       6316
  4 Start_Stop_Count        0x0032   098   098   000    Old_age   Always       -       2178
  5 Reallocated_Sector_Ct   0x0033   200   200   140    Pre-fail  Always       -       0
  7 Seek_Error_Rate         0x000e   200   200   051    Old_age   Always       -       0
  9 Power_On_Hours          0x0032   071   071   000    Old_age   Always       -       21744
 10 Spin_Retry_Count        0x0012   100   100   051    Old_age   Always       -       0
 11 Calibration_Retry_Count 0x0012   100   100   051    Old_age   Always       -       0
 12 Power_Cycle_Count       0x0032   099   099   000    Old_age   Always       -       1290
192 Power-Off_Retract_Count 0x0032   200   200   000    Old_age   Always       -       493
193 Load_Cycle_Count        0x0032   200   200   000    Old_age   Always       -       2178
194 Temperature_Celsius     0x0022   112   094   000    Old_age   Always       -       38
196 Reallocated_Event_Count 0x0032   200   200   000    Old_age   Always       -       0
197 Current_Pending_Sector  0x0012   200   200   000    Old_age   Always       -       0
198 Offline_Uncorrectable   0x0010   200   200   000    Old_age   Offline      -       0
199 UDMA_CRC_Error_Count    0x003e   200   200   000    Old_age   Always       -       46917
200 Multi_Zone_Error_Rate   0x0008   200   200   051    Old_age   Offline      -       0</pre><p>Die Ausgabe bedeutet:</p><table style="width: 95%"><tr class="titel"><td colspan="2"> Werte</td></tr><tr class="kopf"><td> Ausgabe</td><td>Beschreibung</td></tr><tr><td> <code class="notranslate">Value</code> </td><td>aktueller Parameterwert =&gt; allgemeine Tendenz: sinkend</td></tr><tr><td> <code class="notranslate">Worst</code> </td><td>bisher schlechtester Wert</td></tr><tr><td> <code class="notranslate">Thresh</code> </td><td>Grenzwert</td></tr><tr><td> <code class="notranslate">Type</code> </td><td>Bei Grenzunterschreitung droht ein baldiger Ausfall (Pre-fail) / der Parameter informiert über Temperatur / Alterungsprozesse der Festplatte (Old age)</td></tr><tr><td> <code class="notranslate">Updated</code> </td><td>Art der Aktualisierung: permanent (always)  / Selbsttest (Offline data collection)</td></tr><tr><td> <code class="notranslate">WHEN_FAILED</code> </td><td>Gefahrenzustand: Sofortiger Ausfall droht durch zeitweiligen Gleichstand oder Unterschreiten von <code class="notranslate">Value</code> mit <code class="notranslate">Thresh</code> !!! (FAILING_NOW)  / keine akute Gefahr bei zeitweiligem Gleichstand oder Unterschreiten von <code class="notranslate">Worst</code> mit <code class="notranslate">Thresh</code> (In_the_past)</td></tr></table><p>
Zu Beachten ist also, dass das Unterschreiten der Grenzwerte ein Gefahrenzeichen darstellt, nicht das Überschreiten. Im Beispiel ist alles in Ordnung, da die Parameterwerte alle über den jeweiligen Grenzwerten liegen. Kritisch sind Fehler bei den mit Pre-fail bezeichneten Attributen, da hier tatsächlich ein Versagen innerhalb kürzester Zeit droht! In diesem Fall empfiehlt sich der sofortige Austausch des Laufwerks. Interpretationshilfe zur Tabelle: Solange unter der Spalte <code class="notranslate">WHEN_FAILED</code> keine Fehler vermerkt sind, ist das Laufwerk noch in Ordnung.</p><p>Siehe auch:
</p><ul><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/S.M.A.R.T.">etwas abgekürzte Erklärung der S.M.A.R.T.-Werte</a></p></li><li><p><a class="interwiki interwiki-wikipedia_en" href="https://en.wikipedia.org/wiki/S.M.A.R.T.">ausführliche Erklärung der S.M.A.R.T.-Werte</a></p></li></ul><p>
</p></div></div><div class="section_2"><h3 id="GSmartControl">GSmartControl<a class="headerlink" href="#GSmartControl">¶</a></h3><p>
<a class="external" href="http://gsmartcontrol.sourceforge.net/home" rel="nofollow">GSmartControl</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> bietet eine sehr einfach zu bedienende grafische Oberfläche für die <code class="notranslate">smartmontools</code>. Das Programm ist in den Paketquellen enthalten. Das zu installierende Paket heißt:</p><ul><li><p><strong>gsmartcontrol</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install gsmartcontrol </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install gsmartcontrol </pre></div></div><p>
</p></div></div><p>Sowohl der Quellcode als auch unter Umständen aktuellere DEB-Pakete als aus den offiziellen Paketquellen lassen sich auf der Projektseite <a class="external" href="http://gsmartcontrol.berlios.de/home/index.php/en/Downloads" rel="nofollow">herunterladen</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/>.</p><div style="clear: both"><div class="contents"></div></div><p>
</p><table style="float: left; margin: 10px 5px; border: none"><tr><td style="text-align: center; background-color: #E2C889; border: none"> <img alt="./gsmartcontrol.png" class="image-default" src="./_/09004a100a73b89f0b5bc0fcd94429d6006230d0.png"/> </td></tr><tr><td style="text-align: center; background-color: #F9EAAF; border: none"> Übersicht</td></tr></table><div><div class="contents"></div></div><p>
</p><table style="float: left; margin: 10px 5px; border: none"><tr><td style="text-align: center; background-color: #E2C889; border: none"> <img alt="./gsmartcontrol_report.png" class="image-default" src="./_/08ad34460f2b4b9780c421f784f37dffd917e936.png"/> </td></tr><tr><td style="text-align: center; background-color: #F9EAAF; border: none"> Report</td></tr></table><div><div class="contents"></div></div><div style="clear: both"><div class="contents"></div></div><p>Die Bedienung des englischsprachigen Programms ist selbsterklärend. Nach Auswahl der gewünschten Speichermediums wird ein Report erzeugt, der für weitere Diagnosezwecke gespeichert werden kann. Tooltips geben weitere Hinweise zu den jeweiligen Attributen. Im konkreten Beispiel (siehe Abbildung) tritt ein ungewöhnlich hoher Wert bei der "Soft Read Error Rate" auf, der daher rot gekennzeichnet ist. Obwohl keine S.M.A.R.T.-Warnung erfolgt, ist dieser Wert ein Indiz für ein Plattenproblem. Daher wurden die Daten der betroffenen Festplatte gesichert und die Platte selbst ausgemustert.</p></div><div class="section_2"><h3 id="smartd">smartd<a class="headerlink" href="#smartd">¶</a></h3><p>
<strong>smartd</strong> ist ein <a class="internal" href="./dienste.html">Dienst</a> (Daemon), dessen Aufgabe es ist, die S.M.A.R.T.-Einstellungen und -Daten regelmäßig abzufragen und Änderungen in der Datei <strong>/var/log/messages</strong> zu speichern bzw. diese per E-Mail zu melden. Um den Dienst über das mitgelieferte Skript <strong>/etc/init.d/smartmontools</strong> zu starten <sup><a href="#source-4">[4]</a></sup>, muss die Datei <strong>/etc/default/smartmontools</strong> editiert werden <sup><a href="#source-3">[3]</a></sup>. Hier muss die Option <code class="notranslate">start_smartd=yes</code> aktiviert werden. Die Konfiguration von smartd erfolgt über die Datei <strong>/etc/smartd.conf</strong>, in der auch einige Beispieleinstellungen angegeben sind. Ob diese Einstellungen brauchbar sind, erfährt man durch folgenden Test:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo smartd
cat /var/log/syslog </pre></div></div><p>Zuerst wird der Dienst gestartet (welcher dazu die Konfigurationsdatei <strong>/etc/smartd.conf</strong> liest) und dann dessen Ausgabe im Syslog angezeigt. Die sollte in etwa so aussehen:</p><pre class="notranslate">Jul 24 20:51:31 COMPUTERNAME smartd[8216]: smartd version 5.37 [i686-pc-linux-gnu] Copyright (C) 2002-6 Bruce Allen 
Jul 24 20:51:31 COMPUTERNAME smartd[8216]: Home page is http://smartmontools.sourceforge.net/  
Jul 24 20:51:31 COMPUTERNAME smartd[8216]: Opened configuration file /etc/smartd.conf 
Jul 24 20:51:31 COMPUTERNAME smartd[8216]: Configuration file /etc/smartd.conf parsed. 
Jul 24 20:51:31 COMPUTERNAME smartd[8216]: Device: /dev/sda, opened 
Jul 24 20:51:31 COMPUTERNAME smartd[8216]: Device: /dev/sda, found in smartd database. 
Jul 24 20:51:31 COMPUTERNAME smartd[8216]: Device: /dev/sda, enabled SMART Attribute Autosave. 
Jul 24 20:51:31 COMPUTERNAME smartd[8216]: Device: /dev/sda, enabled SMART Automatic Offline Testing. 
Jul 24 20:51:31 COMPUTERNAME smartd[8216]: Device: /dev/sda, is SMART capable. Adding to "monitor" list. 
Jul 24 20:51:31 COMPUTERNAME smartd[8216]: Monitoring 1 ATA and 0 SCSI devices 
Jul 24 20:51:31 COMPUTERNAME smartd[8218]: smartd has fork()ed into background mode. New PID=8218. </pre><p>In der Konfigurationsdatei <strong>/etc/smartd.conf</strong> steht z.B. Folgendes:</p><pre class="notranslate"># -a alle SMART-Werte beobachten
# -o on aktiviert regelmäßiges OFFLINE-Testen
# -S on aktiviert autosave
# To schedule an Offline Immediate test after every midnight, 6am, noon,and 6pm, 
# plus a Short Self-Test daily at 1-2am and a Long Self-Test every Saturday at 3-4am, use:
# -d sat für SATA-Platte (smartd beschwert sich sonst)
# -H Health-Status ausgeben
/dev/sda -a -o on -S on -s (O/../.././(00|06|12|18)|S/../.././01|L/../../6/03) -d sat -H</pre><p>Damit eine solche Konfiguration von smartd auch wirklich benutzt wird, darf sie auf keinen Fall unterhalb einer Zeile stehen, die mit <code class="notranslate">DEVICESCAN</code> beginnt. Nach der Installation des smartd-Paketes kann das aber der Fall sein, daher sollte man das überprüfen und gegebenenfalls diese Zeile auskommentierten (also ein "#" davor stellen):</p><pre class="notranslate">#DEVICESCAN -m root -M exec /usr/share/smartmontools/smartd-runner</pre><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Weitere Infos in den <a class="internal" href="./man.html">Manpages</a> von <strong>smartd</strong> und <strong>smartd.conf</strong>. 
</p></div></div></div><div class="section_2"><h3 id="smart-notifier">smart-notifier<a class="headerlink" href="#smart-notifier">¶</a></h3><p>
Zusätzlich kann das Paket</p><ul><li><p><strong>smart-notifier</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install smart-notifier </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install smart-notifier </pre></div></div><p>
</p></div></div><p>installiert werden. Dieses sorgt dafür, dass der Desktop-Nutzer bei von smartd erkannten Problemen per <a class="internal" href="./benachrichtigungsdienst.html">Benachrichtigungsdienst</a> gewarnt wird.</p><div class="section_3"><h4 id="Konfiguration">Konfiguration<a class="headerlink" href="#Konfiguration">¶</a></h4><p>
Falls es nicht schon durch die Installation von <strong>smart-notifier</strong> geschehen, muss man dafür sorgen, dass das Programm nach dem Start des Rechners auch wirklich läuft. Dazu die <a class="internal" href="./autostart.html">Autostart</a>-Einstellungen der jeweiligen Desktop-Oberfläche öffnen und dort kontrollieren, ob ein Eintrag vorhanden ist, der smart-notifier startet. Falls der fehlt, muss ein <a class="internal" href="./programmstarter.html">Programmstarter</a> angelegt werden.</p><p>Außerdem muss man nach der Installation die Konfigurationsdatei von smartd ergänzen:</p><ul><li><p>die oben schon erwähnte <strong>/etc/smartd.conf</strong> öffnen (erfordert root-Rechte) und in die Zeile gehen, in der man die Konfiguration vorgenommen hat (siehe oben stehendes Beispiel)</p></li><li><p>in genau dieser Zeile wird folgendes angehängt: </p><pre class="notranslate">-m BENUTZERNAME@RECHNERNAME -M exec /usr/share/smartmontools/smartd-runner</pre></li><li><p>die Teile <code class="notranslate">BENUTZERNAME</code> und <code class="notranslate">RECHNERNAME</code> müssen an die entsprechenden Werte des eigenen Rechners angepasst werden</p></li><li><p>für das weiter oben stehende Beispiel sähe die Zeile dann insgesamt so aus: </p><pre class="notranslate">/dev/sda -a -o on -S on -s (O/../.././(00|06|12|18)|S/../.././01|L/../../6/03) -d sat -H -m BENUTZERNAME@RECHNERNAME -M exec /usr/share/smartmontools/smartd-runner</pre></li><li><p>Änderungen speichern und smartd neu starten: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/smartmontools restart </pre></div></div></li></ul><p>
</p></div><div class="section_3"><h4 id="Testen-des-Benachrichtigungsdienstes">Testen des Benachrichtigungsdienstes<a class="headerlink" href="#Testen-des-Benachrichtigungsdienstes">¶</a></h4><p>
Um zu testen, ob smart-notifier auch tatsächlich funktioniert, geht man wie folgt vor:</p><ul><li><p>Sicherstellen, dass <strong>smart-notifier</strong> läuft</p></li><li><p><strong>/etc/smartd.conf</strong> öffnen (erfordert Root-Rechte) und wieder in die Zeile mit der gerade vorgenommen Konfiguration gehen</p></li><li><p>in der Zeile den Wert <code class="notranslate">-M test</code> hinzufügen</p></li><li><p>für das weiter oben stehende Beispiel sähe die Zeile dann insgesamt so aus: </p><pre class="notranslate">/dev/sda -a -o on -S on -s (O/../.././(00|06|12|18)|S/../.././01|L/../../6/03) -d sat -H -m BENUTZERNAME@RECHNERNAME -M test -M exec /usr/share/smartmontools/smartd-runner</pre></li><li><p>Änderungen speichern und smartd neu starten: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/smartmontools restart </pre></div></div></li><li><p>jetzt sollte ein Fenster erscheinen, in dem steht, dass der Test des smartd erfolgreich war</p></li><li><p>nach dem Test muss der gerade eingefügte Teil <code class="notranslate">-M test</code> wieder aus <strong>/etc/smartd.conf</strong> gelöscht werden</p></li></ul><p>
</p></div></div><div class="section_2"><h3 id="hddtemp">hddtemp<a class="headerlink" href="#hddtemp">¶</a></h3><p>
<strong>hddtemp</strong> ist ein kleines Programm, das die Temperatur einer Festplatte über die in der Platte eingebauten S.M.A.R.T.-Sensoren auslesen kann. hddtemp kann die gewonnenen Daten entweder im Syslog ausgeben oder als Serverdienst im Hintergrund abfragen. Weitere Informationen hierzu gibt es in <a class="internal" href="./hddtemp.html">hddtemp</a>.</p></div></div><div class="section_1"><h2 id="Ernstfall-testen">Ernstfall testen<a class="headerlink" href="#Ernstfall-testen">¶</a></h2><p>
Den Benachrichtigungsdienstes zu testen, ist zwar eine gute Möglichkeit einige Konfigurationsfehler zu entdecken, stellt jedoch keinen praxisnahen Ernstfall dar. Es bleibt die Ungewissheit, ob kritische Smartwerte überhaupt erkannt und davor gewarnt werden. Ein guter, aber eher „schmutzige“ Trick, um eine Störung zu simulieren, ist das Erstellen eines defekten Sektors mittels hdparm. Es korrumpiert dabei die ECC Daten des Sektors, jedoch nicht die Oberfläche des Mediums. Der Sektor ist also physikalisch vollkommen in Ordnung, es wird nur vorgegeben, dass ein Defekt vorliegt.</p><div class="section_2"><h3 id="Vorbereitung">Vorbereitung<a class="headerlink" href="#Vorbereitung">¶</a></h3><p>
</p><div class="section_3"><h4 id="SMART-Dienst-anpassen">SMART-Dienst anpassen<a class="headerlink" href="#SMART-Dienst-anpassen">¶</a></h4><p>
Als Beispiel wird folgende Einstellung in<strong> /etc/smartd.conf</strong> verwendet:</p><pre class="notranslate">DEVICESCAN -a -I 194 -W 3,45,54 -R 5 -r 5 -n standby,10 -m BENUTZERNAME -M exec /usr/share/smartmontools/smartd-runner -s (O/../.././(06|12|18|24)|S/../../6/03|L/../(01|15)/./03)</pre><p>Für <code class="notranslate">BENUTZERNAME</code> muss der entsprechende Benutzer eingetragen werden. Die Werte (06|12|18|24) müssen ebenfalls angepasst werden, schließlich will man nicht unnötig lange auf den Offline-Test warten. Es empfiehlt sich daher die kommenden vollen Stunden einzutragen, z.B. (15|16|17). Wie man vielleicht an der Konfiguration erkennt, soll im Fehlerfall eine E-Mail an <code class="notranslate">BENUTZERNAME</code> verschickt und smartd-runner gestartet. Dieser beauftragt u.a. smart-notifier eine Fehlermeldung auf dem Desktop auszugeben.</p><p>Zum Einlesen der Konfiguration wird der Dienst neu gestartet:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service smartd restart  </pre></div></div></div><div class="section_3"><h4 id="smart-notifier-starten">smart-notifier starten<a class="headerlink" href="#smart-notifier-starten">¶</a></h4><p>
In diesem Beispiel wird smart-notifier verwendet und muss daher auch gestartet werden:</p><div class="bash"><div class="contents"><pre class="notranslate">smart-notifier </pre></div></div></div></div><div class="section_2"><h3 id="Test">Test<a class="headerlink" href="#Test">¶</a></h3><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Der folgende Gebrauch von hdparm korrumpiert Daten auf der Festplatte und kann unter Umständen das Dateisystem zerstören! Es sollte nicht auf produktiv eingesetzte Festplatten angewandt werden.
</p></div></div><p>Der erste Schritt besteht darin eine ausrangierte, oder zumindest ungenutzte Festplatte an das System anzuschließen und einen defekten Sektor zu erzeugen. Zunächst liest man die SMART-Werte aus, um den aktuellen Stand der Festplatte zu erfahren.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo smartctl -A /dev/sdX </pre></div></div><pre class="notranslate">...
196 Reallocated_Event_Count 0x0032   200   200   000    Old_age   Always       -       0
197 Current_Pending_Sector  0x0032   200   200   000    Old_age   Always       -       0
198 Offline_Uncorrectable   0x0030   200   200   000    Old_age   Offline      -       0
...</pre><p><strong>Current_Pending_Sector</strong> ist bei <strong>0</strong>. Es liegen also keine defekten Sektoren vor. Nun erzeugt man einen defekten Sektor. <em>/dev/sdX</em> muss entsprechend angepasst werden.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hdparm --yes-i-know-what-i-am-doing --make-bad-sector 100 /dev/sdX </pre></div></div><p>Im Anschluss wird der Sektor gelesen, damit der Fehler erkannt und an SMART übertragen wird.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hdparm --read-sector 100 /dev/sdX </pre></div></div><p>Die SMART-Werte haben sich nun geändert.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo smartctl -A /dev/sdX </pre></div></div><pre class="notranslate">...
196 Reallocated_Event_Count 0x0032   200   200   000    Old_age   Always       -       0
197 Current_Pending_Sector  0x0032   200   200   000    Old_age   Always       -       1
198 Offline_Uncorrectable   0x0030   200   200   000    Old_age   Offline      -       0
...</pre><p><strong>Current_Pending_Sector</strong> hat den Wert <strong>1</strong>. Es wird ein defekter/korrumpierter Sektor gemeldet.</p><p>Der Dienst smartd wird nach einiger Zeit, abhängig von Uhrzeit und Einstellung, einen Offline-Test starten und einen Fehler melden. Dieser erscheint zum einen in <strong>/var/log/syslog</strong> und in unserem Beispiel auch als E-Mail in <strong>/var/mail/BENUTZERNAME</strong></p><div class="bash"><div class="contents"><pre class="notranslate">grep smartd /var/log/syslog </pre></div></div><pre class="notranslate">...
Jul  1 14:42:00 pc1 smartd[20780]: Device: /dev/sdd [SAT], 1 Currently unreadable (pending) sectors
Jul  1 14:42:00 pc1 smartd[20780]: Sending warning via /usr/share/smartmontools/smartd-runner to &lt;USER&gt; ...
Jul  1 14:42:00 pc1 smartd[20780]: Warning via /usr/share/smartmontools/smartd-runner to &lt;USER&gt;: successful
...</pre><p>Beispiel einer E-Mail aus <strong>/var/mail/BENUTZERNAME</strong>:</p><pre class="notranslate">From root@pc1 Sun Jul 01 14:42:00 2012
Return-path: &lt;root@pc1&gt;
Envelope-to: &lt;USER&gt;@pc1
Delivery-date: Sun, 01 Jul 2012 14:42:00 +0200
Received: from root by pc1 with local (Exim 4.80)
        (envelope-from &lt;root@pc1&gt;)
        id 1SlJTU-0002x0-Dn
        for &lt;USER&gt;@pc1; Sun, 01 Jul 2012 14:42:00 +0200
Subject: SMART error (CurrentPendingSector) detected on host: pc1
To: &lt;&lt;USER&gt;@pc1&gt;
X-Mailer: mail (GNU Mailutils 2.99.97)
Message-Id: &lt;E1SlJTU-0002x0-Dn@pc1&gt;
From: root@pc1
Date: Sun, 01 Jul 2012 14:42:00 +0200

This email was generated by the smartd daemon running on:

   host name: pc1
  DNS domain: [Unknown]
  NIS domain: (none)

The following warning/error was logged by the smartd daemon:

Device: /dev/sdd [SAT], 1 Currently unreadable (pending) sectors


For details see host's SYSLOG.

You can also use the smartctl utility for further investigation.
Another email message will be sent in 24 hours if the problem persists.</pre><p>Zuletzt sollte <strong>smart-notifier</strong> eine Fehlermeldung auf dem Desktop anzeigen.</p></div><div class="section_2"><h3 id="Aufraeumen">Aufräumen<a class="headerlink" href="#Aufraeumen">¶</a></h3><p>
Funktioniert alles wie erhofft, repariert man den als defekt gekennzeichnete Sektor.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hdparm --yes-i-know-what-i-am-doing --repair-sector 100 /dev/sdX </pre></div></div><p>Erneut wird der Sektor eingelesen und die Werte an SMART übertragen.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hdparm --read-sector 100 /dev/sdX </pre></div></div><p>Die Smart-Werte haben sich nun wieder geändert. Diesmal zum Besseren.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo smartctl -A /dev/sdX </pre></div></div><pre class="notranslate">...
196 Reallocated_Event_Count 0x0032   200   200   000    Old_age   Always       -       0
197 Current_Pending_Sector  0x0032   200   200   000    Old_age   Always       -       0
198 Offline_Uncorrectable   0x0030   200   200   000    Old_age   Offline      -       0
...</pre><p>Die Zeiten an denen der Offline-Test durchgeführt werden soll, müssen unter <strong>/etc/smartd.conf</strong> ebenfalls rückgängig gemacht werden. In unserem Beispiel also wieder (06|12|18|24).</p></div></div><div class="section_1"><h2 id="Problembehebung">Problembehebung<a class="headerlink" href="#Problembehebung">¶</a></h2><p>
</p><div class="section_2"><h3 id="Externe-USB-Gehaeuse">Externe USB-Gehäuse<a class="headerlink" href="#Externe-USB-Gehaeuse">¶</a></h3><p>
Externe USB-Gehäuse besitzen in der Regel einen Wandler-Chip (z.B. eine USB-SATA-Bridge), der als Konverter zwischen den verschiedenen Schnittstellen/Protokollen fungiert. Dabei kann es passieren, dass eine S.M.A.R.T.-Abfrage nicht korrekt umgesetzt wird:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo smartctl -A /dev/sdX </pre></div></div><p>
</p><pre class="notranslate">/dev/sdX: Unknown USB bridge [0x1e68:0x001b (0x000)]</pre><p>
und somit Festplatten in externen Gehäusen als nicht unterstützt erscheinen, obwohl sie von Haus aus durchaus S.M.A.R.T.-fähig sind. Abhilfe schafft die Verwendung einer speziellen Option:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo smartctl -A -d sat /dev/sdX </pre></div></div><p>
Siehe auch <a class="external" href="https://www.smartmontools.org/wiki/USB" rel="nofollow">USB devices and smartmontools</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><div class="section_2"><h3 id="Intern">Intern<a class="headerlink" href="#Intern">¶</a></h3><p>
</p><ul><li><p><a class="internal" href="./notfall.html">Notfall</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Was tun in Notfällen? </p></li><li><p><a class="internal" href="./laufwerksverwaltung.html">Laufwerksverwaltung</a> – Grafisches Stan­dard­pro­gramm von GNOME zum Verwalten von Laufwerken und Partitionen</p></li><li><p><a class="internal" href="./datensicherung.html">Datensicherung</a> – Wie der Name sagt: Alles zum Thema Datensicheung</p></li><li><p><a class="internal" href="./festplatten_problembehebung.html">Festplatten Problembehebung</a> – Bei Fehlern im <a class="internal" href="./dateisysteme.html">Dateisystem</a> oder auf den Partitionen</p></li><li><p><a class="internal" href="./festplattenschutz.html">Absturzsicherung von Festplatten bei ThinkPad-Modellen</a></p></li><li><p><a class="internal" href="./datenrettung.html">Datenrettung</a> – Gelöschte Dateien wiederherstellen sowie Daten von beschädigten Partitionen retten</p></li><li><p><a class="internal" href="./system.html#Dateisystem-und-Datentraeger">Dateisysteme und Datenträger</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersicht über weitere Artikel zum Thema</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Extern">Extern<a class="headerlink" href="#Extern">¶</a></h3><p>
</p><ul><li><p><a class="external" href="https://www.smartmontools.org/" rel="nofollow">Projektseite</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p><ul><li><p><a class="interwiki interwiki-sourceforge" href="http://sourceforge.net/projects/smartmontools">smartmontools auf SourceForge</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul></li><li><p><a class="external" href="http://wiki.debianforum.de/Festplattendiagnostik-_und_%C3%9Cberwachung" rel="nofollow">Debian - Wiki: Festplattendiagnostik und Überwachung</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/></p></li><li><p><a class="external" href="http://wiki.debianforum.de/Hdparm#Schlechte_Sektoren_erzeugen" rel="nofollow">Debian - Wiki: Schlechte Sektoren erzeugen</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/></p></li><li><p><a class="external" href="http://sg.danny.cz/scsi/smartmontools_scsi.html" rel="nofollow">Smartmontools for SCSI devices</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Hintergrundinformationen</p></li><li><p><a class="external" href="http://www.linux-user.de/ausgabe/2004/10/056-smartmontools/" rel="nofollow">Smartmontools</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Linux User, 10/2004</p></li></ul><p>
</p></div></div></div>
<p class="meta">
<a href="./festplattenstatus/a/revision/946022.html">Diese Revision</a> wurde am 4. Januar 2018 18:46 von <a href="https://ubuntuusers.de/user/clax/">clax</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./festplattenstatus.html">Festplattenstatus</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>