<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Samba_Server › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./samba_server.html">Samba Server</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Samba_Server">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./samba_server/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./samba_server/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./samba_server/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./samba_server/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./samba_server/a/backlinks.html">Samba Server</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./paketverwaltung.html">Pakete installieren</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./dienste.html">Dienste starten und stoppen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./samba.html">Übersichtsartikel zu Samba</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Benutzerverwaltung">Benutzerverwaltung
</a><ol class="arabic"><li><a class="crosslink" href="#Benutzer-Datenbank">Benutzer-Datenbank
</a></li><li><a class="crosslink" href="#Gast-Zugang">Gast-Zugang
</a></li></ol></li><li><a class="crosslink" href="#Konfiguration">Konfiguration
</a><ol class="arabic"><li><a class="crosslink" href="#Die-Konfigurationsdatei">Die Konfigurationsdatei
</a></li><li><a class="crosslink" href="#Allgemeine-Freigaben">Allgemeine Freigaben
</a></li><li><a class="crosslink" href="#Persoenliche-Freigaben">Persönliche Freigaben
</a><ol class="arabic"><li><a class="crosslink" href="#In-der-Konsole">In der Konsole
</a></li></ol></li></ol></li><li><a class="crosslink" href="#Administrative-Tools">Administrative Tools
</a><ol class="arabic"><li><a class="crosslink" href="#berpruefen-der-smb-conf">Überprüfen der smb.conf
</a></li><li><a class="crosslink" href="#Server-neu-starten">Server (neu) starten
</a></li></ol></li><li><a class="crosslink" href="#Probleme-mit-Windows">Probleme mit Windows
</a></li><li><a class="crosslink" href="#Links">Links
</a><ol class="arabic"><li><a class="crosslink" href="#Verwandte-Seiten">Verwandte Seiten
</a></li><li><a class="crosslink" href="#Ergaenzende-und-weiterfuehrende-Informationen">Ergänzende und weiterführende Informatio...</a></li></ol></li></ol></div><p><img alt="samba-logo.png" class="image-left" src="./_/a8ef26a0d93a67702ef6b8f48761da6a0e0a2c2d.png"/>
Unter "Samba Server" kann man Verschiedenes verstehen. Werden auf einem privaten Arbeitsrechner ein paar Dateien für den Zugriff vom eigenen Notebook aus freigegeben, so ist dieser damit im Grunde schon ein "Samba Server". Hier werden Überlegungen zur Sicherung vor Missbrauch und zur Zugriffskontrolle nicht an erster Stelle stehen. Die graphischen Oberflächen <a class="internal" href="./gnome.html">GNOME</a> und <a class="internal" href="./kde.html">KDE</a> bieten für solche Fälle einfache Lösungen an. Siehe hierzu <a class="internal" href="./samba_server_gnome.html">Samba Server GNOME</a> und <a class="internal" href="./samba_server/kde.html">Samba Server/KDE</a>. Das auch unter <a class="internal" href="./xfce.html">Xfce</a> (Xubuntu) verwendbare graphische Konfigurations-Tool "system-config-samba" ist <a class="internal" href="./samba_server_gnome.html#Allgemeine-Freigaben-und-Einstellungen">hier</a> beschrieben.</p><p>Unter einem "Server" im engeren Sinne kann man auch einen Rechner verstehen, dessen Aufgabe ausschließlich oder überwiegend darin besteht, Daten in einem Netzwerk zur Verfügung zu stellen und die Zugriffe darauf zu steuern. Bei einem solchen Server wird man häufig auf eine graphische Oberfläche ganz verzichten, da diese zusätzlich Rechenleistung und Speicherplatz in Anspruch nimmt (siehe <a class="internal" href="./server_installation.html">Server Installation</a>). Da es sich hier meist um Mehrbenutzer-Systeme handelt, spielen Sicherheit und Zugriffskontrolle dabei eine entscheidende Rolle. Samba bietet dafür sehr differenzierte Möglichkeiten. Dieser Artikel behandelt die Konfiguration eines einfachen Samba Servers ohne die Hilfsmittel einer speziellen graphischen Oberfläche.</p><p>Samba lässt sich auch in sehr komplexen Netzwerk-Strukturen mit mehreren Domänen und ganz verschiedenen beteiligten Betriebssystemen einsetzen; nach oben gibt es kaum Grenzen. Dies umfassend zu beschreiben, würde den Umfang eines Wiki-Artikels sprengen. Hierfür sollte man sich in die ausführliche <a class="interwiki interwiki-sourceforge" href="http://sourceforge.net/projects/projects/gertranssmb3.berlios/files">Dokumentation</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> einarbeiten. Einzelne weiterführende Themen werden auch in <a class="internal" href="./samba_server/pdc.html">Samba Server/PDC</a> und <a class="internal" href="./samba_winbind.html">Samba Winbind</a> behandelt.</p><p>Nicht selten wird bei einem Server auf eigene Bedienungselemente ganz verzichtet; die Bedienung erfolgt dann von einem Client aus (Remote Administration). Wie dies zu bewerkstelligen ist, erklären die Artikel <a class="internal" href="./ssh.html">SSH</a> und <a class="internal" href="./fuse/sshfs.html">FUSE/sshfs</a>.</p><p>Seit der Version 4.0 (Standard seit <a class="internal" href="./trusty.html">Ubuntu 14.04 LTS</a>) kann ein Samba Server auch als zu Microsoft Active Directory® kompatibler Domain Controller eingesetzt werden. Dies sprengt jedoch den Rahmen dieses Wiki. Hier wird nur die Verwendung als <em>Standalone Server</em> (Option <code class="notranslate">server role = standalone</code> bzw. <code class="notranslate">server role = auto</code> in Verbindung mit <code class="notranslate">security = user</code> im Teil <code class="notranslate">[global]</code> der Datei <a class="internal" href="./samba_server/smb.conf.html">smb.conf</a>) beschrieben. In Ubuntu ist diese Einstellung Standard.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Um Samba verwenden zu können, muss es zuerst installiert werden. Folgende Pakete sind dafür erforderlich:</p><ul><li><p><strong>samba-common</strong> (Basiswerkzeuge von Samba wie z.B. <strong>smbpasswd</strong> )</p></li><li><p><strong>samba</strong> ( der eigentliche Samba Server. Dieses <a class="internal" href="./metapakete.html">Metapaket</a> enthält auch die übrigen, zur Einrichtung eines einfachen Samba-Servers notwendigen Pakete.)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install samba-common samba </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install samba-common samba </pre></div></div><p>
</p></div></div><p> 
Sinnvoll sind in vielen Fällen auch folgende Pakete:</p><ul><li><p><strong>samba-doc</strong> (Die Dokumentation zu Samba )</p></li><li><p><strong>samba-doc-pdf</strong> (Die Dokumentation von Samba als PDF Dateien )</p></li><li><p><strong>tdb-tools</strong> (Tools für die Samba Benutzerdatenbank )</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install samba-doc samba-doc-pdf tdb-tools </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install samba-doc samba-doc-pdf tdb-tools </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="Benutzerverwaltung">Benutzerverwaltung<a class="headerlink" href="#Benutzerverwaltung">¶</a></h2><p>
</p><div class="section_2"><h3 id="Benutzer-Datenbank">Benutzer-Datenbank<a class="headerlink" href="#Benutzer-Datenbank">¶</a></h3><p>
Samba hat in der Standardinstallation eine vom System getrennte Benutzerverwaltung, welche mit dem Befehl <strong>smbpasswd</strong> administriert wird:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo smbpasswd -a &lt;username&gt; # Fügt den Benutzer &lt;username&gt; der Samba Datenbank hinzu und aktiviert diesen
sudo smbpasswd -x &lt;username&gt; # Entfernt den Benutzer &lt;username&gt; aus der Samba Datenbank
sudo smbpasswd -d &lt;username&gt; # Deaktiviert den Benutzer &lt;username&gt; in der Datenbank
sudo smbpasswd -e &lt;username&gt; # Aktiviert den vorher deaktivierten Benutzer &lt;username&gt; in der Datenbank wieder </pre></div></div><p>
Für den Benutzer, den man der Datenbank von Samba hinzugefügt hat, kann man ein Passwort vergeben. Dies kann sofort nach der Eingabe des Befehls:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo smbpasswd -a &lt;username&gt; </pre></div></div><p>
verdeckt (d.h. ohne Anzeige) geschehen. Der gleiche Befehl kann auch verwendet werden, um das Samba-Passwort eines bereits eingetragenen Benutzers nachträglich zu ändern.</p><p>Benutzer, die zur Datenbank von Samba hinzugefügt werden, müssen schon auf dem System als "normale" Benutzer vorhanden sein. Es ist ratsam, aber nicht erforderlich, für Samba das gleiche Passwort wie das Systempasswort des Benutzers zu nehmen.<br/>Falls man das Passwort der Samba-Freigabe an eine größere Gruppe verteilen will, so ist es sinnvoll dafür einen speziellen Account auf dem eigenen System anzulegen, der sich weder einloggen kann, noch ein Homeverzeichnis hat, oder sonst etwas darf. Dies geschieht mit folgendem Befehl:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo  adduser --no-create-home --disabled-login --shell /bin/false &lt;username&gt; </pre></div></div><p>Durch das Deaktivieren eines Benutzers kann man für diesen den Zugriff auf Samba vorübergehend sperren, ohne dafür sein Passwort zu verändern oder seinen Eintrag zu löschen.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Bei der Installation von Samba wird leicht vergessen, dass weder die im System eingetragenen <a class="internal" href="./benutzer_und_gruppen.html">Benutzer</a> noch deren Passwörter automatisch in die Benutzer-Datenbank von Samba übernommen werden.
</p></div></div></div><div class="section_2"><h3 id="Gast-Zugang">Gast-Zugang<a class="headerlink" href="#Gast-Zugang">¶</a></h3><p>
Samba kann auch "Gästen", die nicht in der Benutzer-Datenbank eingetragen sind, den Zugang ohne Passwort gestatten. Standardmäßig ist der Gast-Zugang generell deaktiviert. Mochte man ihn für einzelne Freigaben erlauben, so muss in der <a class="crosslink" href="#Konfiguration">Konfigurationsdatei</a> bei diesen Freigaben jeweils die Zeile:</p><pre class="notranslate">guest ok = yes</pre><p>
oder gleichbedeutend</p><pre class="notranslate">public = yes</pre><p>
eingetragen sein (Standardwert ist <code class="notranslate">no</code>). Bei allgemeinen Freigaben (s.u.) ist dieser Eintrag grundsätzlich möglich; ob auch einzelne Benutzer bei ihren persönlichen Freigaben (s.u.) den Gast-Zugang gestatten dürfen, legt der Parameter <code class="notranslate">usershare allow guests</code> im Bereich <code class="notranslate">[public]</code> von <strong>smb.conf</strong> fest. Standardwert ist hier:</p><pre class="notranslate">usershare allow guests = yes</pre><p>
Doch nicht jeder kann sich automatisch bei Samba als "Gast" anmelden. Wer als "Gast" gilt, legt der Parameter <code class="notranslate">map to guest</code> im Abschnitt <code class="notranslate">[global]</code> von <strong>smb.conf</strong> fest. Üblich ist</p><pre class="notranslate">map to guest = bad user # Ab Samba 4.2 muss es bad password lauten</pre><p>
Als <code class="notranslate">bad user</code> gilt jeder Benutzer, der nicht in der Samba-Datenbank des Servers eingetragen ist. Wem dann die Ordner und Dateien gehören, die ggf. von Gästen angelegt werden, legt der Parameter "<code class="notranslate">guest account</code>" fest. Üblich ist:</p><pre class="notranslate">guest account = nobody</pre><p>
Unter diesem Namen melden sich auch Windows sowie <a class="internal" href="./gnome.html">GNOME</a> und <a class="internal" href="./kde.html">KDE</a> beim Zugriff auf Freigaben mit erlaubtem Gast-Zugang an.</p><p>Gäste haben beim Zugriff auf Freigaben höchstens die Rechte, die ihnen auch auf dem Server selbst zustehen würden. Es ist deshalb durchaus möglich, dass Gäste keine Schreibrechte haben, obwohl bei der Freigabe:</p><pre class="notranslate">writeable = yes</pre><p>
eingetragen ist.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Auf Notebooks, mit denen auch Verbindungen zu fremden Netzen (Schule, Uni, Hotel...) hergestellt werden, sollten <span class="underline">grundsätzlich</span> keine Freigaben mit Gast-Zugang eingerichtet werden! Auch sonst ist bei allen sensiblen Daten vom Gast-Zugang <span class="underline">dringend</span> abzuraten.
</p></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Rechner mit <strong>Home</strong>-Versionen von Windows-Betriebssystemen können manchmal nur mit Schwierigkeiten auf Samba-Freigaben ohne Gast-Zugang zugreifen.
</p></div></div></div></div><div class="section_1"><h2 id="Konfiguration">Konfiguration<a class="headerlink" href="#Konfiguration">¶</a></h2><p>
</p><div class="section_2"><h3 id="Die-Konfigurationsdatei">Die Konfigurationsdatei<a class="headerlink" href="#Die-Konfigurationsdatei">¶</a></h3><p>
Der Samba-Server wird über die Datei <strong>/etc/samba/smb.conf</strong> konfiguriert, welche mit einem Texteditor und nur mit Root-Rechten bearbeitet werden kann. Verfügt der Server über eine graphische Oberfläche (GUI), so lassen sich die wichtigsten Einstellungen auch mit dem sehr einfachen graphischen Tool <strong>system config samba</strong> (Beschreibung in <a class="internal" href="./samba_server_gnome.html#Allgemeine-Freigaben">Samba Server GNOME</a>) oder mittels <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/GAdmintools">GAdmin-Samba</a> vornehmen bzw. verändern.</p><p>Das vorwiegend für die Fernwartung eines Samba Servers konzipierte Webinterface <a class="internal" href="./archiv/samba_server_swat.html">Swat</a> ist derzeit leider nicht auf dem aktuellen Stand (Mai 2017).</p><p>Die allgemeinen Festlegungen im Teil [global] der Datei <strong>smb.conf</strong> gelten sowohl für allgemeine als auch für persönliche Freigaben. Sie werden noch durch zusätzliche Eintragungen bei den betreffenden Freigaben ergänzt, die dann jeweils nur für diese eine Freigabe gelten.</p><p>Bei der Installation von <strong>Samba</strong> wird automatisch eine Datei <strong>smb.conf</strong> angelegt. Diese ist mit ausführlichen Kommentaren versehen <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>. In vielen Fällen sind nur wenige Änderungen oder Ergänzungen zu dieser Datei nötig, die sich mit Hilfe der Kommentarzeilen leicht durchführen lassen. Für umfangreiche Änderungen und Eintragungen bietet der Artikel <a class="internal" href="./samba_server/smb.conf.html">Samba Server/smb.conf</a> weitere Informationen.</p></div><div class="section_2"><h3 id="Allgemeine-Freigaben">Allgemeine Freigaben<a class="headerlink" href="#Allgemeine-Freigaben">¶</a></h3><p>
Allgemeine Freigaben werden direkt in die Datei <strong>/etc/samba/smb.conf</strong> an deren Ende eingetragen. Dazu wird zuerst in eckigen Klammern der Name angegeben, unter dem die Freigabe im Netz verfügbar ist. In der nächsten Zeile folgt der Pfad zur freigegebenen Datei oder Ordner auf dem Server. Dann folgen Parameter, die nur für diese Freigabe gelten. Beispiel:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>[Fotos]
path = /media/Bilder
public = yes
writeable = yes
</pre></div>
</td></tr></table></div><p>
Parameter brauchen grundsätzlich nur dann angegeben zu werden, wenn ihr Wert vom Standardwert (Default) abweicht.
Näheres zu den einzelnen Parametern siehe im Artikel <a class="internal" href="./samba_server/smb.conf.html">smb.conf</a>, in der <a class="internal" href="./man.html">Manpage</a> <code class="notranslate">man smb.conf</code> oder <a class="external" href="http://us1.samba.org/samba/docs/man/manpages-3/smb.conf.5.html" rel="nofollow">hier</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Vor jeder Veränderung der Datei <strong>/etc/samba/smb.conf</strong> sollte unbedingt eine Kopie der ursprünglichen Fassung angelegt werden. Vor dem Aktivieren überprüft man die Datei mit "testparm".
</p></div></div></div><div class="section_2"><h3 id="Persoenliche-Freigaben">Persönliche Freigaben<a class="headerlink" href="#Persoenliche-Freigaben">¶</a></h3><p>
Seit der Version 3.0.23 bietet Samba zusätzlich noch die Möglichkeit, dass auch gewöhnliche Benutzer, die der <a class="internal" href="./benutzer_und_gruppen.html">Gruppe</a> <code class="notranslate">sambashare</code> angehören, ihre Dateien ohne Root-Rechte freigeben können. Dieses Verfahren wird mit <code class="notranslate">net usershare</code> bezeichnet. Solcherart vorgenommene Freigaben werden dann nicht in <strong>/etc/samba/smb.conf</strong> eingetragen, sondern es wird für jede persönliche Freigabe eine eigene Textdatei erstellt, die in der Regel im Ordner <strong>/var/lib/samba/usershares</strong> als Besitz des jeweiligen Benutzers abgelegt wird. Unter dem Namen dieser Datei ist die Freigabe im Netz verfügbar. Der Inhalt der Datei ist der  Pfad zur Freigabe auf dem Server, ein optionaler Kommentar, die Usershare-ACL (Access Control List) sowie ein Parameter, ob Gast-Zugang gestattet wird. Beispiel:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>#VERSION 2
path=/home/BENUTZERNAME/Gemeinsam
comment=
usershare_acl=S-1-1-0:R
guest_ok=n
sharename=gemeinsam
</pre></div>
</td></tr></table></div><p>
Weitere Informationen siehe <a class="internal" href="./samba_server/net_usershare.html">net usershare</a> und in der <a class="internal" href="./man.html">Manpage</a> "man net" im Abschnitt "usershare". Seit Ubuntu 8.04 wird von <a class="internal" href="./gnome.html">GNOME</a>/<a class="internal" href="./nautilus.html">Nautilus</a> nur noch dieses Verfahren unterstützt (siehe hierzu auch <a class="internal" href="./samba_server_gnome.html">Samba Server GNOME</a>).</p><p>Allgemeine Freigaben (über einen Eintrag in <strong>smb.conf</strong>) und persönliche Freigaben (mittels <em>"net usershare"</em>) können nebeneinander verwendet werden. Möchte man sich jedoch auf persönliche Freigaben beschränken, so sind meist keine Änderungen an der bei der Installation automatisch angelegten Datei <strong>smb.conf</strong> nötig.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Man sollte es vermeiden, eine allgemeine und eine persönliche Freigabe unter der gleichen Bezeichnung zu erstellen. Geschieht dies versehentlich trotzdem, dann hat die allgemeine Freigabe Vorrang.
</p></div></div><div class="section_3"><h4 id="In-der-Konsole">In der Konsole<a class="headerlink" href="#In-der-Konsole">¶</a></h4><p>
Ordner können auch direkt in der Shell freigegeben werden. Der Befehl hierfür lautet <code class="notranslate">net usershare add</code>. Beispiele:</p><ul><li><p>Anonymer, lesender Zugriff: </p><div class="bash"><div class="contents"><pre class="notranslate">net usershare add Sharename /pfad/zu/ordner "Kommentar" Everyone:r guest_ok=y </pre></div></div></li></ul><p>
</p><ul><li><p>Lese- und Schreibzugriff für den Benutzer <strong>user</strong>: </p><div class="bash"><div class="contents"><pre class="notranslate">net usershare add Sharename /pfad/zu/ordner "Kommentar" user:f </pre></div></div></li></ul><p>
</p><ul><li><p>Zugriff für jeden außer <em>eviluser</em>: </p><div class="bash"><div class="contents"><pre class="notranslate">net usershare add Sharename /pfad/zu/ordner "Kommentar" Everyone:r,eviluser:d </pre></div></div><p> <code class="notranslate">f</code> steht hierbei für "Full Access", <code class="notranslate">r</code> für "read-only" (schreibgeschützt) und <code class="notranslate">d</code> für "deny" (kein Zugriff).</p></li></ul><p>
Mit Hilfe von 
</p><div class="bash"><div class="contents"><pre class="notranslate">net usershare list # Kurzinfo, nur Sharenamen angeben
net usershare info # Detailinfo, Pfad, Kommentar, ACL und Gastzugriff angeben </pre></div></div><p>
können die aktuellen Freigaben überprüft werden und mit Hilfe von</p><div class="bash"><div class="contents"><pre class="notranslate">net usershare delete Sharename </pre></div></div><p>
wieder entfernt werden.</p></div></div></div><div class="section_1"><h2 id="Administrative-Tools">Administrative Tools<a class="headerlink" href="#Administrative-Tools">¶</a></h2><p>
</p><div class="section_2"><h3 id="berpruefen-der-smb-conf">Überprüfen der smb.conf<a class="headerlink" href="#berpruefen-der-smb-conf">¶</a></h3><p>
Um die Konfigurationsdatei <strong>/etc/samba/smb.conf</strong> auf eine gültige Syntax überprüfen zu lassen, wird <strong>testparm</strong> verwendet:</p><div class="bash"><div class="contents"><pre class="notranslate">testparm </pre></div></div><p>
Läuft die Ausgabe korrekt durch, sind zumindest keine Syntaxfehler enthalten.</p></div><div class="section_2"><h3 id="Server-neu-starten">Server (neu) starten<a class="headerlink" href="#Server-neu-starten">¶</a></h3><p>
Nachdem man Änderungen an der Samba-Konfiguration vorgenommen hat, kann Samba neu gestartet <sup><a href="#source-4">[4]</a></sup> werden, damit die Änderungen sofort wirksam werden. Dies erfolgt aus einem Terminal <sup><a href="#source-2">[2]</a></sup> heraus mit dem Befehl:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service smbd restart </pre></div></div><p>Der Samba-Server liest die Konfigurationsdatei aber auch im Intervall von ca. 90 Sekunden regelmäßig ein. Dann werden die Änderungen auch ohne Neustart von Samba selbstständig übernommen.</p></div></div><div class="section_1"><h2 id="Probleme-mit-Windows">Probleme mit Windows<a class="headerlink" href="#Probleme-mit-Windows">¶</a></h2><p>
Falls unter Windows die Performance deutlich zu langsam ist (hauptsächlich Windows 7), hilft unter Umständen eine Abschaltung der "Remote Differential Compression" in der Systemsteuerung von Windows.</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><div class="section_2"><h3 id="Verwandte-Seiten">Verwandte Seiten<a class="headerlink" href="#Verwandte-Seiten">¶</a></h3><p>
</p><ul><li><p><a class="internal" href="./samba_server_gnome.html">Samba Server GNOME</a> - Die graphische Konfiguration von Freigaben mit <a class="internal" href="./gnome.html">GNOME</a> oder <a class="internal" href="./unity.html">Unity</a>. Diese Seite enthält auch eine Beschreibung des Konfigurations-Tools "system-config-samba", das sich auch mit anderen graphischen Oberflächen verwenden lässt, und ist so in Teilen auch für <a class="internal" href="./xfce.html">Xfce</a> (Xubuntu) und <a class="internal" href="./lxde.html">Lxde</a> (Lubuntu) gültig.</p></li><li><p><a class="internal" href="./samba_server/kde.html">Samba Server/KDE</a> - Die graphische Konfiguration von Freigaben mit <a class="internal" href="./kde.html">KDE</a></p></li><li><p><a class="internal" href="./samba_server/smb.conf.html">Samba Server/smb.conf</a> - Eine Einführung in die Konfigurationsdatei <strong>/etc/samba/smb.conf</strong> mit einigen Beispielen.</p></li><li><p><a class="internal" href="./samba_server/net_usershare.html">Samba Server/net usershare</a> - Erstellen persönlicher Freigaben mittels Kommandozeile.</p></li><li><p><a class="internal" href="./samba_server_pdc.html">Samba Server PDC</a> - Eine Beschreibung, wie man Samba-3 als Primary Domain Controller (PDC) nutzen kann.</p></li><li><p><a class="internal missing" href="./howto/samba4-server_als_active-directory_domain-controller.html">Howto/Samba4-Server als Active-Directory Domain-Controller</a> - Eine Beschreibung, wie man Samba-4 als Domaincontroller (DC) betreiben kann.</p></li><li><p><a class="internal" href="./samba_winbind.html">Samba Winbind</a> - Ubuntu an einer Windows Domäne anmelden und die Benutzer am "Active Directory" authentifizieren</p></li><li><p><a class="external" href="http://ctaas.de/linux-install.htm#Linux_Samba_Netzwerk_Dateiserver_einrichten_mit_Papierkorb" rel="nofollow">Samba Datei-Server mit Papierkorb auf den Netzwerkfreigaben (Netzwerklaufwerken)</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Tutorial zur Einrichtung eines Samba Dateiservers mit Papierkorb (mit automatischer Papierkorb-Bereinigung).</p></li><li><p><a class="internal" href="./howto/samba4_als_domaincontroller.html">Howto/Samba4 als Domaincontroller</a></p></li></ul><p>
</p></div><div class="section_2"><h3 id="Ergaenzende-und-weiterfuehrende-Informationen">Ergänzende und weiterführende Informationen<a class="headerlink" href="#Ergaenzende-und-weiterfuehrende-Informationen">¶</a></h3><p>
</p><ul><li><p><a class="external" href="https://www.samba.org/samba/" rel="nofollow">Projektseite</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://us1.samba.org/samba/docs/man/manpages-3/smb.conf.5.html" rel="nofollow">Manpage zu <strong>smb.conf</strong> in lesbarer Form</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://www.oreilly.de/german/freebooks/samba2ger/" rel="nofollow">Open Book "Samba"</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - 2. Auflage, O'Reilly-Verlag, 2003</p></li><li><p><a class="external" href="http://www.zeroathome.de/wordpress/ubuntu-804-server-tutorial-als-pdfhardy-heron/" rel="nofollow">Ubuntu 8.04 Samba Server Tutorial</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> pdf-Datei (Beta-Version).</p></li></ul><p>
</p></div></div></div>
<p class="meta">
<a href="./samba_server/a/revision/941800.html">Diese Revision</a> wurde am 6. Juni 2017 19:57 von <a href="https://ubuntuusers.de/user/Silent-PC/">Silent-PC</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./samba_server.html">Samba Server</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>