<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Logdateien › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./logdateien.html">Logdateien</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Logdateien">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./logdateien/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./logdateien/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./logdateien/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./logdateien/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./logdateien/a/backlinks.html">Logdateien</a></h1>
<div id="page"><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./paketquellen_freischalten.html">Bearbeiten von Paketquellen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Logs">Logs
</a></li><li><a class="crosslink" href="#KDE">KDE
</a></li><li><a class="crosslink" href="#Terminal">Terminal
</a></li><li><a class="crosslink" href="#Logrotate">Logrotate
</a></li><li><a class="crosslink" href="#Log-Konsole">Log-Konsole
</a></li><li><a class="crosslink" href="#Problembehebung">Problembehebung
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/settings.png" class="image-left" src="./_/77029e5e296412d2a9de3b85e231633a4d504aab.png"/>
Protokolldateien oder "Logdateien" (engl. "log files") sind ein wichtiges Konzept eines Linux-Systems. Viele Programme, insbesondere alle Dienste und das System selbst, schreiben derartige Dateien. Dort kann man Fehler des Systems finden, Probleme von Diensten erkennen oder einfach nur verfolgen, was das System im Hintergrund macht.</p><p>Üblicherweise findet man die Protokolldateien im Verzeichnis <strong>/var/log</strong>. Manche Dienste, die z.B. mehrere Dateien schreiben, benutzen Unterverzeichnisse wie z.B. Samba mit <strong>/var/log/samba/</strong>.</p><p>Logdateien sind immer Textdateien, d.h. man kann sie mit jedem beliebigen <a class="internal" href="./editor.html">Texteditor</a> oder Dateibetrachter ansehen. Die Desktop-Umgebungen bringen Werkzeuge mit, um die Protokolle etwas komfortabler zu analysieren. Man kann aber auch das Terminal verwenden.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Ab Ubuntu <a class="internal" href="./15.10.html">15.10</a> ist auch für das Auslesen der Logdateien die Umstellung auf <a class="internal" href="./systemd.html#Protokolle">systemd</a> zu beachten.
</p></div></div><div class="section_1"><h2 id="Logs">Logs<a class="headerlink" href="#Logs">¶</a></h2><p>
Hier sind die Logdateien und ihre Funktion aufgeführt, die auf einem Ubuntu-System bis einschließlich Ubuntu 14.04 <a class="internal" href="./trusty.html">Trusty</a> vorhanden und relevant für den Benutzer sind. Natürlich gibt es in <strong>/var/log</strong> deutlich mehr Dateien, wenn Dienste nachinstalliert wurden. 
</p><p>
</p><table><tr class="kopf"><td>Logdatei </td><td> Bescheibung </td></tr><tr><td> <strong>acpid</strong> </td><td> Ausgaben der Energieverwaltung. </td></tr><tr><td> <strong>auth.log</strong> </td><td> Alle Versuche, sich am System anzumelden, werden hier protokolliert. Dabei ist egal, ob sich jemand an einer Konsole oder über ssh anmeldet oder versucht wird, per <a class="internal" href="./sudo.html">sudo</a> Root-Rechte zu erlangen. </td></tr><tr><td> <strong>cups</strong> </td><td> Protokoll der <em>Common Unix Printing Services</em>. Druckerprobleme? Hier gibt es mehr zu sehen, insbesondere wenn man in der <strong>/etc/cups/cupsd.conf</strong> die Option <em>"LogLevel debug"</em> setzt. </td></tr><tr><td> <strong>daemon.log</strong> </td><td> Viele Dienste schreiben hier ihre Meldungen hinein, z.B. <em>"mountd"</em> oder <em>"squid"</em>.  Muss ab 11.04 <a class="crosslink" href="#Problembehebung">von Hand aktiviert werden</a>. </td></tr><tr><td> <strong>dmesg</strong> </td><td> Letzte Meldungen des Kernels. Die Informationen stammen aus einem <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Ringpuffer#Ringpuffer">Ringpuffer</a>, d.h., dass alte Meldungen überschrieben werden (siehe auch <a class="internal" href="./dmesg.html">dmesg</a>). Die Datei <strong>kern.log</strong> enthält dagegen auch ältere Meldungen. </td></tr><tr><td> <strong>dpkg</strong> sowie <strong>history.log</strong> in <strong>apt</strong> </td><td> Protokoll der Paketverwaltung. Hier findet man, wann welches Programm installiert, gelöscht oder aktualisiert wurde. </td></tr><tr><td> <strong>kern.log</strong> </td><td> Meldungen des Kernels, z.B. Meldungen, die aus iptables-Regeln heraus entstehen. </td></tr><tr><td> <strong>mail*</strong> </td><td> Hat man einen Mailserver im System installiert, so werden hier die Protokolle geschrieben. </td></tr><tr><td> <strong>mysql</strong> </td><td> Protokoll des MySQL Datenbankservers. </td></tr><tr><td> <strong>postgresql</strong> </td><td> Verzeichnis der Protokolle der Datenbank <em>Postgresql</em>. </td></tr><tr><td> <strong>pppstatus</strong> </td><td> Verzeichnis mit monatlichen Protokollen des <em>pppstatus</em> zur Protokollierung von Internetverbindungen. </td></tr><tr><td> <strong>samba</strong> </td><td> Die Protokolle des <a class="internal" href="./samba.html">Samba</a> Servers. </td></tr><tr><td> <strong>syslog</strong> </td><td> Die Ausgabe des <em>syslogd</em>. Eine Alternative zu Syslog ist das um einige Funktionen erweiterte <a class="internal" href="./syslog-ng.html">syslog-ng</a> </td></tr><tr><td> <strong>user.log</strong> </td><td> Ausgabe von Prozessen, die von Benutzern gestartet wurden. Muss ab 11.04 <a class="crosslink" href="#Problembehebung">von Hand aktiviert werden</a>. </td></tr><tr><td> <strong>Xorg.0.log</strong> </td><td> Ausgabe des <a class="internal" href="./xserver.html">XServers</a>. </td></tr><tr><td> <a class="internal" href="./xserver/xsession-errors.html">~/.xsession-errors</a> </td><td> Ausgaben zahlreicher grafischer Programme in einer versteckten Datei im <a class="internal" href="./homeverzeichnis.html">Homeverzeichnis</a> jedes Benutzers. </td></tr></table></div><div class="section_1"><h2 id="KDE">KDE<a class="headerlink" href="#KDE">¶</a></h2><p>
<img alt="./ksystemlog.jpg" class="image-right" src="./_/0b0844afd91db0612bae995ecf69c0e592db92f0.png"/>
<a class="internal" href="./kde.html">KDE</a> bringt ein Werkzeug zum Betrachten der Logdateien mit, das Programm:</p><ul><li><p><strong>ksystemlog</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install ksystemlog </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install ksystemlog </pre></div></div><p>
</p></div></div><p>
Das Programm ist Teil des <a class="internal" href="./kde_software_compilation.html#KDE-Komponenten">KDE Metapakets</a> <strong>kdeadmin</strong>. Man findet es unter <em>"K-Menü -&gt; System -&gt; Systemprotokoll-Betrachter (KSystemLog)"</em>. Unter <em>"Protokolldateien"</em> kann das zu betrachtende Protokoll ausgewählt und über die Filterzeile nach bestimmten Begriffen gesucht werden. Im Gegensatz zum Systemprotokollbetrachter von GNOME zeigt KSystemLog nur vorgegebene Protokolle an. Möchte man weitere Logdateien auswählen können, so muss man diese von Hand über <em>"Einstellungen -&gt; KSystemLog einrichten"</em> hinzufügen. Am besten fügt man die Protokolle von selbst installierten Diensten zu den <em>"Dienste-Protokollen"</em> hinzu.</p></div><div class="section_1"><h2 id="Terminal">Terminal<a class="headerlink" href="#Terminal">¶</a></h2><p>
Hat man einen Server ohne graphische Oberfläche installiert, so hat man natürlich keine graphischen Werkzeuge zur Verfügung. Protokolle lassen sich dennoch sehr komfortabel in einer Konsole betrachten.</p><div class="section_2"><h3 id="less">less<a class="headerlink" href="#less">¶</a></h3><p>
<a class="internal" href="./less.html">less</a> ist ein Textbetrachter für das Terminal. <em>less</em> kann jede Textdatei ausgeben. Mit den Tasten 
<span class="key">↑</span>  bzw. 
<span class="key">↓</span>  kann man im Protokoll hoch und runter scrollen oder mit 
<span class="key">Bild ↑</span>  bzw. 
<span class="key">Bild ↓</span>  gleich seitenweise hoch oder runter springen.</p><p>Allgemeiner Aufruf:
</p><div class="bash"><div class="contents"><pre class="notranslate">less &lt;logdatei&gt; </pre></div></div><p>
Beispiel:
</p><div class="bash"><div class="contents"><pre class="notranslate">less /var/log/syslog </pre></div></div><p>
Möchte man im Protokoll vorwärts suchen, so kann man mit der Eingabe von</p><pre class="notranslate">/Suchbegriff </pre><p>
also 
<span class="key">⇧</span>  + 
<span class="key">7</span>  und danach das Suchwort, nach einem Begriff suchen. Möchte man zum nächsten Treffer der Suche springen, drückt man die Taste 
<span class="key">N</span> , zum vorangehenden Treffer gelangt man mit 
<span class="key">⇧</span>  + 
<span class="key">N</span> . Möchte man im Protokoll rückwärts suchen, so kann man mit der Eingabe</p><pre class="notranslate">?Suchbegriff </pre><p>
also 
<span class="key">⇧</span>  + 
<span class="key">ß</span>  und danach das Suchwort, nach einem Begriff suchen. Möchte man zum nächsten Treffer der Suche springen, drückt man wieder 
<span class="key">N</span> . Wenn man die Logdatei "verfolgen" möchte, so kann mit 
<span class="key">⇧</span>  + 
<span class="key">F</span>  die Anzeige der Logdatei ständig aktualisieren lassen, so dass Zeilen, die hinzukommen, automatisch angezeigt werden.</p></div><div class="section_2"><h3 id="zless">zless<a class="headerlink" href="#zless">¶</a></h3><p>
<a class="internal" href="./gzip.html">zless</a> ist eine Kombination aus less und <a class="internal" href="./gzip.html">gzip</a>. So lassen sich auch komprimierte Dateien unmittelbar lesen. Unter Ubuntu kann auch less automatisch mit gzip komprimierte Dateien öffnen.</p><p>Allgemeiner Aufruf:
</p><div class="bash"><div class="contents"><pre class="notranslate">zless &lt;logdatei.gz&gt; </pre></div></div><p>
Beispiel:
</p><div class="bash"><div class="contents"><pre class="notranslate">zless /var/log/syslog.1.gz </pre></div></div></div><div class="section_2"><h3 id="tail">tail<a class="headerlink" href="#tail">¶</a></h3><p>
<a class="internal" href="./tail.html">tail</a> ist ebenfalls ein Programm, um Textdateien in einem Terminal anzuzeigen. Es ist jedoch darauf ausgelegt, die letzten Zeilen einer Datei auszugeben. Es ist also ideal, um die aktuellsten Informationen aus einem Protokoll auszugeben.</p><p>Allgemeiner Aufruf:
</p><div class="bash"><div class="contents"><pre class="notranslate">tail &lt;logfile&gt; </pre></div></div><p>
Beispiel:
</p><div class="bash"><div class="contents"><pre class="notranslate">tail /var/log/syslog </pre></div></div><p>
Richtig interessant wird tail erst, wenn es darum geht, Änderungen an einer Logdatei zu verfolgen. Mit den Optionen <code class="notranslate">-f</code> (um Änderungen auszugeben) und <code class="notranslate">-n 0</code> (dies legt die Anzahl der letzten Zeilen, die beim Aufruf von tail ausgegeben werden auf Null fest) werden nur die Zeilen ausgegeben, die nach dem Aufruf des Befehls zum Protokoll hinzugefügt werden.</p><p>Man kann dies gut beobachten. Gibt man z.B. in einem Terminal den Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">tail -f -n 0 /var/log/syslog </pre></div></div><p>
ein und steckt anschließend z.B. einen USB-Speicherstick am Rechner an:</p><pre class="notranslate">Oct 15 00:15:41 isleofskye kernel: [17214570.744000] usb 4-5: new high speed USB device using ehci_hcd and address 4 
Oct 15 00:15:41 isleofskye kernel: [17214570.876000] usb 4-5: configuration #1 chosen from 1 choice
Oct 15 00:15:41 isleofskye kernel: [17214570.876000] scsi4 : SCSI emulation for USB Mass Storage devices
Oct 15 00:15:41 isleofskye kernel: [17214570.880000] usb-storage: device found at 4
Oct 15 00:15:41 isleofskye kernel: [17214570.880000] usb-storage: waiting for device to settle before scanning
Oct 15 00:15:46 isleofskye kernel: [17214575.880000] usb-storage: device scan complete
Oct 15 00:15:46 isleofskye kernel: [17214575.880000]   Vendor: USB007    Model: mini-USB2TX       Rev: 100 
Oct 15 00:15:46 isleofskye kernel: [17214575.880000]   Type:   Direct-Access      
...</pre></div><div class="section_2"><h3 id="MultiTail">MultiTail<a class="headerlink" href="#MultiTail">¶</a></h3><p>
<img alt="./multitail.png" class="image-right" src="./_/a2ae158ce0a6d5615c1be675997e83fc8bb4baf8.png"/> <a class="external" href="http://www.vanheusden.com/multitail/" rel="nofollow">MultiTail</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ermöglicht es, gleichzeitig in einem Terminalfenster mehrere Logdateien im Auge haben. Das Programm lässt sich direkt aus den Paketquellen über das Paket</p><ul><li><p><strong>multitail</strong> (<em>universe</em> <sup><a href="#source-2">[2]</a></sup>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install multitail </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install multitail </pre></div></div><p>
</p></div></div><p>
installieren <sup><a href="#source-1">[1]</a></sup>. Mit dem Programm kann man mehrere Logdateien in beliebigen Zeilen oder Spalten in einem Terminalfenster anzeigen. So behält man auch bei mehreren Protokollen die Übersicht.</p><p>Drei Logdateien untereinander in einer Spalte darstellen:
</p><div class="bash"><div class="contents"><pre class="notranslate">multitail &lt;logdatei1&gt; &lt;logdatei2&gt; &lt;logdatei3&gt; </pre></div></div><p>
Zwei Logdateien nebeneinander in zwei Spalten:
</p><div class="bash"><div class="contents"><pre class="notranslate">multitail -s 2 &lt;logdatei1&gt; &lt;logdatei2&gt; </pre></div></div></div><div class="section_2"><h3 id="ccze">ccze<a class="headerlink" href="#ccze">¶</a></h3><p>
Zur besseren Übersichtlichkeit kann man sich Protokolle mit dem Befehl ccze aus dem Paket  
</p><ul><li><p><strong>ccze</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install ccze </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install ccze </pre></div></div><p>
</p></div></div><p>
auch farbig oder sogar HTML-formatiert anschauen.</p><div class="bash"><div class="contents"><pre class="notranslate">tail -f -n 0 /var/log/syslog | ccze </pre></div></div></div><div class="section_2"><h3 id="lnav">lnav<a class="headerlink" href="#lnav">¶</a></h3><p>
Als Alternative zu ccze kann auch <a class="external" href="http://lnav.org/" rel="nofollow">The Log File Navigator</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> Protokolle farbig anzeigen. Das Programm kann mehrere Dateien aus einem Verzeichnis laden, aktualisiert die Anzeige bei Änderungen, die programminterne Suche unterstützt Autovervollständigung sowie reguläre Ausdrücke, und anhand der Schematik einer Logdateien können Meldungen gefiltert werden. Das Programm kann aus den offiziellen Paketquellen über das folgende Paket installiert<sup><a href="#source-1">[1]</a></sup> werden :</p><ul><li><p><strong>lnav</strong> (<em>universe</em>, ab <a class="internal" href="./trusty.html">Ubuntu 14.04</a>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install lnav </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install lnav </pre></div></div><p>
</p></div></div><p>Beispiele:
</p><ul><li><p>Logdatei(en) auslesen: </p><div class="bash"><div class="contents"><pre class="notranslate">lnav LOGDATEI [LOGDATEI2 LOGDATEI3...] </pre></div></div></li><li><p>Alle Logdateien im Verzeichnis auslesen: </p><div class="bash"><div class="contents"><pre class="notranslate">lnav /PFAD/ZUM/LOGVERZECIHNIS </pre></div></div></li><li><p><strong>/var/log/syslog</strong> auslesen: </p><div class="bash"><div class="contents"><pre class="notranslate">lnav -s </pre></div></div></li><li><p>Fehlermeldungen beim Kompilieren mit Zeitstempel protokollieren: </p><div class="bash"><div class="contents"><pre class="notranslate">make 2&gt;&amp;1 | lnav -t </pre></div></div></li></ul><p>
</p></div><div class="section_2"><h3 id="grep">grep<a class="headerlink" href="#grep">¶</a></h3><p>
<a class="internal" href="./shell/grep.html">grep</a> ist ein Werkzeug, um aus einer Textausgabe bestimmte Zeilen oder Ausdrücke herauszufiltern. Das Programm kann man mit einer <a class="internal" href="./shell/umleitungen.html">Pipe</a> auch mit der Ausgabe eines anderen Programms kombinieren und auch mit <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Regul%C3%A4rer_Ausdruck">regulären Ausdrücken</a> kompliziertere Suchen ausführen.</p><p>Als Beispiel werden zwei Anwendungen aufgeführt. Dies verdeutlicht, dass man mit grep sehr einfach lange Logdateien nach den wichtigen Ausgaben filtern kann.</p><div class="section_3"><h4 id="Beispiel-1">Beispiel 1<a class="headerlink" href="#Beispiel-1">¶</a></h4><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">tail -f - n 0 /var/log/syslog | grep pwc </pre></div></div><pre class="notranslate">Oct 14 14:32:51 isleofskye kernel: [17179594.204000] pwc Philips webcam module version 9.0.2-unofficial loaded. 
Oct 14 14:32:51 isleofskye kernel: [17179594.204000] pwc Supports Philips PCA645/646, PCVC675/680/690, PCVC720[40]/730/740/750 &amp; PCVC830/840.
...</pre></div><div class="section_3"><h4 id="Beispiel-2">Beispiel 2<a class="headerlink" href="#Beispiel-2">¶</a></h4><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">less /var/log/syslog | grep -E '(HIGHMEM|LOWMEM)' </pre></div></div><pre class="notranslate">Oct 13 13:14:22 isleofskye kernel: [17179569.184000] 127MB HIGHMEM available. 
Oct 13 13:14:22 isleofskye kernel: [17179569.184000] 896MB LOWMEM available.
Oct 14 12:53:32 isleofskye kernel: [17179569.184000] 127MB HIGHMEM available.
Oct 14 12:53:32 isleofskye kernel: [17179569.184000] 896MB LOWMEM available.
...</pre></div></div><div class="section_2"><h3 id="zgrep">zgrep<a class="headerlink" href="#zgrep">¶</a></h3><p>
<a class="internal" href="./gzip.html">zgrep</a> ist eine Kombination aus <a class="internal" href="./shell/grep.html">grep</a> und <a class="internal" href="./gzip.html">gzip</a>. So lassen sich komprimierte Dateien unmittelbar durchsuchen. Unter Ubuntu kann auch grep automatisch mit gzip komprimierte Dateien filtern.</p><div class="bash"><div class="contents"><pre class="notranslate"># Allgemein
zgrep &lt;Suchbegriff&gt; &lt;logfile.gz&gt;
# Beispiel
zgrep Error /var/log/syslog.1.gz </pre></div></div><p>
<a class="crosslink anchor" href="#Logrotate" id="Logrotate"></a></p></div></div><div class="section_1"><h2 id="Logrotate">Logrotate<a class="headerlink" href="#Logrotate">¶</a></h2><p>
Damit Logdateien nicht unbeschränkt wachsen und irgendwann die Festplatte belegen, wird bei der Installation eines Linux Systems meistens auch der Dienst <em>"logrotate"</em> installiert. Dies ist auch bei Ubuntu der Fall bzw. kann über das gleichnamige Paket nachgeholt werden.</p><p>Logrotate wurde entwickelt, um die Verwaltung von Logdateien zu vereinfachen. Die Dateien können automatisch komprimiert, gelöscht oder per Mail verschickt werden. Logrotate kann dies täglich, wöchentlich, monatlich durchführen oder wenn eine Logdatei eine vorgegebene Größe überschreitet. Üblicherweise wird Logrotate einmal am Tag aktiv.</p><p>Am Beispiel des <em>"Syslogs"</em> kann man sehen, wie logrotate arbeitet. Schaut man sich die Dateien in <strong>/var/log</strong> an, die den Namen <em>"syslog"</em> tragen:</p><div class="bash"><div class="contents"><pre class="notranslate">ls -al /var/log/syslog* </pre></div></div><p>
so sieht man acht Dateien. Die aktuelle "syslog", die unkomprimierte "syslog.0" vom Vortag und die "syslog"-Dateien der sechs Tage davor, die in der Zwischenzeit komprimiert wurden. Am achten Tag werden dann die Logdateien gelöscht.</p><pre class="notranslate">-rw-r----- 1 root adm  82484 2006-10-15 00:29 syslog 
-rw-r----- 1 root adm 163497 2006-10-14 13:06 syslog.0
-rw-r----- 1 root adm  23503 2006-10-13 01:30 syslog.1.gz
-rw-r----- 1 root adm  36587 2006-10-12 11:18 syslog.2.gz
-rw-r----- 1 root adm  38361 2006-10-11 02:47 syslog.3.gz
-rw-r----- 1 root adm  97953 2006-10-10 17:53 syslog.4.gz
-rw-r----- 1 root adm  46201 2006-10-09 11:05 syslog.5.gz
-rw-r----- 1 root adm  35665 2006-10-06 17:21 syslog.6.gz</pre><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Um genau zu sein, wird syslog nicht von Logrotate gepackt, sondern von einem <a class="internal" href="./cron.html">Cronjob</a> (sysklogd unter <strong>/etc/cron.daily/</strong> bzw. <strong>/etc/cron.weekly/</strong>). Dies betrifft auch andere Dateien wie z. B. <strong>auth.log</strong>. Eine vollständige Liste kann man sich mit dem Befehl <code class="notranslate">syslogd-listfiles -a</code> <sup><a href="#source-3">[3]</a></sup> anzeigen lassen.
</p></div></div><p>Gesteuert wird Logrotate über Dateien in <strong>/etc/logrotate.d</strong>. Als Beispiel wird hier das Rotieren des Logs des Anonymisier-Dienstes <a class="internal" href="./tor.html">Tor</a> erklärt.</p><pre class="notranslate">/var/log/tor/*log { 
        daily                   # täglich
        rotate 5                # Behalte die letzten fünf Tage
        compress                # Komprimiere die alten Logdateien
        delaycompress           # Komprimiere die Daten, nachdem sie verschoben worden sind
        missingok               # Falls eine Logdatei nicht existiert, ignoriere es
        notifempty              # Leere Logdateien werden nicht rotiert
        sharedscripts           # Siehe Man-Page
        postrotate              # Führe nach dem Rotieren das folgende Skript aus
                /etc/init.d/tor reload &gt; /dev/null
        endscript
}</pre><p>
Weiterführende Erklärungen findet man in der <a class="external" href="http://www.linux-praxis.de/lpic1/manpages/logrotate.html" rel="nofollow">deutschen Man-Page zu Logrotate</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> .</p></div><div class="section_1"><h2 id="Log-Konsole">Log-Konsole<a class="headerlink" href="#Log-Konsole">¶</a></h2><p>
Es ist möglich, den Inhalt der Datei <code class="notranslate">syslog</code> auf einer <a class="internal" href="./terminal.html#Virtuelle-Konsole">virtuellen Konsole</a> auszugeben. Dann kann man jederzeit einen Blick hineinwerfen, ohne umständlich die Datei öffnen zu müssen. Es gibt mehrere Möglichkeiten, eine Log-Konsole einzurichten. Man kann den syslog-Daemon so konfigurieren, dass er Meldungen direkt in eine virtuelle Konsole schreibt, oder man kann einen Pager (z.B. <a class="crosslink" href="#less">less</a>) auf einer Konsole laufen lassen. Letzteres hat den Vorteil, dass man scrollen und suchen kann.</p><p>Eine dritte Variante verwendet das Paket</p><ul><li><p><strong>console-log</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install console-log </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install console-log </pre></div></div><p>
</p></div></div><p>
das automatisch eine Log-Konsole einrichtet. Standardmäßig werden das <a class="internal" href="./postfix.html">Postfix</a>-Log auf Konsole 8 und das <code class="notranslate">syslog</code> auf Konsole 9 ausgegeben. Diese Einstellungen lassen sich in der Datei <strong>/etc/console-log.conf</strong> anpassen.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Anscheinend funktioniert <strong>console-log</strong> unter <a class="internal" href="./vivid.html">Ubuntu 15.04</a> derzeit nicht (<a class="interwiki interwiki-bug" href="https://launchpad.net/bugs/1453997">1453997</a>).
</p></div></div><div class="section_2"><h3 id="ttyrec">ttyrec<a class="headerlink" href="#ttyrec">¶</a></h3><p>
Manchmal kann es auch interessant sein, den Verlauf einer Terminalsitzung aufzuzeichnen. Dazu eignet sich z.B. <a class="internal" href="./ttyrec.html">ttyrec</a>.</p></div></div><div class="section_1"><h2 id="Problembehebung">Problembehebung<a class="headerlink" href="#Problembehebung">¶</a></h2><p>
</p><div class="section_2"><h3 id="Rsyslog-Daemon-Erstellen-von-Logdateien-anpassen">Rsyslog-Dämon - Erstellen von Logdateien anpassen<a class="headerlink" href="#Rsyslog-Daemon-Erstellen-von-Logdateien-anpassen">¶</a></h3><p>
Für das Erstellen der Logdateien ist der Dienst <code class="notranslate">rsyslogd</code> zuständig. Dieser wurde automatisch über das Paket <strong>rsyslog</strong> installiert. Über ihn kann man Probleme mit Logdateien selbst beheben oder gezielt steuern, was wann wo wie protokolliert werden soll. Seine wichtigsten System-Dateien sind:</p><ul><li><p><strong>/etc/default/rsyslog</strong></p></li><li><p><strong>/etc/init.d/rsyslog</strong> - Symlink zum Upstart-Initskript (siehe nächster Punkt)</p></li><li><p><strong>/etc/init/rsyslog.conf</strong></p></li><li><p><strong>/etc/rsyslog.conf</strong></p></li><li><p><strong>/etc/rsyslog.d/50-default.conf</strong> - die zentrale Konfigurationsdatei</p></li><li><p><strong>/usr/sbin/rsyslogd</strong> - die Programmdatei</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Den-Rsyslog-Daemon-temporaer-in-den-Debug-Modus-versetzen">Den Rsyslog-Dämon temporär in den Debug-Modus versetzen<a class="headerlink" href="#Den-Rsyslog-Daemon-temporaer-in-den-Debug-Modus-versetzen">¶</a></h3><p>
Manchmal – vor allem aber dann, wenn man einer eventuellen Fehlfunktion des Systems oder aber seiner Bestandteile auf die Spur kommen will – möchte man den Dienst <code class="notranslate">rsyslogd</code> zeitweilig etwas empfindlicher stellen. Dafür muss man zuerst den <code class="notranslate">rsyslogd</code> stoppen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service rsyslog stop </pre></div></div><p>
Dann startet man den <code class="notranslate">rsyslogd</code> manuell im Debug-Modus:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /usr/sbin/rsyslogd -dn </pre></div></div><p>
In Folge dessen wird der Protokollant allerlei Debugmeldungen auf dem Terminal produzieren. Hat man dann endlich genug von dem ganzen Zinnober, so unterbreche man selbiges mit 
<span class="key">Strg</span>  + 
<span class="key">C</span>  und starte danach schließlich wieder den Rsyslog-Dämon:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service rsyslog start </pre></div></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="./logwatch.html">Logwatch</a> - Kurzfassung von Logdateien erstellen und optional versenden</p></li><li><p><a class="external" href="http://askubuntu.com/questions/280944/what-automated-intrusion-notification-detection-setup-is-good-for-home-desktop-u" rel="nofollow">Logcheck</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Alternative zu Logwatch</p></li><li><p><a class="external" href="http://de.linwiki.org/wiki/Linuxfibel_-_System-Administration_-_Protokollierung" rel="nofollow">Die Linuxfibel über Protokollierung</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./logdateien/a/revision/945257.html">Diese Revision</a> wurde am 5. Dezember 2017 16:42 von <a href="https://ubuntuusers.de/user/sdx23/">sdx23</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./logdateien.html">Logdateien</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>