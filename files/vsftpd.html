<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>vsftpd › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./vsftpd.html">vsftpd</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/vsftpd">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./vsftpd/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./vsftpd/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./vsftpd/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./vsftpd/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./vsftpd/a/backlinks.html">vsftpd</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Konfiguration">Konfiguration
</a><ol class="arabic"><li><a class="crosslink" href="#Anonyme-Logins-zulassen">Anonyme Logins zulassen
</a></li><li><a class="crosslink" href="#Lokale-Benutzer-zulassen">Lokale Benutzer zulassen
</a></li><li><a class="crosslink" href="#Globales-Schreiben-de-aktivieren">Globales Schreiben (de-)aktivieren
</a></li><li><a class="crosslink" href="#Anonymen-Benutzern-das-Schreiben-Loeschen-und-Herunterladen-erlauben">Anonymen Benutzern das Schreiben, Lösche...</a></li><li><a class="crosslink" href="#Anonymen-Benutzern-das-Erstellen-von-Verzeichnissen-erlauben">Anonymen Benutzern das Erstellen von Ver...</a></li><li><a class="crosslink" href="#Lokale-Benutzer-auf-ihr-Homeverzeichnis-beschraenken">Lokale Benutzer auf ihr Homeverzeichnis ...</a></li><li><a class="crosslink" href="#Weitere-Optionen">Weitere Optionen
</a></li></ol></li><li><a class="crosslink" href="#berwachen">Überwachen
</a><ol class="arabic"><li><a class="crosslink" href="#ber-Log-Datei">Über Log-Datei
</a></li><li><a class="crosslink" href="#ber-System-Prozessliste">Über System-Prozessliste
</a></li><li><a class="crosslink" href="#SSL-Zertifikat-erzeugen">SSL-Zertifikat erzeugen
</a></li></ol></li><li><a class="crosslink" href="#Server-starten-stoppen">Server starten/stoppen
</a></li><li><a class="crosslink" href="#FTP-Benutzer-ohne-Shellzugang">FTP-Benutzer ohne Shellzugang
</a></li><li><a class="crosslink" href="#Probleme">Probleme
</a><ol class="arabic"><li><a class="crosslink" href="#Fehler-refusing-to-run-with-writable-root">Fehler "refusing to run with writable ro...</a></li><li><a class="crosslink" href="#Loesung-refusing-to-run-with-writable-root">Lösung "refusing to run with writable ro...</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/service.png" class="image-left" src="./_/afb6c1869d3e3412cb022363511bce77dccf937a.png"/>
<a class="external" href="https://security.appspot.com/vsftpd.html" rel="nofollow">vsftpd</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ist ein FTP-Server, der sehr bewusst auf Sicherheit ausgelegt ist. So überprüft das Programm z.B. vor dem Start seine eigene Konfiguration und die Rechte aller Dateien auf die es zugreifen soll und verweigert den Start bei einer eventuell falschen Konfiguration.</p><p>Des Weiteren ist vsftpd der einzige FTP-Server im <em>"main"</em>-Zweig der Ubuntu-Distribution, d.h. er wird garantiert gepflegt und mit Sicherheitsupdates versorgt. Bei anderen FTP-Servern aus den <em>"universe/multiverse"</em>-Zweigen muss dies nicht der Fall sein.</p><p>Zu guter Letzt ist vsftpd sehr einfach einzurichten. Ohne umständliche Konfigurationsdateien zu wälzen, kann man die lokalen Benutzer auf ihr Homeverzeichnis zugreifen lassen oder einen anonymen FTP-Zugang einrichten.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
vsftpd kann direkt aus den Ubuntu-Quellen installiert werden. Dazu ist lediglich das folgende Paket zu installieren <sup><a href="#source-1">[1]</a></sup>:</p><ul><li><p><strong>vsftpd</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install vsftpd </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install vsftpd </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="Konfiguration">Konfiguration<a class="headerlink" href="#Konfiguration">¶</a></h2><p>
Nach der Installation muss die Konfigurationsdatei <strong>/etc/vsftpd.conf</strong> an die eigenen Bedürfnisse mit einem Editor <sup><a href="#source-3">[3]</a></sup> angepasst werden. Die Datei ist ausführlich kommentiert. Die wichtigsten Einstellungen werden trotzdem im folgenden erklärt.</p><div class="section_2"><h3 id="Anonyme-Logins-zulassen">Anonyme Logins zulassen<a class="headerlink" href="#Anonyme-Logins-zulassen">¶</a></h3><p>
vsftpd ist von Haus aus so konfiguriert, dass anonyme Benutzer sich nicht einloggen dürfen. 
Durch Editieren der Datei <strong>/etc/vsftpd.conf</strong> kann der anonyme Zugriff aber leicht aktiviert werden. Anschließenden startet man nur den vsftp Dämon neu:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service vsftpd restart </pre></div></div></div><div class="section_2"><h3 id="Lokale-Benutzer-zulassen">Lokale Benutzer zulassen<a class="headerlink" href="#Lokale-Benutzer-zulassen">¶</a></h3><p>
Die Standardeinstellung von vsftp ist, dass sich lokale Benutzer per ftp einloggen dürfen. Möchte man dies deaktivieren, so muss man die Option <em>"local_enable=YES"</em> wieder auskommentieren:</p><pre class="notranslate"># Uncomment this to allow local users to log in.
#local_enable=YES</pre><div class="section_3"><h4 id="Zugriff-auf-Benutzer-beschraenken">Zugriff auf Benutzer beschränken<a class="headerlink" href="#Zugriff-auf-Benutzer-beschraenken">¶</a></h4><p>
</p><div class="section_4"><h5 id="Bestimmte-Nutzer-erlauben">Bestimmte Nutzer erlauben<a class="headerlink" href="#Bestimmte-Nutzer-erlauben">¶</a></h5><p>
Um nur bestimmten Benutzern den Login via FTP zu erlauben, müssen folgende Optionen gesetzt werden:</p><pre class="notranslate">userlist_deny=NO
userlist_enable=YES
userlist_file=/etc/vsftpd.user_list</pre></div><div class="section_4"><h5 id="Bestimmte-Nutzer-verbieten">Bestimmte Nutzer verbieten<a class="headerlink" href="#Bestimmte-Nutzer-verbieten">¶</a></h5><p>
Um bestimmten Benutzern den Login via FTP zu verbieten, müssen folgende Optionen gesetzt werden (In diesem Fall wird den restlichen Benutzern der Login gewährt):</p><pre class="notranslate">userlist_deny=YES
userlist_enable=YES
userlist_file=/etc/vsftpd.user_list</pre><p>Die Nutzer werden in beiden Fällen folgendermaßen in die Datei <strong>/etc/vsftpd.user_list</strong> eingetragen:</p><pre class="notranslate">nutzer1
nutzer2
nutzer3</pre></div></div></div><div class="section_2"><h3 id="Globales-Schreiben-de-aktivieren">Globales Schreiben (de-)aktivieren<a class="headerlink" href="#Globales-Schreiben-de-aktivieren">¶</a></h3><p>
In der Basiskonfiguration darf kein Benutzer per ftp schreiben. Weder lokale Benutzer (wenn sie per <em>"local_enable=YES"</em> zugelassen wurden), noch anonyme Benutzer. Erst wenn die Option</p><pre class="notranslate"># Uncomment this to enable any form of FTP write command.
write_enable=YES</pre><p>
aktiviert wurde, dürfen per ftp eingeloggte Benutzer schreiben.</p></div><div class="section_2"><h3 id="Anonymen-Benutzern-das-Schreiben-Loeschen-und-Herunterladen-erlauben">Anonymen Benutzern das Schreiben, Löschen und Herunterladen erlauben<a class="headerlink" href="#Anonymen-Benutzern-das-Schreiben-Loeschen-und-Herunterladen-erlauben">¶</a></h3><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>
Diesen Schritt sollte man nur tun, wenn der FTP-Server keinen Zugang zum Internet hat, sonst muss man sich nicht wundern, wenn der Server früher oder später im Internet entdeckt und für illegale Zwecke missbraucht wird.</p></div></div><p>
Damit anonyme User auf dem FTP-Server Dateien erstellen, löschen und herunterladen können, müssen noch folgende Optionen in die <strong>/etc/vsftpd.conf</strong> <sup><a href="#source-3">[3]</a></sup> eingetragen werden: 
</p><pre class="notranslate">anon_upload_enable=YES
anon_other_write_enable=YES
anon_mkdir_write_enable=YES
anon_world_readable_only=NO</pre><p>
Daten der anonymen Benutzer werden in <strong>/home/ftp</strong> abgelegt. Anonyme Benutzer können jedoch nicht direkt in <strong>/home/ftp</strong> schreiben. Nur in einem Verzeichnis, das man mit den richtigen Rechten anlegen muss. Als Beispiel wird ein <em>"upload"</em>-Verzeichnis angelegt.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mkdir -p /home/ftp/upload
sudo chmod 777 /home/ftp/upload </pre></div></div><p>
Danach können anonyme Benutzer in <em>"/home/ftp/upload"</em> Daten ablegen.</p></div><div class="section_2"><h3 id="Anonymen-Benutzern-das-Erstellen-von-Verzeichnissen-erlauben">Anonymen Benutzern das Erstellen von Verzeichnissen erlauben<a class="headerlink" href="#Anonymen-Benutzern-das-Erstellen-von-Verzeichnissen-erlauben">¶</a></h3><p>
Soll es anonymen Benutzern erlaubt sein Verzeichnisse anzulegen, so muss man ihnen dazu ebenfalls das Recht extra einräumen. Per Default ist diese Option deaktiviert.</p><pre class="notranslate"># Uncomment this if you want the anonymous FTP user to be able to create
# new directories.
anon_mkdir_write_enable=YES</pre></div><div class="section_2"><h3 id="Lokale-Benutzer-auf-ihr-Homeverzeichnis-beschraenken">Lokale Benutzer auf ihr Homeverzeichnis beschränken<a class="headerlink" href="#Lokale-Benutzer-auf-ihr-Homeverzeichnis-beschraenken">¶</a></h3><p>
Die letzte wichtige Option wäre es, die lokalen Benutzer auf ihr Homeverzeichnis - also <strong>/home/benutzername</strong> - zu beschränken.</p><pre class="notranslate"># You may restrict local users to their home directories.  See the FAQ for
# the possible risks in this before using chroot_local_user or
# chroot_list_enable below.
chroot_local_user=YES</pre><p>
Der Kommentar bezüglich der möglichen - sehr leichten - Schwachstelle wird in der <a class="external" href="https://security.appspot.com/vsftpd/FAQ.txt" rel="nofollow">FAQ</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> von vsftpd beantwortet.</p><p>Wer den FTP-Nutzern dennoch den Zugriff auf Daten, die an anderer Stelle gespeichert sind, ermöglichen möchte, kommt mit einem Link zum entsprechenden Ordner nicht weit. Stattdessen kann man aber mit <a class="internal" href="./mount.html">mount</a> und der Option --bind den Ordner an gewünschter Stelle ein weiteres mal einbinden.</p></div><div class="section_2"><h3 id="Weitere-Optionen">Weitere Optionen<a class="headerlink" href="#Weitere-Optionen">¶</a></h3><p>
Neben diesen Standardoptionen, die absolut ausreichen, einen einfachen FTP-Server einzurichten, gibt es noch weitere Optionen, die in der <strong>/etc/vsftpd.conf</strong> eingefügt werden können. Eine vollständige Liste aller Optionen bekommt man in der Man-Page der Konfigurationsdatei.</p><div class="bash"><div class="contents"><pre class="notranslate">man vsftpd.conf </pre></div></div><p>
Da die Hilfeseite auf englisch ist, folgt hier eine Aufstellung der wichtigsten Optionen. Alle aufgeführten Optionen können nach dem Muster <em>"option=wert"</em> zur Konfiguration hinzugefügt werden. Ist eine Option nicht in der <em>"vsftpd.conf"</em> aufgeführt, so wird immer der in der zweiten Spalte angegebene Standardwert genutzt.</p><div class="section_3"><h4 id="Logische-Optionen">Logische Optionen<a class="headerlink" href="#Logische-Optionen">¶</a></h4><p>
</p><table style="width: 90%"><tr style="background-color: #DDDDDD"><td style="width: 20%"> <strong>Option</strong> </td><td style="width: 10%; text-align: center"> <strong>Standardwert</strong> </td><td style="width: 60%"> <strong>Beschreibung</strong> </td></tr><tr><td> <code class="notranslate">download_enable</code> </td><td style="text-align: center"> YES </td><td> Falls man hier NO einsetzt, so sind nur Uploads möglich </td></tr><tr><td> <code class="notranslate">force_anon_logins_ssl</code> </td><td style="text-align: center"> NO </td><td> Wenn <em>"ssl_enable"</em> aktiviert ist, so werden anonyme Benutzer gezwungen, sich über eine SSL-Verbindung einzuloggen. </td></tr><tr><td> <code class="notranslate">force_local_data_ssl</code> </td><td style="text-align: center"> NO </td><td> Wenn <em>"ssl_enable"</em> aktiviert ist, so werden nicht-anonymen Benutzer gezwungen, sich über eine SSL-Verbindung einzuloggen. </td></tr><tr><td> <code class="notranslate">force_local_logins_ssl</code> </td><td style="text-align: center"> NO </td><td> Wenn <em>"ssl_enable"</em> aktiviert ist, so werden lokalen Benutzer gezwungen, sich über eine SSL-Verbindung einzuloggen. </td></tr><tr><td> <code class="notranslate">ssl_enable</code> </td><td style="text-align: center"> NO </td><td> Aktiviert die Möglichkeit, sich über SSL auf dem FTP-Server einzuloggen. </td></tr><tr><td> <code class="notranslate">ssl_sslv2</code> </td><td style="text-align: center"> NO </td><td> Wenn <em>"ssl_enable"</em> aktiviert ist, so erlaubt diese Option auch Logins über SSLv2 zuzulassen. </td></tr><tr><td> <code class="notranslate">userlist_enable</code> </td><td style="text-align: center"> NO </td><td> Falls diese Option aktiviert ist, so werden Benutzer, die in <em>"userlist_file"</em> aufgeführt sind, vom FTP-Server abgelehnt, bevor sie ihr Passswort eingeben können. So wird verhindert, dass diese Benutzer ihr Passwort im Klartext übertragen. </td></tr><tr><td> <code class="notranslate">userlist_deny</code> </td><td style="text-align: center"> YES </td><td> Diese Option wird ausgewertet, wenn <em>"userlist_enable"</em> aktiviert ist. Ist diese Option auf <em>"NO"</em> gesetzt, so werden alle Benutzer abgelehnt, es sei denn sie werden in  <em>"userlist_file"</em> aufgeführt. Diese Option dreht also <em>"userlist_enable"</em> logisch um. </td></tr></table></div><div class="section_3"><h4 id="Numerische-Optionen">Numerische Optionen<a class="headerlink" href="#Numerische-Optionen">¶</a></h4><p>
</p><table style="width: 90%"><tr style="background-color: #DDDDDD"><td style="width: 20%"> <strong>Option</strong> </td><td style="width: 10%; text-align: center"> <strong>Standardwert</strong> </td><td style="width: 60%"> <strong>Beschreibung</strong> </td></tr><tr><td> <code class="notranslate">anon_max_rate</code> </td><td style="text-align: center"> 0 </td><td> Die maximale Übertragungsgeschwindigkeit in byte/sekunde für anonyme Benutzer. 0 bedeudet unlimitiert. </td></tr><tr><td> <code class="notranslate">local_max_rate</code> </td><td style="text-align: center"> 0 </td><td> Die maximale Übertragungsgeschwindigkeit in byte/sekunde für lokale Benutzer. 0 bedeudet unlimitiert. </td></tr><tr><td> <code class="notranslate">ftp_data_port</code> </td><td style="text-align: center"> 20 </td><td> Angabe für den FTP-Data-Port. </td></tr><tr><td> <code class="notranslate">listen_port</code> </td><td style="text-align: center"> 21 </td><td> Angabe für den FTP-Control-Port. </td></tr><tr><td> <code class="notranslate">max_clients</code> </td><td style="text-align: center"> 0 </td><td> Maximale Anzahl der Client, die am FTP-Server angemeldet sein dürfen. </td></tr><tr><td> <code class="notranslate">max_per_ip</code> </td><td style="text-align: center"> 0 </td><td> Maximale Anzahl der Verbindungen von einer IP. </td></tr><tr><td> <code class="notranslate">pasv_min_port</code> </td><td style="text-align: center"> 0 </td><td> Minimale Portnummer, die bei einer passiven Übertragung genutzt wird. </td></tr><tr><td> <code class="notranslate">pasv_max_port</code> </td><td style="text-align: center"> 0 </td><td> Maximale Portnummer, die bei einer passiven Übertragung genutzt wird. </td></tr><tr><td> <code class="notranslate">local_unmask</code> </td><td style="text-align: center"> 077 </td><td> Wert für die <a class="internal" href="./rechte.html#Standard-Einstellung-und-Maskierung">umask</a> bei neu erstellten Ordnern und Dateien. </td></tr></table></div><div class="section_3"><h4 id="String-Optionen">String Optionen<a class="headerlink" href="#String-Optionen">¶</a></h4><p>
</p><table style="width: 90%"><tr style="background-color: #DDDDDD"><td style="width: 20%"> <strong>Option</strong> </td><td style="width: 10%; text-align: center"> <strong>Standardwert</strong> </td><td style="width: 60%"> <strong>Beschreibung</strong> </td></tr><tr><td> <code class="notranslate">anon_root</code> </td><td> /home/ftp </td><td> Verzeichnis, in das anonyme Benutzer geleitet werden. </td></tr><tr><td> <code class="notranslate">userlist_file</code> </td><td> /etc/vsftpd.user_list </td><td> Name und Pfad zur Datei, die ausgelesen wird, wenn die Option <em>"userlist_enable"</em> aktiviert ist. </td></tr></table></div></div></div><div class="section_1"><h2 id="berwachen">Überwachen<a class="headerlink" href="#berwachen">¶</a></h2><p>
</p><div class="section_2"><h3 id="ber-Log-Datei">Über Log-Datei<a class="headerlink" href="#ber-Log-Datei">¶</a></h3><p>
vsftp schreibt ein ausführliches Log über alle Logins und Schreibvorgänge. Dieses findet man unter  <strong>/var/log/vsftpd.log</strong>. Möchte man z.B. die aktuellen Aktivitäten ansehen, so kann man in einem Terminal <sup><a href="#source-2">[2]</a></sup> mit dem Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">sudo tail -f /var/log/vsftpd.log </pre></div></div><p>
den Verlauf des Logs begutachten.</p></div><div class="section_2"><h3 id="ber-System-Prozessliste">Über System-Prozessliste<a class="headerlink" href="#ber-System-Prozessliste">¶</a></h3><p>
Ist die logische Option <strong>setproctitle_enable=YES</strong> in der Konfigurationsdatei <strong>/etc/vsftpd.conf</strong> gesetzt, schreibt vsftpd Statusinformationen in die System-Prozessliste. Der folgende Befehl in einem Terminal <sup><a href="#source-2">[2]</a></sup> zeigt diese Statusinformationen annähernd in Echtzeit an:</p><div class="bash"><div class="contents"><pre class="notranslate">watch ps -C vsftpd -o user,pid,stime,cmd </pre></div></div></div><div class="section_2"><h3 id="SSL-Zertifikat-erzeugen">SSL-Zertifikat erzeugen<a class="headerlink" href="#SSL-Zertifikat-erzeugen">¶</a></h3><p>
Um gesicherte SSL-Verbindungen nutzen zu können muss nach der Installation noch ein Zertifikat erzeugt werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048  -keyout /etc/ssl/private/vsftpd.key -out /etc/ssl/private/vsftpd.pem </pre></div></div><p>Hierbei einfach alle Fragen beantworten, anschließend steht das Zertifikat zur Verfügung.</p></div></div><div class="section_1"><h2 id="Server-starten-stoppen">Server starten/stoppen<a class="headerlink" href="#Server-starten-stoppen">¶</a></h2><p>
Je nach Ubuntu-Version wird vsftpd über <a class="internal" href="./sysvinit.html">SysVinit</a>, <a class="internal" href="./upstart.html">Upstart</a> oder ggf. auch <a class="internal" href="./systemd.html">systemd</a> gesteuert. Details zum Thema Dienste steuern sowie zu den Unterschieden findet man im Wiki unter <a class="internal" href="./dienste.html">Dienste</a>. Hier sind die Befehle für SysVinit (so war es unter Ubuntu 16.04.01 konfiguriert):</p><div class="bash"><div class="contents"><pre class="notranslate"># Allgemein
sudo service vsftpd {start|stop|restart}
# Beispiel: vsftp starten
sudo service vsftpd start </pre></div></div></div><div class="section_1"><h2 id="FTP-Benutzer-ohne-Shellzugang">FTP-Benutzer ohne Shellzugang<a class="headerlink" href="#FTP-Benutzer-ohne-Shellzugang">¶</a></h2><p>
Möchte man nicht, dass die erstellten Benutzer auch via SSH auf den Rechner zugreifen können, so muss die Shell des Benutzers in der <strong>/etc/passwd</strong> auf <strong>/bin/false</strong> gesetzt werden. Zum Beispiel:
</p><pre class="notranslate">user:x:1000:1000::/srv/ftp/user:/bin/false</pre><p>Wenn es danach Probleme beim FTP-Login geben sollte (530 Login incorrect), liegt das daran, dass <strong>/bin/false</strong> nicht als Shell im System hinterlegt ist. Dann muss die Shell noch in die Datei <strong>/etc/shells</strong> eingetragen werden.</p></div><div class="section_1"><h2 id="Probleme">Probleme<a class="headerlink" href="#Probleme">¶</a></h2><p>
</p><div class="section_2"><h3 id="Fehler-refusing-to-run-with-writable-root">Fehler "refusing to run with writable root"<a class="headerlink" href="#Fehler-refusing-to-run-with-writable-root">¶</a></h3><p>
Ein mögliches Problem könnte diese Meldung sein:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="m">500</span> OOPS: vsftpd: refusing to run with writable root inside chroot<span class="o">()</span>
</pre></div>
</td></tr></table></div><p>
Das ist kein Fehler sondern ein Sicherheitsfeature
</p><ul><li><p>&gt; The official reason is “Disallow login with writable root directory because of possible glibc vulnerabilities”</p></li></ul><p>Übersetzung: Login verweigern, sollte das root directory beschreibbar sein, wegen der möglichen Verwundbarkeiten der glibc Bibliothek.
</p></div><div class="section_2"><h3 id="Loesung-refusing-to-run-with-writable-root">Lösung "refusing to run with writable root"<a class="headerlink" href="#Loesung-refusing-to-run-with-writable-root">¶</a></h3><p>
(Referenz: Forum Link <a class="crosslink" href="http://forum.ubuntuusers.de/topic/vsftpd-bug-econnrefused-connection-refused-by-/">uu-Forum</a>)
entweder 
</p><ul><li><p>patchen siehe <a class="crosslink" href="http://forum.ubuntuusers.de/topic/12-04lts-server-vsftpd-2-3-5-500-oops-vsftpd-r/3/#post-4557407" title="http://forum.ubuntuusers.de/topic/12-04lts-server-vsftpd-2-3-5-500-oops-vsftpd-r/3/#post-4557407">http://forum.ubuntuusers.de/topic/12-04lts-server-vsftpd-2-3-5-500-oops-vsftpd-r/3/#post-4557407</a></p></li></ul><p>oder
</p><ul><li><p>Rechte ändern - Konfiguration so ändern, dass wieder schreiben möglich ist...</p></li></ul><p>oder
</p><ul><li><p>Unterordner verwenden - Änderungen nur in einem Unterordner erlauben</p></li></ul><div class="section_3"><h4 id="Rechte-aendern">Rechte ändern<a class="headerlink" href="#Rechte-aendern">¶</a></h4><p>
einfach
</p><pre class="notranslate">allow_writeable_chroot=YES</pre><p>
in die vsftpd.conf einfügen.
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>das ermöglicht aber wieder das Beschreiben des root und ist ein mögliches Sicherheitsrisiko!
</p></div></div></div><div class="section_3"><h4 id="Unterordner-verwenden">Unterordner verwenden<a class="headerlink" href="#Unterordner-verwenden">¶</a></h4><p>
Hierzu wird zunächst ein Unterordner angelegt. Anschließend werden die rechte so geändert,
sodass Dateien nur in dem Unterordner abgelegt werden können.
Dies ermöglicht die Funktion ohne Sicherheitseinbußen.
</p><div class="bash"><div class="contents"><pre class="notranslate">mkdir -p /home/BENUTZERNAME/upload
chmod 550 /home/BENUTZERNAME
chmod 750 /home/BENUTZERNAME/upload </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="https://security.appspot.com/vsftpd.html" rel="nofollow">Projektseite</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p><a class="external" href="https://security.appspot.com/vsftpd/FAQ.txt" rel="nofollow">FAQ</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://web.archive.org/web/20080609080118/archiv.debianhowto.de/de/vsftpd/" rel="nofollow">vsftpd HOWTO auf debianhowto.de</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li><li><p><a class="external" href="http://ctaas.de/linux-install.htm#vsftpd_installieren_FTP-Server_FTPS-Server" rel="nofollow">FTP-Server/FTPS-Server einrichten</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Tutorial: Grundeinrichtung, Absicherung mit Zertifikaten, separate FTP User anlegen, Schreibzugriffe anpassen (FTP-Wurzelverzeichnis) sowie Client Zugriffsmöglichkeiten.</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./vsftpd/a/revision/944688.html">Diese Revision</a> wurde am 4. November 2017 23:51 von <a href="https://ubuntuusers.de/user/BillMaier/">BillMaier</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./vsftpd.html">vsftpd</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>