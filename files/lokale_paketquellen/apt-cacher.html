<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Lokale_Paketquellen/apt-cacher › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../lokale_paketquellen/apt-cacher.html">apt-cacher</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Lokale_Paketquellen/apt-cacher">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../lokale_paketquellen/apt-cacher/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../lokale_paketquellen/apt-cacher/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../lokale_paketquellen/apt-cacher/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../lokale_paketquellen/apt-cacher/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../lokale_paketquellen/apt-cacher/a/backlinks.html">apt-cacher</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
Dieser Artikel ist mit keiner aktuell unterstützten Ubuntu-Version getestet! Bitte diesen Artikel testen und das getestet-Tag entsprechend anpassen.
</p></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../sudo.html">Root-Rechte</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../paketverwaltung.html">Paketverwaltung</a></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="../sources.list.html">sources.list</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Voraussetzungen">Voraussetzungen
</a></li><li><a class="crosslink" href="#Installation-von-apt-cacher-auf-dem-Server">Installation von apt-cacher auf dem Server...</a></li><li><a class="crosslink" href="#Konfiguration-des-Servers">Konfiguration des Servers
</a><ol class="arabic"><li><a class="crosslink" href="#etc-apt-cacher-apt-cacher-conf">/etc/apt-cacher/apt-cacher.conf
</a></li><li><a class="crosslink" href="#etc-default-apt-cacher">/etc/default/apt-cacher
</a></li></ol></li><li><a class="crosslink" href="#Konfiguration-der-Clients">Konfiguration der Clients
</a></li><li><a class="crosslink" href="#Weitere-Aktionen-mit-apt-cacher">Weitere Aktionen mit apt-cacher
</a><ol class="arabic"><li><a class="crosslink" href="#Cache-des-lokalen-Systems-importieren">Cache des lokalen Systems importieren
</a></li><li><a class="crosslink" href="#Probleme-mit-dem-Webinterface">Probleme mit dem Webinterface
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><a class="external" href="http://www.nick-andrew.net/projects/apt-cacher/" rel="nofollow">apt-cacher</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ist ein Programm, welches die Belastung der Internetanbindung durch Updates verringert, sobald zwei oder mehr Debian-basierte (also auch Ubuntu und Derivate) Rechner über diesen Zwischenspeicher (Cache) auf die gleichen Paketquellen zugreifen. So werden Debian-Pakete, die auf beiden (allen) Rechnern benötigt werden, nur einmal aus dem Internet heruntergeladen.</p><p>Das Programm verwendet einen Webserver <a class="internal" href="../apache.html">Apache</a> um den Clients den Cache über HTTP bereit zu stellen. Jedoch wird kein Spiegelserver (wie bei <a class="internal" href="../apt-mirror.html">apt-mirror</a>) erzeugt, sondern nur die bereits durch andere Systeme angeforderten Pakete bereitgestellt.</p><p>Mittlerweile gibt es eine Neuimplementierung von apt-cacher namens <a class="internal" href="../lokale_paketquellen/apt-cacher-ng.html">Apt-Cacher-ng</a>. Diese kommt ohne Webserver aus. Weitere Programme mit ähnlichen Funktionen sind im Artikel <a class="internal" href="../lokale_paketquellen.html">Lokale Paketquellen</a> zu finden.</p><div class="section_1"><h2 id="Voraussetzungen">Voraussetzungen<a class="headerlink" href="#Voraussetzungen">¶</a></h2><p>
Die Installation setzt einen funktionierenden <a class="internal" href="../apache.html">Apache-Server</a> (wird nicht automatisch mit installiert) voraus.</p></div><div class="section_1"><h2 id="Installation-von-apt-cacher-auf-dem-Server">Installation von apt-cacher auf dem Server<a class="headerlink" href="#Installation-von-apt-cacher-auf-dem-Server">¶</a></h2><p>
Zu installierende Pakete <sup><a href="#source-1">[1]</a></sup>:</p><ul><li><p><strong>apt-cacher</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install apt-cacher </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install apt-cacher </pre></div></div><p>
</p></div></div><p><img alt="./apache_funktion.png" class="image-right" src="../_/1055e65bd54186fae01962d03bb27d48c57a4631.png"/></p><p>Um die Funktionstüchtigkeit des Apache-Webservers sicher zu stellen, sollte an dieser Stelle die Adresse <code class="notranslate">http://localhost/</code> in einem beliebigem Browser aufgerufen werden (bei einem Server ohne Browser kann von einem anderem Rechner einfach die IP des Servers aufgerufen werden). Das Ergebnis sollte wie nebenstehend aussehen.</p></div><div class="section_1"><h2 id="Konfiguration-des-Servers">Konfiguration des Servers<a class="headerlink" href="#Konfiguration-des-Servers">¶</a></h2><p>
Zur Konfiguration des Servers müssen lediglich zwei Dateien bearbeitet werden:</p><div class="section_2"><h3 id="etc-apt-cacher-apt-cacher-conf">/etc/apt-cacher/apt-cacher.conf<a class="headerlink" href="#etc-apt-cacher-apt-cacher-conf">¶</a></h3><p>
Dies ist die "Haupt-Konfigurationsdatei" von apt-cacher. Sie ist gut dokumentiert (auf Englisch).</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Zum Bearbeiten der Datei benötigt man einen Editor <sup><a href="#source-2">[2]</a></sup> mit Root-Rechten <sup><a href="#source-3">[3]</a></sup>.
</p></div></div><pre class="notranslate">cache_dir=/var/cache/apt-cacher</pre><p>gibt das Verzeichnis für den Cache an. Wenn es nicht existiert, wird es beim nächsten Start von apt-cacher angelegt.</p><pre class="notranslate">admin_email=root@localhost</pre><p>hiermit kann eine E-Mail-Adresse für den "Verkehrsbericht" und die Status-Seite definiert werden.</p><pre class="notranslate">daemon_port=3142</pre><p>legt den Port fest, über den apt-cacher von Apt erreichbar ist (wichtig für die Client-Konfiguration).</p><pre class="notranslate">group=www-data
user=www-data</pre><p>legt Benutzernamen und -Gruppe fest, unter dessen Namen apt-cacher ausgeführt wird.</p><pre class="notranslate">allowed_hosts=192.168.0.0/24
denied_hosts=</pre><p>legt die Netzwerkadressen (IPv4) fest, denen die Nutzung des Caches erlaubt bzw. verboten ist. Angaben können einzelne IPs sein, eine IP mit Maske (wie im Beispiel), oder IP-Ranges (192.168.0.1-192.168.0.254 bedeutet das gleiche wie 192.168.0.0/24).</p><pre class="notranslate">allowed_hosts_6=fec0::/16
denied_hosts_6=</pre><p>legt die Netzwerkadressen (IPv6) fest, denen die Nutzung des Caches erlaubt bzw. verboten ist. Irrelevant, da IPv6 praktisch nicht genutzt wird, nur der Vollständigkeit halber erwähnt.</p><pre class="notranslate">allowed_locations=de.archive.ubuntu.com, archive.canonical.com</pre><p>URLs von denen Updates und Paketlisten geladen werden dürfen. Für den Hausgebrauch auskommentieren (d.h. alle Quellen, die ein Client haben möchte, werden geladen). In diesem Beispiel wären nur die Quellen <code class="notranslate">de.archive.ubuntu.com</code> und <code class="notranslate">archive.canonical.com</code> erlaubt.</p><pre class="notranslate">generate_reports=1</pre><p>legt fest, ob Nutzungsreporte erstellt werden. Üblicherweise nicht erforderlich, es sei denn man möchte sehen, was man seiner Internetanbindung erspart hat.</p><pre class="notranslate">clean_cache=1</pre><p>legt fest, ob apt-cacher aufräumt, d.h. Pakete aus dem Cache entfernt, wenn diese nicht mehr in den aktuellen Paketlisten auftauchen.</p><pre class="notranslate">offline_mode=0</pre><p>im Offline-Modus werden keine Dateien aus dem Internet geladen, sondern lediglich bereits vorhandene Dateien verteilt.</p><pre class="notranslate">logdir=/var/log/apt-cacher</pre><p>legt das Verzeichnis für Logfiles fest.</p><pre class="notranslate">expire_hours=0</pre><p>legt fest, wann (nach wie vielen Stunden) Paketlisten bei einem Update erneuert werden sollen. Bei dem Wert <code class="notranslate">0</code> wird der Header verglichen und dann entschieden, ob die Paketliste erneuert werden muss.</p><pre class="notranslate">http_proxy=proxy.example.com:8080
use_proxy=0
http_proxy_auth=proxyuser:proxypass
use_proxy_auth=0</pre><p>legt Proxyeinstellungen fest, falls man einen Proxyserver/Firewallsystem nutzt.</p><pre class="notranslate">limit=0</pre><p>Beschränkung der Downloadrate in Bits/s. "0" bedeutet keine Beschränkung, <code class="notranslate">k</code> und <code class="notranslate">m</code> können verwendet werden um Angaben in Kilobit/s bzw. Megabit/s zu machen.</p><pre class="notranslate">debug=1</pre><p>fügt Debug-Informationen zum Errorlog hinzu (Pfad siehe logdir).</p><pre class="notranslate">checksum=1</pre><p>legt fest, ob Checksummen verwendet werden (benötigt zusätzlich das Paket <strong>libdbd-sqlite3-perl</strong>!)</p><pre class="notranslate">path_map = ubuntu-ger de.archive.ubuntu.com/ubuntu ; ubuntu archive.ubuntu.com/ubuntu; ubuntu-updates archive.ubuntu.com/ubuntu ; ubuntu-security security.ubuntu.com/ubuntu</pre><p>legt symbolische Namen fest. Diese können in der <a class="internal" href="../sources.list.html">sources.list</a> verwendet werden. <a class="crosslink anchor" href="#Symbolische_Namen" id="Symbolische_Namen"></a></p><p>Z.B. wäre jetzt:</p><pre class="notranslate">ubuntu-ger de.archive.ubuntu.com</pre><pre class="notranslate">deb http://SERVER:PORT/apt-cacher/ubuntu-ger hardy universe</pre><p>das gleiche wie:</p><pre class="notranslate">deb http://de.archive.ubuntu.com/ubuntu/ hardy universe</pre><p>Für <code class="notranslate">SERVER</code> wird die IP oder der Name (bei funktionierendem DNS) des Servers eingetragen (<code class="notranslate">localhost</code>, wenn auf dem gleichem System apt-cacher läuft). Für <code class="notranslate">PORT</code> wird der weiter oben spezifizierte Port eingetragen (Standard: <code class="notranslate">3142</code>).</p></div><div class="section_2"><h3 id="etc-default-apt-cacher">/etc/default/apt-cacher<a class="headerlink" href="#etc-default-apt-cacher">¶</a></h3><p>
In dieser Datei wird lediglich festgelegt, ob apt-cacher beim Systemstart mit gestartet wird (Normalfall). In besonderen Fällen können hier auch der in der <strong>apt-cacher.conf</strong> definierte Port oder das "limit" (siehe oben) verändert werden.</p><p>Natürlich sollte auch der Server (also der Rechner, der den Cache bereitstellt) apt-Cacher nutzen, daher wird empfohlen, die Client-Konfiguration ebenfalls auf dem Server durchzuführen.</p><p><img alt="./apt_cacher1.png" class="image-right" src="../_/a67c7fa04eae7fb5cd701d119688964bfc226366.png"/></p><p>Um die neue Konfiguration zu übernehmen sollte jetzt folgender Befehl ausgeführt werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/apt-cacher restart </pre></div></div><p>Über einen Webbrowser ist jetzt auch die Seite <code class="notranslate">http://localhost/apt-cacher/</code> (bzw. von einem anderem Rechner <code class="notranslate">http://SERVER-IP/apt-cacher/</code> ) erreichbar.</p></div></div><div class="section_1"><h2 id="Konfiguration-der-Clients">Konfiguration der Clients<a class="headerlink" href="#Konfiguration-der-Clients">¶</a></h2><p>
Für die Konfiguration der Clients (zugreifende Rechner) sind vier Möglichkeiten bekannt. Es müssen jeweils <span class="underline">anschließend</span> die Paketlisten erneuert werden (gilt nicht für die Einrichtung über Proxy) <sup><a href="#source-4">[4]</a></sup>.</p><div class="section_2"><div class="section_3"><h4 id="sources-list-bearbeiten">sources.list bearbeiten<a class="headerlink" href="#sources-list-bearbeiten">¶</a></h4><p>
Man ändert die Einträge in der <strong>sources.list</strong><sup><a href="#source-5">[5]</a></sup> wie folgt ab:</p><p>Man schreibt zwischen "http://" und der darauf folgenden Adresse <code class="notranslate">SERVER</code>:<code class="notranslate">PORT</code>. <code class="notranslate">SERVER</code> kann die IP des Hosts von apt-cacher, ein Rechner-Name (bei funktionierender Namensauflösung im LAN -&gt; DNS), oder (wenn der Server auf dem gleichem Rechner läuft) <code class="notranslate">localhost</code> (bzw. 127.0.0.1). Für <code class="notranslate">PORT</code> trägt man den Port der Anwendung auf dem Host ein (Standard: apt-cacher: <code class="notranslate">3142</code>).</p><div class="section_4"><h5 id="Beispiel">Beispiel<a class="headerlink" href="#Beispiel">¶</a></h5><p>
Aus:</p><pre class="notranslate">deb http://de.archive.ubuntu.com/ubuntu/ hardy universe</pre><p>wird (<span class="underline">Annahme:</span> apt-cacher läuft auf dem Rechner mit der IP: 192.168.0.4 mit dem Port:3142):</p><pre class="notranslate">deb http://192.168.0.4:3142/de.archive.ubuntu.com/ubuntu/ hardy universe</pre><p>bzw. wenn der symbolische Name (ubuntu_de de.archive.ubuntu.com/ubuntu/) verwendet wird (siehe <a class="crosslink" href="#Symbolische_Namen">Symbolische Namen</a>):</p><pre class="notranslate">deb http://192.168.0.4:3142/ubuntu_de/ubuntu hardy universe</pre></div></div><div class="section_3"><h4 id="Apt-fuer-Nutzung-eines-Proxys-konfigurieren">Apt für Nutzung eines Proxys konfigurieren<a class="headerlink" href="#Apt-fuer-Nutzung-eines-Proxys-konfigurieren">¶</a></h4><p>
Der schnellste Weg, die Clients für die Nutzung eines Caches/Proxies zu konfigurieren ist einen Proxy für <strong>apt</strong> festzulegen. Dazu muss in der Datei <strong>/etc/apt/apt.conf.d/01proxy</strong> (Dateiname ist ein Beispiel, Datei muss ggf. angelegt werden) Folgendes eingetragen werden:</p><pre class="notranslate">Acquire::http { Proxy "http://SERVER:PORT"; };</pre><p><code class="notranslate">SERVER</code> kann die IP des Hosts von apt-cacher sein, ein Rechner-Name (bei funktionierender Namensauflösung im LAN -&gt; DNS), oder (wenn der Server auf dem selben Rechner läuft) localhost (bzw. 127.0.0.1). Für <code class="notranslate">PORT</code> trägt man den Port der Anwendung auf dem Host ein (Standard: apt-cacher <code class="notranslate">3142</code>). Es können zusätzlich symbolische Namen in der <strong>sources.list</strong> <sup><a href="#source-2">[2]</a></sup> verwendet werden.</p></div><div class="section_3"><h4 id="Konfiguration-ueber-GUI">Konfiguration über GUI<a class="headerlink" href="#Konfiguration-ueber-GUI">¶</a></h4><p>
An dieser Stelle wird auf die Wikiseiten zu den verschiedenen Paketmanagern verwiesen (<a class="internal" href="../synaptic.html">Synaptic</a>, <a class="internal" href="../softwareverwaltung_kde.html">Softwareverwaltung KDE</a>,...). Grundsätzlich sind die selben Operationen wie beim manuellen Bearbeiten der <strong>sources.list</strong> möglich.</p></div><div class="section_3"><h4 id="Einrichtung-ueber-Proxy">Einrichtung über Proxy<a class="headerlink" href="#Einrichtung-ueber-Proxy">¶</a></h4><p>
Wer in seinem Netzwerk einen Proxyserver (z.b. <a class="internal" href="../squid.html">Squid</a>) betreibt, kann die Einrichtung elegant über einen "Redirect" erledigen. Hierzu werden die entsprechenden URLs (z.B. <code class="notranslate">http://de.archive.ubuntu.com</code>) gefiltert und an den Server umgeleitet.</p><p>Diese Art der Konfiguration ist vor allem für Laptops, die in verschiedenen (W-)LANs eingesetzt werden, von Vorteil und erspart in großen Netzwerken (&gt; 20 Teilnehmer) Konfigurationsaufwand.</p><p>Eine Konfiguration auf den einzelnen Clients ist <span class="underline">nicht</span> erforderlich.</p><p>Siehe hierzu: <a class="external" href="http://www.squid-handbuch.de/hb/" rel="nofollow">Squid-Handbuch</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> -&gt; 6.2 Routing-Optionen zu anderen Proxys -&gt; cache_peer_domain</p><p><img alt="./apt_cacher2.png" class="image-right" src="../_/70629180f757ee01b5a7c52577370c10f052062b.png"/></p><p>Bei jedem Update der Paketlisten oder von Paketen werden diese nun in dem Cache abgelegt. Wie effektiv apt-cacher arbeitet, kann man auf der Seite <code class="notranslate">http://localhost/apt-cacher/reports</code> ersehen (sofern Reports aktiviert wurde, von anderen Rechnern <code class="notranslate">localhost</code> durch die IP/den Namen des Servers ersetzen).</p></div></div></div><div class="section_1"><h2 id="Weitere-Aktionen-mit-apt-cacher">Weitere Aktionen mit apt-cacher<a class="headerlink" href="#Weitere-Aktionen-mit-apt-cacher">¶</a></h2><p>
</p><div class="section_2"><h3 id="Cache-des-lokalen-Systems-importieren">Cache des lokalen Systems importieren<a class="headerlink" href="#Cache-des-lokalen-Systems-importieren">¶</a></h3><p>
Es ist möglich, den bisherigen Vorrat an <strong>.deb</strong>-Paketen in apt-cacher zu übernehmen. Dazu wird der folgende Befehl verwendet:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /usr/share/apt-cacher/apt-cacher-import.pl /var/cache/apt/archives </pre></div></div><p>Es wird ein Skript ausgeführt, das die Pakete aus <strong>/var/cache/apt/archives</strong> in das, in der <strong>apt-cacher.conf</strong> angegebene (Cache-)Verzeichnis kopiert. Dabei werden die Quelldateien gelöscht. Möchte man die Pakete nur kopieren, ruft man <strong>apt-cacher-import.pl</strong> mit der Option <code class="notranslate">-r</code> auf, möchte man nur <a class="internal" href="../ln.html#Symbolische-Verknuepfungen">symbolische Links</a> erstellen, mit der Option <code class="notranslate">-s</code>. Die beiden Befehle wären dann also:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /usr/share/apt-cacher/apt-cacher-import.pl -r /var/cache/apt/archives
sudo /usr/share/apt-cacher/apt-cacher-import.pl -s /var/cache/apt/archives </pre></div></div></div><div class="section_2"><h3 id="Probleme-mit-dem-Webinterface">Probleme mit dem Webinterface<a class="headerlink" href="#Probleme-mit-dem-Webinterface">¶</a></h3><p>
apt-cacher bietet eine Webseite an, auf der die Konfigurationen und die Anzahl an übertragenen Paketen angeschaut werden kann. Einerseits kann man diese Seite über den eingetragen Port erreichen, standardmäßig ist das also <code class="notranslate">http://&lt;server&gt;:3142</code> bzw. <code class="notranslate">http://&lt;server&gt;:3142/report</code> Zusätzlich trägt sich apt-cacher aber auch in den apache2 ein, so dass man diese Seite auch über <code class="notranslate">http://&lt;server&gt;/apt-cacher</code> bzw. <code class="notranslate">http://&lt;server&gt;/apt-cacher/report</code> abrufen kann. Dazu wird eine symbolische Verknüpfung in <strong>/etc/apache2/conf.d</strong> auf die Datei <strong>/etc/apt-cacher/apache.conf</strong> angelegt.</p><p>Unter Umständen kann es zu Problemen mit dem CGI-Aufruf kommen. In der <strong>/var/log/apache2/error.log</strong> steht dann so etwas wie</p><pre class="notranslate">[error] [client &lt;IP&gt;] Options ExecCGI is off in this directory: /usr/share/apt-cacher/apt-cacher.pl</pre><p>Abhilfe schafft es, wenn man die Datei <strong>/etc/apache2/conf.d/apt-cacher.conf</strong> editiert und so abändert:</p><pre class="notranslate">Alias /apt-cacher /usr/share/apt-cacher/apt-cacher.pl

#&lt;DirectoryMatch /usr/share/apt-cacher/&gt; #vorher
&lt;Location /apt-cacher&gt; #Änderung!
    Options ExecCGI
    AddHandler cgi-script pl
    AllowOverride None
    order allow,deny
    allow from all
&lt;/Location&gt; #Änderung!
#&lt;/DirectoryMatch&gt; #vorher</pre><p>Zusätzlich muss man diesen Eintrag nun noch in den VirtualHost einbinden. Dazu öffnet man seine VirtualHost-Datei, standardmäßig <strong>/etc/apache2/sites-available/default</strong> und fügt die Zeile</p><pre class="notranslate">Include /etc/apache2/conf.d/apt-cacher.conf</pre><p>
ein. Alternativ kann man auch den Text aus dieser Datei direkt in den VirtualHost kopieren.</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://www.debuntu.org/how-to-set-up-a-repository-cache-with-apt-cacher" rel="nofollow">HowTo</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> auf debuntu.org </p></li><li><p><a class="external" href="https://help.ubuntu.com/community/Apt-Cacher-Server" rel="nofollow">Apt-Cache-Server</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://debiananwenderhandbuch.de/apt-cacher.html" rel="nofollow">Handbuch</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/></p></li><li><p><a class="external" href="http://packages.debian.org/de/sid/apt-cacher" rel="nofollow">Pakete</a> auf debian.org <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/></p></li><li><p><a class="external" href="http://sandeep.co.in/2008/10/30/updateupgrade-multiple-ubuntu-pcs-with-apt-cacher/" rel="nofollow">Blog-Anleitung</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> zur Nutzung</p></li><li><p><a class="internal" href="../lokale_paketquellen.html">Lokale Paketquellen</a> <img alt="{Übersicht}" src="../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../lokale_paketquellen/apt-cacher/a/revision/938719.html">Diese Revision</a> wurde am 1. Mai 2017 21:04 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../lokale_paketquellen.html">Lokale Paketquellen</a></li>
<li><a href="../lokale_paketquellen/apt-cacher.html">apt-cacher</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>