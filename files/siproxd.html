<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>siproxd › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./siproxd.html">siproxd</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/siproxd">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./siproxd/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./siproxd/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./siproxd/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./siproxd/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./siproxd/a/backlinks.html">siproxd</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
Dieser Artikel ist mit keiner aktuell unterstützten Ubuntu-Version getestet! Bitte diesen Artikel testen und das getestet-Tag entsprechend anpassen.
</p></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./paketquellen_freischalten.html">Bearbeiten von Paketquellen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="./programme_kompilieren.html">Pakete aus dem Quellcode erstellen</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Benutzung">Benutzung
</a><ol class="arabic"><li><a class="crosslink" href="#Netzwerkkonfiguration">Netzwerkkonfiguration
</a></li><li><a class="crosslink" href="#Zugangsrechte">Zugangsrechte
</a></li><li><a class="crosslink" href="#Als-Hintergrundprozess-starten">Als Hintergrundprozess starten
</a></li><li><a class="crosslink" href="#Erster-Test">Erster Test
</a></li><li><a class="crosslink" href="#Automatischer-Start">Automatischer Start
</a></li></ol></li><li><a class="crosslink" href="#Konfiguration-der-Clients">Konfiguration der Clients
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>Möchte man mehrere SIP-Anwendungen (beispielsweise <a class="internal" href="./ekiga.html">Ekiga</a> oder Hardware-SIP-Telefone) hinter einem Router betreiben, so kann es vorkommen, dass Netzwerk-Ports speziell weitergeleitet werden müssen, da sonst die Verbindungen nicht so funktionieren, wie sie sollten.</p><p>Um dies zu vermeiden, kann man den speziellen Proxy-Server <a class="interwiki interwiki-sourceforge2" href="http://siproxd.sourceforge.net">siproxd</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> (SIP proxy/masquerading daemon) nutzen. Leider ist die aktuellste Version des Programmes nicht in den Ubuntu-Quellen verfügbar. Diese lässt sich jedoch bei Bedarf sehr leicht kompilieren, da sie nur wenige Abhängigkeiten benötigt.</p><p>Im Normalfall sollte auch die Version aus den offiziellen Paketquellen ihre Aufgabe wunderbar erfüllen.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>sipproxyd nutzt nur was, wenn der Proxy auf dem Gateway ins Internet installiert ist!
</p></div></div><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Sipproxy ist in den offiziellen Paketquellen enthalten. Es muss das folgende Paket installiert <sup><a href="#source-1">[1]</a></sup> werden:</p><ul><li><p><strong>siproxd</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install siproxd </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install siproxd </pre></div></div><p>
</p></div></div><p>
Anschließend wird in der Konfigurationsdatei <strong>/etc/default/siproxd</strong> der Proxy aktiviert werden. Dies geschieht mit einem Editor mit Root-Rechten <sup><a href="#source-4">[4]</a></sup>. In der einzigen Zeile der Datei</p><pre class="notranslate">ENABLED=1</pre><p>
muss aus der <code class="notranslate">0</code> eine <code class="notranslate">1</code> gemacht werden. Anschließend kann der Dienst über den Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/siproxd start </pre></div></div><p>
sofort gestartet und benutzt werden. Mehr zum Thema kann im Artikel <a class="internal" href="./dienste.html">Dienste</a> nachgelesen werden.</p></div><div class="section_1"><h2 id="Benutzung">Benutzung<a class="headerlink" href="#Benutzung">¶</a></h2><p>
Um die Konfiguration von siproxd an die Gegebenheiten anzupassen, muss nun die <strong>/etc/siproxd.conf</strong> editiert werden <sup><a href="#source-4">[4]</a></sup> (Root-Rechte erforderlich).</p><div class="section_2"><h3 id="Netzwerkkonfiguration">Netzwerkkonfiguration<a class="headerlink" href="#Netzwerkkonfiguration">¶</a></h3><p>
Zuerst muss die Netzwerkkonfiguration angepasst werden. Falls siproxd auf einem Rechner läuft, der gleichzeitig als Router fungiert, so kann direkt die externe und die interne Netzwerkschnittstelle angegeben werden. Also zum Beispiel:</p><pre class="notranslate"># The interface names of INBOUND and OUTBOUND interface.
if_inbound  = eth0
if_outbound = ppp0</pre><p>Sollte siproxd auf einem Rechner hinter einem Router laufen, so definiert man die Netzwerkschnittstelle als Ein- und Ausgang und trägt zusätzlich die externe IP bzw. die Adresse eines <a class="internal" href="./dyndns-clients.html">DynDNS</a> Dienstes ein.</p><pre class="notranslate"># The interface names of INBOUND and OUTBOUND interface.
if_inbound  = eth0
if_outbound = eth0
host_outbound = rechnername.dnydns.org  ## bzw. feste externe IP</pre></div><div class="section_2"><h3 id="Zugangsrechte">Zugangsrechte<a class="headerlink" href="#Zugangsrechte">¶</a></h3><p>
Im nächsten Schritt kann festgelegt werden, wer mit dem siproxd Kontakt aufnehmen darf. Eigentlich reicht es hier, die Option <code class="notranslate">hosts_allow_reg</code> zu setzen. Hier sollten die internen IPs erlaubt werden. Also zum Beispiel:</p><pre class="notranslate"># Access control.
hosts_allow_reg = 192.168.0.1/24
#hosts_allow_sip = 123.45.0.0/16,123.46.0.0/16
#hosts_deny_sip  = 10.0.0.0/8,11.0.0.0/8</pre></div><div class="section_2"><h3 id="Als-Hintergrundprozess-starten">Als Hintergrundprozess starten<a class="headerlink" href="#Als-Hintergrundprozess-starten">¶</a></h3><p>
Für den ersten Start ist es praktisch siproxd so einzurichten, dass er nicht im Hintergrund startet. So kann man leicht erkennen, dass der Dienst sein Werk korrekt verrichtet und die Clients sich auch anmelden. Daher trägt man</p><pre class="notranslate"># Shall we daemonize?
daemonize = 0</pre><p>ein. Zusätzlich kann man auch festlegen, unter welchen Benutzerrechten der Dienst laufen soll. Die Voreinstellung <code class="notranslate">nobody</code> ist jedoch schon sinnvoll gewählt und kann so belassen werden.</p><pre class="notranslate"># Secure Enviroment settings:
user = nobody</pre></div><div class="section_2"><h3 id="Erster-Test">Erster Test<a class="headerlink" href="#Erster-Test">¶</a></h3><p>
Um die erstellte Konfiguration zu testen, ist es ratsam, siproxd von Hand mit dem Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">siproxd -d -1 2 </pre></div></div><p>zu starten. Anschließend konfiguriert (s.u.) und startet man einen SIP-Client, der den siproxd anspricht. Erscheinen Meldungen wie</p><pre class="notranslate">---BUFFER DUMP follows---
  52 45 47 49 53 54 45 52 20 73 69 70 3a 73 69 70 REGISTER sip:sip
  67 61 74 65 2e 64 65 20 53 49 50 2f 32 2e 30 0d gate.de SIP/2.0.
  0a 43 53 65 71 3a 20 32 20 52 45 47 49 53 54 45 .CSeq: 2 REGISTE
  52 0d 0a 56 69 61 3a 20 53 49 50 2f 32 2e 30 2f R..Via: SIP/2.0/
  ...</pre><p>so ist der Server korrekt konfiguriert. Man sollte jetzt auch schon Gespräche über den SIP-Proxy-Dienst führen können.</p></div><div class="section_2"><h3 id="Automatischer-Start">Automatischer Start<a class="headerlink" href="#Automatischer-Start">¶</a></h3><p>
Nach diesem ersten Test sollte man siproxd wieder so konfigurieren, dass es im Hintergrund startet. Dazu in der <strong>/etc/siproxd.conf</strong> wieder</p><pre class="notranslate">daemonize = 1</pre><p>eintragen. Danach kann man den Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">siproxd </pre></div></div><p>beispielsweise in die <a class="internal" href="./rc.local.html">rc.local</a> eintragen, so dass der Proxy-Server automatisch startet.</p></div></div><div class="section_1"><h2 id="Konfiguration-der-Clients">Konfiguration der Clients<a class="headerlink" href="#Konfiguration-der-Clients">¶</a></h2><p>
SIP-Client-Programmen oder SIP-Hardware muss gesagt werden, den SIP-Proxy-Dienst zu nutzen. Am Beispiel <a class="internal" href="./ekiga.html">Ekiga</a> wird erklärt, wie dies einzurichten ist. Andere Anwendungen müssen ähnlich konfiguriert werden.</p><p>Nach dem Start von Ekiga geht man in die Einstellungen unter</p><ul><li><p><em>"Bearbeiten -&gt; Einstellungen"</em> </p></li></ul><p>und deaktiviert in den <em>"Netzwerk-Einstellungen"</em> NAT und den STUN-Server. Anschließend trägt man die interne IP des siproxd-Rechners in den <em>"SIP-Einstellungen"</em> als <em>"Ausgangs-Proxy"</em> ein.</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="./internet-telefonie.html">Internet-Telefonie</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./siproxd/a/revision/939060.html">Diese Revision</a> wurde am 4. Mai 2017 09:43 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./siproxd.html">siproxd</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>