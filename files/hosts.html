<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>hosts › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./hosts.html">hosts</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/hosts">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./hosts/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./hosts/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./hosts/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./hosts/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./hosts/a/backlinks.html">hosts</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./sudo.html">Root-Rechte</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Namensaufloesung">Namensauflösung
</a><ol class="arabic"><li><a class="crosslink" href="#IP-Adressen-umleiten">IP-Adressen umleiten
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>Die Datei <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/hosts">/etc/hosts</a> wird benutzt, um Rechnernamen in IP-Adressen aufzulösen – wenn kein Nameserver im lokalen Netzwerk vorhanden ist. Nach der Installation eines Ubuntu-Rechners mit dem <a class="internal" href="./rechnername.html">Rechnernamen</a> <em>"jupiter"</em> sieht die Datei so aus:</p><pre class="notranslate">127.0.0.1     localhost
127.0.1.1     jupiter

# The following lines are desirable for IPv6 capable hosts
::1 ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts</pre><p>
Der obere Teil definiert den <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/localhost">localhost</a> und den Rechnernamen. Ab Ubuntu 6.06 kommen noch ein paar Zeilen für <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/IPv6">IPv6</a> hinzu.</p><div class="section_1"><h2 id="Namensaufloesung">Namensauflösung<a class="headerlink" href="#Namensaufloesung">¶</a></h2><p>
Wie schon beschrieben kann die <strong>/etc/hosts</strong> auch dazu benutzt werden, Rechner im Netzwerk über ihren Namen anstatt über ihre IP-Adresse anzusprechen. Besteht das lokale Netzwerk z.B. aus 3 Rechnern mit den Namen</p><ul><li><p>jupiter (192.168.0.1 - dieses System) </p></li><li><p>mars (192.168.0.2) </p></li><li><p>saturn (192.168.0.3) </p></li></ul><p>
muss in der <strong>/etc/hosts</strong> mit Root-Rechten <sup><a href="#source-1">[1]</a></sup> folgendes eingetragen <sup><a href="#source-2">[2]</a></sup> werden:</p><pre class="notranslate">127.0.0.1      localhost
127.0.1.1      jupiter

# &lt;IP-Adresse&gt;  &lt;Rechnername(n)&gt;
192.168.0.1    jupiter.homenetwork jupiter
192.168.0.2    mars.homenetwork mars
192.168.0.3    saturn.homenetwork saturn

# The following lines are desirable for IPv6 capable hosts
::1 ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts</pre><p>
Dadurch können die Rechner <em>"mars"</em> und <em>"saturn"</em> über ihren Namen vom Rechner <em>"jupiter"</em> aus angesprochen werden.</p><div class="section_2"><h3 id="IP-Adressen-umleiten">IP-Adressen umleiten<a class="headerlink" href="#IP-Adressen-umleiten">¶</a></h3><p>
Darüber hinaus lässt sich durch eigene Einträge ein einfacher, aber effektiver systemweiter Blocker realisieren. Dazu werden einfach zeilenweise weitere Namen (oder IP-Adressen) mit <code class="notranslate">localhost</code> verbunden. Beispiel:</p><pre class="notranslate">127.0.0.1      localhost
127.0.1.1      jupiter

# &lt;IP-Adresse&gt;  &lt;geblockte/r Name/n oder IP-Adresse/n)&gt;
127.0.0.1      www.geblockte_domain.de</pre><p>Damit werden alle Anfragen an <code class="notranslate">www.geblockte_domain.de</code> auf <code class="notranslate">localhost</code> umgeleitet und die Domain ist nicht mehr erreichbar. Nachteile dieses Verfahrens sind aber zum einen die aufwendige Pflege blockierter Namen und zum anderen die Verarbeitung sehr großer <code class="notranslate">hosts</code>-Dateien. Ein weiterer gravierender Nachteil ist, dass Platzhalter bzw. Wildcards nicht zulässig sind. Hostnamen dürfen nur aus alphanumerischen Zeichen, Minus-Zeichen und Punkten bestehen; sie müssen mit einem alphabetischen Zeichen beginnen und mit einem alphanumerischen Zeichen enden. Das macht die <code class="notranslate">hosts</code>-Datei relativ unflexibel, um Werbung im Internet zuverlässig zu blocken, da nur exakt das geblockt wird, wie es in der Datei auch angegeben ist, so dass z.B. zugehörige Subdomains nicht geblockt werden. Einige Beispiele sollen das verdeutlichen:</p><pre class="notranslate"># Beispiele für unzulässige Einträge:

127.0.0.1 *.google-analytics.com
127.0.0.1 facebook.
127.0.0.1 doubleclick.*

# Beispiele für unwirksame Einträge:

127.0.0.1 google-analytics
# blockiert nicht z.B. ssl.google-analytics.com

127.0.0.1 doubleclick.net
# blockiert nicht z.B. 3ad.doubleclick.net, ad-emea.doubleclick.net, ad-g.doubleclick.net</pre><p>Daher ist ein <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Proxy_(Rechnernetz)">Proxy-Server</a> auf Dauer die bessere Wahl. Eine flexiblere Alternative ist auch <a class="internal" href="./dnsmasq.html#Manipulieren">dnsmasq</a>, da dort das Hinzufügen der Domain ausreicht, um auch alle Subdomains zu blockieren. Eine weitere Möglichkeit besteht darin, über ein <a class="external" href="http://www.kubuntuforums.net/showthread.php?56419-Script-to-automate-building-an-adblocking-hosts-file" rel="nofollow">Skript</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> mehrere im Internet erhältliche regelmäßig aktualisierte, umfangreiche hosts-Dateien herunterzuladen (die auch die in den obigen Beispielen erwähnten Subdomains enthalten), diese zu kombinieren, sie z.B. um doppelte Einträge zu bereinigen und anschließend zu <strong>/etc/hosts</strong> hinzuzufügen:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1"># If this is our first run, save a copy of the system's original hosts file and set to read-only for safety</span>
<span class="k">if</span> <span class="o">[</span> ! -f ~/hosts-system <span class="o">]</span>
<span class="k">then</span>
 <span class="nb">echo</span> <span class="s2">"Saving copy of system's original hosts file..."</span>
 cp /etc/hosts ~/hosts-system
 chmod <span class="m">444</span> ~/hosts-system
<span class="k">fi</span>

<span class="c1"># Perform work in temporary files</span>
<span class="nv">temphosts1</span><span class="o">=</span><span class="sb">`</span>mktemp<span class="sb">`</span>
<span class="nv">temphosts2</span><span class="o">=</span><span class="sb">`</span>mktemp<span class="sb">`</span>

<span class="c1"># Obtain various hosts files and merge into one</span>
<span class="nb">echo</span> <span class="s2">"Downloading ad-blocking hosts files..."</span>
wget -nv -O - http://winhelp2002.mvps.org/hosts.txt &gt;&gt; <span class="nv">$temphosts1</span>
wget -nv -O - http://hosts-file.net/download/hosts.txt &gt;&gt; <span class="nv">$temphosts1</span>
wget -nv -O - http://someonewhocares.org/hosts/hosts &gt;&gt; <span class="nv">$temphosts1</span>
wget -nv -O - <span class="s2">"http://pgl.yoyo.org/as/serverlist.php?hostformat=hosts&amp;showintro=1&amp;mimetype=plaintext"</span> &gt;&gt; <span class="nv">$temphosts1</span>

<span class="c1"># Do some work on the file:</span>
<span class="c1"># 1. Remove MS-DOS carriage returns</span>
<span class="c1"># 2. Replace 127.0.0.1 with 0.0.0.0 because then we don't have to wait for the resolver to fail</span>
<span class="c1"># 3. Delete all lines that don't begin with 0.0.0.0</span>
<span class="c1"># 4. Scrunch extraneous spaces separating address from name into a single tab</span>
<span class="c1"># 5. Delete any comments on lines</span>
<span class="c1"># 6. Clean up leftover trailing blanks</span>
<span class="c1"># 7. Delete any lines ending with the word localhost because we'll obtain that from the original hosts file</span>
<span class="c1"># 8. Delete any lines ending with the word .dropbox.com.</span>
<span class="c1"># Pass all this through sort with the unique flag to remove duplicates and save the result</span>
<span class="nb">echo</span> <span class="s2">"Parsing, cleaning, de-duplicating, sorting..."</span>

sed -e <span class="s1">'s/\r//'</span> -e <span class="s1">'s/127\.0\.0\.1/0\.0\.0\.0/'</span> -e <span class="s1">'/^0\.0\.0\.0/!d'</span> -e <span class="s1">'s/ \+/\t/'</span> -e <span class="s1">'s/#.*$//'</span> -e <span class="s1">'s/[ \t]*$//'</span> -e <span class="s1">'/localhost$/d'</span> -e <span class="s1">'/\.dropbox\.com$/d'</span> &lt; <span class="nv">$temphosts1</span> <span class="p">|</span> sort -u &gt; <span class="nv">$temphosts2</span>

<span class="c1"># Combine system hosts with adblocks</span>
<span class="nb">echo</span> Merging with original system hosts...
<span class="nb">echo</span> -e <span class="s2">"\n# Ad blocking hosts generated "</span><span class="sb">`</span>date<span class="sb">`</span> <span class="p">|</span> cat ~/hosts-system - <span class="nv">$temphosts2</span> &gt; ~/hosts-block

<span class="c1"># Clean up temp files and remind user to copy new file</span>
<span class="nb">echo</span> <span class="s2">"Cleaning up..."</span>
rm <span class="nv">$temphosts1</span> <span class="nv">$temphosts2</span>
<span class="nb">echo</span> <span class="s2">"Done."</span>
cp ~/hosts-block /etc/hosts
</pre></div>
</td></tr></table></div><p>Das Skript ersetzt bei den zu blockierenden Einträgen die IP-Nummer 127.0.0.1 durch 0.0.0.0, da dadurch erhebliche <a class="external" href="http://hype-free.blogspot.de/2009/07/speedy-hosts-blocklists.html" rel="nofollow">Geschwindigkeitsvorteile</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> zu erreichen sind. Das Skript sollte unter <strong>/root/gethosts</strong> gespeichert und <a class="internal" href="./chmod.html">ausführbar</a> gemacht werden. Über einen <a class="internal" href="./ln.html#Symbolische-Verknuepfungen">symbolischen Link</a> z.B. nach <strong>/etc/cron.daily</strong> oder <strong>/etc/cron.weekly</strong> kann es dann leicht automatisch ausgeführt werden.</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="interwiki interwiki-man_de" href="http://manpages.ubuntu.com/cgi-bin/search.py?lr=lang_de&amp;q=hosts.5">Manpage</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./hosts/a/revision/942470.html">Diese Revision</a> wurde am 12. Juli 2017 18:25 von <a href="https://ubuntuusers.de/user/GTAzoccer/">GTAzoccer</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./hosts.html">hosts</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>