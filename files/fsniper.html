<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Fsniper › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./fsniper.html">Fsniper</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Fsniper">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./fsniper/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./fsniper/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./fsniper/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./fsniper/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./fsniper/a/backlinks.html">Fsniper</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./programme_kompilieren.html">Pakete aus dem Quellcode erstellen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./paketinstallation_deb.html">Ein einzelnes Paket installieren</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a><ol class="arabic"><li><a class="crosslink" href="#Aus-den-offiziellen-Paketquellen">Aus den offiziellen Paketquellen
</a></li></ol></li><li><a class="crosslink" href="#Einrichtung">Einrichtung
</a></li><li><a class="crosslink" href="#Einstellungen">Einstellungen
</a></li><li><a class="crosslink" href="#Handler">Handler
</a></li><li><a class="crosslink" href="#Ausnahme-Firefox-Downloads">Ausnahme Firefox-Downloads
</a></li><li><a class="crosslink" href="#Benutzung">Benutzung
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/terminal.png" class="image-left" src="./_/e81889fd6e485dd32e1cde611eabc18abced7993.png"/>
<a class="external" href="http://files.minuslab.net/doc.html" rel="nofollow">Fsniper</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ist ein Programm, um eines oder mehrere Verzeichnisse auf neue Dateien hin zu überwachen, um dann, abhängig vom Dateityp, bestimmte Anweisungen auszuführen. So lassen sich zum Beispiel Musikdateien und Bilder automatisch in die eingestellten Ordner verschieben, oder gespeicherte PDFs im Ordner an den Drucker senden. Die Möglichkeiten sind vielfältig.</p><p>Fsniper wird aktiv, wenn eine Datei nach einem Schreibzugriff (Erstellung oder Änderung) geschlossen wird.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
</p><div class="section_2"><h3 id="Aus-den-offiziellen-Paketquellen">Aus den offiziellen Paketquellen<a class="headerlink" href="#Aus-den-offiziellen-Paketquellen">¶</a></h3><p>
Fsniper kann direkt aus den Paketquellen über folgendes Paket installiert <sup><a href="#source-1">[1]</a></sup> werden:</p><ul><li><p><strong>fsniper</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install fsniper </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install fsniper </pre></div></div><p>
</p></div></div><p>Alternativ kann das Programm als Quellcode direkt von der <a class="external" href="http://projects.l3ib.org/trac/fsniper" rel="nofollow">Projektwebseite</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> heruntergeladen werden und muss anschließend noch kompiliert<sup><a href="#source-2">[2]</a></sup> und installiert<sup><a href="#source-3">[3]</a></sup> werden.</p><p>Damit Fsniper korrekt funktioniert, muss vor dem ersten Start eine gültige Konfigurationsdatei in <strong>~/.config/fsniper/config</strong> erstellt werden. Als Vorlage und erste Orientierung kann man die Beispielkonfiguration <strong>example.conf</strong> in <strong>/usr/share/doc/fsniper/examples/</strong> kopieren.</p><div class="bash"><div class="contents"><pre class="notranslate">mkdir -p ~/.config/fsniper
cp /usr/share/doc/fsniper/examples/example.conf ~/.config/fsniper/config </pre></div></div></div></div><div class="section_1"><h2 id="Einrichtung">Einrichtung<a class="headerlink" href="#Einrichtung">¶</a></h2><p>
Die Konfigurations-Datei besteht aus mehreren verschachtelten Blöcken und ist von einem <code class="notranslate">watch</code>-Block umschlossen. In diesem Block dürfen nun weitere Blöcke für die einzelnen Dateitypen definiert werden. Diese Unterblöcke haben immer folgenden Aufbau:</p><ol class="arabic"><li><p>zu überwachender Ordner </p></li><li><p>Optionen </p></li><li><p>Suchmuster / <a class="internal" href="./mime-typ.html">MIME-Typ</a> </p></li><li><p>Anweisung ("handler")</p></li></ol><p>
</p><pre class="notranslate">#Beispielkonfiguration:
watch {
    # beobachte Verzeichnis ~/drop
    ~/drop {
        # trifft auf alle MIME-Typen zu, die mit image/ beginnen
        image/* {
            # %% wird ersetzt durch den Dateiname
            handler = echo Bild gefunden: %%
        }
    }
    # beobachte Verzeichnis ~/downloads/musik
    ~/downloads/musik {
	# Option: bezieht alle Unterverzeichnisse mit ein	
	recurse = true
	audio/* {
	    # verschiebt die Datei in den Musikordner
	    handler = mv %% ~/Musik	
	}
    }
}</pre></div><div class="section_1"><h2 id="Einstellungen">Einstellungen<a class="headerlink" href="#Einstellungen">¶</a></h2><p>
Fsniper kann nach drei verschiedenen Arten Dateien filtern.</p><div class="section_2"><div class="section_3"><h4 id="MIME-Typen">MIME-Typen<a class="headerlink" href="#MIME-Typen">¶</a></h4><p>
Fsniper kann nach <a class="internal" href="./mime-typ.html">MIME-Typen</a> unterscheiden wie z.B. <code class="notranslate">image/png</code>, <code class="notranslate">text/plain</code> usw. Um zu überprüfen, welchen MIME-Typ eine Datei besitzt, kann man folgenden Befehl benutzen:</p><div class="bash"><div class="contents"><pre class="notranslate">file -ib DATEI </pre></div></div></div><div class="section_3"><h4 id="Shell-Globs">Shell Globs<a class="headerlink" href="#Shell-Globs">¶</a></h4><p>
Generelle Muster im Dateinamen wie <strong>*.txt</strong> oder <strong>*.html</strong> werden ebenfalls gefunden.</p></div><div class="section_3"><h4 id="Regulaere-Ausdruecke">Reguläre Ausdrücke<a class="headerlink" href="#Regulaere-Ausdruecke">¶</a></h4><p>
Dies beinhaltet beliebig viele Unterscheidungen, wie z.B. <code class="notranslate">/\.(pdf|ps)$/ </code>.</p></div></div></div><div class="section_1"><h2 id="Handler">Handler<a class="headerlink" href="#Handler">¶</a></h2><p>
Der Handler, welcher die gesetzten Anweisungen umsetzt, gibt je nach Ergebnis einen Wert zurück:
</p><ul><li><p><code class="notranslate">0</code> bedeutet, dass der Handler die Operation erfolgreich ausgeführt hat</p></li><li><p><code class="notranslate">2</code> bedeutet, dass der Handler mit dem Event prinzipiell umgehen kann, derzeit aber ein Problem besteht</p></li></ul><p>Jeder andere Rückgabewert bedeutet, dass der Handler mit der Anweisung nicht umgehen konnte. Das hat zur Folge, dass der nächste Handler (sofern vorhanden) ausprobiert wird.</p></div><div class="section_1"><h2 id="Ausnahme-Firefox-Downloads">Ausnahme Firefox-Downloads<a class="headerlink" href="#Ausnahme-Firefox-Downloads">¶</a></h2><p>
Firefox erstellt am Anfang des Downloadvorgangs eine leere Datei mit dem Dateinamen sowie eine dazugehörige Datei mit der Erweiterung <strong>.part</strong>. Fsniper soll in aller Regel erst aktiv werden, wenn der Download vollständig abgeschlossen ist. Daher darf die Anweisung im Handler erst einen Befehl ausführen, wenn der Inhalt der <strong>.part</strong>-Datei in die Zieldatei geschrieben wird. Hierzu folgender Eintrag in die Konfigurationsdatei:</p><pre class="notranslate">watch {
    ~/Downloads {
        *.part {
	    handler = echo ignoring file: %%
        }
        * {
            handler = ~/.config/fsniper/firefox-handler.sh %% 
            handler = mv %% ~/Incoming #Hier der eigentliche Befehl
        }</pre><p>Das referenzierte <a class="external" href="http://code.l3ib.org/?p=fsniper.git;a=blob_plain;f=doc/doc.txt" rel="nofollow">Skript</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> <strong>firefox-handler.sh</strong> wird unter <strong>~/.config/fsniper/</strong> abgelegt:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1"># Skript, das Aufrufe auf temporäre Firefox-Dateien verhindert</span>

<span class="nv">args</span><span class="o">=</span><span class="s2">"</span><span class="nv">$*</span><span class="s2">"</span>
<span class="nv">length</span><span class="o">=</span><span class="sb">`</span>expr length <span class="s2">"</span><span class="nv">$*</span><span class="s2">"</span><span class="sb">`</span>
<span class="nv">size</span><span class="o">=</span><span class="sb">`</span>du <span class="s2">"</span><span class="si">${</span><span class="nv">args</span><span class="si">}</span><span class="s2">"</span> <span class="p">|</span> awk <span class="s1">'{print $1'</span><span class="o">}</span><span class="sb">`</span>

<span class="c1"># Wenn zur Datei eine Datei.part existiert und Firefox dies immer noch herunterlädt</span>
<span class="c1"># wird die Datei ignoriert bis der Download abgeschlossen ist</span>
<span class="c1"># und in die Zieldatei geschrieben wird.</span>
<span class="k">if</span> <span class="o">[[</span> -e <span class="s2">"</span><span class="si">${</span><span class="nv">args</span><span class="si">}</span><span class="s2">.part"</span> <span class="o">&amp;&amp;</span> <span class="s2">"</span><span class="nv">$size</span><span class="s2">"</span> -eq <span class="s2">"0"</span> <span class="o">]]</span>
<span class="k">then</span>
  <span class="nb">exit</span> <span class="m">0</span>
<span class="k">fi</span>

<span class="nb">exit</span> <span class="m">1</span>
</pre></div>
</td></tr></table></div></div><div class="section_1"><h2 id="Benutzung">Benutzung<a class="headerlink" href="#Benutzung">¶</a></h2><p>
Fsniper kann als Prozess im Vordergrund oder als Dienst gestartet werden. Zum Testen der Konfigurationsdatei bietet sich der Aufruf mittels</p><div class="bash"><div class="contents"><pre class="notranslate">fsniper --verbose </pre></div></div><p>an. Der Programmablauf wird in der Datei <strong>~/.config/fsniper/log</strong> protokolliert. Zu beachten ist noch, dass nach jeder Konfigurationsänderung Fsniper beendet und nochmal neu gestartet werden muss.</p><p>Für den regulären Betrieb von Fsniper benutzt man den Daemon-Modus von fsniper. Dazu wird der Fsniper-Daemon per <a class="internal" href="./autostart.html">Autostart</a> zu Beginn der Sitzung gestartet. Hier der Inhalt der <strong>fsniper.desktop</strong></p><pre class="notranslate">[Desktop Entry]
Type=Application
Name=Fsniper
Exec=fsniper --daemon ~/.config/fsniper/config
Hidden=false
Icon=system-run
StartupNotify=false
Terminal=false</pre></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://files.minuslab.net/doc.html" rel="nofollow">Dokumentation</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://code.l3ib.org/?p=fsniper.git" rel="nofollow">Letzte Änderungen</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./fsniper/a/revision/940736.html">Diese Revision</a> wurde am 9. Mai 2017 00:39 von <a href="https://ubuntuusers.de/user/ubot/">ubot</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./fsniper.html">Fsniper</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>