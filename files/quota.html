<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Quota › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./quota.html">Quota</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Quota">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./quota/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./quota/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./quota/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./quota/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./quota/a/backlinks.html">Quota</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./editor.html">Einen Texteditor öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./fstab.html">Den Aufbau der Datei /etc/fstab verstehen</a></p></li></ol></div></div><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Wie-funktioniert-Quota">Wie funktioniert Quota?
</a><ol class="arabic"><li><a class="crosslink" href="#Number-of-Disk-Blocks-und-Number-of-Inodes">Number of Disk Blocks und Number of Inod...</a></li><li><a class="crosslink" href="#Under-Quota">Under Quota
</a></li><li><a class="crosslink" href="#Limits">Limits
</a></li><li><a class="crosslink" href="#Grace-Period">Grace Period
</a></li><li><a class="crosslink" href="#Grafik">Grafik
</a></li></ol></li><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Konfiguration">Konfiguration
</a><ol class="arabic"><li><a class="crosslink" href="#fstab-einstellen">fstab einstellen
</a></li><li><a class="crosslink" href="#Automatisches-Erstellen-der-Dateien-aquota-user-beziehungweise-aquota-group">Automatisches Erstellen der Dateien aquo...</a></li><li><a class="crosslink" href="#Abschliessend">Abschließend
</a></li></ol></li><li><a class="crosslink" href="#Einstellungen">Einstellungen
</a><ol class="arabic"><li><a class="crosslink" href="#Einen-User-einschraenken">Einen User einschränken
</a></li><li><a class="crosslink" href="#Eine-Gruppe-einschraenken">Eine Gruppe einschränken
</a></li><li><a class="crosslink" href="#Mehrere-User-einschraenken">Mehrere User einschränken
</a></li><li><a class="crosslink" href="#Grace-Period-setzen">Grace Period setzen
</a></li></ol></li><li><a class="crosslink" href="#Quota-Kommandos">Quota-Kommandos
</a><ol class="arabic"><li><a class="crosslink" href="#Quotaon-und-Quotaoff">Quotaon und Quotaoff
</a></li><li><a class="crosslink" href="#Quotacheck">Quotacheck
</a></li><li><a class="crosslink" href="#Repquota">Repquota
</a></li></ol></li><li><a class="crosslink" href="#Quellen">Quellen
</a></li></ol></div><p>Als Administrator eines Ubuntu-Systems (und natürlich jedes anderen Betriebssystems auch) möchte man eventuell nicht, dass die Benutzer zu viel Festplatten-Speicherplatz verbrauchen. Ist beispielsweise der Speicherplatz der Home-Partition vollständig aufgebraucht, so können sich die Benutzer oftmals nicht einmal mehr am grafischen X-Desktop anmelden, da hierbei Dateien erstellt werden müssen. Des Weiteren läuft ein System langsamer, wenn eine Festplatte, die gebraucht wird, "randvoll" ist.
Abhilfe schafft hier das Programm Quota.</p><p>Quota erlaubt es, den Festplattenspeicher eines Systems spezifisch einzuschränken. 
</p><ul><li><p>Alle in der <strong>/etc/fstab</strong> <sup><a href="#source-4">[4]</a></sup>  gelisteten Geräten und Partitionen können beschränkt werden, solange diese beschreibbar und in einem gängigen Linux-Dateisystem vorliegen.</p></li><li><p>Jedes dort gelistete Gerät und jede Partition kann individuell für einzelne Benutzer oder auch für ganze Gruppen eingeschränkt werden.</p></li><li><p>Die Einschränkung kann sich sowohl auf den Festplatten-Speicherplatz beziehen, welcher zur Verfügung gestellt werden soll, als auch auf die Anzahl an Daten (inklusive Ordner), die angelegt werden dürfen.</p></li><li><p>Man kann darüber entscheiden, ob neben dem Verhindern einer weiteren Speicherplatz-Vergabe weitere Aktionen ausgeführt werden sollen, beispielsweise das Benachrichtigen der betroffenen Person per E-Mail.</p></li><li><p>Quota funktioniert, ganz gleich ob der Benutzer lokal am Rechner arbeitet oder von extern, z.B. per SSH oder FTP auf diesen zugreift.</p></li></ul><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die ständige Überprüfung aller Dateizugriffe daraufhin, ob eine Grenze überschritten wird, ist natürlich nicht ohne Folgen. Quota belastet die Leistung der Festplatte. Ist die Zugriffsgeschwindigkeit ein wichtiges Kriterium, kann man durch Partitionieren erreichen, dass Benutzer nicht den wichtigen Anwendungen den Plattenplatz wegnehmen. Daher sollte man Quota nur auf Partitionen aktivieren, auf denen Benutzer ihre Daten ablegen.
</p></div></div><div class="section_1"><h2 id="Wie-funktioniert-Quota">Wie funktioniert Quota?<a class="headerlink" href="#Wie-funktioniert-Quota">¶</a></h2><p>
Quota wird nach der Installation vom System als <a class="internal" href="./dienste.html">Dienst</a> ausgeführt. Es wird standardmäßig beim Booten geladen und muss daher nicht explizit gestartet werden. Nach dem Hochfahren wertet das Programm einige Dateien aus und sorgt nun selbstständig dafür, dass die Benutzer oder Gruppen nicht zu viel Speicherplatz in Anspruch nehmen.</p><p>Im Folgenden werden einige Begriffe erklärt, die man verstehen sollte, wenn man Quota verwenden will.</p><div class="section_2"><h3 id="Number-of-Disk-Blocks-und-Number-of-Inodes">Number of Disk Blocks und Number of Inodes<a class="headerlink" href="#Number-of-Disk-Blocks-und-Number-of-Inodes">¶</a></h3><p>
Ein Speicherplatz-Limit wird an der Stelle "Number of Disk Blocks" gesetzt, die Einheit eines Disk Blocks ist dabei ein Kilobyte. Ein Datei-Anzahl-Limit wird an der Stelle "Number of Inodes" gesetzt.</p></div><div class="section_2"><h3 id="Under-Quota">Under Quota<a class="headerlink" href="#Under-Quota">¶</a></h3><p>
"Under Quota" bezeichnet den Zustand, welchen ein Benutzer oder eine Gruppe aus der Sicht von Quota hat, wenn der Umfang des verbrauchten Speicherplatzes und die Anzahl seiner angelegten Dateien sowohl das "Soft Limit" als auch das "Hard Limit" unterschreiten.</p></div><div class="section_2"><h3 id="Limits">Limits<a class="headerlink" href="#Limits">¶</a></h3><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die Limits werden in Dateisystemblöcken festgesetzt. Wie groß die Blocke sind, findet man mit den jeweiligen Verwaltungstools zum Dateisystem heraus, beispielsweise <a class="internal" href="./tune2fs.html">tune2fs</a> für ext-Dateisysteme.
</p></div></div><p>
</p><div class="section_3"><h4 id="Hard-Limit">Hard Limit<a class="headerlink" href="#Hard-Limit">¶</a></h4><p>
"Hard Limit" gibt den maximal zur Verfügung gestellten Speicherplatz oder die maximale Dateianzahl an.
Der Benutzer kann dieses Limit nie überschreiten. Sollte er an dieses Limit stoßen, so hat es für ihn den gleichen Effekt, als wäre kein weiterer Speicherplatz auf der Partition vorhanden.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Befindet sich ein Benutzer nahe am durch Quota gesetzten Hard Limit, so kann er sich eventuell nicht einmal mehr an der grafischen Oberfläche anmelden, da hierfür Speicherplatz für neu erstellte Dateien gebraucht wird. In dem Fall kann nur noch der Administrator durch eine Erweiterung des Hard Limits helfen, oder der User loggt sich in ein System-Terminal und löscht von dort Dateien.
</p></div></div></div><div class="section_3"><h4 id="Soft-Limit">Soft Limit<a class="headerlink" href="#Soft-Limit">¶</a></h4><p>
"Soft Limit" ist eine Begrenzung, welche kleiner oder gleich dem Hard Limit gesetzt werden muss. Wird das Soft Limit überschritten, so erhält der Benutzer den Zustand "Over Quota". Das Soft Limit kann bis zum Wert des Hard Limits überschritten werden, was allerdings mit Konsequenzen verbunden ist, welche vom Administrator bestimmt werden.</p><p>Ist die Verwendung eines Soft Limits nicht erwünscht, so werden die Limit-Werte von Soft Limit gleich denen von Hard Limit gesetzt.</p></div></div><div class="section_2"><h3 id="Grace-Period">Grace Period<a class="headerlink" href="#Grace-Period">¶</a></h3><p>
Ist ein Benutzer Over Quota, hat also das Soft Limit überschritten, so erhält er eine Frist, die "Grace Period" genannt wird. Standardmäßig beträgt sie sieben Tage, kann aber frei vom Administrator gewählt werden. Während dieser Frist <span class="underline">muss</span> der Benutzer oder die Gruppe durch Verlagern, Löschen oder Komprimieren von Dateien den verbrauchten Speicherplatz wieder soweit reduzieren, dass der Under Quota Zustand erreicht wird.</p><p>Um sicherzugehen, dass sie von dem Umstand in Kenntnis gesetzt werden, können Administrator, Benutzer oder Gruppe über das Vorkommnis per E-Mail oder System-Mail informiert werden.</p><p>Sollte der Benutzer die Frist von Grace Period versäumen, so nimmt sein derzeitig verbrauchter Speicherplatz das Hard Limit ein. Der Benutzer kann nun nicht mehr produktiv arbeiten und muss sich nun an den Administrator wenden, damit dieser ihm entweder die Frist verlängert, das Hard Limit etwas erhöht oder selber Dateien löscht.</p></div><div class="section_2"><h3 id="Grafik">Grafik<a class="headerlink" href="#Grafik">¶</a></h3><p>
Hier eine kleine Grafik, um die ganze Sache an einem Beispiel grafisch zu erläutern.</p><p><img alt="quota_grafika.png" class="image-default" src="./_/40399b3a21b3fc801f182d91640324557d3503d4.png"/></p><p>Auf der Partition <strong>/dev/sda2</strong>, welche als <strong>/home</strong> eingehängt wird, wird der Speicherplatz vom User <em>Jan</em> eingeschränkt.
Sein Speicherplatz ist aufgeteilt in Under Limit und Soft Limit. Hard Limit stellt die ihm gesetzte Grenze dar.</p></div></div><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Quota ist nicht von Haus aus auf einem Ubuntu-System installiert. Damit Quota funktioniert, muss man das Paket</p><ul><li><p><strong>quota</strong> </p></li></ul><p>nachinstallieren <sup><a href="#source-1">[1]</a></sup>.</p><p>Nicht zwingend notwendig ist das Paket</p><ul><li><p><strong>quotatool</strong></p></li></ul><p>
welches das Einstellen enorm vereinfacht und hier auch erklärt wird.</p></div><div class="section_1"><h2 id="Konfiguration">Konfiguration<a class="headerlink" href="#Konfiguration">¶</a></h2><p>
</p><div class="section_2"><h3 id="fstab-einstellen">fstab einstellen<a class="headerlink" href="#fstab-einstellen">¶</a></h3><p>
Im Folgenden wird anhand des oben grafisch dargestellten Beispiels erklärt, wie man nun eine konkrete Einschränkung vornimmt, und werden alternative Einstellmöglichkeiten aufgezeigt.</p><p>Nach der Installation muss als erstes die Datei <strong>/etc/fstab</strong> mit Root-Rechten in einem Texteditor geöffnet werden. Hier müssen nun die Dateisysteme gekennzeichnet werden, auf welchen Orte eingeschränkt werden sollen, damit Quota weiß, was kontrolliert werden soll.</p><p>Hier eine Passage einer <strong>/etc/fstab</strong>, in welcher die /home-Partition gemountet wird. Dort liegt der Ordner <strong>./Jan</strong>, welcher beispielshalber eingeschränkt wird:</p><pre class="notranslate"># Entry for /dev/sda2 :
UUID=a2798917-95d8-4805-aa4d-d06fa863a67c /home ext3 relatime 0 2</pre><p>Damit Quota auf ein Dateisystem aufmerksam wird, müssen nun dieser Zeile ein oder zwei Attribute zugefügt werden <sup><a href="#source-2">[2]</a></sup>:
</p><ul><li><p><code class="notranslate">usrquota</code> - Hiermit können Einschränkungen für einzelne Benutzer eingerichtet werden.</p></li><li><p><code class="notranslate">grpquota</code> - Hiermit können Einschränkungen für ganze Gruppen eingerichtet werden.</p></li></ul><p>
Im Beispiel, wo später der Benutzer "Jan" eine Einschränkung erfahren soll, sieht die Zeile dann folgendermaßen aus:</p><pre class="notranslate"># Entry for /dev/sda2 :
UUID=a2798917-95d8-4805-aa4d-d06fa863a67c /home ext3 relatime,usrquota 0 2</pre><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Es ist auch möglich, auf der gleichen Partition Einschränkungen sowohl für Benutzer als auch für Gruppen gleichzeitig zu setzen. In diesem Fall fügt man einfach beide Attribute, durch Komma getrennt, an.
</p></div></div><p>Nun muss das Dateisystem neu eingehängt werden. Wurde (wie in diesem Beispiel) das /home-Verzeichnis oder gar das Wurzelverzeichnis selber mit einem Attribut erweitert, funktioniert dies in der Regel nur durch einen Computer-Neustart. Für das /home-Verzeichnis kann man sich allerdings auch einfach aus allen bestehenden Benutzersitzungen abmelden und dann mit 
<span class="key">Strg</span>  + 
<span class="key">Alt</span>  + 
<span class="key">F1</span>  in eine Textkonsole wechseln. Dort meldet man sich nun als root an und führt das Kommando <code class="notranslate">init 1</code> aus. Dadurch wird das Betriebssystem vom Mehrbenutzerbetrieb in den Einzelbenutzerbetrieb geschaltet. Da root seine Partition auf <strong>/root</strong> und nicht auf <strong>/home</strong> hat, kann man nun die /home-Partition aushängen und wieder erneut einhängen. Anschließend wechselt man wieder mit <code class="notranslate">init 3</code> in den Mehrbenutzermodus, meldet sich aus dem root-Konto ab und wechselt mit 
<span class="key">Strg</span>  + 
<span class="key">Alt</span>  + 
<span class="key">F7</span>  wieder auf den grafischen Anmeldebildschirm.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Für diese Prozedur muss für root ein Passwort gesetzt sein.
</p></div></div></div><div class="section_2"><h3 id="Automatisches-Erstellen-der-Dateien-aquota-user-beziehungweise-aquota-group">Automatisches Erstellen der Dateien aquota.user beziehungweise aquota.group<a class="headerlink" href="#Automatisches-Erstellen-der-Dateien-aquota-user-beziehungweise-aquota-group">¶</a></h3><p>
Damit Quota funktionieren kann, müssen nun Informationen über die Datei-Rechte der einzelnen Benutzer und Gruppen auf der einzuschränkenden Partition gesammelt werden. Diese Informationen werden in Dateien namens <strong>quota.user</strong> und / oder <strong>quota.group</strong> in den jeweiligen Orten gespeichert.</p><p>Hierfür führt man als Root folgenden Befehl aus <sup><a href="#source-3">[3]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo quotacheck OPTIONEN </pre></div></div><p>Die Optionen sind
</p><ul><li><p><code class="notranslate">-a</code> für all, also für alle zu überwachenden Dateisysteme aus der /etc/fstab</p></li><li><p><code class="notranslate">-c</code> für create, also Schreiben der Dateien auf die Festplatte</p></li><li><p><code class="notranslate">-f</code> für force, also Erzwingen der Operation</p></li><li><p><code class="notranslate">-M</code> für try-remount, führt die Operation gegebenenfalls ohne Remount durch</p></li><li><p><code class="notranslate">-u</code> für das Erstellen der <strong>aquota.user</strong> Datei, falls erforderlich</p></li><li><p><code class="notranslate">-g</code> für das Erstellen der <strong>aquota.group</strong> Datei, falls erforderlich</p></li></ul><p>
In diesem Beispiel findet man nun im /home-Verzeichnis eine Datei <strong>aquota.user</strong> vor, die ja für diesen Nutzer angelegt wurde.</p></div><div class="section_2"><h3 id="Abschliessend">Abschließend<a class="headerlink" href="#Abschliessend">¶</a></h3><p>
Jetzt muss Quota neu gestartet werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/quota restart </pre></div></div><p>Um den Zugriff auf die Quota-Einträge für Benutzer und Gruppen nur dem root-Nutzer zu erlauben, ist Folgendes auszuführen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chmod 600 /quota.* </pre></div></div><p>
Die korrekte Funktionalität kann nun getestet werden. Folgender Befehl gibt eine Ansicht der Quota-Informationstabelle für Benutzer und Gruppen aus:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo repquota / </pre></div></div><p>
Hierbei bitte beachten, dass noch keine Quotas gesetzt sind.</p></div></div><div class="section_1"><h2 id="Einstellungen">Einstellungen<a class="headerlink" href="#Einstellungen">¶</a></h2><p>
</p><div class="section_2"><h3 id="Einen-User-einschraenken">Einen User einschränken<a class="headerlink" href="#Einen-User-einschraenken">¶</a></h3><p>
Am Beispiel des Benutzers "otto" soll erklärt werden, wie man einen einzelnen Benutzer im Platzverbrauch auf der Festplatte einschränken kann. Der Befehl <sup><a href="#source-3">[3]</a></sup></p><div class="bash"><div class="contents"><pre class="notranslate"># Allgemein
sudo edquota -u &lt;benutzername&gt;
# Beispiel
sudo edquota -u otto </pre></div></div><p>öffnet einen Editor, um die Quota für den Benutzer otto und alle Partitionen, für die Quota aktiviert wurde, zu editieren:</p><pre class="notranslate">Disk quotas for user otto (uid 1001):
     Filesystem                   blocks       soft       hard     inodes     soft    hard
     /dev/hda2                        28     100000     102400          7        0       0</pre><p>"blocks" zeigt die durch den User otto verwendeten Blöcke (in kB) für diese Partition an; "inodes" zeigt die Anzahl der Dateien an, die dem User otto gehören. Ändern sollte man nur die Werte <code class="notranslate">soft</code> und <code class="notranslate">hard</code>, die das <a class="crosslink" href="#Soft-Limit">Soft Limit</a> und <a class="crosslink" href="#Hard-Limit">Hard Limit</a> festlegen.</p></div><div class="section_2"><h3 id="Eine-Gruppe-einschraenken">Eine Gruppe einschränken<a class="headerlink" href="#Eine-Gruppe-einschraenken">¶</a></h3><p>
Mittels des Befehls <sup><a href="#source-3">[3]</a></sup></p><div class="bash"><div class="contents"><pre class="notranslate"># Allgemein
sudo edquota -g &lt;gruppenname&gt;
# Beispiel
sudo edquota -g users </pre></div></div><pre class="notranslate">Disk quotas for group users (gid 999):
     Filesystem                   blocks       soft       hard     inodes     soft    hard
     /dev/hda3                       549     200000     204800         57        0       0</pre><p>editiert man die Einstellungen für eine Gruppe.</p></div><div class="section_2"><h3 id="Mehrere-User-einschraenken">Mehrere User einschränken<a class="headerlink" href="#Mehrere-User-einschraenken">¶</a></h3><p>
Möchte man Werte für Quota für alle Benutzer des Systems setzen, so kann man sich eines kleinen Shellskriptes behelfen. Zuerst setzt man die Quota-Werte bei einem Benutzer, beispielsweise wieder "otto". Danach führt man in einem Terminal <sup><a href="#source-3">[3]</a></sup></p><div class="bash"><div class="contents"><pre class="notranslate">sudo edquota -p otto `awk -F: '$3 &gt; 1000 {print $1}' /etc/passwd` </pre></div></div><p>
aus. Dies überträgt die bei "otto" gesetzten Quota-Einstellungen auf alle lokalen Benutzer (also alle Benutzer mit einer Benutzer-ID, die größer als 1000 ist).</p></div><div class="section_2"><h3 id="Grace-Period-setzen">Grace Period setzen<a class="headerlink" href="#Grace-Period-setzen">¶</a></h3><p>
Die <a class="crosslink" href="#Grace-Period">Grace Period</a> kann man mittels
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo edquota -t </pre></div></div><p>
</p><pre class="notranslate">Grace period before enforcing soft limits for users:
Time units may be: days, hours, minutes, or seconds
  Filesystem             Block grace period     Inode grace period
  /dev/hda3                     1day                   1day</pre><p>setzen. Hierfür können die Zeiteinheiten <code class="notranslate">sec(onds)</code>, <code class="notranslate">min(utes)</code>, <code class="notranslate">hour(s)</code>, <code class="notranslate">day(s)</code>, <code class="notranslate">week(s)</code> und <code class="notranslate">month(s)</code> verwendet werden.</p></div></div><div class="section_1"><h2 id="Quota-Kommandos">Quota-Kommandos<a class="headerlink" href="#Quota-Kommandos">¶</a></h2><p>
</p><div class="section_2"><h3 id="Quotaon-und-Quotaoff">Quotaon und Quotaoff<a class="headerlink" href="#Quotaon-und-Quotaoff">¶</a></h3><p>
Um Quota an- bzw. auszuschalten:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo quotaon -a
sudo quotaoff -a </pre></div></div></div><div class="section_2"><h3 id="Quotacheck">Quotacheck<a class="headerlink" href="#Quotacheck">¶</a></h3><p>
Quotacheck scannt das Dateisystem nach der aktuellen Plattenauslastung:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo quotacheck -avugm </pre></div></div><pre class="notranslate">quotacheck: Scanning /dev/sda1 [/] done
quotacheck: Checked 22685 directories and 177183 files</pre></div><div class="section_2"><h3 id="Repquota">Repquota<a class="headerlink" href="#Repquota">¶</a></h3><p>
Repquota liefert einen Bericht:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo repquota / </pre></div></div><pre class="notranslate">*** Report for user quotas on device /dev/sda1
Block grace time: 7days; Inode grace time: 7days

                        Block limits                File limits
User            used    soft    hard  grace    used  soft  hard  grace
----------------------------------------------------------------------
root      -- 3770548       0       0         198636     0     0
daemon    --      56       0       0              5     0     0
...
otto      +-  102524   95000  120000  6days       7     0     0</pre></div></div><div class="section_1"><h2 id="Quellen">Quellen<a class="headerlink" href="#Quellen">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://www.linuxhaven.de/dlhp/HOWTO/mini/DE-Quota-HOWTO.html" rel="nofollow">Linux Quota mini-HOWTO</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./quota/a/revision/651707.html">Diese Revision</a> wurde am 1. November 2013 21:21 von <a href="https://ubuntuusers.de/user/gulwop/">gulwop</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./quota.html">Quota</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>