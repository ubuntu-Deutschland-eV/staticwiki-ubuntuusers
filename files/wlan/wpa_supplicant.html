<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>WLAN/wpa_supplicant › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../wlan/wpa_supplicant.html">wpa supplicant</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/WLAN/wpa_supplicant">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../wlan/wpa_supplicant/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../wlan/wpa_supplicant/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../wlan/wpa_supplicant/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../wlan/wpa_supplicant/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../wlan/wpa_supplicant/a/backlinks.html">wpa supplicant</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="../trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../pakete_installieren.html">Installation von Paketen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../editor.html">Einen Editor öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../sudo.html">Root-Rechte</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#WLAN-Konfigurationen-eintragen">WLAN-Konfigurationen eintragen
</a></li><li><a class="crosslink" href="#wpa-supplicant-testen-und-manuell-starten">wpa_supplicant testen und manuell starten
</a></li><li><a class="crosslink" href="#wpa-supplicant-aktivieren">wpa_supplicant aktivieren
</a></li><li><a class="crosslink" href="#Roaming">Roaming
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/Oxygen/network-wireless.png" class="image-left" src="../_/2fd78933de5881757f459a5c16d53ba1cb390b3a.png"/>
<a class="external" href="http://w1.fi/wpa_supplicant/" rel="nofollow">wpa_supplicant</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ist ein Linuxprogramm, das, wie der Name schon sagt, die im <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Wi-Fi_Protected_Access">WPA-Standard</a> definierte Rolle des "supplicant" (engl. für Bittsteller) wahrnimmt.</p><p>Zur Authentifizierung existieren eine ganze Reihe von Protokollen, die wpa_supplicant auch beherrscht, wenn sie von der Hardware (auf der Client-Seite aber auch auf dem Access-Point) unterstützt werden. Der wpa_supplicant unterstützt WEP-, WPA-, WPA2-verschlüsselte und unverschlüsselte Netze. Die Vielzahl der möglichen Kombinationen macht die Konfiguration von wpa_supplicant etwas knifflig.</p><p>Sofern wpa_supplicant nicht auf einem Server (ohne grafische Oberfläche) verwendet wird, sollte <a class="internal" href="../wlan/wpa_gui.html">wpa_gui</a> zur einfachen Erstellung der <strong>wpa_supplicant.conf</strong> verwendet werden. Selbst wenn dieses Programm nicht auf einem Rechner installiert wird, kann eine damit erstellte <strong>wpa_supplicant.conf</strong> auf dem Rechner genutzt werden.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die in diesem Artikel beschriebene Vorgehensweise wird benötigt, sofern der <a class="internal" href="../networkmanager.html">NetworkManager</a> oder <a class="internal" href="../wicd.html">WiCD</a> keine Verbindung zu einem WLAN herstellen können, <a class="internal" href="../wlan/wpa_gui.html">wpa_gui</a> zur Verwaltung genutzt werden soll oder für kabelgebundenes Netzwerk <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/IEEE_802.1X">IEEE_802.1X</a> Authentifizierung benötigt wird.</p><p>Sollte man allerdings ausschließlich das veraltete und unsichere WEP in einem WLAN verwenden, so gibt es keinen Grund, auf einem Client in einem solchen WLAN wpa_supplicant zu konfigurieren. <strong>iwconfig</strong> und <code class="notranslate">wireless-*</code>-Einträge in <strong>/etc/network/interfaces</strong> reichen in diesem (zu vermeidenden) Fall aus (siehe dazu <a class="internal" href="../wireless-tools.html">wireless-tools</a>).
</p></div></div><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Soll auf einem Linux-Rechner ein WLAN-Access-Point betrieben werden, so wird <a class="internal" href="../wlan_router.html">hostapd</a> benötigt, nicht wpa_supplicant.
</p></div></div><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
wpa_supplicant ist Bestandteil der Standardinstallation. Baut man auf eine Minimalinstallation auf, muss folgendes Pakete installiert <sup><a href="#source-1">[1]</a></sup> werden:</p><ul><li><p><strong>wpasupplicant</strong></p></li></ul><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Im gesamten Artikel wird als Beispiel-Schnittstelle <code class="notranslate">wlan0</code> verwendet. Dies muss unbedingt durch die tatsächliche Schnittstelle ersetzt werden, die man selbst benutzt. Mehr dazu unter <a class="internal" href="../wlan/installation.html">WLAN/Installation</a>.</p><p>Wenn der Treiber über Ndiswrapper installiert wurde, muss die Schnittstelle evtl. auch noch in der Datei <strong>/etc/modprobe.d/ndiswrapper</strong> angepasst werden <sup><a href="#source-2">[2]</a></sup>. Dort steht automatisch <code class="notranslate">wlan0</code>. 
</p></div></div></div><div class="section_1"><h2 id="WLAN-Konfigurationen-eintragen">WLAN-Konfigurationen eintragen<a class="headerlink" href="#WLAN-Konfigurationen-eintragen">¶</a></h2><p>
Als erstes muss die Datei <strong>/etc/wpa_supplicant/wpa_supplicant.conf</strong> angelegt und bearbeitet werden. Hierzu benötigt man einen Editor mit Root-Rechten <sup><a href="#source-2">[2]</a></sup>. Es sollte auch darauf geachtet werden, dass der Datei entsprechende <a class="internal" href="../chmod.html">Zugriffsrechte</a> gegeben werden (0600), noch bevor im späteren Verlauf irgendwelche Schlüssel in ihr abgelegt werden. In dieser Datei lauten die ersten Zeilen:</p><pre class="notranslate">ctrl_interface=/var/run/wpa_supplicant
ctrl_interface_group=benutzergruppe
# Die Gruppe muss natürlich angepasst werden
eapol_version=1
# 0: Der Treiber des Interfaces kümmert sich um das Scannen von Netzen und die AP-Auswahl.
#    Dieser Modus sollte benutzt werden, wenn man eine Verschlüsselung auf ein Kabelnetzwerk legt.
# 1: wpa_supplicant kümmert sich um das Scannen von Netzen und die AP-Auswahl.
# 2: Fast wie 0, es wird aber mit Hilfe von Sicherheitsrichtlinien und der SSID zu APs verbunden (BSSID wird nicht unterstützt)
#
# Normalerweise funktioniert entweder Modus 1 oder Modus 2.
ap_scan=1</pre><p>Danach werden die verschiedenen Netzwerkkonfigurationen eingetragen.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Bei den folgenden Beispielkonfigurationen sind folgende Änderungen vorzunehmen:</p><ul><li><p><code class="notranslate">Netzwerkname</code> muss durch die tatsächlich verwendete (E)SSID (ebenfalls in Anführungszeichen) ersetzt werden. </p></li><li><p><code class="notranslate">pre-shared key</code> muss durch den tatsächlich verwendeten pre-shared key ersetzt werden. </p></li></ul><p>
Je nach Konfiguration von WPA/WPA2 können die Parameter variieren. Wenn man die Zeilen für <code class="notranslate">proto</code>, <code class="notranslate">key_mgmt</code>, <code class="notranslate">pairwise</code> und <code class="notranslate">group</code> nicht hinzufügt, werden Standardwerte gesetzt, die fast immer funktionieren.
</p></div></div><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Wer mehr über die verfügbaren Optionen lernen möchte, kann sich diese Beispielkonfiguration mit ausführlichen englischen Kommentaren ansehen: <a class="crosslink" href="../wlan/wpa_supplicant.html">wpa_supplicant.conf.examples</a> <img alt="{dl}" src="../_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/>
</p></div></div><div class="section_2"><h3 id="Verschluesselung">Verschlüsselung<a class="headerlink" href="#Verschluesselung">¶</a></h3><p>
Um ein WPA2-verschlüsseltes Netzwerk einzutragen, wird folgender Text hinzugefügt: 
</p><pre class="notranslate">network={
        ssid="Netzwerkname"
        scan_ssid=1
        proto=RSN
        key_mgmt=WPA-PSK
        pairwise=CCMP
        group=CCMP
        psk="meinschluessel"
}</pre><p>
Je nach Konfiguration des Access-Points könnte es aber auch sein, dass noch eine gemischte Verschlüsselung mit veraltetem <strong>WPA1-TKIP</strong> verwendet wird
</p><pre class="notranslate">        proto=RSN WPA
...
        pairwise=CCMP
        group=TKIP</pre><p>oder reine WPA1-Verschlüsselung:</p><pre class="notranslate">        proto=WPA
...
        pairwise=TKIP
        group=TKIP</pre><p>
oder für alle möglichen Variationen
</p><pre class="notranslate">        proto=RSN WPA
...
        pairwise=CCMP TKIP
        group=CCMP TKIP</pre><p>
Der Supplicant handelt dann mit dem Access-Point die Verbindung entsprechend aus.</p><p>Verschlüsselung nach <strong>WPA1-TKIP</strong> beruht auf der veralteten WEP-Verschlüselung, ist rel. unsicher und sollte nicht mehr verwendet werden!. Weitere Beschreibungen dazu in <a class="internal" href="../wlan.html#WLAN-Sicherheit">WLAN - <em>WLAN-Sicherheit</em></a>. Aktuell ist WPA2-Verschlüsselung die beste und sicherste Methode.</p><p>Wie man die genaue Konfiguration des Access-Points herausfinden kann, steht im Abschnitt <a class="crosslink" href="#Verschluesselungskonfiguration-des-Access-Points-ermitteln">Verschlüsselungskonfiguration des Access-Points ermitteln</a>.</p></div><div class="section_2"><h3 id="WEP-Verschluesselung">WEP-Verschlüsselung<a class="headerlink" href="#WEP-Verschluesselung">¶</a></h3><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Eine WEP-Verschlüsselung kann innerhalb weniger Minuten (abhängig vom Netzwerkverkehr) entschlüsselt werden und ist deshalb unsicher. Die WEP-Verschlüsselung sollte deshalb nicht eingesetzt werden. 
</p></div></div><pre class="notranslate">network={
        ssid="Netzwerkname"
        scan_ssid=1
        key_mgmt=NONE
        wep_tx_keyidx=0
        wep_key0="Netzwerkschlüssel"
}</pre><p>Erfolgt die Verschlüsselung als "WEP-shared", so sollte noch folgendes angefügt werden:</p><pre class="notranslate">        auth_alg=SHARED
        priority=2</pre></div><div class="section_2"><h3 id="Unverschluesselte-Netzwerke">Unverschlüsselte Netzwerke<a class="headerlink" href="#Unverschluesselte-Netzwerke">¶</a></h3><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Bei einem unverschlüsselten WLAN kann jeder den Datenstrom zwischen PC und Router mitschneiden. Ein unverschlüsseltes WLAN sollte deshalb nicht eingesetzt werden. Deshalb gibt es an dieser Stelle auch keine Beispielkonfiguration. Man beachte auch mögliche <a class="internal" href="../wlan.html">rechtliche Konsequenzen</a>.
</p></div></div><p>In bestimmten Situationen muss man sich mit unverschlüsselten Netzen verbinden (z.B. Universitätsfunknetze mit SSH-Authentifikation). Zur Verbindung mit einem unverschlüsselten Netz ist wpa_supplicant jedoch nicht nötig. Siehe <a class="internal" href="../wireless-tools.html">wireless-tools</a>.</p><div class="section_3"><h4 id="802-1X-Netzwerke">802.1X Netzwerke<a class="headerlink" href="#802-1X-Netzwerke">¶</a></h4><p>
<a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/IEEE_802.1X">IEEE_802.1X</a> Netzwerke werden in Firmen sowie Hochschulen eingesetzt. Durch die große Anzahl an Authentifizierungsarten kann hier nur beispielhaft eine Konfiguration eines unverschlüsselten Netzwerkes mit 802.1X Authentifizierung angeführt werden. Diese Konfiguration dürfte für alle Hochschulen, die am DFN-Roaming (<a class="external" href="http://airoserv4.dfn.de/" rel="nofollow">Hochschulen die am DFN-Roaming teilnehmen</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>, <a class="external" href="http://www.dfn.de/dienstleistungen/dfnroaming/" rel="nofollow">Beschreibung des Dienstes</a> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>) teilnehmen, stimmen.</p><p>Für die Authentifizierung wird zusätzlich das Paket <strong>openssl</strong> (Standard von wpa_supplicant) oder <strong>gnutls</strong> benötigt.</p><p>Um sich mit Funknetzwerken mit 802.1X Authentifizierung anzumelden, bedarf es eines Eintrages folgender Art:</p><pre class="notranslate">network={
  ssid="Netzwerkname" 
  key_mgmt=IEEE8021X
  eap=TTLS                                       #Verschlüsselung während der Authentifizierung
  anonymous_identity="anonymous"                 #Äussere Identität
  identity="Benutzer@Authentifizierungs-Server"  #Innere Identität
  password="Passwort"                            #Passwort
  phase2="auth=PAP"
  #ca_cert="PFAD_ZUM_STAMMZERTIZIKAT/ZERTIFIKAT" #optionale Angabe des zu verwendenden Stammzertifikats
}</pre><p>
Es ist ebenfalls möglich einen externen Supplikanten für 802.1X Netzwerke zu verwenden, z.B. <a class="external" href="http://open1x.sourceforge.net/" rel="nofollow">xsupplicant</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>. In diesem Fall ist die Option <code class="notranslate">-e</code> in dem Aufruf von <strong>wpasupplicant</strong> zu verwenden. Siehe hierzu: Hilfe zu wpa_supplicant, zu erreichen mit:</p><div class="bash"><div class="contents"><pre class="notranslate">man wpa_supplicant </pre></div></div><div class="section_4"><h5 id="Beispiel-Fachhochschule-Suedwestfalen-NRW">Beispiel Fachhochschule Südwestfalen (NRW)<a class="headerlink" href="#Beispiel-Fachhochschule-Suedwestfalen-NRW">¶</a></h5><p>
</p><pre class="notranslate">network={
  ssid="802.1X"
  key_mgmt=IEEE8021X
  eap=TTLS          
  anonymous_identity="anonymous"
  identity="Benutzername@urmel.fh-swf.de"
  password="swordfish"
  ca_cert="/etc/wpa_supplicant/wlanCA.dvz.fh-swf.de.pem"
  phase2="auth=PAP"
}</pre><p>Das Stammzertifikat (wlanCA.dvz.fh-swf.de.pem) sowie das standortabhängige Zertifikat (Meschede: <code class="notranslate">meswlangate.dvz.fh-swf.de.pem</code>, Soest: <code class="notranslate">sowlangate.dvz.fh-swf.de.pem</code>) liegen im Ordner <strong>/etc/wpa_supplicant</strong>. In dieser Beispielkonfiguration wurden die benutzerspezifischen Daten durch die Worte <code class="notranslate">Benutzername</code> und <code class="notranslate">swordfish</code> ersetzt. Die Dateiendungen können je nach Quelle der Zertifikate variieren (z.B. wenn diese aus MS Windows exportiert wurden).</p></div></div></div><div class="section_2"><h3 id="Verschluesselungskonfiguration-des-Access-Points-ermitteln">Verschlüsselungskonfiguration des Access-Points ermitteln<a class="headerlink" href="#Verschluesselungskonfiguration-des-Access-Points-ermitteln">¶</a></h3><p>
Der Befehl
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo iwlist scanning
# oder 
sudo iwlist scan
# oder gefiltert und übersichtlicher mit den wesentlichen Informationen
sudo iwlist wlan0 scan | egrep -i 'cell|chan|essid|wpa|cipher|qual' 
# der Network-Manager zeigt das ebenfalls bei manueller Abfrage
nmcli dev wifi list </pre></div></div><p>
Bei Geräten die durch das mac80211-Subsystem unterstützt werden, zeigt <a class="internal" href="../iw.html">iw</a> alle Details:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo iw dev [WLAN-Interface] scan </pre></div></div><p>
zeigt alle WLAN-Netze in Reichweite, inklusive ihrer Verschlüsselungskonfiguration, an. Für diese Aktion sind Root-Rechte <sup><a href="#source-4">[4]</a></sup> notwendig.</p><p>Die Konfiguration der WLAN-Verschlüsselung wird in folgender Form ausgegeben: 
</p><pre class="notranslate">                    IE: IEEE 802.11i/WPA2 Version 1
                        Group Cipher : TKIP
                        Pairwise Ciphers (2) : CCMP TKIP
                        Authentication Suites (1) : PSK</pre><p>
In diesem Fall wird WPA2 benutzt (proto=RSN), wie die erste Zeile verrät. Die Angabe bei "Group Cipher" muss der Option "group=" in der wpa_supplicant.conf entsprechen. Die Angabe bei "Pairwise Ciphers" zeigt einem, welche Verschlüsselungsalgorithmen der Access-Point anbietet. In diesem Fall CCMP oder TKIP. Die Option, die man benutzen will, muss man entsprechend bei "pairwise=" angeben. Die letzte Zeile gibt an, welches Authentifizierungsverfahren eingesetzt wird: in diesem Fall ein vorher verteilter Schlüssel (key_mgmt=WPA-PSK). Zusammengefasst handelt es sich hierbei um ein WLAN, das WPA2 mit "Pre Shared Key" (PSK) verwendet und bei dem die Clients sich bei dem Verschlüsselungsalgorithmus zwischen CCMP (AES) und TKIP (RC4) entscheiden können.</p><p>Für WPA mit nur CCMP sieht die Ausgabe folgendermaßen aus: 
</p><pre class="notranslate">                    IE: WPA Version 1
                        Group Cipher : CCMP
                        Pairwise Ciphers (1) : CCMP
                        Authentication Suites (1) : PSK</pre><p>
Wenn ein Access-Point sowohl WPA als auch WPA2 anbietet, können auch zwei solche Abschnitte in der Ausgabe für ein WLAN erscheinen. Die Angaben in der Datei <code class="notranslate">wpa_supplicant.conf</code> entscheiden dann darüber, ob der Client für die Verbindung mit dem Access-Point WPA oder WPA2 benutzt.</p><p>Wichtig ist, darauf zu achten, welche "Ciphers" angeboten werden, und die wpa_supplicant.conf entsprechend zu bearbeiten. Werden bei "Pairwise Ciphers" CCMP und TKIP angezeigt, so kann. je nachdem was man in der wpa_supplicant.conf bei "pairwise" angibt, TKIP oder CCMP für die Verschlüsselung zwischen Client und Access-Point genutzt werden. Wenn bei "Pairwise Ciphers" CCMP und TKIP angeboten werden, ist der "Group Cipher" immer TKIP, damit es abwärtskompatibel bleibt. Wenn ausschließlich CCMP benutzt wird, ist auch der "Group Cipher" CCMP.</p></div></div><div class="section_1"><h2 id="wpa-supplicant-testen-und-manuell-starten">wpa_supplicant testen und manuell starten<a class="headerlink" href="#wpa-supplicant-testen-und-manuell-starten">¶</a></h2><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Sollte zuvor schon einmal eine WLAN-Verbindung über WEP eingerichtet gewesen sein, so muss diese deaktiviert werden. Es kann sonst zu Problemen beim Verbindungstest kommen. Unter GNOME findet man die Option dafür am einfachsten unter <em>"System -&gt; Systemverwaltung/Administration -&gt; Netzwerk"</em>.
</p></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Im Folgenden wird die Option <code class="notranslate">-D wext</code> verwendet. Diese ist ggf. auf den richtigen Treiber einzustellen!
</p></div></div><p>Bevor nun der wpa_supplicant fest eingebunden wird, sollte er getestet werden. Dies kann über die Debugging-Funktion geschehen, indem man Folgendes in ein Terminal <sup><a href="#source-3">[3]</a></sup> eingibt:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo wpa_supplicant -i wlan0 -D wext -c /etc/wpa_supplicant/wpa_supplicant.conf -d </pre></div></div><p>Dabei ist <code class="notranslate">-i</code> der Name des Wireless Interface, <code class="notranslate">-D</code> der Name des Treibers (siehe auch Tabelle unten), <code class="notranslate">-c</code> Pfad zur Konfigurationsdatei und <code class="notranslate">-d</code> Debug Modus. Falls nun Fehler auftreten sollten, werden diese aufgelistet; um noch weitere Informationen zu erhalten, kann auch <code class="notranslate">-dd</code> als Debug Modus verwendet werden.</p><p>Um nun zu überprüfen, ob eine Verbindung ordnungsgemäß aufgebaut wurde, sollte in einem neuen Terminal der Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">iwconfig </pre></div></div><p>eingegeben werden. Die Verbindung war erfolgreich, wenngleich nach dem Interface nicht mehr "unassociated", sondern die Art des Drahtlosnetzwerkes steht, z.B. "IEEE 802.11g."</p><p>Um die Verbindung nun zu benutzen, ohne sie fest in das System einzubinden, muss der WPA-Supplicant im Daemon-Modus gestartet werden (<code class="notranslate">-B</code>  Daemon (Background) Modus):</p><div class="bash"><div class="contents"><pre class="notranslate">sudo wpa_supplicant -i wlan0 -D wext -c /etc/wpa_supplicant/wpa_supplicant.conf -B </pre></div></div><p>Als letztes ist noch der DHCP-Client für das <em>Wireless Interface</em> zu starten (damit man eine IP-Adresse bekommt):</p><div class="bash"><div class="contents"><pre class="notranslate">sudo dhclient wlan0 </pre></div></div><p>Der DHCP-Client sollte dann eine IP-Adresse liefern, und die Verbindung ist somit hergestellt.</p></div><div class="section_1"><h2 id="wpa-supplicant-aktivieren">wpa_supplicant aktivieren<a class="headerlink" href="#wpa-supplicant-aktivieren">¶</a></h2><p>
Um den wpa_supplicant zu aktivieren, fehlt noch ein entsprechender Verweis in der Datei <strong>/etc/network/interfaces</strong>. Diese wird mit einem Editor mit Root-Rechten geöffnet <sup><a href="#source-2">[2]</a></sup> und folgende Zeile zum entsprechenden Interface hinzugefügt:</p><pre class="notranslate">        wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf</pre><p>Alternativ kann (bei Verwendung von <strong>wpa_gui</strong> muss sogar) folgender Eintrag angefügt werden:</p><pre class="notranslate">        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf</pre><p>Die vollständige Datei kann so aussehen:</p><pre class="notranslate"># This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

# The loopback network interface
auto lo
iface lo inet loopback

# The primary network interface

auto wlan0
iface wlan0 inet dhcp
        wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf</pre><p>Mehr Informationen zur <strong>/etc/network/interfaces</strong> gibt es in einem <a class="internal" href="../interfaces.html">gesonderten Artikel</a>.</p><div class="section_2"><h3 id="Treiber">Treiber<a class="headerlink" href="#Treiber">¶</a></h3><p>Falls <em>wpa_supplicant</em> nicht läuft, muss noch ein Treiber gewählt werden. Dies geschieht in der <strong>/etc/network/interfaces</strong> (siehe Artikel <a class="internal" href="../interfaces.html#Treiber">interfaces</a>) mit der <code class="notranslate">wpa-driver</code>-Option, welche vor der Zeile mit <code class="notranslate">wpa-conf</code> stehen sollte.</p><p>Bei der Wahl des richtigen Treibers können die Artikel <a class="internal" href="../wlan/karten.html">Karten</a> und <a class="internal" href="../wlan/chipsätze.html">Chipsatztabelle</a> hilfreich sein.</p><p>Eine vollständige Kofiguration kann z.B. wie folgt aussehen:</p><pre class="notranslate">auto wlan0
iface wlan0 inet dhcp
        wpa-driver wext
        wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf</pre><p>Wird kein Treiber angegeben, wird automatisch der generische wext-Treiber genutzt. Dieser funktioniert bei vielen Karten sehr gut (und ist auch empfohlen). Bei neueren Versionen von ndiswrapper (&gt; 1.16) und ipw <span class="underline">muss</span> der wext-Treiber verwendet werden.</p></div><div class="section_2"><h3 id="Verbindung-aufbauen">Verbindung aufbauen<a class="headerlink" href="#Verbindung-aufbauen">¶</a></h3><p>
Danach muss das entsprechende Interface (hier wlan0 - durch das tatsächliche Interface ersetzen) neu gestartet werden. Dies kann durch einen Neustart des Rechners geschehen oder durch Eingabe folgender Befehle in einem Terminal <sup><a href="#source-3">[3]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ifdown wlan0
sudo ifup wlan0 </pre></div></div></div><div class="section_2"><h3 id="Verbindung-automatisch-aufbauen">Verbindung automatisch aufbauen<a class="headerlink" href="#Verbindung-automatisch-aufbauen">¶</a></h3><p>
Normalerweise sollte die Anweisung <code class="notranslate">auto wlan0</code> in der Datei <strong>/etc/network/interfaces</strong> bereits dafür sorgen, dass die Verbindung beim Systemstart automatisch hergestellt wird. Zumindest mit manchen Geräten scheint dies aber nicht zu funktionieren. In diesem Fall kann mit folgenden Schritten möglicherweise nachgeholfen werden:</p><p>In der Datei <strong>/etc/rc.local</strong> als root <sup><a href="#source-2">[2]</a></sup> über die Zeile <code class="notranslate">exit =0</code> entsprechend dem Interface (hier wlan0 - durch das tatsächliche Interface ersetzen)</p><pre class="notranslate">ifdown wlan0
ifup wlan0</pre><p>einfügen und abspeichern.</p></div></div><div class="section_1"><h2 id="Roaming">Roaming<a class="headerlink" href="#Roaming">¶</a></h2><p>
Eine automatische Umschaltung zwischen bekannten Netzwerken ist ebenfalls möglich. Zusätzliche Pakete müssen nicht installiert werden. <strong>wpasupplicant</strong> führt bei entsprechender Konfiguration die Skripte <strong>wpa_action</strong> und <strong>wpa_cli</strong> im Verzeichnis  <strong>/sbin</strong> aus, und verbindet sich automatisch mit dem in Reichweite befindlichen Netzwerk. Gemischte Konfigurationen mit statischer IP-Adresse und automatischer Zuordnung über DHCP (engl. Dynamic Host Configuration Protocol) sind ebenfalls möglich.</p><p>Damit <strong>wpa_supplicant</strong> die Mehrfachkonfiguration erkennt und die Umgebung nach bekannten Netzwerken absucht, sind besondere Einstellungen in der  Datei <strong>/etc/network/interfaces</strong> vorzunehmen. Der Name des Netzwerks ist frei wählbar, deutsche Umlaute und Sonderzeichen sollten aber vermieden werden.</p><p>Statische IP-Adressen sind den tatsächlichen Gegebenheiten anzupassen. Hier eine Beispielkonfiguration für Netzwerke mit statischer IP-Adresse, automatischer Zuordnung über DHCP, WPA- und WPA2 Verschlüsselung und offene Netzwerke:</p><pre class="notranslate">auto lo
iface lo inet loopback
iface eth1 inet dhcp
iface eth2 inet dhcp
iface ath0 inet dhcp

# Schnittstelle prüfen
pre-up ifconfig wlan0 up
pre-up ifconfig wlan0 down

# Mehrfachkonfiguration aktivieren
iface wlan0 inet manual

# Roaming aktivieren
wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf

# erstes bekanntes WLAN Name:zuhause mit DHCP
iface zuhause inet dhcp

# zweites bekanntes WLAN Name:uni mit statischer IP-Adresse
iface uni inet static
address 192.168.0.20
netmask 255.255.255.0
network 192.168.0.255
gateway 192.168.0.1

# verbindet sich mit allen unverschlüsselten Netzwerken über DHCP
iface offen inet dhcp

# Optional - Schnittstelle automatisch aktivieren
auto wlan0</pre><p>Wird die Zeile <code class="notranslate">auto wlan0</code> weggelassen kann das WLAN zunächst mit Networkmanager oder Wicd verwendet werden. Zum aktivieren/deaktivieren werden dann folgende Befehle verwendet:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ifup wlan0      # aktiviert die WLAN-Schnittstelle
sudo ifdown wlan0    # deaktiviert die WLAN-Schnittstelle </pre></div></div><p>Für jedes zu nutzende Funknetzwerk ist ein eigener Eintrag mit den Angaben von SSID, Verschlüsselungsart und Netzwerkschlüssel zu erstellen. Der Eintrag id_str="Name" muß mit den Einstellungen in der Datei <strong>interfaces</strong> übereinstimmen.</p><p>Entsprechende Konfiguration der <strong>/etc/wpa_supplicant/wpa_supplicant.conf</strong>:</p><pre class="notranslate">ctrl_interface=/var/run/wpa_supplicant
eapol_version=1
ap_scan=1

# erstes bekanntes WLAN Name:zuhause mit WPA2-Verschlüsselung
network={
ssid="WLAN-ID 1"
id_str="zuhause"
scan_ssid=1
proto=RSN
key_mgmt=WPA-PSK
pairwise=CCMP
group=TKIP CCMP
psk="WPA2 Netzwerkschlüssel"
}

# zweites bekanntes WLAN Name:uni mit WPA-Verschlüsselung
network={
ssid="WLAN-ID 2"
id_str="uni"
scan_ssid=1
proto=WPA
key_mgmt=WPA-PSK
pairwise=TKIP
group=TKIP
psk="WPA Netzwerkschlüssel"
}

# unverschlüsselte Netzwerke
network={
ssid=""
id_str="offen"
scan_ssid=1
key_mgmt=NONE
}</pre><p>Werden Einträge angepasst, um Fehler zu beheben oder um ein neues Netzwerk einzufügen, kann der Vorgang im laufenden Betrieb mit folgenden Befehlen<sup><a href="#source-3">[3]</a></sup> unterbrochen und mit den geänderten Werten neu gestartet werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo wpa_action wlan0 stop
sudo wpa_action wlan0 reload
sudo ifup wlan0 </pre></div></div><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Unter <strong>/usr/share/doc/wpasupplicant/README.modes</strong> findet man Informationen, wie die Einstellungen für die <strong>/etc/wpa_supplicant/wpa_supplicant.conf</strong> auch direkt in der <strong>/etc/network/interfaces</strong> eingetragen werden können.
</p></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://w1.fi/wpa_supplicant/" rel="nofollow">Projektseite</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="internal" href="../wlan/wpa_gui.html">WLAN/wpa gui</a> - grafische Oberfläche für wpa_supplicant</p></li><li><p><a class="internal" href="../wlan.html">WLAN</a> <img alt="{Übersicht}" src="../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../wlan/wpa_supplicant/a/revision/945994.html">Diese Revision</a> wurde am 3. Januar 2018 11:16 von <a href="https://ubuntuusers.de/user/elektronenblitz63/">elektronenblitz63</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../wlan.html">WLAN</a></li>
<li><a href="../wlan/wpa_supplicant.html">wpa supplicant</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>