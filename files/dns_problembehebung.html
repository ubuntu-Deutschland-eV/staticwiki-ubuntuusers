<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>DNS_Problembehebung › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./dns_problembehebung.html">DNS Problembehebung</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/DNS_Problembehebung">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./dns_problembehebung/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./dns_problembehebung/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./dns_problembehebung/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./dns_problembehebung/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./dns_problembehebung/a/backlinks.html">DNS Problembehebung</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./networkmanager.html">Network Manager bedienen</a> </p></li></ol></div></div><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#DNS-und-Router-Problem">DNS- und Router-Problem
</a><ol class="arabic"><li><a class="crosslink" href="#Ursache">Ursache
</a></li><li><a class="crosslink" href="#Firmware-Update">Firmware-Update
</a></li><li><a class="crosslink" href="#DNS-Relay">DNS-Relay
</a></li><li><a class="crosslink" href="#Einen-bestimmten-DNS-Server-verwenden">Einen bestimmten DNS-Server verwenden
</a></li><li><a class="crosslink" href="#Einen-bestimmten-DHCP-Server-blockieren">Einen bestimmten DHCP-Server blockieren
</a></li><li><a class="crosslink" href="#Weitere-Loesungsansaetze">Weitere Lösungsansätze
</a></li></ol></li><li><a class="crosslink" href="#Lokalen-DNS-Cache-einrichten">Lokalen DNS-Cache einrichten
</a></li><li><a class="crosslink" href="#Langsamer-Systemstart">Langsamer Systemstart
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><div class="section_1"><h2 id="DNS-und-Router-Problem">DNS- und Router-Problem<a class="headerlink" href="#DNS-und-Router-Problem">¶</a></h2><p>
Wenn man Ubuntu hinter einem Router oder einer Telefonanlage mit Router (und optional DHCP) benutzt, kann bei der Nutzung von DSL ein spezielles Linux-Problem auftauchen:</p><ul><li><p>Das Internet im Browser ist extrem langsam, die aufgerufene Seite erscheint erst nach ca. 10 bis 30 Sekunden. In der Statuszeile steht in diesem Zeitraum etwas wie "Seite wird gesucht". Downloads laufen hingegen normal schnell, und auch die Ping-Zeit zu einer IP Adresse ist normal schnell. </p></li><li><p>Das Internet ist so langsam, dass es nicht möglich ist, irgendeine Seite aufzurufen. Es wird zwar nach der Seite gesucht, und eine Verbindung besteht offensichtlich, jedoch werden Adressen nicht gefunden. </p></li></ul><p>
</p><div class="section_2"><h3 id="Ursache">Ursache<a class="headerlink" href="#Ursache">¶</a></h3><p>
Unter Linux ist der Dienst "dhclient" dafür verantwortlich, dem Rechner die richtige DNS-IP-Adresse zuzuteilen. Der DNS-Dienst sorgt u.a. dafür, dass, wenn man www.ubuntu-de.org eintippt, die HTML-Dateien vom Server mit der IP-Adresse 213.95.41.13 abgerufen werden. In der Datei <strong>/etc/resolv.conf</strong> wird der (Internetanbieter-spezifische) DNS-Server eingetragen.</p><p>Wenn man Ubuntu mit einem Router benutzt, muss der Router über DHCP dem Betriebssystem mitteilen, welche(n) Nameserver es verwenden soll. Die meisten Router betreiben allerdings selber einen Nameserver als Cache (Zwischenspeicher) und geben deshalb ihre eigene IP-Adresse als Nameserver an. Dabei kann es bei einigen Routern im Zusammenspiel mit Linux und dem internen Cache-Nameserver zu Problemen kommen.</p></div><div class="section_2"><h3 id="Firmware-Update">Firmware-Update<a class="headerlink" href="#Firmware-Update">¶</a></h3><p>
In einigen Fällen kann es helfen, ein Firmware-Update des Routers durchzuführen, um den Fehler zu beheben. Wer sich das nicht zutraut oder bei wessen Router das nicht hilft, der kann immer noch folgende provisorische Lösung benutzen.</p></div><div class="section_2"><h3 id="DNS-Relay">DNS-Relay<a class="headerlink" href="#DNS-Relay">¶</a></h3><p>
Bevor man die provisorische Lösung benutzt, hat man noch die Möglichkeit, zu überprüfen, ob irgendwo in den Routereinstellungen die Option "DNS-Relay" vorhanden ist.</p><p>Wenn DNS-Relay aktiviert ist, wird den DHCP-Clients die IP-Adresse des Routers als DNS-Server zugeteilt. Alle DNS-Anfragen an den Router werden an die DNS-Server Ihres Internetdiensteanbieters weitergeleitet. Wenn DNS-Relay deaktiviert ist, werden den DHCP-Clients vom Router die DNS-Server des Internetdiensteanbieters zugewiesen.</p></div><div class="section_2"><h3 id="Einen-bestimmten-DNS-Server-verwenden">Einen bestimmten DNS-Server verwenden<a class="headerlink" href="#Einen-bestimmten-DNS-Server-verwenden">¶</a></h3><p>
</p><div class="section_3"><h4 id="Konfiguration-ab-Ubuntu-8-10">Konfiguration ab Ubuntu 8.10<a class="headerlink" href="#Konfiguration-ab-Ubuntu-8-10">¶</a></h4><p>
Ab Ubuntu 8.10 kann man direkt im Network Manager Applet die Benutzung eines bestimmten DNS-Servers erzwingen. Dazu editiert man die verwendete Netzwerkverbindung und setzt unter dem Reiter "IPv4-Einstellungen" der entsprechenden Netzwerkverbindung die Methode auf "Automatisch (DHCP) nur Adressen". Nun kann man im selben Fenster den DNS-Server manuell einstellen, aber trotzdem die Netzwerkadressen per DHCP beziehen. Es muss eine IP angegeben werden, Servernamen wie nameserver.mein-dsl-anbieter.de werden nicht akzeptiert. Im Terminal<sup><a href="#source-1">[1]</a></sup> lässt sich die IP beispielsweise per</p><div class="bash"><div class="contents"><pre class="notranslate">host nameserver.mein-dsl-anbieter.de </pre></div></div><p>
herausfinden.</p></div><div class="section_3"><h4 id="Konfiguration-mit-resolvconf">Konfiguration mit resolvconf<a class="headerlink" href="#Konfiguration-mit-resolvconf">¶</a></h4><p>
Wer ohne Hilfe des NetworkManagers die Nameserverkonfiguration ändern möchte, der kann dies mit Hilfe des Programms <strong>resolvconf</strong> tun. Vorteil ist, dass dieses Programm von anderen Programmen, wie z.B. <code class="notranslate">dhclient</code>, aufgerufen wird. Ab Ubuntu 12.04 wird dieses Programm standardmäßig eingesetzt (siehe <a class="external" href="http://www.stgraber.org/2012/02/24/dns-in-ubuntu-12-04/" rel="nofollow">DNS in Ubuntu 12.04</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>).</p><p>Hier befinden sich die einzelnen Textbausteine für die Nameserver-Konfiguration:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>ls -1 /etc/resolvconf/resolv.conf.d/
base
head
original
tail
</pre></div>
</td></tr></table></div><p>
Die einzelnen Dateien werden in der Anleitung von <em>resolvconf</em> näher beschrieben.</p><p>Um zum Beispiel einen Nameserver fest an erster Stelle einzutragen, kann man die Datei "head" um eine Zeile ergänzen:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nb">echo</span> <span class="s2">"nameserver 1.2.3.4"</span> &gt;&gt; /etc/resolvconf/resolv.conf.d/head
</pre></div>
</td></tr></table></div></div></div><div class="section_2"><h3 id="Einen-bestimmten-DHCP-Server-blockieren">Einen bestimmten DHCP-Server blockieren<a class="headerlink" href="#Einen-bestimmten-DHCP-Server-blockieren">¶</a></h3><p>
Befindet sich – aus was für Gründen auch immer – ein "falscher" DHCP-Server im Netzwerk, so kann man die Nutzung dieses Servers verhindern. Dies geht ebenso wie im letzten Schritt beschrieben über einen Eintrag in der <strong>dhclient.conf</strong>. Dieser Schritt sollte aber nur eine Fehlerumgehung ("workaround") sein. Besser wäre es, den falschen DHCP-Server aus dem Netz zu entfernen.</p><p>Der benötigte Eintrag besteht aus einer Zeile:</p><pre class="notranslate">reject &lt;ip-adresse&gt;;</pre></div><div class="section_2"><h3 id="Weitere-Loesungsansaetze">Weitere Lösungsansätze<a class="headerlink" href="#Weitere-Loesungsansaetze">¶</a></h3><p>
</p><div class="section_3"><h4 id="berschreiben-der-resolv-conf">Überschreiben der resolv.conf<a class="headerlink" href="#berschreiben-der-resolv-conf">¶</a></h4><p>
Neben der Änderung der Dateien <strong>/etc/network/interfaces</strong> und <strong>/etc/dhcp/dhclient.conf</strong> gibt es noch eine weitere, sehr direkte Möglichkeit. Dazu kopiert man zuerst einmal die Datei <strong>/etc/resolv.conf</strong>:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo cp /etc/resolv.conf /etc/resolv.default </pre></div></div><p>
In dieser neu entstandenen Datei <strong>resolv.default</strong> ändert man dann die IP-Adresse hinter dem Eintrag <code class="notranslate">nameserver</code> zu einer wie beschrieben ermittelten IP. Jetzt sorgt man noch dafür, dass bei jedem Start der Netzwerk-Routinen die <strong>/etc/resolv.conf</strong> überschrieben wird, indem man folgendes Skript in den Ordner <strong>/etc/network/if-up.d/</strong> kopiert. Der Dateiname ist egal, Hauptsache sie ist <a class="internal" href="./rechte.html">ausführbar</a>.</p><p>Das Skript: 
</p><pre class="notranslate">#!/bin/sh

cp /etc/resolv.default /etc/resolv.conf</pre><p>
<strong><em>Hinweis</em></strong>: Wenn das Betriebssystem auf einer virtuellen Maschinen läuft (z.B. mit VM Ware), ist es möglich dass das Script nicht automatisch ausgeführt werden kann und diese Lösung somit nicht funktioniert.</p></div></div></div><div class="section_1"><h2 id="Lokalen-DNS-Cache-einrichten">Lokalen DNS-Cache einrichten<a class="headerlink" href="#Lokalen-DNS-Cache-einrichten">¶</a></h2><p>
Ein lokaler DNS-Cache speichert bereits beantwortete Namensauflösungen zwischen und hat in diesem Fall eine erheblich kürzere Antwortzeit, siehe auch <a class="internal" href="./dnsmasq.html">Dnsmasq</a></p></div><div class="section_1"><h2 id="Langsamer-Systemstart">Langsamer Systemstart<a class="headerlink" href="#Langsamer-Systemstart">¶</a></h2><p>
In der Hauptsache gibt es zwei Möglichkeiten, die Bootdauer zu verkürzen, falls es durch die Verwendung von DHCP zu verlängerten Bootzeiten kommt. Zum einen kann man die Wartezeit in <strong>/etc/dhcp/dhclient.conf</strong> von 120 s auf 15 s herabsetzen. Dies wird durch das Ändern der Zeile <code class="notranslate">#timeout = 120</code> in <code class="notranslate">timeout = 15</code> erreicht <sup><a href="#source-2">[2]</a></sup>.</p><p>Zum anderen kann man die Netzwerkkonfiguration im Hintergrund ausführen lassen. Dazu muss man in der Datei <strong>/etc/init.d/networking</strong> am Ende der Zeilen mit "ifup" ein <code class="notranslate">&amp;</code> einfügen. Darüber hinaus bietet sich das Werkzeug <em>ifplugd</em> an, wenn die Karte nicht immer mit dem Netzwerk verbunden ist.</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://www.heise.de/ct/hotline/FAQ-DNS-Verbiegungen-991615.html" rel="nofollow">DNS-Verbiegungen FAQ</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>  - Seltsame Netzwerk-Fehler (wenn der Provider falsche Daten liefert)</p></li><li><p><a class="external" href="http://www.heise.de/netze/artikel/DNS-Verbiegungen-1025662.html" rel="nofollow">DNS-Verbiegungen</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - vollständiger Artikel zu Hintergründen</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./dns_problembehebung/a/revision/922168.html">Diese Revision</a> wurde am 29. November 2016 09:18 von <a href="https://ubuntuusers.de/user/Berlin_1946/">Berlin_1946</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./dns_problembehebung.html">DNS Problembehebung</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>