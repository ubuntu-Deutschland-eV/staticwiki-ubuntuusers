<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>xsane2speech › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./xsane2speech.html">xsane2speech</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/xsane2speech">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./xsane2speech/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./xsane2speech/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./xsane2speech/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./xsane2speech/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./xsane2speech/a/backlinks.html">xsane2speech</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./rechte.html">Rechte für Dateien und Ordner ändern</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./sudo.html">Root-Rechte</a></p></li></ol></div></div><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Vorbereitung">Vorbereitung
</a></li><li><a class="crosslink" href="#xsane2speech">xsane2speech
</a></li><li><a class="crosslink" href="#Konfiguration">Konfiguration
</a></li><li><a class="crosslink" href="#Funktionsweise">Funktionsweise
</a></li><li><a class="crosslink" href="#Benutzung">Benutzung
</a><ol class="arabic"><li><a class="crosslink" href="#Beispiele">Beispiele
</a></li><li><a class="crosslink" href="#Optionen">Optionen
</a></li></ol></li><li><a class="crosslink" href="#Integration-der-Rechtschreibpruefung">Integration der Rechtschreibprüfung
</a><ol class="arabic"><li><a class="crosslink" href="#Spracheinstellung-fuer-die-Festival-Wiedergabe">Spracheinstellung für die Festival-Wiede...</a></li></ol></li><li><a class="crosslink" href="#Probleme">Probleme
</a><ol class="arabic"><li><a class="crosslink" href="#Festival-mit-deutschsprachiger-Ausgabe">Festival mit deutschsprachiger Ausgabe
</a></li><li><a class="crosslink" href="#Mbrola">Mbrola
</a></li></ol></li><li><a class="crosslink" href="#Alternativen">Alternativen
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>
<img alt="XSane/xsane-logo.png" class="image-left" src="./_/f2dfa6da37105e77c232b5cab004a8e96d4b3c07.png"/>
<a class="crosslink topic" href="https://forum.ubuntuusers.de/topic/Ubuntu-liest-vor/">xsane2speech</a> ist ein Wrapper-Skript für <a class="internal" href="./xsane.html">XSane</a>, mit dem eine eingescannte Textvorlage sofort "vorgelesen" werden kann. Die dafür nötige Texterkennung erfolgt über <a class="internal" href="./tesseract-ocr.html">tesseract-ocr</a> oder <a class="internal" href="./cuneiform-linux.html">Cuneiform-Linux</a>, die Textausgabe kann über die Sprachsynthesizer-Programme <a class="internal" href="./espeak.html">eSpeak</a> oder <a class="internal" href="./festival.html">Festival</a> erfolgen. Der Text wird gespeichert, er kann sowohl direkt wiedergegeben als auch via <a class="internal" href="./audiodateien_umwandeln.html#Lame">Lame</a> als <strong>.mp3</strong>-Datei gespeichert werden. Zum Einsatz kommen außerdem <a class="internal" href="./yad.html">yad</a> (für Abfragen zum Verlauf), ggf. auch <a class="internal" href="./zeichensatz-konverter.html#iconv">iconv</a> und <a class="external" href="http://unixhelp.ed.ac.uk/CGI/man-cgi?file" rel="nofollow">file</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> (zur Sicherstellung bzw. Überprüfung der richtigen Textkodierung).</p><div class="section_1"><h2 id="Vorbereitung">Vorbereitung<a class="headerlink" href="#Vorbereitung">¶</a></h2><p>
Folgende Pakete müssen installiert <sup><a href="#source-1">[1]</a></sup> werden:</p><ul><li><p><strong>xsane</strong> (<em>universe</em>)</p></li><li><p><strong>imagemagick</strong></p></li><li><p><strong>file</strong></p></li><li><p><strong>tesseract-ocr</strong> (<em>universe</em>, sowie die gewünschten Sprachpakete)</p></li><li><p><strong>espeak</strong></p></li><li><p><strong>lame</strong> (<em>multiverse</em>)</p></li><li><p><strong>mbrola</strong> (<em>multiverse</em>, optional, sowie gewünschte Mbrola-Stimmen, Verwendung über eSpeak, ggf. auch Festival)</p></li><li><p><strong>festival</strong> (<em>universe</em>, optional, sowie die gewünschten Stimmen und Wörterbuchdateien)</p></li><li><p><strong>cuneiform</strong> (<em>multiverse</em>, optional, sinnvoll z.B. für Texte in Spalten, bietet viele Sprachen)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install xsane imagemagick file tesseract-ocr espeak lame mbrola festival cuneiform </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install xsane imagemagick file tesseract-ocr espeak lame mbrola festival cuneiform </pre></div></div><p>
</p></div></div><p>Außerdem <a class="internal" href="./yad.html">yad</a>, seit <a class="internal" href="./15.10.html">15.10</a> den Ubuntu-Quellen, für <a class="internal" href="./14.04.html">14.04</a> aus einem PPA verfügbar.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Unter <a class="internal" href="./xenial.html">Ubuntu 16.04</a> funktioniert für 64-bit-Systeme das Mbrola-Paket aus den Quellen nicht, siehe <a class="internal" href="./sprachausgabe.html#Mbrola">Mbrola</a>, man kann sich aber mit einem aktualisierten funktionsfähigen Debian-Paket behelfen.
</p></div></div></div><div class="section_1"><h2 id="xsane2speech">xsane2speech<a class="headerlink" href="#xsane2speech">¶</a></h2><p>
Das Skript selbst kann als <a class="external" href="http://media.cdn.ubuntu-de.org/wiki/attachments/01/18/xsane2speech.sh" rel="nofollow">xsane2speech.sh</a> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/> heruntergeladen oder in einen Editor <sup><a href="#source-2">[2]</a></sup> kopiert, abgespeichert und ausführbar<sup><a href="#source-3">[3]</a></sup> gemacht werden.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Für die Verwendung von <a class="internal" href="./festival.html">Festival</a> muss, wenn ein anderer Player als <a class="internal" href="./festival/kompilieren.html#MPlayer-als-Ausgabesoftware-verwenden">Ausgabesoftware</a> verwendet werden soll, der Befehl für die Audioausgabe in Zeile 167/169 angepasst werden, es muss dort der entsprechende Player eingesetzt werden! Festival aus den Quellen greift inzwischen auf <a class="internal" href="./alsa.html#aplay">aplay</a> zurück, für die deutsche Version ist im Skript <a class="internal" href="./avplay.html">avplay</a> vorgesehen.
</p></div></div><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#    xsane2speech - speech directly from xsane</span>
<span class="c1">#    Copyright (C) 2010 - 2013 Heinrich Schwietering</span>
<span class="c1"># </span>
<span class="c1">#    This program is free software: you can redistribute it and/or modify</span>
<span class="c1">#    it under the terms of the GNU General Public License as published by</span>
<span class="c1">#    the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1">#    (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1">#    This program is distributed in the hope that it will be useful,</span>
<span class="c1">#    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1">#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1">#    GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1">#    You should have received a copy of the GNU General Public License</span>
<span class="c1">#    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c1">##</span>
<span class="c1">#</span>
<span class="c1">##############################################################################</span>
<span class="c1">#</span>
<span class="c1">#                               xsane2speech 0.2</span>
<span class="c1">#</span>
<span class="c1">#                       *** OCR and TTS made simple ***</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">##############################################################################</span>
<span class="c1">#</span>
<span class="c1"># xsane2speech is a OCR wrapper to be able to use tesseract or cuneiform</span>
<span class="c1"># with xsane, and utter the result via espeak or festival or save it as mp3</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="nv">TEMP_DIR</span><span class="o">=</span>/tmp/      <span class="c1"># folder for temporary files (TIFF &amp; tesseract data)</span>
<span class="nv">ERRORLOG</span><span class="o">=</span><span class="s2">"xsane2speech.log"</span>  <span class="c1"># file where STDERR goes</span>
<span class="nv">ESPEAK</span><span class="o">=</span>espeak
<span class="nv">CUNEIFORM</span><span class="o">=</span>cuneiform
<span class="nv">FESTIVAL</span><span class="o">=</span>/PATH/TO/COMPILED/VERSION/OF/festival/bin <span class="c1">#path for german festival and text2wave</span>
<span class="nv">TESSERACT</span><span class="o">=</span>tesseract
<span class="nv">USER</span><span class="o">=</span>~/Dokumente/Vorlesen
<span class="nv">SEL</span><span class="o">=</span>/usr/local/bin/select.sh
<span class="nv">MAINPROG</span><span class="o">=</span>xsane2speech.sh

<span class="k">if</span> <span class="o">[[</span> -z <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">]]</span>
  <span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">"Usage: </span><span class="nv">$0</span><span class="s2"> [OPTIONS]</span>

<span class="s2">  xsane2speech converts files to TIF, scans them with Tesseract or Cuneiform</span>
<span class="s2">  outputs the text in a file and converts it to speech</span>

<span class="s2">  OPTIONS:</span>
<span class="s2">    -i &lt;file1&gt;  define input file (any image-format supported)</span>
<span class="s2">    -o &lt;file2&gt;  define output-file (*.txt)</span>
<span class="s2">    -l &lt;lang&gt;  define language-data OCR engine should use</span>
<span class="s2">    -e &lt;option&gt; extra option for Cuneiform</span>
<span class="s2">    -z &lt;ocr-engine&gt; OCR engines cuneiform or tesseract (default)</span>
<span class="s2">    -y &lt;synthesizer&gt; define synthesizer festival or eSpeak (default)</span>
<span class="s2">    -x &lt;settings&gt; synthesizer settings; for festival, only [language] is possible</span>

<span class="s2">  Progress- &amp; error-messages will be stored in this logfile:</span>
<span class="s2">     </span><span class="nv">$TEMP_DIR$ERRORLOG</span><span class="s2"></span>

<span class="s2">  xsane2tess depends on</span>
<span class="s2">    - XSane http://www.xsane.org/</span>
<span class="s2">    - ImageMagick  http://www.imagemagick.org/</span>
<span class="s2">    - TesseractOCR https://github.com/tesseract-ocr</span>
<span class="s2">    - Cuneiform-Linux https://launchpad.net/cuneiform-linux</span>
<span class="s2">    - eSpeak http://espeak.sourceforge.net/</span>
<span class="s2">    - festival http://www.cstr.ed.ac.uk/projects/festival</span>
<span class="s2">    - optional: german festival</span>
<span class="s2">    - iconv http://www.gnu.org/software/libiconv/</span>
<span class="s2">    - yad http://sourceforge.net/projects/yad-dialog/</span>
<span class="s2">    - lame http://lame.sourceforge.net/</span>
<span class="s2">    - mbrola http://tcts.fpms.ac.be/synthesis/mbrola</span>
<span class="s2">  Some coding was stolen from 'ocube'</span>
<span class="s2">  http://www.geocities.com/thierryguy/ocube.html</span>

<span class="s2">"</span>
  <span class="nb">exit</span>
<span class="k">fi</span>

endsel<span class="o">(){</span>
       <span class="o">{</span> <span class="k">if</span> 
           pidof yad <span class="nb">true</span> <span class="p">;</span> <span class="k">then</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span> <span class="c1">#the PIDs end up in the text without the 1&amp;&gt;2</span>
           <span class="k">$(</span>killall -q -s SIGKILL yad<span class="k">)</span>
           <span class="nb">echo</span> <span class="s2">"MAIN: yad ended"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
	   rm -f /tmp/paused.txt
       <span class="k">fi</span> <span class="o">}</span>
<span class="o">}</span>

endall<span class="o">(){</span>
      <span class="nb">echo</span> <span class="s2">"MAIN: text </span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt erased"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
      <span class="nb">echo</span> <span class="s2">"MAIN: ~~~+++~~~~+++~~~ xsane2speech aborted"</span> <span class="k">$(</span>date +%c<span class="k">)</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
      <span class="k">$(</span>rm -f <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> <span class="p">;</span> rm -f <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span> <span class="p">;</span> killall -q -s SIGKILL <span class="s2">"</span><span class="nv">$MAINPROG</span><span class="s2">"</span><span class="k">)</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="o">}</span>

resetname<span class="o">(){</span>
	cat <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">"</span> &gt; <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-new"</span>
        mv <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-new"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span>
        rm -f <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.txt"</span>
        rm -f <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">"</span>
<span class="o">}</span>

cleanall<span class="o">(){</span>
<span class="c1"># clean text</span>
sed -i -r -e <span class="s1">'s/››/"/g; s/[-—–]/-/g'</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> <span class="c1">#replaces incompatibel -signs</span>
sed -i -r -e <span class="s1">'s/ﬁ/fi/g; s/ﬂ/fl/g; s/[íı]/i/g'</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> <span class="c1"># fixes ligature ﬁ, ﬂ, signs íı</span>
sed -i -r -e <span class="s1">'N;s/([[:lower:]])-\n([[:lower:]][^ ]* ?)/\1\2\n/;P;D'</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> <span class="c1">#removes "Trennungen"</span>
sed -i -r -e <span class="s1">'s/([]I])([aäeioöuü])/\ J\2/g'</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> <span class="c1">## replace misinterpreted ]/I with J</span>
sed -i -r -e <span class="s1">'s/fš/ß/g'</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> <span class="c1">#replaces misinterpreted fš with ß</span>
sed -i -r -e <span class="s1">'s/&lt;&lt;/"/g; s/&gt;&gt;/"/g'</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> <span class="c1">#replaces incompatible signs</span>
<span class="o">}</span>

cleanfestival<span class="o">(){</span>
<span class="c1"># changes certain sign combinations festival can't use</span>
<span class="c1">#sed -i -r -e 's/([[:alpha:]][[:alpha:]])([0-9])/\1 \2/g; s/([[:lower:]])([[:upper:]])/\1\l\2/g' "$FILE_OUT"</span>
sed -i -r -e <span class="s1">'s/([[:upper:]])\.([[:upper:]])\./\1 \2 /g'</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> <span class="c1"># remove dots in U.S. (example)</span>
sed -i -r -e <span class="s1">'s/([[:alpha:]][[:alpha:]])([0-9])/\1 \2/g'</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> <span class="c1"># dissembles character-digit-digit combinationes</span>
sed -i -r -e <span class="s1">'s/[’‘]/`/g; s/[«»ˮ„”“‟]/"/g; s/,,/"/g'</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> <span class="c1">#replaces incompatible utf-8 signs</span>
sed -i -r -e <span class="s1">'s/››/"/g; s/[-—]/-/g'</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> <span class="c1">#replaces incompatible utf-8 signs</span>
sed -i -r -e <span class="s1">'s/‚/,/g'</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span>
sed -i -r -e <span class="s1">'s/([0-9])([[:alpha:]])/\1 \2/g'</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> <span class="c1"># dissembles digit-character combinationes</span>
iconv -t ISO8859-15 <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> -o <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> <span class="c1"># recodes to ISO-8859-15 for festival</span>
<span class="o">}</span>

<span class="c1"># get options...</span>
<span class="k">while</span> <span class="nb">getopts</span> <span class="s2">":i:o:l:e:z:y:x:"</span> OPTION
  <span class="k">do</span>
  <span class="k">case</span> <span class="nv">$OPTION</span> in
    i <span class="o">)</span>  <span class="c1"># input filename (with path)</span>
      <span class="nv">FILE_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span>
    <span class="p">;;</span>
    o <span class="o">)</span>  <span class="c1"># output filename</span>
      <span class="nv">FILE_OUT_LONG</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span>
    <span class="p">;;</span>
    l <span class="o">)</span>  <span class="c1"># language selection for OCR engine</span>
      <span class="nv">LANGUAGE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span>
    <span class="p">;;</span>
    e <span class="o">)</span>  <span class="c1"># format selection for cuneiform</span>
      <span class="nv">EXTRA</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span>
    <span class="p">;;</span>
    z <span class="o">)</span>  <span class="c1"># OCR engine</span>
      <span class="nv">OCRENG</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span>
    <span class="p">;;</span>
    y <span class="o">)</span>  <span class="c1"># synthesizer selection (default is eSpeak)</span>
      <span class="nv">SYNTH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span>
    <span class="p">;;</span>
    x <span class="o">)</span>  <span class="c1"># Synthesizer-settings (language, speed etc)</span>
      <span class="nv">SYNSET</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span>
    <span class="p">;;</span>
  <span class="k">esac</span>
<span class="k">done</span>


<span class="c1"># strips extension from FILE_OUT_LONG</span>
<span class="nv">FILE_OUT</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">FILE_OUT_LONG</span><span class="p">%.*</span><span class="si">}</span><span class="s2">"</span>

<span class="c1"># redirect STDERR to ERRORLOG</span>
<span class="nb">exec</span> <span class="m">2</span>&gt;&gt;<span class="s2">"</span><span class="nv">$TEMP_DIR</span><span class="s2">""</span><span class="nv">$ERRORLOG</span><span class="s2">"</span>

<span class="nb">echo</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="nb">echo</span> <span class="s2">"Start ~~~+++~~~~+++~~~"</span> <span class="k">$(</span>date +%c<span class="k">)</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>

<span class="c1"># set variable for sound processing</span>
<span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="nv">$SYNTH</span> <span class="o">==</span> <span class="s2">"festival"</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
   <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="nv">$SYNSET</span> <span class="o">==</span> <span class="s2">"german"</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
      <span class="nv">SOUND</span><span class="o">=</span>avplay
   <span class="k">else</span>
      <span class="nv">SOUND</span><span class="o">=</span>aplay
   <span class="k">fi</span> <span class="o">}</span>
<span class="k">else</span>
   <span class="nv">SOUND</span><span class="o">=</span>espeak
   <span class="nv">SYNTH</span><span class="o">=</span>espeak
<span class="k">fi</span> <span class="o">}</span>
<span class="nb">echo</span> <span class="s2">"MAIN: </span><span class="nv">$SOUND</span><span class="s2"> set for </span><span class="nv">$SEL</span><span class="s2">"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>

<span class="c1">#check charset if output file exists and change it is neccesary</span>
<span class="o">{</span> <span class="k">if</span> <span class="o">[</span> -f <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.txt"</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
   <span class="nv">CHECKCHAR</span><span class="o">=</span><span class="k">$(</span>file -b <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.txt"</span><span class="k">)</span>
   <span class="o">{</span> <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$CHECKCHAR</span><span class="s2">"</span> !<span class="o">=</span> <span class="s2">"empty"</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span> 
      <span class="nb">echo</span> <span class="s2">"MAIN: File exists, Charset is </span><span class="nv">$CHECKCHAR</span><span class="s2">"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
      mv <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.txt"</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span>
      cleanall
      <span class="o">{</span> <span class="k">if</span> <span class="o">[</span> <span class="nv">$SYNTH</span> !<span class="o">=</span> <span class="s2">"festival"</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
         <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$CHECKCHAR</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"ISO-8859 text"</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
            <span class="nv">LC_ALL</span><span class="o">=</span>C iconv -f ISO8859-15 -t UTF-8 <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> -o <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span>
            <span class="nb">echo</span> <span class="s2">"MAIN: Charset changed to UTF-8"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
         <span class="k">fi</span> <span class="o">}</span>
      <span class="k">else</span>
         <span class="o">{</span> <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$CHECKCHAR</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"UTF-8 Unicode text"</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
            cleanfestival
            <span class="nb">echo</span> <span class="s2">"MAIN: Charset changed to ISO8859-15"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
         <span class="k">fi</span> <span class="o">}</span>
      <span class="k">fi</span> <span class="o">}</span>
      mv <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.txt"</span>
   <span class="k">fi</span> <span class="o">}</span>
<span class="k">fi</span> <span class="o">}</span>

<span class="nv">TXT_FILE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$TEMP_DIR</span><span class="s2">""OCRResult"</span>
<span class="nv">TIF_FILE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$TEMP_DIR</span><span class="s2">""OCRResult"</span>.tif

<span class="c1"># converting image into TIFF (ImageMagick]</span>
convert <span class="s2">"</span><span class="nv">$FILE_PATH</span><span class="s2">"</span> -compress none  <span class="s2">"</span><span class="nv">$TIF_FILE</span><span class="s2">"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>

<span class="c1"># check for requested ocr engine</span>
<span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$OCRENG</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"cuneiform"</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
   <span class="c1"># start OCR </span>
   <span class="s2">"</span><span class="nv">$CUNEIFORM</span><span class="s2">"</span> -l <span class="s2">"</span><span class="nv">$LANGUAGE</span><span class="s2">"</span> -f smarttext -o <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">"</span>.txt <span class="s2">"--</span><span class="nv">$EXTRA</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$TIF_FILE</span><span class="s2">"</span>  <span class="m">2</span>&gt; /dev/null
   <span class="nb">echo</span> <span class="s2">"MAIN: cuneiform -l "</span><span class="nv">$LANGUAGE</span><span class="s2">" -f smarttext used"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
   <span class="c1"># remove strange signs produced by cuneiform</span>
   sed -i -r -e <span class="s1">'s/â€”/-/g; s/â€"/-/g'</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">"</span>.txt
   <span class="nb">echo</span> <span class="s2">"MAIN: cuneiform text cleaned"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="k">else</span>
   <span class="c1"># tesseract is default, start OCR (tesseract expands output with *.txt)</span>
   tesseract <span class="s2">"</span><span class="nv">$TIF_FILE</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">"</span> -l <span class="s2">"</span><span class="nv">$LANGUAGE</span><span class="s2">"</span> <span class="m">2</span>&gt; /dev/null
   <span class="c1"># distinguish between J an I, which are often identical in "Fraktur"</span>
   <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$LANGUAGE</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"deu-frak"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
      sed -i -r -e <span class="s1">'s/([J])([bcdfghjklmnpqrstvwxyzß])/\I\2/g'</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">"</span>.txt
   <span class="k">fi</span> <span class="o">}</span>
   <span class="nb">echo</span> <span class="s2">"MAIN: tesseract -l "</span><span class="nv">$LANGUAGE</span><span class="s2">" used"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="k">fi</span> <span class="o">}</span>
cleanall
<span class="c1">#iconv -t UTF-8 "$TXT_FILE.txt" -o "$TXT_FILE.txt"</span>
<span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$SYNTH</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"festival"</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
   cleanfestival
   <span class="nb">echo</span> <span class="s2">"MAIN: text cleaned and recoded for festival"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="k">fi</span> <span class="o">}</span>

<span class="c1"># add scanned text to FILE_OUT</span>
cat <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">"</span>.txt &gt; <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">"</span>

<span class="c1"># deletes graphic file after use</span>
rm <span class="s2">"</span><span class="nv">$TIF_FILE</span><span class="s2">"</span>

<span class="c1">#rename file as $FILE_OUT-read.txt</span>
<span class="o">{</span> <span class="k">if</span> <span class="o">[</span> -f <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
   resetname
<span class="k">elif</span> <span class="o">[</span> -f <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.txt"</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
   mv <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.txt"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span>
   resetname
<span class="k">else</span> 
   mv <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span>
   rm -f <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.txt"</span>
<span class="k">fi</span> <span class="o">}</span>

<span class="c1"># Asks for further scans to be added</span>
<span class="nv">END</span><span class="o">=</span><span class="k">$(</span><span class="nv">DISPLAY</span><span class="o">=</span>:0.0 yad --geometry -0-0 --title<span class="o">=</span><span class="s2">"xsane2speech"</span> --button<span class="o">=</span>Ja:2 --button<span class="o">=</span>Nein:4 --text<span class="o">=</span><span class="s2">"Sollen weitere Textpassagen angehängt werden?"</span><span class="k">)</span>
<span class="nv">ret</span><span class="o">=</span><span class="nv">$?</span>
<span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">4</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
   <span class="nv">SPELLCHECK</span><span class="o">=</span><span class="k">$(</span><span class="nv">DISPLAY</span><span class="o">=</span>:0.0 yad --geometry -0-0 --timeout<span class="o">=</span><span class="m">10</span> --title<span class="o">=</span><span class="s2">"Rechtschreibung"</span> --button<span class="o">=</span>Ja:2 --button<span class="o">=</span>Nein:4 --text<span class="o">=</span><span class="s2">"Rechtschreibprüfung?"</span><span class="k">)</span>
   <span class="nv">ret</span><span class="o">=</span><span class="nv">$?</span>
   <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">2</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
      gedit <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span>
<span class="c1">#      gnome-terminal -x hunspell -d de_old "$FILE_OUT-read.txt" #f or old german spelling</span>
<span class="c1">#      gnome-terminal -x aspell -c "$FILE_OUT-read.txt"</span>
      <span class="nb">echo</span> <span class="s2">"MAIN: gedit used for spellchecking"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span> 
   <span class="k">fi</span> <span class="o">}</span>
   <span class="nv">TEXTREG</span><span class="o">=</span><span class="k">$(</span><span class="nv">DISPLAY</span><span class="o">=</span>:0.0 yad --geometry -0-0 --text<span class="o">=</span><span class="s2">"Die Text-Erkennung \nist abgeschlossen!"</span><span class="k">)</span>
   <span class="nv">ret</span><span class="o">=</span><span class="nv">$?</span>
   rm -f <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt~"</span>
      <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">1</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
      endall
      <span class="k">fi</span> <span class="o">}</span>
   <span class="c1"># check if direct tts or saving as mp3 is requested</span>
   <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$SYNTH</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"festival"</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
      <span class="nv">mp3</span><span class="o">=</span><span class="k">$(</span><span class="nv">DISPLAY</span><span class="o">=</span>:0.0 yad --geometry -0-0 --title<span class="o">=</span><span class="s2">"Ausgabe"</span> --button<span class="o">=</span>Abbruch:6 --button<span class="o">=</span><span class="s2">"als .mp3"</span>:4 --button<span class="o">=</span>direkt:8 --text<span class="o">=</span><span class="s2">"Wie soll die Ausgabe erfolgen?"</span><span class="k">)</span>
   <span class="k">else</span> 
      <span class="nv">mp3</span><span class="o">=</span><span class="k">$(</span><span class="nv">DISPLAY</span><span class="o">=</span>:0.0 yad --geometry -0-0 --title<span class="o">=</span><span class="s2">"Ausgabe"</span> --button<span class="o">=</span>Abbruch:6 --button<span class="o">=</span><span class="s2">"als .mp3"</span>:4 --button<span class="o">=</span>direkt:2 --button<span class="o">=</span><span class="s2">"direkt ohne Wechsel"</span>:8 --text<span class="o">=</span><span class="s2">"Wie soll die Ausgabe erfolgen?"</span><span class="k">)</span>
   <span class="k">fi</span> <span class="o">}</span>
   <span class="nv">ret</span><span class="o">=</span><span class="nv">$?</span>
   <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">6</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
      endall
   <span class="k">elif</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">2</span> <span class="o">]]</span> <span class="o">||</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">8</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
      <span class="c1"># Start and options for "SEL"</span>
      <span class="k">$(</span><span class="s2">"</span><span class="nv">$SEL</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SOUND</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span> <span class="s2">"</span><span class="nv">$TEMP_DIR</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$ERRORLOG</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SYNTH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SYNSET</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SEL</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$MAINPROG</span><span class="s2">"</span><span class="k">)</span> <span class="m">2</span>&gt; /dev/null <span class="p">&amp;</span> 
      <span class="c1"># check for requested synthesizer, eSpeak is default   </span>
      <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$SYNTH</span><span class="s2">"</span> !<span class="o">=</span> <span class="s2">"festival"</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
         <span class="nb">echo</span> <span class="s2">"MAIN: eSpeak with options </span><span class="nv">$SYNSET</span><span class="s2"> used for utterance"</span>  <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
         <span class="k">$(</span><span class="s2">"</span><span class="nv">$ESPEAK</span><span class="s2">"</span> <span class="nv">$SYNSET</span> -f <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span> <span class="m">2</span>&gt; /dev/null<span class="k">)</span>
      <span class="k">else</span> 
         <span class="nb">echo</span> <span class="s2">"MAIN: festival --language </span><span class="nv">$SYNSET</span><span class="s2"> used for utterance"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
         <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$SYNSET</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"german"</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
            <span class="c1"># german festival is requested</span>
            <span class="k">$(</span><span class="s2">"</span><span class="nv">$FESTIVAL</span><span class="s2">"</span>/festival --heap <span class="m">10000000</span> --language <span class="s2">"</span><span class="nv">$SYNSET</span><span class="s2">"</span> --tts <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span><span class="k">)</span> <span class="m">2</span>&gt; /dev/null
            <span class="c1"># other festival languages used -&gt; festival in "PATH" used</span>
         <span class="k">else</span>
            <span class="k">$(</span>festival --language <span class="s2">"</span><span class="nv">$SYNSET</span><span class="s2">"</span> --tts <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span><span class="k">)</span>  <span class="m">2</span>&gt; /dev/null
         <span class="k">fi</span> <span class="o">}</span>
      <span class="k">fi</span> <span class="o">}</span>

   endsel

      <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">2</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>	
         <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$SYNTH</span><span class="s2">"</span> !<span class="o">=</span> <span class="s2">"festival"</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
            <span class="nv">VOICE</span><span class="o">=</span><span class="k">$(</span><span class="nv">DISPLAY</span><span class="o">=</span>:0.0 yad --geometry -0-0 --timeout<span class="o">=</span><span class="m">10</span> --title<span class="o">=</span><span class="s2">"Stimme"</span> --button<span class="o">=</span>Ja:4 --button<span class="o">=</span>Nein:2 --text<span class="o">=</span><span class="s2">"Soll eine andere Stimme verwendet werden?"</span><span class="k">)</span>
            <span class="nv">ret</span><span class="o">=</span><span class="nv">$?</span>
            <span class="nv">LOOPSET</span><span class="o">=</span>TESTING
            <span class="k">while</span> <span class="o">[[</span> <span class="nv">$LOOPSET</span> <span class="o">==</span> <span class="s2">"TESTING"</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">do</span>

               <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">4</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
               <span class="nv">SYNSET</span><span class="o">=</span>-v<span class="k">$(</span><span class="nv">DISPLAY</span><span class="o">=</span>:0.0 yad --geometry -0-0 --title<span class="o">=</span><span class="s2">"Spachkürzel"</span> --text <span class="s2">"eSpeak-Sprachenkürzel und ggf. Optionen eingeben:"</span> --entry --entry-text<span class="o">=</span><span class="s2">"mb-de5 -s145 -g3"</span><span class="k">)</span>
               <span class="nb">echo</span> <span class="s2">"MAIN: eSpeak with options </span><span class="nv">$SYNSET</span><span class="s2"> used for utterance"</span>  <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
   <span class="k">$(</span><span class="s2">"</span><span class="nv">$SEL</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SOUND</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">.txt"</span> <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span> <span class="s2">"</span><span class="nv">$TEMP_DIR</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$ERRORLOG</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SYNTH</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SYNSET</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$SEL</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$MAINPROG</span><span class="s2">"</span><span class="k">)</span> <span class="m">2</span>&gt; /dev/null <span class="p">&amp;</span> <span class="c1"># Options for "SEL"</span>
               <span class="k">$(</span><span class="s2">"</span><span class="nv">$ESPEAK</span><span class="s2">"</span> <span class="nv">$SYNSET</span> -f <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span> <span class="m">2</span>&gt; /dev/null<span class="k">)</span> 
               endsel
               <span class="nv">VOICE2</span><span class="o">=</span><span class="k">$(</span><span class="nv">DISPLAY</span><span class="o">=</span>:0.0 yad --geometry -0-0 --timeout<span class="o">=</span><span class="m">10</span> --title<span class="o">=</span><span class="s2">"Stimme"</span> --button<span class="o">=</span>Ja:4 --button<span class="o">=</span>Nein:2 --text<span class="o">=</span><span class="s2">"Noch eine andere?"</span><span class="k">)</span>
	       <span class="nv">ret</span><span class="o">=</span><span class="nv">$?</span>
               <span class="k">fi</span> <span class="o">}</span>

               <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">2</span> <span class="o">]]</span> <span class="o">||</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">70</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
		  <span class="nv">LOOPSET</span><span class="o">=</span>ENDING
		  <span class="nb">break</span>
               <span class="k">fi</span> <span class="o">}</span>
            <span class="k">done</span>
        <span class="k">fi</span> <span class="o">}</span>
      <span class="k">fi</span> <span class="o">}</span>

   <span class="c1"># check if a recording is wanted after listening</span>
   <span class="nv">END2</span><span class="o">=</span><span class="k">$(</span><span class="nv">DISPLAY</span><span class="o">=</span>:0.0 yad --geometry -0-0 --title<span class="o">=</span><span class="s2">"mp3"</span> --button<span class="o">=</span>Ja:4 --button<span class="o">=</span>Nein:2 --text<span class="o">=</span><span class="s2">"Soll eine .mp3-Datei erstellt werden?"</span><span class="k">)</span>
   <span class="nv">ret</span><span class="o">=</span><span class="nv">$?</span>
   <span class="k">fi</span> <span class="o">}</span>

<span class="c1"># set name for dirctory and file to save mp3</span>
   <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">4</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span> 
      <span class="nv">FILE</span><span class="o">=</span><span class="k">$(</span><span class="nv">DISPLAY</span><span class="o">=</span>:0.0 yad --file-selection --width <span class="m">700</span> --height <span class="m">500</span> --save --confirm-overwrite --title <span class="s2">"Name und Ort zum Speichern auswählen"</span> --filename<span class="o">=</span><span class="s2">"</span><span class="nv">$USER</span><span class="s2">"</span>/<span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">.mp3"</span><span class="k">)</span>
      <span class="nv">ret</span><span class="o">=</span><span class="nv">$?</span>
      <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">1</span> <span class="o">]]</span> <span class="o">||</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">70</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
         endall
      <span class="k">else</span>
      <span class="c1"># check for requested synthesizer</span>
      <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$SYNTH</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"festival"</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
         <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$SYNSET</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"german"</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>  
            <span class="c1"># german festival is requested</span>
            <span class="k">$(</span><span class="nv">$FESTIVAL</span>/text2wave <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span> -o <span class="s2">"</span><span class="nv">$TEMP_DIR</span><span class="s2">"</span>temp.wav <span class="o">&amp;&amp;</span> lame --tt <span class="si">${</span><span class="nv">FILE</span><span class="p">##*/</span><span class="si">}</span> --ta Hörbuch -b <span class="m">16</span> -h -V2 -S <span class="s2">"</span><span class="nv">$TEMP_DIR</span><span class="s2">"</span>temp.wav <span class="s2">"</span><span class="nv">$FILE</span><span class="s2">"</span><span class="k">)</span> <span class="m">2</span>&gt; /dev/null
         <span class="k">else</span>
            <span class="c1"># other festival languages used</span>
            <span class="k">$(</span>text2wave <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span>  -o <span class="s2">"</span><span class="nv">$TEMP_DIR</span><span class="s2">"</span>temp.wav <span class="o">&amp;&amp;</span> lame --tt <span class="si">${</span><span class="nv">FILE</span><span class="p">##*/</span><span class="si">}</span> --ta Hörbuch -b <span class="m">16</span> -h -V2 -S <span class="s2">"</span><span class="nv">$TEMP_DIR</span><span class="s2">"</span>temp.wav <span class="s2">"</span><span class="nv">$FILE</span><span class="s2">"</span><span class="k">)</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
         <span class="k">fi</span> <span class="o">}</span>

         <span class="c1"># remove temporary wave file</span>
         rm <span class="s2">"</span><span class="nv">$TEMP_DIR</span><span class="s2">"</span>temp.wav
      <span class="c1"># eSpeak is default </span>
      <span class="k">else</span> 
         <span class="k">$(</span><span class="s2">"</span><span class="nv">$ESPEAK</span><span class="s2">"</span> <span class="nv">$SYNSET</span> -f <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span> --stdout <span class="p">|</span> lame --tt <span class="si">${</span><span class="nv">FILE</span><span class="p">##*/</span><span class="si">}</span> --ta Hörbuch -b <span class="m">16</span> -h -V2 -S - <span class="s2">"</span><span class="nv">$FILE</span><span class="s2">"</span><span class="k">)</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
      <span class="k">fi</span> <span class="o">}</span>
      <span class="k">$(</span><span class="nv">DISPLAY</span><span class="o">=</span>:0.0 yad --geometry -0-0 --text<span class="o">=</span><span class="s2">"Die mp3-Erstellung \nist abgeschlossen!"</span> --timeout<span class="o">=</span><span class="m">10</span><span class="k">)</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
      <span class="nb">echo</span> <span class="s2">"MAIN: </span><span class="nv">$SYNTH</span><span class="s2"> --language </span><span class="nv">$SYNSET</span><span class="s2"> used for mp3"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
      <span class="k">fi</span> <span class="o">}</span>
   <span class="k">fi</span> <span class="o">}</span>
   <span class="nv">SAVEFILE</span><span class="o">=</span><span class="k">$(</span>yad --geometry -0-0 --timeout<span class="o">=</span><span class="m">10</span> --text <span class="s2">"Text aufbewahren?"</span> --title <span class="s2">"Textspeicherung"</span> --button<span class="o">=</span>Ja:2 --button<span class="o">=</span>Nein:4<span class="k">)</span>
   <span class="nv">ret</span><span class="o">=</span><span class="nv">$?</span>
   <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">2</span> <span class="o">]]</span> <span class="o">||</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">70</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
      mv <span class="nv">$FILE_OUT</span>-read.txt <span class="nv">$FILE_OUT</span>.txt
      <span class="nb">echo</span> <span class="s2">"MAIN: text saved as </span><span class="nv">$FILE_OUT</span><span class="s2">.txt"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
   <span class="k">elif</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">4</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
      rm <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt"</span> <span class="p">;</span> <span class="nb">echo</span> <span class="s2">"MAIN: text </span><span class="nv">$FILE_OUT</span><span class="s2">-read.txt erased"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
   <span class="k">fi</span> <span class="o">}</span>

<span class="k">fi</span> <span class="o">}</span>

<span class="c1"># delete temporary files</span>
rm -f <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">"</span>.txt
rm -f /tmp/audiofile_*
rm -f /tmp/FestplayPID.txt
rm -f /tmp/paused.txt
<span class="nb">echo</span> <span class="s2">"MAIN: END ~~~+++~~~~+++~~~"</span> <span class="k">$(</span>date +%c<span class="k">)</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
</pre></div>
</td></tr></table></div><p>Das Skript ist eine Weiterentwicklung des <a class="internal" href="./tesseract-ocr.html#xsane2tess">xsane2tess</a>-Skriptes, das auf <a class="external" href="http://doc.ubuntu-fr.org/xsane2tess" rel="nofollow">ubuntu-fr.org</a> <img alt="{fr}" src="./_/a4d7caed6af30e5c7549b4de45c71ed5f7036425.png"/> veröffentlicht worden ist.</p><p>Außerdem wird das Steuerskript <strong>select.sh</strong> (<a class="external" href="http://media.cdn.ubuntu-de.org/wiki/attachments/13/18/select.sh" rel="nofollow">Download</a> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/>) benötigt, um die Sprachausgabe zu unterbrechen, wieder aufzunehmen oder vorzeitig ganz beenden zu können.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#</span>
<span class="c1">#    Sound control script for xsane2speech - speech directly from xsane</span>
<span class="c1">#    Copyright (C) 2010, 2011, 2013 Heinrich Schwietering</span>
<span class="c1"># </span>
<span class="c1">#    This program is free software: you can redistribute it and/or modify</span>
<span class="c1">#    it under the terms of the GNU General Public License as published by</span>
<span class="c1">#    the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1">#    (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1">#    This program is distributed in the hope that it will be useful,</span>
<span class="c1">#    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1">#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1">#    GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1">#    You should have received a copy of the GNU General Public License</span>
<span class="c1">#    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c1">#</span>

<span class="nb">exec</span> <span class="m">2</span>&gt;&gt;<span class="s2">"</span><span class="si">${</span><span class="nv">4</span><span class="si">}</span><span class="s2">""</span><span class="si">${</span><span class="nv">5</span><span class="si">}</span><span class="s2">"</span>

<span class="nv">SOUND</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">1</span><span class="si">}</span><span class="s2">"</span>
<span class="nv">TXT_FILE</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">2</span><span class="si">}</span><span class="s2">"</span>
<span class="nv">FILE_OUT</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">3</span><span class="si">}</span><span class="s2">"</span>
<span class="nv">TEMP_DIR</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">4</span><span class="si">}</span><span class="s2">"</span>
<span class="nv">ERRORLOG</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">5</span><span class="si">}</span><span class="s2">"</span>
<span class="nv">SYNTH</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">6</span><span class="si">}</span><span class="s2">"</span>
<span class="nv">SYNSEL</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">7</span><span class="si">}</span><span class="s2">"</span>
<span class="nv">SEL</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">8</span><span class="si">}</span><span class="s2">"</span>
<span class="nv">MAINPROG</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">9</span><span class="si">}</span><span class="s2">"</span>

endall<span class="o">(){</span>
   <span class="k">$(</span>killall -q -s SIGKILL <span class="s2">"</span><span class="nv">$SYNTH</span><span class="s2">"</span><span class="k">)</span>
      <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$SYNTH</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"festival"</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
         <span class="k">$(</span>killall -q -s SIGKILL <span class="s2">"</span><span class="nv">$SOUND</span><span class="s2">"</span><span class="k">)</span>
         <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$SYNSEL</span><span class="s2">"</span> !<span class="o">=</span> <span class="s2">"german"</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
            <span class="k">$(</span>killall -q -s SIGKILL audsp<span class="k">)</span>
            sleep <span class="m">0</span>.1
            <span class="k">$(</span>killall -q -s SIGKILL <span class="s2">"</span><span class="nv">$SOUND</span><span class="s2">"</span><span class="k">)</span>
         <span class="k">fi</span> <span class="o">}</span>
      <span class="k">fi</span> <span class="o">}</span>
   rm -f /tmp/paused.txt
   rm -f /tmp/audiofile_*
   rm -f /tmp/FestplayPID.txt
<span class="o">}</span>

endsel<span class="o">(){</span>
   <span class="k">$(</span>killall -q -s SIGKILL <span class="s2">"</span><span class="nv">$SEL</span><span class="s2">"</span><span class="k">)</span>
   <span class="nb">break</span>
<span class="o">}</span>

<span class="c1">#delay until "$SOUND" is started</span>
<span class="o">{</span> <span class="k">for</span> i in <span class="o">{</span><span class="m">1</span>..16<span class="o">}</span><span class="p">;</span> <span class="k">do</span>
   <span class="o">{</span> <span class="k">if</span> pidof <span class="s2">"</span><span class="nv">$SOUND</span><span class="s2">"</span> true<span class="p">;</span> <span class="k">then</span>
      <span class="nb">break</span>
   <span class="k">else</span>
      <span class="nb">echo</span> <span class="s2">"waiting for </span><span class="nv">$SOUND</span><span class="s2">"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
      sleep <span class="m">0</span>.5
   <span class="k">fi</span> <span class="o">}</span>
<span class="k">done</span> <span class="o">}</span>

<span class="k">while</span> pidof <span class="s2">"</span><span class="nv">$SOUND</span><span class="s2">"</span> <span class="nb">true</span>
   <span class="k">do</span>
   <span class="nv">action</span><span class="o">=</span><span class="k">$(</span><span class="nv">DISPLAY</span><span class="o">=</span>:0.0 yad --title Wiedergabe --geometry -0-0 --button<span class="o">=</span><span class="s2">"Pause/Play"</span>:2 --button<span class="o">=</span>Beenden:4 --button<span class="o">=</span>Abbruch:8 <span class="k">)</span>
   <span class="nv">ret</span><span class="o">=</span><span class="nv">$?</span>

   <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">2</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
      <span class="o">{</span> <span class="k">if</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$SOUND</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"gnome-mplayer"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
         <span class="nb">echo</span> <span class="k">$(</span>pgrep -n mplayer<span class="k">)</span> &gt; /tmp/FestplayPID.txt
      <span class="k">else</span>
	 <span class="nb">echo</span> <span class="k">$(</span>pgrep -n <span class="s2">"</span><span class="nv">$SOUND</span><span class="s2">"</span><span class="k">)</span> &gt; /tmp/FestplayPID.txt
      <span class="k">fi</span> <span class="o">}</span>
      <span class="nv">PAPID</span><span class="o">=</span><span class="k">$(</span>cat /tmp/FestplayPID.txt<span class="k">)</span>
      <span class="nb">echo</span> <span class="s2">"SEL: pid </span><span class="nv">$PAPID</span><span class="s2">"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
      <span class="o">{</span> <span class="k">if</span> <span class="o">[</span> -f /tmp/paused.txt <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
        sleep <span class="m">0</span>.1
	<span class="k">$(</span><span class="nb">kill</span> -SIGCONT <span class="s2">"</span><span class="nv">$PAPID</span><span class="s2">"</span><span class="k">)</span>  
	rm -f /tmp/paused.txt
	<span class="nb">echo</span> <span class="s2">"SEL: utterance resumed"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
      <span class="k">else</span>   
	<span class="k">$(</span><span class="nb">kill</span> -SIGSTOP <span class="s2">"</span><span class="nv">$PAPID</span><span class="s2">"</span><span class="k">)</span> 
	<span class="nb">echo</span> <span class="s2">"SEL: paused"</span> &gt; /tmp/paused.txt
	<span class="nb">echo</span> <span class="s2">"SEL: utterance paused"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
      <span class="k">fi</span> <span class="o">}</span>
   <span class="k">elif</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">4</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
      endall
      <span class="nb">echo</span> <span class="s2">"SEL: utterance canceled"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
      sleep <span class="m">0</span>.6
      endsel
   <span class="k">elif</span> <span class="o">[[</span> <span class="nv">$ret</span> -eq <span class="m">8</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
      endall

      rm <span class="s2">"</span><span class="nv">$TXT_FILE</span><span class="s2">"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
      rm <span class="s2">"</span><span class="nv">$FILE_OUT</span><span class="s2">"</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
      <span class="nb">echo</span> <span class="s2">"SEL: abborted ~~~+++~~~~+++~~~"</span> <span class="k">$(</span>date +%c<span class="k">)</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
      <span class="k">$(</span>killall -q -s SIGKILL <span class="s2">"</span><span class="nv">$MAINPROG</span><span class="s2">"</span><span class="k">)</span>
<span class="c1">#      sleep 0.1</span>
      <span class="k">$(</span>killall -q -s SIGKILL yad<span class="k">)</span>
      endsel
   <span class="k">fi</span> <span class="o">}</span>
<span class="k">done</span>
</pre></div>
</td></tr></table></div><p>Beide Skripte kopiert man am besten mit Root-Rechten<sup><a href="#source-4">[4]</a></sup> nach <strong>/usr/local/bin</strong>, so lässt sich das Programm von allen Benutzern verwenden.</p></div><div class="section_1"><h2 id="Konfiguration">Konfiguration<a class="headerlink" href="#Konfiguration">¶</a></h2><p>
Das Temporärverzeichnis in <strong>xsane2speech.sh</strong> (Zeile 33) kann entsprechend der eigenen Wünsche angepasst werden, dort wird auch die <strong>xsane2speech.log</strong>-Datei abgelegt. Die weiteren Variablen müssen ggf. geändert werden, wenn die Programme in anderen als den üblicherweise im <a class="internal" href="./umgebungsvariable.html">PATH</a> eingetragenen Verzeichnissen liegen. Dies gilt insbesondere bei der Verwendung von erweiterten <a class="internal" href="./festival/kompilieren.html#IMS-Mbrola-Version">Festival-Versionen</a>, das Skript ermöglicht die Verwendung der "Standard"-Installation aus den Paketquellen neben einer selbsterstellten deutschsprachigen Version.</p></div><div class="section_1"><h2 id="Funktionsweise">Funktionsweise<a class="headerlink" href="#Funktionsweise">¶</a></h2><p>
Die mit XSane eingescannten Vorlagen werden einer Texterkennung unterzogen (Standard ist tesseract-ocr, Alternative Cuneiform-Linux, womit eine Vielzahl von Sprachen abgedeckt ist). Es sind beliebig viele kombinierte Scans möglich, der  Abschluss der Texterfassung wird im yad-Fenster bestätigt. Der gesamte Text kann ggf. vor Ausgabe in einem Texteditor<sup><a href="#source-2">[2]</a></sup> oder mit Hunspell/Aspell korrigiert werden, z.T. werden typische Erkennungs-Fehler direkt ausgebügelt (Funktionen <code class="notranslate">cleanall</code> bzw <code class="notranslate">cleanfestival</code>). So erkennt Cuneiform z.B. gerne Bindestriche als <code class="notranslate">â€”</code>, auch für Festival werden nicht-auslesbare Zeichenkombinationen "entschärft". Über die Synthesizer eSpeak (Standard-Einstellung) oder Festival wird der Text dann in Sprache umgewandelt, auch hierfür stehen eine Vielzahl von Sprachen zur Verfügung, es können über eSpeak auch viele <a class="external" href="http://tcts.fpms.ac.be/synthesis/mbrola/mbrcopybin.html" rel="nofollow">Mbrola-Stimmen</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> zum Einsatz kommen. Die Ausgabe erfolgt entweder direkt, oder sie wird in einer <strong>.mp3</strong>-Datei aufgezeichnet, dafür kommt <code class="notranslate">lame</code> zum Einsatz. Beim Einsatz von Festival-Stimmen erfolgt zuvor eine Umwandlung in eine Wave-Datei mit dem Festival-eigenen Programm <code class="notranslate">text2wave</code>.</p></div><div class="section_1"><h2 id="Benutzung">Benutzung<a class="headerlink" href="#Benutzung">¶</a></h2><p>
In <em>"XSane -&gt; Einstellung -&gt; Konfiguration -&gt; Texterkennung"</em> wird als OCR-Befehl <em>"/PFAD/ZU/xsane2speech.sh"</em> sowie dazugehörige Optionen zur Steuerung angegeben. Als weitere Optionen werden <em>"-i"</em>, für die Ausgabedatei <em>"-o"</em> angeben, die weiteren Felder bleiben leer. Die Option <em>"Benutze GUI Fortschritts Pipe"</em> darf nicht angehakt sein (nicht nur wegen der orthographischen Mängel...), da sonst das Wrapper-Skript nicht geschlossen werden kann, es bleiben sonst etliche nicht abwürgbare "Zombie"-Prozesse zurück, die erst mit Beenden von XSane abgeschlossen werden.</p><div class="section_2"><h3 id="Beispiele">Beispiele<a class="headerlink" href="#Beispiele">¶</a></h3><p>
</p><pre class="notranslate">xsane2speech.sh -l deu -x "-vmb-de6 -s165 -g2"</pre><p>verwendet Tesseract mit deutscher Sprache, für die Sprachausgabe wird eSpeak mit der Mbrola-Stimme <strong>de6</strong> eingesetzt, Sprechgeschwindigkeit 165 Wörter pro Minute, Pauseneinstellung zwischen den Wörten ca. 20 ms. Diese Feineinstellungen kann man am besten in <a class="internal" href="./gespeaker.html">Gespeaker</a> ausprobieren, wo sie über Schiebregeler leicht einstellbar sind. Zur Verwendung der mbrola-Stimmen siehe auch <a class="internal" href="./gespeaker.html#mbrola-Stimmen-einbinden">mbrola-Stimmen einbinden</a>.</p><pre class="notranslate">xsane2speech.sh -z Cuneiform -l ita -e "fax" -y festival -x italian</pre><p>setzt Cuneiform-Linux für italienischen Text ein, das Format ist Text mit Zeilenumbrüchen wie in der Vorlage, Einstellung für eine Vorlage in Fax-Qualität. Als Sprachausgabe kommt Festival mit italienischer Stimme zum Einsatz. Informationen zur näheren Festlegung der Sprecherstimme findet man unter <a class="internal" href="./festival.html#Sprache-Stimme-festlegen">Sprache/Stimme festlegen</a>.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Die Angaben müssen sehr exakt erfolgen, es dürfen zwischen den Optionen <span class="underline">nur einfache</span> Leerzeichen verwendet werden, sonst kommt es zu Fehlern!</p><p>Im <a class="crosslink post" href="https://forum.ubuntuusers.de/post/3891527/">Forum</a> findet sich ein Skript, mit dem dialoggeführt fehlerfreie Konfigurationen für verschiedene Einstellungen erstellt und für weitere Verwendung auch abgespeichert werden können. Es verwendet ebenfalls <a class="internal" href="./yad.html">yad</a> für die Dialoge.
</p></div></div></div><div class="section_2"><h3 id="Optionen">Optionen<a class="headerlink" href="#Optionen">¶</a></h3><p>
Die verfügbaren Optionen für das Skript sind:</p><p>
</p><table style="width: 97%"><tr class="titel"><td colspan="2"> Optionen für xsane2speech </td></tr><tr class="kopf"><td style="width: 20%"> Argument </td><td> Funktion </td></tr><tr><td> <code class="notranslate">-z OCR-PROGRAMM</code> </td><td> <code class="notranslate">Tesseract</code>, <code class="notranslate">Cuneiform</code>, Tesseract ist der Standard, wenn keine Angabe gemacht wird </td></tr><tr class="highlight"><td> <code class="notranslate">-l SPRACHKÜRZEL</code> </td><td> Legt die verwendete Sprache für das OCR-Programm fest, ohne Angabe wird englisch (<code class="notranslate">eng</code>) verwendet </td></tr><tr><td> <code class="notranslate">-e OPTION</code> </td><td> Extra-Optionen für Cuneiform-Linux, möglich <code class="notranslate">matrix</code> (Nadeldrucker-Vorlage), <code class="notranslate">singlecolumn</code> (einspaltig auslesen) und <code class="notranslate">fax</code> (Vorlage in Fax-Qualität) </td></tr><tr class="highlight"><td><code class="notranslate">-y SYNTHESIZER</code> </td><td> <code class="notranslate">festival</code> oder <code class="notranslate">espeak</code> (Standard wenn keine Angabe erfolgt) </td></tr><tr><td> <code class="notranslate">-x "SYNTHESIZER-OPTION(EN)"</code> </td><td> eSpeak-Option(en), müssen in Anführungszeichen stehen; für Festival ist hier nur ein Sprachangabe möglich. Ohne Angabe wird englisch als Ausgabesprache verwendet.   </td></tr></table><p>Für Cuneiform wird standardmäßig als Format <code class="notranslate">-f smarttext</code> verwendet, der Text wird damit entsprechend der Vorlage an Zeilenende umgebrochen. Es lässt sich hier auch die Option <code class="notranslate">text</code> verwenden, die bei deutlichem Abstand zwischen den Zeilen Absatzumbrüche erstellt und den Text ansonsten in einer Zeile durchschreibt.</p><p>Die Vorlage wird in XSane im <a class="internal" href="./xsane.html#Betrachter">Betrachter-Modus</a> erstellt. Als Auflösung werden 300 dpi empfohlen, die besten Ergebnisse erzielt man meist mit der Einstellung <em>"Strichzeichnung"</em> (für sehr kleine Schriften, bei Waschzettel etc. ggf. höhere Auflösungen verwenden). Im Betrachter die Texterkennung (<img alt="xsane/xsane-ocr.jpg" class="image-default" src="./_/4e3625efd312583aec31a27d72d118b883c2ed49.png"/>-Taste) wählen. Alternativ kann auch das Ausgabeformat <em>"TEXT"</em> gewählt werden, und als Modus <em>"Speichern"</em>, wenn keine weiteren Einstellungen nötig sind. Dann wird der Text direkt umgewandelt, ohne den Betrachter zu öffnen. Weitere Scans können bei Beibehaltung des Dateinamens direkt angehängt werden. Eine Angabe einer Endung ist nicht nötig, es ist auch möglich, später an eine bestehende Textdatei weitere Teile anzuhängen (dann darf keine Endung verwendet werden). Das Skript überprüft dabei, ob es sich um in UTF-8 oder ISO 8859-1 codierte Texte handelt und formt sie bei Bedarf um.</p><p>Die <strong>.txt</strong>-Datei wird dann im angegebenen Verzeichnis (Schreibrechte nötig!) als <strong>AUSGABENAME.txt</strong> abgelegt. Die Qualität der Texterkennung ist natürlich von der Qualität und Aufbau der Vorlage abhängig; je "verschachtelter" Text und Grafikelemente sind, desto schwieriger wird die exakte Zerlegung, und damit die Texterkennung. Daher sollte man ggf. einzelne Ausschnitte in der richtigen Reihenfolge scannen, und die Bilder dabei auslassen. Bei Verwendung von <code class="notranslate">deu-frak</code> als Tesseract-Sprache sortiert das Skript  <strong><code class="notranslate">I</code></strong> und <strong><code class="notranslate">J</code></strong>, die in Fraktur-Schriften oft mit demselben Zeichen dargestellt werden, danach, ob nach dem Zeichen ein Vokal (dann -&gt;<strong><code class="notranslate">J</code></strong>) oder ein Konsonant (dann -&gt;<strong><code class="notranslate">I</code></strong>) folgt.</p><p>Die yad-Fenster lassen sich über die Maus oder Tastatur (
<span class="key">→</span> , 
<span class="key">←</span> , 
<span class="key">⏎</span> ) bedienen.</p><p><img alt="Ausgabeart-yad.png" class="image-right" src="./_/1aec88c41011f9071dbd94b69a8297631a73e82b.png"/>
Nach jedem Scan wird abgefragt, ob Text aus weiteren Scans an die bestehende Textdatei angehängt werden soll. Dabei auf den gleichen Namen der Ausgabedatei achten, die Nummerierungsfunktion in XSane sollte daher nicht genutzt werden. Die Sprachausgabe erfolgt, wenn keine weiteren Scans mehr angehängt werden sollen; dazu erscheint eine Abfrage, ob der Text direkt ausgegebene oder als <strong>.mp3</strong>-Datei gespeichert werden soll. Für eSpeak können nach erfolgter Wiedergabe bzw. <em>"Beenden"</em> weitere Stimmen/Einstellungen eingesetzt werden. Wenn im Dialog  <em>"direkt ohne Wechsel"</em> ausgewählt wird, unterbleibt die Abfrage dazu.</p><p>Wird die <strong>.mp3</strong>-Erstellung gewählt, kann im sich darauf öffnenden Fenster der Speicherort und der Dateiname ausgewählt werden, standardmäßig ist <strong>~/Dokumente/Vorlesen</strong> vorgesehen (den Ordner ggf. anlegen!). Als Grundlage ist der Name der Text-Datei eingestellt, an den dann automatisch  ein <strong>.mp3</strong>-Endung angehängt wird. Der vorgegebene Speicherort kann im Skript unter der Variabel <code class="notranslate">$USER</code> verändert werden, der dort gewählte Ordner muss allerdings existent sein.</p><p><img alt="./Wiedergabe-yad.png" class="image-right" src="./_/0152ab88a8a2f9222cf9936462cddfb2155484fa.png"/>
Wenn die direkte Wiedergabe gewählt wurde, öffnet sich ein yad-Fenster mit den Steuereinstellungen <em>"Pause/Play"</em>, <em>"Beenden"</em> und <em>"Abbruch"</em>. <em>"Beenden"</em> führt dazu, dass die Sprachausgabe abgebrochen, und weiter im Skript-Ablauf vorgegangen wird. <em>"Abbruch"</em> kann dazu verwendet werden, die Wiedergabe abzubrechen, und den dazugehörigen Text direkt zu löschen, man kehrt dann auf die XSane-Ebene zurück. Das Fenster schließt sich, wenn keine Eingabe gemacht wird, mit Ende der Sprachausgabe automatisch. Nach dem "Vorlesen" hat man noch einmal die Möglichkeit, die Sprachausgabe als <strong>.mp3</strong>-Datei abzuspeichern, falls man auch weiterhin auf die Inhalte zurückgreifen möchte; das Verfahren ist identisch mit dem zur Abspeicherung beschriebenen.</p><p>Nach Abschluss wird abgefragt, ob die zugehörige Textdatei erhalten oder gelöscht werden soll; im yad-Fenster die entsprechende Angabe machen.</p><p>Einige der Fenster schließen sich nach einer gewissen Zeit automatisch, wenn keine Angabe erfolgt; der Wert wird im Skript in den yad-Angaben über die Option <code class="notranslate">--timeout=x</code> in Sekunden  geregelt und kann den eigenen Wünschen entsprechend angepasst, oder auch ganz gelöscht werden.</p></div></div><div class="section_1"><h2 id="Integration-der-Rechtschreibpruefung">Integration der Rechtschreibprüfung<a class="headerlink" href="#Integration-der-Rechtschreibpruefung">¶</a></h2><p>
Der Text lässt sich vor der Ausgabe/Speicherung mit einer Rechtschreibprüfung korrigieren. Die Funktion ist im Code des Hauptskriptes (Zeilen 251-257) enthalten, wenn nicht benötigt, können die Zeilen auskommentiert (<code class="notranslate">#</code> am Zeilenanfang) werden.</p><pre class="notranslate">   SPELLCHECK=$(DISPLAY=:0.0 yad --geometry -0-0 --timeout=10 --title="Rechtschreibung" --button=Ja:2 --button=Nein:4 --text="Rechtschreibprüfung?")
   ret=$?
   { if [[ $ret -eq 2 ]]; then
      gedit "$FILE_OUT-read.txt"
#      gnome-terminal -x hunspell -d de_old "$FILE_OUT-read.txt" #f or old german spelling
#      gnome-terminal -x aspell -c "$FILE_OUT-read.txt"
      echo "MAIN: gedit used for spellchecking" 1&gt;&amp;2 
   fi }</pre><p>In diesem Beispiel ist entweder die Möglichkeit vorgesehen, <a class="internal" href="./gedit.html">gedit</a> direkt mit der Texttdatei aufzurufen, und dort die Rechtschreibkorrektur einzusetzen (gedit verwendet <a class="internal" href="./gnu_aspell.html">Aspell</a>; es ist natürlich auch jeder andere Texteditor möglich), oder (hier auskommentiert) <a class="internal" href="./hunspell.html">Hunspell</a> oder <a class="internal" href="./aspell.html">Aspell</a> in einem externen Terminal-Fenster zu verwenden. Die Verwendung eines Editor hat den Vorteil, dass auch zwar prinzipiell richtig geschriebene, in dem Zusammenhang aber falsch erkannte Wörter gefunden und korrigiert werden können. Die Ausgabe sollte natürlich erst danach erfolgen, es ist aber auch möglich, den Text während des Abhörens noch zu korrigieren, um ihn dann für die <strong>mp3</strong>-Erstellung "korrekt" verwenden zu können. Standardmäßig wird die systemweit gesetzte Spracheinstellung verwendet, für andere Sprachen müssten die entsprechenden Optionen verwendet werden.</p><div class="section_2"><h3 id="Spracheinstellung-fuer-die-Festival-Wiedergabe">Spracheinstellung für die Festival-Wiedergabe<a class="headerlink" href="#Spracheinstellung-fuer-die-Festival-Wiedergabe">¶</a></h3><p>
Um Texte mit Umlauten/ß direkt mit der deutschen Festival-Version wiedergeben zu können, ohne das gesamte System umstellen zu müssen, wird im Standard-Skript mit eine Zeichensatzkonvertierung in ISO-8859-15 mit iconv vorgenommen. Allerdings kann es dabei zu Fehlern kommen, wenn im Text Zeichen vorhanden sind, die nicht im ISO-Format vorhanden sind. Die Wiedergabe wird in einem solchen Fall direkt an der Stelle mit dem Fehlzeichen abgebrochen, da der nachfolgende Text nicht mehr konvertiert wird. Viele Fehlerquellen werden vom Skript bereits abgefangen, falls weitere auftreten, kann man die sed-Befehle nach diesem Muster erweitern:</p><pre class="notranslate">       sed -i -r -e 's/PROBLEMATISCHES ZEICHEN/ERSATZ DAFÜR/g; "$TXT_FILE" #remove incompatible utf-8 signs</pre></div></div><div class="section_1"><h2 id="Probleme">Probleme<a class="headerlink" href="#Probleme">¶</a></h2><p>
Falls Probleme auftauchen, liefert das angelegte Protokoll <strong>xsane2speech.log</strong> ggf. Hinweise zur Lösung. Je nach Rechnerleistung ist es eventuell nötig, die <code class="notranslate">sleep</code>-Werte im <strong>select.sh</strong> anzupassen, wenn z.B. die Wiedergabe trotz <em>"Beenden/Abbruch"</em> nicht aufhört.</p><p>Unter <a class="internal" href="./xenial.html">Ubuntu 16.04</a> erscheint im Log für jeden Yad-Aufruf der Eintrag
</p><pre class="notranslate">Gtk-Message: GtkDialog mapped without a transient parent. This is discouraged.</pre><p>
Der Eintrag an sich ist harmlos, stört allerdings die Übersicht erheblich. Man wird ihn los, indem man im Skript jeden Yad-Aufruf mit einem ans jeweilige Zeilenende gesetztem
</p><pre class="notranslate">2&gt; dev/null</pre><p>
also z.B.
</p><pre class="notranslate">   TEXTREG=$(DISPLAY=:0.0 yad --geometry -0-0 --text="Die Text-Erkennung \nist abgeschlossen!" 2&gt; dev/null)</pre><p>
die Meldung ins Nirvana schickt.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Bitte im <a class="crosslink topic" href="https://forum.ubuntuusers.de/topic/Ubuntu-liest-vor/">Ubuntu liest vor!</a> (Projekt-Thread) nachfragen, wenn es zu merkwürdigen Verhalten oder unlösbaren Dingen kommt, oder auch, wenn es Wünsche, Verbesserungsvorschläge etc. gibt!
</p></div></div><p>Die Meldung</p><pre class="notranslate">bt_audio_service_open: connect() failed: Connection refused (111)</pre><p>ist vernachlässigbar, sie bezieht sich auf eine Bluetooth-Verbindung, die nichts mit dem Programm zu tun hat. Ggf. kann man das Paket <strong>bluez-alsa</strong> entfernen, wenn man es nicht benötigt.</p><div class="section_2"><h3 id="Festival-mit-deutschsprachiger-Ausgabe">Festival mit deutschsprachiger Ausgabe<a class="headerlink" href="#Festival-mit-deutschsprachiger-Ausgabe">¶</a></h3><p>
Die Meldung</p><pre class="notranslate">/PFAD/ZU/xsane2speech.sh: Zeile xxx: German: Kommando nicht gefunden.</pre><p>ist vernachlässigbar, sie wird ggf. von <code class="notranslate">text2wave</code> ausgelöst, hat aber keinen Einfluss auf die Funktion. Auch die Meldung</p><pre class="notranslate">Audio spooler has died unexpectedly
closing a file left open: /PFAD/ZUR/AUSGABEDATEI.txt</pre><p>ist harmlos, sie tritt immer auf, wenn man die unter Festival integrierte Sprachausgabe abbricht.</p></div><div class="section_2"><h3 id="Mbrola">Mbrola<a class="headerlink" href="#Mbrola">¶</a></h3><p>
Einige der deutschen Mbrola-Stimmen (<strong>de4</strong>, auch unter eSpeak einsetzbar, und ganz besonders <strong>de8</strong>, was eigentlich keine "deutsche", sondern eine bayrische Dialekt-Stimme ist) können mit bestimmten <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Diphon">Diphonen</a> nicht umgehen; im Log erscheinen Angaben wie</p><pre class="notranslate">Warning: g-ts unkown, replaced with _-_
Warning: 6-6 unkown, replaced with _-_
Warning: 6-@ unkown, replaced with _-_</pre><p>und die fehlenden Laute werden weggelassen, was sehr störend sein kann. Unter Festival kann das etwas gelindert werden, siehe <a class="internal" href="./festival/kompilieren.html#Tipps-und-Tricks">Festival - Tipps und Tricks</a>.</p></div></div><div class="section_1"><h2 id="Alternativen">Alternativen<a class="headerlink" href="#Alternativen">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="./sprachausgabe.html">Sprachausgabe</a> <img alt="{Übersicht}" src="./_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsseite</p></li><li><p><a class="internal" href="./skripte/book-to-mp3.html">Skripte/Book-To-MP3</a> - "Paten"-Skript, das verschiedene Dateiformate in <strong>.mp3</strong>-Dateien umwandeln kann</p></li><li><p><a class="internal" href="./skripte/pdf2mp3.html">Skripte/pdf2mp3</a> - vegleichbares <a class="internal" href="./python.html">Python</a>-Skript, für <a class="internal" href="./pdf.html">PDF</a>- und ascii-Daten zur Umwandlung in Audiodateien (<strong>.wav</strong> oder <strong>.mp3</strong>)</p></li><li><p><a class="internal" href="./kmouth.html">KMouth</a> - kann ebenfalls Texte vorlesen  und aufnehmen</p></li></ul><p>
</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="crosslink topic" href="https://forum.ubuntuusers.de/topic/Ubuntu-liest-vor/">Ubuntu liest vor!</a> - Ursprungsthread im Forum</p></li><li><p><a class="crosslink topic" href="https://forum.ubuntuusers.de/topic/string-zerlegen-bzw-leerzeichen-zwischen-zeich/">Thread zum sed-Befehl</a></p></li><li><p><a class="internal" href="./espeak.html">eSpeak</a> - verwendeter Standard-Synthesizer mit umfangreicher Sprachunterstützung</p></li><li><p><a class="internal" href="./festival.html">Festival</a> - alternativer Synthesizer, mit Stimmen, die auf natürlichen Sprechern beruhen</p><ul><li><p><a class="internal" href="./festival/kompilieren.html">Festival/Kompilieren</a> - für deutschsprachige Festival-Unterstützung notwendig</p></li></ul></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./xsane2speech/a/revision/941162.html">Diese Revision</a> wurde am 14. Mai 2017 12:18 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./xsane2speech.html">xsane2speech</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>