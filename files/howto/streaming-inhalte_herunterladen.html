<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Howto/Streaming-Inhalte_herunterladen › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../howto/streaming-inhalte_herunterladen.html">Streaming-Inhalte herunterladen</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Howto/Streaming-Inhalte_herunterladen">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../howto/streaming-inhalte_herunterladen/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../howto/streaming-inhalte_herunterladen/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../howto/streaming-inhalte_herunterladen/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../howto/streaming-inhalte_herunterladen/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../howto/streaming-inhalte_herunterladen/a/backlinks.html">Streaming-Inhalte herunterladen</a></h1>
<div id="page"><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Die Verwendung dieses Howto geschieht auf eigene Gefahr. Bei Problemen mit der Anleitung melde dies bitte in der dazugehörigen Diskussion und wende dich zusätzlich an den Verfasser des Howtos.
</p></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Diese Howto-Anleitung wurde zuletzt von <a class="crosslink user" href="https://ubuntuusers.de/user/linux_joy/">linux_joy</a> am 31.05.2017 unter <strong>Ubuntu 14.04</strong> erfolgreich getestet.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../paketquellen_freischalten.html">Bearbeiten von Paketquellen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Programme-installieren">Programme installieren
</a></li><li><a class="crosslink" href="#Live-Streams-sowie-Video-oder-Audio-Streams-aufnehmen">Live-Streams sowie Video- oder Audio-Strea...</a><ol class="arabic"><li><a class="crosslink" href="#HLS-HTTP-Live-Stream-aufnehmen">HLS (HTTP Live Stream) aufnehmen
</a></li><li><a class="crosslink" href="#HDS-HTTP-Dynamic-Stream-aufnehmen">HDS (HTTP Dynamic Stream) aufnehmen
</a></li><li><a class="crosslink" href="#RTMP-Streams-aufnehmen">RTMP-Streams aufnehmen
</a></li><li><a class="crosslink" href="#MMS-Streams-aufnehmen">MMS-Streams aufnehmen
</a></li><li><a class="crosslink" href="#RTSP-Streams-aufnehmen">RTSP-Streams aufnehmen
</a><ol class="arabic"><li><a class="crosslink" href="#FFmpeg">FFmpeg
</a></li><li><a class="crosslink" href="#MPlayer">MPlayer
</a></li></ol></li></ol></li><li><a class="crosslink" href="#Stream-Download-und-ggf-Umwandlung-mit-VLC">Stream-Download und ggf. Umwandlung mit VL...</a><ol class="arabic"><li><a class="crosslink" href="#GUI">GUI
</a><ol class="arabic"><li><a class="crosslink" href="#Live-Streams">Live-Streams
</a></li><li><a class="crosslink" href="#On-Demand-Streams">On-Demand-Streams
</a></li></ol></li><li><a class="crosslink" href="#Terminal">Terminal
</a></li></ol></li><li><a class="crosslink" href="#Informationen-zu-den-heruntergeladenen-Streaming-Dateien-anzeigen">Informationen zu den heruntergeladenen Str...</a></li><li><a class="crosslink" href="#Programmkennung-aendern">Programmkennung ändern
</a></li><li><a class="crosslink" href="#Links">Links
</a><ol class="arabic"><li><a class="crosslink" href="#Intern">Intern
</a></li><li><a class="crosslink" href="#Extern">Extern
</a></li></ol></li></ol></div><p>Hat man die Adresse herausgefunden – etwa durch den Artikel <a class="internal" href="../howto/stream-adressen_ermitteln.html">Howto/Stream-Adressen ermitteln</a> – dann sollte das Herunterladen funktionieren. Bei normalen HTTP-Adressen kann man eine Datei mit einem <a class="internal" href="../download-manager.html">Download-Manager</a> ebenso herunterladen wie mittels <a class="crosslink" href="#Stream-Download-und-ggf-Umwandlung-mit-VLC">VLC</a>. Man kann auch eine "Download-Erweiterung" für den Browser nutzen (z.B. <a class="external" href="https://addons.mozilla.org/de/firefox/addon/video-downloadhelper/" rel="nofollow">Video DownloadHelper</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> <img alt="{de}" src="../_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> für Firefox oder <a class="external" href="https://addons.opera.com/de/extensions/details/fvd-video-downloader/?display=de" rel="nofollow">FVD</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> für <a class="internal" href="../opera.html">Opera</a>).</p><p>Anders läuft es jedoch beim <a class="internal" href="../howto/stream-adressen_ermitteln.html#HTTP-Streaming">HTTP-Streaming</a>.</p><p>Dateien mit einer Streaming-URL mit entweder dem Anfang <code class="notranslate">mms://</code> oder <code class="notranslate">rtsp://</code> lassen sich in vielen Fällen mit dem <a class="internal" href="../mplayer.html">MPlayer</a> herunterladen. Das gleiche gilt auch für URLs mit der Endung <strong>.asx</strong>.</p><p>Bei Dateien aus einer Streaming-URL mit dem Anfang <code class="notranslate">rtmp://</code> kommen die beiden Programmen flvstreamer und rtmpdump in Betracht. Sie haben nahezu die identische Befehls-Syntax, ersteres ist aber weniger leistungsfähig. Diese können über die offiziellen Paketquellen installiert werden, was im nachfolgenden Abschnitt beschrieben wird.</p><p>Allgemein gilt: Falls der Stream nicht nur bloß heruntergeladen und in eine Datei kopiert, sondern auch noch zusätzlich transkodiert wird, so dauert der Vorgang mitunter um einiges länger.</p><div class="section_1"><h2 id="Programme-installieren">Programme installieren<a class="headerlink" href="#Programme-installieren">¶</a></h2><p>
Für <a class="external" href="http://savannah.nongnu.org/projects/flvstreamer" rel="nofollow">flvstreamer</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> muss das folgende Paket installiert werden:<sup><a href="#source-1">[1]</a></sup></p><ul><li><p><strong>flvstreamer</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install flvstreamer </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install flvstreamer </pre></div></div><p>
</p></div></div><p>Für <a class="external" href="http://rtmpdump.mplayerhq.hu/" rel="nofollow">rtmpdump</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> muss das folgende Paket installiert werden:<sup><a href="#source-1">[1]</a></sup></p><ul><li><p><strong>rtmpdump</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install rtmpdump </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install rtmpdump </pre></div></div><p>
</p></div></div><p>In diesem Paket befindet sich auch das Programm rtmpgw, welches ein HTTP-RTMP Stream Gateway ist. Näheres im Artikel <a class="internal" href="../internet-tv/stationen.html">Internet-TV/Stationen</a>.</p><p>Für die Benutzung von rtmpdump siehe den <a class="interwiki interwiki-wikipedia_en" href="https://en.wikipedia.org/wiki/RTMPDump">Wikipedia-Artikel</a>.</p><p>Alle Optionen findet man in den <a class="internal" href="../man.html">Manpages</a> von flvstreamer bzw. rtmpdump.</p></div><div class="section_1"><h2 id="Live-Streams-sowie-Video-oder-Audio-Streams-aufnehmen">Live-Streams sowie Video- oder Audio-Streams aufnehmen<a class="headerlink" href="#Live-Streams-sowie-Video-oder-Audio-Streams-aufnehmen">¶</a></h2><p>
</p><div class="section_2"><h3 id="HLS-HTTP-Live-Stream-aufnehmen">HLS (HTTP Live Stream) aufnehmen<a class="headerlink" href="#HLS-HTTP-Live-Stream-aufnehmen">¶</a></h3><p>
Ein <a class="internal" href="../howto/stream-adressen_ermitteln.html#HTTP-Streaming">HLS</a> kann mit <code class="notranslate">ffmpeg</code> (aus dem <a class="internal" href="../ffmpeg.html">FFmpeg</a>-Projekt) bzw. <a class="internal" href="../avconv.html">avconv</a> (aus dem <a class="internal" href="../libav.html">Libav</a>-Projekt) aufgenommen werden. Dabei werden Video-, Audio- und Untertitelstreams in eine Containerdatei kopiert (also ohne sie zu re-encodieren). Der Befehl<sup><a href="#source-3">[3]</a></sup> dafür lautet allgemein:</p><div class="bash"><div class="contents"><pre class="notranslate">ffmpeg -i http://Adresse.m3u8 -c copy /Pfad/zur/Zieldatei.mkv </pre></div></div><p>
Man kann die Aufnahme mit der Tastenkombination 
<span class="key">Strg</span>  + 
<span class="key">C</span>  stoppen. Bei On-Demand-Streams geschieht dies am Ende automatisch.</p><p>Alternativ kann man auch die URL in Anführungszeichen setzen, und/oder die CODEC-Angabe sowie ggf. auch das Ausgabeformat modifizieren:</p><div class="bash"><div class="contents"><pre class="notranslate">ffmpeg -i "http://Adresse.m3u8" -codec: copy /Pfad/zur/Zieldatei.mp4 </pre></div></div><p>
In beiden vorherigen Beispielen werden dabei Streams mit nicht-unterstützten Codecs von ffmpeg einfach kommentarlos links liegen gelassen. Außerdem wählt ffmpeg die seiner Ansicht nach besten Streams aus der m3u8-Wiedergabeliste aus (siehe dazu auch <a class="external" href="https://ffmpeg.org/ffmpeg.html#Stream-selection" rel="nofollow">Stream selection</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> in der FFmpeg-Dokumentation). Diese müssen aber nicht zwangsläufig auch die tatsächlich hochwertigsten sein!</p><p>Im folgenden Beispiel werden deshalb alle vorhandenen Streams mit von FFmpeg unterstützten Codecs im Programm mit der anzugebenen Programm-Nummer (welche man vllt. über den Abschnitt <a class="internal" href="../howto/stream-adressen_ermitteln.html#Informationen-zu-den-ermittelten-Stream-Adressen-anzeigen">Informationen zu den ermittelten Stream-Adressen anzeigen</a> bekommen hat) in die Zieldatei kopiert. Außerdem wird lediglich ein Teil des gesamten Streams kopiert, und die üblichen Informationen über FFmpeg selbst werden unterdrückt:
</p><div class="bash"><div class="contents"><pre class="notranslate">ffmpeg -hide_banner -re -ss 01:05:02 -t 230 -i http://Adresse.m3u8 -map p:5 -codec: copy /Pfad/zur/Zieldatei.mp4 </pre></div></div><p>
</p><ul><li><p>Mit der Option <code class="notranslate">-hide_banner</code> wird verhindert, dass FFmpeg seine ansonsten obligatorischen Eigen-Informationen wie z.B. Versions-Nummern und Built-Optionen ausgibt.</p></li><li><p>Die optionale Option <code class="notranslate">-re</code> bewirkt, dass die Streams mit ihrer tatsächlichen Frame-Rate (fps (frames per second)), also in Echtzeit anstatt sonst so schnell wie möglich, gestreamt werden. Dies kann notwendig werden, falls der Stream ohne diese Option nach kurzer Zeit hängen bleibt und die Aktion dann deshalb manuell mittels der Tastenkombination 
<span class="key">Strg</span>  + 
<span class="key">C</span>  abgebrochen werden muss!</p></li><li><p><code class="notranslate">-ss 01:05:02 -t 230</code>: Zuerst die Startposition in Stunden, Minuten u. Sekunden; danach die Dauer in Sekunden. Letztere kannalternativ auch als <code class="notranslate">-t 00:03:50</code> angegeben werden. Je nach Einsatzzweck kann man Startposition oder Dauer auch weglassen. Näheres über die <a class="external" href="http://www.ffmpeg.org/ffmpeg-utils.html#time-duration-syntax" rel="nofollow">Zeit-Syntax</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> steht in der FFmpeg-Dokumentation. </p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Leider erscheint bei neueren ffmpeg-Versionen die Meldung:
</p><pre class="notranslate">Timestamps are unset in a packet for stream 1. This is deprecated and will stop working in the future. Fix your code to set the timestamps properly</pre><p> 
Dies scheint jedoch nicht weiter von Bedeutung zu sein.
</p></div></div></li><li><p><code class="notranslate">-map p:5</code>: Die Programm-Nummer hat man vllt. durch ffprobe / avprobe über die Ausgabe von "Metadata: variant_bitrate" herausbekommen. Erstere kann auch mehrstellig sein. Bei letzterer Angabe gilt: Je höher, desto besser!</p></li><li><p><code class="notranslate">-codec: copy</code> gibt an, dass alle angegebenen Streams lediglich kopiert werden und nicht re-encodiert.</p></li></ul><p>
Das folgende Beispiel ist aus verschiedenen Gründen exakt so angelegt:
</p><div class="bash"><div class="contents"><pre class="notranslate">ffmpeg -headers $'User-Agent: "FMLE/3.0 (compatible; FMSc/1.0)"\r\n' -i http://Adresse.m3u8 -map 0:p:4 -map -0:14 -codec: copy -b:v 50k -b:a 50k -bsf:a aac_adtstoasc /Pfad/zur/Zieldatei.mp4 </pre></div></div><p>
</p><ul><li><p>Mit der Option <code class="notranslate">-headers</code> wird in diesem Fall der sogenannte "User Agent" geändert (Siehe auch den Abschnitt <a class="crosslink" href="#Programmkennung-aendern:">Programmkennung ändern</a>).</p></li><li><p><code class="notranslate">-map 0:p:4 -map -0:14</code> bedeutet, dass alle Spuren des Programmes Nr. 4 der ersten Eingangsdatei außer der darin enthaltenen Datenspur mit dem Stream-Index 14 verwendet werden sollen. Letzterer wird ausgespart, weil <a class="internal" href="../howto/stream-adressen_ermitteln.html#Informationen-zu-den-ermittelten-Stream-Adressen-anzeigen">ffprobe</a> zuvor die Meldung <code class="notranslate">Unsupported codec with id 1414087731 for input stream 14</code> ausgegeben hat. Allerdings werden dabei normalerweise Streams mit nicht-unterstützten Codecs von ffmpeg sowieso automatisch ausgespart!</p></li><li><p><code class="notranslate">-b:v 50k -b:a 50k</code> bedeutet, dass die Bitrate für sämtliche Video- und Audiokanäle der Zieldatei auf 50k gesetzt wird. In diesem Fall bedeutet das jedoch keine Einschränkung: Im Gegenteil, die Bitrate ging auf 1951.3 kbits/s hoch (Angabe in der Statuszeile). In vorhergehenden Versuchen ohne diese Optionen lag sie nur bei knapp der Hälfte, und der Stream hang  nach kurzer Zeit, so dass die Aktion dann manuell mittels der Tastenkombination 
<span class="key">Strg</span>  + 
<span class="key">C</span>  abgebrochen werden musste. Offenbar kann der ausliefernde Streaming-Server ohne diese Optionen die Bitrate nicht vernünftig regeln! Wichtig ist in diesem Zusammenhang auch die fps-Angabe (frames per second): Je höher, desto besser! Allerdings muss das Setzen dieser Optionen auf solch niedrige Werte die Bitrate bzw. die fps-Rate auch nicht zwangsläufig in die Höhe treiben, das liegt immer am jeweiligen Server!</p></li><li><p><code class="notranslate">-bsf:a aac_adtstoasc</code> setzt für alle Audiokanäle den Bitstrom-Filter <code class="notranslate">aac_adtstoasc</code>. In vorhergehenden Versuchen ohne diese Option hatte es nämlich die Fehlermeldung <code class="notranslate">Malformed AAC bitstream detected: use the audio bitstream filter 'aac_adtstoasc' to fix it ('-bsf:a aac_adtstoasc' option with ffmpeg) – av_interleaved_write_frame(): Operation not permitted</code> gegeben.</p></li></ul><p>
</p></div><div class="section_2"><h3 id="HDS-HTTP-Dynamic-Stream-aufnehmen">HDS (HTTP Dynamic Stream) aufnehmen<a class="headerlink" href="#HDS-HTTP-Dynamic-Stream-aufnehmen">¶</a></h3><p>
Mithilfe des in <a class="internal" href="../php.html">PHP</a> geschriebenen Skriptes <a class="interwiki interwiki-github" href="https://github.com/K-S-V/Scripts/blob/master/AdobeHDS.php">AdobeHDS.php</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> von <a class="interwiki interwiki-github" href="https://github.com/K-S-V/Scripts">K-S-V's GitHub-Seite</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> können Multimedia-<a class="internal" href="../streaming.html">Streams</a> im Format <a class="internal" href="../howto/stream-adressen_ermitteln.html#HTTP-Streaming">HDS</a> (Adobe HTTP Dynamic Streaming) entweder aufgenommen oder – via <a class="internal" href="../shell/umleitungen.html#Der-Pipe-Operator">Pipe-Operator</a> – an einen Mediaplayer weitergeleitet werden.</p><p>Dabei werden zunächst die einzelnen Fragment-Dateien heruntergeladen, in eine <strong>flv</strong>-Containerdatei kopiert (also ohne sie zu re-encodieren) und dabei nahtlos zusammengefügt. Anschließend werden die heruntergeladenen Fragmente gelöscht.</p><p>Von dem Skript werden sowohl On-Demand-Streams als auch Live-Streams <a class="internal" href="../streaming.html#Streaming-Arten">verarbeitet</a>.</p><p>Die Benutzung des Skriptes erfolgt über die Kommandozeile. Die Einzelheiten werden im Artikel <a class="internal" href="../ksv_adobe_hds_downloader.html">KSV Adobe HDS Downloader</a> erklärt.</p></div><div class="section_2"><h3 id="RTMP-Streams-aufnehmen">RTMP-Streams aufnehmen<a class="headerlink" href="#RTMP-Streams-aufnehmen">¶</a></h3><p>
Zum Speichern von <code class="notranslate">rtmp://</code>-Streams siehe auch z.B. den externen Abschnitt <a class="internal" href="../archiv/streams_speichern/beispiele.html#Streaming-Videos-des-BR">Streaming-Videos des BR</a>.</p></div><div class="section_2"><h3 id="MMS-Streams-aufnehmen">MMS-Streams aufnehmen<a class="headerlink" href="#MMS-Streams-aufnehmen">¶</a></h3><p>
<code class="notranslate">mms://</code>-Streams lassen sich sehr einfach mit MPlayer über ein Terminal<sup><a href="#source-3">[3]</a></sup> aufnehmen.</p><ul><li><p>bei direkten <code class="notranslate">mms://</code>-Dateien:</p></li></ul><div class="bash"><div class="contents"><pre class="notranslate">mplayer -dumpstream mms://example.com/Globalplayers/GP_14.wmv -dumpfile ./download/test.wmv </pre></div></div><p>Die Adresse des Streams <code class="notranslate">mms://example.com/Globalplayers/GP_14.wmv</code> ist frei erfunden und nur ein Beispiel. Diese <strong>.wmv</strong>-Datei würde nun als <strong>test.wmv</strong> im Verzeichnis <strong>/download</strong> innerhalb des Home-Verzeichnisses des aktuell angemeldeten Benutzers gespeichert.</p><ul><li><p>Bei indirekten <code class="notranslate">mms://</code>-Dateien (URLs mit der Endung <strong>.asx</strong>) lautet dagegen die Befehlszeile:</p></li></ul><div class="bash"><div class="contents"><pre class="notranslate">mplayer -playlist Streaming-Adresse.asx -dumpstream -dumpfile Dateipfad.wmv </pre></div></div><p>
Man kann die Aufnahme mit der Tastenkombination 
<span class="key">Strg</span>  + 
<span class="key">C</span>  stoppen. Bei On-Demand-Streams geschieht dies am Ende automatisch.</p><p>Manchmal erhält man während der Speicherung die Meldung:</p><pre class="notranslate">Stream not seekable!</pre><p>Dies bedeutet jedoch nicht, dass das Herunterladen nicht funktioniert. Je nach Größe der Datei dauert es eine Weile bis sich wieder etwas tut. Ist das gesamte Video gespeichert, dann erhält man die Meldung:</p><pre class="notranslate">Everything done. Thank you for downloading a media file containing proprietary and patented technology.
Core dumped ;)

Exiting... (End of file)</pre><p>Zum Speichern von <code class="notranslate">mms://</code>-Streams können auch die Kommandozeilen-Programme <a class="internal" href="../mimms.html">mimms</a> und <a class="internal" href="../mmsrip.html">mmsrip</a> genutzt werden.</p></div><div class="section_2"><h3 id="RTSP-Streams-aufnehmen">RTSP-Streams aufnehmen<a class="headerlink" href="#RTSP-Streams-aufnehmen">¶</a></h3><p>
</p><div class="section_3"><h4 id="FFmpeg">FFmpeg<a class="headerlink" href="#FFmpeg">¶</a></h4><p>
<code class="notranslate">rtsp://</code>-Streams lassen sich sehr einfach mit FFmpeg bzw. avconv (aus dem Libav-Projekt) über ein Terminal<sup><a href="#source-3">[3]</a></sup> aufnehmen. Dabei werden Audio- und Videostreams in eine Containerdatei kopiert (also ohne sie zu re-encodieren). Der Befehl<sup><a href="#source-3">[3]</a></sup> dafür lautet allgemein:</p><div class="bash"><div class="contents"><pre class="notranslate">ffmpeg -i rtsp://Adresse -acodec copy -vcodec copy /Pfad/zur/Zieldatei.mp4 </pre></div></div><p>
Man kann die Aufnahme mit der Tastenkombination 
<span class="key">Strg</span>  + 
<span class="key">C</span>  stoppen. Bei On-Demand-Streams geschieht dies am Ende automatisch.</p><p>Siehe auch den Abschnitt <a class="crosslink" href="#HLS-HTTP-Live-Stream-aufnehmen">HLS (HTTP Live Stream) aufnehmen</a> sowie den hierfür als Quelle verwendeten Link <a class="interwiki interwiki-stackoverflow" href="https://stackoverflow.com/questions/16259588/how-to-dump-raw-rtsp-stream-to-file">How to dump raw RTSP stream to file?</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p></div><div class="section_3"><h4 id="MPlayer">MPlayer<a class="headerlink" href="#MPlayer">¶</a></h4><p>
<code class="notranslate">rtsp://</code>-Streams lassen sich ebenfalls sehr einfach mit MPlayer über ein Terminal<sup><a href="#source-3">[3]</a></sup> aufnehmen. Das Verfahren funktioniert im Prinzip genauso wie bei <a class="crosslink" href="#MMS-Streams-aufnehmen">MMS-Streams aufnehmen</a>, jedoch muss man allgemein natürlich <code class="notranslate">mms://</code> durch <code class="notranslate">rtsp://</code> ersetzen und:</p><ul><li><p>bei direkten <code class="notranslate">rtsp://</code>-Streams <strong>.wmv</strong> durch <strong>.rm</strong> bzw. <strong>.mp4</strong>, sowie</p></li><li><p>bei indirekten <code class="notranslate">rtsp://</code>-Streams <strong>.asx</strong> durch <strong>.mov</strong></p></li></ul><p>
Man kann die Aufnahme mit der Tastenkombination 
<span class="key">Strg</span>  + 
<span class="key">C</span>  stoppen. Bei On-Demand-Streams geschieht dies am Ende automatisch.</p></div></div></div><div class="section_1"><h2 id="Stream-Download-und-ggf-Umwandlung-mit-VLC">Stream-Download und ggf. Umwandlung mit VLC<a class="headerlink" href="#Stream-Download-und-ggf-Umwandlung-mit-VLC">¶</a></h2><p>
Mit <a class="internal" href="../vlc.html">VLC</a> kann man einen Stream speichern und ggf. gleichzeitig in ein anderes Video- bzw. Audioformat umwandeln.</p><div class="section_2"><h3 id="GUI">GUI<a class="headerlink" href="#GUI">¶</a></h3><p>
</p><div class="section_3"><h4 id="Live-Streams">Live-Streams<a class="headerlink" href="#Live-Streams">¶</a></h4><p>
VLC bietet die Möglichkeit, <a class="internal" href="../internetradio/stationen.html">Radio-</a> und <a class="internal" href="../internet-tv/stationen.html">Fernsehstreams</a> abzuspielen. Dazu die Internet-Adresse des Radiostreams in die Zwischenablage kopieren und in <em>"Medien → Netzwerkstream öffnen → Netzwerk"</em> (
<span class="key">Strg</span>  + 
<span class="key">N</span> ) im Feld <em>"Adresse"</em> einfügen. Anschließend muss man die <em>"Wiedergabe-Taste"</em> drücken, die sich unten befindet. Alternativ kann die Funktion <em>"URL aus Zwischenablage öffnen"</em> (
<span class="key">Strg</span>  + 
<span class="key">V</span> ) verwendet werden.</p><div class="section_4"><h5 id="Stream-Aufnahmen-und-Time-Shift">Stream-Aufnahmen und "Time-Shift"<a class="headerlink" href="#Stream-Aufnahmen-und-Time-Shift">¶</a></h5><p>
Auch das Aufnehmen von Streams und "Time-Shift" sind  problemlos möglich. Dazu im Hauptfenster im Reiter <em>"Ansicht → Erweiterte Steuerung"</em> aktivieren. Es erscheinen weitere Bedienelemente, u.a. ein roter Aufnahme-Knopf. Aufnahmen werden mit dem Präfix <strong>vlc-record-</strong> sowie unter Angabe der Zeit und der Stream-Adresse im <a class="internal" href="../homeverzeichnis.html">Homeverzeichnis</a> (<strong>~/Downloads/</strong>) des Benutzers in streamart-spezifischen Datei-Typen (z.B. <strong>.mp4</strong> oder <strong>.ts</strong>) abgelegt. Ein benutzerdefinierter Ort lässt sich über <em>"Werkzeuge → Einstellungen → Input/Codecs"</em> unter <em>"Files → Aufnahme-Verzeichnis oder Dateiname"</em> festlegen. Manchmal ist Letzteres sogar ein Muss weil kein Aufnahme-Verzeichnis voreingestellt ist und somit auch nichts aufgenommen wird!</p><p>Wenn man bei laufender Sendung den Pause-Knopf betätigt, wird die Wiedergabe unterbrochen. Ein erneutes Drücken lässt den Stream an der angehaltenen Stelle weiterlaufen. Nach Beenden des Players werden auch die während des Pausierens angelegten temporären Dateien gelöscht. "Time-Shift" ist auch in Verbindung mit der Aufnahme-Funktion möglich.</p></div></div><div class="section_3"><h4 id="On-Demand-Streams">On-Demand-Streams<a class="headerlink" href="#On-Demand-Streams">¶</a></h4><p>
Über <em>"Medien -&gt; Konvertieren/Speichern"</em> kommt man zum Reiter <em>"Netzwerk"</em>, wo man die Stream-Adresse einträgt. Nach dem Klick auf <em>"Konvertieren / Speichern"</em> öffnet sich ein Fenster, in dem man zum einen den Speicherort bestimmen und zum anderen auswählen kann, ob man bloß den <em>"Raw-Input speichern"</em> oder zusätzlich auch noch <em>"Konvertieren"</em> möchte. Bei der letzteren Möglichkeit kann man das gewünschte Video- bzw. Audioformat bestimmen.</p></div></div><div class="section_2"><h3 id="Terminal">Terminal<a class="headerlink" href="#Terminal">¶</a></h3><p>
Streams lassen sich mit dem VLC-Player auch über ein Terminal<sup><a href="#source-3">[3]</a></sup> aufnehmen und ggf. gleichzeitig in ein anderes Video- bzw. Audioformat umwandeln. Es gibt verschiedene Syntax-Möglichkeiten:
</p><div class="bash"><div class="contents"><pre class="notranslate">vlc URL-DES-STREAMS --sout=Videos/Datei.mp4 </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">vlc -v URL-DES-STREAMS --sout=file/mp4:Videos/Datei.mp4 </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">vlc -v URL-DES-STREAMS --sout="#std{access=file,mux=mp4,dst=Videos/Datei.mp4}" </pre></div></div><p>
</p><ul><li><p><code class="notranslate">-v</code> sowie <code class="notranslate">-vv</code> und <code class="notranslate">-vvv</code> sind die Verbose-Level von VLC bzw. cvlc und erhöhen damit auf der Kommandozeile entsprechend die Anzahl der ausgegebenen Programmaktivitätsinformationen (optional).</p></li><li><p><code class="notranslate">sout=</code> lässt den Speicherort, den Namen und das Format der Aufnahme festlegen. Es werden hier Beispiele von verschieden ausführlichen Schreibweisen gezeigt.</p><ul><li><p><code class="notranslate">file/mp4</code> bedeutet, dass die Ausgabe im MPEG4-Format in eine Datei geschrieben wird.</p></li><li><p><code class="notranslate">Videos/Datei.mp4</code> bedeutet, dass es die Ausgabe-Datei <strong>Datei.mp4</strong> im Verzeichnis <strong>~/Videos</strong> im Home-Verzeichnis ist.</p></li></ul></li><li><p><code class="notranslate">vlc</code> lässt den VLC-Player ein Fenster öffnen und den Aufnahmefortschritt anzeigen. Möchte man hingegen kein VLC-Player-Fenster, so kann man <code class="notranslate">cvlc</code> anstelle <code class="notranslate">vlc</code> nehmen. <code class="notranslate">cvlc</code> lässt einen den Aufnahme-Fortschritt aber nur indirekt über einen Dateimanager beobachten!</p></li><li><p><code class="notranslate">vlc</code> / <code class="notranslate">cvlc</code> müssen mit der Tastenkombination 
<span class="key">Strg</span>  + 
<span class="key">C</span>  beendet werden. Die optionale <code class="notranslate">--play-and-exit</code>-Option sorgt dafür, dass VLC / cvlc nach der Aufnahme des Tracks automatisch beendet wird.</p></li></ul><p>
Bei den vorangegangenen Befehlen wurde der Stream immer auch transkodiert, selbst wenn er schon im gewünschten Format vorlag. Möchte man dies unterbinden, so bietet sich dazu der folgende Befehl an:
</p><div class="bash"><div class="contents"><pre class="notranslate">vlc -v URL-DES-STREAMS --sout="#file{dst=Videos/Datei.mp4} sout-keep" </pre></div></div><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>
</p><ul><li><p>Bei <code class="notranslate">vlc</code> sollte man tunlichst im VLC-Fenster die Steuerungs-Option <em>"Liste bzw. Einzelstück wiederholen"</em> deaktivieren weil ansonsten der Stream nach kurzer Pause erneut heruntergeladen wird, wobei die bereits vorhandene Datei ohne Rückfrage überschrieben wird! Daran ändert auch nichts die optionale <code class="notranslate">--play-and-exit</code>-Option. Abhilfe schafft aber zuverlässig das Options-Doppel <code class="notranslate">--no-repeat --no-loop</code>.</p></li><li><p>Um eventuell noch an zusätzliche Terminal-Optionen zu kommen – besonders wenn man auch transkodieren will – bietet sich die Hilfe der GUI an. <a class="external" href="http://superuser.com/questions/287222/how-to-create-a-file-that-tells-vlc-to-start-recording-a-stream" rel="nofollow">Hier bei superuser.com</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> existiert eine sehr gute Anleitung dafür.</p></li></ul></div></div></div></div><div class="section_1"><h2 id="Informationen-zu-den-heruntergeladenen-Streaming-Dateien-anzeigen">Informationen zu den heruntergeladenen Streaming-Dateien anzeigen<a class="headerlink" href="#Informationen-zu-den-heruntergeladenen-Streaming-Dateien-anzeigen">¶</a></h2><p>
Möchte man lediglich den Dateitypen von Streaming-Dateien anzeigen, so eignet sich dafür das Programm <strong>file</strong>. Um neben den traditionellen menschenlesbaren Zeichenketten auch noch den <a class="internal" href="../mime-typ.html">MIME-Typ</a> zu bekommen, muss man die beiden folgenden Kommandozeilen-Befehle separat verwenden:</p><div class="bash"><div class="contents"><pre class="notranslate">file -k /Pfad/zur/Zieldatei </pre></div></div><p>
wobei das <code class="notranslate">-k</code> für "keep-going" (weitersuchen nach dem ersten Treffer) steht, sowie</p><div class="bash"><div class="contents"><pre class="notranslate">file -k --mime /Pfad/zur/Zieldatei </pre></div></div><p>
wobei das <code class="notranslate">-k</code> für "keep-going" (weitersuchen nach dem ersten Treffer) und das <code class="notranslate">--mime</code> für "Ausgabe des <a class="internal" href="../mime-typ.html">MIME-Types</a>" steht.</p><p>Um die technischen und <a class="internal" href="../metadaten.html">Metadaten</a> von Video- und Audiodateien anzeigen zu können gibt es die Programme <a class="internal" href="../mediainfo.html">MediaInfo</a>, <code class="notranslate">ffprobe</code> (aus dem <a class="internal" href="../ffmpeg.html">FFmpeg</a>-Projekt) sowie <a class="internal" href="../avprobe.html">avprobe</a> (aus dem Libav-Projekt). Sie erkennen zahlreiche Audio-, Video- und Container-Formate. Die Programme stehen als kommandozeilen-basierte Anwendungen zur Verfügung, <a class="internal" href="../mediainfo.html">MediaInfo</a> optional auch mit einer <a class="internal" href="../gtk.html">GTK</a>-basierten grafischen Benutzeroberfläche (GUI).</p></div><div class="section_1"><h2 id="Programmkennung-aendern">Programmkennung ändern<a class="headerlink" href="#Programmkennung-aendern">¶</a></h2><p>
In einem Terminal<sup><a href="#source-3">[3]</a></sup> gelten die folgenden Befehls-Muster:</p><p>wget:
</p><div class="bash"><div class="contents"><pre class="notranslate">wget -U "MSDL (compatible; LG NetCast.TV-2011) HbbTV/1.1.1 (; LGE; GLOBAL_PLAT3; 1.0; 1.0;)" http://example.com/folder/file </pre></div></div><p><a class="crosslink" href="#HLS-HTTP-Live-Stream-aufnehmen">FFmpeg bzw. avconv</a>:
</p><div class="bash"><div class="contents"><pre class="notranslate">ffmpeg -headers $'User-Agent: "FMLE/3.0 (compatible; FMSc/1.0)"\r\n' -i http://Adresse.m3u8 -codec: copy /Pfad/zur/Zieldatei.mp4 </pre></div></div><p>
Wobei das <code class="notranslate">\r\n</code> den Zeilenvorschub (auch CRLF genannt) darstellt. Ohne diesen würde der Befehl folgendermaßen lauten:
</p><div class="bash"><div class="contents"><pre class="notranslate">ffmpeg -headers 'User-Agent: "FMLE/3.0 (compatible; FMSc/1.0)"' -i http://Adresse.m3u8 -codec: copy /Pfad/zur/Zieldatei.mp4 </pre></div></div><p>Siehe auch den <a class="internal" href="../howto/stream-adressen_ermitteln.html#Programmkennung-aendern">Programmkennung ändern</a>.</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><div class="section_2"><h3 id="Intern">Intern<a class="headerlink" href="#Intern">¶</a></h3><p>
</p><ul><li><p><a class="internal" href="../streaming.html">Streaming</a> <img alt="{Übersicht}" src="../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Grundlegendes zum Thema; Audio- und Videostreams mit Browser-Plugins abspielen</p></li><li><p><a class="internal" href="../streams_speichern.html">Streams speichern</a> <img alt="{Übersicht}" src="../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li><li><p><a class="internal" href="../howto/stream-adressen_ermitteln.html">Howto/Stream-Adressen ermitteln</a></p></li><li><p><a class="internal" href="../internetradio.html">Internetradio</a> <img alt="{Übersicht}" src="../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p><ul><li><p><a class="internal" href="../internetradio_aufzeichnen.html">Internetradio aufzeichnen</a></p></li></ul></li><li><p><a class="internal" href="../internet-tv.html">Internet-TV</a> <img alt="{Übersicht}" src="../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Extern">Extern<a class="headerlink" href="#Extern">¶</a></h3><p>
</p><ul><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Streaming%20Media">Streaming Media</a></p></li><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Streaming-Produktion">Streaming-Produktion</a></p></li><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Video-on-Demand">Video-on-Demand</a></p></li><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Audio-on-Demand">Audio-on-Demand</a></p></li><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Multimedia">Multimedia</a></p></li><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Codec">Codec</a></p></li><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Containerdatei">Containerdatei</a></p></li></ul></div></div></div>
<p class="meta">
<a href="../howto/streaming-inhalte_herunterladen/a/revision/942117.html">Diese Revision</a> wurde am 21. Juni 2017 11:34 von <a href="https://ubuntuusers.de/user/linux_joy/">linux_joy</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../howto.html">Howto</a></li>
<li><a href="../howto/streaming-inhalte_herunterladen.html">Streaming-Inhalte herunterladen</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>