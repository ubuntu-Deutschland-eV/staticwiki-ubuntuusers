<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>HowTo/SIP_Telefonie_über_Terminal_und_Linphone_auf_dem_Ubuntu_Phone › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../howto/sip_telefonie_über_terminal_und_linphone_auf_dem_ubuntu_phone.html">SIP Telefonie über Terminal und Linphone auf dem Ubuntu Phone</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/HowTo/SIP_Telefonie_über_Terminal_und_Linphone_auf_dem_Ubuntu_Phone">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../howto/sip_telefonie_über_terminal_und_linphone_auf_dem_ubuntu_phone/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../howto/sip_telefonie_über_terminal_und_linphone_auf_dem_ubuntu_phone/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../howto/sip_telefonie_über_terminal_und_linphone_auf_dem_ubuntu_phone/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../howto/sip_telefonie_über_terminal_und_linphone_auf_dem_ubuntu_phone/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../howto/sip_telefonie_über_terminal_und_linphone_auf_dem_ubuntu_phone/a/backlinks.html">SIP Telefonie über Terminal und Linphone auf dem Ubuntu Phone</a></h1>
<div id="page"><p>
</p><div class="box ut_box"><h3 class="box ut_box">Dieser Artikel bezieht sich auf Ubuntu Touch, die Variante von Ubuntu für mobile Geräte mit Touchscreen.</h3><div class="contents"><p> 
Getestet wurde der Artikel für folgende Version(en):
</p><ul><li><p><a class="internal" href="../vivid_vervet.html">Ubuntu Touch 15.04</a> Vivid Vervet</p></li></ul></div></div><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Die Verwendung dieses Howto geschieht auf eigene Gefahr. Insbesondere enthält das Howto das Beschreibbarmachen der Systempartition bei Ubuntu Touch Geräten, um per apt-get Programme installieren zu können. Dies ist keine offiziell unterstützte Funktion von Ubuntu Touch. Bei zukünftigen OTAs (Over the Air Aktualisierungen) kann es zu Problemen, z.B. wegen mangelndem Speicher auf der Systempartition, kommen. <span class="underline">Eventuell ist bei Problemen das erneute Flashen von Ubuntu auf das Gerät notwendig.</span> Dazu kann z.B. das <a class="internal" href="../ubuntu_touch/flash_tool.html">flash tool</a><sup><a href="#source-7">[7]</a></sup> oder ein <a class="external" href="https://github.com/MariusQuabeck/magic-device-tool" rel="nofollow">spezielles Batch Tool</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> für Ubuntu Geräte verwendet werden. Bei Problemen mit der Anleitung melde dies bitte in der dazugehörigen Diskussion und wende dich zusätzlich an den Verfasser des Howtos. 
</p></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Diese Howto-Anleitung wurde zuletzt von "romensch2" am 12.08.2016 unter <strong>Ubuntu Touch 15.04 (OTA 12)</strong> erfolgreich getestet. Das Testgerät war ein BQ Aquaris E4.5.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../ubuntu_touch.html">Übersichtsartikel zu Ubuntu Touch</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../apt/apt-get.html">apt-get</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../linphone.html">linphone</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../ubuntu_touch/terminal.html">Terminal unter Ubuntu Touch benutzen</a></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="../ssh.html">SSH</a></p></li><li><p><a class="crosslink anchor" href="#source-6" id="source-6"></a> <a class="internal" href="../ubuntu_touch/openstore.html">OpenStore</a>, <em>optional</em></p></li><li><p><a class="crosslink anchor" href="#source-7" id="source-7"></a> <a class="internal" href="../ubuntu_touch/flash_tool.html">flash tool</a>, <em>optional</em></p></li></ol></div></div><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Einleitung">Einleitung
</a></li><li><a class="crosslink" href="#Anleitung">Anleitung
</a><ol class="arabic"><li><a class="crosslink" href="#Konfiguration-von-linphone">Konfiguration von linphone
</a></li><li><a class="crosslink" href="#linphone-auf-dem-Phone-installieren">linphone auf dem Phone installieren
</a></li><li><a class="crosslink" href="#linphone-Konfigurationsdaten-kopieren">linphone Konfigurationsdaten kopieren
</a></li><li><a class="crosslink" href="#linphone-per-phablet-shell-ausfuehren">linphone per phablet-shell ausführen
</a></li><li><a class="crosslink" href="#Optional-Lifetime-Exception-anlegen">Optional: Lifetime Exception anlegen
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><div class="section_1"><h2 id="Einleitung">Einleitung<a class="headerlink" href="#Einleitung">¶</a></h2><p>
Der Artikel beschreibt das Nachrüsten einer SIP Telefoniefunktion <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Session_Initiation_Protocol">Session_Initiation_Protocol</a> für das Ubuntu Phone bzw. generell für Geräte, die mit <a class="internal" href="../ubuntu_touch.html">Ubuntu Touch</a><sup><a href="#source-1">[1]</a></sup> laufen. Dazu wird über apt-get<sup><a href="#source-2">[2]</a></sup> das Programm linphone<sup><a href="#source-3">[3]</a></sup> installiert. Da nicht alle Ubuntu Touch Geräte Libertine bzw. X11 Apps unterstützen, wird linphone dann nur im Terminal ausgeführt.  Erfolgreich getestet wurden folgende Funktionen: Anrufen lassen, Anruf annehmen, andere Nummern anrufen.</p><p><img alt="Linphonec.png" class="image-default" src="../_/5fd3f0ae705b2cbb9f3036f4995eea43b422e862.png"/></p></div><div class="section_1"><h2 id="Anleitung">Anleitung<a class="headerlink" href="#Anleitung">¶</a></h2><p>
</p><div class="section_2"><h3 id="Konfiguration-von-linphone">Konfiguration von linphone<a class="headerlink" href="#Konfiguration-von-linphone">¶</a></h3><p>
Am einfachsten erfolgt die Konfiguration von linphone am Ubuntu Desktop mit grafischer Oberfläche. Dazu installiert und konfiguriert man linphone nach Anleitung<sup><a href="#source-3">[3]</a></sup> für seinen SIP-Account. Nachdem im Grafikmodus die Funktion geprüft wurde, kann man die App am Desktop schonmal im Terminal ausprobieren.</p><div class="bash"><div class="contents"><pre class="notranslate">linphonec </pre></div></div><p>Zur Bedienung von linphone über das Terminal gibt es hier <a class="external" href="http://www.linphone.org/technical-corner/linphone/documentation" rel="nofollow">eine Anleitung</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p><p>Die wichtigsten Befehle sind:
</p><ul><li><p><code class="notranslate">call 1234</code>: Nummer 1234 anrufen</p></li><li><p><code class="notranslate">answer</code>: Eingehenden Anruf annehmen</p></li><li><p><code class="notranslate">terminate</code>: Auflegen</p></li><li><p><code class="notranslate">quit</code>: linphone beenden</p></li></ul><p>
</p></div><div class="section_2"><h3 id="linphone-auf-dem-Phone-installieren">linphone auf dem Phone installieren<a class="headerlink" href="#linphone-auf-dem-Phone-installieren">¶</a></h3><p>
Um linphone auf dem Phone zu installieren, muss man das Image beschreibbar machen<sup><a href="#source-4">[4]</a></sup>: <a class="internal" href="../ubuntu_touch/terminal.html#Systempartition-beschreibbar-machen">Ubuntu Touch/Terminal</a>.</p><p>Um Speicherprobleme bei der Installation mit apt-get zu vermeiden <sup><a href="#source-2">[2]</a></sup>, wird vorsichtshalber der Cache zuerst ausgelagert: <a class="internal" href="../ubuntu_touch/terminal.html#Freien-Speicher-beobachten">Ubuntu Touch/Terminal</a>.</p><p>Dann erfolgt die eigentliche Installation von linphone:
</p><div class="bash"><div class="contents"><pre class="notranslate">#Paketquellen einlesen
sudo apt-get update
#linphone installieren
sudo apt-get install linphone
#Aufraeumen: Cache leeren
sudo apt-get clean </pre></div></div><p>Danach am besten die Systempartition wieder sperren.
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount -o remount,ro /  </pre></div></div></div><div class="section_2"><h3 id="linphone-Konfigurationsdaten-kopieren">linphone Konfigurationsdaten kopieren<a class="headerlink" href="#linphone-Konfigurationsdaten-kopieren">¶</a></h3><p>
Als nächstes kopiert man die Konfigurationsdaten von linphone vom Homeverzeichnis auf dem Desktop (<strong>~/</strong>) auf das Homeverzeichnis am Phone (<strong>/home/phablet</strong>). Am besten werden alle Dateien mit <strong>.linphone</strong> aus dem Home-Verzeichnis kopiert, damit die nötigen Konfigurationsdateien enthalten sind. Bei der Erstellung dieser Anleitung waren das der Ordner <strong>.linphone-web</strong> sowie die Dateien <strong>.linphonec_history</strong>, <strong>.linphone-history.db</strong> und <strong>.linphonerc</strong>.</p></div><div class="section_2"><h3 id="linphone-per-phablet-shell-ausfuehren">linphone per phablet-shell ausführen<a class="headerlink" href="#linphone-per-phablet-shell-ausfuehren">¶</a></h3><p>
Nun ergibt sich das Problem, dass linphone nicht direkt in der Terminal App ausgeführt werden kann, da es nicht genug Rechte für die Terminal App gibt. Man bekommt beim Versuch, ein Telefonat zu führen, immer eine Fehlermeldung <code class="notranslate">pulseaudio error</code>. Dies kann man umgehen, indem man linephone aus einer SSH-Sitzung über die phablet-shell ausführt. Diese verfügt über mehr Rechte, um den nötigen Audiostream zu initialisieren.</p><p>Dazu muss man sich per ssh vom Phone mit dem Phone selbst verbinden <sup><a href="#source-4">[4]</a></sup><sup><a href="#source-5">[5]</a></sup>: <a class="internal" href="../ubuntu_touch/terminal.html#SSH">Ubuntu Touch/Terminal</a></p><p>Zum Einrichten der SSH-Verbindung wie folgt vorgehen:</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Der Schritt der Schlüsselerzeugung mit <code class="notranslate">ssh-keygen</code> muss unbedingt von der Terminal App aus ausgeführt werden, ansonsten kann man von der Terminal App aus später nicht die ssh Verbindung starten!
</p></div></div><div class="bash"><div class="contents"><pre class="notranslate">cd ~/.ssh
#Schluesselpaar erzeugen und in die Liste vertrauenswürdiger Keys aufnehmen
#Hierbei am besten keine Passphrase eingeben, sondern nur bestätigen
ssh-keygen -t rsa -f localhost_rsa
cat localhost_rsa.pub &gt;authorized_keys
#Mit beliebigem Editor die Datei authorized_keys bearbeiten
nano ~/.ssh/authorized_keys
#Am Anfang der letzten Zeile eine Ergänzung vornehmen
from="127.0.0.1"LEERZEICHEN
#Die Zeile sieht nun so aus: from="127.0.0.1" ssh-rsa AAARESTDESKEYS
#ssh Verbindung in Config Datei anlegen
nano ~/.ssh/config
#Inhalt der Datei
Host localhost
Hostname 127.0.0.1
IdentityFile /home/phablet/.ssh/localhost_rsa </pre></div></div><p>Dann kann man von der Terminal App aus die SSH Verbindung starten und linphone ausführen:</p><div class="bash"><div class="contents"><pre class="notranslate">ssh localhost
#...
linphonec
#...
call 1234 #ruft Nummer 1234 an usw, siehe Dokumentation von linephone
#...
quit #linphone beenden
exit #ssh Verbindung schließen </pre></div></div><p>Zum Telefonieren empfiehlt sich ein Headset, da Gespräche immer im Lautsprecher-Modus laufen.</p></div><div class="section_2"><h3 id="Optional-Lifetime-Exception-anlegen">Optional: Lifetime Exception anlegen<a class="headerlink" href="#Optional-Lifetime-Exception-anlegen">¶</a></h3><p>
Zum Telefonieren reicht die oben beschriebene Installation bereits aus. Allerdings beendet der <em>"deep sleep"</em> Modus der Energieverwaltung die ssh Verbindung automatisch nach einer bestimmten Zeit. Dadurch werden laufende Telefonate zwar nicht beendet, aber im Terminal kann z.B. ein laufender Anruf nicht mehr beendet werden. Das Telefonat kann dann nur noch über das Schließen der Terminal App beendet werden. Um das zu verhindern und außerdem nach der Anmeldung mit <code class="notranslate">linphonec</code> auch für eingehende Anrufe erreichbar zu sein, setzt man eine Lifecycle-Ausnahme für die Terminal App. Am einfachsten funktioniert das mit dem <a class="external" href="https://open.uappexplorer.com/app/ut-tweak-tool.sverzegnassi" rel="nofollow"><strong>UT Tweak Tool</strong></a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> aus dem <a class="external" href="https://open.uappexplorer.com/" rel="nofollow">OpenStore</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/><sup><a href="#source-6">[6]</a></sup>. Die Installation des OpenStore ist im <a class="internal" href="../ubuntu_touch/openstore.html">dazugehörigen Wiki-Artikel</a> beschrieben. Nach Installation des Tweak Tool  muss man zum Start das Passwort eingeben, um die nötigen Rechte zu erhalten. Dann wählt man im Menü den Punkt <em>"App Scopes"</em> aus. In der folgenden Liste sucht man die <strong>Terminal</strong> Anwendung heraus und aktiviert dort die Option <em>"Prevent app suspension"</em>.</p><p>Wer keine Fremdquellen benutzen will, kann alternativ die Ausnahmen auch über die Kommandozeile verwalten. Mit folgendem Befehl im Terminal zeigt man die Liste der Apps an, die im Hintergrund ausgeführt werden dürfen:
</p><div class="bash"><div class="contents"><pre class="notranslate">gsettings get com.canonical.qtmir lifecycle-exempt-appids  </pre></div></div><p>Dies wird mit einer Ausgabe z.B. wie der folgenden quittiert
</p><pre class="notranslate">['com.ubuntu.music', 'com.ubuntu.gallery']</pre><p>Um eine weitere Ausnahme für das Terminal hinzuzufügen, führt man folgenden Befehl aus</p><div class="bash"><div class="contents"><pre class="notranslate">gsettings set com.canonical.qtmir lifecycle-exempt-appids "['com.ubuntu.music', 'com.ubuntu.gallery', 'com.ubuntu.terminal']" </pre></div></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Session_Initiation_Protocol">Session_Initiation_Protocol</a></p></li><li><p><a class="external" href="http://www.linphone.org/technical-corner/linphone/documentation" rel="nofollow" title="http://www.linphone.org/technical-corner/linphone/documentation">http://www.linphone.org/technical-corner/linphone/documentation</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="https://open.uappexplorer.com/" rel="nofollow" title="https://open.uappexplorer.com/">https://open.uappexplorer.com/</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="https://github.com/MariusQuabeck/magic-device-tool" rel="nofollow">magic device tool zum erneuten Flashen in Notfällen</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../howto/sip_telefonie_über_terminal_und_linphone_auf_dem_ubuntu_phone/a/revision/906288.html">Diese Revision</a> wurde am 29. August 2016 16:27 von <a href="https://ubuntuusers.de/user/march/">march</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../howto.html">HowTo</a></li>
<li><a href="../howto/sip_telefonie_über_terminal_und_linphone_auf_dem_ubuntu_phone.html">SIP Telefonie über Terminal und Linphone auf dem Ubuntu Phone</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>