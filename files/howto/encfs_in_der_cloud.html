<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Howto/EncFS_in_der_Cloud › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../howto/encfs_in_der_cloud.html">EncFS in der Cloud</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Howto/EncFS_in_der_Cloud">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../howto/encfs_in_der_cloud/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../howto/encfs_in_der_cloud/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../howto/encfs_in_der_cloud/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../howto/encfs_in_der_cloud/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../howto/encfs_in_der_cloud/a/backlinks.html">EncFS in der Cloud</a></h1>
<div id="page"><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Die Verwendung dieses Howto geschieht auf eigene Gefahr. Bei Problemen mit der Anleitung melde dies bitte in der dazugehörigen Diskussion und wende dich zusätzlich an den Verfasser des Howtos.
</p></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Diese Howto-Anleitung wurde von <a class="crosslink user" href="https://ubuntuusers.de/user/Apos/">Apos</a> am 01.02.2016 unter <strong>Ubuntu 14.04.03</strong> erfolgreich getestet  (produktiver Einsatz).
Sie wurde zuletzt von <a class="crosslink user" href="https://ubuntuusers.de/user/Apos/">Apos</a> am 15.01.2018 unter <strong>Ubuntu 16.04.01</strong> und <strong>Ubuntu 17.10</strong> erfolgreich getestet (produktiver Einsatz).
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../sudo.html">Root-Rechte</a></p></li></ol></div></div><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Vorbemerkungen">Vorbemerkungen
</a></li><li><a class="crosslink" href="#Voraussetzungen-fuer-Schutzmassnahmen">Voraussetzungen für Schutzmassnahmen
</a></li><li><a class="crosslink" href="#Beispiel">Beispiel
</a></li><li><a class="crosslink" href="#Problembehebung">Problembehebung
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="logo_owncloud_encfs.png" class="image-left" src="../_/074e96173c12e85a938d632acc31f019fab49720.png"/>
Das Thema, seine Daten in der Cloud aufzubewahren und zu verschlüsseln, betrifft immer mehr Nutzer. Die Tendenz steigt, weil bei der heutigen Vernetzung und Vielzahl an Endgeräten (PC, Notebook, Tablet, Handy) eine generelle Verfügbarkeit der Daten erwünscht ist. Selbst unerfahrene Nutzer können heutzutage problemlos Cloudienste nutzen. Die Einfachheit der Installation und Verwendung laden dazu ein, Verschlüsselungssysteme wie <a class="internal" href="../encfs.html">EncFs</a> einzusetzen. EncFs ist auf Grund seiner "Datei-weisen" Verschlüsselung für diesen Einsatz prädestiniert, da dadurch nur jeweils geänderte Dateien synchronisiert werden und sich so der Datenstrom in Grenzen hält.</p><p>EncFs ist einfach zu verwenden. Insbesondere wenn man grafische Werkzeuge wie z.B. den  <a class="internal" href="../encfs.html#Gnome-Encfs-Manager">Gnome-EncFS Manager</a> verwendet. Dies klappt sogar auf dem Android-Handy mit Anwendungen wie z.B. Crpytonite (hierauf wird in diesem Artikel nicht eingegangen).</p><p>Die Annehmlichkeiten der Verwendung von EncFs durch solche Tools verleiten dazu technische Hintergründe zu übersehen und damit Sicherheitsaspekte außer Acht zu lassen. Besonders kritisch kann dies werden, wenn sensible Daten in die Cloud gestellt werden.</p><p>Der Grund, warum es diesen Artikel gibt:</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Der (einzige) private Schlüssel von EncFs wird standardmäßig zusammen mit allen Konfigurationsoptionen in einer XML-Textdatei mit Namen <strong>encfs6.xml</strong> gespeichert (<em>Volume Key</em> genannt) . Diese befindet sich zusammen mit den verschlüsselten Daten im selben Verzeichnis wie die verschlüsselten Daten.</p><p>Einziger Schutz: ein Passwort.
</p></div></div><div class="section_1"><h2 id="Vorbemerkungen">Vorbemerkungen<a class="headerlink" href="#Vorbemerkungen">¶</a></h2><p>
</p><div class="section_2"><h3 id="Standardkonfiguration-von-EncFs-und-Volume-Key">Standardkonfiguration von EncFs und Volume-Key<a class="headerlink" href="#Standardkonfiguration-von-EncFs-und-Volume-Key">¶</a></h3><p>
<em>Quelle: <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/EncFS">Wikipedia: EncFS</a></em></p><blockquote><p>"[...] Verschlüsselt werden die Daten dabei mit einem großen, in einer Datei vorliegenden Schlüssel, dem sogenannten Volume-Key. Dieser ist nochmals mit einem Passwort geschützt, um Entschlüsselung bei Kenntnis des Volume-Keys zu verhindern. [...]"</p></blockquote><p>
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>.Data_EncFS/                  &lt;- Basisverzeichnis
├── kadfZkkad8435hölkqehlh,a  &lt;- verschlüsselte Dateien und Ordner
├── jfajds4lkfasHmd9asdfsasd
├── [...]
└── .encfs6.xml               &lt;- volume-key hier
</pre></div>
</td></tr></table></div><p>Hat ein Angreifer Zugriff auf diese Daten, benötigt er zur Entschlüsselung des Verzeichnisses nur das Benutzerpasswort um an die Daten zu gelangen. <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Brechen_(Kryptologie)">Software um Passwörter zu entschlüsseln</a> leistet heute enormes. Eine Entzifferung ist für einen Angreifer nur eine Frage der Zeit.</p><p>Und genau hier liegt die Chance für den Angreifer. Das Web bietet ihm einen ständigen Zugang, er kann automatisiert und in aller Ruhe den Server angreifen, dann die <em>encfs6.xml</em> auslesen und entschlüsseln.</p><p>Das Problem dabei ist: In der Regel bleiben die Daten zur Verschlüsselung der Daten auf dem Server über lange Zeit unverändert bestehen:</p><ul><li><p>Den Schlüssel (Volume-Key) bleibt für die gesamte Laufzeit des Verzeichnisses erhalten und <a class="external" href="http://sourceforge.net/p/encfs/mailman/message/20349699/" rel="nofollow">kann nicht geändert werden</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>! </p></li><li><p>Wer verwendet wirklich ein starkes, zufallsgeneriertes Passwort und verwendet ausschließlich (<a class="internal" href="../keepassx.html">Passwortgenerator- und -manager wie KeePassX</a> oder <a class="internal" href="../pwgen.html">pwgen</a>)? </p></li><li><p>Wer ändert die Passwörter regelmäßig?</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Kryptographische-Aspekte-des-Volume-Key">Kryptographische Aspekte des Volume-Key<a class="headerlink" href="#Kryptographische-Aspekte-des-Volume-Key">¶</a></h3><p>
Die zentrale und einzige Konfigurationsdatei für ein EncFs-Dateisystem ist eine XML-Datei. Sie enthält alle wichtigen Konfigurationsdaten, darunter zwei kryptografisch wichtige Sequenzen, die zur Entschlüsselung benötigt werden:</p><p>1.  Der Volume-Key - ein privater Schlüssel, welcher durch ein Kennwort verschleiert ist.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nt">&lt;encodedKeyData&gt;</span>
  fd7as87dffaldfkahdflkahfdsölkfadsfad8fßa09d8f0WFlSd2m6gfk43682435j432hhsjwfbK9INfz27adf==
<span class="nt">&lt;/encodedKeyData&gt;</span>
</pre></div>
</td></tr></table></div><p><strong>2. Der <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Salt_(Kryptologie)">Salt</a></strong> - ein zusätzlicher Schlüssel, um die allgemeine Sicherheit gegenüber Entschlüsselungsalgorithmen zu erhöhen.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="nt">&lt;saltData&gt;</span>
LwYW6nBVtDj/wv+2jlmyS3TZ5LA=
<span class="nt">&lt;/saltData&gt;</span>
</pre></div>
</td></tr></table></div><p>Warum ist dies kritisch?:</p><p>Die Konfigurationsdaten zur Verschlüsselung sowie der private Schlüssel sollten normalerweise getrennt aufbewahrt werden. In der Regel ist sogar eine physikalische Trennung und Speicherung auf einem externen Datenträger oder zumindest an einem besonders geschützten Ort sinnvoll - z. B. ein separates, verschlüsseltes Verzeichnis.</p><p>Ein einfaches Beispiel um den Sachverhalt zu verstehen:  Die Karte enthält den elektronischen Schlüssel, dieser ist nur durch ein Passwort geschützt (die PIN in diesem Fall). Kein Mensch würde seine EC-Karte offen irgendwo hinlegen.</p><p>Die Standardkonfiguration von EncFs sieht folgendes vor: Der Schlüssel und die verschlüsselten Daten werden zusammen in ein Verzeichnis gelegt. Ein potentieller Angreifer kann nach erfolgreichem Knacken des Passwortes die privaten Daten des Nutzers in aller Ruhe auslesen, ohne dass dieser etwas davon mitbekommt. Da die meisten Anwender weder ihr Owncloud-Zuganspasswort noch das Passwort des EncFs-Verzeichnisses regelmäßig ändern, stehen die Benutzerdaten in der Owncloud für einen Angreifer wahrscheinlich <em>für sehr lange Zeit</em> wie ein Scheunentor offen.</p><p>Bei derzeit rasant steigender Nutzung von Cloud-Systemen ist die Wahrscheinlichkeit hoch, dass Angreifer potentielle Sicherheitslücken in Systemen angreifen, um an Nutzerdaten zu gelangen. Dies trifft insbesondere auf einfach zu verwendende Systeme wie <a class="external" href="https://www.fropbox.com" rel="nofollow">Dropbox</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> oder im privaten Serverumfeld leicht aufzusetzende wie <a class="external" href="https://www.owncloud.org" rel="nofollow">Owncloud</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> zu. Die Hürde in Sachen Sicherheit kann man also nicht hoch genug legen.</p></div></div><div class="section_1"><h2 id="Voraussetzungen-fuer-Schutzmassnahmen">Voraussetzungen für Schutzmassnahmen<a class="headerlink" href="#Voraussetzungen-fuer-Schutzmassnahmen">¶</a></h2><p>
Um die <em>minimalen</em> Sicherheitsaspekte umzusetzen, wird die Kenntnis der Installation von <a class="internal" href="../encfs.html">EncFs</a> und optional dem <a class="internal" href="../encfs.html#Gnome-Encfs-Manager">Gnome-Encfs-Manager</a> voraus gesetzt. Die Konfiguration wird für den <a class="internal" href="../owncloud_nutzung.html#ownCloud-Client">ownCloud-Client</a> und den <a class="internal" href="../dropbox.html">Dropbox-Client</a> erläutert.</p><p>Um <em>alle</em> Sicherheitsaspekte umzusetzen, sollte man mit einem <a class="internal" href="../keepassx.html">Passwortgenerator- und -manager wie KeePassX</a> umgehen können. Automatisieren lässt sich vieles, wenn man grafische Tools wie den <a class="internal" href="../encfs.html#Gnome-Encfs-Manager">Gnome-Encfs-Manager</a> einsetzt.</p></div><div class="section_1"><h2 id="Beispiel">Beispiel<a class="headerlink" href="#Beispiel">¶</a></h2><p>
Folgendes Szenario wollen wir hier realisieren:</p><ul><li><p>Die Owncloud ist eingerichtet, und der Owncloud Ordner befindet sich im Verzeichnis <strong>~/OwnCloud</strong>.</p></li><li><p>Die verschlüsselten Daten liegen im versteckten Verzeichnis <strong>~/OwnCloud/.Mein_EncFs_01_Crypt</strong>. Die entschlüsselten Daten sollen im Mountpunkt <strong>~/Mein_EncFs_01</strong> zum Liegen kommen, und die Schlüssel werden im versteckten Verzeichnis <strong>~/.Meine_EncFs_Schluessel</strong> aufbewahrt. </p></li><li><p>Den Schlüssel für das Datenverzeichnis <strong>~/OwnCloud/.Mein_EncFs_01_Crypt/.encfs6.xml</strong> haben wir aus dem Datenverzeichnis heraus verschoben in <strong>~/.Meine_EncFs_Schluessel<code class="notranslate"> und in </code>Mein_EncFs_01_Volume-Key.xml</strong> umbenannt. </p></li><li><p>Im EncFS-Wurzelverzeichnis <strong>~/OwnCloud/.Mein_EncFs_01_Crypt</strong> liegt ein symbolischer Link, der auf den Volume-Key in <strong>~/.Meine_EncFs_Schluessel</strong> mit dem Namen <strong>.encfs6.xml</strong> zeigt.</p></li><li><p>Der Volume-Key ist also lokal auf dem Rechner gespeichert. In der OwnCloud befinden sich lediglich die verschlüsselten Daten.</p></li></ul><p>
Hier der Aufbau in der Übersicht:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>HOMEVERZEICHNIS
├── OwnCloud
│   └── .Mein_EncFs_01_Crypt
│       ├── ad356kfjaoldkfjadskfj9a8d724 
│       └── .encfs6.xml -&gt; ../../.Meine_EncFs_Schluessel/Mein_EncFs_01_Volume-Key.xml
│
├── Mein_EncFs_01
│       └── Entschluesselter_Ordner
│
└── .Meine_EncFs_Schluessel
    └── Mein_EncFs_01_Volume-Key.xml
</pre></div>
</td></tr></table></div><p>Das eigentliche Einhängen des Verzeichnisses wird in diesem Artikel nicht behandelt. Hierzu lese man den Artikel <a class="internal" href="../encfs.html">EncFS</a>.</p><div class="section_2"><h3 id="Sicherstellen-dass-der-Volume-Key-nicht-in-der-Cloud-landet">Sicherstellen, dass der Volume-Key nicht in der Cloud landet<a class="headerlink" href="#Sicherstellen-dass-der-Volume-Key-nicht-in-der-Cloud-landet">¶</a></h3><p>
Da in der Regel beim Anlegen eines EncFs-Verzeichnisses im Cloud-Ordner der Volume-Key standardmäßig gleich mit erstellt und im Datenverzeichnis abgelegt wird, würde dieser sofort in die Cloud synchronisiert (und versioniert!).</p><p>Daher sollte man das EncFS-Verzeichnis erst einmal lokal anlegen und dann den Volume-Key an einen anderen Ort verschieben. <em>Danach</em> kann man das EncFs-Datenverzeichnis - ohne Volume-Key - in die Cloud verschieben.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>mkdir -p ~/Mein_EncFs_01                            <span class="c1"># Mountpunkt für EncFs</span>
mkdir -p ~/.Mein_EncFs_01_Crypt                     <span class="c1"># Wurzelverzeichnis für EncFs</span>
mkdir -p ~/.Meine_EncFs_Schluessel                  <span class="c1"># Hier kommt der Volume-Key hinein</span>

encfs ~/.Mein_EncFs_01_Crypt <span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/Mein_EncFs_01    <span class="c1"># Erstellen des Volume-Key</span>

<span class="c1"># Verschieben des Volume-Key in ein lokales Verzeichnis ...</span>
mv  ~/.Mein_EncFs_01_Crypt/.encfs6.xml <span class="se">\</span>
    ~/.Meine_EncFs_Schluessel/Mein_EncFs_01_Volume-Key.xml

<span class="c1"># ... und des Wurzelverzeichnisses in die Cloud</span>
mv ~/.Mein_EncFs_01_Crypt ~/OwnCloud
</pre></div>
</td></tr></table></div><p><img alt="owncloud_encfs_xml_ignore.png" class="image-right" src="../_/f512aefdd0842e26d656fd306669aad9ff07a3bf.png"/></p></div><div class="section_2"><h3 id="Einstellungen-im-Client-der-Cloudsoftware">Einstellungen im Client der Cloudsoftware<a class="headerlink" href="#Einstellungen-im-Client-der-Cloudsoftware">¶</a></h3><p>
Man sollte sicherheitshalber den Dateinamen <strong>.encfs6.xml</strong> von der Synchronisation ausschließen.</p><p>Das geht so:</p><p><em>Owncloud</em>: In den Owncloud Einstellungen kann eine Ignorierliste bearbeitet werden (siehe Abbildung rechts).</p><p><em>Dropbox</em>: Hier lässt sich dies meiner Kenntnis derzeit noch nicht realisieren (das könnte aber noch kommen). Abhilfe schafft die unten beschriebene Methode unter Verwendung eines <em>symbolischen Links</em>.</p><p>Symbolische Links werden weder in der OwnCloud noch in der Dropbox synchronisiert. Daher ist dies auch auch die empfohlene Methode um EncFs "mitzuteilen", wo sich der VolumeKey befindet.</p></div><div class="section_2"><h3 id="Sicheres-Zufallspasswort-und-hohe-Verschluesselungsstufe-verwenden">Sicheres Zufallspasswort und hohe Verschlüsselungsstufe verwenden<a class="headerlink" href="#Sicheres-Zufallspasswort-und-hohe-Verschluesselungsstufe-verwenden">¶</a></h3><p>
Da bei Zugriff auf das verschlüsselte Verzeichnis ein starkes Passwort wichtig ist, sollte man zur Erstellung einen <a class="internal" href="../keepassx.html">Passwortgenerator- und -manager wie KeePassX</a> verwenden.</p><p>Das Passwort kann mit dem Werkzeug <code class="notranslate">encfsctl</code> geändert werden. 
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>encfsctl passwd Wurzelverzeichnis
</pre></div>
</td></tr></table></div><p>Die Daten sollten mit der <a class="internal" href="../encfs.html#Neues-verschluesseltes-Verzeichnis-anlegen">Option paranoia</a> verschlüsselt werden (256 bit AES).</p></div><div class="section_2"><h3 id="Externen-Volume-Key-einbinden">Externen Volume-Key einbinden<a class="headerlink" href="#Externen-Volume-Key-einbinden">¶</a></h3><p>
EncFS muss beim Aktivieren ("mount") wissen, wo sich das Wurzelverzeichnis und das Zugriffsverzeichnis (Mountpunkt) befinden (Quelle: Manpage von encfs):</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>encfs WURZELVERZEICHNIS MOUNTPUNKT
</pre></div>
</td></tr></table></div><p>Der Volume-Key wird von EncFs standardmäßig als <strong>.encfx6.xml</strong> bezeichnet und  im Datenverzeichnis gespeichert.</p><p>Es gibt zwei Möglichkeiten, um einen externen Volume-Key beim Aktivieren ("mount") einzubinden:</p><ol class="arabic"><li><p>im Datenverzeichnis wird ein symbolischer Link zum Volume-Key erstellt (empfohlene Methode)</p></li><li><p>beim Mounten gibt man den Ort des Volume-Key über eine Umgebungsvariable mit an</p></li></ol><p>
1.: Um einen symbolischen Link zu erstellen, geht man folgendermaßen vor:</p><pre class="notranslate">cd ~/OwnCloud/.Mein_EncFs_01_Crypt
ln -s ~/Meine_Schluessel/Mein_EncFs_01_Volume-Key.xml ~/OwnCloud/.Mein_EncFs_01_Crypt/.encfs6.xml

# Jetzt kann ganz normal gemounted werden:
encfs ~/OwnCloud/.Mein_EncFs_01_Crypt ${HOME}/Mein_EncFs_01</pre><p>2.: Um den Ort für den Volume-Key direkt beim Aktivieren an EncFS zu übergeben, kann die Umgebungsvariable <code class="notranslate">ENCFS6_CONFIG</code> gesetzt werden. Der Pfad zur Datei muss relativ (!) zum Datenverzeichnis angegeben werden. Der Volume-Key wird in unserem Beispiel folgendermaßen referenziert:</p><pre class="notranslate">ENCFS6_CONFIG=../Meine_Schluessel/Mein_EncFs_01_Volume-Key.xml; encfs ~/.Mein_EncFs_01_Crypt ~/Mein_EncFs_01</pre></div><div class="section_2"><h3 id="Zusaetzliche-Sicherheitsmassnahmen">Zusätzliche Sicherheitsmaßnahmen<a class="headerlink" href="#Zusaetzliche-Sicherheitsmassnahmen">¶</a></h3><p>
</p><div class="section_3"><h4 id="Volume-Key-in-verschluesseltem-Verzeichnis-speichern">Volume-Key in verschlüsseltem Verzeichnis speichern<a class="headerlink" href="#Volume-Key-in-verschluesseltem-Verzeichnis-speichern">¶</a></h4><p>
Wer seinen Rechner oder sein Home-Verzeichnis nicht <a class="internal" href="../lokale_sicherheit.html">verschlüsselt hat</a>, dem ist in jedem Fall zu empfehlen, die Volume-Keys in einem verschlüsselten Verzeichnis aufzubewahren. Damit kann ein Kopieren des Volume-Keys verhindert werden, wenn der PC z.B. unbeaufsichtigt im Büro oder in Öffentliche Räumen steht oder aber das Datenverzeichnis im Netzwerk freigegeben ist.</p><p>Die erreicht man durch</p><ul><li><p>ein zusätzliches, lokales EncFs-Verzeichnis, in dem die Schlüssel gespeichert werden.</p></li></ul><p>
Man kann zusätzlich den <a class="internal" href="../encfs.html#Grafische-Benutzeroberflaechen">Gnome-EncFs-Manager</a> einsetzen für ein vereinfachtes Mount-Management.</p></div><div class="section_3"><h4 id="Volume-Key-auf-externem-Datentraeger-speichern">Volume-Key auf externem Datenträger speichern<a class="headerlink" href="#Volume-Key-auf-externem-Datentraeger-speichern">¶</a></h4><p>
Unter Umständen kann es auch notwendig sein, die Volume-Keys auf einem verschlüsselten externen Datenträger (USB-Stick) abzulegen, um sie physikalisch von den verschlüsselten Daten zu trennen, z.B. wenn der Rechner unbeaufsichtigt ist und ein Zugriff nicht auszuschließen ist (MultiUser-System). Dieser Datenträger sollte natürlich verschlüsselt werden.</p></div><div class="section_3"><h4 id="EncFs-Link-fuer-andere-Systeme-verbergen">EncFs Link für andere Systeme verbergen<a class="headerlink" href="#EncFs-Link-fuer-andere-Systeme-verbergen">¶</a></h4><p>
EncFs bietet die Funktion, das aktivierte ("mounted") Verzeichnis im Netzwerk sichtbar zu machen. Dies ist ein großes Sicherheitsleck (Samba, SSHfs).</p><ul><li><p>EncFs bietet die <a class="internal" href="../encfs.html#Fehlermeldung-z-B-Keine-Berechtigung">Option --allow-other</a> beim Mounten.</p></li><li><p>Im <a class="internal" href="../encfs.html#Grafische-Benutzeroberflaechen">Gnome-EncFs-Manager</a> gibt es die Option "Erlaube anderen Benutzern den Zugriff auf dieses Verzeichnis".</p></li></ul><p>
Diese Funktionen sollte man nicht verwenden.</p></div><div class="section_3"><h4 id="Umbenennen-des-Volume-Key-und-Abspeichern-an-einem-unauffaelligen-Ort">Umbenennen des Volume-Key und Abspeichern an einem unauffälligen Ort<a class="headerlink" href="#Umbenennen-des-Volume-Key-und-Abspeichern-an-einem-unauffaelligen-Ort">¶</a></h4><p>
Dies bringt zwar praktisch keinen Sicherheitsgewinn, da die Datei jederzeit als XML-Konfigurationsdatei zu erkennen ist, kann aber unter Umständen verhindern, dass der Volume-Key als solcher erkannt wird.</p></div><div class="section_3"><h4 id="Verschluesselungs-App-in-der-Owncloud-aktivieren">Verschlüsselungs-App in der Owncloud aktivieren<a class="headerlink" href="#Verschluesselungs-App-in-der-Owncloud-aktivieren">¶</a></h4><p>
Optional kann man die Verschlüsselung der OwnCloud anschalten, damit ein Angreifer die gespeicherten Dateien nicht im Klartext sehen kann. Dies erfordert jedoch einen administrativen Zugang zum OwnCloud-Server.</p></div><div class="section_3"><h4 id="Verschluesselung-auf-dem-Wirtssytem-des-Servers-verwenden">Verschlüsselung auf dem Wirtssytem des Servers verwenden<a class="headerlink" href="#Verschluesselung-auf-dem-Wirtssytem-des-Servers-verwenden">¶</a></h4><p>
Dies verhindert Angriffe auf einem abgeschalteten System oder einem KVM Image auf dem Wirtssystem.</p></div></div></div><div class="section_1"><h2 id="Problembehebung">Problembehebung<a class="headerlink" href="#Problembehebung">¶</a></h2><p>
</p><div class="section_2"><h3 id="Volume-Key-wurde-versehentlich-in-die-Cloud-synchronisiert">Volume-Key wurde versehentlich in die Cloud synchronisiert<a class="headerlink" href="#Volume-Key-wurde-versehentlich-in-die-Cloud-synchronisiert">¶</a></h3><p>
Hier gibt es leider nur die Möglichkeit, auf dem Server im Verzeichnis <strong>/owncloud/data/USERNAME/files_versions</strong> nach der Datei zu suchen und diese zu löschen.</p><p>Ab Owncloud Version 8.2 wird das Löschen von Versionen mit dem Dienstprogramm <code class="notranslate">occ</code> unterstützt:
</p><ul><li><p>lies u.a. <a class="interwiki interwiki-github" href="https://github.com/owncloud/core/issues/9652">Github: #9652 - trashbin/version cleanup occ command</a></p></li></ul><p>
Unter Dropbox ist mir keine Möglichkeit bekannt.</p></div><div class="section_2"><h3 id="Mein-Volume-Key-wurde-kompromittiert">Mein Volume-Key wurde kompromittiert<a class="headerlink" href="#Mein-Volume-Key-wurde-kompromittiert">¶</a></h3><p>
Der erstellte Volume-Key kann für die gesamte Laufzeit des EncFs-Verzeichnisses nicht mehr geändert werden! Es muss ein neues EncFs-Verzeichnis erstellt, und die Daten mpüssen dort hineinkopiert werden.</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="interwiki interwiki-sourceforge" href="http://sourceforge.net/projects/encfs">SourceForge Repository von EncFs</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://sourceforge.net/p/encfs/mailman/search/?mail_list=encfs-users" rel="nofollow">SourceForge Mailing Liste von EncFs durchsuchen</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://sourceforge.net/p/encfs/mailman/message/20349699/" rel="nofollow">Sourceforge Kommentar des Entwicklers D. Valient zur Änderung des Volume-Key bzw. des Passworts</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../howto/encfs_in_der_cloud/a/revision/946426.html">Diese Revision</a> wurde am 15. Januar 2018 10:51 von <a href="https://ubuntuusers.de/user/apos/">apos</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../howto.html">Howto</a></li>
<li><a href="../howto/encfs_in_der_cloud.html">EncFS in der Cloud</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>