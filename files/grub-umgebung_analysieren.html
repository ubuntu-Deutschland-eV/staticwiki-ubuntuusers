<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>GRUB-Umgebung_analysieren › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./grub-umgebung_analysieren.html">GRUB-Umgebung analysieren</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/GRUB-Umgebung_analysieren">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./grub-umgebung_analysieren/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./grub-umgebung_analysieren/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./grub-umgebung_analysieren/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./grub-umgebung_analysieren/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./grub-umgebung_analysieren/a/backlinks.html">GRUB-Umgebung analysieren</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><p>
</p><div class="box improvable"><h3 class="box improvable">Ausbaufähige Anleitung</h3><div class="contents"><p>
Dieser Anleitung fehlen noch einige Informationen. Wenn Du etwas
verbessern kannst, dann editiere den Beitrag, um die Qualität
des Wikis noch weiter zu verbessern.
</p><hr/><p><strong>Anmerkung:</strong> Die Analyse bei der Nutzung einer <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/GUID_Partition_Table">GUID Partition-Table</a> (kurz GPT) kann noch weiter erklärt werden. Die Angaben im Abschnitt <a class="crosslink" href="#GRUB-Version-in-MBR-oder-Partitions-Bootsektor-ermitteln">GRUB-Version in MBR oder Partitions-Bootsektor ermitteln</a> müssen evtl. angepasst werden.
</p></div></div><p>.
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./chroot/live-cd.html">Mittels Live-CD und chroot in das installierte System wechseln</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./datenträger.html#Wie-heissen-die-Datentraeger">Wie heißen die Datenträger</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#GRUB-Version">GRUB-Version
</a></li><li><a class="crosslink" href="#Aktuelle-GRUB-Konfiguration-ausgeben">Aktuelle GRUB-Konfiguration ausgeben
</a></li><li><a class="crosslink" href="#Festplatten-Aufteilung-und-UUID">Festplatten-Aufteilung und UUID
</a></li><li><a class="crosslink" href="#Bootsektor-analysieren">Bootsektor analysieren
</a></li><li><a class="crosslink" href="#GRUB-2-Umgebung-mit-der-Kommandozeile-analysieren">GRUB-2-Umgebung mit der Kommandozeile anal...</a></li><li><a class="crosslink" href="#Umfassende-Analyse-mittels-Boot-Info-Script">Umfassende Analyse mittels Boot Info Scrip...</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/Oxygen/system-search.png" class="image-left" src="./_/f9fd744b89ec29c423671987903e8c83119b9dec.png"/>
Dieser Artikel beschreibt, wie man aus einem laufenden Ubuntu, einer <a class="internal" href="./desktop-cd.html">Desktop-CD</a> oder aber der <a class="internal" href="./grub_2/shell.html#Kommandozeile">GRUB 2 Kommandozeile</a> heraus Informationen ermittelt, die für die Behebung oder Beschreibung von Problemen rund um GRUB 2 wichtig sind. Außerdem sind einige der Ausgaben hilfreich, sofern man GRUB 2 richtig <a class="internal" href="./grub_2/skripte.html">manuell konfigurieren</a> will.</p><p>Wem das manuelle Zusammentragen der Informationen zu mühselig erscheint, kann dies auch bequem und umfassend von einem <a class="crosslink" href="#Umfassende-Analyse-mittels-Boot-Info-Script">Script</a> erledigen lassen.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die Vorgaben <strong>/dev/sdX</strong> bzw. <strong>/dev/sdXY</strong><sup><a href="#source-4">[4]</a></sup> müssen im Folgenden immer durch die tatsächlichen Bezeichnung der Partitionen ersetzt werden!
</p></div></div><div class="section_1"><h2 id="GRUB-Version">GRUB-Version<a class="headerlink" href="#GRUB-Version">¶</a></h2><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die Befehle zur Versions-Ermittlung müssen im laufenden System ausgeführt werden, um die richtigen Ergebnisse zu liefern. Kann das System nicht mehr gestartet werden, so muss man von einer <a class="internal" href="./desktop-cd.html">Desktop-CD</a> aus mittels <a class="internal" href="./chroot.html">chroot</a> in das laufende System wechseln <sup><a href="#source-1">[1]</a></sup> und dort den betreffenden Befehl ausführen. Alternativ kann man auch versuchen, das System mit der <a class="internal" href="./grub_2/shell.html#Alternativer-Systemstart-mit-Hilfe-der-Super-GRUB2-Disk">Super-GRUB2-Disk</a> zu starten.
</p></div></div><div class="section_2"><h3 id="GRUB-Legacy-oder-GRUB-2">GRUB Legacy oder GRUB 2<a class="headerlink" href="#GRUB-Legacy-oder-GRUB-2">¶</a></h3><p>
Mit dem folgenden Befehl im Terminal <sup><a href="#source-2">[2]</a></sup> lässt sich feststellen, ob <a class="internal" href="./grub.html">GRUB Legacy</a> oder <a class="internal" href="./grub_2.html">GRUB 2</a> im laufenden System installiert ist:</p><div class="bash"><div class="contents"><pre class="notranslate">dpkg --list | grep grub </pre></div></div><table style="width: 75%"><tr style="background-color: #F9EAAF"><td style="width: 45%"><strong>Befehlsausgabe</strong> </td><td> <strong>Installierte GRUB-Version</strong> </td></tr><tr><td> <code class="notranslate">GRand Unified Bootloader</code> </td><td> GRUB Legacy (Version 1) </td></tr><tr><td> <code class="notranslate">GRand Unified Bootloader, version 2</code> </td><td> GRUB 2 </td></tr></table><p>Neben dieser groben Unterscheidung zwischen GRUB Legacy und GRUB 2 wird außerdem auch noch die genaue Paketversion aufgelistet. Beispiel:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>ii  grub-common       <span class="m">1</span>.98+20100804-5ubuntu3         GRand Unified Bootloader, version <span class="m">2</span> <span class="o">(</span>common files<span class="o">)</span>
ii  grub-pc           <span class="m">1</span>.98+20100804-5ubuntu3         GRand Unified Bootloader, version <span class="m">2</span> <span class="o">(</span>PC/BIOS version<span class="o">)</span>
</pre></div>
</td></tr></table></div><p>Bevor man sich an die Problemlösung rund um GRUB 2 macht, sollte man sich daher vergewissern, dass man die für das Ubuntu Release neueste Paket-Version von GRUB 2 verwendet. Auch ein Update auf eine Paket-Version eines neueren Ubuntu-Releases <a class="internal" href="./grub_2/installation.html#GRUB-2-mittels-Live-CD-auf-eine-Version-einer-neueren-Distribution-aktualisieren">ist grundsätzlich möglich</a>.</p></div><div class="section_2"><h3 id="os-prober-Version">os-prober-Version<a class="headerlink" href="#os-prober-Version">¶</a></h3><p>
Andere auf dem System installierte Betriebssysteme werden von GRUB 2 mittels des Paketes <strong>os-prober</strong> ermittelt. Die aktuell installierte Version erhält man mittels:</p><div class="bash"><div class="contents"><pre class="notranslate">dpkg --list | grep os-prober </pre></div></div></div></div><div class="section_1"><h2 id="Aktuelle-GRUB-Konfiguration-ausgeben">Aktuelle GRUB-Konfiguration ausgeben<a class="headerlink" href="#Aktuelle-GRUB-Konfiguration-ausgeben">¶</a></h2><p>
Die aktuelle GRUB-Konfiguration ist in der Datei <a class="internal" href="./grub_2/konfiguration.html#Standard-Eintraege-in-die-grub-cfg"><strong>/boot/grub/grub.cfg</strong></a> gespeichert und kann mit folgendem Befehl angezeigt werden:</p><div class="bash"><div class="contents"><pre class="notranslate">cat /boot/grub/grub.cfg </pre></div></div></div><div class="section_1"><h2 id="Festplatten-Aufteilung-und-UUID">Festplatten-Aufteilung und UUID<a class="headerlink" href="#Festplatten-Aufteilung-und-UUID">¶</a></h2><p>
Um die Konfiguration der GRUB-Menü-Einträge überprüfen zu können, muss man die Bezeichnung und Aufteilung der Festplatten im System kennen. Diese Informationen sind darüber hinaus wichtig, um bei der Installation entscheiden zu können, wohin GRUB 2 installiert werden soll. Damit man die Ausgaben der folgende Befehle richtig interpretieren kann, muss man außerdem verstanden haben, wie Datenträger und Partitionen unter Linux bezeichnet werden<sup><a href="#source-4">[4]</a></sup>.</p><div class="section_2"><h3 id="Festplatten-und-Partitionen-auflisten">Festplatten und Partitionen auflisten<a class="headerlink" href="#Festplatten-und-Partitionen-auflisten">¶</a></h3><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo fdisk -lu </pre></div></div><p>
Der Befehl zeigt neben der Liste der Partitionen die Start- und Endsektoren der Partitionen an. Das ist hilfreich, wenn man wissen will, wie groß der sog. verborgene Bereich hinter dem MBR und vor der ersten Partition ist. Sehr häufig beginnt die erste Partition bei Sektor Nummer 63, seit Windows-Vista aber auch häufig erst bei Sektor Nummer 2048 (von der Sektorgröße der Festplatte abhängig).</p><p><strong>Alternative:</strong></p><p>Anstatt mit <a class="internal" href="./fdisk.html">fdisk</a> kann man sich die Partitionierung der Festplatten im System auch mit <a class="internal" href="./parted.html">parted</a> ausgeben lassen. Das ist insbesondere dann vorzuziehen, wenn eine der Platten im System eine <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/GUID_Partition_Table">GPT</a> enthält, funktioniert aber natürlich auch bei Platten mit <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Partitionstabelle">MBR-Partitionstabelle</a>:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo parted -l </pre></div></div><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Die Ausgabe von <code class="notranslate">fdisk -l</code> bzw. <code class="notranslate">parted -l</code> gibt keine verlässliche Auskunft über die Reihenfolge der Datenträger im System! Die Position der Datenträger ist bei heutiger Verwendung von externen Speichermedien – wie USB-Sticks und -Festplatten usw. – keinesfalls stets gleichbleibend.</p><p>Insbesondere vor der Verwendung der Befehle <a class="internal" href="./grub_2/terminalbefehle.html#grub-install">grub-install</a> und <a class="internal" href="./grub_2/terminalbefehle.html#grub-setup">grub-setup</a> sollte man anhand der Auflistung der <a class="crosslink" href="#UUID-der-Dateisysteme-anzeigen">UUIDs</a> vergleichen, dass der gewählte Datenträger auch tatsächlich die angenommenen Partitionen enthält.</p><p>Außerdem ist es zweckmäßig, bei Verwendung mehrerer Datenträger beim Anlegen der Partitionen (genauer: <span class="underline">beim Anlegen der Dateisysteme</span>), unterschiedliche Bezeichnungen zu vergeben, die dann das spätere Identifizieren der Datenträger und Partitionen erleichtern.
</p></div></div></div><div class="section_2"><h3 id="UUID-der-Dateisysteme-anzeigen">UUID der Dateisysteme anzeigen<a class="headerlink" href="#UUID-der-Dateisysteme-anzeigen">¶</a></h3><p>
Der folgende Befehl listet die vorhandenen Partitionen, deren <a class="internal" href="./dateisystem.html">Dateisystem</a>, die Bezeichnung (engl. "label"), den Einhängepunkt (engl. "mount point") sowie die <a class="internal" href="./uuid.html">UUID</a> auf:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo blkid -o list -w /dev/null </pre></div></div><p>
Mehr Informationen finden sich in den Artikeln <a class="internal" href="./uuid.html">UUID</a> und <a class="internal" href="./blkid.html">blkid</a>.
Alternativ kann man auch den Befehl <a class="internal" href="./lsblk.html">lsblk</a> nutzen, dessen Ausgabe u.U. übersichtlicher wirkt:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo lsblk -o name,uuid,fstype,mountpoint,label,size </pre></div></div></div></div><div class="section_1"><h2 id="Bootsektor-analysieren">Bootsektor analysieren<a class="headerlink" href="#Bootsektor-analysieren">¶</a></h2><p>
GRUB 2 installiert, je nach Partitions-Tabellentyp, wesentliche Teile in verschiedene Bereiche. Bei Problemen kann es notwendig sein, diese Bereiche näher zu untersuchen.</p><p>Generelle Informationen zum Datenträger und GRUB:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo file -s -N -F';' /dev/sd*|egrep 'GR|ID=0xee|data$'| tr -s ';' '\n' </pre></div></div><div class="section_2"><h3 id="Partitionstabellen">Partitionstabellen<a class="headerlink" href="#Partitionstabellen">¶</a></h3><p>
Da weder beim MBR (bzw. der Bereich dahinter) noch bei einer GPT ohne (U)EFI ein <a class="internal" href="./dateisysteme.html">Dateisystem</a> vorhanden ist, können die dortigen Informationen nur mittels <code class="notranslate">hexdump</code> ausgelesen werden.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Man sollte sich von der Verwendung des <code class="notranslate">hexdump</code>-Befehls und den damit teilweise einhergehenden Ausgaben von Byte-Werten nicht abschrecken lassen. Im wesentlichen geht es nur darum, den Wert eines bestimmten Byte oder einer Folge von Bytes anzeigen zu lassen und diese dann anhand von Tabellen auszuwerten.
</p></div></div><div class="section_3"><h4 id="MBR-Partitionstabelle">MBR-Partitionstabelle<a class="headerlink" href="#MBR-Partitionstabelle">¶</a></h4><p>
</p><ul><li><p>Der Wert <em>512</em> muss bei allen 3 Befehlen gegebenenfalls dem eigenen System entsprechend angepasst werden (siehe <a class="crosslink" href="#Festplatten-und-Partitionen-auflisten">Festplatten-Analyse/Sektoren</a>).</p></li></ul><p>
</p><div class="section_4"><h5 id="MBR-anzeigen">MBR anzeigen<a class="headerlink" href="#MBR-anzeigen">¶</a></h5><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hexdump -s0 -n512 -C /dev/sdX  </pre></div></div></div><div class="section_4"><h5 id="Verborgenen-Bereich-anzeigen">Verborgenen Bereich anzeigen<a class="headerlink" href="#Verborgenen-Bereich-anzeigen">¶</a></h5><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hexdump -s512 -n$((512*62)) -C /dev/sdX  </pre></div></div></div><div class="section_4"><h5 id="Partitions-Bootsektor-anzeigen">Partitions-Bootsektor anzeigen<a class="headerlink" href="#Partitions-Bootsektor-anzeigen">¶</a></h5><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hexdump -s0 -n512 -C /dev/sdXY  </pre></div></div></div></div><div class="section_3"><h4 id="GPT-ohne-U-EFI">GPT ohne (U)EFI<a class="headerlink" href="#GPT-ohne-U-EFI">¶</a></h4><p>
Bei der Nutzung einer GPT <span class="underline">ohne</span> (U)EFI wird eine eigene <a class="internal" href="./grub_2/grundlagen.html#MBR-mit-GUID-Partitionstabelle-GPT">Boot-Partition</a> genutzt. Diese Partition muss die 1. Partition auf dem Datenträger sein, ihre Kennung ist <em>ef02</em>.  
</p><ul><li><p>Der Wert <em>512</em> muss gegebenenfalls dem eigenen System entsprechend angepasst werden (siehe <a class="crosslink" href="#Festplatten-und-Partitionen-auflisten">Festplatten-Analyse/Sektoren</a>).</p></li></ul><p>
</p><div class="section_4"><h5 id="GPT-Header-anzeigen">GPT-Header anzeigen<a class="headerlink" href="#GPT-Header-anzeigen">¶</a></h5><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hexdump -s512 -n512 -C /dev/sdX  </pre></div></div></div><div class="section_4"><h5 id="BIOS-Boot-Partition-anzeigen">BIOS Boot-Partition anzeigen<a class="headerlink" href="#BIOS-Boot-Partition-anzeigen">¶</a></h5><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hexdump -C /dev/sdXY  </pre></div></div></div></div><div class="section_3"><h4 id="GPT-mit-U-EFI">GPT mit (U)EFI<a class="headerlink" href="#GPT-mit-U-EFI">¶</a></h4><p>
Bei der Nutzung einer GPT mit (U)EFI wird eine eigene <a class="internal" href="./grub_2/grundlagen.html#MBR-mit-GUID-Partitionstabelle-GPT">Boot-Partition</a> genutzt. Diese Partition kann die 1. Partition auf dem Datenträger sein, ihre Kennung ist <em>ef00</em>.</p><div class="section_4"><h5 id="GPT-Header-anzeigen-2">GPT-Header anzeigen<a class="headerlink" href="#GPT-Header-anzeigen-2">¶</a></h5><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hexdump -s1 -n512 -C /dev/sdX  </pre></div></div></div><div class="section_4"><h5 id="Boot-Loader-listen">Boot-Loader listen<a class="headerlink" href="#Boot-Loader-listen">¶</a></h5><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">find /boot/efi -iname "*efi" </pre></div></div></div></div><div class="section_3"><h4 id="GRUB-Version-in-MBR-oder-Partitions-Bootsektor-ermitteln">GRUB-Version in MBR oder Partitions-Bootsektor ermitteln<a class="headerlink" href="#GRUB-Version-in-MBR-oder-Partitions-Bootsektor-ermitteln">¶</a></h4><p>
Die Informationen über die installierte GRUB-Version sind im MBR bzw. Partitions-Bootsektor in den zwei Byte ab Adresse <code class="notranslate">0x80</code> abgelegt.</p><div class="section_4"><h5 id="Manuelles-Ermitteln-der-GRUB-Version">Manuelles Ermitteln der GRUB-Version<a class="headerlink" href="#Manuelles-Ermitteln-der-GRUB-Version">¶</a></h5><p>
Der folgende Befehl gibt den Wert der beiden Bytes ab Adresse 0x80 aus:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hexdump -v -s 0x80 -n  2 -e '2/1 "%x" "\n"'  /dev/sdXY </pre></div></div><p>
Dem ausgegeben Wert kann über die folgende Tabelle die entsprechende Boote-Code-Version zugeordnet werden. Die Tabelle stammt aus dem <a class="crosslink" href="#Umfassende-Analyse-mittels-Boot-Info-Script">Boot Info Script</a>:</p><table style="width: 75%"><tr style="background-color: #E2C890"><td style="width: 15%"><strong>Byte-Wert</strong> </td><td> <strong>MBR bzw. Partitions-Bootsektor deutet auf folgenden Bootcode hin</strong> </td></tr><tr><td colspan="2" style="text-align: left; background-color: #F9EAAF"> <strong>GRUB-Byte-Kennungen</strong> </td></tr><tr><td> 5272 </td><td> GRUB (Legacy) </td></tr><tr><td> aa75 </td><td> GRUB (Legacy) </td></tr><tr><td> 48b4 </td><td> GRUB 2 (Version 1.96) </td></tr><tr><td> 7c3c </td><td> GRUB 2 (Version 1.97 oder 1.98) </td></tr><tr><td>  020 </td><td> GRUB 2 (Version 1.99) </td></tr><tr><td>  488 </td><td> Grub 2 core.img </td></tr><tr><td> 31d2 </td><td> Grub 2 core.img </td></tr><tr><td colspan="2" style="text-align: left; background-color: #F9EAAF"> <strong>Byte-Kennungen anderer Systeme</strong></td></tr><tr><td>  069 </td><td> ISOhybrid (Syslinux 3.72-3.73) </td></tr><tr><td>  10f </td><td> HP Recovery </td></tr><tr><td>  19d </td><td> BSD4.4: Fat32 </td></tr><tr><td>  211 </td><td> Dell Utility: Fat16 </td></tr><tr><td>  689 </td><td> Syslinux 3.00-3.52 </td></tr><tr><td>  734 </td><td> Dos_1.0 </td></tr><tr><td>  745 </td><td> Vista: Fat 32 </td></tr><tr><td>  89e </td><td> MSDOS5.0: Fat 16 </td></tr><tr><td>  8cd </td><td> Windows XP </td></tr><tr><td>  b60 </td><td> Dell Utility: Fat16 </td></tr><tr><td>  bd0 </td><td> MSWIN4.1: Fat 32 </td></tr><tr><td>  e00 </td><td> Dell Utility: Fat16 </td></tr><tr><td>  fb6 </td><td> ISOhybrid mit unterstützter Partitionierung (Syslinux 3.82-3.86) </td></tr><tr><td> 2a00 </td><td> ReactOS </td></tr><tr><td> 2d5e </td><td> Dos_1.1 </td></tr><tr><td> 31c0 </td><td> Syslinux 4.03 oder höher </td></tr><tr><td> 3a5e </td><td> Recovery:Fat 32 </td></tr><tr><td> 407c </td><td> ISOhybrid (Syslinux 3.82-4.04) </td></tr><tr><td> 4216 </td><td> Grub4Dos: NTFS </td></tr><tr><td> 4445 </td><td> DEll Restore: Fat32 </td></tr><tr><td> 55aa </td><td> Windows Vista/7 </td></tr><tr><td> 55cd </td><td> Fat32 </td></tr><tr><td> 5626 </td><td> Grub4Dos: EXT2/3/4 </td></tr><tr><td> 638b </td><td> Freedos: FAT32 </td></tr><tr><td> 6616 </td><td> Fat16 </td></tr><tr><td> 696e </td><td> Fat16 </td></tr><tr><td> 6974 </td><td> BootIt: Fat16 </td></tr><tr><td> 6f65 </td><td> BootIt: Fat16 </td></tr><tr><td> 6f6e </td><td> MSWIN4.1: Fat 32 </td></tr><tr><td> 6f74 </td><td> Fat32 </td></tr><tr><td> 6f6e </td><td> MSWIN4.1: Fat 32 </td></tr><tr><td> 74ef </td><td> IBM ThinkPad von ca. 2006: bootet versteckte (Typ 0x12) FAT32-Recovery </td></tr><tr><td> 7815 </td><td> Syslinux 3.53-3.86 oder Fat32 </td></tr><tr><td> 7cc6 </td><td> MSWIN4.1: Fat 32, Win_98 </td></tr><tr><td> 7e1e </td><td> Grub4Dos: FAT12/16 </td></tr><tr><td> 8a56 </td><td> Acronis SZ: Fat32 </td></tr><tr><td> 83e1 </td><td> ISOhybrid mit unterstützter Partitionierung (Syslinux 4.00-4.04) </td></tr><tr><td> 8ec0 </td><td> Windows XP </td></tr><tr><td> 8ed0 </td><td> DEll Recovery: Fat32 </td></tr><tr><td> b106 </td><td> Syslinux 4.00-4.02 </td></tr><tr><td> b600 </td><td> Dell Utility: FAT16 </td></tr><tr><td> b6c6 </td><td> ISOhybrid mit unterstützter Partitionierung (Syslinux 3.81) </td></tr><tr><td> b6d1 </td><td> Windows XP: FAT32 </td></tr><tr><td> e2f7 </td><td> FAT32, nicht bootbar </td></tr><tr><td> e879 </td><td> ISOhybrid (Syslinux 3.74-3.80) </td></tr><tr><td> e9d8 </td><td> Windows Vista/7 </td></tr><tr><td> f6f6 </td><td> durch <code class="notranslate">fdisk</code> entferntes Betriebssystem </td></tr><tr><td> fa33 </td><td> Windows XP </td></tr><tr><td> fbc0 </td><td> ISOhybrid (Syslinux 3.81) </td></tr><tr><td> 8053 </td><td> LILO </td></tr></table><p>
</p></div><div class="section_4"><h5 id="GRUB-Installation-in-MBR-und-Bootsektor-automatisch-aufspueren">GRUB-Installation in MBR und Bootsektor automatisch aufspüren<a class="headerlink" href="#GRUB-Installation-in-MBR-und-Bootsektor-automatisch-aufspueren">¶</a></h5><p>
Die ganze Prozedur kann auch mit einem der folgenden Befehle automatisiert werden. Diesen bitte bei Bedarf in das Terminal kopieren:</p><ul><li><p>Die eingehängten Partitionen werden aus der <strong>/proc/partitions</strong> ausgelesen und in einer <code class="notranslate">for</code>-Schleife an <a class="crosslink" href="#Manuelles-Ermitteln-der-GRUB-Version"><code class="notranslate">hexdump</code></a> übergeben und der Byte-Wert gelistet: </p><div class="bash"><div class="contents"><pre class="notranslate">for d in $(sed -ne 's/^.*\(sd.*\)/\1/p' /proc/partitions);do echo -e "$d\t ID: $(sudo hexdump -v -s 0x80 -n 2 -e '2/1 "%x" "\n"' /dev/$d)";done;echo -e "\t(G1) 5272/aa75 (G2) 48b4/7c3c/020 (Core) 488/31d2" </pre></div></div></li></ul><p>
</p><ul><li><p>Beim nächsten Befehl handelt es sich um eine simple Erweiterung des Einzeilers aus dem Skript <a class="internal" href="./skripte/grub_finden.html">GRUB finden</a>. Im wesentlichen setzt sich der Befehl aus den Kommandos <code class="notranslate">fdisk</code> und <code class="notranslate">hexdump</code> zusammen. Die abschließende <code class="notranslate">case</code> Anweisung, wertet die <code class="notranslate">hexdump</code> Ausgabe dann aus, das Ergebnis wird dann mittels <code class="notranslate">echo</code> im Terminal ausgegeben. <code class="notranslate">xargs</code> erlaubt es dabei, die zuvor ermittelte Zeichenkette per Variable an den hinter <code class="notranslate">-c</code> in <code class="notranslate">" "</code> angegebenen Befehl zu übergeben. Die dazwischen eingebetteten Kommandos <code class="notranslate">egrep</code>, <code class="notranslate">sed</code> und <code class="notranslate">awk</code> dienen dazu, die <code class="notranslate">fdisk</code>-Ausgabe alleine auf die Zeichenkette der Form <code class="notranslate">/dev/sdXY</code> zurecht zu schneiden: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo fdisk -l 2&gt;/dev/null | egrep "Disk /|/dev/" | sed "s#^/dev/#Part /dev/#" | awk '{print $2}' | sed 's/://' | xargs -n1 -IX sudo sh -c "hexdump -v -s 0x80 -n  2 -e '2/1 \"%x\" \"\\n\"' X | xargs -n1 -IY sh -c \"case  \"Y\" in '48b4') echo X: GRUB 2 v1.96 ;; 'aa75' | '5272') echo X: GRUB Legacy ;; '7c3c') echo X: GRUB 2 v1.97 oder v1.98 ;; '020') echo X: GRUB 2 v1.99 ;; *) echo X: Kein GRUB Y ;; esac\"" </pre></div></div></li></ul><p>
</p></div></div></div></div><div class="section_1"><h2 id="GRUB-2-Umgebung-mit-der-Kommandozeile-analysieren">GRUB-2-Umgebung mit der Kommandozeile analysieren<a class="headerlink" href="#GRUB-2-Umgebung-mit-der-Kommandozeile-analysieren">¶</a></h2><p>
Mit den Kommandozeilenbefehlen der <a class="internal" href="./grub_2/shell.html">GRUB-2-Shell</a> lassen sich die für einen erfolgreichen Systemstart erforderlichen Informationen und Einstellungen leicht zusammentragen.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die in diesem Abschnitt aufgeführten Befehle funktionieren in dieser Form nur in der GRUB 2 <a class="internal" href="./grub_2/shell.html#Kommandozeile">Kommandozeile</a> und nicht etwa im <a class="internal" href="./terminal.html">Terminal</a> von Ubuntu.
</p></div></div><div class="section_2"><h3 id="Datentraeger-Analyse">Datenträger-Analyse<a class="headerlink" href="#Datentraeger-Analyse">¶</a></h3><p>
Um ein System erfolgreich von der Kommandozeile starten zu können, ist es sinnvoll, sich zunächst einen Überblick über die von GRUB 2 erkannten Datenträger zu verschaffen. Der dafür wesentliche Befehl ist <code class="notranslate">ls</code>. Verwendet man ihn zusammen mit der Tabulatortaste 
<span class="key">Tab ⇆</span> , so erlangt man mit wenigen Befehlseingaben eine Liste der zugreifbaren Datenträger und Partitionen:</p><ul><li><p>Datenträger auflisten: </p><div class="bash"><div class="contents"><pre class="notranslate">ls </pre></div></div></li><li><p>Partitionen auf einer Festplatte auflisten: </p><div class="bash"><div class="contents"><pre class="notranslate">ls (hdX, </pre></div></div><p> und Drücken der Tabulatortaste 
<span class="key">Tab ⇆</span> . <code class="notranslate">X</code> muss dabei durch eine Nummer eines Datenträgers ersetzt werden, die zuvor mit <code class="notranslate">ls</code> ermittelt wurde.</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Startdateien-auffinden">Startdateien auffinden<a class="headerlink" href="#Startdateien-auffinden">¶</a></h3><p>
Grundvoraussetzung für das Starten des Systems ist, dass man den Datenträger kennt, auf dem sich die Startdateien des jeweiligen Betriebssystems befinden. Diese lassen sich mit dem Befehl <code class="notranslate">search -f</code> auffinden. <code class="notranslate">search</code> liefert dabei jeweils die GRUB-Bezeichnung des betreffenden Datenträgers als Ergebnis:</p><ul><li><p>Datenträger mit Linux-Startdateien ermitteln: </p><div class="bash"><div class="contents"><pre class="notranslate">search -f /vmlinuz </pre></div></div></li><li><p>Datenträger mit der Datei <strong>grub.cfg</strong> finden: </p><div class="bash"><div class="contents"><pre class="notranslate">search -f /boot/grub/grub.cfg </pre></div></div></li><li><p>Datenträger mit Windows-XP-Startdateien ermitteln: </p><div class="bash"><div class="contents"><pre class="notranslate">search -f /ntldr </pre></div></div></li><li><p>Datenträger mit Windows-Vista- oder Windows-7-Startdateien ermitteln: </p><div class="bash"><div class="contents"><pre class="notranslate">search -f /bootmgr </pre></div></div></li></ul><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Um die Startdateien auf einer Windows-Partition suchen zu können, muss das Modul <code class="notranslate">ntfs</code> installiert sein, welches mit dem Befehl <code class="notranslate">insmod ntfs</code> eingerichtet werden kann.</p><p>Wird eine Datei auf dem Datenträger nicht gefunden, so wird eine Fehlermeldung der Form <code class="notranslate">error: no such device: ...</code> ausgegeben.
</p></div></div><p>Der Befehl <code class="notranslate">search -f</code> findet keine Namensteile und unterstützt keine Wildcards. Bei verschlüsselten Systemen müsste man beispielsweise nach </p><div class="bash"><div class="contents"><pre class="notranslate">search -f /vmlinuz-4.4.0-45-generic </pre></div></div><p>suchen, da der Link vmlinuz sich nicht auf der unverschlüsselten Boot-Partition befindet.</p><p>Man kann aber mit Hilfe des Befehls <code class="notranslate">ls</code> und  Drücken der Tabulatortaste 
<span class="key">Tab ⇆</span>  sich den jeweiligen Verzeichnisinhalt anzeigen lassen. Ein </p><div class="bash"><div class="contents"><pre class="notranslate">ls (hd0,1)/ </pre></div></div><p> gefolgt von 2 x  
<span class="key">Tab ⇆</span>  zeigt alle vorhandenen Dateien und Verzeichnisse auf <strong>/dev/sda1</strong>. So kann man auch den kompletten Namen der vmlinuz-Datei ermitteln.</p></div><div class="section_2"><h3 id="GRUB-2-Umgebungsvariablen-ueberpruefen">GRUB-2-Umgebungsvariablen überprüfen<a class="headerlink" href="#GRUB-2-Umgebungsvariablen-ueberpruefen">¶</a></h3><p>
Die den Variablen in der GRUB-2-Umgebung derzeit zugewiesenen Werte können mit Ausführen von</p><div class="bash"><div class="contents"><pre class="notranslate">set </pre></div></div><p>
überprüft werden. Für den Systemstart sind dabei in erster Linie die Werte von <code class="notranslate">root</code> und <code class="notranslate">prefix</code> von Bedeutung. Mit dem Befehl </p><div class="bash"><div class="contents"><pre class="notranslate">help </pre></div></div><p>
kann man sich eine Liste aller Befehle in der Grub-Shell anzeigen lassen. Mit dem Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">pager=1 </pre></div></div><p>
sorgt man dafür, dass jeweils am Ende einer Bildschirmseite die Ausgabe angehalten wird, so dass die ersten Zeile nicht ungelesen aus dem Bild rollen.</p></div></div><div class="section_1"><h2 id="Umfassende-Analyse-mittels-Boot-Info-Script">Umfassende Analyse mittels Boot Info Script<a class="headerlink" href="#Umfassende-Analyse-mittels-Boot-Info-Script">¶</a></h2><p>
Alle möglichen Informationen rund um das Booten können auch bequem automatisch mittels des <a class="interwiki interwiki-sourceforge" href="http://sourceforge.net/projects/bootinfoscript">Boot Info Scripts</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> zusammengetragen werden.</p><p>Das Skript kann aus den <em>universe</em>-Quellen installiert werden: <sup><a href="#source-3">[3]</a></sup>
</p><ul><li><p><strong>boot-info-script</strong> (<em>universe</em>)</p></li><li><p><strong>cl-awk</strong> (<em>universe</em>, für komplexere Verarbeitungsfähigkeiten)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install boot-info-script cl-awk </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install boot-info-script cl-awk </pre></div></div><p>
</p></div></div><p>Gestartet wird die Analyse mit folgendem Befehl: <sup><a href="#source-2">[2]</a></sup>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo bootinfoscript </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Dabei wird im aktuellen Verzeichnis das Ergebnis in einer Datei <em>RESULTS.txt</em> gespeichert. Diese Datei ist gemeint, wenn im Forum</p><p> "<em>die Ausgabe des <a class="internal" href="./grub-umgebung_analysieren.html#Umfassende-Analyse-mittels-Boot-Info-Script">Boot-Info-Scripts</a> im <a class="internal" href="./forum/syntax.html#Syntaxelemente">Codeblock</a> posten</em>"</p><p>gewünscht wird. Mit Rücksicht auf die smartphone-Nutzer sollte man die Datei besser als Anhang hochladen
</p></div></div><div class="section_2"><h3 id="manuelle-Installation">manuelle Installation<a class="headerlink" href="#manuelle-Installation">¶</a></h3><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">wget -P ~/boot-info-script http://sourceforge.net/projects/bootinfoscript/files/bootinfoscript/0.61/bootinfoscript-061.tar.gz
tar xzC ~/boot-info-script/ -f ~/boot-info-script/bootinfoscript-061.tar.gz
sudo bash ~/boot-info-script/bootinfoscript </pre></div></div><p>
Dabei wird das Installationsarchiv heruntergeladen, entpackt und anschließend das Skript ausgeführt. Das Ergebnis der Analyse wird in der Datei <strong>~/boot-info-script/RESULTS.txt</strong> gespeichert, Verwendung wie zuvor im Hinweis beschrieben.</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="./grub_2/problembehebung.html">GRUB-2-Probleme und Lösungen</a></p></li><li><p><a class="internal" href="./grub_2.html">GRUB-2-Übersicht</a></p></li><li><p><a class="internal" href="./grub_2/installation.html">GRUB-2-Installation</a></p></li><li><p><a class="internal" href="./grub_2/konfiguration.html">GRUB-2-Konfiguration</a></p></li><li><p><a class="internal" href="./grub_2/skripte.html">GRUB-2-Skripte</a></p></li><li><p><a class="internal" href="./grub_2/reparatur.html">GRUB-2-Reparatur</a></p></li><li><p><a class="internal" href="./grub_2/shell.html">GRUB-2-Shell</a></p></li><li><p><a class="internal" href="./grub_2/aussehen.html">GRUB 2 optisch anpassen</a></p></li><li><p><a class="internal" href="./grub_2/terminalbefehle.html">GRUB-2-Terminalbefehle</a></p></li><li><p><a class="internal" href="./grub_2/grundlagen.html">GRUB-2-Grundlagen</a></p></li><li><p><a class="interwiki interwiki-sourceforge" href="http://sourceforge.net/projects/bootinfoscript">Boot Info Script</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./grub-umgebung_analysieren/a/revision/945206.html">Diese Revision</a> wurde am 30. November 2017 18:17 von <a href="https://ubuntuusers.de/user/tomtomtom/">tomtomtom</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./grub-umgebung_analysieren.html">GRUB-Umgebung analysieren</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>