<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>sudo › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./sudo.html">sudo</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/sudo">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./sudo/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./sudo/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./sudo/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./sudo/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./sudo/a/backlinks.html">sudo</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./benutzer_und_gruppen.html">Rechte von Benutzern und Gruppen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a>, <em>optional</em> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#root-bei-grafischen-Programmen">root bei grafischen Programmen
</a></li><li><a class="crosslink" href="#Der-Benutzer-root">Der Benutzer root
</a></li><li><a class="crosslink" href="#root-im-Terminal">root im Terminal
</a></li><li><a class="crosslink" href="#Programme-im-Kontext-anderer-Benutzer-ausfuehren">Programme im Kontext anderer Benutzer ausf...</a></li><li><a class="crosslink" href="#Sudo-in-einem-Skript-verwenden">Sudo in einem Skript verwenden
</a></li><li><a class="crosslink" href="#Zusammenfassung">Zusammenfassung
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>
<a class="crosslink anchor" href="#Sudo-Der-Standard-unter-Ubuntu" id="Sudo-Der-Standard-unter-Ubuntu"></a>
Der Befehl <code class="notranslate">sudo</code> kann Programmaufrufen vorangestellt werden. Er ermöglicht berechtigten Benutzern, das Programm im Namen und mit den Rechten eines anderen Benutzers auszuführen. Beispielsweise um Aufgaben auszuführen, die <a class="internal" href="./administrator.html">Administratoren</a> vorbehalten sind:</p><ul><li><p>Programme installieren (<code class="notranslate">sudo apt-get install ...</code>)</p></li><li><p>Systemkonfigurationen ändern (<code class="notranslate">sudo nano /etc/fstab</code>)</p></li></ul><p>
Sudo fragt vor der Ausführung des Programms unter einem anderem Namen nach dem Passwort des aufrufenden Benutzers. Damit wird überprüft, ob dieser den Befehl selbst eingegeben hat. Der Kreis der berechtigten Benutzer ist in der Datei <strong>/etc/sudoers</strong> festgelegt. Standardmäßig wird als Ziel-Benutzer <code class="notranslate">root</code> angenommen.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Erweiterte Rechte mittels der hier beschriebenen Verfahren bitte nur verwenden, wenn eine Aufgabe dies wirklich erfordert, die Programmausführung also zum Beispiel mit Root-Rechten erfolgen muss. Änderungen an Systemdateien sollte man mit Bedacht vornehmen und vorher eine Sicherungskopie anlegen. Eine falsche Verwendung von sudo kann das System unbrauchbar machen.
</p></div></div><p>Unter Ubuntu wird in der <strong>/etc/sudoers</strong> standardmäßig allen Mitgliedern der <a class="internal" href="./benutzer_und_gruppen.html">Gruppe</a> <sup><a href="#source-2">[2]</a></sup> <code class="notranslate">sudo</code> erlaubt, zum Benutzer root zu werden und damit Rootrechte zu erhalten. Der oder die bei der Installation angelegten Benutzer gehört standardmäßig der Gruppe <code class="notranslate">sudo</code> an. Näheres zur Konfigurationsdatei <strong>/etc/sudoers</strong> unter <a class="internal" href="./sudo/konfiguration.html">sudo/Konfiguration</a>.</p><p><a class="crosslink anchor" href="#sudo-Eigenheiten" id="sudo-Eigenheiten"></a>
In Desktopumgebungen wie <a class="internal" href="./gnome.html">GNOME</a> oder <a class="internal" href="./kde.html">KDE</a> werden für bestimmte Aufgaben teilweise automatisch Rootrechte für ein bestimmtes Programm angefordert. So wird man z.B. für eine Programminstallation automatisch nach seinem Passwort gefragt, damit <a class="internal" href="./paketverwaltung.html">APT</a> Rootrechte erhält und das Programm installieren kann. Sudo braucht dann vielfach gar nicht mehr manuell aufgerufen zu werden.</p><p>
</p><table style="float: right; clear: left; margin-top: 0px; border: none"><tr class="titel"><td> <img alt="./sandwich.png" class="image-default" src="./_/bb41436c62b8bfbd9338e88881e7f327ffc3c3a3.png"/></td></tr><tr class="normal"><td style="text-align: center; width: 350px"> <a class="external" href="https://xkcd.com/149/" rel="nofollow">xkcd.com</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> (CC-BY-NC 2.5)</td></tr></table><p>
</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
sudo ist essentieller Bestandteil jeder Ubuntu-Installation und sollte auf gar keinen Fall entfernt werden. Es ist im Paket</p><ul><li><p><strong>sudo</strong></p></li></ul><p>
enthalten. Dagegen fehlt ab <a class="internal" href="./saucy.html">Ubuntu 13.10</a> das Programm <strong>gksudo</strong> und muss zuerst installiert <sup><a href="#source-1">[1]</a></sup> werden:</p><ul><li><p><strong>gksu</strong> (ab Ubuntu 13.10 in <em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install gksu </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install gksu </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="root-bei-grafischen-Programmen">root bei grafischen Programmen<a class="headerlink" href="#root-bei-grafischen-Programmen">¶</a></h2><p>
Möchte man grafische Programme (z.B. <a class="internal" href="./gedit.html">gedit</a> oder <a class="internal" href="./kate.html">Kate</a>) als <code class="notranslate">root</code> ausführen, sind je nach Desktop eigene Befehle vorgesehen:</p><p>
</p><table><tr class="titel"><td colspan="4">normale Verwendung </td></tr><tr class="kopf"><td>Distribution </td><td> Befehl </td><td> Beispiel </td><td> Anmerkung </td></tr><tr><td> Ubuntu (Unity/GNOME 3) </td><td style="white-space: nowrap">gksudo BEFEHL </td><td class="befehl" style="white-space: nowrap">gksudo gedit </td><td> Durch Druck von 
<span class="key">Alt</span>  + 
<span class="key">F2</span>  wird eine Eingabezeile geöffnet, in die der Befehl getippt werden kann. Alternativ kann auch ein grafisches Terminal verwendet werden. </td></tr><tr><td> Kubuntu (KDE) </td><td style="white-space: nowrap">kdesudo BEFEHL </td><td class="befehl" style="white-space: nowrap">kdesudo kate </td><td> Durch Druck von 
<span class="key">Alt</span>  + 
<span class="key">F2</span>  wird <a class="internal" href="./krunner.html">KRunner</a> geöffnet, in dessen Eingabezeile der Befehl getippt werden kann. Alternativ kann auch ein grafisches Terminal verwendet werden. </td></tr><tr><td> Lubuntu (LXDE) </td><td style="white-space: nowrap">gksudo BEFEHL </td><td class="befehl" style="white-space: nowrap">gksudo leafpad </td><td> Zur Verwendung von 
<span class="key">Alt</span>  + 
<span class="key">F2</span>  s.o. </td></tr><tr><td> Ubuntu MATE </td><td style="white-space: nowrap">gksudo BEFEHL </td><td class="befehl" style="white-space: nowrap">gksudo pluma </td><td> Zur Verwendung von 
<span class="key">Alt</span>  + 
<span class="key">F2</span>  s.o. </td></tr><tr><td> Xubuntu (Xfce) </td><td style="white-space: nowrap">gksudo BEFEHL </td><td class="befehl" style="white-space: nowrap">gksudo mousepad </td><td> Zur Verwendung von 
<span class="key">Alt</span>  + 
<span class="key">F2</span>  s.o. </td></tr><tr><td> Alle </td><td style="white-space: nowrap">sudo -H BEFEHL </td><td class="befehl" style="white-space: nowrap">sudo -H nano </td><td> Diese Form eignet sich insbesondere für Terminalbefehle. In Fällen, in denen keine grafische Oberfläche verfügbar ist, ist sie sogar unumgänglich. </td></tr></table><p>
Zwei Eigenheiten von <code class="notranslate">sudo</code> können zu Problemen führen: 
</p><ol class="arabic"><li><p>Der Befehl <code class="notranslate">sudo</code> ändert die Umgebungsvariable <code class="notranslate">$HOME</code> standardmäßig nicht auf den entsprechenden Pfad zum Ziel-Benutzer (siehe auch <a class="crosslink" href="#Zusammenfassung">Zusammenfassung</a>). Startet man Programme mit <code class="notranslate">sudo</code>, besteht die Gefahr, dass Konfigurationsdateien mit falschen Rechten im Heimatverzeichnis des ursprünglichen Benutzers erstellt werden. Startet dieser das Programm später unter seinem eigenen Benutzer - also ohne <code class="notranslate">sudo</code> - so kann er die Konfiguration nur noch lesend oder eventuell gar nicht mehr öffnen (<a class="internal" href="./homeverzeichnis.html#Rechte-korrigieren">Reparatur hier</a>). Daher sollte <code class="notranslate">sudo</code> immer mit der Option <code class="notranslate">-H</code> verwendet werden. Dies gilt auch bei Systembefehlen, die keine Konfigurationsdateien unter <code class="notranslate">$HOME</code> ablegen. Die grafischen <code class="notranslate">sudo</code>-Alternativen leiden nicht unter diesem Problem: Dort wird die Umgebungsvariable <code class="notranslate">$HOME</code> umgestellt.</p></li><li><p>Grafische Programme lassen sich in manchen Desktopumgebungen mit <code class="notranslate">sudo -H</code> nicht aus einem Terminal starten. Dies liegt daran, dass die Grafikumleitung nicht vollständig konfiguriert wird (<a class="interwiki interwiki-wikipedia_en" href="https://en.wikipedia.org/wiki/Xauthority">Xauthority</a>). Da <code class="notranslate">sudo -H</code> also nicht immer funktioniert und auch keine grafische Passwortabfrage erfolgt, sollten grafische Anwendungen (unter anderem Benutzer) grundsätzlich über die grafischen Alternativen (wie gksudo/kdesudo) gestartet werden.</p></li></ol><p>
<a class="crosslink anchor" href="#root-der-Standard-bei-Linux" id="root-der-Standard-bei-Linux"></a></p></div><div class="section_1"><h2 id="Der-Benutzer-root">Der Benutzer root<a class="headerlink" href="#Der-Benutzer-root">¶</a></h2><p>
Standardmäßig existiert unter Linux immer ein Konto für den Benutzer <code class="notranslate">root</code> mit der User-ID 0. Dies ist ein Systemkonto mit vollem Zugriff auf das gesamte System und damit auch auf alle Dateien und Einstellungen aller Benutzer.</p><p>Bei Ubuntu wird dem Benutzer <code class="notranslate">root</code> allerdings kein Passwort zugewiesen. Dadurch kann sich niemand unter dem Namen "root" anmelden.</p><p><a class="crosslink anchor" href="#root-HOME" id="root-HOME"></a>
</p><div class="section_2"><h3 id="Das-HOME-Verzeichnis-von-root">Das HOME-Verzeichnis von root<a class="headerlink" href="#Das-HOME-Verzeichnis-von-root">¶</a></h3><p>
Jeder reale Benutzer bekommt ein eigenes <a class="internal" href="./homeverzeichnis.html">Homeverzeichnis</a> unter dem Verzeichnis <strong>/home</strong> mit seinem Benutzernamen. Das Homeverzeichnis von <code class="notranslate">root</code> ist jedoch <strong>/root</strong>, damit es auch zur Verfügung steht, falls <strong>/home</strong> in einem separaten Dateisystem liegt und dieses nicht eingebunden ist.</p></div></div><div class="section_1"><h2 id="root-im-Terminal">root im Terminal<a class="headerlink" href="#root-im-Terminal">¶</a></h2><p>
Sind für einen <a class="internal" href="./terminal.html">Terminal</a>-Befehl Root-Rechte erforderlich, so reicht es, dem auszuführenden Befehl das Kommando <code class="notranslate">sudo</code> voranzustellen. Nach der Eingabe wird man nach seinem Passwort gefragt. Dieses ist "blind" einzugeben. Es erscheinen keine Sternchen oder ähnliches auf dem Bildschirm, sondern einfach gar nichts (das kann aber geändert werden, siehe <a class="internal" href="./sudo/konfiguration.html#Visuelles-Feedback-bei-Passworteingabe">Visuelles Feedback</a>). Beispiel:</p><pre class="notranslate">Benutzer@Desktop:~$ sudo blkid
[sudo] password for Benutzer:
/dev/sda1: UUID="8688C7BE88C7AACF" LABEL="WinSystem" TYPE="ntfs"
/dev/sda5: LABEL="DATEN" UUID="08A8-7B2C" TYPE="vfat"
[...]</pre><p>Nach dem Eingeben des Passworts ist dies für die nächsten 15 Minuten bei erneuter Verwendung von <code class="notranslate">sudo</code> in diesem Terminal nicht mehr notwendig (kann ebenfalls angepasst werden, siehe <a class="internal" href="./sudo/konfiguration.html#Administrator-auf-Zeit">Administrator auf Zeit</a>). Die erneute Eingabe des Passwortes kann aber auch vorzeitig durch Angabe der Option <code class="notranslate">-k</code> erzwungen werden. Beispiel:</p><pre class="notranslate">Benutzer@Desktop:~$ sudo mkdir /media/test
[sudo] password for Benutzer:				#Passwort erforderlich
Benutzer@Desktop:~$ sudo mkdir /media/test2		#Passwort nicht mehr erforderlich
Benutzer@Desktop:~$ sudo rmdir /media/test2		#Passwort nicht mehr erforderlich
Benutzer@Desktop:~$ sudo -k
Benutzer@Desktop:~$ sudo rmdir /media/test 		
[sudo] password for Benutzer:				#Passwort erforderlich, selbst vor Ablauf der 15 Minuten</pre><p>Diese Art der Verwendung bietet einige Vorteile: Rootrechte werden nur für die Dauer des jeweiligen Befehls angefordert. Bei mehreren Befehlen kann individuell festgelegt werden, welche davon mit erweiterten Rechten ablaufen.</p><div class="section_2"><h3 id="Rootshell">Rootshell<a class="headerlink" href="#Rootshell">¶</a></h3><p>
Für größere administrative Aufgaben kann das ständige Voranstellen von <code class="notranslate">sudo</code> auch hinderlich sein. Um länger als <code class="notranslate">root</code> zu arbeiten - sprich mehrere Befehle hintereinander ausführen zu können, ohne immer wieder <code class="notranslate">sudo</code> eingeben zu müssen - kann man in eine Rootshell wechseln. Nach der Eingabe <sup><a href="#source-3">[3]</a></sup> von</p><div class="bash"><div class="contents"><pre class="notranslate">sudo -i </pre></div></div><p>
werden alle folgenden Befehle mit Rootrechten ausgeführt, bis man diese Rootshell mit</p><div class="bash"><div class="contents"><pre class="notranslate">exit </pre></div></div><p>
verlässt. Innerhalb dieser Shell muss kein <code class="notranslate">sudo</code> mehr verwendet werden. Die Dauer der Rootshell selbst ist nicht beschränkt. Es liegt in der Verantwortung des Anwenders, diese zu verlassen. Beispiel:</p><pre class="notranslate">Benutzer@Desktop:~$ sudo -i
[sudo] password for Benutzer: 
root@Desktop:~# mkdir /media/test
root@Desktop:~# rmdir /media/test
root@Desktop:~# exit
Abgemeldet
Benutzer@Desktop:~$ </pre><p>Den dauerhaften Wechsel kann man deutlich am veränderten Prompt "<code class="notranslate">root@Desktop:~#</code>" erkennen. Abschließend signalisiert das normale Prompt das Ende der Rootshell.</p></div><div class="section_2"><h3 id="Editieren-von-Dateien-unter-Rootrechten">Editieren von Dateien unter Rootrechten<a class="headerlink" href="#Editieren-von-Dateien-unter-Rootrechten">¶</a></h3><p>
Zum sicheren Editieren von Dateien wird statt <code class="notranslate">sudo nano Datei</code> besser
</p><div class="bash"><div class="contents"><pre class="notranslate">sudoedit DATEI </pre></div></div><p> verwendet. Der gewünschte Editor kann vorher über die Umgebungsvariable <code class="notranslate">EDITOR</code> festgelegt werden. Wird dadurch ein grafischer Editor festgelegt, ist zusätzlich der Home-Ordner des Zielnutzers zu setzen (<a class="crosslink" href="#Grafische-Programme-kdesudo">siehe</a>):
</p><div class="bash"><div class="contents"><pre class="notranslate">sudoedit -H DATEI </pre></div></div></div></div><div class="section_1"><h2 id="Programme-im-Kontext-anderer-Benutzer-ausfuehren">Programme im Kontext anderer Benutzer ausführen<a class="headerlink" href="#Programme-im-Kontext-anderer-Benutzer-ausfuehren">¶</a></h2><p>
Programme können auch unter dem Namen eines anderen 'regulären' Benutzers gestartet werden.</p><p><a class="crosslink anchor" href="#Terminal-sudo" id="Terminal-sudo"></a>
</p><div class="section_2"><h3 id="Terminalprogramme-und-Shellkommandos">Terminalprogramme und Shellkommandos<a class="headerlink" href="#Terminalprogramme-und-Shellkommandos">¶</a></h3><p>
Im Terminal kann ein Benutzerwechsel z.B. nützlich sein, um ein Skript in einer anderen Umgebung zu testen.</p><div class="section_3"><h4 id="Terminal-Ausfuehrung-durch-Benutzer-mit-Erlaubnis-in-etc-sudoers">Terminal - Ausführung durch Benutzer mit Erlaubnis in /etc/sudoers<a class="headerlink" href="#Terminal-Ausfuehrung-durch-Benutzer-mit-Erlaubnis-in-etc-sudoers">¶</a></h4><p>
<code class="notranslate">sudo</code> fragt immer nach dem Passwort des aufrufenden Benutzers. Ein Benutzerwechsel wird aber nur gestattet, wenn dies in <strong>/etc/sudoers</strong> erlaubt wurde. Dies ist standardmäßig nur für die Gruppe <code class="notranslate">sudo</code> ohne Einschränkungen der Fall. Die Option <code class="notranslate">-H</code> bewirkt, dass dann auch die Umgebungsvariabele <strong>$HOME</strong> auf das Home-Verzeichnis von <code class="notranslate">BENUTZERNAME</code> mitumzieht, was <a class="crosslink" href="#Grafische-Programme-kdesudo">für grafische Programme wichtig</a> ist.
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo -H -u BENUTZERNAME PROGRAMM  </pre></div></div><p><a class="crosslink anchor" href="#su" id="su"></a>
</p></div><div class="section_3"><h4 id="Terminal-Ausfuehrung-mit-Passwort-des-Zielbenutzers">Terminal - Ausführung mit Passwort des Zielbenutzers<a class="headerlink" href="#Terminal-Ausfuehrung-mit-Passwort-des-Zielbenutzers">¶</a></h4><p>
Wenn das Passwort des Zielbenutzers bekannt ist, aber man z.B. nicht zur Gruppe <code class="notranslate">sudo</code> gehört, kann der Befehl <code class="notranslate">su</code> genutzt werden.
</p><div class="bash"><div class="contents"><pre class="notranslate">su BENUTZERNAME -c PROGRAMM </pre></div></div><p>Für <code class="notranslate">BENUTZERNAME</code> den Anmeldenamen des anderen Benutzers eingeben. Man beachte, dass bei diesem Befehl nach dem Passwort des anderen Benutzers gefragt wird.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Rechteeinstellungen, die in der Datei <strong>/etc/sudoers</strong> vorgenommen wurden, haben bei <code class="notranslate">su</code> keine Wirkung.
</p></div></div></div></div><div class="section_2"><h3 id="Grafische-Programme">Grafische Programme<a class="headerlink" href="#Grafische-Programme">¶</a></h3><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Ein Terminalfenster, das unter einem anderen Namen läuft und in dem auch grafische Programme gestartet werden können, kann von Benutzern aus der Gruppe <code class="notranslate">sudo</code> per 
<span class="key">Alt</span>  + 
<span class="key">F2</span>  und Eingabe von "<code class="notranslate">gksudo 'gksu -u ZIELBENUTZER -w gnome-terminal</code>'" geöffnet werden. Wer nicht in der <code class="notranslate">sudo</code>-Gruppe ist, benötigt das Passwort des Zielbenutzers und muss das vorangestellte <code class="notranslate">gksudo</code> weglassen.
</p></div></div><p>Für grafische Programme kann ein Benutzerwechsel nützlich sein, um z.B. die Konfiguration von Programmen eines anderen Benutzers zu überprüfen oder das eigene EMail-Programm oder den Webbrowser in einer separaten Umgebung laufen zu lassen.</p><p><a class="crosslink anchor" href="#Grafische-Programme-kdesudo" id="Grafische-Programme-kdesudo"></a>
</p><div class="section_3"><h4 id="Grafisch-Ausfuehrung-durch-Benutzer-mit-Erlaubnis-in-etc-sudoers">Grafisch – Ausführung durch Benutzer mit Erlaubnis in /etc/sudoers<a class="headerlink" href="#Grafisch-Ausfuehrung-durch-Benutzer-mit-Erlaubnis-in-etc-sudoers">¶</a></h4><p>
Unter KDE:
</p><div class="bash"><div class="contents"><pre class="notranslate">kdesudo -u BENUTZERNAME PROGRAMM </pre></div></div><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p><code class="notranslate">kdesudo</code> fragt in diesem Fall nach dem Passwort des Zielbenutzers, man muss aber das eigene Passwort eingeben.
</p></div></div><p>Unter GNOME gibt es zur Zeit keinen funktionierenden analogen Befehl. Mit <code class="notranslate">gksudo</code> kann man grafische Anwendungen nur als Root starten (auch <code class="notranslate">sudo -H PROGRAMM</code> ist möglich). Ein Start im Kontext anderer Benutzer ist nicht möglich. Siehe: <a class="interwiki interwiki-bug" href="https://launchpad.net/bugs/275304">Bugreport</a>. Es muss also <code class="notranslate">gksu -w</code> (siehe <a class="crosslink" href="#Grafische-Programme-gksu-kdesu">Grafische Programme</a>) verwendet werden, um zu regulären Benutzern zu wechseln.</p><p><a class="crosslink anchor" href="#Grafische-Programme-gksu-kdesu" id="Grafische-Programme-gksu-kdesu"></a>
</p></div><div class="section_3"><h4 id="Grafisch-Ausfuehrung-mit-Passwort-des-Zielbenutzers">Grafisch - Ausführung mit Passwort des Zielbenutzers<a class="headerlink" href="#Grafisch-Ausfuehrung-mit-Passwort-des-Zielbenutzers">¶</a></h4><p>
Bei diesen Befehlen braucht der ausführende Benutzer nicht der Gruppe <code class="notranslate">sudo</code> anzugehören. Für <code class="notranslate">BENUTZERNAME</code> ist jeweils der Anmeldename des anderen Benutzers einzugeben.</p><p>Unter GNOME bzw. Xfce:
</p><div class="bash"><div class="contents"><pre class="notranslate">gksu -w -u BENUTZERNAME PROGRAMM </pre></div></div><p>Unter KDE:
</p><div class="bash"><div class="contents"><pre class="notranslate">/usr/lib/kde4/libexec/kdesu-distrib/kdesu -u BENUTZERNAME PROGRAMM  </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Bei den Befehlen, die den <code class="notranslate">su</code>-Mechanismus nutzen, haben Rechteeinstellungen, die in der Datei <strong>/etc/sudoers</strong> vorgenommen wurden, keine Auswirkungen, und es werden immer die Passwörter des Zielbenutzers abgefragt. Dabei ist zu beachten, das <code class="notranslate">gksu</code> nur mit der Option <code class="notranslate">-w</code> tatsächlich <code class="notranslate">su</code> nutzt, da es in Ubuntu standardmäßig <code class="notranslate">sudo</code> verwendet. Das KDE-Programm <code class="notranslate">kdesu</code> (sofern vorhanden) besitzt keine Option, um auf den <code class="notranslate">su</code>-Mechanismus umzuschalten, es muss stattdessen der vollständige Pfad zum Originalbefehl angegeben werden. Wird einfach nur <code class="notranslate">kdesu</code> aufgerufen, so wird das in Ubuntu veränderte <strong>/usr/bin/kdesu</strong> verwendet, das (wie <code class="notranslate">gksu</code> ohne Option <code class="notranslate">-w</code>) auf <code class="notranslate">sudo</code> zurückgreift.
</p></div></div></div></div></div><div class="section_1"><h2 id="Sudo-in-einem-Skript-verwenden">Sudo in einem Skript verwenden<a class="headerlink" href="#Sudo-in-einem-Skript-verwenden">¶</a></h2><p>
</p><div class="section_2"><h3 id="Das-Passwort-an-sudo-uebergeben">Das Passwort an sudo übergeben<a class="headerlink" href="#Das-Passwort-an-sudo-uebergeben">¶</a></h3><p>
Möchte man <code class="notranslate">sudo</code> in einem Skript benutzen und das Passwort über eine grafische Abfrage eingeben lassen, kann dies folgendermaßen geschehen: Der Befehl <code class="notranslate">gksu</code> öffnet die grafische Abfrage für das Passwort, und durch die Option <code class="notranslate">-p</code> wird das Passwort in stdout geschrieben. Die Option <code class="notranslate">-S</code> hinter dem <code class="notranslate">sudo</code>-Befehl liest das Passwort, welches per Pipe an <code class="notranslate">sudo</code> übergeben wird, von stdin wieder ein. Die Option <code class="notranslate">--</code> beendet das Einlesen von weiteren Argumenten. Dadurch können dem auszuführenden Befehl eigene Optionsschalter mitgegeben werden.
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#! /bin/bash</span>
gksu -p -m <span class="s2">"Bitte Passwort eingeben:"</span> <span class="p">|</span> sudo -S -s -- apt-get update
</pre></div>
</td></tr></table></div><p>
Alternativen zu <code class="notranslate">gksu</code> bieten beispielsweise die Programme <code class="notranslate">ssh-askpass</code>, <a class="internal" href="./zenity.html">Zenity</a> unter Gnome und <a class="internal" href="./kdialog.html">KDialog</a> unter KDE.</p><p>Außerdem kann <code class="notranslate">sudo</code> noch auf andere Weise konfiguriert werden, um ein externes Programm zur Passworteingabe zu benutzen, siehe dazu <a class="internal" href="./sudo/konfiguration.html#Visuelles-Feedback-bei-Passworteingabe">sudo/Konfiguration</a>.</p></div></div><div class="section_1"><h2 id="Zusammenfassung">Zusammenfassung<a class="headerlink" href="#Zusammenfassung">¶</a></h2><p>
</p><table><tr class="rowclass: titel"><td colspan="6" style="text-align: center"> Programme als anderer Benutzer ausführen </td></tr><tr class="rowclass: kopf"><td> Bei </td><td>  Befehl </td><td> Zweck </td><td> <code class="notranslate">$HOME</code> zeigt auf Verzeichnis von: </td><td> Kann standardmäßig benutzt werden: </td></tr><tr><td rowspan="6"> Kommandozeilen-Befehl/Programm </td><td> <code class="notranslate">sudo</code> </td><td> <a class="crosslink" href="#root-im-Terminal">führt einzelne Befehle als <code class="notranslate">root</code> aus</a> </td><td> "/eigenes HOME" </td><td> von Gruppe <code class="notranslate">sudo</code> </td></tr><tr><td> <code class="notranslate">sudo -H</code> </td><td> <a class="crosslink" href="#Terminal-Ausfuehrung-durch-Benutzer-mit-Erlaubnis-in-etc-sudoers">führt Befehl mit angepasstem <code class="notranslate">$HOME</code> aus</a> (empfohlen) </td><td> <strong>/root</strong> bzw. "/anderen Benutzer" </td><td> von Gruppe <code class="notranslate">sudo</code> </td></tr><tr><td> <code class="notranslate">sudo -u BENUTZER</code> </td><td> <a class="crosslink" href="#Terminal-Ausfuehrung-durch-Benutzer-mit-Erlaubnis-in-etc-sudoers">führt Befehl als anderer <code class="notranslate">BENUTZER</code> aus</a> </td><td> "/eigenes HOME" </td><td> von Gruppe <code class="notranslate">sudo</code> </td></tr><tr><td> <code class="notranslate">sudo -s</code> </td><td> startet mittels Variable <code class="notranslate">SHELL</code> definierte <a class="internal" href="./shell.html">Shell</a> </td><td> "/eigenes HOME" </td><td> von Gruppe <code class="notranslate">sudo</code> </td></tr><tr><td> <code class="notranslate">sudo -i</code> </td><td> <a class="crosslink" href="#Rootshell">startet interaktive shell</a> </td><td> <strong>/root</strong> bzw. "/anderen Benutzer" </td><td> von Gruppe <code class="notranslate">sudo</code> </td></tr><tr><td> <code class="notranslate">su</code> </td><td> <a class="crosslink" href="#Terminal-Ausfuehrung-mit-Passwort-des-Zielbenutzers">wechselt aktuellen Benutzer mit Passwort des Zielbenutzers</a> </td><td> <strong>/root</strong> bzw. "/anderen Benutzer" </td><td> bei Kenntnis des Passworts  </td></tr><tr><td rowspan="4"> grafisches Programm </td><td> <code class="notranslate">kdesudo</code> und <code class="notranslate">gksudo</code> </td><td> <a class="crosslink" href="#root-bei-grafischen-Programmen">führt Programm als root aus</a> </td><td> <strong>/root</strong> </td><td>von Gruppe <code class="notranslate">sudo</code> </td></tr><tr><td> <code class="notranslate">kdesudo -u</code> </td><td> <a class="crosslink" href="#Grafisch-Ausfuehrung-durch-Benutzer-mit-Erlaubnis-in-etc-sudoers">führt Programm als anderer Benutzer aus</a> (z.Zt. nur KDE) </td><td> "/anderen Benutzer" </td><td> von Gruppe <code class="notranslate">sudo</code> </td></tr><tr><td> <code class="notranslate">gksu -w -u</code> </td><td> <a class="crosslink" href="#Grafisch-Ausfuehrung-mit-Passwort-des-Zielbenutzers">führt Programm mit Passwort und Umgebung des Zielbenutzers aus</a> (Gnome/GTK) </td><td> "/anderen Benutzer" </td><td> bei Kenntnis des Passworts </td></tr><tr><td> <code class="notranslate">/usr/[...]/kdesu -u</code> </td><td> <a class="crosslink" href="#Grafisch-Ausfuehrung-mit-Passwort-des-Zielbenutzers">führt Programm mit Passwort und Umgebung des Zielbenutzers aus</a> (KDE) </td><td> "/anderen Benutzer" </td><td> bei Kenntnis des Passworts </td></tr></table></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><div class="section_2"><h3 id="Intern">Intern<a class="headerlink" href="#Intern">¶</a></h3><p>
</p><ul><li><p><a class="internal" href="./benutzer_und_gruppen.html">Benutzer und Gruppen</a> - Wichtige Informationen</p></li><li><p><a class="internal" href="./sudo/konfiguration.html">Konfiguration von sudo</a> - Weitere Einstellungen zur Benutzung des <code class="notranslate">sudo</code>-Befehls und damit verbundene Rechte</p></li><li><p><a class="internal" href="./policykit.html">PolicyKit</a> - verfeinerte Rechteverwaltung, wird zukünftig mehr und mehr in die Desktopumgebung eingebaut</p></li><li><p><a class="internal" href="./chown.html">chown</a> - Eigentümer und Gruppen von Dateien und Verzeichnissen ändern</p></li><li><p><a class="internal" href="./chmod.html">chmod</a> - Zugriffsrechte von Dateien und Verzeichnissen ändern</p></li></ul></div><div class="section_2"><h3 id="Extern">Extern<a class="headerlink" href="#Extern">¶</a></h3><p>
</p><ul><li><p><a class="interwiki interwiki-ubuntu_doc" href="https://help.ubuntu.com/community/RootSudo">Ubuntu Wiki</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Hinweise zu Sudo </p></li><li><p><a class="external" href="http://www.sudo.ws" rel="nofollow">Sudo Homepage</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li></ul><p>
</p></div></div></div>
<p class="meta">
<a href="./sudo/a/revision/945793.html">Diese Revision</a> wurde am 28. Dezember 2017 01:29 von <a href="https://ubuntuusers.de/user/BillMaier/">BillMaier</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./sudo.html">sudo</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>