<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>GRUB › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./grub.html">GRUB</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/GRUB">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./grub/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./grub/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./grub/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./grub/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./grub/a/backlinks.html">GRUB</a></h1>
<div id="page"><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Fehler bei der Konfiguration des Bootmanagers können zu einem unbenutzbaren System führen.
</p></div></div><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Der ab <a class="internal" href="./karmic_koala.html">Ubuntu 9.10</a> als Standard verwendete neue Bootloader <a class="internal" href="./grub_2.html">GRUB 2</a> wird in einem eigenen Artikel behandelt. Der hier beschriebene Vorgänger wird inzwischen auch als <em>"GRUB Legacy"</em> bezeichnet.</p><p>Im Artikel <a class="internal" href="./grub_2_durch_grub_ersetzen.html">Grub 2 durch Grub ersetzen</a> wird erläutert, wie man die ältere GRUB-Version dennoch mit aktuellen Ubuntu-Versionen nutzen kann.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./editor.html">Einen Texteditor öffnen</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#GRUB-konfigurieren">GRUB konfigurieren
</a><ol class="arabic"><li><a class="crosslink" href="#Konfiguration-waehrend-des-Bootens-aendern">Konfiguration während des Bootens ändern...</a></li></ol></li><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Bootloader-wiederherstellen">Bootloader wiederherstellen
</a><ol class="arabic"><li><a class="crosslink" href="#Methode-1-Per-Super-Grub-Disk">Methode 1: Per "Super Grub Disk"
</a></li><li><a class="crosslink" href="#Methode-2-root-directory-Variante">Methode 2: "root-directory" Variante
</a></li><li><a class="crosslink" href="#Methode-3-Chroot-ueber-ein-Live-System">Methode 3: Chroot über ein Live-System
</a></li><li><a class="crosslink" href="#Methode-4-GRUB-mit-Alternate-CD-neu-schreiben">Methode 4: GRUB mit Alternate-CD neu sch...</a></li><li><a class="crosslink" href="#Methode-5-GRUB-wiederherstellen-bei-Benutzung-von-LVM">Methode 5: GRUB wiederherstellen bei Ben...</a></li><li><a class="crosslink" href="#Methode-6-GRUB-wiederherstellen-mit-der-GRUB-Konsole">Methode 6: GRUB wiederherstellen mit der...</a></li></ol></li><li><a class="crosslink" href="#Sicherheitsaspekte">Sicherheitsaspekte
</a></li><li><a class="crosslink" href="#Problem-mit-GRUB-unter-Adaptec-SCSI-Controllern">Problem mit GRUB unter Adaptec SCSI Contro...</a></li><li><a class="crosslink" href="#GRUB-Error-12-13-und-21">GRUB Error 12, 13 und 21
</a><ol class="arabic"><li><a class="crosslink" href="#Error-vor-dem-GRUB-Bootmenue">Error vor dem GRUB-Bootmenü
</a></li><li><a class="crosslink" href="#Error-nach-dem-GRUB-Bootmenue">Error nach dem GRUB-Bootmenü
</a></li></ol></li><li><a class="crosslink" href="#GRUB-deinstallieren">GRUB deinstallieren
</a></li><li><a class="crosslink" href="#GRUB-Shell">GRUB-Shell
</a></li><li><a class="crosslink" href="#Auf-welcher-Festplatte-ist-GRUB-installiert">Auf welcher Festplatte ist GRUB installier...</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>Bei Ubuntu wurde der <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Boot-Loader">Boot-Loader</a> <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/GRUB">GRUB</a> verwendet, um sich selbst und andere auf dem System installierte Betriebssysteme zu starten. Standardmäßig wird GRUB im <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Master_Boot_Record">MBR (Master Boot Record)</a> der ersten Festplatte (<code class="notranslate">/dev/sda</code>) installiert. Dies bringt den Vorteil einer einfachen Installation und Aktualisierungsmöglichkeit des Bootloaders.</p><div class="section_1"><h2 id="GRUB-konfigurieren">GRUB konfigurieren<a class="headerlink" href="#GRUB-konfigurieren">¶</a></h2><p>
Der GRUB Bootloader wird über die Datei <a class="internal" href="./menu.lst.html">/boot/grub/menu.lst</a> konfiguriert. In dieser Datei befinden sich nicht nur die für GRUB notwendigen Informationen, wo welcher Kernel oder welches Betriebssystem zu finden ist, sondern auch Informationen für das Skript <strong>update-grub</strong>, welches die <strong>menu.lst</strong> automatisch neu schreiben kann. Das Skript wird z.B. bei einer Aktualisierung des Kernels ("kernel update") ausgeführt.</p><div class="section_2"><h3 id="Konfiguration-waehrend-des-Bootens-aendern">Konfiguration während des Bootens ändern<a class="headerlink" href="#Konfiguration-waehrend-des-Bootens-aendern">¶</a></h3><p>
Sollte es aufgrund einer Fehlkonfiguration zu einem Fehler wie beispielsweise</p><pre class="notranslate">Error 17 : Cannot mount selected partition</pre><p>
kommen und der Rechner nicht mehr starten lassen, können die Grub-Einträge vorübergehend geändert werden. Wie das geht, ist unter <a class="internal" href="./booten.html">Booten</a> beschrieben.</p><p>Diese Änderungen werden allerdings nicht in die <strong>menu.lst</strong> geschrieben. Man muss die Datei nach erfolgreichem Booten selbst anpassen.</p></div></div><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Bei der Installation von Ubuntu wird GRUB automatisch installiert. Sollte es hierbei zu einem Fehler kommen oder - was in seltenen Fällen vorkommen kann - GRUB auf der falschen Festplatte installiert worden sein, so kann dies nachgeholt werden. Dazu eignen sich die Methoden, die im folgenden Kapitel beschrieben werden. Ein eigener Artikel beschäftigt sich mit <a class="internal" href="./grub/sonderformen_der_installation.html">Sonderformen der Installation</a>.</p><p><a class="crosslink anchor" href="#MBR_sichern_und_wiederherstellen" id="MBR_sichern_und_wiederherstellen"></a>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Die Installation von GRUB geht einher mit dem Überschreiben des eventuell bestehenden Bootloaders - zum Beispiel dem einer Windowsinstallation. Es wird daher empfohlen, zunächst eine <a class="internal" href="./dd.html#mbr_sichern">Sicherung des bestehenden Bootloaders</a> anzulegen.
</p></div></div><p><a class="crosslink anchor" href="#Bootloader" id="Bootloader"></a>
</p></div><div class="section_1"><h2 id="Bootloader-wiederherstellen">Bootloader wiederherstellen<a class="headerlink" href="#Bootloader-wiederherstellen">¶</a></h2><p>
In manchen Fällen kann es notwendig sein, den Bootloader wiederherzustellen. Ein häufiges Beispiel ist die nachträgliche Installation eines Windows-Betriebssystems, bei dem der MS-eigene Bootloader in den MBR geschrieben wird.</p><p>Je nach vorhandener Rescue-CD gibt es hierbei verschiedene Möglichkeiten.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>In folgenden Anleitungen wird davon ausgegangen, dass das Ubuntusystem auf der Partition <strong>/dev/sda2</strong> installiert ist. GRUB soll im MBR derselben Platte - also <strong>/dev/sda</strong> - installiert werden. Diese Daten müssen natürlich an die eigene Situation angepasst werden.
</p></div></div><p>Wenn man nicht sicher ist, welche Bezeichnung richtig ist, kann man sich mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo fdisk -l </pre></div></div><p>
eine Übersicht der Partitionen anzeigen lassen. <em>sdb</em> oder <em>sdc</em> stehen für die zweite bzw. dritte Festplatte.</p><div class="section_2"><h3 id="Methode-1-Per-Super-Grub-Disk">Methode 1: Per "Super Grub Disk"<a class="headerlink" href="#Methode-1-Per-Super-Grub-Disk">¶</a></h3><p>
Alle, denen die nachfolgenden Lösungen zu kompliziert sind, sollten einen Blick auf die <a class="external" href="http://www.supergrubdisk.org/" rel="nofollow">Super Grub Disk</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> werfen. Mit einer kleinen (ca. 3 MB) Boot-CD/USB-Stick lässt sich recht einfach nicht nur GRUB installieren, sondern auch ein vorhandenes Windows wieder starten.</p></div><div class="section_2"><h3 id="Methode-2-root-directory-Variante">Methode 2: "root-directory" Variante<a class="headerlink" href="#Methode-2-root-directory-Variante">¶</a></h3><p>
Zunächst benötigt man eine Live-CD (Ubuntu Desktop-CD, Knoppix, etc.), von der man startet und dort dann ein Terminal öffnet <sup><a href="#source-1">[1]</a></sup>.</p><p>Als erstes bindet man das Ubuntu-System mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount /dev/sda2 /mnt </pre></div></div><p>
ein.</p><p>Nutzt das System eine separate boot-Partition, so muss diese mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount /dev/sda3 /mnt/boot </pre></div></div><p>
eingebunden werden. Bei einer normalen Installation ist diese Partition nicht vorhanden, und somit dieser letzte Befehl nicht erforderlich.</p><p>GRUB lässt sich nun leicht durch</p><div class="bash"><div class="contents"><pre class="notranslate">sudo grub-install --root-directory=/mnt /dev/sda </pre></div></div><p>
neu installieren.</p><p>Der Befehl "update-grub" kann bei dieser Methode nicht verwendet werden.</p><p>Der Parameter <em>--recheck</em> sollte zusätzlich verwendet werden, wenn es zu folgender Fehlermeldung kommt:
</p><pre class="notranslate">/dev/sda does not have any corresponding BIOS drive</pre></div><div class="section_2"><h3 id="Methode-3-Chroot-ueber-ein-Live-System">Methode 3: Chroot über ein Live-System<a class="headerlink" href="#Methode-3-Chroot-ueber-ein-Live-System">¶</a></h3><p>
Jedes Live-System ist zur Reparatur geeignet - ob Ubuntu <a class="internal" href="./desktop-cd.html">Desktop-CD</a>, Knoppix oder ein Mini-Linux von Diskette.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Es ist wichtig, dass die Systemarchitektur des Live-Systems mit der des installierten Ubuntu-Systems übereinstimmt. Es ist also nicht ohne weiteres möglich, sich mit chroot und einer 32Bit-LiveCD in ein 64-Bit-System einzuloggen. Wird die gleiche CD wie zur Installation genutzt, so sollte es keine Probleme geben. 
</p></div></div><p>Nach dem Start des Live-Systems muss die Partition mit dem installierten Ubuntu-System eingebunden werden. Dazu muss ein Terminal geöffnet werden <sup><a href="#source-1">[1]</a></sup> und der Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount /dev/sda2 /mnt </pre></div></div><p>
ausgeführt werden.</p><p>Nutzt das System eine separate boot-Partition, so muss diese mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount /dev/sda3 /mnt/boot </pre></div></div><p>
eingebunden werden. Bei einer normalen Installation ist diese Partition nicht vorhanden und somit dieser letzte Befehl nicht erforderlich.</p><p>Vor dem Wechsel in das installierte System muss diesem der Zugriff auf wichtige Systeminformationen zugesichert werden. Man bindet dazu das Verzeichnis mit den Gerätedateien innerhalb des installierten Systems ein:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount -o bind /dev /mnt/dev </pre></div></div><p>und /sys</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount -o bind /sys /mnt/sys </pre></div></div><p>
Ähnlich verfährt man mit dem Schnittstellendateisystem <strong>/proc</strong>. Dieses wird mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount -t proc /proc /mnt/proc </pre></div></div><p>
eingebunden.</p><p>Nun erfolgt der Wechsel in das installierte System:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chroot /mnt /bin/bash </pre></div></div><p>Und endlich kann GRUB neu geschrieben werden:</p><div class="bash"><div class="contents"><pre class="notranslate">grub-install /dev/sda </pre></div></div><p>
Sollte hier der Fehler "Could not find device for /boot: Not found or not a block device." auftreten, gibt man folgende Zeile vor dem grub-install ein:</p><div class="bash"><div class="contents"><pre class="notranslate">cp /proc/mounts /etc/mtab </pre></div></div><p>
Falls GRUB zum ersten Mal installiert wird, sollte nun auch</p><div class="bash"><div class="contents"><pre class="notranslate">update-grub </pre></div></div><p>
ausgeführt werden.</p><p>Abschließend wird die chroot-Umgebung mit</p><div class="bash"><div class="contents"><pre class="notranslate">exit </pre></div></div><p>
verlassen und das Live-System beendet.</p><p>Sollten nach der Neuinstallation von GRUB Probleme auftreten (zum Beispiel fehlender Sound), kann es helfen, sich wieder als Besitzer seines Homeverzeichnisses einzutragen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chown -hR user:user /home/user </pre></div></div><p>
wobei "<code class="notranslate">user</code>" hier gegen den eigenen Benutzernamen ausgetauscht werden muss.</p></div><div class="section_2"><h3 id="Methode-4-GRUB-mit-Alternate-CD-neu-schreiben">Methode 4: GRUB mit Alternate-CD neu schreiben<a class="headerlink" href="#Methode-4-GRUB-mit-Alternate-CD-neu-schreiben">¶</a></h3><p>
Sollte man gerade keine Live-CD zur Hand haben (oder nicht so lange warten wollen, bis sie gebootet hat), kann man auch die Ubuntu Alternate-CD nehmen. Einfach die Installation so lange durchlaufen lassen, bis die Frage nach den Partitionen kommt. Mit 
<span class="key">Alt</span>  + 
<span class="key">F2</span>  auf die Konsole wechseln und mit 
<span class="key">⏎</span>  bestätigen. Man ist jetzt automatisch als Root angemeldet.</p><div class="bash"><div class="contents"><pre class="notranslate">mount /dev/sda2 /mnt/ </pre></div></div><p>
Vor dem Wechsel in das installierte System muss diesem der Zugriff auf wichtige Systeminformationen zugesichert werden. Man bindet dazu das Verzeichnis mit den Gerätedateien innerhalb des installierten Systems ein:</p><div class="bash"><div class="contents"><pre class="notranslate">mount -o bind /dev /mnt/dev </pre></div></div><p>
Ähnlich verfährt man mit dem Schnittstellendateisystem <strong>/proc</strong>. Dieses wird mit</p><div class="bash"><div class="contents"><pre class="notranslate">mount -t proc /proc /mnt/proc </pre></div></div><p>
eingebunden.</p><p>Jetzt bewegt man sich in das eingebundene Verzeichnis und wechselt in das Ubuntu-System (
<span class="key">Strg</span>  + 
<span class="key">D</span>  verlässt das Verzeichnis wieder):</p><div class="bash"><div class="contents"><pre class="notranslate">cd /mnt/
chroot /mnt/ </pre></div></div><p>
Jetzt kann die neue Konfiguration in den MBR geschrieben werden:</p><div class="bash"><div class="contents"><pre class="notranslate">grub-install /dev/sda </pre></div></div><p>
Der nächste Befehl analysiert das root-System und schreibt eine Standard-Konfiguration. Das ist nur notwendig, falls keine Konfiguration vorliegt oder Fehler enthalten sind.</p><div class="bash"><div class="contents"><pre class="notranslate">update-grub </pre></div></div><p>
Danach wird mit folgenden Befehlen die chroot-Umgebung verlassen und das System schließlich neu gestartet:</p><div class="bash"><div class="contents"><pre class="notranslate">exit
reboot </pre></div></div></div><div class="section_2"><h3 id="Methode-5-GRUB-wiederherstellen-bei-Benutzung-von-LVM">Methode 5: GRUB wiederherstellen bei Benutzung von LVM<a class="headerlink" href="#Methode-5-GRUB-wiederherstellen-bei-Benutzung-von-LVM">¶</a></h3><p>
Sollte man einen <a class="internal" href="./logical_volume_manager.html">Logical Volume Manager</a> für seine Festplatte benutzen, muss man ein bisschen mehr Aufwand treiben. Am besten ist hierfür die <a class="internal" href="./desktop-cd.html">Desktop-CD</a> von Ubuntu zu nutzen.</p><p>Zur Nutzung des Logical Volume Managers muss als erstes das Paket <strong>lvm2</strong> installiert werden.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install lvm2 </pre></div></div><p>
Nun muss der LVM-Kerneltreiber geladen werden.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo modprobe dm-mod </pre></div></div><p>
Dann muss man das LVM zugänglich machen. Das geht im Terminal <sup><a href="#source-1">[1]</a></sup> mit den Befehlen</p><div class="bash"><div class="contents"><pre class="notranslate">sudo vgscan
sudo vgchange -a y </pre></div></div><p>
Wenn man sich nicht sicher ist, wie die Namen der Volumes im LVM lauten, kann man diese mit folgendem Befehl anzeigen lassen.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo lvscan </pre></div></div><p>
Nun sollte man die Partition mit dem Root-Verzeichnis (<strong>/</strong>) einbinden:</p><div class="bash"><div class="contents"><pre class="notranslate">mkdir /mnt/ubuntu
mount /dev/mapper/LV-root /mnt/ubuntu </pre></div></div><p>
Ebenso müssen die anderen Logical Volumes eingebunden werden:</p><div class="bash"><div class="contents"><pre class="notranslate">mount /dev/mapper/LV-usr /mnt/ubuntu/usr
mount /dev/mapper/LV-home /mnt/ubuntu/home </pre></div></div><p>
Das <strong>/dev/mapper/LV-* </strong> muss nach den eigenen Namensvergaben angepasst werden.</p><p>Die üblicherweise separate boot-Partition muss mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mount /dev/sda3 /mnt/ubuntu/boot </pre></div></div><p>
eingebunden werden.</p><p>Nun kann man ganz normal mit der chroot-Umgebung (siehe oben) weiter machen.</p></div><div class="section_2"><h3 id="Methode-6-GRUB-wiederherstellen-mit-der-GRUB-Konsole">Methode 6: GRUB wiederherstellen mit der GRUB-Konsole<a class="headerlink" href="#Methode-6-GRUB-wiederherstellen-mit-der-GRUB-Konsole">¶</a></h3><p>
Bei dieser Methode müssen sämtliche Arbeitschritte manuell ausgeführt werden, die ansonsten vom Skript <strong>grub-install</strong> durchgeführt werden. Darin liegt die besondere Bedeutung dieser Methode: Sollte <strong>grub-install</strong> - aus welchem Grund auch immer - mit der Systemkonstellation nicht zurechtkommen, so ist eine manuelle Installation hilfreich. Oft werden bei diesem Vorgang auch hilfreiche Fehlermeldungen ausgegeben, die bei der Suche nach der Ursache des Problems helfen können.</p><p>Zunächst muss sichergestellt werden, dass die benötigten Komponenten im Verzeichnis <strong>/boot/grub/</strong> der Rootpartition abgelegt wurden. Wird eine separate Bootpartition verwendet, so müssen die Komponenten statt dessen dort im Verzeichnis <strong>/grub/</strong> vorliegen. Mögliche Komponenten finden sich normalerweise im Verzeichnis <strong>/usr/lib/grub/i386-pc</strong>. Bei anderen Architekturen muss der Pfad angepasst werden. Im Zweifelsfall sollte man alle Dateien kopieren.</p><p>Jetzt wird die GRUB-Konsole mit Root-Rechten gestartet <sup><a href="#source-1">[1]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo grub </pre></div></div><p>
Als nächstes wird die Partition festgelegt, die das Verzeichnis <strong>/boot/grub</strong> (bzw. <strong>/grub</strong> bei Verwendung einer boot-Partition) beinhaltet. Diese kann über den Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">find /boot/grub/stage1 </pre></div></div><p>aufgerufen werden. Anschließend wird mit nachfolgendem Befehl die Boot-Partition gewählt:</p><div class="bash"><div class="contents"><pre class="notranslate">grub&gt; root (hd0,x) </pre></div></div><p>Dabei wird <strong>x</strong> durch die oben gefundene Partition ersetzt. Nun kann die eigentliche Installation mit</p><div class="bash"><div class="contents"><pre class="notranslate">grub&gt; setup (hd0) </pre></div></div><p>
durchgeführt werden. Probleme - zum Beispiel fehlende Komponenten - werden für gewöhnlich an dieser Stelle von GRUB gemeldet.</p><p>Abschließend kann die GRUB-Konsole mit</p><div class="bash"><div class="contents"><pre class="notranslate">grub&gt; quit </pre></div></div><p>
verlassen werden.</p><p>Zu beachten ist, dass Geräte und Partitionen in der GRUB-eigenen Notation angegeben werden müssen: Die Platten- und Partitionszählung beginnt bei Null! Die hier in allen Beispielen verwendete Rootpartition <strong>/dev/sda2</strong> wäre demnach <strong>(hd0,1)</strong>.</p></div></div><div class="section_1"><h2 id="Sicherheitsaspekte">Sicherheitsaspekte<a class="headerlink" href="#Sicherheitsaspekte">¶</a></h2><p>
Man kann GRUB auch vor unautorisiertem Zugriff schützen, insbesondere den <a class="internal" href="./recovery_modus.html">Recovery Modus</a>. Näheres dazu siehe <a class="internal" href="./recovery_modus.html#Den-Recovery-Modus-schuetzen">hier</a>.</p></div><div class="section_1"><h2 id="Problem-mit-GRUB-unter-Adaptec-SCSI-Controllern">Problem mit GRUB unter Adaptec SCSI Controllern<a class="headerlink" href="#Problem-mit-GRUB-unter-Adaptec-SCSI-Controllern">¶</a></h2><p>
Ein recht häufiges Problem mit Adaptec SCSI-Controllern ist der "GRUB Hard Disk Error". Es kommen auch andere Fehlermeldungen vor, jedenfalls lässt sich der Computer nicht starten. Das verflixte an dem Fall ist, dass man mit der Super GRUB Disk unter der Funktion "direkt von MBR starten" einfach booten kann. Das Problem liegt an der Übergabe der LBA-Festplattengeometriedaten vom SCSI-Controller zum BIOS. Hier hat GRUB keine Chance. Auch LILO kann hier nichts ausrichten.</p><p>Der Trick zur Lösung besteht in der Installation von <a class="external" href="http://gag.sourceforge.net/" rel="nofollow">GAG</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> (Graphical Boot Manager). Dieser Bootmanager kann zwar weder Linux noch Windows allein booten, doch er kann auf vorhandene Booteinstellungen zugreifen, und er hat kein Problem mit dem oben beschriebenen Bug. Wichtig ist hier, dass GRUB nicht mehr im MBR, sondern auf der Linux Bootpartition installiert wird. Und das beste an diesem Manager ist, dass er direkt beim Booten konfigurierbar ist. Um GRUB auf einer Partition (hier sda5) zu installieren, muss zum Beispiel folgendes als root eingeben (aber erst nach der Installation von GAG!):</p><div class="bash"><div class="contents"><pre class="notranslate">grub-install /dev/sda5 </pre></div></div></div><div class="section_1"><h2 id="GRUB-Error-12-13-und-21">GRUB Error 12, 13 und 21<a class="headerlink" href="#GRUB-Error-12-13-und-21">¶</a></h2><p>
</p><div class="section_2"><h3 id="Error-vor-dem-GRUB-Bootmenue">Error vor dem GRUB-Bootmenü<a class="headerlink" href="#Error-vor-dem-GRUB-Bootmenue">¶</a></h3><p>
Sollte die Fehlermeldung kommen, bevor der GRUB das Bootmenü auflistet, kann die Ursache mehrere Quellen haben.</p><div class="section_3"><h4 id="Ursache-1">Ursache 1<a class="headerlink" href="#Ursache-1">¶</a></h4><p>
GRUB ist nicht auf der richtigen Festplatte/Partition installiert.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Bei einer Standardinstallation darauf achten, dass die Festplatte, auf die Ubuntu installiert werden soll, auch an erster Stelle in der BIOS-Bootreihenfolge steht, da GRUB automatisch auf (hd0,0) installiert wird. Sollte sich auf dieser Festplatte der Master Boot Record (MBR) eines anderes Betriebssystem befinden, so wird dieser überschrieben. Um ihn wiederherzustellen, muss man den MBR wiederherstellen. Wie das geht, steht weiter unten <a class="crosslink" href="#deinstallation">im Artikel</a>. 
</p></div></div></div><div class="section_3"><h4 id="Ursache-2">Ursache 2<a class="headerlink" href="#Ursache-2">¶</a></h4><p>
Die Einträge <code class="notranslate">groot</code> und <code class="notranslate">kopt</code> in der <strong>menu.lst</strong> sind nicht korrekt. Um herauszufinden, welche Festplatte dort eingetragen werden muss, gibt man mit Hilfe einer Live-CD in der Konsole</p><div class="bash"><div class="contents"><pre class="notranslate">sudo fdisk -l </pre></div></div><p>
ein.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p><strong>/dev/sda1</strong> ist die erste Festplatte, dafür steht das "a", und die "1" steht für die erste Partition dieser Festplatte. In der Spalte <code class="notranslate">boot</code> zeigt ein <strong>*</strong> an, ob die Partition aktiv (im Sinne von startbar) ist. 
</p></div></div><p>
Für <code class="notranslate">groot</code> und <code class="notranslate">kopt=root</code> müsste nun, wenn der MBR von Ubuntu auf <strong>/dev/sda1</strong> liegt,</p><pre class="notranslate">groot=(hd0,0) und für kopt=root=/dev/sda1 ro</pre><p>
eingetragen werden.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Dies müssen nicht unbedingt die richtigen Einträge für Root in den <a class="internal" href="./menu.lst.html">Kerneleinträgen</a> für Ubuntu sein. 
</p></div></div></div></div><div class="section_2"><h3 id="Error-nach-dem-GRUB-Bootmenue">Error nach dem GRUB-Bootmenü<a class="headerlink" href="#Error-nach-dem-GRUB-Bootmenue">¶</a></h3><p>
Es kommt öfters vor, dass GRUB zwar das Bootmenü auflistet, man aber beim Auswählen eines Betriebssystems eine Fehlermeldung zurückbekommt. Sollte der Fehler Error 12, Error 13 und Error 21 sein, drückt man im GRUB-Bootmenü 
<span class="key">C</span> . Jetzt befindet man sich in der Grubkonsole. Hier gibt man</p><div class="bash"><div class="contents"><pre class="notranslate">find /vmlinuz </pre></div></div><p>
ein. Damit wird angezeigt, auf welcher Partition GRUB Ubuntu erwartet. Dies gibt man anschließend in der <strong>menu.lst</strong> bei den Kerneleinträgen unter <a class="internal" href="./menu.lst.html">root</a> ein.</p><div class="section_3"><h4 id="Fehler-bei-Windows-Boot">Fehler bei Windows-Boot<a class="headerlink" href="#Fehler-bei-Windows-Boot">¶</a></h4><p>
Sollte eine Fehlermeldung bei der Auswahl von Windows erscheinen, so lässt dies entweder</p><ol class="arabic"><li><p>einen falsch eingegebenen <code class="notranslate">root</code>-Eintrag vermuten </p></li><li><p>die Weiterleitung des GRUB zum Windows-Bootloader mittels <code class="notranslate">chainload +1</code> ist nicht eingegeben </p></li><li><p>oder es muss noch der "map-Trick" angewendet werden. Ein Hinweis auf dieses Problem ist, wenn nach Wahl des Menüeintrags nur die Meldung "Starting up..." ohne weitere Fehlermeldung erscheint. Einzelheiten zur Anwendung der map-Anweisung findet man im Artikel <a class="internal" href="./menu.lst.html#menu_lst-map">menu.lst</a> </p></li></ol><p>
Zuerst muss man aber herausfinden, auf welcher Festplatte GRUB Windows erwartet. Hier die Möglichkeiten, wie man die richtige Festplatte für den <code class="notranslate">root</code>-Eintrag findet.</p><div class="section_4"><h5 id="Moeglichkeit-1">Möglichkeit 1<a class="headerlink" href="#Moeglichkeit-1">¶</a></h5><p>
Beispiel: Eingebaut sind zwei Festplatten. Auf Festplatte Nr.1 ist Windows. Auf Festplatte Nr.2 sind Ubuntu und GRUB installiert. Im BIOS steht Festplatte zwei an erster Stelle zum Booten. Damit glaubt GRUB, Ubuntu müsse sich auf Festplatte 1 (hd0,0) befinden. Die Festplatte eins steht aber an der zweiten Stelle. Damit erwartet GRUB Windows auf Festplatte 2 (hd1,0).</p></div><div class="section_4"><h5 id="Moeglichkeit-2">Möglichkeit 2<a class="headerlink" href="#Moeglichkeit-2">¶</a></h5><p>
Eine zwar nicht so elegante, aber dennoch effektive Methode ist es, Windows einfach mit allen möglichen Varianten in der <strong>menu.lst</strong> zu erstellen und anschließend auszuprobieren. Damit erspart man sich die langen Ladezeiten der <a class="internal" href="./live-cd.html">Live-CD</a>.</p><div class="section_5"><h6 id="Eine-Platte-mit-sechs-Partitionen">Eine Platte mit sechs Partitionen<a class="headerlink" href="#Eine-Platte-mit-sechs-Partitionen">¶</a></h6><p>
</p><ul><li><p>Jeweils von (hd0,0) bis (hd0,6) bei Windows unter <code class="notranslate">root</code> eintragen. </p></li></ul><p>
</p></div><div class="section_5"><h6 id="Zwei-Festplatten-mit-je-drei-Partitionen">Zwei Festplatten mit je drei Partitionen<a class="headerlink" href="#Zwei-Festplatten-mit-je-drei-Partitionen">¶</a></h6><p>
</p><ul><li><p>Jeweils von (hd0,0) bis (hd0,3) und (hd1,0) bis (hd1,3) bei Windows unter <code class="notranslate">root</code> eintragen. </p></li></ul><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Bei RAID 0-Systemen werden beide Festplatten als eine erkannt. Das heißt, (hd0,0) steht in diesem Fall für <strong>sda</strong> und <strong>sdb</strong>. Eine dritte Festplatte folgt mit (hd1,0). Es ist auch möglich, dass ein RAID 0 aus zwei SATA-Festplatten als (hd1,0) erkannt werden und SATA 3 als (hd0,0). Darum ist es immer besser, alle Varianten durchzuprobieren.
</p></div></div><p><a class="crosslink anchor" href="#deinstallation" id="deinstallation"></a></p></div></div></div></div></div><div class="section_1"><h2 id="GRUB-deinstallieren">GRUB deinstallieren<a class="headerlink" href="#GRUB-deinstallieren">¶</a></h2><p>
Um GRUB aus dem MBR zu entfernen, gibt es verschiedene Möglichkeiten.</p><p>Falls man ein reines Linux-System hat, kann man eine Sicherung des Master Boot Records einspielen (siehe <a class="crosslink" href="#MBR_sichern_und_wiederherstellen">oben</a>).</p><p>Falls man ein Dualbootsystem mit Windows hat, kann man bei:
</p><ul><li><p>2000/XP von der Windows Installations-CD booten und im "Setup" mit der Taste 
<span class="key">R</span>  die Wiederherstellungskonsole starten. Nun wählt man aus der Liste die eigene Windows-Installation aus und gibt das Administratorkennwort ein. Mit dem Befehl <strong>fixmbr</strong> wird der MBR überschrieben und GRUB deinstalliert. Dabei bleiben die Partitionen erhalten. Danach wird mit dem Befehl <strong>fixboot</strong> der Bootsektor der Windows-Partition neu geschrieben. Mit <strong>exit</strong> verlässt man die Wiederherstellungskonsole und startet den Computer neu. Nun wird Windows booten. </p></li></ul><p>
</p><ul><li><p>Vista/7/8 von der Installations-CD booten und beim ersten Fenster des Installationsprozesses nach dem Auswählen der Sprache die Option <em>Computerreparaturoptionen</em> auswählen. Nachdem der Computer nach bereits vorhandenen Installationen von Windows gesucht hat, startet man die  <em>Eingabeaufforderung</em>. Mit dem Befehl <strong>Bootrec /FixMbr</strong> wird der MBR überschrieben und GRUB deinstalliert. Dabei bleiben die Partitionen erhalten. Danach wird mit dem Befehl <strong>Bootrec /FixBoot</strong> der Bootsektor der Windows-Partition neu geschreiben. Mit <strong>exit</strong> verlässt man die Wiederherstellungskonsole und startet den Computer neu. Nun wird Windows booten.</p></li></ul><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die Wiederherstellungskonsole gibt es nicht auf allen Windows-CDs. So ist diese bei einigen OEM- oder Recovery-Versionen nicht vorhanden! 
</p></div></div><p>
Wer keine Installations-CD zur Hand hat, kann sich unter Windows NT, 2000, XP, Server 2003, Vista, Server 2008, 7 und PE auch <a class="external" href="http://www.sysint.no/en/Download.aspx" rel="nofollow">MBRFix</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/>  herunterladen (<a class="external" href="http://www.sysint.no/Nedlasting/MbrFix.htm" rel="nofollow">Dokumentation</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>) und dann in einem Terminal unter Windows den Befehl:</p><div class="bash"><div class="contents"><pre class="notranslate">MbrFix /drive &lt;num&gt; fixmbr </pre></div></div><p>
eingeben, wobei für &lt;num&gt; die Laufwerksnummer (Zählung beginnt mit Null) anzugeben ist. Falls Windows Vista verwendet wird, lautet der Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">MbrFix /drive &lt;num&gt; fixmbr /vista </pre></div></div><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Eine fehlerhafte Verwendung der Software kann möglicherweise zu einem Totalverlust der Daten auf der Festplatte führen! 
</p></div></div></div><div class="section_1"><h2 id="GRUB-Shell">GRUB-Shell<a class="headerlink" href="#GRUB-Shell">¶</a></h2><p>
Die Funktionen der GRUB-Shell werden in einem eigenen Artikel beschrieben: <a class="internal" href="./grub/grub-shell.html">GRUB/GRUB-Shell</a>.</p></div><div class="section_1"><h2 id="Auf-welcher-Festplatte-ist-GRUB-installiert">Auf welcher Festplatte ist GRUB installiert?<a class="headerlink" href="#Auf-welcher-Festplatte-ist-GRUB-installiert">¶</a></h2><p>
Um herauszufinden, auf welcher Festplatte (oder Partition) der Bootloader installiert ist, kann man eine der hier beschriebenen Methoden verwenden: <a class="internal" href="./skripte/grub_finden.html">Skripte/GRUB finden</a>.</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://www.gnu.org/software/grub/grub-legacy.en.html" rel="nofollow">Projektseite</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p><ul><li><p><a class="external" href="http://www.gnu.org/software/grub/manual/legacy/grub.html" rel="nofollow">GRUB (Legacy) Manual</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="interwiki interwiki-archwiki" href="https://wiki.archlinux.org/index.php/GRUB_Legacy">GRUB Legacy</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - im Archlinux-Wiki</p></li></ul></li><li><p><a class="external" href="http://tldp.org/HOWTO/Linux+Win9x+Grub-HOWTO/" rel="nofollow">Linux und Win9x Grub HOWTO</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p><a class="external" href="http://www.supergrubdisk.org/" rel="nofollow">Super Grub Disk</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p><a class="external" href="http://gna.org/projects/grub4dos/" rel="nofollow">GRUB4DOS und WINGRUB</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p><a class="interwiki interwiki-sourceforge2" href="http://gag.sourceforge.net">GAG - The Graphical Bootmanager</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Notfall-Alternative für GRUB</p></li><li><p><a class="internal" href="./grub_2.html">GRUB 2</a> - die zweite Version von <a class="external" href="http://www.gnu.org/software/grub/" rel="nofollow">GNU GRUB</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> und damit der Nachfolger von GRUB (GRUB Legacy)</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./grub/a/revision/932653.html">Diese Revision</a> wurde am 29. Januar 2017 17:09 von <a href="https://ubuntuusers.de/user/aasche/">aasche</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./grub.html">GRUB</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>