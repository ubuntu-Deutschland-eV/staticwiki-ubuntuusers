<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>virt-manager › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./virt-manager.html">virt-manager</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/virt-manager">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./virt-manager/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./virt-manager/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./virt-manager/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./virt-manager/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./virt-manager/a/backlinks.html">virt-manager</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./programme_starten.html">Ein Programm starten</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Vorbereitungen">Vorbereitungen
</a><ol class="arabic"><li><a class="crosslink" href="#Benutzer-hinzufuegen">Benutzer hinzufügen
</a></li><li><a class="crosslink" href="#Netzwerk-einrichten">Netzwerk einrichten
</a></li><li><a class="crosslink" href="#Spice-statt-VNC">Spice statt VNC
</a><ol class="arabic"><li><a class="crosslink" href="#Spice">Spice
</a></li></ol></li></ol></li><li><a class="crosslink" href="#Benutzung">Benutzung
</a><ol class="arabic"><li><a class="crosslink" href="#Grafische-Benutzeroberflaeche">Grafische Benutzeroberfläche
</a></li><li><a class="crosslink" href="#Mit-anderen-Rechnern-verbinden">Mit anderen Rechnern verbinden
</a></li><li><a class="crosslink" href="#Neue-virtuelle-Maschine-einrichten">Neue virtuelle Maschine einrichten
</a></li><li><a class="crosslink" href="#Virtuelle-Maschine-starten-und-steuern">Virtuelle Maschine starten und steuern
</a><ol class="arabic"><li><a class="crosslink" href="#Hardware-veraendern">Hardware verändern
</a></li><li><a class="crosslink" href="#Tastaturkommandos-senden">Tastaturkommandos senden
</a></li></ol></li><li><a class="crosslink" href="#Austauschverzeichnis-zwischen-Host-und-Gast-einrichten">Austauschverzeichnis zwischen Host und G...</a></li><li><a class="crosslink" href="#Kommandozeile">Kommandozeile
</a><ol class="arabic"><li><a class="crosslink" href="#Virt-image">Virt-image
</a></li><li><a class="crosslink" href="#Virt-install">Virt-install
</a></li><li><a class="crosslink" href="#VM-fuer-Live-CD">VM für Live-CD
</a></li><li><a class="crosslink" href="#Virt-clone">Virt-clone
</a></li></ol></li></ol></li><li><a class="crosslink" href="#Problemloesung">Problemlösung
</a><ol class="arabic"><li><a class="crosslink" href="#Kein-Netzwerk-trotz-default-Einstellung">Kein Netzwerk trotz "default"-Einstellun...</a></li><li><a class="crosslink" href="#Zwischenablage-funktioniert-nicht">Zwischenablage funktioniert nicht
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="virt_manager.png" class="image-left" src="./_/7edf1e5422082a9a5c7627ac2467cecea2f21c12.png"/> 
Der <a class="external" href="http://virt-manager.org/page/Main_Page" rel="nofollow">Virtual Machine Manager</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>, kurz auch virt-manager oder VMM genannt, bietet eine einheitliche Benutzeroberfläche zum Erstellen und Verwalten von <a class="internal" href="./virtualisierung.html">virtuellen Maschinen</a>. VMM setzt dabei auf <a class="external" href="http://libvirt.org/index.html" rel="nofollow">libvirt</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> auf, d.h. es werden die Virtualisierung-Lösungen unterstützt, die libvirt auch unterstützt. Dies sind u.a. <a class="internal" href="./qemu.html">QEMU</a>, <a class="internal" href="./kvm.html">KVM</a>,  und <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Xen">Xen</a>, aber nicht <a class="internal" href="./virtualbox.html">VirtualBox</a> oder <a class="internal" href="./vmware_player.html">VMware Player</a>.</p><p>VMM bietet sowohl ein <a class="crosslink" href="#gui">grafische Benutzeroberfläche</a> als auch eine Reihe von <a class="crosslink" href="#shell">Kommandozeilen-Programmen</a> an. VMM ist komplett in <a class="internal" href="./python.html">Python</a> geschrieben.</p><p>Die Besonderheit an VMM ist, dass er eine Art Zwischenschicht bildet, so dass die Verwaltung der virtuellen Maschinen einheitlich ist, egal welche Virtualisierungslösung eingesetzt wird, was den Administrationsaufwand verringert. Die Konfiguration wird dabei in XML-Dateien abgelegt, so dass dies nach Bedarf auch von Hand korrigiert werden kann. Die Verwalteten virtuellen Maschinen können dabei auch auf einem anderen Rechner liegen (z.B. einem anderen Server), die Verbindung dorthin kann auch verschlüsselt erfolgen.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Es müssen folgende Pakete installiert werden <sup><a href="#source-1">[1]</a></sup>:</p><ul><li><p><strong>virt-manager</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install virt-manager </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install virt-manager </pre></div></div><p>
</p></div></div><p>Und natürlich muss mindestens eine der oben genannten Virtualisierungslösungen installiert sein.</p></div><div class="section_1"><h2 id="Vorbereitungen">Vorbereitungen<a class="headerlink" href="#Vorbereitungen">¶</a></h2><p>
Nach der Installation sind noch folgende Punkte zu erledigen, sonst kann VMM nicht genutzt werden. Man muss sich selbst der Benutzergruppe <code class="notranslate">libvirtd</code> hinzufügen, ebenso alle anderen Nutzer, die mit VMM neue virtuelle Maschinen erstellen und verwalten können soll, und - eventuell - das Netzwerk einrichten.</p><div class="section_2"><h3 id="Benutzer-hinzufuegen">Benutzer hinzufügen<a class="headerlink" href="#Benutzer-hinzufuegen">¶</a></h3><p>
Bei der Installation legt <strong>libvirt-bin</strong> eine eigene Gruppe an, diese heißt <code class="notranslate">libvirtd</code>. Dieser Gruppe muss man alle Benutzer <a class="internal" href="./benutzer_und_gruppen.html">hinzufügen</a>, die VMM nutzen sollen.</p></div><div class="section_2"><h3 id="Netzwerk-einrichten">Netzwerk einrichten<a class="headerlink" href="#Netzwerk-einrichten">¶</a></h3><p>
Es gibt mehrere Möglichkeiten, später die virtuelle Maschine mit ein realen Netzwerk / Internet zu verbinden. Per Voreinstellung setzt VMM ein virtuelles Netzwerk im Adressraum 192.168.122.0/24 ein, dass per <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Network_Address_Translation">NAT</a> mit der realen Netzwerkkarte verbunden ist. Mit dieser Konfiguration kann jede virtuelle Maschine ins Internet, es sind keine weiteren Schritte notwendig.</p><p>Grundsätzlich besteht auch die Möglichkeit, dass die virtuelle Maschine sich per Bridge direkt in das reale Netzwerk einklinkt. Dazu muss aber zuerst die Bridge eingerichtet werden, was etwas Handarbeit erfordert. Ein entsprechende Anleitung findet man im Englischen Wiki <a class="interwiki interwiki-ubuntu" href="https://wiki.ubuntu.com/KvmWithBridge">KvmWithBridge</a> oder auch im <a class="external" href="http://wiki.libvirt.org/page/Networking#Debian.2FUbuntu_Bridging" rel="nofollow">libvirt-Wiki</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></div><div class="section_2"><h3 id="Spice-statt-VNC">Spice statt VNC<a class="headerlink" href="#Spice-statt-VNC">¶</a></h3><p>
Damit Grafik in virtuellen Maschinen funktioniert, muss KVM bzw. das zugrunde liegende QEMU-System der virtuellen Maschine einen Grafikadapter zur Verfügung stellen. Standardmäßig wird hierfür eine uralte Cirrus-Grafikkarte emuliert. Die maximale Auflösung beträgt allerdings magere 1024x768 Pixel. Wenn man höhere Auflösungen wünscht, stehen auch andere virtuelle Grafikkarten zur Auswahl, die in Linux-Gästen aber oft eine manuelle X-Konfiguration voraussetzen.</p><p>Zu guter Letzt stellt sich noch die Frage, über welches Protokoll die Grafikdaten von der virtuellen Maschine zum Client-Rechner kommen. Üblich ist hierfür das Protokoll <a class="internal" href="./vnc.html">VNC</a>, das über die Linux-Welt hinaus weite Verbreitung findet und in der Praxis die geringsten Probleme bereitet. Alternativ dazu verspricht das neue Protokoll <a class="external" href="http://www.spice-space.org/" rel="nofollow">Spice</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> nicht nur eine höhere Geschwindigkeit, höhere Auflösungen, sondern hat zudem den Vorteil der Audio-Unterstützung und einige weitere <a class="external" href="http://www.spice-space.org/features.html" rel="nofollow">Zusatzfunktionen</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> (siehe auch <a class="external" href="http://www.admin-magazin.de/Das-Heft/2012/06/Virtuelle-Maschinen-mittels-VNC-und-Spice-bedienen" rel="nofollow">Virtuelle Maschinen mittels VNC und Spice bedienen</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>).</p><div class="section_3"><h4 id="Spice">Spice<a class="headerlink" href="#Spice">¶</a></h4><p>
Das Simple Protocol for Independent Computing Environments (kurz Spice) ist ein neues Protokoll, um das Grafiksystem einer virtuellen Maschine über ein Netzwerk effizient zu bedienen. Spice unterstützt die Komprimierung von Bildern, Video-Streaming, die Übertragung von Audio-Daten, Verschlüsselung (OpenSSL) und einiges mehr. Die Kommunikation zwischen dem Host- und Gastsystem erfolgt über "Virtual Device Interfaces" (VDIs). Gleichzeitig ermöglicht der Einsatz von Spice nahezu beliebig hohe Grafikauflösungen innerhalb der virtuellen Maschine.</p><p>Im Vergleich zu VNC ist Spice nicht nur effizienter, sondern hat zudem den Vorteil der Audio-Unterstützung. Wenn man die Audio-Ausgaben einer virtuellen Maschine hören möchten, führt an Spice momentan kein Weg vorbei. VNC sieht zwar auch die Weitergabe von Audio-Daten vor, die unter Linux verfügbaren VNC-Clients sind aber dazu nicht in der Lage.</p><p>Spice wurde ursprünglich wie KVM von der Firma Qumranet entwickelt. Nachdem Red Hat 2008 Qumranet erworben hatte, wurde Spice Ende 2009 als Open-Source-Projekt freigegeben. Das Projekt ist prinzipiell unabhängig von KVM, kommt momentan aber nur in Kombination mit KVM beziehungsweise QEMU zur Anwendung. Technologisch weist Spice Ähnlichkeiten zu den Virtio-Treibern auf: Auch Spice setzt voraus, dass in den virtuellen Maschinen paravirtualisierte Treiber zum Einsatz kommen.</p><p>Spice besteht aus drei Komponenten:</p><ul><li><p>Der Spice-Server ist direkt in QEMU/KVM integriert. Er ist für die Kommunikation nach außen zuständig, also für die Steuerung der virtuellen Maschine durch den Benutzer über eine Netzwerk-Verbindung. Für die virtuelle Maschine sieht der Spice-Server wie eine VGA-Grafikkarte aus.</p></li><li><p>Der Spice-Client (bei aktuellen Distributionen das Paket <strong>python-spice-client-gtk</strong>, bei älteren Distributionen das Kommando spicec aus dem Paket <strong>spice-client</strong>) ist ein mit einem VNC-Viewer vergleichbares Programm, dass das Grafiksystem der virtuellen Maschine in einem Fenster anzeigt. Aktuelle Versionen des VMM sind ebenfalls Spice-kompatibel. Der Spice-Client ist auch als Windows-Programm verfügbar.</p></li><li><p>Der QXL-Treiber wird in der virtuellen Maschine installiert und stellt sicher, dass die virtuelle Maschine das Grafiksystem effizient und in hohen Auflösungen benutzen kann. Der QXL-Treiber steht momentan sowohl für das X-System (Linux) als auch für Windows zur Verfügung. Spice funktioniert prinzipiell auch ohne den QXL-Treiber, allerdings sind in der virtuellen Maschine dann nur Auflösungen von bis zu 1024 mal 768 Pixel möglich. Außerdem bietet Spice dann keinen Geschwindigkeitsvorteil im Vergleich zu anderen Grafiklösungen.</p></li></ul><p>
Mit aktuellen Versionen von Ubuntu, RHEL oder Fedora kann man <a class="external" href="http://www.linux-kvm.org/page/SPICE" rel="nofollow">Spice direkt mit dem VMM</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> nutzen: Dazu stellt man im Dialog <em>"Anzeige"</em> die Detailansicht <em>"Typ = Spice"</em> ein. Außerdem muss man im Dialog <em>"Video"</em> die Einstellung <em>"Modell = qxl"</em> vornehmen. Nach dem Start wird das Grafiksystem wie bisher im Konsolenfenster des Virtual Machine Managers angezeigt. Rein optisch wird man also keinen Unterschied zu VNC bemerken.</p><p>Der in den VMM standardmäßig integrierte VNC-Client überträgt Tastatureingaben in Form von RAW-Codes. Sofern im Host- und im Gastsystem dasselbe Tastaturlayout eingestellt ist, gibt es keine Probleme mit dem Tastaturlayout. Spice hingegen überträgt Tastatureingaben immer gemäß dem US-Layout. Um die daraus resultierenden Probleme zu lösen, kann in der Detailansicht des VMMs (Dialog <em>"Anzeige"</em>) das gewünschte Tastaturlayout angegeben werden. Es ist in der XML-Datei der virtuellen Maschine gespeichert (Attribut <em>"keymap"</em>):</p><pre class="notranslate"># in /etc/libvirt/qemu/my_vmname.xml
...
&lt;graphics type='spice' port='-1' autoport='yes' keymap='de'/&gt;</pre><p>Damit QXL vom Gast optimal unterstützt wird, muss dort ein QXL-Treiber zur Verfügung stehen. Bei aktuellen Linux-Distributionen ist dies oft standardmäßig der Fall. Bei manchen Linux-Distributionen muss man das QXL-Treiberpaket selbst installieren (Paketname zum Beispiel <strong>spice-vdagent</strong>). Für Windows und als Linux-Quellcode kann man es von der <a class="external" href="http://spice-space.org/download.html" rel="nofollow">Spice-Projektseite</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> runterladen.</p><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>VMM aus den offiziellen Paketquellen unterstützt "out of the box" keine Spice-Verbindungen. Auf der grafischen Konsole steht schlicht: <em>"No module named SpiceClientGtk"</em>. Der <a class="interwiki interwiki-bug" href="https://launchpad.net/bugs/1263499">Fehler</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ist bekannt: Im Paket fehlt eine Abhängigkeit. Diese muss nachinstalliert werden:</p><ul><li><p><strong>python-spice-client-gtk</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install python-spice-client-gtk </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install python-spice-client-gtk </pre></div></div><p>
</p></div></div><p>
</p></div></div></div></div></div><div class="section_1"><h2 id="Benutzung">Benutzung<a class="headerlink" href="#Benutzung">¶</a></h2><p>
Wie bereits oben erwähnt besteht VMM aus einer grafischen Benutzeroberfläche und mehreren Kommandozeilen-Programmen.</p><p><a class="crosslink anchor" href="#gui" id="gui"></a>
</p><div class="section_2"><h3 id="Grafische-Benutzeroberflaeche">Grafische Benutzeroberfläche<a class="headerlink" href="#Grafische-Benutzeroberflaeche">¶</a></h3><p>
<img alt="vmm.png" class="image-right" src="./_/08794af4e8b3d3ac6be6b464f0cc85cd01608637.png"/>
Diese kann man unter <a class="internal" href="./gnome.html">GNOME</a> über <em>"Anwendungen -&gt; Systemwerkzeuge -&gt; Virtual Machine Manager"</em> starten.</p><p>Nach dem Start erscheint ein Übersichtsfenster, welches alle installierten bzw. unter Verwaltung stehenden virtuellen Maschinen zeigt.</p><p>Im Ansichtsfenster sieht man auch den Status, wo die Maschine liegt etc. Die Ansicht kann über das Menü <em>"View"</em> angepasst werden.</p></div><div class="section_2"><h3 id="Mit-anderen-Rechnern-verbinden">Mit anderen Rechnern verbinden<a class="headerlink" href="#Mit-anderen-Rechnern-verbinden">¶</a></h3><p>
Wie oben bereits erwähnt kann VMM auch virtuelle Maschinen auf anderen Rechner verwalten. Um sich mit diesem zu verbinden, klickt man auf <em>"File -&gt; Open Connection"</em>. Hier besteht die Wahl zwischen einer <a class="internal" href="./ssh.html">SSH</a>-verschlüsselten Verbindung und Absicherung über ein x509-Zertifikat. Natürlich müssen für beide Methode die entsprechenden Konfigurationen vorher angelegt sein. Weitere Informationen, auch zur Einrichtung und zu Vor- und Nachteilen der Methoden, findet man im <a class="external" href="http://virt-manager.org/page/Main_Page" rel="nofollow">VMM-Wiki</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Damit die Administration auf anderen Rechner funktioniert, muss dort auch <strong>libvirt-bin</strong> installiert sein und der Remote-Benutzer muss dort auch Mitglied der Gruppe <code class="notranslate">libvirtd</code> sein.
</p></div></div></div><div class="section_2"><h3 id="Neue-virtuelle-Maschine-einrichten">Neue virtuelle Maschine einrichten<a class="headerlink" href="#Neue-virtuelle-Maschine-einrichten">¶</a></h3><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Verwendet man virt-manager zusammen mit QEMU, so ist das Anlegen virtueller Maschinen nur möglich, indem man die <em>qemu://system</em>-Instanz benutzt. virt-manager zeigt standardmäßig nur <em>qemu://session</em> an, wo das Anlegen neuer VMs nur als root möglich ist. Möchte man virtuelle Maschinen anlegen, so sollte man zu <em>"Datei -&gt; Add Connection"</em> navigieren, und als Hypervisor <em>"QEMU/KVM"</em> sowie die Art der Verbindung - z.B <em>"Lokal"</em> - auswählen und sich so zu QEMU verbinden. Siehe <a class="interwiki interwiki-bug" href="https://launchpad.net/bugs/405388">405388</a>.
</p></div></div><p>Zum Anlegen einer neue virtuellen Maschine wählt man im Hauptfenster den gewünscht Host (z.B. localhost) und klickt anschließend auf <em>"Neu"</em>. Nun wird man in einem sieben-schrittigen Dialog durch das Anlegen der virtuellen Maschine geführt. Als erstes legt man den Namen der virtuellen Maschine fest. Dieser kann beliebig vergeben werden. Im zweiten Schritt wählt man die Art der Virtualisierung aus, d.h. welche Technologie zum Einsatz kommt. Je nach installiertem Virtualisierer stehen nicht alle Auswahlpunkte zur Verfügung. Wichtig ist, dass man - sofern anwählbar - den Haken bei <em>"Enable Kernel / Hardware Virtualization"</em> setzt, weil sonst nur eine Emulation stattfindet, die sehr langsam ist.</p><p>Im dritten Schritt wählt man, ob man von einem ISO-Image, von einer CD/DVD oder via PXE-Netboot installieren will. Das ISO-Image bzw. die CD müssen dabei nicht unbedingt auf dem lokalen Rechner liegen - sie müssen lediglich auf einem Laufwerk liegen, auf das man Zugriff hat. Weiterhin wird im dritten Schritt die Art des installierten Betriebssystems gewählt. Dies hat einen gewissen Einfluss auf die Art, wie die virtuelle Maschine konfiguriert wird. Die virtuelle Maschine wird über <em>"OS Type"</em> und <em>"OS Variant"</em> definiert.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Kommt es bei der Installation von Linux-Varianten zu Problemen bzw. hängt sich die Installation auf, so kann man versuchen, unter <em>"OS Variant"</em> eine allgemeinere Variante zu wählen also z.B. <em>Generic 2.6.x Kernel"</em> statt <em>"Ubuntu Precise"</em>.</p><p>Bei Windows Installation sollte man immer die korrekte Variante wählen, da hier dann die spezifischen Besonderheiten der verschiedenen Windows-Versionen berücksichtigt werden (z.B. in Bezug auf ACPI).
</p></div></div><p>Im vierten Schritt legt man fest, in welches (virtuelle) Laufwerk die Installation erfolgen soll. Dies kann entweder eine komplette Partition sein (<em>"Normal Disk Partition"</em>) oder eine Datei (<em>"Simple File"</em>). Bei der Datei kann man noch festlegen, wie groß diese sein soll und ob die Datei direkt komplett anglegt wird oder dynamisch wachsen soll. Auch in diesem Schritt gilt, dass weder die Partition noch die Datei auf der lokalen Maschine liegen müssen, es können auch andere, externe Laufwerke sein, auf die man Zugriff hat. Es ist grundsätzlich auch möglich, eine VM ohne virtuelle Harddisk anzulegen, allerdings nur über die Konsole mit Hilfe von <a class="crosslink" href="#Virt-install">virt-install</a>.</p><p>Im fünften legt man die Netzwerk-Einstellung fest. Je nach <a class="crosslink" href="#Vorbereitung">Vorbereitung</a> stehen hier nicht alle Optionen zur Verfügung. Der Standard ist, wie oben bereits erwähnt, <em>"Virtual Network -&gt; Default"</em>.</p><p>Im sechsten Schritt gibt man an, wie viel RAM der virtuellen Maschine zur Verfügung stehen soll. Es wird ein Startwert und ein maximaler Wert vorgegeben. Außerdem kann man hier festlegen - sofern der Virtualisierer dies unterstützt - wie viele CPUs eine virtuelle Maschine haben soll.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Der über den Wert für <em>"VM Startup Memory"</em> definierte Speicher wird beim Starten der virtuellen Maschine sofort alloziert, egal ob dieser komplett gebraucht wird oder nicht!
</p></div></div><p>Im letzten Schritt wird nochmals eine Zusammenfassung gezeigt und ein Klick auf <em>"Finish"</em> startet die Installation.</p></div><div class="section_2"><h3 id="Virtuelle-Maschine-starten-und-steuern">Virtuelle Maschine starten und steuern<a class="headerlink" href="#Virtuelle-Maschine-starten-und-steuern">¶</a></h3><p>
Startet man eine Neuinstallation, so startet die VM direkt automatisch, bereits installierte virtuelle Maschinen können von Hand gestartet werden. Dazu wählt man im Hauptfenster den Wirt, klickt dann auf die gewünschte VM und klickt nun auf <em>"Öffnen"</em>. Nun erscheint ein neues Fenster für die VM. Ein Klick auf <em>"Start"</em> starte die Maschine und die Bildschirmausgabe erscheint im Fenster.</p><p>Über den Punkt <em>"Virtual Maschine"</em> kann man die laufende VM steuern, z.B. pausieren und beenden. Der Punkt <em>"Destroy"</em> entspricht dabei einem "harten" Ausschalten, also quasi so, als ob die Stromversorgung eines realen Computers unterbrochen wird. Daher sollte man diesen Punkt nur wählen, wenn die VM sich auf normalem Wege nicht mehr herunterfahren lässt.</p><div class="section_3"><h4 id="Hardware-veraendern">Hardware verändern<a class="headerlink" href="#Hardware-veraendern">¶</a></h4><p>
Man kann mit Hilfe des virt-managers auch die Hardware der VM im Nachhinein ändern. Dazu klickt man im Hauptfenster auf die gewünscht VM und klickt dann auf den Reiter <em>"Hardware"</em>. In der Liste kann man nun eine Hardware-Komponente auswählen und - falls möglich - deren Eigenschaften ändern. Über die Schaltflächen <em>"Hinzufügen"</em> und <em>"Entfernen"</em> kann man Hardware-Komponenten "ein-" bzw. "ausbauen".</p><p>Die Änderungen sind teilweise auch im laufenden Betrieb möglich.</p></div><div class="section_3"><h4 id="Tastaturkommandos-senden">Tastaturkommandos senden<a class="headerlink" href="#Tastaturkommandos-senden">¶</a></h4><p>
Sehr praktisch ist die Funktion, Tastaturkommandos zu senden, besonders wenn diese normalerweise der "Hotkey" des Virtualisierers ist. So ist es mit QEMU / KVM normalerweise nicht möglich 
<span class="key">Strg</span>  + 
<span class="key">Alt</span>  + 
<span class="key">F1</span>  etc. zu senden, da mit 
<span class="key">Strg</span>  + 
<span class="key">Alt</span>  der Fokus des Virtualisierers verlassen wird. Alle Tastenkombinationen, die gesendet werden können, findet man im Menü <em>"Send key"</em>.</p></div></div><div class="section_2"><h3 id="Austauschverzeichnis-zwischen-Host-und-Gast-einrichten">Austauschverzeichnis zwischen Host und Gast einrichten<a class="headerlink" href="#Austauschverzeichnis-zwischen-Host-und-Gast-einrichten">¶</a></h3><p>
<img alt="vmm_shared_folder.png" class="image-right" src="./_/48e81a46ce70abd315d45495d054ef2bdfe5c494.png"/>
Davon ausgehend dass beide Systeme Ubuntu verwenden, muss zunächst im Virt Manager ein Verzeichnis auf Hostseite angegeben werden wie im Bildschirmfoto zu sehen. Hierzu muss das Gastsystem ausgeschaltet sein. Nach dem Einschalten des Gastes muss zunächst ein Verzeichnis als Einhängepunkt erstellt werden und anschließend kann das angegebene Verzeichnis eingebunden werden. Auf der Kommandozeile wären für das angegebene Beispiel folgende Befehle nötig:
</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span>$ mkdir /tmp/share
$ sudo mount -t 9p -o <span class="nv">trans</span><span class="o">=</span>virtio,version<span class="o">=</span>9p2000.L /share /tmp/share
</pre></div>
</td></tr></table></div></div><div class="section_2"><h3 id="Kommandozeile">Kommandozeile<a class="headerlink" href="#Kommandozeile">¶</a></h3><p>
Bei der Installation von VMM werden drei Kommandozeilen-Programme mit installiert, welche ebenfalls der Verwaltung von virtuellen Maschinen dienen:</p><div class="section_3"><h4 id="Virt-image">Virt-image<a class="headerlink" href="#Virt-image">¶</a></h4><p>
Mit Hilfe dieses Programm ist es möglich, eine neue virtuelle Maschine für den VMM anzulegen. Anlegen heißt in hier, dass eigentlich "nur" die XML-Datei angelegt wird, die die virtuelle Maschine beschreibt, für die Installation ist <a class="crosslink" href="#virt-install">virt-install</a> zuständig. Die XML-Datei findet man dann unter <strong>/etc/libvirt/&lt;VIRTUALISIERUNG&gt;</strong>, also z.B. <strong>/etc/libvirt/QEMU</strong>, wenn QEMU eingesetzt wird.</p><p>virt-image kann mit einer Reihe von Optionen aufgerufen werden, welche die Konfiguration der virtuellen Maschine definieren. Diese sind recht ausführlich in der <a class="internal" href="./man.html">Man-Page</a> von virt-image inkl. einiger Beispiel beschrieben.</p></div><div class="section_3"><h4 id="Virt-install">Virt-install<a class="headerlink" href="#Virt-install">¶</a></h4><p>
virt-install dient der Installation von neuen virtuellen Maschinen für VMM. Die Optionen entsprechen denen der grafischen Benutzeroberfläche und sind sehr ausführlich in der <a class="internal" href="./man.html">Man-Page</a> inkl. einiger Beispiele beschrieben. Einige Optionen entsprechen denen von <a class="crosslink" href="#virt-image">virt-image</a>. virt-install kann direkt ausgeführt werden, es muss vorher kein Image via virt-image angelegt werden.</p></div><div class="section_3"><h4 id="VM-fuer-Live-CD">VM für Live-CD<a class="headerlink" href="#VM-fuer-Live-CD">¶</a></h4><p>
Wie weiter oben bereits erwähnt ist es mit Hilfe der grafischen Benutzeroberfläche nicht möglich, virtuelle Maschinen ohne virtuelle Harddisk zu erstellen. Dies kann dann z.B. gewünscht sein, wenn man eine Live-CD in einer VM laufen lassen möchte.</p><p>Der folgende Aufruf von virt-install erzeugt eine entsprechende virtuelle Maschine <sup><a href="#source-2">[2]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo virt-install --hvm --name JuxLaLa --ram 384 --nodisks --livecd --vnc --cdrom /media/daten_ntfs/virtuelle_laufwerke/JUXlala_2.0.iso --network network:default </pre></div></div><p>In der Regel wird man trotzdem nach einer Harddisk und deren Größe gefragt. Hier gibt man dann als HD <code class="notranslate">None</code> ein und als Größe <code class="notranslate">0</code>. Alle Optionen sind in der Manpage erklärt.</p></div><div class="section_3"><h4 id="Virt-clone">Virt-clone<a class="headerlink" href="#Virt-clone">¶</a></h4><p>
Wie der Name schon vermuten lässt, dient dieses Programm dem Klonen von vorhanden virtuellen Maschinen. Dabei werden alle Parameter übernommen. Die Parameter, welche einmalig sein müssen (z.B. die UUID der virtuellen Maschine oder die MAC-Adresse der Netzwerkkarte) ersetzt virt-clone selbstständig. Ein Übersicht über alle Optionen von virt-clone findet man nach dem Aufruf von <code class="notranslate">virt-clone -h</code> oder in den <a class="internal" href="./man.html">Man-Pages</a>, in denen auch einige Beispiele enthalten sind.</p></div></div></div><div class="section_1"><h2 id="Problemloesung">Problemlösung<a class="headerlink" href="#Problemloesung">¶</a></h2><p>
</p><div class="section_2"><h3 id="Kein-Netzwerk-trotz-default-Einstellung">Kein Netzwerk trotz "default"-Einstellung<a class="headerlink" href="#Kein-Netzwerk-trotz-default-Einstellung">¶</a></h3><p>
Hat die virtuellen Maschine keine Netzwerkverbindung, so kann das daran liegen, dass die genutzte virtuelle Schnittstelle <code class="notranslate">vnet0</code> von NetworkManager nicht korrekt konfiguriert wird. Dies kann man recht einfach beheben, in dem man in der Datei <strong>/etc/network/interfaces</strong> folgende Zeile einfügt <sup><a href="#source-4">[4]</a></sup>:</p><pre class="notranslate">iface vnet0 inet manual</pre></div><div class="section_2"><h3 id="Zwischenablage-funktioniert-nicht">Zwischenablage funktioniert nicht<a class="headerlink" href="#Zwischenablage-funktioniert-nicht">¶</a></h3><p>
Zunächst muss sichergestellt werden, dass im VMM als Anzeige Spice mit Video QXL konfiguriert ist. Weiterhin muss dann in der virtuellen Maschine das Paket <code class="notranslate">spice-vdagent</code> installiert werden.<sup><a href="#source-1">[1]</a></sup> Siehe auch: <a class="external" href="https://unix.stackexchange.com/questions/109117/virt-manager-copy-paste-functionality-to-the-vm" rel="nofollow" title="https://unix.stackexchange.com/questions/109117/virt-manager-copy-paste-functionality-to-the-vm"><span class="longlink_show">https://unix.stackexchange.com/quest</span><span class="longlink_collapse">ions/109117/virt-manager-copy-paste-functiona</span><span>lity-to-the-vm</span></a></p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://docs.fedoraproject.org/de-DE/Fedora/12/html/Virtualization_Guide/chap-Virtualization_Guide-Managing_guests_with_the_Virtual_Machine_Manager_virt_manager.html" rel="nofollow">Das Verwalten von Gästen mit dem Virtual Machine Manager</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Fedora Dokumentation</p></li><li><p><a class="external" href="http://www.admin-magazin.de/Das-Heft/2012/06/Virtuelle-Maschinen-mittels-VNC-und-Spice-bedienen" rel="nofollow">Virtuelle Maschinen mittels VNC und Spice bedienen</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Michael Kofler, ADMIN Magazin</p></li><li><p><a class="external" href="http://www.linux-kvm.org/page/SPICE" rel="nofollow">Example using SPICE and QXL for improved Graphics experience in the guest</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - RedHat Emerging Technology Project</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./virt-manager/a/revision/939929.html">Diese Revision</a> wurde am 6. Mai 2017 17:04 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./virt-manager.html">virt-manager</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>