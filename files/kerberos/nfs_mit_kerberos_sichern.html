<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Kerberos/NFS_mit_Kerberos_sichern › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../kerberos/nfs_mit_kerberos_sichern.html">NFS mit Kerberos sichern</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Kerberos/NFS_mit_Kerberos_sichern">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../kerberos/nfs_mit_kerberos_sichern/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../kerberos/nfs_mit_kerberos_sichern/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../kerberos/nfs_mit_kerberos_sichern/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../kerberos/nfs_mit_kerberos_sichern/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../kerberos/nfs_mit_kerberos_sichern/a/backlinks.html">NFS mit Kerberos sichern</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="../xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="../trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><p>
</p><div class="box advanced"><h3 class="box advanced">Artikel für fortgeschrittene Anwender</h3><div class="contents"><p>
Dieser Artikel erfordert mehr Erfahrung im Umgang mit
Linux und ist daher nur für fortgeschrittene Benutzer
gedacht.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../sudo.html">Root-Rechte</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../nfs.html">Umgang mit NFS</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../kerberos.html">Umgang mit Kerberos</a></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="../dns-server_bind.html">Umgang mit BIND oder einem anderen DNS-Dienst</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Sicherheitskonzept">Sicherheitskonzept
</a></li><li><a class="crosslink" href="#Voraussetzungen">Voraussetzungen
</a></li><li><a class="crosslink" href="#Kerberos-Konfiguration">Kerberos - Konfiguration
</a></li><li><a class="crosslink" href="#NFS-Konfiguration-Server">NFS - Konfiguration - Server
</a><ol class="arabic"><li><a class="crosslink" href="#Vergleichstest">Vergleichstest
</a></li></ol></li><li><a class="crosslink" href="#NFS-Konfiguration-Client">NFS - Konfiguration - Client
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="Wiki/Icons/service.png" class="image-left" src="../_/afb6c1869d3e3412cb022363511bce77dccf937a.png"/>
<a class="internal" href="../nfs.html">NFS</a> wurde ursprünglich für "vertrauenswürdige" Netzwerke entwickelt. Es bietet von sich aus keinen Mechanismus, um Benutzer zu authentifizieren. Der NFS-Server überlässt die Zugangskontrolle komplett den Clients. Ein Benutzer, der Root-Rechte an einem Client erlangen kann, ist somit in der Lage, Zugriff auf jede beliebige Datei im NFS-Share zu bekommen (im Zweifelsfall, in dem er sich mit <code class="notranslate">su</code> oder <code class="notranslate">sudo</code> als richtiger Benutzer ausgibt). Dieses grundlegende Vertrauen wurde als Designfehler "identifiziert" und war lange Zeit ein Grund, NFS nicht einzusetzen.</p><p>Mit NFS4 wurde dieses Problem durch die Möglichkeit der Kerberos-Authentifizierung behoben.</p><div class="section_1"><h2 id="Sicherheitskonzept">Sicherheitskonzept<a class="headerlink" href="#Sicherheitskonzept">¶</a></h2><p>
Wird Kerberos zur Authentifizierung eingesetzt, müssen folgende Bedingungen erfüllt sein, dass eine NFS-Operation ausgeführt werden kann:</p><ol class="arabic"><li><p>Der NFS-Server muss gegenüber Kerberos authentifiziert sein (nicht benutzerbezogen).</p></li><li><p>Ein Client muss gegenüber dem Kerberos Server authentifiziert sein (nicht benutzerbezogen).</p></li><li><p>Der Benutzer, der am Client angemeldet ist, muss gegenüber Kerberos authentifiziert sein.</p></li></ol><p>
Zu diesem Zweck werden auf dem NFS-Server als auch auf dem Client Kerberos-Keys hinterlegt, die beglaubigen, dass der Rechner für eine Aufgabe freigeschaltet ist (ähnlich dem Konzept einer <a class="internal" href="../ca.html">CA</a>). So kann sowohl der Client als auch der Server zu seinen Partnern vertrauenswürdig identifiziert werden.</p><p>Meldet sich ein Benutzer am Client über Kerberos an, wird diesem ein Ticket zugewiesen. Bei der ersten Kommunikation mit dem NFS-Server (das muss nicht unbedingt ein Mount sein) wird diesem Benutzer-Ticket ein Task-Ticket des NFS-Servers zugewiesen. Umgekehrt wird dem NFS-Server ein Task-Ticket des Clients zugewiesen. Diese Tickets/Keys werden dann von NFS zur Authentifizierung und ggf. Verschlüsselung genutzt. Somit werden gleich eine Reihe von Angriffen ausgeschlossen. Von dem einfachen "unbekannten Client", der sich einfach mit dem NFS-Share verbindet, bis hin zu Man-In-The-Middle Attacken.</p><p>Da beim Einsatz des IDMAP-Daemons (muss in der NFS-Konfig aktiviert werden) nicht mehr direkt mit UIDs zwischen Client und Server gearbeitet wird, sind Angriffsszenarien mit wechselnder UID unterbunden. Die Kerberos-Benutzernamen werden auf Serverseite in UIDs gemapt. So kann ein "Superuser" am Client keine Möglichkeit, seine UID zu verändern. Einzige Ausnahme ist das Übernehmen einer bestehenden Kerberos-Sitzung. Ein Beispielszenario um das zu verdeutlichen:</p><ul><li><p>An einer Workstation sind drei Benutzer angemeldet: A, C und D. Einer vierter User B ist aktuell nicht angemeldet aber prinzipiell zur Anmeldung auf dem Rechner berechtigt.</p></li><li><p>Benutzer A ist gegenüber Kerberos authentifiziert.</p></li><li><p>Benutzer C ist lokaler Admin. Ein Benutzer mit gleicher UID existiert aber am NFS-Server.</p></li><li><p>Benutzer D ist gegenüber Kerberos authentifiziert und lokaler Admin.</p></li></ul><p>
Wird ein NFS-Share mit Kerberos-Authentifizierung gemounted, kann Benutzer A und B darauf zugreifen. Benutzer C wird unabhängig von seinen lokalen Rechten keinen Zugriff erhalten, da er kein gültiges Ticket und somit auch keine Schlüssel besitzt.</p><p>Benutzer D kann hingegen ebenfalls auf das NFS-Share zugreifen, jedoch ungeachtet seiner "lokalen" Rechte. Der Kerberos-Benutzername wird zum Server übertragen und dort in eine UID gemapt. Auch die Gruppenberechtigung wird am Server geprüft, selbst wenn sich Benutzer D lokal als Mitglied aller Gruppen hinterlegt hat.</p><p>Beide Superuser können sich jedoch in den Kontext des Benutzers A setzen und dessen Session mitnutzen. Dazu müssen sie wissen, welchen Kerberos-Ticket-Cache Benutzer A gerade nutzt (im Zweifelsfall durchprobieren) und setzen anschließend diesen Cache als eigene Environment-Variable oder kopieren sich den Cache. Ab diesem Zeitpunkt können sich Benutzer C und D als Benutzer A ausgeben – jedoch nur so lange, wie die Tickets gültig sind. Zum Erneuern der Tickets wird der Schlüssel von Benutzer A benötigt. Meldet sich dieser ab, verfällt der Zugriff.</p></div><div class="section_1"><h2 id="Voraussetzungen">Voraussetzungen<a class="headerlink" href="#Voraussetzungen">¶</a></h2><p>
Der Kombination NFS - Kerberos (LDAP) wird häufig vorgeworfen, komplizierter in der Einrichtung zu sein als das Pendant <a class="internal" href="../samba.html">Samba</a>. Dies stimmt auf den ersten Blick. Es werden schlicht mehr Dienste zum sicheren Betrieb von NFS benötigt als bei Samba. Dies relativiert sich jedoch, sobald man NFS in ein bestehendes Netzwerk einbringt. Die Dienste (DNS, <a class="internal" href="../kerberos.html">Kerberos</a>, <a class="internal" href="../openldap_ab_precise.html">LDAP</a>, NTP), die benötigt werden, sind meist sowieso vorhanden.</p><p>Bevor man jedoch NFS an Kerberos anbinden kann, sollten folgenden Rahmenbedingen erfüllt sein:</p><ul><li><p>Das Netzwerk muss einen DNS-Server besitzen, der für alle Clients und Server einen "Reverse Lookup" bereit hält. Kerberos verlässt sich stark auf ein funktionierendes DNS. Siehe <a class="internal" href="../dns-server_bind.html">Bind</a>.</p></li><li><p>Ein Kerberos Server muss vorhanden sein und auf den Clients muss die Kerberos-Authentifizierung aktiviert sein. Am Clients sollte man sich mit Kerberos anmelden können.</p></li><li><p>Das Kerberos-Protokoll setzt voraus, dass auf allen Rechnern die Uhren synchronisiert sind. Das kann unter Ubuntu durch das NTP-Protokoll erfolgen. Siehe <a class="internal" href="../ntp.html">Network Time Protocol</a></p></li><li><p>Ein NFS-Server sollte existieren und zum Test ein Verzeichnis exportieren. Es ist einfacher, ein bereits funktionierendes NFS-Share auf Kerberos umzustellen als den Server komplett neu aufzusetzen. Siehe <a class="internal" href="../nfs.html">NFS</a></p></li><li><p>Unter Umständen benötigt man LDAP zum Abgleich der Benutzernamen und Gruppen. Das kann man in kleinen Netzen auslassen. Dort kann man die Gruppen manuell synchron halten. Siehe <a class="internal" href="../openldap_ab_precise.html">OpenLDAP ab Precise</a></p></li></ul><p>
</p></div><div class="section_1"><h2 id="Kerberos-Konfiguration">Kerberos - Konfiguration<a class="headerlink" href="#Kerberos-Konfiguration">¶</a></h2><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Unter Ubuntu 10.04 wird noch eine NFS-Version verwendet, die <code class="notranslate">des-cbc-crc</code> als Verschlüsselung benutzt. Diese wird von Kerberos standardmäßig als "depreciated" angesehen und es werden keine Verbindungen zugelassen. Um das zu umgehen, muss man in der <strong>/etc/krb5.conf</strong> folgenden Parameter ändern:</p><pre class="notranslate">  [libdefaults]
  allow_weak_crypto = true</pre><p>
Quelle: <a class="interwiki interwiki-ubuntu_doc" href="https://help.ubuntu.com/community/NFSv4Howto">Ubuntu NFS4 HowTo</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p><p>Dies muss auf allen beteiligten Clients und Servern passieren.
</p></div></div><p>
Als erstes muss man sowohl für die NFS-Clients als auch die NFS-Server Tasks anlegen. Das kann auf einem beliebigen Kerberos-Client ohne Root-Rechte erfolgen.</p><div class="bash"><div class="contents"><pre class="notranslate">kadmin -p some-kerberos-admin/admin
addprinc -randkey nfs/nfs-server1.example.com
addprinc -randkey nfs/nfs-server2.example.com
addprinc -randkey nfs/nfs-client1.example.com
addprinc -randkey nfs/nfs-client2.example.com
addprinc -randkey nfs/nfs-client3.example.com </pre></div></div><p>Anschließend auf jedem Client und Server die Task/Keys hinterlegt werden. Dazu muss man mit Root-Rechten eine Kerberos-Umgebung initialisieren und die Task hinterlegen. Die Root-Rechte werden benötigt, da die Keys in der Datei <strong>/etc/krb5.keytab</strong> hinterlegt werden und dort nur Root Schreibzugriff hat. Auf dem Server <code class="notranslate">nfs-server1.example.com</code> erfolgt das wie folgt:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo kinit some-kerberos-admin/admin
sudo kadmin -p some-kerberos-admin/admin
ktadd nfs/nfs-server1.example.com </pre></div></div><p>Auf allen Clients wird gleichermaßen vorgegangen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo kinit some-kerberos-admin/admin
sudo kadmin -p some-kerberos-admin/admin
ktadd nfs/nfs-cient1.example.com </pre></div></div><p>Wichtig ist, dass die Domainnamen korrekt zu den Client-IPs aufgelöst werden und umgekehrt. Anschließend kann man prüfen, ob die Task/Keys korrekt hinterlegt wurden.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo klist -e -k /etc/krb5.keytab </pre></div></div><pre class="notranslate">Keytab name: WRFILE:/etc/krb5.keytab
KVNO Principal
---- --------------------------------------------------------------------------
   5 nfs/nfs-server1.example.com@REALM (ArcFour with HMAC/md5) 
   5 nfs/nfs-server1.example.com@REALM (DES cbc mode with CRC-32) 
   5 nfs/nfs-server1.example.com@REALM (AES-256 CTS mode with 96-bit SHA-1 HMAC) 
   5 nfs/nfs-server1.example.com@REALM (Triple DES cbc mode with HMAC/sha1)</pre></div><div class="section_1"><h2 id="NFS-Konfiguration-Server">NFS - Konfiguration - Server<a class="headerlink" href="#NFS-Konfiguration-Server">¶</a></h2><p>
Die NFS Konfiguration ist wesentlich simpler. Auf Serverseite müssen folgende Dateien angepasst werden:</p><ul><li><p><strong>/etc/default/nfs-kernel-server</strong> - Dort muss der GSS-Daemon aktiviert werden. </p><pre class="notranslate">NEED_SVCGSSD=yes </pre></li><li><p><strong>/etc/default/nfs-common</strong> - Hier muss der IDMAP-Daemon aktiviert werden, der die Gruppen zwischen Server und Client mapt. </p><pre class="notranslate">NEED_IDMAPD=yes</pre></li><li><p><strong>/etc/exports</strong> - Anschließend muss man die Exports auf Kerberos-Authentifizierung umstellen. </p><pre class="notranslate">/export        10.0.0.0/24(sec=krb5,rw,fsid=0, secure, no_subtree_check,async,no_all_squash)
/export/Share1 10.0.0.0/24(sec=krb5,rw,fsid=0, secure, no_subtree_check,async,no_all_squash)
/export/Share2 10.0.0.0/24(sec=krb5,rw,fsid=0, secure, no_subtree_check,async,no_all_squash)</pre><p> </p><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Es existiert auch folgende Schreibweise:
</p><pre class="notranslate">/export       gss/krb5(rw,fsid=0, secure, no_subtree_check,async,no_all_squash)</pre><p>
Diese ist jedoch als "depreciated" markiert und sollte nicht mehr verwendet werden.
</p></div></div></li></ul><p>
</p><div class="section_2"><h3 id="Vergleichstest">Vergleichstest<a class="headerlink" href="#Vergleichstest">¶</a></h3><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Alle Messungen erfolgten zwischen einem 3.0 GHz Core2Duo (Client, Bonnie++) und einem 2.5Ghz Core2Duo (Server, verschlüsseltes RAID, Nettoleistung 120MB/s) und Netzwerk Gigabit-LAN (max. Durchsatz theoretisch: 128 MB/s). Auffällig ist der extreme Leistungsabfall bei krb5p. Dieses Verhalten sollte aber besser werden, sobald man eine NFS-Version einsetzt, die <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Advanced_Encryption_Standard">AES</a> unterstützt, da die AES-Kernel-Implementierung mittlerweile multicore-fähig ist.</p><p>Quelle: <a class="interwiki interwiki-bug" href="https://launchpad.net/bugs/566588">Launchpad Bugreport</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>
</p></div></div><p>
</p><table><tr class="titel"><td colspan="4">Verfügbare sec-Modi </td></tr><tr class="kopf"><td>Modus </td><td> Beschreibung </td><td> Anmerkung </td><td> Durchsatz </td></tr><tr><td> krb5 </td><td> Server und Client werden bei jedem RPC-Call gegeneinander authentifiziert. Es findet keine Verschlüsselung statt. </td><td> Dieser Modus dient rein zur Authentifizierung. Ein Angreifer kann Datenpakete verändern bzw. einschleusen. Er kann zusätzlich den kompletten Datenstrom mitlesen. </td><td> 95.1 MB/s </td></tr><tr><td> krb5i </td><td> Neben der Kerberos-Authentifizierung wird ein MD5-Hash über das komplette RPC-Paket gebildet (RPC-Methode und NFS-Parameter / -Rückgabe). </td><td> Ein Angreifer kann keine Datenpakete verändern oder einschleusen, kann jedoch immer noch "mitlesen". </td><td> 94,5 MB/s </td></tr><tr><td> krb5p </td><td> Jedes Paket wird authentifiziert und signiert. Zusätzlich werden die NFS-Parameter / -Rückgabewerte noch verschlüsselt. </td><td> Ein Angreifer kann zwar immer noch ermitteln, welche RPC-Operationen ausgeführt werden, jedoch nicht mehr, welche Parameter übergeben werden. </td><td> 23.8 MB/s </td></tr></table><p>Will man dem Client die Wahl der Integrität überlassen, kann man auch mehrere Modi zur Auswahl stellen.</p><pre class="notranslate">/export       10.0.0.0/24(sec=krb5i:krb5p,rw,fsid=0, secure, no_subtree_check,async,no_all_squash)</pre><p>
Im gezeigten Fall kann jeder Client entscheiden, ob der Mount mit krb5i oder krb5p hergestellt werden soll.</p></div></div><div class="section_1"><h2 id="NFS-Konfiguration-Client">NFS - Konfiguration - Client<a class="headerlink" href="#NFS-Konfiguration-Client">¶</a></h2><p>
Auf Clientseite ist die Anpassung trivial. Man bearbeitet die Datei <strong>/etc/default/nfs-common</strong>. Hier werden wieder der IDMAP-Daemon und der GSS-Daemon aktiviert.</p><pre class="notranslate">NEED_IDMAPD=yes
NEED_GSSD=yes </pre><p>Danach muss man den Rechner durchstarten oder manuell die beiden Dienste starten.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service gss start
sudo service idmap start </pre></div></div><p>Anschließend kann man ein Share mounten, wenn man sich in einer gültigen Kerberos-Umgebung befindet:</p><div class="bash"><div class="contents"><pre class="notranslate">mount -t nfs4 -o sec=krb5i,async,soft nfs-server1.example.com:/Share1 /mnt/nfs-share </pre></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="interwiki interwiki-ubuntu_doc" href="https://help.ubuntu.com/community/NFSv4Howto">NFS4 Howto</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://wiki.linux-nfs.org/wiki/index.php/Enduser_doc_kerberos" rel="nofollow">Dokumentation NFSv4/Kerberos</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://www.bresink.de/osx/143439/Docs-en/pgs/Security.html" rel="nofollow">NFS-Sicherheitsmodel</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://www.citi.umich.edu/projects/nfsv4/linux/features.html" rel="nofollow">NFSv4 Features-Liste</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://compute.cnr.berkeley.edu/cgi-bin/man-cgi?nfssec+5" rel="nofollow">Manpage NFSSEC</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="external" href="http://docstore.mik.ua/orelly/networking_2ndEd/nfs/ch12_05.htm" rel="nofollow">Stronger security for NFS</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="internal" href="../kerberos.html">Kerberos</a> - Grundlagenartikel</p></li><li><p><a class="internal" href="../serverdienste.html">Serverdienste</a> <img alt="{Übersicht}" src="../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../kerberos/nfs_mit_kerberos_sichern/a/revision/943508.html">Diese Revision</a> wurde am 4. September 2017 21:40 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../kerberos.html">Kerberos</a></li>
<li><a href="../kerberos/nfs_mit_kerberos_sichern.html">NFS mit Kerberos sichern</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>