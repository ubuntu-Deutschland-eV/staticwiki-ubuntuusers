<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>ubumirror › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./ubumirror.html">ubumirror</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/ubumirror">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./ubumirror/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./ubumirror/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./ubumirror/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./ubumirror/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./ubumirror/a/backlinks.html">ubumirror</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
Dieser Artikel ist mit keiner aktuell unterstützten Ubuntu-Version getestet! Bitte diesen Artikel testen und das getestet-Tag entsprechend anpassen.
</p></div></div><p>
</p><div class="box advanced"><h3 class="box advanced">Artikel für fortgeschrittene Anwender</h3><div class="contents"><p>
Dieser Artikel erfordert mehr Erfahrung im Umgang mit
Linux und ist daher nur für fortgeschrittene Benutzer
gedacht.
</p></div></div><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./sudo.html">Root-Rechte erlangen</a></p></li></ol></div></div><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Ubuntu-Mirror-scripts">Ubuntu Mirror scripts
</a><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Ubumirror-Starten">Ubumirror Starten
</a></li><li><a class="crosslink" href="#Automatisch-Aktualisieren">Automatisch Aktualisieren
</a></li><li><a class="crosslink" href="#Erreichbarkeit">Erreichbarkeit
</a></li></ol></li><li><a class="crosslink" href="#Server-Anmelden">Server Anmelden
</a></li></ol></div><p>Ziel des Artikels ist die Einrichtung eines Spiegels (im englischen <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Mirror">"Mirror"</a> genannt) für die Quellen von Ubuntu, bei dem die Pakete über einen Web- oder Dateiserver abgerufen werden können.</p><p>Als Alternative stehen <a class="internal" href="./apt-mirror.html">apt-mirror</a> und <a class="internal" href="./ubuntu-mirror.html">debmirror</a> zur Verfügung. Für einen Spiegel ist es sinnvoll, einen Root-Server zu nutzen, für den Gebrauch in kleineren Netzwerken und auf Servern mit schmaler Anbindung bzw. im Heimgebrauch ist meist ein <a class="internal" href="./lokale_paketquellen.html#Proxies-Caches-Buendeln-von-Updates">Proxy/Cache</a> vollkommen ausreichend.</p><div class="section_1"><h2 id="Ubuntu-Mirror-scripts">Ubuntu Mirror scripts<a class="headerlink" href="#Ubuntu-Mirror-scripts">¶</a></h2><p>
Das Ziel des <a class="external" href="https://launchpad.net/ubumirror" rel="nofollow">Project Ubuntu Mirror script</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ist es die Installation eines <a class="internal" href="./ubuntu-mirror.html">Ubuntu-Mirror's</a> zu vereinfachen. Das dazu nötige Paket ist in den Quellen enthalten.</p><div class="section_2"><h3 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h3><p>
Folgende Pakete müssen installiert <sup><a href="#source-1">[1]</a></sup> werden:</p><ul><li><p><strong>ubumirror </strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install ubumirror  </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install ubumirror  </pre></div></div><p>
</p></div></div><div class="section_3"><h4 id="Ubumirror-konfigurieren">Ubumirror konfigurieren<a class="headerlink" href="#Ubumirror-konfigurieren">¶</a></h4><p>
Bei der Konfiguration muss man sich entscheiden was man alles spiegeln möchte. Gespiegelt werden kann alles (Ports, DVDs, CDs, Archive, für sämtliche Ubuntu Distributionen), bis herunter zum einzelnem Archiv für die aktuell lokal installierte Ubuntu Version. Um die passende Konfiguration vornehmen zu können, ist es notwendig <strong>/etc/ubumirror.conf</strong> mit einem Editor mit Root-Rechten<sup><a href="#source-3">[3]</a></sup> zu bearbeiten.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="c1">#</span>
<span class="c1">#   ubumirror.conf - configuration file for the ubumirror scripts.</span>
<span class="c1">#</span>

<span class="c1"># Please set the variables below to fit your site.</span>
<span class="c1"># Which email address/user that will receive failure notices.</span>
<span class="nv">EMAIL</span><span class="o">=</span>root@localhost

<span class="c1"># Server's FQDN.</span>
<span class="nv">HOSTNAME</span><span class="o">=</span><span class="k">$(</span>hostname -f<span class="k">)</span>

<span class="c1"># Bandwidth limit for all mirror scripts - set to 0 for no limit.</span>
<span class="nv">SPEED</span><span class="o">=</span><span class="m">0</span>

<span class="c1"># UBUARC_DIR is the destination for the base of the archive directory</span>
<span class="c1"># The script won't run if this variable isn't set</span>
<span class="nv">UBUARC_DIR</span><span class="o">=</span><span class="s2">"/srv/mirror/ubuntu"</span>

<span class="c1"># UBUCDI_DIR is the destination for the base of the cdimage directory</span>
<span class="c1"># The script won't run if this variable isn't set</span>
<span class="nv">UBUCDI_DIR</span><span class="o">=</span><span class="s2">"/srv/mirror/ubuntu-cdimage"</span>

<span class="c1"># UBUREL_DIR is the destination for the base of the releases directory</span>
<span class="c1"># The script won't run if this variable isn't set</span>
<span class="nv">UBUREL_DIR</span><span class="o">=</span><span class="s2">"/srv/mirror/ubuntu-releases"</span>

<span class="c1"># UBUPOR_DIR is the destination for the base of the ports directory</span>
<span class="c1"># The script (ubuports) won't run if this variable isn't set</span>
<span class="nv">UBUPOR_DIR</span><span class="o">=</span><span class="s2">"/srv/mirror/ubuntu-ports"</span>

<span class="c1"># LOGDIR is the destination directory of all the logs</span>
<span class="nv">LOGDIR</span><span class="o">=</span><span class="s2">"/var/log/ubumirror/"</span>

<span class="c1"># UBU{ARC,CDI,REL}_MIRROR is the rsync path in the form of host::directory/ of the</span>
<span class="c1">#   upstream mirrors where the ubumirror scripts will mirror from.</span>
<span class="nv">UBUARC_MIRROR</span><span class="o">=</span>archive.ubuntu.com::ubuntu/
<span class="nv">UBUCDI_MIRROR</span><span class="o">=</span>cdimage.ubuntu.com::cdimage/
<span class="nv">UBUREL_MIRROR</span><span class="o">=</span>rsync.releases.ubuntu.com::releases/
<span class="nv">UBUPOR_MIRROR</span><span class="o">=</span>ports.ubuntu.com::ubuntu-ports/

<span class="c1"># UBUCDI_FLAVOURS is the set of image flavours to pull from UBICDI_MIRROR</span>
<span class="c1"># flavour names must match directory names on the mirror</span>
<span class="nv">UBUCDI_FLAVOURS</span><span class="o">=</span><span class="s2">"\</span>
<span class="s2">  daily daily-live \</span>
<span class="s2">  ubuntu-netbook/daily-live ubuntu-server/daily \</span>
<span class="s2">"</span>

<span class="c1"># UBU{ARC,CDI,REL}_EXCLUDE is what things you want to exclude</span>
<span class="nv">UBUARC_EXCLUDE</span><span class="o">=</span><span class="s2">"\</span>
<span class="s2">  --exclude binary-powerpc/ --exclude binary-sparc/ \</span>
<span class="s2">  --exclude daily-installer-powerpc/ --exclude daily-installer-sparc/ \</span>
<span class="s2">  --exclude installer-powerpc/ --exclude installer-sparc/ \</span>
<span class="s2">  --exclude *_powerpc.deb --exclude *_powerpc.udeb \</span>
<span class="s2">  --exclude *_sparc.deb --exclude *_sparc.udeb \</span>
<span class="s2">  --exclude Contents-powerpc.gz --exclude Contents-sparc.gz \</span>
<span class="s2">"</span>
<span class="nv">UBUCDI_EXCLUDE</span><span class="o">=</span><span class="s2">"\</span>
<span class="s2">  --exclude *-powerpc.* --exclude *-sparc.* \</span>
<span class="s2">  --exclude source/ \</span>
<span class="s2">"</span>
<span class="nv">UBUREL_EXCLUDE</span><span class="o">=</span><span class="s2">"\</span>
<span class="s2">  --exclude *-powerpc.* --exclude *-sparc.* \</span>
<span class="s2">"</span>
<span class="nv">UBUPOR_EXCLUDE</span><span class="o">=</span><span class="s2">"\</span>
<span class="s2">  --exclude binary-powerpc/ --exclude binary-sparc/ \</span>
<span class="s2">  --exclude daily-installer-powerpc/ --exclude daily-installer-sparc/ \</span>
<span class="s2">  --exclude installer-powerpc/ --exclude installer-sparc/ \</span>
<span class="s2">  --exclude *_powerpc.deb --exclude *_powerpc.udeb \</span>
<span class="s2">  --exclude *_sparc.deb --exclude *_sparc.udeb \</span>
<span class="s2">  --exclude Contents-powerpc.gz --exclude Contents-sparc.gz \</span>
<span class="s2">"</span>
</pre></div>
</td></tr></table></div></div><div class="section_3"><h4 id="Speicherplatz-ueberpruefen">Speicherplatz überprüfen<a class="headerlink" href="#Speicherplatz-ueberpruefen">¶</a></h4><p>
Um sicher zu stellen, dass der zur Verfügung stehende Speicherplatz in <strong>/srv</strong> auch sicher ausreicht, sollte dieser überprüft werden <sup><a href="#source-2">[2]</a></sup>. Benötigt werden mindesten ~350GB. Wer  nicht nur die Quellen hosten will, sollte sicherstellen, dass wesentlich mehr freier Speicherplatz zur Verfügung steht. Abhängig von der Konfiguration, können für <strong>/srv</strong> auch bis zu 1TB und mehr benötigt werden.</p><div class="bash"><div class="contents"><pre class="notranslate">df -h /srv </pre></div></div></div></div><div class="section_2"><h3 id="Ubumirror-Starten">Ubumirror Starten<a class="headerlink" href="#Ubumirror-Starten">¶</a></h3><p>
Nach dem Starten dieser Programme als Administrator <sup><a href="#source-2">[2]</a></sup> <sup><a href="#source-4">[4]</a></sup> kann es mehrere Stunden oder Tage dauern (abhängig vom Internet-Anschluss), bis der frisch installierte Spiegel vollständig aktualisiert ist.</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ubuarchive
sudo ubucdimage
sudo ubuports
sudo uburelease </pre></div></div><div class="section_3"><h4 id="Fehler-beheben-Ubumirror-laesst-sich-nicht-starten">Fehler beheben: Ubumirror lässt sich nicht starten<a class="headerlink" href="#Fehler-beheben-Ubumirror-laesst-sich-nicht-starten">¶</a></h4><p>
Es kann vorkommen das bei der Installation die nötigen Verzeichnisse nicht erstellt werden. Sollte dies der Fall sein, müssten Sie noch erstellt werden <sup><a href="#source-2">[2]</a></sup>.
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo mkdir /var/log/ubumirror/ </pre></div></div></div><div class="section_3"><h4 id="Benoetigte-Verzeichnisse-sind">Benötigte Verzeichnisse sind<a class="headerlink" href="#Benoetigte-Verzeichnisse-sind">¶</a></h4><p>
</p><pre class="notranslate">/srv/mirror/ubuntu/
/srv/mirror/ubuntu-cdimage/
/srv/mirror/ubuntu-releases/
/srv/mirror/ubuntu-ports/
/var/log/ubumirror/</pre><p>Nach dem Sicherstellen, dass alle Verzeichnisse vorhanden sind, kann mit dem Startvorgang begonnen werden.
,</p></div></div><div class="section_2"><h3 id="Automatisch-Aktualisieren">Automatisch Aktualisieren<a class="headerlink" href="#Automatisch-Aktualisieren">¶</a></h3><p>
Damit der Spiegel auch aktualisiert bleibt, ist es nützlich die Aktualisierung zu automatisieren. Dieses ist mit Hilfe des Programmes <a class="internal" href="./cron.html">Cron</a> möglich.</p><p>Mittels dieses Zeilenbefehls <sup><a href="#source-2">[2]</a></sup> wird <strong>/etc/crontab</strong> so konfiguriert dass das Verzeichnis <strong>/srv/mirror/ubuntu</strong> alle 6 Stunden aktualisiert wird. Die Konfigurieren kann aber auch problemlos nach den eigenen Bedürfnissen angepasst werden. Beispielsweise in dem man noch ein oder zwei Zeilen für <code class="notranslate">ubucdimage</code> , <code class="notranslate">ubuports</code> oder <code class="notranslate">uburelease</code> einfügt.</p><div class="bash"><div class="contents"><pre class="notranslate">echo "21 */6 * * * root ubumirror /usr/bin/ubuarchive &gt;/dev/null" | sudo tee -a /etc/crontab </pre></div></div></div><div class="section_2"><h3 id="Erreichbarkeit">Erreichbarkeit<a class="headerlink" href="#Erreichbarkeit">¶</a></h3><p>
Um den Spiegel für den eigenen Rechner anzubieten, wird ein http-Server (z.B. <a class="internal" href="./apache.html">Apache</a>) und ein kleiner Softlink benötigt <sup><a href="#source-2">[2]</a></sup>. Apache installiert sich mit dem Paket ubumirror selbst, hierfür ist somit keine weitere Installation notwendig.</p><p>Um die Funktionstüchtigkeit des Webservers sicher zu stellen, sollte an dieser Stelle die Adresse <a class="external" href="http://localhost/" rel="nofollow" title="http://localhost/">http://localhost/</a> in einem beliebigem Browser aufgerufen werden (bei einem Server ohne Browser kann von einem anderem Rechner einfach die IP des Servers aufgerufen werden).</p><p>Den benötigten Softlink legt man mit folgendem Befehl an:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo ln -s /srv/mirror/ubuntu /var/www </pre></div></div></div></div><div class="section_1"><h2 id="Server-Anmelden">Server Anmelden<a class="headerlink" href="#Server-Anmelden">¶</a></h2><p>
Davon ausgehend, dass der frisch installierte Spiegel mittels eigener Domäne auch von außerhalb erreichbar ist, kann man den Server auch <a class="external" href="https://launchpad.net/ubuntu/+newmirror" rel="nofollow">auf Launchpad Registrieren</a>. Hat mit der Registrierung alles geklappt, wird der eigene Server mit dem nächsten Release als offizieller Ubuntu-Mirror eingetragen, und kann von jedem Ubuntu Nutzer in den Software-Paketquelle als alternative Quelle zu <a class="external" href="http://de.archive.ubuntu.com/" rel="nofollow">de.archive.ubuntu.com</a> und Co gewählt werden.</p><p></p></div></div>
<p class="meta">
<a href="./ubumirror/a/revision/939020.html">Diese Revision</a> wurde am 4. Mai 2017 08:27 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./ubumirror.html">ubumirror</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>