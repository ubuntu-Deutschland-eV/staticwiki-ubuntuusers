<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>ImageMagick › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./imagemagick.html">ImageMagick</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/ImageMagick">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./imagemagick/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./imagemagick/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./imagemagick/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./imagemagick/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./imagemagick/a/backlinks.html">ImageMagick</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#bersicht">Übersicht
</a></li><li><a class="crosslink" href="#convert">convert
</a><ol class="arabic"><li><a class="crosslink" href="#Bilder-mit-Wasserzeichen-versehen">Bilder mit Wasserzeichen versehen
</a></li><li><a class="crosslink" href="#Bilder-Fotos-nachbearbeiten">Bilder / Fotos nachbearbeiten
</a></li><li><a class="crosslink" href="#Gescannte-Dokumente-nachbessern">Gescannte Dokumente nachbessern
</a></li></ol></li><li><a class="crosslink" href="#mogrify">mogrify
</a></li><li><a class="crosslink" href="#import">import
</a><ol class="arabic"><li><a class="crosslink" href="#Ausschnitt-in-der-Kommandozeile-waehlen">Ausschnitt in der Kommandozeile wählen
</a></li><li><a class="crosslink" href="#Fernwartung">Fernwartung
</a></li></ol></li><li><a class="crosslink" href="#montage">montage
</a></li><li><a class="crosslink" href="#composite">composite
</a></li><li><a class="crosslink" href="#PDF-Bearbeitung">PDF-Bearbeitung
</a></li><li><a class="crosslink" href="#Stapelverarbeitung">Stapelverarbeitung
</a></li><li><a class="crosslink" href="#Alternativen">Alternativen
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>
<img alt="./logo.png" class="image-left" src="./_/786ee33eb331811718d53c91f9fc4dc0ea2dad6a.png"/>
<a class="external" href="http://www.imagemagick.org/script/index.php" rel="nofollow">ImageMagick</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> ist ein freies, quelloffenes Softwarepaket zur Erstellung und Bearbeitung von Rastergrafiken. ImageMagick kann momentan mehr als 90 der meist verwendeten Bildformate lesen, verändern und schreiben. Außerdem lassen sich Bilder dynamisch generieren, weshalb es auch von Webanwendungen verwendet wird.</p><p>Eine Alternative ist das Programm <a class="external" href="http://www.graphicsmagick.org/" rel="nofollow">graphicsmagick</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>, eine <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Abspaltung_(Softwareentwicklung)">Abspaltung</a> von ImageMagick. Es kann ebenfalls über die Paketverwaltung installiert werden.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Bevor die beschriebenen Tools benutzt werden können, muss das folgende Paket installiert werden.<sup><a href="#source-1">[1]</a></sup> Angesichts der umfangreichen Kommandozeilenoptionen ist auch die Dokumentation empfehlenswert.</p><ul><li><p><strong>imagemagick</strong></p></li><li><p><strong>imagemagick-doc</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install imagemagick imagemagick-doc </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install imagemagick imagemagick-doc </pre></div></div><p>
</p></div></div><p>Eine Konfiguration ist nicht nötig.</p></div><div class="section_1"><h2 id="bersicht">Übersicht<a class="headerlink" href="#bersicht">¶</a></h2><p>
ImageMagick bietet 11 Kommandozeilenprogramme,<sup><a href="#source-2">[2]</a></sup> die alle auf einen gemeinsamen Satz von Bibliotheken zugreifen, die wiederum das Schreiben und Lesen vieler verschiedener Dateiformate und umfangreiche grafische Arbeiten ermöglichen.</p><ul><li><p><code class="notranslate">animate</code> - spielt mehrere Bilder schnell hintereinander ab</p></li><li><p><code class="notranslate">convert</code> - liest Bilder, bearbeitet sie und speichert sie ab</p></li><li><p><code class="notranslate">compare</code> - vergleicht 2 Bilder und gibt die Unterschiede als Bilddatei aus</p></li><li><p><code class="notranslate">composite</code> - überlagert mehrere Bilder zu einem Bild</p></li><li><p><code class="notranslate">conjure</code> - führt Skripte in der Skriptsprache von ImageMagick aus</p></li><li><p><code class="notranslate">display</code> - stellt Bilder auf einem X-Server dar</p></li><li><p><code class="notranslate">identify</code> - gibt Dateiformat, Bildgröße usw. von Bilddateien aus</p></li><li><p><code class="notranslate">import</code> - macht Bildschirmfotos</p></li><li><p><code class="notranslate">montage</code> - fasst mehrere Bilder zu einem großen Einzelbild zusammen</p></li><li><p><code class="notranslate">mogrify</code> - wie <code class="notranslate">convert</code>, nur dass die Eingabedatei durch die Ausgabedatei ersetzt wird!</p></li><li><p><code class="notranslate">stream</code> - liest aus Bilddateien Teile aus und gibt sie als Rohdaten, Fließkommazahlen oder ähnliches aus</p></li></ul><p>
Zu jedem Kommandozeilenprogramm gibt es eine Manpage. Die separate Dokumentation befindet sich unter:</p><ul><li><p><strong>/usr/share/doc/imagemagick-doc/index.html</strong> </p></li></ul><p>
Von hier aus findet man auch zu jedem Kommandozeilenprogramm eine HTML-Seite mit Anwendungsbeispielen.</p><p>ImageMagick-Programme bieten 241 verschiedene Kommandozeilenoptionen und grafische Operationen. Da viele Optionen von mehreren Kommandozeilenprogrammen verstanden werden, ist eine detaillierte Erklärung aller Optionen in der folgenden Datei zusammengefasst:</p><ul><li><p><strong>/usr/share/doc/imagemagick-doc/www/command-line-options.html</strong> </p></li></ul><p>
</p></div><div class="section_1"><h2 id="convert">convert<a class="headerlink" href="#convert">¶</a></h2><p>
Möchte man ein Bild bearbeiten, so kann man den Befehl <code class="notranslate">convert</code> nutzen. Ein Bild wird geladen, bearbeitet und (ggf. in einem anderen Format) abgespeichert.</p><div class="bash"><div class="contents"><pre class="notranslate">convert EINGABEBILD.jpg [Optionen] AUSGABEBILD.png </pre></div></div><p>Im einfachsten Fall (ohne Optionen) kann <code class="notranslate">convert</code> zur Umwandlung in ein anderes Dateiformat verwendet werden. Dabei wird das Format der Eingabedatei automatisch bestimmt und das der Ausgabedatei (falls keine weiteren Angaben gemacht werden) anhand der Dateiendung.</p><p>Da <code class="notranslate">convert</code> über 200 Optionen auf der Kommandozeile versteht, sei für Details auf die Dokumentation verwiesen. Hier ein paar nützliche Beispiele.</p><div class="section_2"><h3 id="Bilder-mit-Wasserzeichen-versehen">Bilder mit Wasserzeichen versehen<a class="headerlink" href="#Bilder-mit-Wasserzeichen-versehen">¶</a></h3><p>
Mit Hilfe von ImageMagick lassen sich sichtbare Wasserzeichentexte in JPEG-Bilder einbringen. Das folgende kleine <a class="internal" href="./bash.html">Bash</a>-Skript erleichtert die Arbeit:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1"># Wasserzeichentext in alle JPEG Bilder aus diesen Verzeichnis einfuegen</span>
<span class="c1"># Der Wasserzeichentext wird unten links ins Bild eingebracht</span>
<span class="c1"># Sie koennen folgende Parameter anpassen:</span>
<span class="nv">Textabstandvonlinks</span><span class="o">=</span><span class="m">10</span>
<span class="nv">Textabstandvonunten</span><span class="o">=</span><span class="m">10</span>
<span class="nv">Schriftgroesse</span><span class="o">=</span><span class="m">10</span>
<span class="nv">PfadFonts</span><span class="o">=</span><span class="s2">"/usr/share/fonts/truetype/msttcorefonts"</span>
<span class="c1"># Pfad ist je nach Distribution unterschiedlich!</span>
<span class="nv">Schriftart</span><span class="o">=</span><span class="s2">"Arial.ttf"</span>
<span class="nv">Schriftfarbe</span><span class="o">=</span><span class="s2">"white"</span>
<span class="c1"># Moegliche Farben koennen aufgelistet werden mit dem Befehl: convert -list color</span>
<span class="nv">Wasserzeichentext</span><span class="o">=</span><span class="s2">"Copyright Ubuntu"</span>

<span class="c1"># Programmbeginn</span>
<span class="nb">echo</span> <span class="s2">"Textabstand von links: </span><span class="nv">$Textabstandvonlinks</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Textabstand von unten: </span><span class="nv">$Textabstandvonunten</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Schriftgoesse: </span><span class="nv">$Schriftgroesse</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Schriftart: </span><span class="nv">$Schriftart</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Schriftfarbe: </span><span class="nv">$Schriftfarbe</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"Wasserzeichentext: </span><span class="nv">$Wasserzeichentext</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">" "</span>
<span class="k">for</span> file in *.JPG *.jpg
<span class="k">do</span>
  <span class="nv">horizontal</span><span class="o">=</span><span class="sb">`</span>identify -verbose <span class="nv">$file</span> <span class="p">|</span> grep Geometry: <span class="p">|</span> awk <span class="o">{</span><span class="s1">'print $2'</span><span class="o">}</span> <span class="p">|</span>cut -d<span class="s2">"x"</span> -f <span class="m">1</span><span class="sb">`</span>
  <span class="nv">vertikal</span><span class="o">=</span><span class="sb">`</span>identify -verbose <span class="nv">$file</span> <span class="p">|</span> grep Geometry: <span class="p">|</span> awk <span class="o">{</span><span class="s1">'print $2'</span><span class="o">}</span> <span class="p">|</span>cut -d<span class="s2">"x"</span> -f <span class="m">2</span><span class="sb">`</span>
  <span class="nv">X</span><span class="o">=</span><span class="nv">$Textabstandvonlinks</span>
  <span class="nv">Y</span><span class="o">=</span><span class="k">$((</span><span class="nv">$vertikal</span> <span class="o">-</span> <span class="nv">$Textabstandvonunten</span><span class="k">))</span>
  convert -font <span class="nv">$PfadFonts</span>/<span class="nv">$Schriftart</span> -pointsize <span class="nv">$Schriftgroesse</span> -fill <span class="nv">$Schriftfarbe</span> -draw <span class="s2">"text </span><span class="nv">$X</span><span class="s2">, </span><span class="nv">$Y</span><span class="s2"> '</span><span class="nv">$Wasserzeichentext</span><span class="s2">'"</span> <span class="s2">"</span><span class="nv">$file</span><span class="s2">"</span> <span class="s2">"`basename Wasserzeichen_"</span><span class="nv">$file</span><span class="s2">"`"</span><span class="p">;</span>
  <span class="nb">echo</span> <span class="s2">"Bearbeite Datei </span><span class="nv">$file</span><span class="s2">"</span>
<span class="k">done</span>
<span class="nb">echo</span> <span class="s2">"Wasserzeichen wurden erfolgreich eingearbeitet"</span>
<span class="nb">exit</span>
<span class="c1"># Programmende</span>
</pre></div>
</td></tr></table></div><p>
Um statt eines Texts ein Bild als Wasserzeichen zu verwenden, nutzt man <a class="crosslink" href="#composite">composite</a>.</p></div><div class="section_2"><h3 id="Bilder-Fotos-nachbearbeiten">Bilder / Fotos nachbearbeiten<a class="headerlink" href="#Bilder-Fotos-nachbearbeiten">¶</a></h3><p>
Manchmal möchte oder muss man Bilddateien nachbearbeiten. Dies können z. B. mit der Digitalkamera aufgenommene Fotos sein, damit diese "vorzeigbar" oder verschickbar sind. Im folgenden wird davon ausgegangen, dass die Bilder "alltägliche" Motive sind und nicht unter Extrembedingungen aufgenommen wurden (also keine Nachtaufnahmen oder Gegenlichtaufnahmen mit besonderem künstlerischen Anspruch.) Mit <code class="notranslate">convert</code> und verschiedenen Optionen lassen sich Fotos bearbeiten:</p><div class="bash"><div class="contents"><pre class="notranslate">convert QUELLDATEI.jpg [Optionen] ZIELDATEI.jpg </pre></div></div><table><tr class="titel"><td colspan="2"> convert</td></tr><tr class="kopf"><td>Parameter</td><td>Erklärung</td></tr><tr><td><code class="notranslate">QUELLDATEI.jpg</code></td><td>Eingabe. Das Dateiformat wird automatisch bestimmt. </td></tr><tr><td><code class="notranslate">-rotate 90</code> </td><td>Dreht Bild um 90 Grad nach rechts, <code class="notranslate">-90</code> entsprechend nach links. </td></tr><tr><td><code class="notranslate">-fx u*(2-j/h)*0.75</code> </td><td>Aufhellen des oberen Bildteils. Wenn man mit Blitz fest in der Kamera eingebaut fotografiert, ist der Vordergrund unten im Bild fast immer leicht überbelichtet und der Hintergrund oben stark unterbelichtet. Mit dieser Funktion wird der Vordergrund leicht abgedunkelt (-25%) und der Hintergrund stark aufgehellt (+50%). Das Ergebnis ist etwas kontrastarm, was aber mit dem darauf folgenden <code class="notranslate">-normalize</code> berichtigt wird. </td></tr><tr><td><code class="notranslate">-fx u*(1+j/h)*0.75</code> </td><td>Aufhellen des unteren Bildteils. </td></tr><tr><td><code class="notranslate">-fx u*(2-i/w)*0.75</code></td><td>Aufhellen des linken Bildteils. </td></tr><tr><td><code class="notranslate">-fx u*(1+i/w)*0.75</code> </td><td>Aufhellen des rechten Bildteils. </td></tr><tr><td><code class="notranslate">-normalize</code> </td><td>Streckt das Histogramm, so dass schwarz die dunkelste und weiß die hellste Farbe ist. Ergibt fast immer ein optimales Ergebnis. Wichtig! </td></tr><tr><td><code class="notranslate">-gamma 1.10,1.05,1.0</code> </td><td>Verstärkt den Rot- und Grünanteil und macht das Bild so "wärmer". Bei Bedarf nach eigenem Geschmack, Digitalkamera und Monitor anpassen! </td></tr><tr><td><code class="notranslate">-fx u+${mt}*(1-u)*u</code> </td><td>Verändert die "Mitteltöne". Sinnvolle Werte für <code class="notranslate">$mt</code> liegen zwischen <code class="notranslate">-1.0</code> (abdunkeln, z. B. bei grellem Sonnenschein) und <code class="notranslate">1.0</code> (Aufhellen, z. B. bei Gegenlicht). Diese Funktion hat den Vorteil, dass beim Aufhellen helle Partien nicht im gleißendem Weiß "ersaufen", sondern lediglich kontrastärmer dargestellt werden, analog beim Abdunkeln. Meist nicht nötig. </td></tr><tr><td><code class="notranslate">-resize 50%</code> </td><td>"Verkleinert" das Bild proportional auf 50 % der waagerechten Kantenlänge. </td></tr><tr><td><code class="notranslate">-resize '1024x1024'</code> </td><td>Verkleinert das Bild auf maximal 1024 Pixel Höhe und Breite unter Beibehaltung des Seitenverhältnisses. </td></tr><tr><td><code class="notranslate">-quality 88%</code> </td><td>Setzt Qualität der folgenden JPG-Kompression. Je größer die Zahl, desto weniger Artefakte und je größer die Zieldatei. </td></tr><tr><td><code class="notranslate">ZIELDATEI.jpg</code></td><td>Ausgabe im <strong>jpg</strong>-Format mit der vorher angegebenen Qualität. Durch andere Dateiendungen können andere Ausgabeformate gewählt werden. </td></tr><tr><td><code class="notranslate">show:</code></td><td>Statt eine ZIELDATEI zu speichern wird die Ausgabedatei direkt mit <code class="notranslate">display</code> angezeigt. Hilfreich als Vorschau für einen Befehl.</td></tr></table><p>
Anmerkungen:
</p><ul><li><p>Die Optionen sollten in der angegebenen Reihenfolge verwendet werden</p></li><li><p>Die Option <code class="notranslate">-fx</code> dauert recht lang</p></li></ul><p>
</p></div><div class="section_2"><h3 id="Gescannte-Dokumente-nachbessern">Gescannte Dokumente nachbessern<a class="headerlink" href="#Gescannte-Dokumente-nachbessern">¶</a></h3><p>
Wenn man Texte aller Art (Zeitungsartikel, Urkunden, Akten usw.) scannt und als Bilddatei abspeichert, sind die Bilddateien meist weder besonders schön noch klein und handlich:</p><ul><li><p>Die Dateien sind groß, typischerweise um 4 MB für eine DIN-A4-Seite mit 200 dpi im <strong>.png</strong>-Format.</p></li><li><p>Weiße Hintergründe sind nicht weiß, sondern hellgrau, hellbraun usw. Beim Ausdrucken wirken sie schmutzig und verschwenden Tinte. </p></li><li><p>Schwarze Buchstaben sind dunkelgrau und wirken beim Ausdrucken blass.</p></li><li><p>Schwarzweiße Kanten bekommen farbige Pixel.</p></li></ul><p>
Manchmal kann man bereits im Scanprogramm "Strichgrafik" o.ä. wählen, so dass beim Einscannen speichersparende und optisch ansprechende Schwarzweißgrafik entsteht. Wenn das keine gewünschten Ergebnisse bringt, kann man immer noch mit voller Farbtiefe einscannen und durch geschickte Nachbearbeitung die Bilddateien optisch verschönern und gleichzeitig verkleinern.</p><div class="bash"><div class="contents"><pre class="notranslate">convert ROHDATEI.png \
    -normalize -gamma 0.8,0.8,0.8 \
    -colorspace HSL \
    -channel saturation -fx 'min(1.0,max(0.0,3*u.g-1))' \
    -colorspace RGB \
    +dither -posterize 3 \
    BEARBEITET.png </pre></div></div><table><tr class="titel"><td colspan="2"> convert</td></tr><tr class="kopf"><td>Parameter</td><td>Erklärung</td></tr><tr><td><code class="notranslate">ROHDATEI.png</code></td><td>Eingabe. Das Dateiformat wird automatisch bestimmt. </td></tr><tr><td><code class="notranslate">-normalize</code> </td><td>streckt das Histogramm, so dass schwarz die dunkelste und weiß die hellste Farbe ist. </td></tr><tr><td><code class="notranslate">-gamma 0.8,0.8,0.8</code> </td><td>Dunkelt Mitteltöne (bei Werten kleiner 1) etwas ab. Buchstaben werden ansonsten zu dünn. </td></tr><tr><td><code class="notranslate">-colorspace HSL</code> </td><td>Wandelt RGB-Werte in Hue-Saturation-Lightness-Werte um. Vorbereitung für nächsten Schritt. </td></tr><tr><td><code class="notranslate">-channel saturation -fx 'min(1.0,max(0.0,3*u.g-1))'</code> </td><td>Macht aus Farben mit Sättigung &lt; 33 % grau und Farben mit Sättigung &gt; 67 % eine gesättigte Farbe. Hiermit werden bunte Ränder oder Flecken bei unbunten Vorlagen verringert. Eine nähere Erklärung von <code class="notranslate">-fx</code> findet man in der Dokumentation von <code class="notranslate">convert</code>.</td></tr><tr><td><code class="notranslate">-colorspace RGB</code> </td><td>Wandelt HSL-Werte zurück in RGB-Werte um. </td></tr><tr><td><code class="notranslate">+dither -posterize 3</code></td><td> Reduziert in jedem Farbkanal die Zahl der Stufen auf 3 ohne Dithering. Empfehlenswert sind 2 bis 4. Hier wird der Hintergrund richtig einheitlich weiß (oder was auch immer). Rauschen verschwindet bis auf ein paar verstreute Pixel.</td></tr><tr><td><code class="notranslate">BEARBEITET.png</code></td><td>Ausgabe. Dafür ist das <strong>png</strong>-Format geeignet. Dazu einfach einen Dateinamen mit Endung <strong>.png</strong> wählen.</td></tr></table><p>
Mit diesen Optionen liefert <code class="notranslate">convert</code> recht zuverlässig gute Ergebnisse. Die Ausgabe (eine DIN-A4-Seite mit 200 dpi) ist ca. 50 - 300 kB groß. Bei Bedarf können die Gammawerte, die Steilheit der Sättigungsfunktion und die Zahl der Stufen bei der Reduktion der Intensitätsstufen verändert werden.</p><p>Anmerkungen:
</p><ul><li><p>Die Abarbeitung von Funktionen durch <code class="notranslate">convert</code> mit Option <code class="notranslate">-fx</code> ist etwas langsam. Der obige Befehl kann daher rund eine Minute dauern.</p></li><li><p>Bilder in den gescannten Dokumenten werden ebenfalls mit bearbeitet und erscheinen daher verfremdet. Hier hilft nur manuelles Einsetzen des Originalbildes in die Ausgabe.</p></li><li><p>Wenn die Texthintergründe Rasterpunkte enthalten, erscheinen sie meist auch in der Ausgabe. Hier muss man ggf. manuell mit einem Bildbearbeitungsprogramm (z. B. <a class="internal" href="./gimp.html">GIMP</a>) Bereiche markieren und geschickt Farben durch andere ersetzen, um einfarbige Hintergründe zu erhalten, z. B. bei schwarzem Text auf rot-weiß gerastertem Hintergrund würde man rot und weiß durch rosa ersetzen.</p></li><li><p>Werden Dokumente fotografiert statt eingescannt, können die Bilddateien ebenfalls mit <code class="notranslate">convert</code> bearbeitet werden. Es gibt jedoch Probleme, wenn die Vorlage nicht gleichmäßig ausgeleuchtet ist. Außerdem sollte man durch geeignete Wahl des Zooms sicherstellen, dass das Bild nicht tonnen- oder kissenförmig verzerrt ist.</p></li></ul><p>
</p></div></div><div class="section_1"><h2 id="mogrify">mogrify<a class="headerlink" href="#mogrify">¶</a></h2><p>
Mit <code class="notranslate">mogrify</code> kann man ein Bild laden, bearbeiten und abspeichern. Es hat viele, aber nicht alle Optionen gemeinsam mit <code class="notranslate">convert</code>. Der wesentliche Unterschied zu convert ist, dass <code class="notranslate">mogrify</code> die Eingabedatei durch die neue Bilddatei ersetzt, statt sie zu überschreiben.</p><div class="bash"><div class="contents"><pre class="notranslate">mogrify [OPTIONEN] bilddatei </pre></div></div></div><div class="section_1"><h2 id="import">import<a class="headerlink" href="#import">¶</a></h2><p>
<code class="notranslate">import</code> bietet die Möglichkeit, ein Foto des gesamten Bildschirms, eines Fensters oder eines definierten Ausschnittes zu erzeugen. Man kann auch in regelmäßigen Abständen Bildschirmfotos erstellen.</p><p>Obwohl <code class="notranslate">import</code> ein Kommandozeilenprogramm ist, arbeitet es über die grafische Benutzeroberfläche mit Unterstützung der Maus. Man tippt einfach im Terminal <sup><a href="#source-3">[3]</a></sup> den Befehl ein:</p><div class="bash"><div class="contents"><pre class="notranslate">import ~/window.png </pre></div></div><p>Der Mauszeiger verändert sich zu einem Kreuz. Dann kann man auf das gewünschte Fenster klicken oder mit gedrückter Maustaste den Ausschnitt definieren und abspeichern. Falls das nicht klappt, hilft folgende Vorgehensweise:</p><ol class="arabic"><li><p>Die Tastenkombination <a class="internal" href="./programme_starten.html">Alt+F2</a> verwenden</p></li><li><pre class="notranslate">import ~/window.png</pre><p> eingeben und bestätigen</p></li><li><p>Gewünschtes Fenster auswählen</p></li></ol><p>
</p><div class="section_2"><h3 id="Ausschnitt-in-der-Kommandozeile-waehlen">Ausschnitt in der Kommandozeile wählen<a class="headerlink" href="#Ausschnitt-in-der-Kommandozeile-waehlen">¶</a></h3><p>
Natürlich kann man den gewünschten Ausschnitt auch in der Kommandozeile definieren, z. B. den rechten oberen Bereich des Bildschirms:</p><div class="bash"><div class="contents"><pre class="notranslate">import -window root -crop 512x256-0+0 -quality 90 corner.png </pre></div></div><p>Man kann auch einzelne Fenster und Fensterausschnitte definieren. Das Fenster kann man durch seinen Namen oben auf der Fensterleiste benennen. Wenn z. B. <a class="internal" href="./google_earth.html">Google Earth</a>  die Bilder zu dunkel darstellt, kann man mit mehreren ImageMagick-Programmen hintereinander einen Screenshot des Ausschnitts des Fensters erstellen, das Bild bearbeiten und schließlich darstellen:</p><div class="bash"><div class="contents"><pre class="notranslate">import -silent -pause 3 -window 'Google Earth' -crop 800x650+250+50 /tmp/screenshot.png \
&amp;&amp; convert /tmp/screenshot.png -fx '4*u' -normalize /tmp/screenshot.png \
&amp;&amp; display /tmp/screenshot.png \
&amp;&amp; rm -f /tmp/screenshot.png </pre></div></div><p>Mit <code class="notranslate">-silent</code> wird der Piepton unterdrückt. Dann wartet <code class="notranslate">import</code> drei Sekunden (Währenddessen muss man vom Terminalfenster zum Google-Earth-Fenster wechseln, weil sonst abgedeckte Bereiche schwarz erscheinen würden). Dann wird aus dem gewählten Fenster der mit <code class="notranslate">-crop</code> gewählte Ausschnitt als Bild gespeichert. <code class="notranslate">convert</code> bearbeitet das Bild, und <code class="notranslate">display</code> stellt es dar.</p></div><div class="section_2"><h3 id="Fernwartung">Fernwartung<a class="headerlink" href="#Fernwartung">¶</a></h3><p>
Die Programme <code class="notranslate">import</code> und <code class="notranslate">display</code> lesen von bzw. schreiben auf das Display, welches in der Umgebungsvariable <code class="notranslate">$DISPLAY</code> angegeben ist (auf dem lokalen Rechner meist "<code class="notranslate">localhost:0.0</code>"). Man kann sich daher auf einem entfernten Rechner anmelden, dessen lokalen Bildschirm abfotografieren und auf dem Bildschirm des eigenen Rechners anzeigen lassen. Das ist nützlich, wenn man den entfernten Rechner über <a class="internal" href="./ssh.html">SSH</a> wartet und dem Anwender auf seinen Bildschirm schauen möchte.</p><p>Dazu meldet man sich über SSH in den entfernten Rechner an (in diesem Beispiel <code class="notranslate">gast@rechner</code>). Die Verbindung vom entfernten Rechner zum lokalen XServer muss dabei getunnelt werden (das kann auch von einem Windows-Rechner mit SSH-Client und XServer geschehen).</p><p>Dann muss man das Display und den Benutzernamen des lokalen Anwenders auf dem entfernten Rechner bestimmen (Display ist meist "<code class="notranslate">:0.0</code>".) Dazu sucht man alle XServer in der Prozessliste und findet dort das Display in der angezeigten Kommandozeile. In diesem Beispiel sind es zwei XServer mit den Displays "<code class="notranslate">:0.0</code>" und "<code class="notranslate">:20.0</code>".</p><div class="bash"><div class="contents"><pre class="notranslate">gast@rechner:~ $ ps -ef| grep /X </pre></div></div><p>
Ergebnis:
</p><pre class="notranslate">root     22870 22866  0 15:34 tty8     00:00:01 /usr/X11R6/bin/X :20 -br -audit 0 -auth /var/lib/gdm/:20.Xauth -nolisten tcp vt8
root     24709  4152  0 11:20 tty7     00:02:28 /usr/X11R6/bin/X :0 -br -audit 0 -auth /var/lib/gdm/:0.Xauth -nolisten tcp vt7
gast 26726 23513  0 16:07 pts/2    00:00:00 grep /X</pre><p>Um festzustellen, welches Display gerade aktiv ist, nimmt man die Parent-Prozess-ID der XServer und sucht darunter die Kindprozesse <code class="notranslate">gnome-session</code> oder <code class="notranslate">x-session-manager</code>.</p><div class="bash"><div class="contents"><pre class="notranslate">gast@rechner:~ $ ps -ef| grep 4152 | grep session
gast@rechner:~ $ ps -ef| grep 22866 | grep session </pre></div></div><p>
Ergebnis:
</p><pre class="notranslate">bob        23005 22866  0 15:35 ?        00:00:00 x-session-manager</pre><p>Es gibt keinen Kindprozess mit diesen Namen unter 4152, aber einen unter 22866. Das heißt, das aktive Display ist also "<code class="notranslate">:20.0</code>", und der Benutzer heißt <code class="notranslate">bob</code>.</p><p>Auf dem Zielserver legt man eine Datei an, die sowohl der Gast als auch Bob beschreiben können:</p><div class="bash"><div class="contents"><pre class="notranslate">gast@rechner:~ $ touch /tmp/screenshot.png
gast@rechner:~ $ chmod 666 /tmp/screenshot.png </pre></div></div><p>Das Display kann nur vom Besitzer ausgelesen werden. Das bedeutet, der Gast muss <code class="notranslate">import</code> als Benutzer <code class="notranslate">bob</code> starten und das Bild in die gemeinsam lesbare Datei abspeichern. Die Option <code class="notranslate">-silent</code> bewirkt, dass es auf dem entfernten Rechner nicht piept, und muss, wenn sie verwendet werden soll, nach <code class="notranslate">display</code> stehen. Bei Bedarf kann <code class="notranslate">import</code> die Grafik verkleinern, den Farbraum reduzieren und vieles mehr.</p><div class="bash"><div class="contents"><pre class="notranslate">gast@rechner:~ $ sudo su - bob -c 'import -display :20.0 -silent -window root -resize 50% /tmp/screenshot.png' </pre></div></div><p>Dann kann man mit <code class="notranslate">display</code> das Bild auf dem Default-Display anzeigen. Das Default-Display ist hier <code class="notranslate">localhost:13.0</code>, das über den SSH-Tunnel zum lokalen Rechner getunnelt wird (Man kann es sich durch <code class="notranslate">echo $DISPLAY</code> anzeigen lassen).</p><div class="bash"><div class="contents"><pre class="notranslate">gast@rechner:~ $ display /tmp/screenshot.png </pre></div></div><pre class="notranslate">Xlib:  extension "Generic Event Extension" missing on display "localhost:13.0".
^C
gast@rechner:~ $ </pre><p>Die oben gezeigte Fehlermeldung kann man ignorieren. <code class="notranslate">display</code> kann über das Fenster auf dem lokalen Rechner geschlossen werden oder durch 
<span class="key">Strg</span>  + 
<span class="key">C</span>  in der Konsole auf dem entfernten Rechner.</p></div></div><div class="section_1"><h2 id="montage">montage<a class="headerlink" href="#montage">¶</a></h2><p>
Hat man einen (komplizierten) Sachverhalt mit Hilfe einer Bilderfolge festgehalten, ist es empfehlenswert, das Ganze in ein einziges Bild zusammenzupacken oder in ein <a class="internal" href="./pdf.html">PDF</a>-Dokument zu konvertieren. Bei PDFs würde aber überlicherweise nur ein Bild pro Seite angezeigt.</p><p>Mit Hilfe des Befehls <code class="notranslate">montage</code> im Terminal <sup><a href="#source-2">[2]</a></sup> werden die Einzelbilder zu einem großen Bild zusammengefügt, d.h. in diesem Fall aneinander gehängt und anschließend ins <strong>.pdf</strong>-Format umgewandelt. Es entsteht der Eindruck eines "Filmstreifens". Unter den Bildern steht der Dateiname (als Label).</p><div class="bash"><div class="contents"><pre class="notranslate">montage -label %f -geometry 800x600+10+10 *.png test.pdf </pre></div></div></div><div class="section_1"><h2 id="composite">composite<a class="headerlink" href="#composite">¶</a></h2><p>
Mit <code class="notranslate">composite</code> lassen sich Bilder übereinander legen. Möchte man beispielsweise statt eines <a class="crosslink" href="#Bilder-mit-Wasserzeichen-versehen">Wasserzeichentexts</a> ein Logo als Lizenzinformation verwenden, verwendet man folgenden Befehl:</p><div class="bash"><div class="contents"><pre class="notranslate">composite -gravity SouthEast -geometry +50+50 wasserzeichen.png bild.jpg bild_mit_wasserzeichen.jpg </pre></div></div><p>
um ein Wasserzeichen rechts unten im Bild einzufügen. Im Beispiel wird eine PNG-Datei mit Transparenz verwendet.</p><p>Ein weiteres Anwendungsbeispiel findet sich im Artikel <a class="internal" href="./jfotokopie.html#Benutzung">JFotokopie</a>, das diesen Programmteil für eine "Mehrfachkopie" nutzt.</p></div><div class="section_1"><h2 id="PDF-Bearbeitung">PDF-Bearbeitung<a class="headerlink" href="#PDF-Bearbeitung">¶</a></h2><p>
Mit <code class="notranslate">convert</code> können bspw. gescannte Dokumente als PDF gespeichert werden. Die Befehls-Syntax zum einfachen Speichern einer PNG-Datei im PDF-Format lautet:</p><div class="bash"><div class="contents"><pre class="notranslate">convert quelle.png ziel.pdf </pre></div></div><p>Mit folgendem Befehl kann man Bilder aus PDF-Dateien extrahieren:</p><div class="bash"><div class="contents"><pre class="notranslate">pdfimages -j quelle.pdf zielverzeichnis </pre></div></div><p>Praktisch ist auch die Verwendung von Wildcards, um mehrere Bilder in ein PDF umzuwandeln. Folgender Befehl wandelt bspw. alle im momentanen Arbeitsordner befindlichen <strong>.jpg</strong>-Dateien in ein mehrseitiges PDF um:</p><div class="bash"><div class="contents"><pre class="notranslate">convert *.jpg ziel.pdf </pre></div></div><p>Will man mehrere Bilder in einem Ordner zu einem druckfertigen PDF Dokument mit gleichmäßiger DINA4-Anpassung zusammenfügen, hilft folgender Befehl:</p><div class="bash"><div class="contents"><pre class="notranslate">convert *.* -compress jpeg -resize 1240x1753 -units PixelsPerInch -density 150x150 -page a4 multipage.pdf </pre></div></div><p><a class="crosslink anchor" href="#Massenbearbeitung" id="Massenbearbeitung"></a></p></div><div class="section_1"><h2 id="Stapelverarbeitung">Stapelverarbeitung<a class="headerlink" href="#Stapelverarbeitung">¶</a></h2><p>
Um mehrere Dateien auf einmal zu konvertieren (Batch-Modus), benutzt man das Schleifenkonstrukt <a class="internal" href="./shell/bash-skripting-guide_für_anfänger.html#Schleifen">for ... in</a> einer <a class="internal" href="./shell.html">Shell</a>. Beispiel:</p><div class="bash"><div class="contents"><pre class="notranslate">for i in *.png; do BEFEHL $i -OPTIONEN $i; done </pre></div></div><p>
In diesen Beispiel werden alle Bilder eines Ordners im PNG-Format nacheinander umgewandelt. <code class="notranslate">BEFEHL</code> und <code class="notranslate">-OPTIONEN</code> bitte entsprechend anpassen. Vorsicht: die Originaldateien werden überschreiben! Möchte man das nicht, legt die folgende Befehlsvariante neue Dateien mit dem Präfix "edit-" an:</p><div class="bash"><div class="contents"><pre class="notranslate">for i in *.png; do BEFEHL $i -OPTIONEN edit-$i; done </pre></div></div><p>Alternativ zu der Schleife kann auch <a class="crosslink" href="#mogrify">mogrify</a> (siehe oben) verwendet werden. Beispiel:
</p><div class="bash"><div class="contents"><pre class="notranslate">mogrify -format jpg *.png </pre></div></div><p>
In dem Beispiel werden alle Dateien im aktuellen Verzeichnis vom PNG-Format ins JPG-Format umgewandelt.</p></div><div class="section_1"><h2 id="Alternativen">Alternativen<a class="headerlink" href="#Alternativen">¶</a></h2><p>
<a class="internal" href="./exactimage.html">ExactImage</a> von <a class="external" href="http://www.exactcode.de/" rel="nofollow">ExactCODE</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> liefert auf Geschwindigkeit optimierte Optionen, allerdings nicht in dem Umfang wie ImageMagick. Auch mit <a class="internal" href="./gimp.html">GIMP</a> sind sehr viele Bearbeitungsmöglichkeiten gegeben, allerdings eher für die Bearbeitung einzelner Bilder, weniger für Stapelverarbeitung. <a class="internal" href="./phatch.html">Phatch</a> ist ein alternativer <em>"Photo Batch Processor"</em> mit grafischer Oberfläche.</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://www.imagemagick.org/" rel="nofollow">Projektseite</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p><ul><li><p><a class="external" href="http://www.imagemagick.org/Usage/" rel="nofollow">Examples of ImageMagick Usage</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - zahlreiche bebilderte Beispiele, sehr empfehlenswert</p></li></ul></li><li><p><a class="external" href="http://www.fmwconcepts.com/imagemagick/" rel="nofollow">Fred's ImageMagick Scripts</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - umfangreiche Skriptsammlung, mit Beispielbildern</p></li><li><p><a class="crosslink topic" href="https://forum.ubuntuusers.de/topic/fotos-nach-farbe-sortieren/">Fotos nach Farbe sortieren</a> - Diskussion im Forum</p></li><li><p><a class="external" href="http://www.linux-community.de/Internal/Artikel/Print-Artikel/LinuxUser/2008/02/Pixelzauber" rel="nofollow">Pixelzauber - Bildbearbeitung auf der Konsole</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Artikel LinuxUser 02/2008</p></li><li><p><a class="external" href="https://youtu.be/mf7g4nvLlms" rel="nofollow">Vortrag über ImageMagick</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> Youtube-Video Kurt Pfeifle auf der Ubucon 2014</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./imagemagick/a/revision/940069.html">Diese Revision</a> wurde am 6. Mai 2017 21:55 von <a href="https://ubuntuusers.de/user/noisefloor/">noisefloor</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./imagemagick.html">ImageMagick</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>