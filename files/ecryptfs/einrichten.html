<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>ecryptfs/Einrichten › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../ecryptfs/einrichten.html">Einrichten</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/ecryptfs/Einrichten">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../ecryptfs/einrichten/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../ecryptfs/einrichten/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../ecryptfs/einrichten/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../ecryptfs/einrichten/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../ecryptfs/einrichten/a/backlinks.html">Einrichten</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../pakete_installieren.html">Installation von Programmen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../rechte.html">Rechte für Dateien und Ordner ändern</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../editor.html">Einen Editor nutzen</a></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> Mit <a class="internal" href="../adduser.html">adduser</a> bzw. <a class="internal" href="../deluser.html">deluser</a> Benutzer bearbeiten</p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a><ol class="arabic"><li><a class="crosslink" href="#Allgemeine-Hinweise">Allgemeine Hinweise
</a></li><li><a class="crosslink" href="#Einrichtung-Verzeichnis-Private">Einrichtung Verzeichnis Private
</a></li><li><a class="crosslink" href="#Homeverzeichnis-umstellen">Homeverzeichnis umstellen
</a></li><li><a class="crosslink" href="#Zusaetzlicher-Benutzer">Zusätzlicher Benutzer
</a></li><li><a class="crosslink" href="#Altes-Homeverzeichnis-verschluesseln">Altes Homeverzeichnis verschlüsseln
</a><ol class="arabic"><li><a class="crosslink" href="#Vorbereitungen">Vorbereitungen
</a></li><li><a class="crosslink" href="#Umstellung-ausfuehren">Umstellung ausführen
</a></li></ol></li></ol></li><li><a class="crosslink" href="#Deinstallation">Deinstallation
</a><ol class="arabic"><li><a class="crosslink" href="#Verzeichnis-Private-entfernen">Verzeichnis Private entfernen
</a></li><li><a class="crosslink" href="#Verschluesselung-des-Homeverzeichnisses-entfernen">Verschlüsselung des Homeverzeichnisses e...</a><ol class="arabic"><li><a class="crosslink" href="#Vorbereitungen-2">Vorbereitungen
</a></li><li><a class="crosslink" href="#Verschluesselung-entfernen">Verschlüsselung entfernen
</a></li></ol></li><li><a class="crosslink" href="#Basis-Pakete-entfernen">Basis-Pakete entfernen
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>Das Paket <strong>ecryptfs-utils</strong> bietet eine sehr einfache Möglichkeit
</p><ul><li><p>einen einzelnen Ordner (<strong>~/Private</strong>)</p></li></ul><p>innerhalb eines  <em>"unverschlüsselten"</em> <a class="internal" href="../homeverzeichnis.html">Homeverzeichnisses</a>, bzw. 
</p><ul><li><p>das gesamte Homeverzeichnis</p></li></ul><p>eines Benutzers zu verschlüsseln. Die Ent- bzw. Verschlüsselung geschieht dabei automatisch beim Ein-/Ausloggen des Benutzers.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Die Einrichtung eines <em>"verschlüsselten"</em> Homeverzeichnisses kann schon als Option bei der Installation mittels
</p><ul><li><p>Live-CD (Desktop-Installer)</p></li><li><p>Alternate-CD/DVD</p></li><li><p>Netz-Installation</p></li></ul><p>ausgewählt werden. Hat man sich hierbei für ein verschlüsseltes Homeverzeichnis entschieden und auch die Einrichtung einer Swap-Partition mit vorgegeben, so wird diese Swap-Partition gleich verschlüsselt angelegt.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Diese verschlüsselte Swap-Partition kann in der Regel erst ab <a class="internal" href="../trusty_tahr.html">Trusty Tahr</a> (14.4 LTS) in einem Multiboot-System mitbenutzt werden. In älteren Versionen ist diese Swap-Partition vom anderen Betriebssystem dann weder les- noch beschreibbar und ist für die Modi
</p><ul><li><p><em>"suspend-to-disk"</em></p></li><li><p><em>"Bereitschaft"</em></p></li></ul><p>nur bedingt einsatzbereit.
</p></div></div><div class="section_2"><h3 id="Allgemeine-Hinweise">Allgemeine Hinweise<a class="headerlink" href="#Allgemeine-Hinweise">¶</a></h3><p>
Wurde die Option <em>"verschlüsseltes"</em> Homeverzeichnis nicht schon bei der Installation ausgewählt, so muss das folgende Paket entweder im Terminal <sup><a href="#source-2">[2]</a></sup> mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install ecryptfs-utils </pre></div></div><p>oder durch Anklicken des folgenden Button (sofern man sich im relevanten System befindet) nachinstalliert werden <sup><a href="#source-1">[1]</a></sup>:</p><ul><li><p><strong>ecryptfs-utils</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install ecryptfs-utils </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install ecryptfs-utils </pre></div></div><p>
</p></div></div><p>Sofern die Einrichtung einer verschlüsselten swap nicht bereits bei der Installation erfolgte, kann man dieses wie unter <a class="internal" href="../vorbereitung_teilverschlüsselung.html#Swap">Teilverschlüsselung</a> beschrieben einrichten.</p><p>Möchte man von den bei der oben erwähnten Standard-Installation abweichende Stärken der Verschlüsselung anwenden, so sind die "Experten-Info" unter <a class="internal" href="../luks.html#Erstellen">LUKS</a> zu beachten und die Datei <strong>/etc/crypttab</strong> entsprechend anzupassen.</p><p>Da die Varianten aber unterschiedliche Vorgehensweisen erfordern, wird die Einrichtung nachfolgend getrennt beschrieben.</p></div><div class="section_2"><h3 id="Einrichtung-Verzeichnis-Private">Einrichtung Verzeichnis Private<a class="headerlink" href="#Einrichtung-Verzeichnis-Private">¶</a></h3><p>
Jeder Benutzer kann nach einer <em>"normalen"</em> Installation einfach ein verschlüsseltes Verzeichnis einrichten, dazu führt man als Benutzer (<span class="underline">nicht</span> als Root) den folgenden Befehl in einem Terminal <sup><a href="#source-2">[2]</a></sup> aus:</p><div class="bash"><div class="contents"><pre class="notranslate">ecryptfs-setup-private </pre></div></div><p>Dabei wird das Login-Passwort vom Benutzer und die Passphrase zur Verschlüsselung abgefragt. Wird keine Passphrase angegeben, so generiert das Programm einen Zufallswert als Passphrase (dieses ist einem eigenen Schlüssel vorzuziehen).</p><p>Sollte das Verzeichnis <strong>~/Private</strong> bzw. die versteckten Verzeichnisse <strong>~/.ecryptfs</strong> oder <strong>~/.Private</strong> bereits existieren, bricht die Einrichtung mit entsprechendem Hinweis ab, selbst wenn das Verzeichnis leer ist. Danach sollte man den Befehl wiederholen und zwar mit</p><div class="bash"><div class="contents"><pre class="notranslate">ecryptfs-setup-private --force </pre></div></div><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Die Passphrase bitte danach auslesen (siehe <a class="internal" href="../ecryptfs/datenrettung.html#wrapped-passphrase-auslesen">Passphrase auslesen</a>) und unbedingt sicher aufbewahren, dies ist die einzige Möglichkeit, wieder an die Daten zu kommen, falls das System "beschädigt" wurde! Es wird empfohlen, alle Dateien aus dem relevanten Schlüssel-Verzeichnis extern zu sichern (siehe hierzu auch <a class="internal" href="../ecryptfs/datenrettung.html#Systempfade-der-Schluesseldateien">Systempfade der Schlüsseldateien</a>).
</p></div></div><p>Anschließend muss man sich neu einloggen und findet das Verzeichnis <strong>~/Private</strong> vor. Dieses wird von nun an bei jedem Einloggen des Nutzers entschlüsselt, und beim Ausloggen wieder verschlüsselt.</p></div><div class="section_2"><h3 id="Homeverzeichnis-umstellen">Homeverzeichnis umstellen<a class="headerlink" href="#Homeverzeichnis-umstellen">¶</a></h3><p>
Bei allen Installation, wenn man die entsprechenden Hinweise nicht umsetzen konnte (oder übersehen hatte), oder wie bei <a class="internal" href="../wubi.html">Wubi</a> nicht angeboten wird, kann man eine fertige Installation auf ein verschlüsseltes Homeverzeichnis umstellen. Dabei werden aber alle Daten gelöscht! (Eine Methode zum migrieren bestehender Home-Verzeichnisse steht weiter unten)</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Bei einer "frischen Installation" sollte man diese erst einmal überprüfen, ob alles einwandfrei startet (Grafikkarte, Netzwerk und was sonst noch geprüft werden sollte), bevor man nun anfängt, spezielle Benutzerdaten zu verändern/hinzuzufügen.</p><p>Überall wo nachfolgend <code class="notranslate">&lt;Benutzername&gt;</code> steht, ist der relevante Benutzername (ohne die Klammern) einzusetzen
</p></div></div><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Nachfolgende Prozedur löscht alle Dateien und Einstellungen des entsprechenden Anwenders. Bei einem frischen System ist das natürlich unproblematisch.
</p></div></div><p>Man ruft das System im <a class="internal" href="../recovery_modus.html">Recovery Modus</a> auf, wählt im Auswahldialog (<em>"friendly recovery"</em>] die Option <em>"root"</em> um eine Root-Konsole zu starten. Als erstes sollte man sich für ein späteres Auslesen die Datei <strong>/etc/group</strong> in ein Backup kopieren mit:</p><div class="bash"><div class="contents"><pre class="notranslate">cp -f /etc/group /etc/group.bak </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Ab Ubuntu 12.04 wird bei der Option "root" das Dateisystem nur lesend eingehängt. Siehe dazu die Hinweis-Box unter "Ab Ubuntu 12.04" im Artikel <a class="internal" href="../recovery_modus.html#In-den-Recovery-Modus-booten">Recovery Modus</a>
</p></div></div><p>oder die bestehenden Zuordnungen zu  <a class="internal" href="../benutzer_und_gruppen.html#Benutzer">Benutzer</a> und <a class="internal" href="../benutzer_und_gruppen.html#Gruppen">Gruppen</a> zum Notieren anzeigen lassen. Diese Daten erhält man mit:</p><div class="bash"><div class="contents"><pre class="notranslate">grep &lt;Benutzername&gt; /etc/group </pre></div></div><p>Dann gibt man ein:</p><div class="bash"><div class="contents"><pre class="notranslate">deluser --remove-home &lt;Benutzername&gt;
adduser --encrypt-home &lt;Benutzername&gt; </pre></div></div><p>Die Abfrage nach dem Passwort ist nun neu einzugeben - die restlichen Fragen nach Name usw. kann auch später noch eingegeben werden. Ist dieser Benutzer auch derjenige, der <a class="internal" href="../administrator.html">administrative</a> Tätigkeiten (sudo) durchführen soll, so muss diesem Nutzer dieses spezielle Recht <sup><a href="#source-3">[3]</a></sup> schon hier zugewiesen werden:</p><div class="bash"><div class="contents"><pre class="notranslate">adduser &lt;Benutzername&gt; sudo </pre></div></div><p>Mit 
<span class="key">Strg</span>  + 
<span class="key">D</span>  kehrt man in das das Auswahlmenü zurück, und kann über die Option <em>"resume"</em> zum Einloggen weitergehen. Nach dem Einloggen als Benutzer kann mit dem Befehl <code class="notranslate">startx</code> die grafische Oberfläche gestartet werden. Die alten Zuordnungen (siehe oben und ggf. weitere) werden am Desktop über die Eingabemaske  "<a class="internal" href="../benutzer_und_gruppen.html">Benutzer und Gruppen</a>" eingetragen.</p></div><div class="section_2"><h3 id="Zusaetzlicher-Benutzer">Zusätzlicher Benutzer<a class="headerlink" href="#Zusaetzlicher-Benutzer">¶</a></h3><p>
Für jeden zusätzlichen Benutzer kann man mit <a class="internal" href="../sudo.html">Root-Rechten</a> <sup><a href="#source-3">[3]</a></sup> im Terminal <sup><a href="#source-2">[2]</a></sup> ein neues, verschlüsseltes  Homeverzeichnis anlegen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo adduser --encrypt-home &lt;Benutzername&gt; </pre></div></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Das sollte vorzugsweise über die Menü-Option erfolgen:
</p><ul><li><p>GNOME-Dektop = <em>"System -&gt; Systemverwaltung -&gt; Benutzer und Gruppen"</em> </p></li><li><p>KDE-Desktop = <em>"Systemeinstellungen -&gt; Benutzerverwaltung -&gt; Benutzerkonten / Gruppen"</em></p></li></ul><p>Auch bei den anderen Desktop-Varianten sind vergleichbare Einstellmöglichkeiten gegeben, doch können je nach Version und Übersetzung die Bezeichnung(en) abweichen.
</p></div></div></div><div class="section_2"><h3 id="Altes-Homeverzeichnis-verschluesseln">Altes Homeverzeichnis verschlüsseln<a class="headerlink" href="#Altes-Homeverzeichnis-verschluesseln">¶</a></h3><p>
Bei einer bereits länger bestehenden Installation gestaltet sich die "Umwandlung" in ein verschlüsseltes <a class="internal" href="../homeverzeichnis.html">Homeverzeichnis</a> etwas komplexer, ist aber auch für einen <em>"ungeübten"</em> Nutzer machbar.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Vorab gilt zu beachten:
</p><ul><li><p>Falls die Option zum <a class="internal" href="../ecryptfs/nutzung.html#Automatisches-Login">automatischen Login</a> ausgewählt oder eine Gastsitzung eingerichtet wurde, sollte man beides unter <a class="internal" href="../benutzer_und_gruppen.html">Benutzer und Gruppen</a> entfernen.</p></li><li><p>Man sollte vorab ein <a class="internal" href="../sicherheit.html">Backup</a> vom Homeverzeichnis anfertigen!</p></li><li><p>Es muss ausreichender Platz auf dem Datenträger / Partition vorhanden sein, weil das Homeverzeichnis bei dem Vorgang auch kopiert wird! </p></li><li><p>Je nach Größe des Homeverzeichnisses kann der Vorgang einige Zeit dauern (hardwareabhängig).</p></li><li><p>Es ist angeraten, auch gleich Vorkehrungen für das Notieren der Systemausgaben zu treffen. Beim folgend beschriebenen Ablauf bitte die Reihenfolge einhalten!</p></li></ul></div></div><div class="section_3"><h4 id="Vorbereitungen">Vorbereitungen<a class="headerlink" href="#Vorbereitungen">¶</a></h4><p>
Als erstes sollte man sicherstellen, das mehr als der umzustellende Benutzer vorhanden ist, mit diesem muss man sich später anmelden.</p><p>Wenn kein weiterer Benutzer vorhanden sein sollte, muss man diesen mit folgendem Kommando anlegen:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo adduser "Benutzer" sudo </pre></div></div><p>Der Benutzername kann frei gewählt werden und wird nachher auch wieder entfernt. "sudo" ist eine Gruppe mit der man die Berechtigung erhält als Benutzer "root" zu agieren.</p><p>Nun muss man sich ausloggen und in ein globales Terminal wechseln. Bei den meisten Distributionen geht das durch:

<span class="key">Strg</span>  + 
<span class="key">Alt</span>  + 
<span class="key">F1</span> </p><p>(Wieder zurück kommt man mit 
<span class="key">Strg</span>  + 
<span class="key">Alt</span>  + 
<span class="key">F7</span> )</p></div><div class="section_3"><h4 id="Umstellung-ausfuehren">Umstellung ausführen<a class="headerlink" href="#Umstellung-ausfuehren">¶</a></h4><p>
Nun muss man sich mit dem neuen Benutzer anmelden, danach 
wenn man dies gemacht hat, beendet man die grafische Oberfläche mit:</p><div class="bash"><div class="contents"><pre class="notranslate">/etc/init.d/lightdm stop </pre></div></div><p>Dann verschlüsselt man das Home-Verzeichnis mit:</p><div class="bash"><div class="contents"><pre class="notranslate">ecryptfs-migrate-home -u &lt;benutzername&gt; </pre></div></div><p>Als letztes muss man die grafische Oberfläche wieder starten,</p><div class="bash"><div class="contents"><pre class="notranslate">/etc/init.d/lightdm start </pre></div></div><p>wieder mit 
<span class="key">Strg</span>  + 
<span class="key">Alt</span>  + 
<span class="key">F7</span>  auf die grafische Obefläche wechseln und sich als letztes einloggen.</p><p>Wenn man nun seine Daten lesen und auch neue schreiben kann, dann kann man das Backup unter:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo rm -r /home/&lt;benutzername&gt;.* </pre></div></div><p>löschen.</p></div></div></div><div class="section_1"><h2 id="Deinstallation">Deinstallation<a class="headerlink" href="#Deinstallation">¶</a></h2><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Daran denken: wichtige Daten vorab aus dem Verzeichnis <strong>~/Private</strong> bzw. aus dem unverschlüsselten Homeverzeichnis an einen anderen Ort sichern!
</p></div></div><div class="section_2"><h3 id="Verzeichnis-Private-entfernen">Verzeichnis Private entfernen<a class="headerlink" href="#Verzeichnis-Private-entfernen">¶</a></h3><p>
Um das Verzeichnis <strong>~/Private</strong> zu löschen, führt man als <span class="underline">angemeldeter</span> Benutzer im Terminal <sup><a href="#source-2">[2]</a></sup> nacheinander folgende Befehle aus:</p><div class="bash"><div class="contents"><pre class="notranslate">cd /home/&lt;Benutzername&gt;
ecryptfs-umount-private
chmod 700 ~/Private
rm -rf ~/Private ~/.Private ~/.ecryptfs </pre></div></div></div><div class="section_2"><h3 id="Verschluesselung-des-Homeverzeichnisses-entfernen">Verschlüsselung des Homeverzeichnisses entfernen<a class="headerlink" href="#Verschluesselung-des-Homeverzeichnisses-entfernen">¶</a></h3><p>
Um die Verschlüsselung des <a class="internal" href="../homeverzeichnis.html">Homeverzeichnisses</a> zu entfernen und dieses auf ein fortan unverschlüsseltes Homeverzeichnis umzustellen, muss man nachfolgende Schritte in der aufgeführten Reihenfolge ausführen.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Es <span class="underline">muss</span> für die folgende Maßnahme ausreichender Platz auf dem Ziel-Laufwerk vorhanden sein! 
</p></div></div><div class="section_3"><h4 id="Vorbereitungen-2">Vorbereitungen<a class="headerlink" href="#Vorbereitungen-2">¶</a></h4><p>
Der Benutzer muss angemeldet sein. Dann in einem Terminal <sup><a href="#source-2">[2]</a></sup> mit <a class="internal" href="../sudo.html">Root-Rechten</a> <sup><a href="#source-3">[3]</a></sup> die Daten unverschlüsselt an eine andere Stelle kopieren (nachfolgend wurde <strong>/home/backup</strong> gewählt):</p><div class="bash"><div class="contents"><pre class="notranslate">cd /
sudo mkdir /home/backup
sudo rsync -ap /home/&lt;Benutzername&gt;/ /home/backup/ </pre></div></div><p>Danach startet man das System im <a class="internal" href="../recovery_modus.html">Recovery Modus</a> neu, und wählt im Auswahlmenü (<code class="notranslate">friendly-recovery</code>) die Option "Zur root-Befehlszeile (Shell) wechseln". Nun hängt man zunächst die Systempartition mit Schreib- und Leserechten neu ein:
</p><div class="bash"><div class="contents"><pre class="notranslate">mount -o remount,rw / </pre></div></div><p>
Sollte das Homeverzeichnis eine eigene Partition sein, muss man diese ebenso einhängen:
</p><div class="bash"><div class="contents"><pre class="notranslate">mount /home/ </pre></div></div><p>Nun die Datei <strong>/etc/adduser.conf</strong> mit einem Konsolen-Editor <sup><a href="#source-4">[4]</a></sup> (z.B.: <a class="internal" href="../nano.html">Nano</a>) öffnen und darin die Zeile</p><pre class="notranslate">SKEL=/etc/skel</pre><p>durch Voransetzen von 
<span class="key">#</span>  auskommentieren. Direkt darunter fügt man folgende Zeile ein:</p><pre class="notranslate">SKEL=/home/backup</pre><p>Danach die Datei sichern.</p></div><div class="section_3"><h4 id="Verschluesselung-entfernen">Verschlüsselung entfernen<a class="headerlink" href="#Verschluesselung-entfernen">¶</a></h4><p>
Zuerst wird der Nutzer mit bislang verschlüsseltem Homeverzeichnis gelöscht und anschließend neu angelegt:</p><div class="bash"><div class="contents"><pre class="notranslate">deluser --remove-home &lt;Benutzername&gt;
adduser &lt;Benutzername&gt; </pre></div></div><p>Soll der Nutzer <a class="internal" href="../administrator.html">administrative</a> Rechte erhalten, fügt man ihn der Administratorgruppe <code class="notranslate">sudo</code> (seit 12.04) hinzu:</p><p><strong>Seit 12.04:</strong>
</p><div class="bash"><div class="contents"><pre class="notranslate">adduser &lt;Benutzername&gt; sudo </pre></div></div><p>Wurde der Benutzer erfolgreich neu angelegt, können das Backupverzeichnis und das ehemals verschlüsselte Homeverzeichnis gelöscht werden:
</p><div class="bash"><div class="contents"><pre class="notranslate">rm -rf /home/backup
rm -rf /home/.ecryptfs/&lt;Benutzername&gt; </pre></div></div><p>Nun stellt man mit einem Editor <sup><a href="#source-4">[4]</a></sup> den alten Zustand der Datei <strong>/etc/adduser.conf</strong> wieder her (siehe oben!). Man kehrt mit 
<span class="key">Strg</span>  + 
<span class="key">D</span>  in das <code class="notranslate">friendly-recovery</code>-Auswahlmenü zurück und startet das System nun via <code class="notranslate">resume</code>. Nun sollte das Homeverzeichnis dem Nutzer unverschlüsselt zur Verfügung stehen. Es müssen nun noch die Einstellungen zu <a class="internal" href="../benutzer_und_gruppen.html">Benutzer und Gruppen</a> überprüft werden.</p></div></div><div class="section_2"><h3 id="Basis-Pakete-entfernen">Basis-Pakete entfernen<a class="headerlink" href="#Basis-Pakete-entfernen">¶</a></h3><p>
Will man auch das Basispaket <strong>ecryptfs-utils</strong> endgültig entfernen, so sind in einem "Mehruser-System" <span class="underline">erst</span> obige Schritte von <span class="underline">jedem</span> Nutzer auszuführen, danach kann man im Terminal <sup><a href="#source-2">[2]</a></sup> mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get purge ecryptfs-utils
sudo apt-get autoremove --purge </pre></div></div><p>die Anwendung deinstallieren.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Sollte es nach dem Entfernen der Basis-Pakete zu Problemen beim Löschen der Verzeichnisse kommen, so kann man diese Verzeichnisse auch noch nachträglich im Recovery-Mode am Root-Prompt löschen. 
</p></div></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="../ecryptfs.html">ecryptfs</a> <img alt="{Übersicht}" src="../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Das <a class="internal" href="../homeverzeichnis.html">Homeverzeichnis</a> bzw. ein Verzeichnis darin verschlüsseln</p><ul><li><p><a class="internal" href="../ecryptfs/nutzung.html">Nutzung</a> - wie man seine Daten bearbeiten und nutzen kann</p></li><li><p><a class="internal" href="../ecryptfs/datenrettung.html">Datenrettung</a> - Struktur der Schlüsseldaten und Datenrettung </p></li></ul></li><li><p><a class="interwiki interwiki-ubuntu_doc" href="https://help.ubuntu.com/community/EncryptedPrivateDirectory">Weitere Hinweise</a></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../ecryptfs/einrichten/a/revision/839148.html">Diese Revision</a> wurde am 25. September 2015 07:10 von <a href="https://ubuntuusers.de/user/noisefloor/">noisefloor</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../ecryptfs.html">ecryptfs</a></li>
<li><a href="../ecryptfs/einrichten.html">Einrichten</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>