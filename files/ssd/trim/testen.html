<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>SSD/TRIM/Testen › ubuntuusers statisches Wiki</title>
<link href="../../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../../ssd/trim/testen.html">Testen</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/SSD/TRIM/Testen">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../../wiki/index.html">Index</a></li>
<li><a href="../../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../../wiki.html">Übersicht</a></li>
<li><a href="../../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../../kategorien.html">Kategorie</a></li>
<li><a href="../../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../../howto.html">Howto anlegen</a></li>
<li><a href="../../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../../baustelle.html">Baustellen</a></li>
<li><a href="../../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../../ssd/trim/testen/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../../ssd/trim/testen/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../../ssd/trim/testen/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../../ssd/trim/testen/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../../ssd/trim/testen/a/backlinks.html">Testen</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="../../trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../../sudo.html">Root-Rechte</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Testen-des-TRIM-der-SSD">Testen des TRIM der SSD
</a></li><li><a class="crosslink" href="#Testen-des-Kernel-TRIM-fuer-SSDs-vom-Typ-2">Testen des Kernel-TRIM für SSDs vom Typ 2
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Dieser Artikel ist Teil der Artikelserie <strong><a class="internal" href="../../ssd.html">SSD</a></strong>, welche das Thema <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Solid_State_Drive">Solid State Drives</a> behandelt.<br/>Dieser Artikel geht in allen Beschreibungen davon aus, dass die SSD als <strong>/dev/sda</strong> im System eingebunden ist. Die Befehle müssen bei davon abweichenden Systemen daher gegebenenfalls angepasst werden.
</p></div></div><p>Dieser Artikel dient als Ergänzung zu <a class="internal" href="../../ssd/trim.html">SSD/Trim</a> und behandelt verschiedene Testverfahren zum Überprüfen der TRIM-Funktion.</p><div class="section_1"><h2 id="Testen-des-TRIM-der-SSD">Testen des TRIM der SSD<a class="headerlink" href="#Testen-des-TRIM-der-SSD">¶</a></h2><p>
Um zu überprüfen, ob eine SSD die TRIM-Funktion unterstützt, nutzt man den folgenden Befehl in einem Terminal <sup><a href="#source-1">[1]</a></sup> mit Root-Rechten <sup><a href="#source-2">[2]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo hdparm -I /dev/sda | grep -i TRIM </pre></div></div><p>Im Positivfall enthält die Ausgabe eine der folgenden Zeilen:
</p><pre class="notranslate">	   *	Data Set Management TRIM supported
	   *	Data Set Management TRIM supported (limit N blocks)
           *    Data Set Management TRIM supported (limit unknown)</pre><p>Der Stern (<code class="notranslate">*</code>) zeigt an, dass die Option verfügbar ist.</p><p>Zu beachten ist außerdem, dass es mehrere Typen von SSDs gibt, die sich darin unterscheiden, welche Daten für per TRIM freigebene Datenblöcke zurückgeliefert werden. Zu erkennen ist der Typ an einer zusätzlichen Ausgabezeile:</p><ul><li><p>Typ 1 – liefert beliebige Daten zurück, nicht jedoch die Ausgangsdaten vor TRIM: </p><pre class="notranslate">	   *	Deterministic read data after TRIM</pre></li><li><p>Typ 2 – liefert Nullen zurück: </p><pre class="notranslate">	   *	Deterministic read ZEROs after TRIM</pre></li><li><p>Typ 3 – keine zusätzliche Ausgabezeile, das Verhalten für freigegebene Datenblöcke ist undefiniert.</p></li></ul><p>
</p></div><div class="section_1"><h2 id="Testen-des-Kernel-TRIM-fuer-SSDs-vom-Typ-2">Testen des Kernel-TRIM für SSDs vom Typ 2<a class="headerlink" href="#Testen-des-Kernel-TRIM-fuer-SSDs-vom-Typ-2">¶</a></h2><p>
Nur für SSDs des oben beschriebenen Typ 2 kann man in einem Terminal <sup><a href="#source-1">[1]</a></sup> mit Root-Rechten <sup><a href="#source-2">[2]</a></sup> sehr einfach testen, ob der automatische TRIM (ab <a class="internal" href="../../kernel.html">Kernel</a> 2.6.33) funktioniert. Diese Test-Methode funktioniert auch bei Verwendung von <a class="internal" href="../../software-raid.html">Software-RAID</a> sowie <a class="internal" href="../../luks.html">LUKS</a> oder <a class="internal" href="../../lvm.html">LVM</a> jedoch nicht für sogenannte Overlay-Dateisysteme wie etwa <a class="internal" href="../../ecryptfs.html">ecryptfs</a> welches auch bei der Verschlüsselung des <a class="internal" href="../../homeverzeichnis.html">Homeverzeichnis</a> über den Ubuntuinstaller verwendet wird.</p><p>Für diesen Test wird eine Datei erstellt, sich deren Position auf dem Datenträger gemerkt, danach die Datei gelöscht und die Daten an der gemerkten Position vorher und nachher verglichen. Das folgende Verfahren zeigt, wie man vorgeht:</p><p>Zuerst wechselt man in einen Ordner, der auf der SSD liegt, in diesem Beispiel <strong>"/"</strong> (das Wurzeldateisystem). Dann erstellt man dort die Testdatei.
</p><div class="bash"><div class="contents"><pre class="notranslate">cd /
yes | sudo dd iflag=fullblock bs=1M count=1 of=trim.test </pre></div></div><p>Nun muss man noch herausfinden wo die Datei genau liegt, dazu braucht man die Position im Dateisystem und den Gerätenamen, auf dem das Dateisystem liegt.
</p><div class="bash"><div class="contents"><pre class="notranslate">filefrag -s -v trim.test </pre></div></div><p>Dies führt zu so einer ähnlichen Ausgabe:
</p><pre class="notranslate">Filesystem type is: ef53
File size of trim.test is 1048576 (256 blocks, blocksize <strong class="highlighted">4096</strong>)
 ext logical physical expected length flags
   0       0    <strong class="highlighted">34048</strong>             <strong class="highlighted">256</strong> eof
trim.test: 1 extent found</pre><p>
Wichtige Werte sind hier gelb Markiert. Die Blockgröße 4096 in Bytes, der Offset (Versatz zum Anfang des Gerätes) 34048 in Blöcken und die Anzahl der Blöcke 256. Mit diesen Werten muss man später die Datei vom Datenträger lesen, da sie nach dem Löschen nicht mehr über ihren Dateinamen ansprechbar ist.</p><p>Jetzt noch schnell den Gerätenamen bestimmen:
</p><div class="bash"><div class="contents"><pre class="notranslate">df trim.test </pre></div></div><p>
Hier sollte folgende Ausgabe kommen (das Gerät wurde gelb markiert):
</p><pre class="notranslate">Dateisystem              1K-Blöcke  Benutzt Verfügbar Verw% Eingehängt auf
<strong class="highlighted">/dev/mapper/Tarsius-root</strong>  32896880 11722824  20838512   37% /</pre><p>Mit diesen (gelb markierten) Werten liest man jetzt die Datei direkt vom Gerät.
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo dd bs=<strong class="highlighted">4096</strong> skip=<strong class="highlighted">34048</strong> count=<strong class="highlighted">256</strong> if=<strong class="highlighted">/dev/mapper/Tarsius-root</strong> | hexdump -C </pre></div></div><p>
Die Ausgabe sollte so aussehen:
</p><pre class="notranslate">00000000  79 0a 79 0a 79 0a 79 0a  79 0a 79 0a 79 0a 79 0a  |y.y.y.y.y.y.y.y.|
*
256+0 Datensätze ein
256+0 Datensätze aus
1048576 Bytes (1,0 MB) kopiert, 0,0255604 s, 41,0 MB/s
00100000</pre><p>
Nun kann man die Datei löschen.
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo rm trim.test
sync </pre></div></div><p>
Sollte man in den Mountoptionen (fstab) kein discard verwenden muss man noch manuell trimmen.
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo fstrim -v ./ </pre></div></div><p>Das Dateisystem sollte jetzt getrimmt worden sein und nun wird mit dem Befehl von weiter oben die (gelöschte) Datei erneut gelesen. Hierbei müssen diesmal zunächst Caches geleert werden, um sicherzustellen, daß die Daten erneut von der SSD gelesen werden.</p><div class="bash"><div class="contents"><pre class="notranslate">echo 1 | sudo tee /proc/sys/vm/drop_caches
sudo dd bs=<strong class="highlighted">4096</strong> skip=<strong class="highlighted">34048</strong> count=<strong class="highlighted">256</strong> if=<strong class="highlighted">/dev/mapper/Tarsius-root</strong> | hexdump -C </pre></div></div><p>Ist die Ausgabe die gleiche wie oben (eine Zeile mit y.y.y.y.y.y.y.y.) dann wurde nicht getrimmt, hat sich die Ausgabe geändert, dann war der Trim erfolgreich. Hier noch 2 Beispiele für die Ausgabe mit Verschlüsselung
</p><pre class="notranslate">00000000  1f c9 55 7d 07 15 00 d1  4a 1c 41 1a 43 84 15 c0  |..U}....J.A.C...|
00000010  24 35 37 fe 05 f7 43 93  1e f4 3c cc d8 83 44 ad  |$57...C...&lt;...D.|
00000020  46 80 c2 26 13 06 dc 20  7e 22 e4 94 21 7c 8b 2c  |F..&amp;... ~"..!|.,|
00000030  1f 48 0e 4e 30 f3 63 e1  15 b8 aa 1e d3 ec ef 48  |.H.N0.c........H|
...</pre><p>
und ohne Verschlüsselung
</p><pre class="notranslate">00000000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*</pre></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="../../ssd/trim.html">SSD/Trim</a> - Hauptartikel</p></li><li><p><a class="internal" href="../../ssd.html">SSD</a> <img alt="{Übersicht}" src="../../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../../ssd/trim/testen/a/revision/939308.html">Diese Revision</a> wurde am 4. Mai 2017 21:46 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../../startseite.html">Wiki</a></li>
<li><a href="../../ssd.html">SSD</a></li>
<li><a href="../../ssd/trim.html">TRIM</a></li>
<li><a href="../../ssd/trim/testen.html">Testen</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>