<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>SNMP › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./snmp.html">SNMP</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/SNMP">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./snmp/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./snmp/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./snmp/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./snmp/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./snmp/a/backlinks.html">SNMP</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><p>
</p><div class="box advanced"><h3 class="box advanced">Artikel für fortgeschrittene Anwender</h3><div class="contents"><p>
Dieser Artikel erfordert mehr Erfahrung im Umgang mit
Linux und ist daher nur für fortgeschrittene Benutzer
gedacht.
</p></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./paketquellen_freischalten.html">Bearbeiten von Paketquellen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Grundlegende-Konfiguration-fuer-Version-1-und-2">Grundlegende Konfiguration für Version 1 u...</a></li><li><a class="crosslink" href="#Grundlegende-Konfiguration-fuer-Version-3">Grundlegende Konfiguration für Version 3
</a></li><li><a class="crosslink" href="#Zugriff-von-anderen-Rechnern-aus-erlauben">Zugriff von anderen Rechnern aus erlauben
</a></li><li><a class="crosslink" href="#Zugriff-nur-fuer-bestimmte-Rechner-erlauben">Zugriff nur für bestimmte Rechner erlauben...</a></li><li><a class="crosslink" href="#snmpget-und-snmpwalk">snmpget und snmpwalk
</a></li><li><a class="crosslink" href="#MIBs-und-OIDs">MIBs und OIDs
</a></li><li><a class="crosslink" href="#snmptranslate">snmptranslate
</a></li><li><a class="crosslink" href="#Weitere-Konfigurationsmoeglichkeiten-in-der-snmpd-conf">Weitere Konfigurationsmöglichkeiten in der...</a><ol class="arabic"><li><a class="crosslink" href="#Vorgegebene-berwachungsmoeglichkeiten-verwenden">Vorgegebene Überwachungsmöglichkeiten ve...</a></li><li><a class="crosslink" href="#Rueckgabewerte-und-Ausgaben-eigener-Skripte-abfragen">Rückgabewerte und Ausgaben eigener Skrip...</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>Das <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Simple_Network_Management_Protocol">SNMP</a> (Simple Network Management Protocol) ist ein Netzwerkprotokoll, mit welchem Elemente eines Netzwerks (z. B. Router, Server, Switches, Drucker, Computer etc.) von einer zentralen Station aus überwacht und gesteuert werden können. Das Protokoll regelt hierbei die Kommunikation zwischen den überwachten Geräten und der Überwachungsstation. SNMP wurde so ausgelegt, dass jedes netzwerkfähige Gerät mit in die Überwachung und Steuerung einbezogen werden kann.</p><p>SNMP ermöglicht
</p><ul><li><p>Überwachung von Netzwerkkomponenten,</p></li><li><p>Fernsteuerung und Fernkonfiguration von Netzwerkkomponenten,</p></li><li><p>Fehlererkennung und Fehlerbenachrichtigung.</p></li></ul><p>
Da SNMP recht einfach gehalten ist, wird dieses Protokoll sowohl von den meisten Managementprogrammen als auch von den meisten Endgeräten verwendet. Es existieren SNMP-Version 1, 2 und 3. Der große Unterschied von Version 3 zu 1 und 2 ist, dass die Sicherheit durch eine integrierte Benutzerverwaltung und eine mögliche Verschlüsselung stark erhöht wurde.</p><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Um unter Ubuntu mit einem Rechner einzelne Netzwerkelemente über SNMP anzusprechen, muss folgendes Paket installiert werden <sup><a href="#source-1">[1]</a></sup>:</p><ul><li><p><strong>snmpd</strong> (<em>main</em> <sup><a href="#source-2">[2]</a></sup>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install snmpd </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install snmpd </pre></div></div><p>
</p></div></div><p>Um von einem Rechner die Abfragen zu starten (z. B. <code class="notranslate">snmpwalk</code> oder <code class="notranslate">snmpget</code>), muss das folgende Paket installiert werden:</p><ul><li><p><strong>snmp</strong> (<em>main</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install snmp </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install snmp </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="Grundlegende-Konfiguration-fuer-Version-1-und-2">Grundlegende Konfiguration für Version 1 und 2<a class="headerlink" href="#Grundlegende-Konfiguration-fuer-Version-1-und-2">¶</a></h2><p>
In der Standardkonfiguration gibt es nur die Community (also quasi eine Gruppe) <code class="notranslate">public</code>, mit der Abfragen gemacht werden dürfen und dies auch nur in einem recht eingeschränktem Rahmen. Die Konfiguration findet sich in der Datei <strong>/etc/snmp/snmpd.conf</strong>:</p><pre class="notranslate">#       sec.name  source          community
com2sec paranoid  default         public</pre><p>Um alle Werte abfragen zu können, muss man in einem Editor<sup><a href="#source-3">[3]</a></sup> mit Root-rechten das <code class="notranslate">paranoid</code> in <code class="notranslate">readonly</code> ändern bzw. in <code class="notranslate">readwrite</code>, um Werte auch ändern zu können. Als minimale Sicherheitsmaßnahme sollte man den Community-Namen <code class="notranslate">public</code> in einen eigenen Namen ändern, da es bei Version 1 und 2 ausreicht, den Community-Namen zu haben, um Abfragen abzusetzen.</p><p>Man kann auch verschiedene Communities haben, denen man unterschiedliche Rechte zuweist. Genauer beschrieben wird dies in der mitgelieferten <strong>snmpd.conf</strong>.</p><p>Nach dem Anpassen der <strong>snmpd.conf</strong> muss der <code class="notranslate">snmpd</code> die Konfiguration neu einlesen werden<sup><a href="#source-4">[4]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service snmpd restart </pre></div></div><p>Eine Liste der zur Verfügung stehenden Daten erhält man nun auf dem überwachenden Server mit folgendem Kommando (wobei hinter dem <code class="notranslate">-c</code> der Communityname angegeben ist):</p><div class="bash"><div class="contents"><pre class="notranslate">snmpwalk -v1 -c public localhost </pre></div></div></div><div class="section_1"><h2 id="Grundlegende-Konfiguration-fuer-Version-3">Grundlegende Konfiguration für Version 3<a class="headerlink" href="#Grundlegende-Konfiguration-fuer-Version-3">¶</a></h2><p>
Mit der Version 3 hat man die Möglichkeit, die Authentifizierung und die Daten verschlüsselt zu übertragen. Bei den Versionen 1 und 2 können die Pakete im Netzwerk leicht abgehört und ausgelesen werden. Insofern sollte man Version 3 verwenden, falls man SNMP in einem nicht abgeschotteten Netzwerk verwendet. Durch die etwas komplexere Konfiguration hat sich die Version 3 jedoch noch nicht so weit verbreitet. So sind z. B. die meisten auf SNMP basierenden <a class="external" href="http://www.nagios.org/" rel="nofollow">Nagios</a>-Plugins <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> nur für Version 1 und 2 geschrieben.</p><p>Damit die Verschlüsselung funktioniert, muss folgendes Paket installiert werden <sup><a href="#source-3">[3]</a></sup>:</p><ul><li><p><strong>openssl</strong> (<em>main</em> <sup><a href="#source-4">[4]</a></sup>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install openssl </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install openssl </pre></div></div><p>
</p></div></div><p>Zunächst stoppt man den SNMP-Daemon:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service snmpd stop </pre></div></div><p>Dann legt man den Benutzer an (in diesem Fall den Benutzer <code class="notranslate">Nagios</code>):</p><div class="bash"><div class="contents"><pre class="notranslate">sudo net-snmp-config --create-snmpv3-user -ro -X DES -A MD5 -a "SNMP_PWD" -x "SNMP_PWD" nagios </pre></div></div><p>Der Parameter <code class="notranslate">-ro</code> gibt an, dass der Benutzer lediglich Leserechte besitzt. Das <code class="notranslate">-A</code> definiert den Hashalgorithmus für das Passwort (MD5 oder SHA) und das <code class="notranslate">-X</code> den Algorithmus für die Verschlüsselung der Daten, die übertragen werden (AES oder DES). Hinter dem <code class="notranslate">-a</code> und <code class="notranslate">-x</code> ist das Passwort für die Authentifizierung und die Verschlüsselung angeben.</p><p>Nun ändert man noch entsprechende Zeile in der Datei <strong>/usr/share/snmp/snmpd.conf</strong> (hängt das <code class="notranslate">AuthPriv</code> an), um die Verschlüsselung von Verbindung und Passwort zu erzwingen:</p><pre class="notranslate">rouser nagios AuthPriv</pre><p>Nun löscht man die vorhandene <strong>/etc/snmp/snmpd.conf</strong> und erstellt eine neue mit folgendem Inhalt:</p><pre class="notranslate">group groupv3             usm      nagios
view    all included   .iso      80
#  context sec.model                      sec.level   match  read        write      notif
access groupv3         ""        any       auth      exact    all         all        all

syslocation Unknown 
syscontact Root &lt;root@localhost&gt; </pre><p>Falls man lediglich Lesezugriff erlauben möchte, so muss man entsprechend bei <code class="notranslate">write</code> den Wert auf <code class="notranslate">none</code> setzen.</p><p>Danach startet man Daemon wieder:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service snmpd start </pre></div></div></div><div class="section_1"><h2 id="Zugriff-von-anderen-Rechnern-aus-erlauben">Zugriff von anderen Rechnern aus erlauben<a class="headerlink" href="#Zugriff-von-anderen-Rechnern-aus-erlauben">¶</a></h2><p>
Standardmäßig sind lediglich Anfragen auf localhost erlaubt. Um den Zugriff auch für andere IPs (auf dem zu überwachenden Rechner) zu erlauben, muss man in der Datei <strong>/etc/default/snmpd</strong> die Startoptionen ändern, also die folgende Zeile:</p><pre class="notranslate">SNMPDOPTS='-Lsd -Lf /dev/null -u snmp -g snmp -I -smux -p /var/run/snmpd.pid 127.0.0.1'</pre><p>Will man Abfragen auf allen Netzwerkinterfaces zulassen, so löscht man die 127.0.0.1 am Ende. Hat man mehrere Netzwerkkarten im Rechner und will die SNMP-Anfragen nur auf einer zulassen, so hängt man die entsprechende IP an die 127.0.0.1 per Leerzeichen getrennt an, z. B.:</p><pre class="notranslate">SNMPDOPTS='-Lsd -Lf /dev/null -u snmp -g snmp -I -smux -p /var/run/snmpd.pid 127.0.0.1 192.168.32.4'</pre><p>Nach dem Anpassen der Datei muss <code class="notranslate">snmpd</code> neu gestartet werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service snmpd restart </pre></div></div><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Ist auf dem Rechner eine Firewall installiert, so muss hier der UDP-Port 161 freigeschaltet werden, um von anderen Rechner aus SNMP-Abfragen stellen zu können.
</p></div></div></div><div class="section_1"><h2 id="Zugriff-nur-fuer-bestimmte-Rechner-erlauben">Zugriff nur für bestimmte Rechner erlauben<a class="headerlink" href="#Zugriff-nur-fuer-bestimmte-Rechner-erlauben">¶</a></h2><p>
Möchte man den Zugriff nur für bestimmte Rechner erlauben, so ändert man zunächst in <strong>/etc/default/snmpd</strong> den Parameter SNMPDOPTS wie folgt:
</p><pre class="notranslate">SNMPDOPTS='-Lsd -Lf /dev/null -u snmp -g snmp -I -smux -p /var/run/snmpd.pid'</pre><p>
Dann definiert man, welchen Rechnern man beispielsweise uneingeschränkten Lesezugriff erlauben will. Das geschieht in <strong>/etc/snmp/snmpd.conf</strong> mit folgenden Konfigurationszeilen:
</p><pre class="notranslate"># com2sec paranoid  default         public
#com2sec readonly  default         public
rocommunity public    xxx.xxx.xxx.xxx/32
rocommunity public    yyy.yyy.yyy.yyy/32
com2sec     readonly  xxx.xxx.xxx.xxx/32         public
com2sec     readonly  yyy.yyy.yyy.yyy/32         public</pre></div><div class="section_1"><h2 id="snmpget-und-snmpwalk">snmpget und snmpwalk<a class="headerlink" href="#snmpget-und-snmpwalk">¶</a></h2><p>
Mit <code class="notranslate">snmpwalk</code> kann man ganze Listen von Werten anzeigen, mit <code class="notranslate">snmpget</code> erhält man im Gegensatz dazu nur einzelne Werte, also z. B.</p><div class="bash"><div class="contents"><pre class="notranslate">snmpwalk -v1 -c private &lt;IP&gt; memory
snmpget -v1 -c private &lt;IP&gt; memAvailReal.0
snmpget -v3 -u nagios -l authPriv -a MD5 -x DES -X SNMP_PWD -A SNMP_PWD localhost sysDescr.0 </pre></div></div><p>Hierbei ist die letzte Zeile für die Version 3 gegeben, wobei das <code class="notranslate">-a</code> angibt, wie das Passwort verschlüsselt werden soll und das <code class="notranslate">-x</code> beinhaltet den Algorithmus für die Verschlüsselung der übertragenen Daten.</p><p>Um nur den zurückgelieferten Wert auszugeben, kann man den Parameter <code class="notranslate">-Oqv</code> für <code class="notranslate">snmpget</code> bzw. <code class="notranslate">snmpwalk</code> verwenden.</p><p>Viele Werte findet man in den Tabellen prTable, memory, extTable, dskTable, loadTable, systemStats, ucdDemoMIB, fileTable, logMatch, version, snmperrs, mibRegistryTable. Hierfür müssen dann teilweise zunächst entsprechende Einträge in der <strong>/etc/snmp/snmpd.conf</strong> gemacht sein (siehe weiter unten), z. B. für fileTable.</p></div><div class="section_1"><h2 id="MIBs-und-OIDs">MIBs und OIDs<a class="headerlink" href="#MIBs-und-OIDs">¶</a></h2><p>
Die MIB-Dateien (MIB = Management Information Base) liegen unter <strong>/usr/share/snmp/mibs</strong>. Seit Ubuntu 10.04 sind diese in einem extra Paket nachzuinstallieren.
</p><ul><li><p><strong>snmp-mibs-downloader</strong> (<em>multiverse</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install snmp-mibs-downloader </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install snmp-mibs-downloader </pre></div></div><p>
</p></div></div><p>
Die MIB-Dateien enthalten die Informationen, die man per SNMP abfragen und ändern kann. Ähnlich wie bei einen <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/LDAP">LDAP</a>-Schema sind alle Objekte in einer Baumstruktur angeordnet, wobei die Knoten keine eigenen Werte, sondern nur Listen der darunterliegenden Objekte enthalten. Jedes Objekt hat eine eindeutige OID (Object Identifier) zugeordnet, wobei die einzelnen Knoten des Baumes durch Punkte getrennt aufgeführt werden. Dabei gibt es für die einzelnen Knoten sowohl eine darstellende Zahl als auch eine etwas aussagekräftigerere Kette von Worten (z. B. entspricht .1.3.6.1.4.1.2021.9 dem Wort <code class="notranslate">.iso.org.dod.internet.private.enterprises.ucdavis.dskTable</code>).</p><p>Die wichtigsten MIB-Dateien unter Ubuntu sind die <strong>UCD-SNMP-MIB.txt</strong> und die <strong>UCD-SNMP-MIB.txt</strong>.</p><p>Den Inhalt einer MIB-Datei übersichtlich darstellen und browsen kann man mit verschiedenen Programmen, z. B. 
</p><ul><li><p><code class="notranslate">tkmib</code> (aus dem gleichnamigen Paket).</p></li></ul><p>
</p></div><div class="section_1"><h2 id="snmptranslate">snmptranslate<a class="headerlink" href="#snmptranslate">¶</a></h2><p>
Die OIDs und entsprechenden "aussagekräftigen" Namen kann man per <code class="notranslate">snmptranslate</code> ineinander überführen. Für einen abgekürzten Namen (z. B. <code class="notranslate">dskTable</code>) erhält man mittels Parameter <code class="notranslate">-IR</code> den vollständigen Namen (z. B. <code class="notranslate">UCD-SNMP-MIB::dskTable</code>). Um die OID zu erhalten, muss man den Parameter <code class="notranslate">-On</code> angeben, die Umwandlung umgekehrt funktioniert automatisch, z. B.:</p><div class="bash"><div class="contents"><pre class="notranslate">snmptranslate -On -IR ipRouteDest
snmptranslate .1.3.6.1.2.1.4.21.1.1 </pre></div></div></div><div class="section_1"><h2 id="Weitere-Konfigurationsmoeglichkeiten-in-der-snmpd-conf">Weitere Konfigurationsmöglichkeiten in der snmpd.conf<a class="headerlink" href="#Weitere-Konfigurationsmoeglichkeiten-in-der-snmpd-conf">¶</a></h2><p>
</p><div class="section_2"><h3 id="Vorgegebene-berwachungsmoeglichkeiten-verwenden">Vorgegebene Überwachungsmöglichkeiten verwenden<a class="headerlink" href="#Vorgegebene-berwachungsmoeglichkeiten-verwenden">¶</a></h3><p>
Je nachdem, was man überwachen möchte, kann man in der <strong>/etc/snmp/snmpd.conf</strong> nun weitere Einstellungen vornehmen, um z. B. Partitionsfüllstände, Dateigrößen, Logdateien und Anderes zu überwachen. Dafür muss man lediglich eine entsprechende Zeile eintragen</p><pre class="notranslate">disk / 5% # Überwachung Des Füllstands der Root-Partition 
disk /home 5%# Überwachung des Füllstands der Home-Partition
includeAllDisks 10% # Überwachung der Füllstände aller Partitionen
file /var/log/apache2/apache2.log 10000 # Überwachung der Größe einer Datei
PROC sshd # Überwachung des sshd-Prozesses</pre><p>Hierbei steht jeweils der erste Eintrag für die jeweilige Direktive, der zweite für das zu überwachende und der (nicht unbedingt notwendige) dritte Wert für den Grenzwert zum setzen eines entsprechenden Fehler-Schwellwert (dazu dann bei <code class="notranslate">snmpget</code> mehr).</p><p>Werden die angegebenen Schwellwerte überschritten, so wird ein entsprechendes Fehlerflag gesetzt, z. B. das <code class="notranslate">dskErrorFlag</code>, falls der angegebene prozentuale freie Platz unterschritten wurde. Die entsprechende Fehlermeldung steht dann in <code class="notranslate">dskErrorMsg</code>.</p></div><div class="section_2"><h3 id="Rueckgabewerte-und-Ausgaben-eigener-Skripte-abfragen">Rückgabewerte und Ausgaben eigener Skripte abfragen<a class="headerlink" href="#Rueckgabewerte-und-Ausgaben-eigener-Skripte-abfragen">¶</a></h3><p>
In die <strong>/etc/snmp/snmpd.conf</strong> kann man auch eigene Befehle bzw. Skripte angeben, deren Rückgabewerte man dann per <code class="notranslate">snmpget</code> abfragen kann. 
Man fügt z. B. folgende Zeilen an die <strong>/etc/snmp/snmpd.conf</strong> an:</p><pre class="notranslate">extend apt /bin/bash -c "/bin/echo `/bin/echo n | /usr/bin/aptitude dist-upgrade -s | /usr/bin/awk '/^[0-9]/ {print $1}'`"</pre><p>Nach einem Neustart des <code class="notranslate">snmpd</code> kann man nun die Anzahl der verfügbaren Updates (also den Ausgabewert des Befehls) abfragen mittels  
</p><div class="bash"><div class="contents"><pre class="notranslate">snmpwalk -Oqv -v 1 -c private localhost 'NET-SNMP-EXTEND-MIB::nsExtendOutputLine1.apt' </pre></div></div><p>
oder auch den Rückgabewert des Befehl mittels
</p><div class="bash"><div class="contents"><pre class="notranslate">snmpwalk -Oqv -v 1 -c private localhost 'NET-SNMP-EXTEND-MIB::nsExtendResult.apt' </pre></div></div></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://mathias-kettner.de/lw_snmp_mibs_fehlen_ubuntu.html" rel="nofollow">SNMP MIBs fehlen unter Debian 6.0 und Ubuntu</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Blogbeitrag 04/2011</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./snmp/a/revision/918283.html">Diese Revision</a> wurde am 9. November 2016 00:23 von <a href="https://ubuntuusers.de/user/Doc_Symbiosis/">Doc_Symbiosis</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./snmp.html">SNMP</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>