<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Openbox/Pipemenü › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../openbox/pipemenü.html">Pipemenü</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Openbox/Pipemenü">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../openbox/pipemenü/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../openbox/pipemenü/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../openbox/pipemenü/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../openbox/pipemenü/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../openbox/pipemenü/a/backlinks.html">Pipemenü</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="../trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../rechte.html">Rechte für Dateien und Ordner ändern</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="../packprogramme.html">Archive entpacken</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-2"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Voraussetzungen">Voraussetzungen
</a><ol class="arabic"><li><a class="crosslink" href="#Skripte">Skripte
</a></li><li><a class="crosslink" href="#Einbindung-in-Openbox">Einbindung in Openbox
</a></li></ol></li><li><a class="crosslink" href="#Beispiele">Beispiele
</a><ol class="arabic"><li><a class="crosslink" href="#Neue-Datei-aus-Vorlage">Neue Datei aus Vorlage
</a></li><li><a class="crosslink" href="#Dateimanager">Dateimanager
</a></li><li><a class="crosslink" href="#XDG-Menue">XDG-Menü
</a></li><li><a class="crosslink" href="#Openbox-Menu">Openbox-Menu
</a></li></ol></li><li><a class="crosslink" href="#Problembehebung">Problembehebung
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="./kontextmenue.png" class="image-left" src="../_/6fa76493493bf89fa82f5d19a21fb9132e120767.png"/>
Eine Spezialfunktion des Fenstermanagers <a class="internal" href="../openbox.html">Openbox</a> ist das sogenannte <em>"pipe menu"</em>. Dahinter steckt ein Mechanismus, der ein externes Programm oder Skript aufruft und die Ausgabe/das Ergebnis des Programms/Skripts wieder an Openbox übergibt. Damit lassen sich dynamische (Unter-)Menüs erzeugen, da bei jedem Aufruf des Menüpunkts das Skript erneut abgearbeitet wird.</p><p>Diese Funktion wird erst vor dem Hintergrund verständlich, dass Openbox vom Konzept her ursprünglich auf das heute übliche Programm-Menü im Panel verzichtete und stattdessen das Kontextmenü <img alt="rechte Maustaste" class="image-default" src="../_/aa516ca8be74ff7de9b706b8ffc7a88e87e17fb5.png"/> zur Auswahl und zum Start von Programmen benutzte. Das Kontextmenü lässt sich mit einem Pipemenü um eigenen Funktionen erweitern und dem persönlichen Bedarf anpassen. Wer diese Art der Bedienung in der Praxis erst mal ausprobieren möchte, kann dies z.B. mit <a class="internal" href="../alte_hardware/sonstige_distributionen.html#CrunchBang">CrunchBang</a> tun.</p><p>Nach ein wenig Grundwissen einige praktische Beispiele, was sich damit realisieren lässt. Weitere Ideen können gerne ergänzt werden.</p><div class="section_1"><h2 id="Voraussetzungen">Voraussetzungen<a class="headerlink" href="#Voraussetzungen">¶</a></h2><p>
Unter <a class="internal" href="../lubuntu.html">Lubuntu</a> muss man das Kontextmenü von Openbox erst aktivieren. Dazu klickt man den leeren Desktop mit der rechten Maustaste <img alt="rechte Maustaste" class="image-default" src="../_/aa516ca8be74ff7de9b706b8ffc7a88e87e17fb5.png"/> an und wählt den Punkt <em>"Einstellungen -&gt; Fortgeschritten -&gt; Beim Klicken auf den Desktop die Menüs des Fenstermanagers anzeigen"</em> aus (siehe auch <a class="internal" href="../lxde_einstellungen.html#Desktop">LXDE Einstellungen</a>).</p><div class="section_2"><h3 id="Skripte">Skripte<a class="headerlink" href="#Skripte">¶</a></h3><p>
Neue Funktionen werden meist - aber nicht zwangsläufig - als <a class="internal" href="../shell.html">Shell</a>- oder <a class="internal" href="../python.html">Python</a>-Skripte realisiert. Diese müssen irgendwo gespeichert werden. Zwar ist der Ort prinzipiell egal, aus Gründen der Übersichtlichkeit wird</p><ul><li><p><strong>~/bin/</strong> - im Homeverzeichnis des angemeldeten Benutzers (den Ordner ggfs. anlegen)</p></li></ul><p>oder
</p><ul><li><p><strong>/usr/local/bin/</strong> - für eine systemweite Nutzung</p></li></ul><p>
empfohlen. Darüber hinaus müssen <a class="internal" href="../shell.html">Shell</a>-Skripte ausführbar <sup><a href="#source-1">[1]</a></sup> sein (bei Python-Skripten bisher nicht notwendig). Entweder benutzt man dazu einen <a class="internal" href="../rechte.html#Datei-ausfuehrbar-machen">Dateimanager</a> oder den Befehl <a class="internal" href="../chmod.html">chmod</a> in einem Terminalfenster <sup><a href="#source-2">[2]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">chmod 755 SKRIPTNAME.sh </pre></div></div></div><div class="section_2"><h3 id="Einbindung-in-Openbox">Einbindung in Openbox<a class="headerlink" href="#Einbindung-in-Openbox">¶</a></h3><p>
Dazu editiert <sup><a href="#source-3">[3]</a></sup> man die Datei <a class="internal" href="../openbox.html#menu-xml">~/.config/openbox/menu.xml</a>. Ein Editor mit Syntax-Hervorhebung für XML, der die Übersicht erleichtert (z.B. <a class="internal" href="../geany.html">Geany</a> oder <a class="internal" href="../editoren.html">Medit</a>), ist empfehlenswert.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Unter Lubuntu muss zuerst:
</p><ol class="arabic"><li><p>die Datei <strong>/usr/share/lubuntu/openbox/menu.xml</strong> nach <strong>~/.config/openbox/menu.xml</strong> kopiert werden und</p></li><li><p>die Verwendung von <strong>~/.config/openbox/menu.xml</strong> in <strong>~/.config/openbox/lubuntu-rc.xml</strong> aktiviert werden</p></li></ol></div></div><p>Einträge in dieser Datei legen auch die Reihenfolge innerhalb des Kontextmenüs fest – je nachdem, ob etwas am Anfang oder am Ende steht, erscheint es am Anfang oder Ende des Kontextmenüs. Um das Einfügen zu erleichtern, hier ein Ausschnitt aus dieser Datei:</p><pre class="notranslate">...
&lt;item label="Firefox"&gt;
	&lt;action name="Execute"&gt;
		&lt;execute&gt;firefox&lt;/execute&gt;
	&lt;/action&gt;
&lt;/item&gt;
&lt;separator/&gt;
# ein neuer Pipemenü-Eintrag: 
&lt;menu id="..." label="..." execute="..." /&gt;
#
&lt;separator/&gt;
...</pre><p>
</p><table><tr class="lxde-titel"><td colspan="2"> Syntax für neue Pipemenü-Einträge </td></tr><tr class="lxde-kopf"><td> Parameter  </td><td> Erklärung </td></tr><tr><td style="width: 25%"> <code class="notranslate">id="..."</code> </td><td> beliebig, muss aber eindeutig und nicht leer sein </td></tr><tr><td> <code class="notranslate">label="..."</code> </td><td> Bezeichnung des Menü-Eintrags </td></tr><tr><td> <code class="notranslate">execute="..."</code> </td><td> Pfad und Name des Skripts </td></tr></table><p>Konkretere Hinweise finden sich in den einzelnen Beispielen.</p><p>Um eine neue Funktion verfügbar zu machen, muss Openbox neu gestartet werden:</p><div class="bash"><div class="contents"><pre class="notranslate">openbox --reconfigure </pre></div></div><p>
Alternativ kann man sich auch ab- und wieder neu anmelden.</p></div></div><div class="section_1"><h2 id="Beispiele">Beispiele<a class="headerlink" href="#Beispiele">¶</a></h2><p>
<img alt="Wiki/Icons/Tango/document-new.png" class="image-right" src="../_/ff4c51d859104de868ab77418644ab196ac59313.png"/>
</p><div class="section_2"><h3 id="Neue-Datei-aus-Vorlage">Neue Datei aus Vorlage<a class="headerlink" href="#Neue-Datei-aus-Vorlage">¶</a></h3><p>
Die Dateimanager <a class="internal" href="../nautilus.html">Nautilus</a> und <a class="internal" href="../thunar.html">Thunar</a> (<a class="internal" href="../pcmanfm.html">PCManFM</a> verwendet leider keine Vorlagen) bieten eine Funktion, um im gerade geöffneten Ordner eine neue Datei anzulegen. Diese Möglichkeit erreicht man über das Menü mit <em>"Datei -&gt; Dokument anlegen"</em> oder <em>"Rechtsklick -&gt; Neues Dokument erstellen"</em>. Standardmäßig wird hier meist nur der Eintrag "Leere Datei" angeboten, mit dem man ein leeres Textdokument erstellen kann.</p><p>Um weitere Vorlagen zur Verfügung zu haben, kann man beliebige (leere) Vorlage-Dateien in den Ordner <strong>~/Vorlagen/</strong> im eigenen Homeverzeichnis abspeichern. Um z.B. eine Vorlage für <a class="internal" href="../libreoffice/bedienung.html#Writer">LibreOffice Writer</a> zu erstellen, speichert man einfach ein leeres Dokument als <strong>~/Vorlagen/OpenOffice Dokument.odt</strong>. Eine kleine Auswahl an Vorlagen kann man <a class="crosslink" href="../openbox/pipemenü.html">hier</a> <img alt="{dl}" src="../_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/> herunterladen und in den Vorlagenordner entpacken <sup><a href="#source-4">[4]</a></sup>.</p><p>Das folgende Skript geht noch einen Schritt weiter. Nachdem man eine passende Vorlage ausgewählt hat, startet sofort das dafür zuständige Standardprogramm (dieses muss unter Umständen noch festgelegt werden, am einfachsten mit einem Dateimanager, dem Kontextmenü <img alt="rechte Maustaste" class="image-default" src="../_/aa516ca8be74ff7de9b706b8ffc7a88e87e17fb5.png"/> und <em>"Öffnen mit..."</em>). Außerdem wird das Paket</p><ul><li><p><strong>libgnome2-0</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install libgnome2-0 </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install libgnome2-0 </pre></div></div><p>
</p></div></div><p>
benötigt.</p><div class="section_3"><h4 id="Skript">Skript<a class="headerlink" href="#Skript">¶</a></h4><p>
Vorlage für das Skript <strong>templates.sh</strong>:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#bad medicine to open templates, just like gnome!</span>

<span class="k">function</span> generate_template_menu <span class="o">{</span>

ls ~/Vorlagen <span class="p">|</span> <span class="k">while</span> read<span class="p">;</span> <span class="k">do</span>

    <span class="nb">echo</span> <span class="s1">'&lt;item label="'</span><span class="s2">"</span><span class="si">${</span><span class="nv">REPLY</span><span class="si">}</span><span class="s2">"</span><span class="s1">'"&gt;'</span>
    <span class="nb">echo</span> -n <span class="s1">'&lt;action name="Execute"&gt;&lt;execute&gt;'</span>
    <span class="nb">echo</span> -n <span class="s2">"gnome-open ~/Vorlagen/</span><span class="si">${</span><span class="nv">REPLY</span><span class="si">}</span><span class="s2">"</span>
    <span class="nb">echo</span> <span class="s1">'&lt;/execute&gt;&lt;/action&gt;'</span>
    <span class="nb">echo</span> <span class="s1">'&lt;/item&gt;'</span>
  <span class="k">done</span>
<span class="o">}</span>

<span class="nb">echo</span> <span class="s1">'&lt;openbox_pipe_menu&gt;'</span>

generate_template_menu

<span class="nb">echo</span> <span class="s1">'&lt;/openbox_pipe_menu&gt;'</span>
</pre></div>
</td></tr></table></div><p>
Quelle: <a class="external" href="http://david.chalkskeletons.com/scripts/" rel="nofollow">David Barr - Openbox Pipemenu Scripts</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></div><div class="section_3"><h4 id="menu-xml">menu.xml<a class="headerlink" href="#menu-xml">¶</a></h4><p>
Über folgende Eintrag werden die Vorlagen in das Kontextmenü eingebunden:</p><pre class="notranslate">&lt;menu id="TemplatesPipeMenu" label="Vorlagen" execute="templates.sh"/&gt;</pre></div></div><div class="section_2"><h3 id="Dateimanager">Dateimanager<a class="headerlink" href="#Dateimanager">¶</a></h3><p>
<img alt="./places-menu.png" class="image-right" src="../_/de4c97eccf4d7e0339bdbc15e4771fc86f196b92.png"/>
Einen <a class="internal" href="../dateimanager.html">Dateimanager</a> – zumindest für das eigene <a class="internal" href="../homeverzeichnis.html">Homeverzeichnis</a> – integriert das Shell-Skript <a class="interwiki interwiki-github" href="https://github.com/BunsenLabs/bunsen-pipemenus/blob/master/bin/bl-places-pipemenu">bl-places-pipemenu</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>. Nachdem man es z.B. als <strong>~/bin/bl-places-pipemenu</strong> oder <strong>/usr/local/bin/bl-places-pipemenu</strong> gespeichert hat, kann es über drei Variablen an den eigenen Bedarf angepasst werden:</p><pre class="notranslate"># path to your "recent files" script, if you want to incorporate it:
<strong class="highlighted">#</strong>recent_script=/usr/bin/bl-recent-files-pipemenu
# Command to open folders at "Browse here..." - any file manager
open_folder_cmd=<strong class="highlighted">thunar</strong>
# Text editor of choice
text_editor=<strong class="highlighted">geany</strong></pre><p>
Dann kann es über folgenden Eintrag ins Kontextmenü eingebunden werden:</p><div class="section_3"><h4 id="menu-xml-2">menu.xml<a class="headerlink" href="#menu-xml-2">¶</a></h4><p>
</p><pre class="notranslate">&lt;menu id="pipe-places-menu" label="Orte" execute="bl-places-pipemenu" /&gt;</pre><p><img alt="./menu.png" class="image-right" src="../_/a2cd739c9cca00050aebd919ea3f13c1038ea294.png"/>
</p></div></div><div class="section_2"><h3 id="XDG-Menue">XDG-Menü<a class="headerlink" href="#XDG-Menue">¶</a></h3><p>
</p><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Inzwischen sind zwei Pakete in den offiziellen Paketquellen enthalten, die eine mehr oder weniger identische Funktion besitzen:</p><ul><li><p><a class="interwiki interwiki-packages" href="http://packages.ubuntu.com/openbox-menu">openbox-menu</a> (ab <a class="internal" href="../trusty.html">Ubuntu 14.04</a>, siehe unten)</p></li><li><p><a class="interwiki interwiki-packages" href="http://packages.ubuntu.com/openbox-xdgmenu">openbox-xdgmenu</a></p></li></ul></div></div><p>
</p><div class="section_3"><h4 id="Skript-2">Skript<a class="headerlink" href="#Skript-2">¶</a></h4><p>
Mit dem <a class="internal" href="../python.html">Python</a>-Skript <strong>xdg-menu.py</strong> ist das komplette <img alt="LXDE/start-here.png" class="image-default" src="../_/47f8b6343156c50a2cda464b7ce402e6e8e63739.png"/> LXDE-Menü unten links (zusätzlich) über das Kontextmenü erreichbar.</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1">#</span>
<span class="c1"># Copyright (C) 2008  Red Hat, Inc.</span>
<span class="c1">#</span>
<span class="c1"># This program is free software; you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU General Public License as published by</span>
<span class="c1"># the Free Software Foundation; either version 2 of the License, or</span>
<span class="c1"># (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1"># This program is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU General Public License</span>
<span class="c1"># along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c1">#</span>
<span class="c1"># Author(s): Luke Macken &lt;lmacken@redhat.com&gt;</span>
<span class="c1">#            Miroslav Lichvar &lt;mlichvar@redhat.com&gt;</span>


<span class="kn">import</span> <span class="nn">gmenu</span><span class="o">,</span> <span class="nn">re</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">xml.sax.saxutils</span> <span class="kn">import</span> <span class="n">escape</span>

<span class="k">def</span> <span class="nf">walk_menu</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">entry</span><span class="o">.</span><span class="n">get_type</span><span class="p">()</span> <span class="o">==</span> <span class="n">gmenu</span><span class="o">.</span><span class="n">TYPE_DIRECTORY</span><span class="p">:</span>
                <span class="k">print</span> <span class="s1">'&lt;menu id="</span><span class="si">%s</span><span class="s1">" label="</span><span class="si">%s</span><span class="s1">"&gt;'</span> \
                        <span class="o">%</span> <span class="p">(</span><span class="n">escape</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">menu_id</span><span class="p">),</span> <span class="n">escape</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">get_name</span><span class="p">()))</span>
                <span class="nb">map</span><span class="p">(</span><span class="n">walk_menu</span><span class="p">,</span> <span class="n">entry</span><span class="o">.</span><span class="n">get_contents</span><span class="p">())</span>
                <span class="k">print</span> <span class="s1">'&lt;/menu&gt;'</span>
        <span class="k">elif</span> <span class="n">entry</span><span class="o">.</span><span class="n">get_type</span><span class="p">()</span> <span class="o">==</span> <span class="n">gmenu</span><span class="o">.</span><span class="n">TYPE_ENTRY</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">entry</span><span class="o">.</span><span class="n">is_excluded</span><span class="p">:</span>
                <span class="k">print</span> <span class="s1">' &lt;item label="</span><span class="si">%s</span><span class="s1">"&gt;'</span> <span class="o">%</span> \
                        <span class="n">escape</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'"'</span><span class="p">,</span> <span class="s1">''</span><span class="p">))</span>
                <span class="n">command</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">' [^ ]*%[fFuUdDnNickvm]'</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="n">entry</span><span class="o">.</span><span class="n">get_exec</span><span class="p">())</span>
                <span class="k">if</span> <span class="n">entry</span><span class="o">.</span><span class="n">launch_in_terminal</span><span class="p">:</span>
                        <span class="n">command</span> <span class="o">=</span> <span class="s1">'xterm -title "</span><span class="si">%s</span><span class="s1">" -e </span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> \
                                <span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">get_name</span><span class="p">(),</span> <span class="n">command</span><span class="p">)</span>
                <span class="k">print</span> <span class="s1">'         &lt;action name="Execute"&gt;'</span> <span class="o">+</span> \
                        <span class="s1">'&lt;command&gt;</span><span class="si">%s</span><span class="s1">&lt;/command&gt;&lt;/action&gt;'</span> <span class="o">%</span> <span class="n">escape</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
                <span class="k">print</span> <span class="s1">' &lt;/item&gt;'</span>

<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">menu</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">'.menu'</span>
<span class="k">else</span><span class="p">:</span>
        <span class="n">menu</span> <span class="o">=</span> <span class="s1">'applications.menu'</span>

<span class="k">print</span> <span class="s1">'&lt;?xml version="1.0" encoding="UTF-8"?&gt;'</span>
<span class="k">print</span> <span class="s1">'&lt;openbox_pipe_menu&gt;'</span>
<span class="nb">map</span><span class="p">(</span><span class="n">walk_menu</span><span class="p">,</span> <span class="n">gmenu</span><span class="o">.</span><span class="n">lookup_tree</span><span class="p">(</span><span class="n">menu</span><span class="p">)</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">get_contents</span><span class="p">())</span>
<span class="k">print</span> <span class="s1">'&lt;/openbox_pipe_menu&gt;'</span>
</pre></div>
</td></tr></table></div><p>Quelle: <a class="external" href="http://pkgs.fedoraproject.org/gitweb/?p=openbox.git;a=blob;f=xdg-menu;hb=HEAD" rel="nofollow">Fedora Packages Git Repositories</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></div><div class="section_3"><h4 id="menu-xml-3">menu.xml<a class="headerlink" href="#menu-xml-3">¶</a></h4><p>
Über folgenden Eintrag wird das Skript ins Kontextmenü eingebunden:</p><pre class="notranslate">&lt;menu id="pipe-xdg-menu" label="Menü" execute="python ~/bin/xdg-menu.py" /&gt;</pre></div></div><div class="section_2"><h3 id="Openbox-Menu">Openbox-Menu<a class="headerlink" href="#Openbox-Menu">¶</a></h3><p>
Ab <a class="internal" href="../trusty.html">Ubuntu 14.04</a> besteht eine weitere sehr elegante Möglichkeit, vorhandene Programmstarter via Pipemenü verfügbar zu machen. Zuerst wird <a class="external" href="https://bitbucket.org/fabriceT/openbox-menu" rel="nofollow">openbox-menu</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> installiert:</p><ul><li><p><strong>openbox-menu</strong> (<em>universe</em>)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install openbox-menu </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install openbox-menu </pre></div></div><p>
</p></div></div><div class="section_3"><h4 id="menu-xml-4">menu.xml<a class="headerlink" href="#menu-xml-4">¶</a></h4><p>
Über folgenden Eintrag wird das Programm anschließend ins Kontextmenü eingebunden:</p><pre class="notranslate">&lt;menu id="pipe-openbox-menu" label="Programme" execute="openbox-menu" /&gt;</pre><p>
Auf Wunsch können beim Programmaufruf weitere Parameter übergeben werden. Details sind der <a class="internal" href="../man.html">Manpage</a> zu entnehmen.</p></div></div></div><div class="section_1"><h2 id="Problembehebung">Problembehebung<a class="headerlink" href="#Problembehebung">¶</a></h2><p>
Manchmal kann es passieren, dass ein Skript eine bestimmte Komponente oder ein anderes Programm benötigt, ohne die es nicht funktioniert. Falls also beispielsweise das oben genannte <strong>xdg-menu.py</strong> nicht funktioniert, führt man das Skript in einem Terminal-Fenster <sup><a href="#source-2">[2]</a></sup> aus, um die Ausgabe zu überprüfen:</p><div class="bash"><div class="contents"><pre class="notranslate">python ~/bin/xdg-menu.py </pre></div></div><p>
Eine Fehlermeldung könnte z.B. so aussehen:</p><pre class="notranslate">Traceback (most recent call last):
  File "bin/xdg-menu.py", line 22, in &lt;module&gt;
    import gmenu, re, sys
ImportError: No module named gmenu</pre><p>
Nun sucht man in der <a class="internal" href="../paketverwaltung.html">Paketverwaltung</a>, ob ein entsprechendes Paket vorhanden ist und installiert es:</p><ul><li><p><strong>python-gmenu</strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install python-gmenu </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install python-gmenu </pre></div></div><p>
</p></div></div><p>
Damit ist das Problem in diesem konkreten Fall behoben.</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="external" href="http://openbox.org/wiki/Help:Menus#Pipe_menus" rel="nofollow">Pipemenu-Dokumentation</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> im Openbox-Wiki</p></li><li><p><a class="external" href="http://openbox.org/wiki/Openbox:Pipemenus" rel="nofollow">Openbox Pipemenu Scripts</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Sammlung fertiger Skripte</p></li><li><p><a class="interwiki interwiki-archwiki" href="https://wiki.archlinux.org/index.php/Openbox#Pipes">Openbox Pipe menus</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - ArchWiki (vier weitere Skripte)</p></li><li><p><a class="interwiki interwiki-github" href="https://github.com/BunsenLabs/bunsen-pipemenus">bunsen-pipemenus</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - mehrere Skripte aus CrunchBang</p></li><li><p><a class="external" href="http://lxlinux.com/openbox.html" rel="nofollow">Openbox root menu, sub-menus, pipe menus</a> <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Debian Linux Openbox Guide</p></li><li><p><a class="internal" href="../openbox.html">Openbox</a> <img alt="{Übersicht}" src="../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> Übersichtsartikel</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../openbox/pipemenü/a/revision/939729.html">Diese Revision</a> wurde am 6. Mai 2017 12:18 von <a href="https://ubuntuusers.de/user/Heinrich_Schwietering/">Heinrich_Schwietering</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../openbox.html">Openbox</a></li>
<li><a href="../openbox/pipemenü.html">Pipemenü</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>