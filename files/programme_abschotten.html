<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Programme_abschotten › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./programme_abschotten.html">Programme abschotten</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Programme_abschotten">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./programme_abschotten/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./programme_abschotten/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./programme_abschotten/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./programme_abschotten/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./programme_abschotten/a/backlinks.html">Programme abschotten</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./sicherheits_1x1.html">Sicherheits-Einmaleins</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./benutzer_und_gruppen.html">Benutzer und Gruppen verwalten</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="./sudo.html">Root-Rechte</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Einrichtungsbeispiel">Einrichtungsbeispiel
</a><ol class="arabic"><li><a class="crosslink" href="#Rechtesystem-fuer-die-Zusammenarbeit-zwischen-Benutzern-umstellen">Rechtesystem für die Zusammenarbeit zwis...</a></li><li><a class="crosslink" href="#Anlegen-von-Unterkonten">Anlegen von Unterkonten
</a></li><li><a class="crosslink" href="#Gruppenmitgliedschaften-und-Datenverzeichnisse-anpassen">Gruppenmitgliedschaften und Datenverzeic...</a></li><li><a class="crosslink" href="#Richtigen-Befehl-zum-Starten-von-Programmen-unter-anderem-Benutzer-erproben">Richtigen Befehl zum Starten von Program...</a></li><li><a class="crosslink" href="#Ermittelte-Startbefehle-unter-Bevorzuge-Anwendungen-eintragen">Ermittelte Startbefehle unter "Bevorzuge...</a></li><li><a class="crosslink" href="#Starter-und-Menueeintraege-des-Hauptbenutzers-anpassen">Starter und Menüeinträge des Hauptbenutz...</a></li><li><a class="crosslink" href="#Firewall-Regeln-aufstellen">Firewall-Regeln aufstellen
</a></li></ol></li><li><a class="crosslink" href="#Sicherheitshinweis">Sicherheitshinweis
</a></li></ol></div><p><img alt="Wiki/Icons/security.png" class="image-left" src="./_/5e541446d3f55e37b13ef06b3a5a6f256436c92b.png"/>
Potentiell schadhafter Programmcode (eingeschleust z.B. durch Fehler im Browser oder unachtsames öffnen von Emails) wird immer mit den Rechten des Benutzerkontos ausgeführt unter dem das Programm (z.B. der Browser) läuft. Ist das das selbe Benutzerkonto mit dem man seine privaten oder geschäftlichen Daten bearbeitet, bekommt ein Eindringling also Zugriff auf all diese Daten. Der Umfang der gefährdeten Daten kann stark vermindert werden, indem man Programme (wie z.B. Browser und E-Mail Programme, die Daten aus dem Netz auswerten) unter einem separaten Benutzerkonto laufen lässt.</p><p>Indem man nur Unterbenutzer (selektiv) ans Netz lässt, isoliert man zudem alle anderen laufenden Programme vom Netz. Zumindest können dadurch nicht alle Programme einfach so irgendwelche Verbindungen aufbauen. Falls z.B ein ausführbares Programm heruntergeladen wurde und versehentlich vom Hauptbenutzer ausgeführt wird (statt in einer Gastsitzung oder einem speziellem Unteraccount), kann das Programm dann wenigstens nicht so ohne Weiteres ins Netz, wenn es schon an private oder geschäftliche Daten herankommt.</p><p>Mit <a class="internal" href="./arkose.html">Arkose</a> gibt es inzwischen auch ein benutzerfreundliches Programm, mit dem sich eine <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Sandbox">Sandbox</a> für Programme leicht realisieren lässt. Eine weitere Möglichkeit bietet der Einsatz von <a class="internal" href="./lxc.html">LXC</a>. Eine andere Möglichkeit besteht darin, eine <a class="internal" href="./gastsitzung.html">Gastsitzung</a> einzurichten.</p><div class="section_1"><h2 id="Einrichtungsbeispiel">Einrichtungsbeispiel<a class="headerlink" href="#Einrichtungsbeispiel">¶</a></h2><p>
Es werden separate Unterkonten für E-Mail und Browser eingerichtet.</p><div class="section_2"><h3 id="Rechtesystem-fuer-die-Zusammenarbeit-zwischen-Benutzern-umstellen">Rechtesystem für die Zusammenarbeit zwischen Benutzern umstellen<a class="headerlink" href="#Rechtesystem-fuer-die-Zusammenarbeit-zwischen-Benutzern-umstellen">¶</a></h3><p>
Zunächst muss die Vorkonfiguration der Installation für eine Zusammenarbeit von Benutzern untereinander korrekt eingestellt werden. (hierzu siehe <a class="interwiki interwiki-ubuntu" href="https://wiki.ubuntu.com/MultiUserManagement">Multi User Management</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>).</p></div><div class="section_2"><h3 id="Anlegen-von-Unterkonten">Anlegen von Unterkonten<a class="headerlink" href="#Anlegen-von-Unterkonten">¶</a></h3><p>
Für dieses Beispiel werden unter System -&gt;Systemverwaltung -&gt; Benutzer und Gruppen zwei neue Benutzerkonten <code class="notranslate">otto-email</code> und <code class="notranslate">otto-browser</code> ohne besondere Privilegien als Unterkonten für <code class="notranslate">otto</code> angelegt.</p><ul><li><p>Als Passwort kann das Passwort des zugehörigen Hauptbenutzers verwendet werden (hier <code class="notranslate">otto</code>)</p></li><li><p>Damit die Unterkonten nicht am Anmeldebildschirm angezeigt werden, müssen deren nummerische IDs noch in den "system users" Bereich zwischen 100 und 999 geändert werden. (991 und 992 sollten frei sein)</p></li></ul><p>
Alternativ, die Befehle zum direkten Anlegen der Benutzer:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo adduser --uid 991 otto-email
sudo adduser --uid 992 otto-browser </pre></div></div><p>
(Am Besten noch überprüfen welche Gruppenrechte die neu angelegten Benutzer haben.)</p></div><div class="section_2"><h3 id="Gruppenmitgliedschaften-und-Datenverzeichnisse-anpassen">Gruppenmitgliedschaften und Datenverzeichnisse anpassen<a class="headerlink" href="#Gruppenmitgliedschaften-und-Datenverzeichnisse-anpassen">¶</a></h3><p>
Damit man als Hauptbenutzer auch die Daten der Unterbenutzer bearbeiten kann, wird der Hauptbenutzer als Mitglied in die privaten Unterbenutzer-Gruppen<sup><a href="#source-2">[2]</a></sup> eingetragen,</p><div class="bash"><div class="contents"><pre class="notranslate">sudo adduser otto otto-browser
sudo adduser otto otto-email </pre></div></div><p>und die Datenverzeichnisse der Unterbenutzer, in denen man ohne Rechteprobleme auch als Hauptbenutzer speichern und löschen können möchte, werden zu "sgid" (set-group-id) Gruppenverzeichnissen gemacht (alle neu angelegten Dateien gehören dann der Gruppe und sind bei <code class="notranslate">umask 002</code> für die Gruppe schreibbar). Beispiel:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chmod g+s /home/otto-browser/Downloads
sudo chmod g+s /home/otto-email/Mail </pre></div></div><p>
Das Verzeichnis /home/otto-browser/Downloads wird nicht etwa beim <em>Anlegen</em> des Benutzers erstellt, sondern wenn es erstmalig benötigt wird.</p><p>Da die Daten in den Homeverzeichnissen der Unterbenutzer gespeichert werden, ist es auch noch recht praktisch Symlinks in das Homeverzeichnis des Hauptbenutzers zu legen. Zum Beispiel für die Downloads von otto-browser:</p><div class="bash"><div class="contents"><pre class="notranslate">cd /home/otto
cp -a Downloads/* ../otto-browser/Downloads/
rm -r Downloads
ln -s ../otto-browser/Downloads Downloads </pre></div></div></div><div class="section_2"><h3 id="Richtigen-Befehl-zum-Starten-von-Programmen-unter-anderem-Benutzer-erproben">Richtigen Befehl zum Starten von Programmen unter anderem Benutzer erproben<a class="headerlink" href="#Richtigen-Befehl-zum-Starten-von-Programmen-unter-anderem-Benutzer-erproben">¶</a></h3><p>
Die Befehle zum Starten von Programmen unter einem anderen Benutzerkonto unterscheiden sich zwischen GNOME und KDE und funktionierten leider nur für den root-Account ohne Umwege. Genaueres dazu muss unter <a class="internal" href="./sudo.html#Programme-im-Kontext-anderer-Benutzer-ausfuehren">Programme im Kontext anderer Benutzer ausfuehren</a> in Erfahrung gebracht werden.</p><ul><li><p>In <a class="internal" href="./gnome.html">GNOME</a> lautet ein vollständiger Befehl z.B. </p><div class="bash"><div class="contents"><pre class="notranslate">gksu -u otto-browser -w "firefox %u" </pre></div></div></li></ul><p>
In diesem Fall wird (als workaround) statt dem <code class="notranslate">sudo</code> Mechanismus <code class="notranslate">su</code> genutzt (option -w), und es ist das Passwort des Zielbenutzers anzugeben. Um die unnötige Abfrage des Passwort durch des aufrufenden Hauptbenutzer zu vermeiden, kann man das Passwort in einem Schlüsselbund speichern. Das automatische öffnen des Schlüsselbunds funktioniert aber leider nicht in allen Fällen (z.B. wenn Schlüsselbund verschlüsselt gespeichert ist, bei <a class="internal" href="./autologin.html">Autologin</a> und zwischen E-Mail/Browser).</p><p>In <a class="internal" href="./kde.html">KDE</a> (Kubuntu) funktioniert <code class="notranslate">kdesu</code> standardmäßig mit <code class="notranslate">sudo</code>.</p><ul><li><p>Ein vollständiger KDE Befehl zum Starten lautet z.B. </p><div class="bash"><div class="contents"><pre class="notranslate">kdesudo -u otto-browser "firefox %u" </pre></div></div></li></ul><p>
Wenn sudo zu regulären Benutzern genutzt werden kann, kann man die Passwortabfrage abschalten indem man die Datei <strong>/etc/sudoers</strong> (wie unter <a class="internal" href="./sudo/konfiguration.html">sudo/Konfiguration</a> genauer beschrieben) um Folgendes zu ergänzt:</p><pre class="notranslate">otto ALL =   (otto-browser) NOPASSWD: /usr/bin/firefox
otto ALL =   (otto-email)   NOPASSWD: /usr/bin/&lt;Email-Programm&gt;
otto-email    ALL =   (otto-browser) NOPASSWD: /usr/bin/firefox
otto-browser  ALL =   (otto-email)   NOPASSWD: /usr/bin/&lt;Email-Programm&gt;</pre><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Falls es mit älteren Ubuntu Versionen nicht klappt, die Programme per <code class="notranslate">sudo</code> direkt aufzurufen, kann es nötig sein, diese evtl. über ein zusätzliches explizites "su"-Terminal und zusätzliche Startskripte aufzurufen, so dass Folgendes in <strong>/etc/sudoers</strong> nötig ist:</p><pre class="notranslate">otto ALL =   (otto-browser) NOPASSWD: /bin/su otto-browser
otto ALL =   (otto-email)   NOPASSWD: /bin/su otto-email</pre><p>
</p></div></div></div><div class="section_2"><h3 id="Ermittelte-Startbefehle-unter-Bevorzuge-Anwendungen-eintragen">Ermittelte Startbefehle unter "Bevorzuge Anwendungen" eintragen<a class="headerlink" href="#Ermittelte-Startbefehle-unter-Bevorzuge-Anwendungen-eintragen">¶</a></h3><p>
Die beiden vollständigen Befehle für den Browser und das E-Mail-Betrachten werden nun unter <em>"System -&gt; Einstellungen -&gt; Bevorzugte Anwendungen"</em> als Benutzer <code class="notranslate">otto</code> eingetragen. Damit man auch aus dem Browser heraus eine E-Mail schreiben kann bzw. ein Link in einer E-Mail auch richtig geöffnet wird, wird der jeweils andere Befehl als bevorzugte Anwendung für <code class="notranslate">otto-browser</code> und <code class="notranslate">otto-email</code> eingetragen, z.B. mit</p><div class="bash"><div class="contents"><pre class="notranslate">gksu -u otto-email -w gnome-default-applications-properties

# bzw. mit Xfce statt gnome:
gksu -u otto-email -w exo-preferred-applications </pre></div></div></div><div class="section_2"><h3 id="Starter-und-Menueeintraege-des-Hauptbenutzers-anpassen">Starter und Menüeinträge des Hauptbenutzers anpassen<a class="headerlink" href="#Starter-und-Menueeintraege-des-Hauptbenutzers-anpassen">¶</a></h3><p>
In den Eigenschaften von Desktop- oder Panelbuttons und Menüeinträgen für Browser und E-Mail (im Konto <code class="notranslate">otto</code>) wird der reguläre Startbefehl jeweils um den oben ermittelten Startbefehl ergänzt.</p></div><div class="section_2"><h3 id="Firewall-Regeln-aufstellen">Firewall-Regeln aufstellen<a class="headerlink" href="#Firewall-Regeln-aufstellen">¶</a></h3><p>
Nun den Paketfilter / die Firewall so einstellen, dass nur das <code class="notranslate">otto-browser</code>-Unterkonto ins Netz kommt (und keine beliebigen anderen Programme/Skripte, die unter einem anderen Konto ausgeführt werden).</p><p>Beispiel:
Recht einfach und übersichtlich ist die Konfiguration, wenn man die Paketfilterregeln (iptables) vom Paket <strong>firehol</strong> erstellen lässt. Dazu <strong>firehol</strong> installieren, in <strong>/etc/default/firehol</strong> aktivieren und eine <strong>/etc/firehol/firehol.conf</strong> wie die folgende erstellen. Das Beispiel lässt keinerlei eingehenden Verbindungen zu (lokaler <code class="notranslate">server</code>) zu,  ausgehend (lokaler <code class="notranslate">client</code>) werden nur<code class="notranslate"> dhcp</code> und <code class="notranslate">dns</code> zugelassen und lediglich dem Benutzer <code class="notranslate">otto-browser</code> werden noch http- und https-Ports erlaubt:</p><pre class="notranslate">version 5
interface any world
        protection strong
        server ident reject with tcp-reset
        client dhcp accept
        client dns  accept
        client "http https" accept user otto-browser</pre></div></div><div class="section_1"><h2 id="Sicherheitshinweis">Sicherheitshinweis<a class="headerlink" href="#Sicherheitshinweis">¶</a></h2><p>
Wenn Programmen, obwohl sie unter einem anderen Benutzerkonto laufen, direkter Zugriff auf Tastatur, Maus und Monitor (genauer den X-Server) gewährt wird (so wie hier mit <code class="notranslate">gksu</code> bzw. <code class="notranslate">kdesu</code>), besteht eine gewisse Sicherheitslücke. Leider gibt es in Ubuntu noch keine einfache Abhilfe wie <a class="external" href="http://danwalsh.livejournal.com/31146.html" rel="nofollow">sandbox -X</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> in Fedora, das eine abgeschottete Umgebung für graphische Programme zur Verfügung stellt. Alternativ käme eine kompliziertere lokale Konfiguration von <a class="internal" href="./vnc.html">VNC</a> oder <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/xnest">xnest</a> zwischen den Benutzern in Frage.</p><p></p></div></div>
<p class="meta">
<a href="./programme_abschotten/a/revision/735697.html">Diese Revision</a> wurde am 2. Juli 2014 21:05 von <a href="https://ubuntuusers.de/user/Mot%C3%B6rhead80/">Motörhead80</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./programme_abschotten.html">Programme abschotten</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>