<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>TeamSpeak-Server › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./teamspeak-server.html">TeamSpeak-Server</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/TeamSpeak-Server">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./teamspeak-server/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./teamspeak-server/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./teamspeak-server/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./teamspeak-server/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./teamspeak-server/a/backlinks.html">TeamSpeak-Server</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./rechte.html">Rechte für Dateien und Ordner ändern</a> </p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./benutzer_und_gruppen.html">Neuen Benutzer anlegen</a></p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="./dienste.html">Service als Dienst automatisch starten</a> </p></li><li><p><a class="crosslink anchor" href="#source-6" id="source-6"></a> <a class="internal" href="./packprogramme.html">Archive entpacken</a> </p></li><li><p><a class="crosslink anchor" href="#source-7" id="source-7"></a> <a class="internal" href="./editor.html">Einen Editor öffnen</a></p></li></ol></div></div><p>
</p><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Installation">Installation
</a></li><li><a class="crosslink" href="#Aktualisierung">Aktualisierung
</a></li><li><a class="crosslink" href="#Deinstallation">Deinstallation
</a></li><li><a class="crosslink" href="#Erweiterungen">Erweiterungen
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><a class="internal" href="./teamspeak_3.html">TeamSpeak</a> ist eine proprietäre Sprachkonferenz-Software, welche es Benutzern ermöglicht, über das Internet oder ein LAN miteinander zu kommunizieren. TeamSpeak ist unter Online-Spielern sehr beliebt. Das Programm ist für Privatbenutzer und Non-Profit-Organisationen kostenlos.</p><p>Dieser Artikel beschreibt, wie man unter Ubuntu einen TeamSpeak-Server installiert, zu dem TeamSpeak-Clients eine Verbindung aufbauen können. TeamSpeak ist ein Voice-Over-IP-Chat, in dem mehrere Nutzer gleichzeitig miteinander sprechen können. Zu diesem Zweck wird ein Server benötigt, mit dem sich die Clients verbinden können. Es sollte eine Breitband Internetanbindung sowie eine geringe Verbindungslatenz vorhanden sein.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Ein TeamSpeak 3 Server ermöglicht nur Benutzern vom <a class="internal" href="./teamspeak_3.html">TeamSpeak 3 Client</a> eine Verbindung aufzubauen. Für <a class="internal" href="./archiv/teamspeak.html">TeamSpeak 2 Clients</a> benötigt man auch einen entsprechenden TeamSpeak 2 Server.
</p></div></div><div class="section_1"><h2 id="Installation">Installation<a class="headerlink" href="#Installation">¶</a></h2><p>
Der TeamSpeak 3 Server lässt sich nicht über die Paketverwaltung installieren, sondern muss manuell installiert werden.</p><div class="box warning"><h3 class="box warning">Hinweis!</h3><div class="contents"><p>
<a class="internal" href="./fremdsoftware.html">Fremdsoftware</a> kann das System gefährden.
</p></div></div><div class="section_2"><h3 id="Vorbereitung">Vorbereitung<a class="headerlink" href="#Vorbereitung">¶</a></h3><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Aus Sicherheitsgründen sollte der TeamSpeak 3 Server niemals mit Root-Rechten gestartet werden. Sollte es jemandem gelingen, eine Sicherheitslücke in der Software auszunutzen, hätte er ansonsten Administrator-Rechte auf dem Rechner mit dem Server. 
</p></div></div><p>
Zuerst wird ein Benutzer <code class="notranslate">teamspeak</code> mit <strong>adduser</strong> <sup><a href="#source-5">[5]</a></sup> für den Betrieb des Servers mit eigenem Home-Verzeichnis erstellt. Die gewünschte Systemarchitektur (<code class="notranslate">i386</code>/<code class="notranslate">amd64</code>) ist anzupassen:</p><ul><li><p>32-Bit: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo adduser teamspeak --system --home /usr/local/bin/teamspeak3-server_linux_x86 --disabled-login </pre></div></div></li><li><p>64-Bit: </p><div class="bash"><div class="contents"><pre class="notranslate">sudo adduser teamspeak --system --home /usr/local/bin/teamspeak3-server_linux_amd64 --disabled-login </pre></div></div></li></ul><p>
</p></div><div class="section_2"><h3 id="Herunterladen-und-Entpacken">Herunterladen und Entpacken<a class="headerlink" href="#Herunterladen-und-Entpacken">¶</a></h3><p>
Für das weitere Vorgehen wechselt man zum Benutzer <code class="notranslate">teamspeak</code>:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo su teamspeak --shell /bin/bash </pre></div></div><p>
Jetzt muss der TeamSpeak3-Server von der <a class="external" href="http://www.teamspeak.com/?page=downloads" rel="nofollow">offiziellen Downloadseite</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> des Herstellers heruntergeladen und in das Homeverzeichnis <strong>/usr/local/bin/teamspeak3-server_linux_SYSTEMARCHITEKTUR</strong> des Benutzers <code class="notranslate">teamspeak</code> entpackt werden <sup><a href="#source-7">[7]</a></sup>.</p><p>Auf einem Server ohne grafische Benutzeroberfläche kann das Archiv alternativ auch direkt von der <a class="external" href="http://dl.4players.de/ts/releases/" rel="nofollow">4Player Mirror Site</a> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/> heruntergeladen werden. Die Versionsnummer 3.x.y.z und amd64/x86 sind an die gewünschte Version anzupassen:</p><div class="bash"><div class="contents"><pre class="notranslate">cd /tmp
wget http://dl.4players.de/ts/releases/3.x.y.z/teamspeak3-server_linux_SYSTEMARCHITEKTUR-3.x.y.z.tar.bz2
tar -xjf teamspeak3-server_linux_SYSTEMARCHITEKTUR-3.x.y.z.tar.bz2 -C /usr/local/bin/
rm teamspeak3-server_linux_SYSTEMARCHITEKTUR-3.x.y.z.tar.bz2
cd ~ </pre></div></div></div><div class="section_2"><h3 id="Einrichten-der-Konfiguration">Einrichten der Konfiguration<a class="headerlink" href="#Einrichten-der-Konfiguration">¶</a></h3><p>
Vor dem erstem Serverstart sollte man noch folgende Dateien von Hand anlegen bzw. bearbeiten:  <strong>ts3server.ini</strong>, <strong>query_ip_whitelist.txt</strong> und <strong>query_ip_blacklist.txt</strong>. Die ts3server.ini lässt sich automatisch mit diesem Befehl erstellen (als Benutzer <code class="notranslate">teamspeak</code> ausführen):</p><div class="bash"><div class="contents"><pre class="notranslate">./ts3server createinifile=1
touch query_ip_blacklist.txt query_ip_whitelist.txt </pre></div></div><p>
Die angezeigten Fehlermeldungen können ignoriert werden. Der Inhalt der <strong>ts3server.ini</strong> sieht danach folgendermaßen aus:</p><pre class="notranslate">machine_id=
default_voice_port=9987
voice_ip=0.0.0.0
licensepath=
filetransfer_port=30033
filetransfer_ip=0.0.0.0
query_port=10011
query_ip=0.0.0.0
query_ip_whitelist=query_ip_whitelist.txt
query_ip_blacklist=query_ip_blacklist.txt
dbplugin=ts3db_sqlite3
dbpluginparameter=
dbsqlpath=sql/
dbsqlcreatepath=create_sqlite/
dbconnections=10
logpath=logs
logquerycommands=0
dbclientkeepdays=30
logappend=0
query_skipbruteforcecheck=0</pre><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Der Parameterwert von <em>dbconnections</em> sollte nur mit Bedacht geändert werden, da dieser die Serverperformance extrem verschlechtern kann, d.h. der Bandbreitenverbrauch steigt. (Hat aber nichts mit den maximalen Benutzerverbindungen zum TeamSpeak 3 Server zu tun!).</p><p>Möchte man die Protokolldateien übersichtlich halten, setzt man <code class="notranslate">logappend=1</code>. Dann erstellt der TeamSpeak3-Server nur noch je ein Logfile pro virtuellen Server und fügt weitere Daten nach einen Neustart an.</p><p>Mit einem zusätzlichen Eintrag <em>dblogkeepdays</em> kann man den Löschzyklus der Logfiles beeinflussen.
</p></div></div></div><div class="section_2"><h3 id="Der-erste-Serverstart">Der erste Serverstart<a class="headerlink" href="#Der-erste-Serverstart">¶</a></h3><p>
Für den ersten Start des Servers (als Benutzer <code class="notranslate">teamspeak</code> ausführen).</p><div class="bash"><div class="contents"><pre class="notranslate">./ts3server_startscript.sh start inifile=ts3server.ini </pre></div></div><p>
Nun erscheinen nun zwei Warnhinweise.
</p><pre class="notranslate">------------------------------------------------------------------
                      I M P O R T A N T
------------------------------------------------------------------
               Server Query Admin Account created
         loginname= "serveradmin", password= "r7eSSV3i"
------------------------------------------------------------------


------------------------------------------------------------------
                      I M P O R T A N T
------------------------------------------------------------------
      ServerAdmin privilege key created, please use it to gain
      serveradmin rights for your virtualserver. please
      also check the doc/privilegekey_guide.txt for details.

       token=bgOEcvBZun5AP5bJEmHoYP0pdO7YwEIqGBbYMHN2
------------------------------------------------------------------</pre><p>
Das Password für <code class="notranslate">serveradmin</code> sollte notiert werden, denn es ermöglicht den vollständigen Zugriff auf das Serverquery des TeamSpeak3-Servers über alle Einstellungen, inklusive alle virtuellen Server. Damit man auch im TeamSpeak3-Client den <code class="notranslate">Server Admin</code> erlangt, sollte man sich mit diesem einloggen und den "token" eingeben. Im Logfile <strong>ts3server_1.log</strong> findet man diesen <em>Token</em>, um diesen mittels Kopieren und Einfügen zu übertragen.</p><pre class="notranslate">2014-01-10 20:04:46.842555|WARNING |VirtualServer |  1| --------------------------------------------------------
2014-01-10 20:04:46.842590|WARNING |VirtualServer |  1| ServerAdmin privilege key created, please use the line below
2014-01-10 20:04:46.842621|WARNING |VirtualServer |  1| token=bgOEcvBZun5AP5bJEmHoYP0pdO7YwEIqGBbYMHN2
2014-01-10 20:04:46.842651|WARNING |VirtualServer |  1| --------------------------------------------------------</pre></div><div class="section_2"><h3 id="Server-als-Dienst-starten">Server als Dienst starten<a class="headerlink" href="#Server-als-Dienst-starten">¶</a></h3><p>
Damit man den Server nicht nach jedem Systemneustart von Hand starten muss, kann man den Server beim Booten als Dienst <sup><a href="#source-6">[6]</a></sup> gleich mitstarten lassen. Im Grunde wäre es auch möglich, das <code class="notranslate">./ts3server_startscript.sh</code> anzupassen und entsprechend zu verlinken. Leider wird das Script bei jedem Update überschrieben und der direkte Aufruf erzeugt eine Fehlermeldung, dass der TeamSpeak 3 Server als Benutzer <code class="notranslate">root</code> gestartet wird.</p><pre class="notranslate">WARNING ! For security reasons we advise: DO NOT RUN THE SERVER AS ROOT</pre><p>
Hier ein SysV-Init-Skript, das mit Root-Rechten als <strong>/etc/init.d/ts3server</strong> erstellt wird:</p><div class="code"><table class="notranslate syntaxtable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101</pre></div></td><td class="code"><div class="notranslate syntax"><pre><span></span><span class="ch">#! /bin/sh</span>
<span class="c1">### BEGIN INIT INFO</span>
<span class="c1"># Provides:          ts3server</span>
<span class="c1"># Required-Start:    $remote_fs $syslog</span>
<span class="c1"># Required-Stop:     $remote_fs $syslog</span>
<span class="c1"># Default-Start:     2 3 4 5</span>
<span class="c1"># Default-Stop:      0 1 6</span>
<span class="c1"># Short-Description: TeamSpeak 3 Server</span>
<span class="c1"># Description:       Startup Init-Script for TeamSpeak 3 Server</span>
<span class="c1">### END INIT INFO</span>

<span class="c1"># PATH should only include /usr/* if it runs after the mountnfs.sh script</span>
<span class="nv">PATH</span><span class="o">=</span>/sbin:/usr/sbin:/bin:/usr/bin
<span class="nv">DESC</span><span class="o">=</span><span class="s2">"TeamSpeak 3 Server"</span>
<span class="nv">NAME</span><span class="o">=</span>ts3server
<span class="nv">USER</span><span class="o">=</span>teamspeak
<span class="nv">BINARY</span><span class="o">=</span>ts3server
<span class="nv">BINARY_BIN</span><span class="o">=</span>/usr/local/bin/teamspeak3-server_linux_amd64
<span class="nv">DAEMON</span><span class="o">=</span>ts3server_startscript.sh
<span class="nv">DAEMON_ARGS</span><span class="o">=</span><span class="nv">inifile</span><span class="o">=</span>ts3server.ini
<span class="nv">PIDFILE</span><span class="o">=</span><span class="nv">$BINARY_BIN</span>/<span class="nv">$NAME</span>.pid
<span class="nv">SCRIPTNAME</span><span class="o">=</span>/etc/init.d/<span class="nv">$NAME</span>

<span class="c1"># Exit if the package is not installed</span>
<span class="o">[</span> -x <span class="s2">"</span><span class="nv">$BINARY_BIN</span><span class="s2">/</span><span class="nv">$DAEMON</span><span class="s2">"</span> <span class="o">]</span> <span class="o">||</span> <span class="nb">exit</span> <span class="m">0</span>

<span class="c1"># Define LSB log_* functions.</span>
<span class="c1"># Depend on lsb-base (&gt;= 3.2-14) to ensure that this file is present</span>
<span class="c1"># and status_of_proc is working.</span>
. /lib/lsb/init-functions

<span class="c1">#</span>
<span class="c1"># Function that starts the daemon/service</span>
<span class="c1">#</span>
do_start<span class="o">()</span>
<span class="o">{</span>
  su <span class="nv">$USER</span> -s /bin/sh -c <span class="s2">"</span><span class="nv">$BINARY_BIN</span><span class="s2">/</span><span class="nv">$DAEMON</span><span class="s2"> start </span><span class="nv">$DAEMON_ARGS</span><span class="s2">"</span>
<span class="o">}</span>

<span class="c1">#</span>
<span class="c1"># Function that stops the daemon/service</span>
<span class="c1">#</span>
do_stop<span class="o">()</span>
<span class="o">{</span>
  su <span class="nv">$USER</span> -s /bin/sh -c <span class="s2">"</span><span class="nv">$BINARY_BIN</span><span class="s2">/</span><span class="nv">$DAEMON</span><span class="s2"> stop </span><span class="nv">$DAEMON_ARGS</span><span class="s2">"</span>
<span class="o">}</span>

<span class="c1">#</span>
<span class="c1"># Function that shows the status of to the daemon/service</span>
<span class="c1">#</span>
do_status<span class="o">()</span>
<span class="o">{</span>
  su <span class="nv">$USER</span> -s /bin/sh -c <span class="s2">"</span><span class="nv">$BINARY_BIN</span><span class="s2">/</span><span class="nv">$DAEMON</span><span class="s2"> status </span><span class="nv">$DAEMON_ARGS</span><span class="s2">"</span>
<span class="o">}</span>

<span class="k">case</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> in
  start<span class="o">)</span>
    log_daemon_msg <span class="s2">"Starting </span><span class="nv">$DESC</span><span class="s2">"</span> <span class="s2">""</span>
    do_start
    <span class="k">case</span> <span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span> in
      <span class="m">0</span><span class="p">|</span><span class="m">1</span><span class="o">)</span> log_end_msg <span class="m">0</span> <span class="p">;;</span>
      <span class="m">2</span><span class="o">)</span> log_end_msg <span class="m">1</span> <span class="p">;;</span>
    <span class="k">esac</span>
    <span class="p">;;</span>
  stop<span class="o">)</span>
    log_daemon_msg <span class="s2">"Stopping </span><span class="nv">$DESC</span><span class="s2">"</span> <span class="s2">""</span>
    do_stop
    <span class="k">case</span> <span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span> in
      <span class="m">0</span><span class="p">|</span><span class="m">1</span><span class="o">)</span> log_end_msg <span class="m">0</span> <span class="p">;;</span>
      <span class="m">2</span><span class="o">)</span> log_end_msg <span class="m">1</span> <span class="p">;;</span>
    <span class="k">esac</span>
    <span class="p">;;</span>
  status<span class="o">)</span>
    do_status
    status_of_proc <span class="s2">"</span><span class="nv">$BINARY</span><span class="s2">"</span> <span class="s2">"</span><span class="nv">$DESC</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">exit</span> <span class="m">0</span> <span class="o">||</span> <span class="nb">exit</span> <span class="nv">$?</span>
    <span class="p">;;</span>
  restart<span class="o">)</span>
	log_daemon_msg <span class="s2">"Restarting </span><span class="nv">$DESC</span><span class="s2">"</span> <span class="s2">""</span>
    do_stop
	<span class="k">case</span> <span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span> in
	  <span class="m">0</span><span class="p">|</span><span class="m">1</span><span class="o">)</span>
        do_start
        <span class="k">case</span> <span class="s2">"</span><span class="nv">$?</span><span class="s2">"</span> in
          <span class="m">0</span><span class="o">)</span> log_end_msg <span class="m">0</span> <span class="p">;;</span>
          <span class="m">1</span><span class="o">)</span> log_end_msg <span class="m">1</span> <span class="p">;;</span> <span class="c1"># Old process is still running</span>
          *<span class="o">)</span> log_end_msg <span class="m">1</span> <span class="p">;;</span> <span class="c1"># Failed to start</span>
        <span class="k">esac</span>
        <span class="p">;;</span>
      *<span class="o">)</span>
        <span class="c1"># Failed to stop</span>
        log_end_msg <span class="m">1</span>
		<span class="p">;;</span>
	<span class="k">esac</span>
	<span class="p">;;</span>
  *<span class="o">)</span>
    <span class="nb">echo</span> <span class="s2">"Usage: </span><span class="nv">$SCRIPTNAME</span><span class="s2"> {start|stop|status|restart}"</span>
    <span class="nb">exit</span> <span class="m">3</span>
    <span class="p">;;</span>
<span class="k">esac</span>

:
</pre></div>
</td></tr></table></div><p>
Die gewünschte Version amd64/x86 oben im Script ist anzupassen und in die Datei <strong>ts3server</strong> zu übertragen <sup><a href="#source-8">[8]</a></sup>. Danach die Dateirechte <sup><a href="#source-4">[4]</a></sup> als ausführbar anpassen und als Init-Script im System einrichten:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo chmod +x ts3server
sudo update-rc.d ts3server defaults 80 10 </pre></div></div><p>
Bei erfolgreich Aufruf erhält man diese Ausgabemeldungen:</p><pre class="notranslate"> Adding system startup for /etc/init.d/ts3server ...
   /etc/rc0.d/K10ts3server -&gt; ../init.d/ts3server
   /etc/rc1.d/K10ts3server -&gt; ../init.d/ts3server
   /etc/rc6.d/K10ts3server -&gt; ../init.d/ts3server
   /etc/rc2.d/S80ts3server -&gt; ../init.d/ts3server
   /etc/rc3.d/S80ts3server -&gt; ../init.d/ts3server
   /etc/rc4.d/S80ts3server -&gt; ../init.d/ts3server
   /etc/rc5.d/S80ts3server -&gt; ../init.d/ts3server</pre><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>S80 und K10 sind bewusst gewählt, um sicher zustellen, dass der TeamSpeak3-Server erst sehr spät gestartet wird (nachdem alle andern evtl. wichtigen Dienste schon geladen wurde und früh beendet wird, damit keine Datenverluste entstehen.
</p></div></div><p>Nun lässt sich der TeamSpeak3-Server bequem ohne den umständlichen Umweg über ein <code class="notranslate">sudo</code>-Kommando starten/stoppen bzw. der Status ermitteln.</p></div><div class="section_2"><h3 id="Lizenzdatei">Lizenzdatei<a class="headerlink" href="#Lizenzdatei">¶</a></h3><p>
Solange sich keine <strong>licensekey.dat</strong> im Programmverzeichnis des TeamSpeak3-Servers befindet, wird im <strong>ts3server_0.log</strong> immer wieder folgende Zeile nach dem Serverstart auftauchen:</p><pre class="notranslate">2014-01-10 20:04:28.877559|WARNING |Accounting    |   | Unable to find valid license key, falling back to limited functionality</pre><p>
Für den privaten Gebrauch kann diese Meldung ignoriert werden, allerdings bleibt der TeamSpeak3-Server auf 1 virtuellen Server mit maximal 32 Slots beschränkt. Eine <a class="external" href="http://npl.teamspeakusa.com/ts3npl.php" rel="nofollow">Non Profit License</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> (NLP) kann man auf der <a class="external" href="http://teamspeak.com/" rel="nofollow">TeamSpeak Webseite</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> beantragen. Diese ermöglicht dann den Betrieb von zwei virtuellen Servern mit maximal 512 Slots. Mittlerweile ist diese aber an diverse Bedingungen geknüpft:</p><ul><li><p>eine online verfügbare, funktionierende Webseite mit einer eigenen Domain (Bsp. www.meints3server.org)</p></li><li><p>eine gültige E-Mail-Adresse verknüpft mit der eigenen Domain (Bsp. serveradmin@meints3server.org)</p></li><li><p>der NPL lizensierte Server muss an einer statischen IP-Adresse betrieben werden</p></li><li><p>wenn eine NPL bereits auf die IP-Adresse ausgestellt wurde, wird der Antrag abgelehnt</p></li><li><p>beim Überprüfen der Webseite darf keine Werbung oder Spenden-Buttons vorhanden sein</p></li></ul><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>NPL-Anträge werden manuell durch das USA-Büro von Montag 09:00 bis Freitag 17:00 Pazific Time (MEZ -9h), ausser an Feiertagen und Wochenenden verarbeitet. Aufgrund der starken Auslastung kann die NPL-Verarbeitung bis zu 15 Tage dauern.
</p></div></div><p>
Sobald man eine E-Mail mit dem Betreff "TeamSpeak 3 Non-Profit License Issued" erhalten hat, kann man die angehängte Datei <strong>licensekey.dat</strong> in den Programmordner des TeamSpeak3-Servers kopieren und den Serverdienst neu starten.</p><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Der TeamSpeak 3 Server verifiziert bei jedem Start durch Anfragen beim Lizenz-Verifizierungsserver, ob die NPL-Lizenz noch gültig ist. Falls diese abgelaufen ist, wird automatisch eine neue herruntergeladen. Deshalb sollten von beiden Dateien <strong>licensekey.dat</strong> und <strong>serverkey.dat</strong> in regelmässigen Abständen ein Backup erstellt werden.</p><p>Sollte man den TeamSpeak3-Server neu aufsetzen müssen und verwendet die bisherige Datei <strong>licensekey.dat</strong> wieder, wird diese vom Lizenz-Verifizierungsserver zurückgewiesen und der TeamSpeak 3 Server wieder beschränkt auf 1 VServer/32 Slots und nur der VServer 1 gestartet. Dasselbe gilt auch, wenn der Lizenz-Verifizierungsserver wegen fehlender Internetverbindung beim Start nicht erreichbar ist.
</p></div></div></div></div><div class="section_1"><h2 id="Aktualisierung">Aktualisierung<a class="headerlink" href="#Aktualisierung">¶</a></h2><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Da dies eine proprietäre Software ist, sollte jeder Server-Administrator selber darum bemüht sein, stets die aktuelle Version installiert zu haben oder zu installieren.
</p></div></div><p>
Das Vorgehen ist in etwa das Gleiche wie bei der Installation. Aus Sicherheitsgründen sollte von der <strong>ts3server.sqlitedb</strong> ein Backup gemacht werden, nach dem der Server gestoppt wurde. Als Benutzer <code class="notranslate">root</code> ausführen oder mittels <code class="notranslate">sudo</code>-Kommando:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/ts3server stop
sudo su teamspeak --shell /bin/bash </pre></div></div><p>
Die Versionsnummer 3.x.y.z und amd64/x86 sind an die gewünschte Version anzupassen. Die weiteren Befehle werden nun als Benutzer <code class="notranslate">teamspeak</code> ausgeführt:</p><div class="bash"><div class="contents"><pre class="notranslate">cd ~
mkdir backup
cp --backup=numbered ts3server.sqlitedb ./backup/
cd /tmp
wget http://dl.4players.de/ts/releases/3.x.y.z/teamspeak3-server_linux_amd64-3.x.y.z.tar.bz2
tar -xjf teamspeak3-server_linux_amd64-3.x.y.z.tar.bz2 -C /usr/local/bin
exit
cd /usr/local/bin
cp -r teamspeak3-server_linux_amd64/* teamspeak3-server_linux_amd64/
cd /tmp
rm teamspeak3-server_linux_amd64-3.x.y.z.tar.bz2
sudo su teamspeak --shell /bin/bash
cd ~ </pre></div></div><p>
Zum Abschluss den aktualisierten TeamSpeak 3 Server wieder starten:</p><div class="bash"><div class="contents"><pre class="notranslate">./ts3server_startscript.sh start </pre></div></div><p>Alternativ kann man auch den Server neustarten, wenn Teamspeak als Dienst gestartet wird.</p></div><div class="section_1"><h2 id="Deinstallation">Deinstallation<a class="headerlink" href="#Deinstallation">¶</a></h2><p>
Vor der Deinstallation muss der TeamSpeak3-Server beendet werden. Als Benutzer <code class="notranslate">root</code> ausführen oder mittels <code class="notranslate">sudo</code>-Kommando.
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo /etc/init.d/ts3server stop </pre></div></div><p>
Das Init-Script entfernen.
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo update-rc.d -f ts3server remove </pre></div></div><p>
Bei erfolgreich Aufruf erhält man folgende Meldungen:</p><pre class="notranslate"> Removing any system startup links for /etc/init.d/ts3server ...
   /etc/rc0.d/K10ts3server
   /etc/rc1.d/K10ts3server
   /etc/rc2.d/S80ts3server
   /etc/rc3.d/S80ts3server
   /etc/rc4.d/S80ts3server
   /etc/rc5.d/S80ts3server
   /etc/rc6.d/K10ts3server</pre><p>
Zum Abschluss wird der Benutzer <code class="notranslate">teamspeak</code> inklusive seines Homeverzeichnis gelöscht:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo userdel -f -r teamspeak </pre></div></div></div><div class="section_1"><h2 id="Erweiterungen">Erweiterungen<a class="headerlink" href="#Erweiterungen">¶</a></h2><p>
Im Gegensatz zum alten TeamSpeak2-Server gibt es für den TeamSpeak3-Server keine integrierte Weboberfläche. Fast alles lässt sich aber mit <code class="notranslate">Server Admin</code>-Rechten über den TeamSpeak3-Client administrieren. Der eigentliche Admin-Zugang ist eine Telnet ähnliche Query-Konsole. Damit eröffnen sich weitere Möglichkeiten. Über die <a class="external" href="http://addons.teamspeak.com/" rel="nofollow">offizielle Addons Webseite</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> kann man nebst nützlichen Erweiterungen für den TeamSpeak3-Client auch einige Administrator-Werkzeuge herunterladen. Mit dabei ist unter anderem eine Weboberfläche für die Administration, ein webbasierter Viewer und diverse Integrationen in <a class="internal" href="./content_management_systeme.html">Content Management Systeme</a>.</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="./teamspeak_3.html">Teamspeak 3</a> - Installation und Benutzung des TeamSpeak-3-Clienten</p></li><li><p><a class="external" href="http://www.teamspeak.com/" rel="nofollow">Herstellerseite</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p><ul><li><p><a class="external" href="http://www.teamspeak.com/?page=downloads" rel="nofollow">TeamSpeak 3 Downloads</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li></ul></li><li><p><a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/TeamSpeak">TeamSpeak</a></p></li><li><p><a class="external" href="http://npl.teamspeakusa.com/ts3npl.php" rel="nofollow">Non-Profit License Registration</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p><a class="external" href="http://planetteamspeak.com/" rel="nofollow">TS3 PHP Framework</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> </p></li><li><p><a class="external" href="http://www.team-bielefeld.de/teamspeak_3/ts_server_webinterface_von_psychokiller.htm" rel="nofollow">TS3 Server Webinterface von Psychokiller</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> </p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./teamspeak-server/a/revision/940675.html">Diese Revision</a> wurde am 9. Mai 2017 00:11 von <a href="https://ubuntuusers.de/user/ubot/">ubot</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./teamspeak-server.html">TeamSpeak-Server</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>