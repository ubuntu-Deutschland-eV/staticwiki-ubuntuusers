<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Energiesparmodi_mit_ACPI › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./energiesparmodi_mit_acpi.html">Energiesparmodi mit ACPI</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Energiesparmodi_mit_ACPI">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./energiesparmodi_mit_acpi/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./energiesparmodi_mit_acpi/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./energiesparmodi_mit_acpi/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./energiesparmodi_mit_acpi/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./energiesparmodi_mit_acpi/a/backlinks.html">Energiesparmodi mit ACPI</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p> 
Dieser Artikel ist größtenteils für alle Ubuntu-Versionen gültig.
</p></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./sudo.html">Root-Rechte erlangen</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./editor.html">Editor</a> - einen Editor öffnen</p></li></ol></div></div><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#ACPI-SUSPEND-Modi-allgemein">ACPI-SUSPEND-Modi allgemein
</a><ol class="arabic"><li><a class="crosslink" href="#Begriffsklaerung-STR-STD">Begriffsklärung: STR, STD, ...
</a></li><li><a class="crosslink" href="#ACPI-SUSPEND-Modi-S0-S1-S2-S3-S4-S5">ACPI-SUSPEND-Modi: S0 S1 S2 S3 S4 S5
</a></li><li><a class="crosslink" href="#Sonderfall-SUSPEND-to-BOTH">Sonderfall: SUSPEND to BOTH
</a></li><li><a class="crosslink" href="#S3-im-BIOS-aktivieren">S3 im BIOS aktivieren
</a></li><li><a class="crosslink" href="#ACPI-Kernelparameter">ACPI-Kernelparameter
</a><ol class="arabic"><li><a class="crosslink" href="#ACPI-Deaktivierung">ACPI-Deaktivierung
</a></li><li><a class="crosslink" href="#BIOS-Funktionen-nutzen">BIOS-Funktionen nutzen
</a></li></ol></li></ol></li><li><a class="crosslink" href="#SUSPEND-Tools-ACPI-unter-Ubuntu">SUSPEND-Tools (ACPI) unter Ubuntu
</a></li><li><a class="crosslink" href="#Ruhezustand-aktivieren">Ruhezustand aktivieren
</a><ol class="arabic"><li><a class="crosslink" href="#Ubuntu-11-10-13-04-und-Kubuntu-14-04">Ubuntu 11.10 - 13.04 und Kubuntu ... - 1...</a></li><li><a class="crosslink" href="#Ab-Ubuntu-13-10-und-Kubuntu-14-10">Ab Ubuntu 13.10 und Kubuntu 14.10
</a></li><li><a class="crosslink" href="#Ab-Ubuntu-und-Kubuntu-16-04">Ab Ubuntu und Kubuntu 16.04
</a></li></ol></li><li><a class="crosslink" href="#Einrichtung-von-SUSPEND-RESUME">Einrichtung von SUSPEND &amp; RESUME
</a></li><li><a class="crosslink" href="#Problembehebung">Problembehebung
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p><img alt="./power.png" class="image-left" src="./_/b8e972fc87ae6b47d2932bfe9b35528cfab097b1.png"/>
In diesem Artikel werden Energiesparmodi behandelt, die zum <strong>A</strong>dvanced <strong>C</strong>onfiguration and <strong>P</strong>ower Management <strong>I</strong>nterface (siehe <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/ACPI">ACPI</a> und <a class="interwiki interwiki-wikipedia_en" href="https://en.wikipedia.org/wiki/Advanced_Configuration_and_Power_Interface">ACPI</a>) gehören. Die Energiesparmodi werden oft als "Schlafmodi" bezeichnet. Energiesparmodi gab es auch beim älteren Industriestandard <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Advanced_Power_Management">Advanced Power Management</a> (APM). Dieser wurde mittlerweile vollständig durch ACPI abgelöst.</p><p>Nur bei sehr alten Rechnern kann im BIOS noch zwischen ACPI und APM gewählt werden. An dieser Stelle kann nicht auf BIOS-Einzelheiten eingegangen werden. Als Faustregel gilt, dass die Standard-BIOS-Einstellungen auf aktueller Hardware i.d.R. korrekt gesetzt sind, weil ACPI das ältere APM vollständig verdrängt hat. Die Bedienungsanleitung des Mainboards liefert ggf. weitere hilfreiche Informationen.</p><div class="section_1"><h2 id="ACPI-SUSPEND-Modi-allgemein">ACPI-SUSPEND-Modi allgemein<a class="headerlink" href="#ACPI-SUSPEND-Modi-allgemein">¶</a></h2><p>
In diesem Artikel werden insbesondere die ACPI-Schlafmodi:</p><ul><li><p><strong>S</strong>uspend <strong>T</strong>o <strong>R</strong>AM (STR) oder "Stand By Suspend"</p></li><li><p><strong>S</strong>uspend <strong>T</strong>o <strong>D</strong>isk (STD) oder "Hibernate"</p></li></ul><p>
behandelt.</p><div class="section_2"><h3 id="Begriffsklaerung-STR-STD">Begriffsklärung: STR, STD, ...<a class="headerlink" href="#Begriffsklaerung-STR-STD">¶</a></h3><p>
Suspend To RAM wird manchmal auch als <strong>S</strong>uspend <strong>T</strong>o <strong>M</strong>emory (STM) bezeichnet. In den unterschiedlichen <a class="internal" href="./desktop.html">Desktopumgebungen</a>, sogar in unterschiedlichen Versionen derselben Desktop-Umgebung, werden unterschiedliche Begriffe für STR und STD verwendet. Dazu nachfolgend eine Übersicht aller verwendeten Begriffe, die zeigen sollte, dass ein und derselbe Begriff zwei unterschiedliche Energieschlafmodi bezeichnet. Daher muss man genau hinschauen und im Zweifelsfall die folgende Faustregel anwenden:</p><ul><li><p>der "ruhigere" der beiden Energieschlafmodi ist <strong>STD</strong> - das Gerät wird komplett ausgeschaltet</p></li><li><p>der "flüchtigere" der beiden ist <strong>STR</strong></p></li></ul><p>
Was damit genau gemeint ist, wird klar, wenn man die Tabelle weiter unten anschaut. Falls mehrere Bezeichnungen eines und desselben ACPI-Schlafmodus in unterschiedlichen Versionen derselben (Desktop-)Umgebung verwendet werden, so sind diese so angeordnet, dass links die "aktuellere" bzw. die "aktuellste" Bezeichnung ist. Weiter rechts findet man ggf. die Bezeichnung(en) aus früheren Versionen dieser Desktop-Umgebung.</p><p>Die folgende Tabelle fasst die aktuellen Bezeichnungen in der jeweiligen Desktopumgebung und die wichtigsten Eigenschaften der beiden Schlafmodi STR und STD zusammen. Zum Vergleich sind auch die aus der Windows-Welt geläufigen sowie weiteren Bezeichnungen enthalten:</p><table><tr><td colspan="6" style="text-align: center; background-color: #E2C890"> <strong>Energiesparmodi</strong> </td></tr><tr><td style="background-color: #E2C890"> <strong>Technische Bezeichnung</strong> </td><td style="background-color: #F9EAAF"> <strong>S3</strong> = <strong>S</strong>uspend-<strong>T</strong>o-<strong>R</strong>AM (<strong>STR</strong>) </td><td style="background-color: #F9EAAF"> <strong>S4</strong> = <strong>S</strong>uspend-<strong>T</strong>o-<strong>D</strong>isk (<strong>STD</strong>) </td></tr><tr><td style="background-color: #F9EAAF"> <strong>GNOME (Ubuntu)</strong> </td><td> <em>Bereitschaft</em> ( <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> =suspend) </td><td> <em>Ruhezustand</em> ( <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Ruhezustand">Hibernate</a>) </td></tr><tr><td style="background-color: #F9EAAF"> <strong>KDE (Kubuntu)</strong> </td><td> <em>Ruhezustand (im Speicher)</em> </td><td> <em>Ruhezustand (auf Festplatte)</em> / <em>Tiefschlaf</em> </td></tr><tr><td style="background-color: #F9EAAF"> <strong>XFCE (Xubuntu)</strong> </td><td> <em>Standby</em> / <em>Ruhezustand</em> </td><td> <em>Ruhezustand</em> / <em>Tiefschlaf</em> </td></tr><tr><td style="background-color: #F9EAAF"> <strong>MATE (Ubuntu MATE)</strong> </td><td> <em>Bereitschaft</em> ( <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> =suspend) </td><td> <em>Ruhezustand</em> ( <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Ruhezustand">Hibernate</a>) </td></tr><tr><td style="background-color: #F9EAAF"> <strong>Shell Skripte und Konfigurationsdateien</strong> </td><td> <em>STANDBY</em> </td><td> <em>HIBERNATE, HIBERNATION</em> </td></tr><tr><td style="background-color: #F9EAAF"> <strong>Windows</strong> </td><td> <em>Standbymodus</em> </td><td> <em>Ruhezustand</em> </td></tr><tr><td style="background-color: #F9EAAF"> <strong>Weitere Begriffe</strong> </td><td> <em>Bereitschaftsmodus, Schlafmodus, </em><strong><em>S</em></strong><em>uspend-</em><strong><em>T</em></strong><em>o-</em><strong><em>M</em></strong><em>emory (</em><strong><em>STM</em></strong><em>)</em> </td><td> <em>Hibernation</em> </td></tr><tr><td style="background-color: #EEEEEE"> <strong>Vorteile</strong> </td><td style="background-color: #ccff99"> Computer erwacht schneller </td><td style="background-color: #ccff99"> niedrigerer bzw. kein Stromverbrauch<sup>2</sup>, kein Datenverlust bei Stromunterbrechung </td></tr><tr><td style="background-color: #EEEEEE"> <strong>Nachteile</strong> </td><td style="vertical-align: top; background-color: #FF4500">  höherer Stromverbrauch<sup>1</sup>, Datenverlust bei Stromunterbrechung </td><td style="vertical-align: top; background-color: #FF4500"> Computer erwacht langsamer </td></tr><tr><td style="background-color: #EEEEEE"> <strong>Grund</strong> </td><td style="vertical-align: top; background-color: #EEEEEE"> Computer bleibt eingeschaltet, Daten sind noch im Arbeitsspeicher </td><td style="vertical-align: top; background-color: #EEEEEE"> Computer wird ausgeschaltet, Daten werden vorher aus dem Arbeitsspeicher auf die Festplatte gesichert </td></tr></table><p>
<sup>1</sup> Notebooks sind generell sparsam in Standby, aber auch bei optimierten Desktop-Rechnern kann der Verbrauch unter 10 W liegen.<br/><sup>2</sup> Ein ATX-Netzteil verbraucht immer etwas (Praxisbeispiel: 1,5 W), solange der Netzteilschalter auf der Rückseite eines Desktoprechners eingeschaltet ist.</p></div><div class="section_2"><h3 id="ACPI-SUSPEND-Modi-S0-S1-S2-S3-S4-S5">ACPI-SUSPEND-Modi: S0 S1 S2 S3 S4 S5<a class="headerlink" href="#ACPI-SUSPEND-Modi-S0-S1-S2-S3-S4-S5">¶</a></h3><p>
Laut ACPI-Standard existieren 6 Energiesparmodi.</p><table><tr><td style="background-color: #E2C890"> <strong>Modus</strong> </td><td style="background-color: #E2C890"> <strong>Beschreibung </strong> </td></tr><tr><td style="background-color: #F9EAAF"> <strong>S0</strong></td><td> Das System ist zu 100% einsatzbereit. </td></tr><tr><td style="background-color: #F9EAAF"> <strong>S1</strong> </td><td> "Power On Suspend" – Der „hungrigste“ Energiesparmodus. Die CPU ist angehalten. Die CPU und RAM stehen unter Spannung. Diesen Energiesparmodus unterstützen nahezu alle Maschinen. </td></tr><tr><td style="background-color: #F9EAAF"> <strong>S2</strong> </td><td> "Stand By" – Die CPU ist ausgeschaltet. Der Arbeitsspeicher steht unter Spannung. Dieser Energiesparmodus wird selten verwendet. </td></tr><tr><td style="background-color: #F9EAAF"> <strong>S3</strong> </td><td> "Stand By Suspend" (<strong>S</strong>uspend <strong>T</strong>o <strong>R</strong>AM, <strong>STR</strong>) – Der Arbeitsspeicher ist nahezu die einzige Komponente, die mit Spannung versorgt wird. Der aktuelle Zustand des Systems wird im Arbeitsspeicher aufrecht erhalten. Der RAM-Inhalt bleibt erhalten, solange das System unter Spannung (Laptop: Akku oder Netz; Desktop: Netz) steht. Das System kann aus STR sehr schnell (im Sekundenbereich) wieder aufgeweckt werden. Nach dem Wiederaufwecken wird der gespeicherte Zustand des Betriebssystems, aller Applikationen und geöffneter Dokumente wiederhergestellt, sodass die Arbeit an exakt derselben Stelle nahezu unmittelbar fortgesetzt werden kann.<br/>Dieser Energiesparmodus wird vor allem bei Laptops häufig verwendet. </td></tr><tr><td style="background-color: #F9EAAF"> <strong>S4</strong> </td><td> "Hibernate" (<strong>S</strong>uspend <strong>T</strong>o <strong>D</strong>isk, <strong>STD</strong>) – der „Aktuelle Gesamtzustand des Systems“ bleibt erhalten. Der gesamte Inhalt des Arbeitsspeichers wird auf nicht flüchtigen Speichermedien (i.d.R. auf einer Festplatte) gespeichert. Das System kann aus STD i.d.R. schneller wieder aufgeweckt werden, als das System zum vollständigen Neustart benötigt. Dieser Vorteil wird (noch) deutlicher, wenn laufende Applikationen vor dem Übergang zu STD nicht beendet werden. Ähnlich zu S3 wird nach dem Wiederaufwecken des Rechners der gespeicherte Zustand des Betriebssystems, aller Applikationen und geöffneter Dokumente wiederhergestellt, sodass die Arbeit an exakt derselben Stelle fortgesetzt werden kann. Der Unterschied zu S3 besteht darin, dass dies eben NICHT "nahezu unmittelbar" sondern mit einer etwas größeren Verzögerung erreicht wird. Diesem Nachteil steht der Vorteil gegenüber, dass ein Spannungsverlust (zum Beispiel wenn der Laptop-Akku leer läuft oder wenn das Gerät vom Netz getrennt wird) kein Problem darstellt.<br/>Unter Linux wird standardmäßig das "Suspend To Disk-Image" auf die SWAP-Partition geschrieben. Allerdings kann man auch eine separate Partition hierfür verwenden. Nachteilig dabei ist der Umstand, dass diese Partition dann nur für STD verwendet werden kann. Verwendet man, so wie vorgesehen, die SWAP-Partition für STD, so wird kein Plattenplatz "verschwendet".<br/>Auf Systemen mit (sehr) viel RAM und abhängig von der STD-Konfiguration (<code class="notranslate">COMPRESS_IMAGE=Y|N</code> o.ä. bei uswsusp) kann das Wiederaufwecken aus STD (fast) länger dauern, als das System komplett zu booten. Dies ist u.a. abhängig von Diensten, die beim Booten gestartet werden. Aus diesem Grund wird STD vorwiegend auf Systemen mit wenig RAM oder langsamen CPUs, sowie häufiger auf Desktop-PCs als auf Notebooks verwendet.</td></tr><tr><td style="background-color: #F9EAAF"> <strong>S5</strong> </td><td> "Soft Off" – manche Komponenten bleiben unter Spannung, sodass der Rechner zum Beispiel über Tastatur, USB-Geräte oder per "Wake-up-on-LAN" wieder aufgeweckt werden kann. </td></tr></table><p>
</p></div><div class="section_2"><h3 id="Sonderfall-SUSPEND-to-BOTH">Sonderfall: SUSPEND to BOTH<a class="headerlink" href="#Sonderfall-SUSPEND-to-BOTH">¶</a></h3><p>
Eine Sonderform der Energiesparmodi (unter Linux) besteht aus der Kombination von STR (S3) und STD (S4). Dieser Misch-Energiesparmodus wird <strong>S</strong>uspend <strong>T</strong>o <strong>B</strong>oth (<strong>STB</strong>) oder auch SUSPEND-HYBRID genannt. Dabei wird der Inhalt des Arbeitsspeichers zuerst gemäß S4 auf die SUSPEND-Partition geschrieben. Das System betritt daraufhin den Energiesparmodus S3, und der Arbeitsspeicher wird weiterhin mit Spannung versorgt. Nach dem Wiederaufwecken aus S3 ist das System sofort wieder einsatzbereit, das STD-Image wird verworfen. Läuft der Akku leer, oder wird das System vom Netz getrennt, so ist der Inhalt des Arbeitsspeichers verloren. Allerdings wird das System nach dem Neustart erkennen, dass es aus S4 wiederaufgeweckt wurde. Daraufhin wird der Systemzustand aus dem STD-Image wiederhergestellt.</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Dieser Misch-Energiesparmodus ist noch experimentell und wird aus diesem Grund noch nicht standardmäßig in Menüs angeboten. Testen kann man STB nach einigen vorbereitenden Maßnahmen (Backup, viel Zeit, ...) durch manuelles Aufrufen entsprechender Skripte. Unter Umständen müssen vorher u.a. Sicherungskopien angelegt und Skripte angepasst werden. Fragen hierzu bitte ggf. im Forum posten.
</p></div></div><p>
Weitere Details hierzu findet man ggf. in den Artikeln <a class="internal" href="./uswsusp.html">uswsusp</a> und <a class="internal" href="./pm-utils.html">pm-utils</a>.</p></div><div class="section_2"><h3 id="S3-im-BIOS-aktivieren">S3 im BIOS aktivieren<a class="headerlink" href="#S3-im-BIOS-aktivieren">¶</a></h3><p>
S4 funktioniert (nahezu) unabhängig von den BIOS-Einstellungen. Bei S3 kann es vorkommen, dass durch fehlerhafte BIOS-Einstellungen S3 nicht möglich ist. Aufgrund der BIOS-Vielfalt kann nur die Faustregel genannt werden, dass die Aktivierung einer BIOS-Option mit folgenden Zeichenketten S3 ermöglichen wird:
</p><ul><li><p>S3</p></li><li><p>STR</p></li><li><p>Suspend to RAM</p></li><li><p>Suspend to RAM (S3) "enabled"</p></li></ul><p>
S3 wird nicht funktionieren, wenn eine BIOS-Option aktiviert ist, bei der eine der folgenden Zeichenketten vorkommt:
</p><ul><li><p>S1</p></li><li><p>POS</p></li><li><p>Power On Suspend</p></li><li><p>Suspend to RAM (S3) "disabled"</p></li></ul><p>
</p></div><div class="section_2"><h3 id="ACPI-Kernelparameter">ACPI-Kernelparameter<a class="headerlink" href="#ACPI-Kernelparameter">¶</a></h3><p>
Bezüglich der Einstellung von Kernelparametern sei auf den ausführlichen Artikel <a class="internal" href="./bootoptionen.html">Bootoptionen</a> verwiesen.</p><div class="section_3"><h4 id="ACPI-Deaktivierung">ACPI-Deaktivierung<a class="headerlink" href="#ACPI-Deaktivierung">¶</a></h4><p>
Auf manchen Systemen ist der Kernelparameter <code class="notranslate">acpi=off</code> gesetzt. Mit dieser Einstellung ist es jedoch sehr schwierig bzw. unmöglich, ACPI-Energiesparmodi zu nutzen. Welche ACPI-Kernelparameter konfiguriert sind bzw. alle Kernelparameter, die beim letzten <a class="internal" href="./booten.html">Bootvorgang</a> gesetzt wurden, kann man mit folgenden Befehlen in Erfahrung bringen:</p><ul><li><p>Aktuelle Kernelparameter anzeigen: </p><div class="bash"><div class="contents"><pre class="notranslate">cat /proc/cmdline </pre></div></div></li><li><p>Einstellungen für <a class="internal" href="./grub_2.html">GRUB 2</a> anzeigen: </p><div class="bash"><div class="contents"><pre class="notranslate">grep -i acpi /etc/default/grub </pre></div></div></li><li><p>Einstellungen für <a class="internal" href="./grub.html">GRUB</a> anzeigen (ältere Ubuntu-Versionen vor 9.10 oder Systeme, bei denen GRUB 2 durch GRUB ersetzt wurde: </p><div class="bash"><div class="contents"><pre class="notranslate">grep -i acpi /boot/grub/menu.lst </pre></div></div></li></ul><p>
Falls tatsächlich <code class="notranslate">acpi=off</code> gesetzt ist, kann man die Energiesparmodi evtl. aktivieren, in dem man diese Bootoption einfach entfernt. Denn evtl. funktioniert das Booten mit dem aktuellen Kernel inzwischen mit ACPI und ggf. nicht ganz so radikalen <a class="internal" href="./bootoptionen.html">Bootoptionen</a>.</p></div><div class="section_3"><h4 id="BIOS-Funktionen-nutzen">BIOS-Funktionen nutzen<a class="headerlink" href="#BIOS-Funktionen-nutzen">¶</a></h4><p>
Bei einiger Hardware lässt sich der Wechsel von Energiesparmodi nicht immer fehlerfrei vom Linux-Kernel direkt steuern, der Wechsel funktioniert aber problemlos bei Verwendung der entsprechenden BIOS-Funktionen (sofern die Hardware noch über ein BIOS verfügt). Die Verwendung der BIOS-Funktionen kann mit folgenden Kernelparametern bzw. Bootoptionen aktiviert werden:</p><ul><li><p><code class="notranslate">acpi_sleep=nonvs</code> - Einige Einstellungen nicht vom Kernel speichern und wiederherstellen lassen.</p></li><li><p><code class="notranslate">acpi_sleep=s3_bios,s3_mode</code> - Explizit BIOS-Funktionen für S3 nutzen. Mit der zweiten Option hinter dem Komma wird auch der Video-Modus über das BIOS initialisiert (nicht immer erforderlich).</p></li></ul><p>
</p></div></div></div><div class="section_1"><h2 id="SUSPEND-Tools-ACPI-unter-Ubuntu">SUSPEND-Tools (ACPI) unter Ubuntu<a class="headerlink" href="#SUSPEND-Tools-ACPI-unter-Ubuntu">¶</a></h2><p>
An dieser Stelle nur ein kurzer Überblick. Weitere Details sind den genannten Artikeln zu entnehmen.</p><ul><li><p>die <a class="internal" href="./pm-utils.html">pm-utils</a> sind der "neue" Standard für das Power-Management unter Linux. Das Paket <a class="interwiki interwiki-packages" href="http://packages.ubuntu.com/pm-utils">pm-utils</a> beinhaltet (hauptsächlich) Skripte, die die eigentlichen SUSPEND- und RESUME-Vorgänge ausführen. Dabei können diese Skripte direkt oder indirekt aufgerufen werden. Die Skripte greifen ggf. auf uswsusp (siehe nächster Punkt) zurück, sofern uswsusp installiert ist und nicht explizit auf Kernelfunktionen zurückgegriffen werden soll.</p></li></ul><p>
</p><ul><li><p><a class="internal" href="./uswsusp.html">uswsusp</a> steht für <strong>U</strong>ser-<strong>S</strong>oft<strong>W</strong>are-<strong>Susp</strong>end und ist eine Suspend-Implementierung für UserSpace-Applikationen des Linux-Kernels ab Version 2.6.17 (funktioniert also ohne Root-Rechte). Auf manchen Systemen kann der Einsatz von uswsusp zum Erfolg führen, wenn Energiesparmodi über Kernelfunktionen nicht funktionieren.</p></li></ul><p>
</p><ul><li><p>Das Paket <strong>acpi-support</strong> installiert u.a. die Datei <strong>/etc/default/acpi-support</strong> sowie den Ordner <strong>/etc/acpi/</strong> samt Inhalt. Die Datei <strong>/etc/default/acpi-support</strong> hat (zumindest seit Ubuntu 8.04 und beim Betreten von Energiesparmodi aus den Menüs heraus) keine Auswirkung, da stattdessen standardmäßig Skripte von pm-utils aufgerufen werden. Eine Ausnahme liegt vor, wenn man die bei Ubuntu 12.04 noch vorhandenen Skripte <strong>/etc/acpi/sleep.sh</strong> oder <strong>/etc/acpi/hibernate.sh</strong> manuell aufruft (in neueren Ubuntu-Versionen sind diese nicht mehr enthalten).</p></li></ul><p>
</p></div><div class="section_1"><h2 id="Ruhezustand-aktivieren">Ruhezustand aktivieren<a class="headerlink" href="#Ruhezustand-aktivieren">¶</a></h2><p>
STD (Hibernate) ist per Voreinstellung ab Ubuntu 11.10 nicht mehr aktiv. Das Computer-Modell muss inzwischen von Canonical <a class="external" href="http://www.ubuntu.com/certification/" rel="nofollow">zertifiziert</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> oder validiert (siehe <a class="interwiki interwiki-ubuntu" href="https://wiki.ubuntu.com/UbuntuFriendly">UbuntuFriendly</a>) sein. Ist er das nicht, wird der Ruhezustand nicht unterstützt. Hintergründe dazu sind unter <a class="interwiki interwiki-bug" href="https://launchpad.net/bugs/812394">Disable hibernate option by default</a> und auch <a class="interwiki interwiki-ubuntu" href="https://wiki.ubuntu.com/Power#Power_settings">Power</a> zu finden.</p><div class="section_2"><h3 id="Ubuntu-11-10-13-04-und-Kubuntu-14-04">Ubuntu 11.10 - 13.04 und Kubuntu ... - 14.04<a class="headerlink" href="#Ubuntu-11-10-13-04-und-Kubuntu-14-04">¶</a></h3><p>
Um diese Sperre zu umgehen, muss man mit Root-Rechten <sup><a href="#source-1">[1]</a></sup> die Datei <strong>/etc/polkit-1/localauthority/50-local.d/com.ubuntu.enable-hibernate.pkla</strong> anlegen, mit einen Editor (wieder mit Root-Rechten) öffnen <sup><a href="#source-2">[2]</a></sup> und den nachfolgenden Inhalt einfügen:</p><pre class="notranslate"># This file is intended to overwrite default entries from
# /var/lib/polkit-1/localauthority/10-vendor.d/com.ubuntu.desktop.pkla

[Re-enable hibernate]
Identity=unix-user:*
Action=org.freedesktop.upower.hibernate
ResultActive=yes</pre><p>Danach startet man den Rechner neu. Nach dem Neustart sollte der Ruhezustand auswählbar sein – was nicht heißt, dass er auch funktionieren muss. In Kubuntu sollte im Kickoff-Menü unter "Verlassen" der Tiefschlaf-Button vorhanden sein. Bei dieser Methode wird standardmäßig die Swap-Partition als Speicher für das RAM-Abbild benutzt. Wenn dort nicht genug Platz ist, bricht der Vorgang ab und der Rechner wacht sofort wieder auf. Wenn man den Ruhezustand nutzen will, benötigt man für die Swap-Partition 5% mehr als der Arbeitsspeicher groß ist.</p></div><div class="section_2"><h3 id="Ab-Ubuntu-13-10-und-Kubuntu-14-10">Ab Ubuntu 13.10 und Kubuntu 14.10<a class="headerlink" href="#Ab-Ubuntu-13-10-und-Kubuntu-14-10">¶</a></h3><p>
Ab 13.10 wurde der indicator-session von <a class="internal" href="./devicekit.html">upower</a> auf logind umgestellt, deshalb muss man in <strong>/etc/polkit-1/localauthority/50-local.d/com.ubuntu.enable-hibernate.pkla</strong> folgendes eintragen:</p><pre class="notranslate"># This file is intended to overwrite default entries from
# /var/lib/polkit-1/localauthority/10-vendor.d/com.ubuntu.desktop.pkla

[Re-enable hibernate in upower]
Identity=unix-user:*
Action=org.freedesktop.upower.hibernate
ResultActive=yes

[Re-enable hibernate in logind]
Identity=unix-user:*
Action=org.freedesktop.login1.hibernate;org.freedesktop.login1.hibernate-multiple-sessions
ResultActive=yes</pre><p>
Damit die Option erscheint, muss man unter Umständen noch folgendes im Terminal eingeben:
</p><div class="bash"><div class="contents"><pre class="notranslate">killall indicator-session-service </pre></div></div></div><div class="section_2"><h3 id="Ab-Ubuntu-und-Kubuntu-16-04">Ab Ubuntu und Kubuntu 16.04<a class="headerlink" href="#Ab-Ubuntu-und-Kubuntu-16-04">¶</a></h3><p>
Es wurden weitere Aktionen nötig.</p><pre class="notranslate"># This file is intended to overwrite default entries from
# /var/lib/polkit-1/localauthority/10-vendor.d/com.ubuntu.desktop.pkla

[Re-enable hibernate in upower]
Identity=unix-user:*
Action=org.freedesktop.upower.hibernate
ResultActive=yes

[Re-enable hibernate in logind]
Identity=unix-user:*
Action=org.freedesktop.login1.hibernate;org.freedesktop.login1.handle-hibernate-key;org.freedesktop.login1;org.freedesktop.login1.hibernate-multiple-sessions;org.freedesktop.login1.hibernate-ignore-inhibit
ResultActive=yes</pre></div></div><div class="section_1"><h2 id="Einrichtung-von-SUSPEND-RESUME">Einrichtung von SUSPEND &amp; RESUME<a class="headerlink" href="#Einrichtung-von-SUSPEND-RESUME">¶</a></h2><p>
</p><ul><li><p>Woher weiß der Kernel, wohin der Inhalt des RAMs bei STD geschrieben werden sollte?</p></li><li><p>Woher weiß der Kernel, woher der Inhalt gelesen werden sollte, der beim RESUME in den RAM geschrieben werden sollte?</p></li><li><p>Wie richte ich SUSPEND &amp; RESUME ein?</p></li><li><p>Was tun, wenn SUSPEND und/oder RESUME nicht mehr funktionieren?</p></li></ul><p>
Die Antworten auf diese Fragen, <a class="crosslink post" href="https://forum.ubuntuusers.de/post/8850067/">bis auf die erste</a>, findet man unter <a class="internal" href="./pm-utils.html">pm-utils</a>. Für den Fall, dass SUSPEND &amp; RESUME über Kernelfunktionen nicht wie gewünscht erfolgen und aus diesem Grund auf Userspace-Programme ausgewichen werden muss, macht man bei <a class="internal" href="./uswsusp.html">uswsusp</a> weiter.</p></div><div class="section_1"><h2 id="Problembehebung">Problembehebung<a class="headerlink" href="#Problembehebung">¶</a></h2><p>
Damit die ACPI-Energiesparmodi funktionieren, müssen alle Hardwarebauteile und deren Treiber ACPI-konform und ACPI-fähig sein, sonst funktionieren manche oder gar alle Schlafmodi nicht. Denkbare Ursache hierfür sind schlechte Treiber bzw. fehlerhafte BIOS-Implementierungen oder (oft ältere) Hardware, deren Energiesparmodi nur über ein (gepatchtes) BIOS korrekt umgeschaltet werden können (kein entsprechender Patch im Linux-Kernel).</p><p>So kann es zum Beispiel passieren, dass S1 auf Anhieb klappt, S3 aber nicht funktionieren will. Infolgedessen läuft immer der Netzteillüfter weiter (weil das Netzteil eingeschaltet bleibt). Je nach BIOS bleibt manchmal sogar der CPU-Lüfter aktiv. Manchmal kommt es stattdessen vor, dass das System zwar in den STR-Modus S3 wechselt, das Wiederaufwachen aber nicht funktioniert (der Bildschirm bliebt dunkel). An dieser Stelle muss man sich entscheiden, was man tun will:</p><ol class="arabic"><li><p>Sofern der Computer noch ein BIOS besitzt, den Linux-Kernel anweisen, BIOS-Funktionen zu nutzen (siehe <a class="crosslink" href="#ACPI-Kernelparameter">ACPI-Kernelparameter</a>)</p></li><li><p>Die <a class="internal" href="./pm-utils.html">pm-utils</a> nutzen, um die Energiesparmodi zu aktivieren. Dabei können folgende Maßnahmen helfen:</p><ul><li><p>Module vor SUSPEND entladen und beim RESUME neu laden</p></li><li><p>Dienste vor SUSPEND beenden und beim RESUME neu starten</p></li><li><p>Variablen in den entsprechenden Konfigurationsdateien setzen</p></li><li><p>Proprietäre Treiber deaktivieren/deinstallieren</p></li><li><p>Kontrollieren, ob die Ursache eine fehlerhafte BIOS-Implementierung sein kann</p></li></ul></li><li><p>Statt Kernelfunktionen Userspace-Programme nutzen, z.B. <a class="internal" href="./uswsusp.html">uswsusp</a></p></li><li><p>Alternativen wie z.B. TuxOnIce nutzen <a class="interwiki interwiki-ubuntu_doc" href="https://help.ubuntu.com/community/PowerManagement/Hibernate">community/PowerManagement/Hibernate</a></p></li></ol><p>
Aus Sicherheitsgründen ist S4 nicht verfügbar, wenn Secure Boot aktiv ist. Secure Boot muss daher abgeschaltet werden, damit dieser Modus vom Kernel angeboten wird.</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="./powertop.html">PowerTOP</a> - Energieverbrauch analysieren</p></li><li><p><a class="external" href="http://acpi.info/" rel="nofollow">ACPI Specification</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/></p></li><li><p><a class="interwiki interwiki-ubuntu_doc" href="https://help.ubuntu.com/12.04/ubuntu-help/power-hibernate.html">How do I hibernate my computer?</a></p></li><li><p><a class="interwiki interwiki-ubuntu_doc" href="https://help.ubuntu.com/14.04/ubuntu-help/power-hibernate.html">How do I hibernate my computer?</a></p></li><li><p><a class="interwiki interwiki-askubuntu" href="http://askubuntu.com/questions/94754">How to modify policykit to allow hibernation in upower?</a></p></li><li><p><a class="interwiki interwiki-ubuntu_doc" href="https://help.ubuntu.com/16.04/ubuntu-help/power-hibernate.html">How do I hibernate my computer?</a></p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./energiesparmodi_mit_acpi/a/revision/941509.html">Diese Revision</a> wurde am 20. Mai 2017 17:38 von <a href="https://ubuntuusers.de/user/UlfZibis/">UlfZibis</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./energiesparmodi_mit_acpi.html">Energiesparmodi mit ACPI</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>