<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>SANE-Scanserver_im_Netzwerk › ubuntuusers statisches Wiki</title>
<link href="./_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="./_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="./_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="./_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="./_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="./_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="./startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="./sane-scanserver_im_netzwerk.html">SANE-Scanserver im Netzwerk</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/SANE-Scanserver_im_Netzwerk">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="./wiki/index.html">Index</a></li>
<li><a href="./wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="./wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="./wiki.html">Übersicht</a></li>
<li><a href="./wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="./wiki/benutzung.html">Benutzung</a></li>
<li><a href="./kategorien.html">Kategorie</a></li>
<li><a href="./wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="./wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="./howto.html">Howto anlegen</a></li>
<li><a href="./wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="./wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="./baustelle.html">Baustellen</a></li>
<li><a href="./wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="./wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="./wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="./wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="./sane-scanserver_im_netzwerk/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="./sane-scanserver_im_netzwerk/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="./sane-scanserver_im_netzwerk/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="./sane-scanserver_im_netzwerk/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="./sane-scanserver_im_netzwerk/a/backlinks.html">SANE-Scanserver im Netzwerk</a></h1>
<div id="page"><p>
</p><div class="box tested_for"><h3 class="box tested_for">Dieser Artikel wurde für die folgenden
Ubuntu-Versionen getestet:</h3><div class="contents"><p>
</p><ul><li><p><a class="internal" href="./xenial_xerus.html">Ubuntu 16.04</a> Xenial Xerus</p></li><li><p><a class="internal" href="./trusty_tahr.html">Ubuntu 14.04</a> Trusty Tahr</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="./pakete_installieren.html">Installation von Programmen</a> </p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="./terminal.html">Ein Terminal öffnen</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="./sudo.html">Root-Rechte</a></p></li><li><p><a class="crosslink anchor" href="#source-4" id="source-4"></a> <a class="internal" href="./editor.html">Einen Texteditor öffnen</a> </p></li><li><p><a class="crosslink anchor" href="#source-5" id="source-5"></a> <a class="internal" href="./benutzer_und_gruppen.html">Umgang mit Benutzer und Gruppen</a> </p></li><li><p><a class="crosslink anchor" href="#source-6" id="source-6"></a> <a class="internal" href="./rechte.html">Rechte von Dateien ändern</a> </p></li></ol></div></div><div class="toc toc-depth-3"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Voraussetzungen">Voraussetzungen
</a></li><li><a class="crosslink" href="#Konfiguration-des-Servers">Konfiguration des Servers
</a><ol class="arabic"><li><a class="crosslink" href="#Fruehere-Ubuntu-Versionen">Frühere Ubuntu-Versionen
</a><ol class="arabic"><li><a class="crosslink" href="#saned-beim-Systemstart-starten">saned beim Systemstart starten
</a></li><li><a class="crosslink" href="#Neustart-saned">Neustart saned
</a></li></ol></li><li><a class="crosslink" href="#Rechte-fuer-USB-Scanner-anpassen">Rechte für USB-Scanner anpassen
</a></li><li><a class="crosslink" href="#Netzwerkzugriff-fuer-Clients-freigeben">Netzwerkzugriff für Clients freigeben
</a></li></ol></li><li><a class="crosslink" href="#Konfiguration-des-Client">Konfiguration des Client
</a></li><li><a class="crosslink" href="#Testen">Testen
</a><ol class="arabic"><li><a class="crosslink" href="#Im-Terminal">Im Terminal
</a></li><li><a class="crosslink" href="#In-der-grafischen-Oberflaeche">In der grafischen Oberfläche
</a></li></ol></li><li><a class="crosslink" href="#Zugriff-ueber-SaneTwain-von-Windows-Clients-aus">Zugriff über SaneTwain von Windows-Clients...</a><ol class="arabic"><li><a class="crosslink" href="#XSane-fuer-Windows">XSane für Windows
</a></li><li><a class="crosslink" href="#Alternativen-zu-XSane-und-SaneTwain">Alternativen zu XSane und SaneTwain
</a></li><li><a class="crosslink" href="#SANE-Scanner-via-Android">SANE-Scanner via Android
</a></li></ol></li><li><a class="crosslink" href="#Problemloesungen">Problemlösungen
</a><ol class="arabic"><li><a class="crosslink" href="#Benutzer-in-saned-Gruppe-aufnehmen">Benutzer in saned-Gruppe aufnehmen
</a></li><li><a class="crosslink" href="#Portfreigabe-im-Netzwerk">Portfreigabe im Netzwerk
</a></li><li><a class="crosslink" href="#SANE-Netzwerkbackend-aktivieren">SANE-Netzwerkbackend aktivieren
</a></li></ol></li><li><a class="crosslink" href="#Sicherheitsaspekte">Sicherheitsaspekte
</a><ol class="arabic"><li><a class="crosslink" href="#Firewall">Firewall
</a></li><li><a class="crosslink" href="#Passwortschutz">Passwortschutz
</a></li><li><a class="crosslink" href="#TCP-Wrapper">TCP-Wrapper
</a></li></ol></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>
<img alt="SANE/sane.png" class="image-left" src="./_/29b0b1fe26fca3eb04867790ff41115f141d2748.png"/>
<img alt="./Saned_Konzept_Client-Server.png" class="image-right" src="./_/7b135a7bfa3e70851a2bc3b2d9a23d61e2f594f9.png"/> 
Das besondere an <a class="internal" href="./sane.html">SANE</a> ist, dass es einen Dienst zur Verfügung stellt, welcher so konfiguriert werden kann, dass ein am Server angeschlossener Scanner (oder mehrere) im Netzwerk für andere Rechner transparent zur Verfügung steht. Dieses Programm heißt <code class="notranslate">saned</code> (<em>sane</em> <em>d</em>aemon). Alle Funktionen des Scanners sind verwendbar, als wäre das Gerät direkt am Client angeschlossen. So ist zum Beispiel im Büro der zentrale Scanner auf allen vernetzten Rechnern und den mittels <a class="internal" href="./wlan.html">WLAN</a> angebunden Notebooks verfügbar; auch über Virtuelle Maschinen lassen sich Scanner so verwenden. Die Konfiguration eines solchen Servers ist eigentlich nicht schwer - man darf nur die Übersicht über die verschiedenen Konfigurationsdateien nicht verlieren, deren Fülle letztendlich einen Tribut an die Sicherheit des Betriebs im Netzwerk darstellen.</p><div class="section_1"><h2 id="Voraussetzungen">Voraussetzungen<a class="headerlink" href="#Voraussetzungen">¶</a></h2><p>
Die Grundvoraussetzungen zum Betrieb eines Scanservers ist natürlich ein funktionierender Scanner, der direkt am Scanserver angeschlossen ist. Alles dazu ist in Ubuntu vorinstalliert und muss nicht konfiguriert werden. Dies wird u.a. im Artikel <a class="internal" href="./scanner.html">Scanner</a> beschrieben.</p><p>Es muss weiterhin folgendes Paket installiert <sup><a href="#source-1">[1]</a></sup> werden, welches den Scandaemon <code class="notranslate">saned</code> und das Terminalprogramm <sup><a href="#source-2">[2]</a></sup> <code class="notranslate">scanimage</code> enthält:</p><ul><li><p><strong>sane-utils </strong></p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="./_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="./apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install sane-utils  </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install sane-utils  </pre></div></div><p>
</p></div></div></div><div class="section_1"><h2 id="Konfiguration-des-Servers">Konfiguration des Servers<a class="headerlink" href="#Konfiguration-des-Servers">¶</a></h2><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Alle Konfigurationsdateien auf dem Server und auch den Clients müssen mit administrativen Rechten<sup><a href="#source-3">[3]</a></sup> editiert werden. 
</p></div></div><p>Seit <a class="internal" href="./xenial.html">Ubuntu 16.04</a> gilt folgende Vorgehensweise, da <a class="internal" href="./systemd.html">systemd</a> verwendet wird. Gestartet wird saned nicht über <strong>/etc/default/saned</strong> sondern über zwei Dateien in <strong>/lib/systemd/system</strong>, <strong>saned.socket</strong> und <strong>saned@service</strong>. Der Socket lauscht dabei ständig am sane-port 6566 auf eingehende Requests, um <span class="underline">nur im Bedarfsfall</span> den Daemon zu starten. Ein manuelles Starten ist nicht mehr möglich, ein Versuch führt zu Fehlermeldungen, ist aber auch nicht nötig.</p><p>Mit</p><div class="bash"><div class="contents"><pre class="notranslate">sudo systemctl status saned.socket  </pre></div></div><p>kann die Funktion des Sockets überprüft werden, die Ausgabe sieht in etwa so aus:</p><pre class="notranslate">● saned.socket - saned incoming socket
   Loaded: loaded (/lib/systemd/system/saned.socket; enabled; vendor preset: enabled)
   Active: active (listening) since Mi 2016-05-25 16:46:07 CEST; 2h 17min ago
   Listen: [::]:6566 (Stream)
 Accepted: 0; Connected: 0

Mai 25 16:46:07 rechenername systemd[1]: Listening on saned incoming socket.</pre><p>Falls der Socket nach dem Rechnerstart nicht aktiv sein sollte, hilft der Befehl</p><div class="bash"><div class="contents"><pre class="notranslate">sudo systemctl start saned.socket </pre></div></div><p>Um <code class="notranslate">saned.socket</code> gleich ab Systemstart laufen zu lassen, muss einmalig</p><div class="bash"><div class="contents"><pre class="notranslate">sudo systemctl enable saned.socket </pre></div></div><p>
ausgeführt werden. Damit wird ein <a class="internal" href="./ln.html#Symbolische-Verknuepfungen">Symlink</a> <strong>/etc/systemd/system/sockets.target.wants/saned.socket</strong> auf <strong>/lib/systemd/system/saned.socket</strong> gelegt. Wenn der automatische Start von <code class="notranslate">saned.socket</code> nicht mehr benötigt wird, kann das mit <code class="notranslate">sudo systemctl disable saned.socket</code> wieder abgestellt werden.</p><p>Sobald ein Programm den Dienst anfordert (z.B. <a class="internal" href="./xsane.html">XSane</a>, oder <code class="notranslate">scanimage</code>), wird <code class="notranslate">saned</code> gestartet, aber sobald es nicht mehr benötigt wird, auch wieder beendet.</p><p>Bei z.B. laufendem XSane sieht eine Ausgabe von</p><div class="bash"><div class="contents"><pre class="notranslate">sudo systemctl status saned@*.service  </pre></div></div><p>(das <strong>*</strong> ist wichtig!) in etwa so aus:</p><pre class="notranslate">● saned@0-192.168.xxx.xx:6566-192.168.xxx.xx:38046.service - Scanner Service (192.168.xxx.xx:38046)
   Loaded: loaded (/lib/systemd/system/saned@.service; indirect; vendor preset: enabled)
   Active: active (running) since Mi 2016-05-25 18:47:01 CEST; 6min ago
 Main PID: 2181 (saned)
   CGroup: /system.slice/system-saned.slice/saned@0-192.168.xxx.xx:6566-192.168.xxx.xx:38046.service
           └─2181 /usr/sbin/saned

Mai 25 18:47:01 rechnername systemd[1]: Started Scanner Service (192.168.xxx.xx:38046).
Mai 25 18:47:01 rechnername saned[2181]: saned (AF-indep+IPv6+systemd) from sane-backends 1.0.25git starting up
Mai 25 18:47:01 rechnername saned[2181]: check_host: access by remote host: ::ffff:192.168.xxx.xx
Mai 25 18:47:01 rechnername saned[2181]: init: access granted to saned-user@::ffff:192.168.xxx.xx</pre><p>(Mehr Einzelheiten im <a class="crosslink post" href="https://forum.ubuntuusers.de/post/8291983/">Forum</a>.)</p><div class="section_2"><h3 id="Fruehere-Ubuntu-Versionen">Frühere Ubuntu-Versionen<a class="headerlink" href="#Fruehere-Ubuntu-Versionen">¶</a></h3><p>
</p><div class="section_3"><h4 id="saned-beim-Systemstart-starten">saned beim Systemstart starten<a class="headerlink" href="#saned-beim-Systemstart-starten">¶</a></h4><p>
Der Netzwerk-Daemon <code class="notranslate">saned</code> wird standardmäßig nicht beim Hochfahren des Rechners gestartet. Dazu muss in einem Editor<sup><a href="#source-4">[4]</a></sup> mit Root-Rechten in der Datei <strong>/etc/default/saned</strong> auf allen verwendeten Rechnern der Eintrag</p><pre class="notranslate"># Set to yes to start saned
RUN=no</pre><p>zu</p><pre class="notranslate"># Set to yes to start saned
RUN=yes</pre><p>geändert werden. Auch ein <a class="crosslink" href="#Neustart-saned">Neustart</a> hilft nicht, wenn die Datei nicht abgeändert wird. Dieser Schritt ist für 16.04 nicht notwendig.</p></div><div class="section_3"><h4 id="Neustart-saned">Neustart saned<a class="headerlink" href="#Neustart-saned">¶</a></h4><p>
Nach Änderungen an der Konfiguration muss der <code class="notranslate">saned</code>-Daemon im Terminal <sup><a href="#source-2">[2]</a></sup> auf dem Server und dem Client mit folgendem Befehl neu gestartet werden:</p><div class="bash"><div class="contents"><pre class="notranslate">sudo service saned restart </pre></div></div></div></div><div class="section_2"><h3 id="Rechte-fuer-USB-Scanner-anpassen">Rechte für USB-Scanner anpassen<a class="headerlink" href="#Rechte-fuer-USB-Scanner-anpassen">¶</a></h3><p>
Bei USB-Scannern müssen ggf. auf dem Server die Zugriffsrechte für USB-Geräte in der Datei <strong>/lib/udev/rules.d/50-udev-default.rules</strong> in einem Editor mit Root-Rechten <sup><a href="#source-3">[3]</a></sup> von</p><pre class="notranslate"># libusb device nodes
SUBSYSTEM=="usb", ENV{DEVTYPE}=="usb_device", MODE="0664"</pre><p>in</p><pre class="notranslate"># libusb device nodes
SUBSYSTEM=="usb", ENV{DEVTYPE}=="usb_device", MODE="0666" </pre><p> geändert werden.</p><p>Achtung, diese Änderung kann bei einem Systemupdate überschrieben werden und muss ggf. neu gemacht werden.</p><p>Alternativ ist es auch möglich, den Benutzer<sup><a href="#source-5">[5]</a></sup> <code class="notranslate">saned</code> in die Gruppen <code class="notranslate">plugdev</code> und <code class="notranslate">scanner</code> aufzunehmen. Damit erhält dieser Benutzer Schreibrechte auf den Scanner. Für einige Multifunktionsgeräte kann es notwendig sein, <code class="notranslate">saned</code> ebenfalls in die Gruppe <code class="notranslate">lp</code> aufzunehmen.</p></div><div class="section_2"><h3 id="Netzwerkzugriff-fuer-Clients-freigeben">Netzwerkzugriff für Clients freigeben<a class="headerlink" href="#Netzwerkzugriff-fuer-Clients-freigeben">¶</a></h3><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Häufige Fehlerquelle - die Rechner, die den Scanner auf dem Server verwenden wollen, müssen explizit freigegeben werden. 
</p></div></div><p>In der Datei <strong>/etc/sane.d/saned.conf</strong> werden mit einem Texteditor die Hostnamen eingetragen, die auf den Scanserver zugreifen dürfen.</p><p>Einträge können zum Beispiel sein</p><pre class="notranslate">192.168.0.5          # IP-Adresse für einen einzelnen Rechner
rechner1.zuhause     # Alias Name für einen einzelnen Rechner
192.168.0.0/24       # Alle Rechner mit Adressen 192.168.0.1 bis 192.168.0.254</pre><p>Man sollte in jedem Fall die Verwendung des Scandienstes auf bekannte Rechner/Netze einschränken und <span class="underline">niemals</span>, wie teilweise zu lesen mit "+" global freigeben.</p></div></div><div class="section_1"><h2 id="Konfiguration-des-Client">Konfiguration des Client<a class="headerlink" href="#Konfiguration-des-Client">¶</a></h2><p>
In der Datei <strong>/etc/sane.d/net.conf</strong> wird mit einem Texteditor die Netzwerkadresse desjenigen Rechners eingetragen, an dem der Scanner angeschlossen ist. Es können auch mehrere Scanserver angegeben werden.</p><pre class="notranslate">192.168.0.5           # IP-Adresse für einen einzelnen Rechner
meinserver1.zuhause   # Aliasname
einzweitersever.firma # Aliasname</pre><p>SANE sucht dann auf all diesen Rechnern nach Scannern, was jedoch zu Wartezeiten auf dem Clientrechner führen kann. Hier sollte man also keine Netzwerkadressen für ganze Netzwerke (z.B. <code class="notranslate">192.168.0.0/24</code>) angeben, sondern nur einzelne Rechner. In der Regel erfolgt die Erkennung dann innerhalb weniger Sekunden.</p><p>Ist der Rechner - oder gar mehrere - nicht erreichbar, so kann dies zu sehr langen Wartezeiten führen. Mit dem folgenden Eintrag in die <strong>/etc/sane.d/net.conf</strong> kann die Wartezeit auf z.B. 10 Sekunden pro Server festgelegt werden:</p><pre class="notranslate">connect_timeout = 10</pre><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Konfiguriert man die Clientdateien auch auf dem Scanserver selbst, so erhält man <span class="underline">zwei</span> Scanner auf diesem Rechner. Einen, welcher direkt über das für den jeweiligen Scanner verwendete SANE-Backend (z.B. <code class="notranslate">epson</code>) auf den Scanner zugreift und einen, welcher über das lokale Netzwerk des Rechners zur Verfügung gestellt wird (SANE-Backend <code class="notranslate">net:SERVER:...</code>). Das kann für bestimmte Programme nötig sein, z.B. für <a class="internal" href="./swingsane.html">SwingSane</a>.
</p></div></div></div><div class="section_1"><h2 id="Testen">Testen<a class="headerlink" href="#Testen">¶</a></h2><p>
</p><div class="section_2"><h3 id="Im-Terminal">Im Terminal<a class="headerlink" href="#Im-Terminal">¶</a></h3><p>
Zum Testen in einem Terminal <sup><a href="#source-2">[2]</a></sup> verwendet man <code class="notranslate">scanimage -L</code>, hier ein Beispiel mit einem Epson-Scanner.</p><div class="bash"><div class="contents"><pre class="notranslate">scanimage -L </pre></div></div><p>ergibt am Scanserver folgende Ausgabe:</p><pre class="notranslate">device `epson:/dev/sg2' is a Epson Perfection1200 flatbed scanner</pre><p>und am Client:</p><pre class="notranslate">device `net:server:epson:/dev/sg2' is a Epson Perfection1200 flatbed scanner</pre><p>Um bei mehreren Geräten einen erkannten Scanner für den Test - oder auch für den Aufruf einer speziellen Anwendung wie <code class="notranslate">scanimage</code> - festzulegen, kann man global die <a class="internal" href="./umgebungsvariable.html">Umgebungsvariable</a> <code class="notranslate">SANE_DEFAULT_DEVICE</code> setzen oder einem Befehl voranstellen.</p><pre class="notranslate">SANE_DEFAULT_DEVICE='net:server:epson:/dev/sg2'</pre></div><div class="section_2"><h3 id="In-der-grafischen-Oberflaeche">In der grafischen Oberfläche<a class="headerlink" href="#In-der-grafischen-Oberflaeche">¶</a></h3><p>
Zum Testen in der grafischen Oberfläche verwendet man ein beliebiges <a class="internal" href="./scanner/software.html">Scanprogramm</a>.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Bei der Verwendung des <a class="crosslink" href="#Passwortschutz">Passwortschutzes</a> des <code class="notranslate">saned</code> muss bekannt sein, ob das jeweilige Programm diese Funktion unterstützt (bei dem Programm <a class="internal" href="./xsane.html">XSane</a> ist dies z.B. der Fall, mit <a class="internal" href="./gscan2pdf.html">gscan2pdf</a> gibt es damit Probleme). 
</p></div></div><p><img alt="./sanetwain-main.png" class="image-right" src="./_/5b88ac05a2939e1718f0d706ac983db314fa37f9.png"/>
</p></div></div><div class="section_1"><h2 id="Zugriff-ueber-SaneTwain-von-Windows-Clients-aus">Zugriff über SaneTwain von Windows-Clients aus<a class="headerlink" href="#Zugriff-ueber-SaneTwain-von-Windows-Clients-aus">¶</a></h2><p>
Der Zugriff funktioniert auch über Windows-Rechner (getestet mit Windows 7 (64-bit) und XP (32-bit)); dazu kann das Programm <a class="external" href="http://sanetwain.ozuzo.net/" rel="nofollow">SaneTwain</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> verwendet werden. Auf dem Ubuntu-Server muss ggf. der eigene Benutzer in der Gruppe <code class="notranslate">saned</code> aufgenommen werden <sup><a href="#source-5">[5]</a></sup>, damit der Zugriff dauerhaft erfolgen kann.</p><p>Im SaneTwain-Einstellungsdialog, der beim ersten Programmstart erscheint, muss die IP-Adresse des Servers angegeben werden, dann kann auf den/die angeschlossenen Scanner zurückgegriffen werden; ggf. auch der Benutzername des derzeit am Server angemeldeten Benutzers. Der Funktionsumfang der Software ist mit einfacheren SANE-Programmen vergleichbar, reicht aber nicht an <a class="internal" href="./xsane.html">XSane</a> heran. Hier gilt außerdem, wie bei allen SANE-Programmen, dass der Funktionsumfang stark von Möglichkeiten der verwendeten Hardware abhängig ist. Nähere Einzelheiten zur Konfiguration und Benutzung findet man auf der Projektseite.</p><p>Für Mac-Clients sollte der Zugriff über das Programm <a class="external" href="http://www.ellert.se/twain-sane/" rel="nofollow">Twain-Sane</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> erfolgen können (nicht getestet!).</p><div class="section_2"><h3 id="XSane-fuer-Windows">XSane für Windows<a class="headerlink" href="#XSane-fuer-Windows">¶</a></h3><p>
Es existiert auch eine Windows-Version von <a class="internal" href="./xsane.html">XSane</a>, die den gesamten Umfang der Linux-Version zur Verfügung stellt (OCR ausgenommen). Die Verlinkung auf der XSane-Projektseite ist nicht mehr aktuell, auf Oliver Reichs Seite ist die <strong>zip</strong>-Datei gar nicht mehr greifbar. Man kann sie aber über <a class="external" href="ftp://ftp2.sane-project.org/pub/sane/old-ftp.sane-project.org/xsane/" rel="nofollow">XSane for Windows</a> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/> beziehen. Das Zip-Archiv muss entpackt und nach <strong>c:\sane</strong> verschoben werden, nach Anpassung der <strong>net.conf</strong>-Datei in <strong>c:\sane\etc\sane.d\ </strong> (Angabe der IP des Servers) kann XSane über Ausführen von <strong>c:\sane\bin\xsane.exe</strong> gestartet werden. Details zum Programm selbst in <a class="internal" href="./xsane.html">XSane</a>.</p></div><div class="section_2"><h3 id="Alternativen-zu-XSane-und-SaneTwain">Alternativen zu XSane und SaneTwain<a class="headerlink" href="#Alternativen-zu-XSane-und-SaneTwain">¶</a></h3><p>
Da XSane für Windows schon sehr veraltet ist und die Unterstützung von SaneTwain für Windows in der 64-bit-Version nicht gewährleistet werden kann, hier noch eine Alternative. Die Software heißt SaneWinDS und funktioniert auch unter Windows 8.1 mit 64 bit <a class="external" href="http://sourceforge.net/projects/sanewinds/" rel="nofollow">SaneWinDS, Download bei Sourceforge</a> <img alt="{dl}" src="./_/8e630211d0f5f5cb7c6424055f9c9aa15a420fab.png"/>. Es können die Tasten am Scanner genutzt werden, um einen neuen Scanvorgang auszulösen und kontinuierlich in ein PDF-File zu speichern.</p><p>Eine weitere Alternative ist <a class="internal" href="./swingsane.html">SwingSane</a>, mit dem SANE-Netzwerk-Scanner unter Linux, Windows und OS2 verwendet werden können.</p></div><div class="section_2"><h3 id="SANE-Scanner-via-Android">SANE-Scanner via Android<a class="headerlink" href="#SANE-Scanner-via-Android">¶</a></h3><p>
Mit <a class="external" href="https://play.google.com/store/apps/details?id=com.sane.droid&amp;hl=de" rel="nofollow">SANEDroid</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> kann auch über Android-Handys und Tablets auf SANE-Netzwerkscanner zugegriffen werden. Das Programm stellt einfache Scan-Funktionen zur Verfügung, kann aber nicht mit einem passwortgeschützen <code class="notranslate">saned</code> verwendet werden.</p></div></div><div class="section_1"><h2 id="Problemloesungen">Problemlösungen<a class="headerlink" href="#Problemloesungen">¶</a></h2><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Wenn ein Scanprogramm vom Server oder einem der Clienten aus auf den Scanner zugreift, wird er normalerweise von anderen Rechnern solange nicht gefunden, bis das jeweilige Programm beendet ist!
</p></div></div><div class="section_2"><h3 id="Benutzer-in-saned-Gruppe-aufnehmen">Benutzer in saned-Gruppe aufnehmen<a class="headerlink" href="#Benutzer-in-saned-Gruppe-aufnehmen">¶</a></h3><p>
Ggf. ist es allgemein nötig, den aktuellen Benutzer auf dem Server mit in die <a class="internal" href="./benutzer_und_gruppen.html">Gruppe</a> <code class="notranslate">saned</code> aufzunehmen, damit der Zugriff von den Clienten auf den Scanner möglich ist. Ggf. ist es trotz Aufnahme auch nötig, in <strong>/etc/default/saned</strong> (s.o.) den Eintrag <code class="notranslate">RUN_AS_USER=saned</code> in <code class="notranslate">RUN_AS_USER=BENUTZENAME</code> umzuwandeln.</p></div><div class="section_2"><h3 id="Portfreigabe-im-Netzwerk">Portfreigabe im Netzwerk<a class="headerlink" href="#Portfreigabe-im-Netzwerk">¶</a></h3><p>
Bei aktuellen Ubuntu-Versionen ist die Freigabe standardmäßig aktiviert, ggf. auf dem Server die Datei <strong>/etc/services</strong> überprüfen. Es muss folgender Eintrag vorhanden sein, ansonsten nachtragen:</p><pre class="notranslate">sane-port       6566/tcp        sane saned      # SANE network scanner daemon</pre><p>Wie viele andere Netzwerkdienste ist <code class="notranslate">saned</code> hier einer speziellen Netzwerk-Portnummer (<code class="notranslate">6566</code>) zugeordnet, wodurch er über das <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/TCP">TCP</a>-Netzwerkprotokoll angesprochen werden kann. Aus Sicherheitsgründen ist der <code class="notranslate">saned</code>-Daemon über die <code class="notranslate">saned</code>-Gruppe abgesichert. Damit ist das Protokoll, welches SANE benutzt, auch im Netzwerk ansprechbar.</p><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Neben dem Port <code class="notranslate">6566</code> verwendet der Scandaemon <code class="notranslate">saned</code> einen weiteren Datenport, welcher vom jeweiligen Betriebssystem festgelegt wird - nachzulesen in der <a class="internal" href="./man.html">Manpage</a> von <code class="notranslate">saned</code>. Deswegen müssen ggf. bei älteren Ubuntuversionen alle Ports auf dem Server größer 1024 für einkommende Datenverbindungen von Clients freigeschaltet werden. Bei der Verwendung z.B. von <a class="external" href="http://www.simonzone.com/software/guarddog/" rel="nofollow">guarddog</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> als Firewall für Ubuntu hat die benutzerdefinierte Freigabe des Port 6566 völlig zur einwandfreien Funktion ausgereicht; in einem <a class="internal" href="./fritzbox.html">FritzBox</a>-Netzwerk ist keine Freigabe erforderlich.
</p></div></div></div><div class="section_2"><h3 id="SANE-Netzwerkbackend-aktivieren">SANE-Netzwerkbackend aktivieren<a class="headerlink" href="#SANE-Netzwerkbackend-aktivieren">¶</a></h3><p>
In aktuellen Ubuntu-Versionen ist der Netzwerktreiber schon aktiviert. Ggf. die Datei <strong>/etc/sane.d/dll.conf</strong> überprüfen, die bestimmt, welche SANE-Backends aktiv sind. Das für das Netzwerk zuständige Backend heißt <code class="notranslate">net</code> und bewirkt, dass nach Netzscannern gesucht wird. In der Datei <strong>/etc/sane.d/dll.conf</strong> muss also die Zeile</p><pre class="notranslate">net</pre><p>eingetragen und <span class="underline">nicht</span> mit einem "#" am Anfang auskommentiert sein.</p><div class="box experts"><h3 class="box experts">Experten-Info:</h3><div class="contents"><p>Gelegentlich wird das Gerät nicht mehr unter der ursprünglichen Geräteadresse - z.B. <strong>/dev/sg2</strong> - gefunden. Dies kann passieren, wenn das Gerät z.B. vom SCSI- oder USB-Bus getrennt und neu angeschlossen wurde, und dann unter einer anderen Geräteadresse geführt wird, z.B. <strong>/dev/sg3</strong>. Kommt dies öfter vor, so empfiehlt es sich, eine <a class="internal" href="./udev.html">udev</a>-Regel anzulegen, welche auch beim "Reconnect" eine eindeutige Gerätedatei erzeugt (z.B. <strong>/dev/epson1250</strong> für einen Epson Scanner). Der Artikel <a class="internal" href="./udev.html">udev</a> erklärt die Vorgehensweise ausführlich. 
</p></div></div><p>Wird der Scanner auch dann nicht gefunden, so geht man folgendermaßen vor:</p><ol class="arabic"><li><p>Prüfen, ob der Scanner am Scanserver funktioniert (siehe <a class="crosslink" href="#Testen">Testen</a>). Es kann auch sinnvoll sein, verschiedene Benutzer zu testen, ob sie auf dem Scanserver auch den Scanner sehen können. So sollte man den Test zuerst mit <code class="notranslate">root</code> machen danach mit einem anderen Benutzer.</p></li><li><p>Netzwerkverbindung prüfen. </p><ul><li><p>Steckverbindungen o.k.? </p></li><li><p>Firewall aktiv und Port 6566 nicht freigegeben? Zum Beispiel in einem Terminal <sup><a href="#source-2">[2]</a></sup> den Server vom Client aus an <code class="notranslate">ping</code>en oder mit <code class="notranslate">telnet</code> die Verbindung zum Port 6566 prüfen</p><div class="bash"><div class="contents"><pre class="notranslate">ping IPdesScanServers </pre></div></div><div class="bash"><div class="contents"><pre class="notranslate">telnet IPdesScanServers 6566 </pre></div></div></li></ul></li><li><p>Wurde nach dem Editieren der Konfigurationsdateien der <code class="notranslate">saned</code> gestartet bzw. neu gestartet (nicht unter 16.04)? </p></li><li><p>Anleitung von <a class="crosslink" href="#Voraussetzungen">vorne</a> nochmal Punkt für Punkt durchgehen.</p></li></ol><p>
Weiterführende Hinweise findet man in den <a class="crosslink" href="#Links">Links</a> auf der Seite über den "SANE Network Daemon".</p></div></div><div class="section_1"><h2 id="Sicherheitsaspekte">Sicherheitsaspekte<a class="headerlink" href="#Sicherheitsaspekte">¶</a></h2><p>
</p><div class="section_2"><h3 id="Firewall">Firewall<a class="headerlink" href="#Firewall">¶</a></h3><p>
Zur generellen Empfehlung, wie beim Einsatz einer <a class="internal" href="./personal_firewalls.html">Firewall</a> vorzugehen ist, wurde schon <a class="crosslink" href="#Portfreigabe-im-Netzwerk">weiter oben</a> hingewiesen. Es muss der Port <code class="notranslate">6566</code> geöffnet sein.</p></div><div class="section_2"><h3 id="Passwortschutz">Passwortschutz<a class="headerlink" href="#Passwortschutz">¶</a></h3><p>
Den Scandaemon <code class="notranslate">saned</code> auf dem Server kann man seit der SANE-Version 1.0.4 für einzelne Benutzer und Scanner passwortgeschützt betreiben. Dies gilt für Zugriffe mit dem Programmen <code class="notranslate">scanimage</code> und <a class="internal" href="./xsane.html">XSane</a>, andere <a class="internal" href="./scanner/software.html">Scanprogramme</a> sollten erst auf die Zusammenarbeit mit dieser Funktionalität hin getestet werden.</p><p>Dazu muss die Konfigurationsdatei <strong>/etc/sane.d/saned.users</strong> erstellt werden. In dieser kann zeilenweise einem Benutzer ein Passwort zugeordnet werden. Das Passwort kann 127 Zeichen lang sein (kein <code class="notranslate">\r</code>, <code class="notranslate">\n</code>, <code class="notranslate">\000</code> erlaubt). Hier am Beispiel eines Epson-Scanners und des Benutzers <code class="notranslate">joe</code>.</p><pre class="notranslate"># /etc/sane.d/saned.users
# benutzername:password:backend
joe:mein*sicheres+passwort:epson</pre><p>Damit Benutzer das Passwort nicht immer wieder eintippen müssen, können sie in ihrem Heimatverzeichnis in einem versteckten Unterverzeichnis <strong>.sane</strong> in der Datei <strong>pass</strong> das Passwort speichern. Dazu muss sowohl der Benutzername, als auch die genaue Bezeichnung des zu verwendenden Scanners angegeben werden. Letzteres erfährt man über die Eingabe von <code class="notranslate">scanimage -L</code> in einem Terminal <sup><a href="#source-2">[2]</a></sup> auf dem Client.</p><pre class="notranslate"># ~/.sane/pass
# benutzername:password:ressource
joe:mein*sicheres+passwort:net:server:epson:/dev/sg2</pre><p>Wichtig: Damit diese Datei nicht von anderen gelesen werden kann, sollte man die Rechte<sup><a href="#source-6">[6]</a></sup> zum Lesen und Schreiben der Datei <strong>pass</strong> unbedingt auf den eigenen Benutzer beschränken, z.B. in einem Terminal <sup><a href="#source-2">[2]</a></sup>:</p><div class="bash"><div class="contents"><pre class="notranslate">chmod 0600 ~/.sane/pass </pre></div></div><p>Um serverseitige Attacken zu verhindern, sollte das Programm <code class="notranslate">scanimage</code> in Zusammenhang mit der Verwendung des Passwortschutz mit dem Parameter <code class="notranslate">--accept-md5-only</code> aufgerufen werden. Für andere Programme sind keine ähnlichen Vorgehensweisen bekannt. Ebenso ist es klug, für den Scannerzugriff ein anderes als das reguläre Benutzerpasswort zu verwenden!</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Der weitere Punkt setzt profundes Wissen voraus oder zumindest eine eingehende Beschäftigung mit dem Thema. Er ist für die als getestet angegebenen Ubuntu-Version nicht getestet!
</p></div></div></div><div class="section_2"><h3 id="TCP-Wrapper">TCP-Wrapper<a class="headerlink" href="#TCP-Wrapper">¶</a></h3><p>
Der Betrieb eines Rechners, welcher auch mit dem Internet verbunden ist birgt immer die Gefahr eines Angriffs in sich. Da der Internet-Superserver <code class="notranslate">inetd</code> viele Dienste zur Verfügung stellt, macht er das System dementsprechend anfällig für Attacken. Es sei deshalb auf die Möglichkeit der Verwendung eines <a class="internal" href="./inetd.html">TCP-Wrappers</a> verwiesen. <code class="notranslate">saned</code> lässt sich aber in aktuellen Ubuntuversionen ganz ohne Internet-Superserver betreiben, in 16.04 ist die Verwendung von <a class="internal" href="./systemd.html">systemd</a> Standard.</p></div></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="./scanner.html">Scanner</a> und <a class="internal" href="./scanner/software.html">Software</a> - Installation von Scannern und Scannersoftware</p></li><li><p><a class="external" href="http://mein.homelinux.com/wiki/sane" rel="nofollow">Artikel Einrichtung von saned</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/>, geht auch auf ältere Versionen und Verwendung von <a class="internal" href="./xinetd.html">xinetd</a>/<a class="internal" href="./inetd.html">inetd</a> ein</p></li><li><p><a class="external" href="http://www.xsane.org/ct/sane-ct-21-99-190.html" rel="nofollow">Artikel der Zeitschrift CT aus dem Jahr 1999</a> <img alt="{de}" src="./_/ffd333e1d59794eac31aea8b3e984e1b88473c33.png"/> - Älterer, aber grundsätzlich wertvoller und stimmiger Artikel zum Thema </p></li><li><p><a class="interwiki interwiki-ubuntu_doc" href="https://help.ubuntu.com/community/ScanningHowTo">Scanning HowTo</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Ubuntu Community Documentation </p></li><li><p><a class="external" href="http://www.sane-project.org/" rel="nofollow">SANE Homepage</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Links aus der <code class="notranslate">saned</code>-Manpage</p></li><li><p><a class="external" href="http://penguin-breeder.org/sane/saned/" rel="nofollow">SANE Network Daemon</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - für Fortgeschrittene, gute Hinweise zum Absichern des saned (Passwortschutz) und zum Troubleshooting </p></li><li><p><a class="external" href="http://sanetwain.ozuzo.net/" rel="nofollow">SaneTwain</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Windows-Client für SANE-Server</p></li><li><p><a class="external" href="http://www.ellert.se/twain-sane/" rel="nofollow">Twain-Sane</a> <img alt="{en}" src="./_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> - Mac-Client für SANE-Server</p></li><li><p><a class="internal" href="./swingsane.html">swingsane</a> - Java-Programm zur Nutzung von SANE-Netzwerkscannern</p></li></ul><p>
</p></div></div>
<p class="meta">
<a href="./sane-scanserver_im_netzwerk/a/revision/944285.html">Diese Revision</a> wurde am 19. Oktober 2017 07:01 von <a href="https://ubuntuusers.de/user/w-sky/">w-sky</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="./startseite.html">Wiki</a></li>
<li><a href="./sane-scanserver_im_netzwerk.html">SANE-Scanserver im Netzwerk</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="./_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="./_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="./_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="./_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>