<!DOCTYPE html>
<html lang="">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Ubuntu_Touch/Sicherung_und_Wiederherstellung › ubuntuusers statisches Wiki</title>
<link href="../_/34e5d78db234405457773cc26741aada99f7fff2.css" rel="stylesheet" type="text/css"/>
<link href="../_/61af784fc5c93e296fec3be63b8e0bb48443727c.css" rel="stylesheet" type="text/css"/>
<link href="../_/634e8d1015b02df998cdec7cb07c5aff61d068b5.css" rel="stylesheet" type="text/css"/>
<link href="../_/b583ff7e37147497a59224ccf54cfee812a1d21b.css" rel="stylesheet" type="text/css"/>
<link href="../_/a0d5775ed6f36f8cc5b12bcf2f1c1bd98a3eb225.css" rel="stylesheet" type="text/css"/>
<link href="../_/98de73bded109a634cbd1e924abdd8c8964b8df2.css" media="print" rel="stylesheet" type="text/css"/>

<meta content="#a87300" name="theme-color"/>

</head>
<body>
<div class="wrap">
<div class="header">
<h1><a href="http://ubuntuusers.de/"><span>ubuntuusers.de</span></a></h1>
<ul class="tabbar">
<li class="portal">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ubuntuusers.de/">Portal<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="forum">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://forum.ubuntuusers.de/">Forum<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="wiki active">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/">Wiki<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="ikhaya">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://ikhaya.ubuntuusers.de/">Ikhaya<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="planet">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://planet.ubuntuusers.de/">Planet<span></span></a></div>
<div class="tab_right"></div>
</li>
<li class="community">
<div class="tab_left"></div>
<div class="tab_center"><a href="http://wiki.ubuntuusers.de/Mitmachen">Mitmachen<span></span></a></div>
<div class="tab_right"></div>
</li>
</ul>
</div>
<div class="body">
<div class="appheader">

<div class="pagetitle">
<h1 class="breadcrumb_title">
<a class="separator" href="../startseite.html">
              Wiki
            </a>
</h1>
<h2 class="breadcrumb_subtitle"><a href="../ubuntu_touch/sicherung_und_wiederherstellung.html">Sicherung und Wiederherstellung</a></h2>
</div>
</div><div class="message staticwikinote"><strong>Hinweis:</strong> Dies ist ein statischer Snapshot unseres Wikis vom Jan. 17, 2018 und kann daher nicht bearbeitet werden. Der aktuelle Artikel ist unter <a href="http://wiki.ubuntuusers.de/Ubuntu_Touch/Sicherung_und_Wiederherstellung">wiki.ubuntuusers.de</a> zu finden.</div>

<!--[if lt IE 8]>
      <div class="message fail">Bitte installiere den Internet Explorer 8 oder neuer.</div>
      <![endif]-->
<div class="page_content">
<div class="navi_sidebar navigation">
<div class="container">
<h3 class="navi_wiki">Wiki</h3>
<ul>
<li><a href="../wiki/index.html">Index</a></li>
<li><a href="../wiki/recentchanges.html">Letzte Änderungen</a></li>
<li><a href="../wiki/neue_artikel.html">Liste neuer Artikel</a></li>
<li><a href="../wiki.html">Übersicht</a></li>
<li><a href="../wiki/faq_-_häufig_gestellte_fragen.html">FAQ</a></li>
<li><a href="../wiki/benutzung.html">Benutzung</a></li>
<li><a href="../kategorien.html">Kategorie</a></li>
<li><a href="../wiki/tagcloud.html">Wortwolke</a></li>
</ul>
<h3 class="navi_join">Mitmachen</h3>
<ul>
<li><a href="../wikiartikel_anlegen.html">Wikiartikel anlegen</a></li>
<li><a href="../howto.html">Howto anlegen</a></li>
<li><a href="../wiki/referenz.html">Wiki-Referenz</a></li>
<li><a href="../wiki/syntax.html">Wiki-Syntax</a></li>
<li><a href="../baustelle.html">Baustellen</a></li>
<li><a href="../wiki/artikelideen.html">Artikelideen</a></li>
<li><a href="../wiki/ungetestet.html">Ungetestete Artikel</a></li>
<li><a href="../wiki/vorlagen/ausbaufähig/a/backlinks.html">Ausbaufähige Artikel</a></li>
<li><a href="../wiki/vorlagen/fehlerhaft/a/backlinks.html">Fehlerhafte Artikel</a></li>
<li><a href="https://forum.ubuntuusers.de/forum/wiki/">Rund ums Wiki</a></li>
</ul>
<h3 class="navi_config">Konfiguration</h3>
<ul>
<li><a href="../ubuntu_touch/sicherung_und_wiederherstellung/a/backlinks.html">Backlinks anzeigen</a></li>
<li>
        Exportieren
        <ul>
<li><a href="../ubuntu_touch/sicherung_und_wiederherstellung/a/export/meta.html" rel="nofollow">Metadaten</a></li>
<li><a href="../ubuntu_touch/sicherung_und_wiederherstellung/a/export/raw.html" rel="nofollow">Rohformat</a></li>
<li><a href="../ubuntu_touch/sicherung_und_wiederherstellung/a/export/html.html" rel="nofollow">HTML</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="content content_tabbar content_sidebar">
<h1 class="pagetitle"><a href="../ubuntu_touch/sicherung_und_wiederherstellung/a/backlinks.html">Sicherung und Wiederherstellung</a></h1>
<div id="page"><p>
</p><div class="box ut_box"><h3 class="box ut_box">Dieser Artikel bezieht sich auf Ubuntu Touch, die Variante von Ubuntu für mobile Geräte mit Touchscreen.</h3><div class="contents"><p> 
Getestet wurde der Artikel für folgende Version(en):
</p><ul><li><p><a class="internal" href="../vivid_vervet.html">Ubuntu Touch 15.04</a> Vivid Vervet</p></li></ul></div></div><p>
</p><div class="box knowledge"><h3 class="box knowledge">Zum Verständnis dieses Artikels sind folgende Seiten hilfreich:</h3><div class="contents"><p>
</p><ol class="arabic"><li><p><a class="crosslink anchor" href="#source-1" id="source-1"></a> <a class="internal" href="../ubuntu_touch/notfall.html">Notfall</a></p></li><li><p><a class="crosslink anchor" href="#source-2" id="source-2"></a> <a class="internal" href="../ubuntu_touch/terminal.html">Terminal Zugang zu Ubuntu Touch</a></p></li><li><p><a class="crosslink anchor" href="#source-3" id="source-3"></a> <a class="internal" href="../sudo.html">Root-Rechte</a></p></li></ol></div></div><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Für jegliche Veränderungen an Ubuntu Touch ist der Besitzer selbst verantwortlich. Weder die Artikelautoren noch <strong>ubuntuusers.de</strong> haften, falls Probleme auftreten oder das benutzte Gerät im schlimmsten Fall nie mehr gestartet werden kann. Tiefe Systemeingriffe können dazu führen, dass Ubuntu Touch durch einen sogenannten Flashvorgang neu aufgespielt werden muss.</p><p>Unter bestimmten Umständen könnte auch dies unmöglich werden - das Gerät und damit auch die Daten sind dann unwiederbringlich zerstört. Schwere Systemeingriffe wie Schreibzugriff auf das System sind inoffiziell, können beispielsweise im Fall der Nutzung von <a class="internal" href="../ubuntu_touch/terminal.html#Programme-installieren">apt-get</a> schnell zu Problemen führen und sind allgemein häufig von Garantieleistungen der Gerätehersteller/ Shops ausgenommen.
</p></div></div><div class="toc toc-depth-1"><div class="head">Inhaltsverzeichnis</div><ol class="arabic"><li><a class="crosslink" href="#Sicherungsmechanismen">Sicherungsmechanismen
</a></li><li><a class="crosslink" href="#Systemsicherung">Systemsicherung
</a></li><li><a class="crosslink" href="#Bootmenue">Bootmenü
</a></li><li><a class="crosslink" href="#Wiederherstellung">Wiederherstellung
</a></li><li><a class="crosslink" href="#Flashen">Flashen
</a></li><li><a class="crosslink" href="#Datenrettung">Datenrettung
</a></li><li><a class="crosslink" href="#Links">Links
</a></li></ol></div><p>
<img alt="Wiki/Icons/ubuntutouch.png" class="image-left" src="../_/896e87c6d41b50714b185b334659a72748ba0ae4.png"/>
Jeder, der mit datenverarbeitenden Systemen arbeitet, sollte sich mit dem Thema <a class="internal" href="../datensicherung.html">Datensicherung</a> auseinandersetzen. Es ist noch keine App zur einfachen Datensicherung bekannt, im Notfall<sup><a href="#source-1">[1]</a></sup> wäre diese wahrscheinlich auch nicht zugänglich. Daher muss man sich mit den Sicherungsmechanismen vertraut machen.</p><div class="section_1"><h2 id="Sicherungsmechanismen">Sicherungsmechanismen<a class="headerlink" href="#Sicherungsmechanismen">¶</a></h2><p>
</p><div class="section_2"><h3 id="Hintergruende">Hintergründe<a class="headerlink" href="#Hintergruende">¶</a></h3><p>
Sicherungsmechanismen stellen sicher, dass man im Notfall nach Möglichkeit noch Zugang zu seinem Gerät hat, um weitere Maßnahmen wie Reparatur, Neuinstallation oder Wiederherstellung einer Sicherung des Systems oder von Daten oder gar eine Datenrettung einleiten zu können. Es gibt mehrere Sicherungsmechanismen, wenn einmal etwas schiefgehen sollte:</p><p>Fastboot, den Recovery Modus sowie die ADB-Shell. Diese werden im Abschnitt <a class="crosslink" href="#Bootmenue">Bootmenü</a> kurz beschrieben. Der <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Bootloader">Bootloader</a>, Fastboot, der Recovery Modus sowie das System - und nebenbei auch Cache sowie Daten - liegen jeweils auf eigenen Partitionen, die man nicht manuell verändern sollte, weil das das Gerät unwiederbringlich zerstören kann und dann auch die Sicherungsmechanismen beschädigt werden könnten.
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Es ist nicht möglich, ein Gerät mit defekter Partitionstabelle bzw. <a class="internal" href="../partitionierung.html">Partitionierung</a> noch zu starten, wenn keiner der Sicherungsmechanismen mehr ansprechbar ist. Auch eine Neuinstallation oder Wiederherstellung ist im Gegensatz zu einem PC bei einem Smartphone oder Tablet dann nicht mehr möglich.
</p></div></div><p>
Wenn  das System nicht mehr startfähig und auch die ADB-Shell (sowie SSH) nicht mehr zugänglich ist, bleibt einem nur noch der Recovery Modus sowie Fastboot. Im Recovery Modus kann man allerdings sein System nur auf den Werkszustand zurücksetzen.
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Bei diesem Vorgang werden alle Daten gelöscht. Änderungen an einer beschreibbar gemachten Systempartition können auf diesem Wege nicht wiederhergestellt werden.
</p></div></div><p>
Der Recovery Modus bietet zwar eine ADB-Shell an, diese ist jedoch derzeit nicht aktiviert. Fastboot bietet die Möglichkeit, einen neuen Recovery Modus mit aktivierter ADB-Shell zu installieren. Von dort aus kann man ein funktionierendes neues Systemimage online flashen. Aufgrund ungeklärter Umstände ist diese ADB-Shell leider auch nicht immer erreichbar.</p><p>Eine Übersicht über alle Partitionen liefert die folgende Ausgabe am Ubuntu Touch Terminal <sup><a href="#source-2">[2]</a></sup>. Dazu sind Root-Rechte <sup><a href="#source-3">[3]</a></sup> erforderlich.
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo blkid </pre></div></div><p>
Es macht nicht unbedingt Sinn, jede Partition bzw. deren Inhalt zu sichern, es schadet jedoch sicher nicht. Die wichtigsten wie <strong>boot</strong>, <strong>recovery</strong> sowie <strong>system</strong> sollten jedoch gesichert werden bzw. aus Originaldateien wiederherstellbar sein. <strong>userdata</strong> mit den persönlichen Daten ist separat und regelmäßig zu sichern.</p></div><div class="section_2"><h3 id="Konsequenzen">Konsequenzen<a class="headerlink" href="#Konsequenzen">¶</a></h3><p>
Aus diesen vielfältigen Möglichkeiten ergeben sich folgende Konsequenzen:</p><p>Man muss sich klarmachen
</p><ul><li><p>was man sichert</p></li><li><p>wie man sichert</p></li><li><p>wann und wo man noch sichern oder wiederherstellen kann und wo/ wann nicht (mehr).</p></li></ul><p>
Im Grunde gibt es dabei folgende Dinge zu beachten:
</p><ul><li><p>Falls das Gerät nicht mehr bootet und das Zurücksetzen der eigenen Dateien nicht mehr reicht, muss man mit Fastboot ein neues System <a class="crosslink" href="#Flashen">aufspielen</a>, wobei man dafür für Fastboot geeignete Image-Dateien herunterladen muss. Alternativ kann man damit ein <a class="crosslink" href="#Alternatives-Recovery">alternatives Recovery</a> einspielen, welches die ADB-Shell beherrscht, um damit das neue System aufspielen zu lassen. Der Vorteil beider Varianten ist: Man muss seine Homepartition mit seinen persönlichen Daten und Einstellungen nicht löschen lassen, sofern die Störung des Startvorgangs nicht damit in Verbindung steht, sondern z.B. nur mit einer misslungenen Aktualisierung.</p></li><li><p>Wenn man es einfacher haben will, kann man diesen Vorgang mit Fastboot durch das <a class="internal" href="../ubuntu_touch/flash_tool.html">flash_tool</a> grafisch durchführen lassen, allerdings verliert man dabei sämtliche persönlichen Daten und Einstellungen.</p></li><li><p>Persönliche Daten und Einstellungen sind also stets separat zu sichern, um jederzeit Zugriff auf sie zu haben und sie notfalls ebenfalls wiederherstellen zu können. Dies muss durch andere geeignete Verfahren wie <a class="crosslink" href="#Komplett-ueber-WLAN-mit-rsync">rsync</a> erfolgen. Die externe Speicherkarte dagegen lässt sich schneller <a class="crosslink" href="#Dateien-ueber-USB-im-Dateimanager">mit einem Dateimanager</a> sichern.</p></li></ul><p>
</p></div></div><div class="section_1"><h2 id="Systemsicherung">Systemsicherung<a class="headerlink" href="#Systemsicherung">¶</a></h2><p>
Am einfachsten ist dafür das Programm <a class="internal" href="../ubuntu_touch/flash_tool.html">flash_tool</a> geeignet - es beherrscht allerdings nur das Wiederherstellen des Werkszustandes bzw. das Installieren vorgefertigter Imagedateien von den Entwicklern, jedoch keine direkte Systemsicherung ansich. Jedoch ist es auch am unflexibelsten, z.B. wird damit bei der Wiederherstellung unweigerlich die <a class="internal" href="../homeverzeichnis.html">Homepartition</a> mit den persönlichen Daten und Einstellungen gelöscht.</p><div class="section_2"><h3 id="Regelmaessige-Datensicherung">Regelmäßige Datensicherung<a class="headerlink" href="#Regelmaessige-Datensicherung">¶</a></h3><p>
</p><div class="section_3"><h4 id="Grundlagen">Grundlagen<a class="headerlink" href="#Grundlagen">¶</a></h4><p>
Für eine <a class="internal" href="../datensicherung.html">Datensicherung</a> ist es nicht nötig, die standardmäßig schreibgeschützte Systempartition mitzusichern. Stattdessen achtet man darauf, die <a class="internal" href="../homeverzeichnis.html">Homepartition</a> sowie die <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/SD-Karte#miniSD">miniSD</a> (SD-Karte) zu sichern. Während man keinen PC zur Verfügung hat, bietet es sich auch an, wichtige Inhalte auf die SD-Karte zu kopieren, denn so hat man zwei Kopien und sollte das System aus irgendeinem Grund zurückgesetzt werden müssen, kann man die SD-Karte problemlos an einem anderen Lesegerät oder nach einer nötigen Reparatur am Ubuntu Touch Gerät erneut auslesen bzw. weiterbenutzen.</p></div><div class="section_3"><h4 id="Ergaenzende-Moeglichkeiten">Ergänzende Möglichkeiten<a class="headerlink" href="#Ergaenzende-Moeglichkeiten">¶</a></h4><p>
Beispielsweise kann man auch innerhalb der App Kamera durch Wischen nach oben bei <em>"SD"</em> <em>"Auf SD-Karte speichern"</em> einstellen. Bislang nutzen jedoch wenige Apps eine solche Funktion. Sie lässt sich allerdings in manchen Fällen wie bei umfangreichem Navigations-Kartenmaterial manuell durch einen <a class="internal" href="../symlink.html">Symlink</a> auf die SD-Karte nachrüsten. Das alleinige Speichern auf SD-Karte ist jedoch keine Kopie und somit nicht mal ein halbherziges Backup. Es sichert die ausgewählten Daten jedoch besser bei Systemausfällen ab.</p></div><div class="section_3"><h4 id="Dateien-ueber-USB-im-Dateimanager">Dateien über USB im Dateimanager<a class="headerlink" href="#Dateien-ueber-USB-im-Dateimanager">¶</a></h4><p>
Am einfachsten und schnellsten kann eine Datensicherung <a class="internal" href="../ubuntu_touch/terminal.html#USB-Kabel">über USB-Kabel</a> stattfinden, wofür bei weniger aktuellen Ubuntu-Versionen ggf. erst die Erkennung des Gerätes entsprechend <a class="internal" href="../ubuntu_touch/terminal.html#Kein-Geraet-gefunden">nachgerüstet</a> werden muss. Danach kann man die Dateien wie von USB-Sticks gewohnt in einem <a class="internal" href="../dateimanager.html">Dateimanager</a> kopieren. Der Nachteil dieser Methode ist, dass man damit nur die vorgegebenen Ordner der Homepartition sowie der SD-Karte sichern kann, also beispielsweise nicht die <a class="internal" href="../versteckte_dateien.html">versteckten Dateien</a> im Homeverzeichnis, welche jedoch alle Apps, Einstellungen sowie Daten wie etwa eingegangene Emails enthalten. Daher sollte man diese Daten ergänzend sichern.</p><p>Eventuell kann man dazu mit Hilfe von <a class="internal" href="../dd.html#Image-einer-Partition-sichern">dd</a> bestimmte <a class="internal" href="../mount.html">aushängbare</a> oder wenig beschriebene Partitionen komplett <a class="crosslink" href="#Datenrettung">als Image sichern</a> und wiederherstellen. Dies würde jedoch ziemlich lange dauern, unflexibel und in vielen Fällen nicht robust sein. Als Alternative bietet sich daher <a class="internal" href="../rsync.html">rsync</a> über <a class="internal" href="../ssh.html">SSH</a> mit folgendem Vorgehen an:</p></div><div class="section_3"><h4 id="Komplett-ueber-WLAN-mit-rsync">Komplett über WLAN mit rsync<a class="headerlink" href="#Komplett-ueber-WLAN-mit-rsync">¶</a></h4><p>
Man richtet im Ubuntu Touch <a class="internal" href="../ubuntu_touch/terminal.html#SSH">SSH</a> ein. Danach kann man rsync so einrichten, dass das gesamte System mit <a class="internal" href="../sudo.html">Root</a>-Rechten gesichert werden kann: <a class="internal" href="../rsync.html#Gesamtes-System-mit-root-Rechten">Gesamtes System mit root Rechten</a>. Da dies bei Ubuntu Phone jedoch extrem langsam ist und die Systempartition sowieso schreibgeschützt, sollte man damit trotzdem nur die Homepartition sichern. Dies ist auch ausreichend, da die Apps in der Homepartition enthalten sind.</p><p>Es bietet sich an, möglichst auch für die Sicherung der Homepartition die Root-Rechte entsprechend einzurichten, um auch die Dateien zu sichern, die ausnahmsweise für Root reserviert sind und sich sonst nicht sichern lassen.</p><p>Um die im Artikel beschriebene Änderung der Datei <strong>/etc/sudoers</strong> vornehmen zu können, muss zunächst das System zumindest für diese eine Änderung kurzzeitig <a class="internal" href="../ubuntu_touch/terminal.html#Systempartition-beschreibbar-machen">beschreibbar gemacht</a> werden. Anschließend kann der rsync-Befehl aus dem Wiki folgendermaßen angepasst werden:</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>rsync muss zuvor unbedingt wie eben beschrieben sowie detailliert verlinkt eingerichtet worden sein!
</p></div></div><div class="bash"><div class="contents"><pre class="notranslate">rsync --rsync-path="sudo rsync" --delete --stats -PSHAXhavxze ssh --exclude='/media/*/**' --link-dest=~/ut-backup-alt phablet@10.42.0.35:/home/phablet ~/ut-backup-neu </pre></div></div><p>
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Durch die Option <code class="notranslate">--exclude='/media/*/**'</code> wird die SD-Karte von der Datensicherung ausgenommen, da auch dies über rsync an den derzeitig verfügbaren Ubuntu Touch Geräten viel zu langsam wäre und bereits bei wenigen GB mehrere Tage dauern würde. Es ist auch nicht unbedingt nötig, da rsync vor allem den Zweck hat, auch andere als die Standardordner und somit auch versteckte Ordner und Dateien zu sichern, welche auf der SD-Karte zunächst gar nicht vorkommen und weniger Relevanz haben. Alternativ bzw. ergänzend kann man externe Datenträger auch mit der Option <code class="notranslate">-x</code> ausschließen.
</p></div></div><p>
Dabei ist zu beachten, dass der Ordner <strong>~/ut-backup-alt</strong> zunächst leer sein kann. Beim nächsten Sichern sollte man dort jedoch den Ordner der alten Sicherung angeben, denn dann wird damit verglichen und so werden nur die geänderten bzw. neuen Dateien gesichert. Das spart viel Zeit und Speicherplatz.
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p><code class="notranslate">10.42.0.35</code> ist die Standard-IP bei der Einrichtung eines <a class="internal" href="../howto/hotspot_auf_pc_einrichten.html">WLAN-Hotspots an einem Ubuntu-PC</a> und muss ggf. angepasst werden.
</p></div></div><div class="section_4"><h5 id="Einfachere-Variante-ohne-Root-Rechte">Einfachere Variante ohne Root-Rechte<a class="headerlink" href="#Einfachere-Variante-ohne-Root-Rechte">¶</a></h5><p>
Möchte man dagegen mit einer einfacheren Variante ohne Root-Rechte sichern, bietet sich folgender Befehl an:
</p><div class="bash"><div class="contents"><pre class="notranslate">rsync --delete --stats -PSHAXhavxz --exclude='/media/*/**' --link-dest=~/ut-backup-alt phablet@10.42.0.35:/home/phablet ~/ut-backup-neu </pre></div></div><p>
Damit können manche Dateien möglicherweise nicht kopiert werden.</p></div></div></div></div><div class="section_1"><h2 id="Bootmenue">Bootmenü<a class="headerlink" href="#Bootmenue">¶</a></h2><p>
Das Bootmenü kann erreicht werden, wie bis 3. unter <a class="internal" href="../ubuntu_touch/notfall.html#Zuruecksetzen">Ubuntu Touch/Notfall</a> für das Zurücksetzen beschrieben. Dort bieten sich die Optionen <em>"Recovery Mode"</em>, <em>"Fastboot Mode"</em> sowie <em>"Normal Mode"</em>.</p><div class="section_2"><h3 id="Fastboot-Mode">Fastboot Mode<a class="headerlink" href="#Fastboot-Mode">¶</a></h3><p>
Der Fastboot Modus ist dazu da, um im Notfall noch neue Systemimagedateien aufspielen zu können. Man erreicht ihn über das <a class="internal" href="../ubuntu_touch/notfall.html#Zuruecksetzen">Bootmenü</a> oder über die <a class="internal" href="../ubuntu_touch/terminal.html#USB-Kabel">ADB-Shell</a> mit dem Kommando
</p><div class="bash"><div class="contents"><pre class="notranslate">fastboot </pre></div></div><p>
aus dem Paket <strong>android-tools-fastboot</strong>, welches man am besten über die <strong>phablet-tools</strong> mit installiert:
</p><ul><li><p><strong>phablet-tools</strong> (Befehle für Ubuntu Touch Geräte)</p></li></ul><p><img alt="Wiki/Vorlagen/Installbutton/button.png" class="image-default" src="../_/fd60ccb86c4d96df2f4518df2936cc7d038467aa.png"/>
mit <a class="internal" href="../apturl.html">apturl</a>
</p><div class="package-list"><div class="contents"><p>
Paketliste zum Kopieren:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo apt-get install phablet-tools </pre></div></div><p>
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo aptitude install phablet-tools </pre></div></div><p>
</p></div></div><p>
Die Bedienung wird im Abschnitt <a class="crosslink" href="#Systemwiederherstellung">Systemwiederherstellung</a> beschrieben.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Den Fastboot Modus ohne Aufruf aus einer Shell, direkt über das Bootmenü, kann man nur verlassen, indem man ein USB-Kabel an einem PC sowie dem Ubuntu Touch Gerät ansteckt oder den <a class="internal" href="../ubuntu_touch/notfall.html#Not-Aus">Not-Aus</a> betätigt.
</p></div></div></div><div class="section_2"><h3 id="Recovery-Mode">Recovery Mode<a class="headerlink" href="#Recovery-Mode">¶</a></h3><p>
Den Recovery Modus erreicht man über das <a class="crosslink" href="#Bootmenü">Bootmenü</a> oder über die <a class="internal" href="../ubuntu_touch/terminal.html#USB-Kabel">ADB-Shell</a> mit dem Kommando
</p><div class="bash"><div class="contents"><pre class="notranslate">adb reboot recovery </pre></div></div><p>
Sobald man das Ubuntu-Logo sieht, muss man die Taste 
<span class="key">Vol+</span>  Vol+ drücken, um in das dahinterliegende Menü zu gelangen. Dieses bietet folgende Möglichkeiten <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>:
</p><ul><li><p><em>"reboot system now"</em> - System jetzt neustarten</p></li><li><p><em>"wipe data/factory reset"</em> - Daten löschen/ Werkszustand wiederherstellen (Reset)</p></li><li><p><em>"wipe cache partition"</em> - Cache Partition löschen</p></li></ul><p>Mit der Taste 
<span class="key">Vol-</span>  Vol- kann man einen der Menüpunkte ansteuern und mit der <img alt="Power" class="image-default" src="../_/d9b3ebc24978cf6000fc9d54013e723ae06f63f1.png"/> Power-Taste auswählen, wie dort im Menü auch nochmal erklärt <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/> wird. Am Wichtigsten ist der Werkszustand, aber auch das Löschen der Cache Partition kann manche Probleme lösen, z.B. bestimmte Speicherplatzprobleme bei Aktualisierungen.</p></div><div class="section_2"><h3 id="Normal-Mode">Normal Mode<a class="headerlink" href="#Normal-Mode">¶</a></h3><p>
Mit dem Menüpunkt <em>"Normal Mode"</em> kann man das Gerät wieder starten, im normalen Modus, wo man das Gerät mit seinen Apps benutzt.</p></div></div><div class="section_1"><h2 id="Wiederherstellung">Wiederherstellung<a class="headerlink" href="#Wiederherstellung">¶</a></h2><p>
Je nachdem, was und wie gesichert wurde bzw. welche Originaldateien in Form von Images vorhanden sind, kann auch die Wiederherstellung erfolgen.</p><div class="section_2"><h3 id="Systemwiederherstellung">Systemwiederherstellung<a class="headerlink" href="#Systemwiederherstellung">¶</a></h3><p>
Dafür benötigt man Dateien, die für eine Wiederherstellung mit Fastboot geeignet sind. Diese bekommt man beispielsweise in etwas älteren Versionen in den Ordnern des <a class="internal" href="../ubuntu_touch/flash_tool.html">flash_tools</a>, welche aber auch fast tagesaktuell auf <img alt="{*}" src="../_/37868c2b60e9556f3ed2fca9185705260fd214a9.png"/> <a class="external" href="http://cdimage.ubuntu.com/ubuntu-touch/vivid/daily-preinstalled/current" rel="nofollow">cdimage.ubuntu.com</a> zu finden sind. Besonders bietet sich aber in vielen Fällen das Flashen der <a class="crosslink" href="#Alternatives-Recovery">alternativen Recovery</a> für weitere Reparaturen mit der ADB-Shell an. Abweichend davon würde diese Datei nun in diesem Abschnitt mit <code class="notranslate">fastboot</code> anstatt mit <code class="notranslate">ubuntu-device-flash</code> geflasht werden, was auch funktioniert, wenn man im Notfall durch einen schwerwiegenden Systemfehler keine ADB-Shell mehr zur Verfügung hat.</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Diese Dateien sind in einem speziellen Format für Fastboot gepackt. Es sind keine Images im herkömmlichen Sinne, welche man mit etwa <a class="internal" href="../dd.html">dd</a> erstellen könnte.
</p></div></div><p>In Fastboot booten und anschließend am PC folgenden Befehl ausführen, um zum Beispiel die Systempartition wiederherzustellen:
</p><div class="bash"><div class="contents"><pre class="notranslate">fastboot flash system SYSTEMDATEI.img </pre></div></div><p>
Es lassen sich auch weitere Partitionen wiederherstellen, jedoch sollte man nach Möglichkeit zuvor überprüfen, ob das Wiederherstellen des vorherigen Vorgangs geklappt hat, damit man sich nicht versehentlich durch falsches Vorgehen auch noch die Boot- und Recovery-Partition zerstört und dann gar nicht mehr booten bzw. nicht mal mehr den Recovery Modus aufrufen kann.
</p><div class="bash"><div class="contents"><pre class="notranslate">fastboot flash boot BOOTDATEI.img
fastboot flash recovery RECOVERYDATEI.img </pre></div></div><p>
Anschließend kann man den Fastboot Mode durch
</p><div class="bash"><div class="contents"><pre class="notranslate">fastboot reboot  </pre></div></div><p>
verlassen. Will man danach wieder in das Bootmenü gelangen und funktioniert der Befehl
</p><div class="bash"><div class="contents"><pre class="notranslate">fastboot reboot-bootloader </pre></div></div><p>
nicht wie gewünscht, so kann man zum Verlassen des Fastboot Mode auch den <a class="internal" href="../ubuntu_touch/notfall.html#Not-Aus">Not-Aus</a> betätigen, um anschließend wieder manuell das <a class="crosslink" href="#Bootmenue">Bootmenü</a> aufzurufen.</p><p>Weitere Befehle und Optionen von <code class="notranslate">fastboot</code> befinden sich unter <img alt="{en}" src="../_/d5ecf89114b079f85d02099649c4ee617ffa34c7.png"/>
</p><div class="bash"><div class="contents"><pre class="notranslate">fastboot help  </pre></div></div></div><div class="section_2"><h3 id="Datenwiederherstellung">Datenwiederherstellung<a class="headerlink" href="#Datenwiederherstellung">¶</a></h3><p>
Zunächst stellt man das System wieder her bzw. auf seinen Ursprungszustand zurück, falls dies aufgrund Problemen nötig sein sollte - dies wurde in den vorherigen Abschnitten ausführlich beschrieben.</p><p>Daten dagegen, welche man mit rsync gesichert hatte, sichert man am besten ebenfalls mit rsync wieder zurück. Dazu wählt man die Daten aus und vertauscht im Befehl Quelle und Ziel. Beispiel:</p><p>Wenn man mit
</p><div class="bash"><div class="contents"><pre class="notranslate">rsync --rsync-path="sudo rsync" --delete --stats -PSHAXhavxze ssh --exclude='/media/*/**' --link-dest=~/ut-backup-alt phablet@10.42.0.35:/home/phablet ~/ut-backup-neu </pre></div></div><p>
aus obigem Beispiel gesichert hatte, stellt man mit
</p><div class="bash"><div class="contents"><pre class="notranslate">rsync --rsync-path="sudo rsync" --delete --stats -PSHAXhavxze ssh ~/ut-backup-neu/phablet phablet@10.42.0.35:/home </pre></div></div><p>
die Daten wieder her. Wichtig ist dabei, dass man genau darauf achtet, welche Ordner man angibt. Es darf sich hinter der Quelle <strong>phablet</strong> kein <em>"/"</em> befinden.</p><p>Daten, welche man per Dateimanager gesichert hatte, kann man entsprechend einfach auf dieselbe Weise zurückkopieren.</p></div></div><div class="section_1"><h2 id="Flashen">Flashen<a class="headerlink" href="#Flashen">¶</a></h2><p>
Mit <a class="interwiki interwiki-wikipedia" href="https://de.wikipedia.org/wiki/Flashen">Flashen</a> wird ein Vorgang bezeichnet, mit dem eine andere, meist neuere, Version von Ubuntu Touch installiert werden kann. In einem anderen Artikel wurde bereits die erstmalige <a class="internal" href="../ubuntu_touch/installation.html#Solo-Installation">Solo-Installation</a> beschrieben, welche sich jedoch in Details unterscheidet, die bei einer Wiederherstellung des Systems hinderlich sein können.</p><p>Besonders unter Ubuntu Touch ist es ratsam, einen der stabilen Kanäle zu benutzen. Flashen kann auch helfen, das System wieder in seinen Ursprungszustand zu versetzen.
</p><div class="box warning"><h3 class="box warning">Achtung!</h3><div class="contents"><p>Nicht  nutzen, ohne sich mit den <a class="crosslink" href="#Sicherungsmechanismen">Sicherungsmechanismen</a> zumindest grundlegend vertraut gemacht zu haben!  Eine <a class="crosslink" href="#Systemsicherung">Systemsicherung</a> vorher ist dringend empfohlen.
</p></div></div><p>Zunächst  muss  <a class="internal" href="../ubuntu_touch/installation.html#ubuntu-device-flash-installieren">ubuntu-device-flash installiert</a> und der <a class="internal" href="../ubuntu_touch/terminal.html#USB-Kabel">Terminal-Zugang mittels ADB</a> eingerichtet werden. Die ADB-Shell darf aber nicht gestartet werden, sondern wird vom folgenden Flash-Befehl nach dem  Download selbst gestartet. Darauf achten, dass der Bildschirm davor entsperrt wurde.</p><p>Etwas stabilere Entwicklerversion flashen:
</p><div class="bash"><div class="contents"><pre class="notranslate">ubuntu-device-flash -v touch --channel=ubuntu-touch/rc-proposed </pre></div></div><p>
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Die  Scopes <em>"Heute"</em> und <em>"Near-by"</em> sowie die Apps <em>"Here Maps"</em> sowie das Spiel <em>"Cut  the Rope"</em> fehlen beim strengstens nicht empfohlenen Entwickler-Channel <code class="notranslate">devel</code> möglicherweise und sind, bis auf letztere, auch noch nicht im  App Store nachinstallierbar, wobei letztere dann kostenpflichtig ist.
</p></div></div><p>
Zurück zur neuesten Werksversion 14.10 (Stand der Information vom Januar 2016):
</p><div class="bash"><div class="contents"><pre class="notranslate">ubuntu-device-flash -v touch --channel=ubuntu-touch/ubuntu-rtm/14.09-factory-proposed </pre></div></div><p>
Die Option <code class="notranslate">--bootstrap</code> aus der <a class="internal" href="../ubuntu_touch/installation.html#Solo-Installation">Solo-Installation</a> wurde hier bewusst weggelassen, denn sie würde das Homeverzeichnis mit allen Daten und Einstellungen löschen. Dies muss man abseits der Erstinstallation nur tun bzw. nachholen, wenn die Probleme durch eine falsche bzw. problembehaftete Konfiguration verursacht worden sind.
</p><div class="box notice"><h3 class="box notice">Hinweis:</h3><div class="contents"><p>Unter Ubuntu Phone ist derzeit Ubuntu 14.10 aktuell und wird weiterentwickelt, während <a class="internal" href="../14.10.html">14.10</a> als Desktop oder Server Version am PC bereits keine Aktualisierungen mehr erhält (Stand vom Januar 2016).
</p></div></div><div class="section_2"><h3 id="Alternatives-Vorgehen">Alternatives Vorgehen<a class="headerlink" href="#Alternatives-Vorgehen">¶</a></h3><p>
Sollte  dies scheitern, kann man den Flashvorgang auch direkt vom Gerät aus  durchführen, Voraussetzung dafür ist das bereits der <a class="internal" href="../ubuntu_touch/terminal.html#SSH">SSH-Zugang</a>  erfolgreich eingerichtet und das Paket <strong>phablet-tools</strong> installiert  wurde.</p><p>Das folgende Beispiel zeigt, wie man den Channel <code class="notranslate">rc-proposed</code> auf das Gerät Meizu MX4 spielt.</p><p>Zuerst wird mit der Phablet-Shell auf das Ubuntu Touch Gerät gewechselt:
</p><div class="bash"><div class="contents"><pre class="notranslate">phablet-shell </pre></div></div><p>
Nun wird der gewünschte Channel geflasht, wobei <a class="internal" href="../sudo.html">Root</a>-Rechte erforderlich sind:
</p><div class="bash"><div class="contents"><pre class="notranslate">sudo system-image-cli --switch ubuntu-touch/rc-proposed/meizu.en </pre></div></div></div><div class="section_2"><h3 id="Alternatives-Recovery">Alternatives Recovery<a class="headerlink" href="#Alternatives-Recovery">¶</a></h3><p>
Unter <a class="interwiki interwiki-askubuntu" href="http://askubuntu.com/questions/602035">how-do-i-use-ubuntu-device-flash-with-the-bq-aquaris-e4-5-and-aquaris-e5</a> befindet sich je ein alternatives Recovery Image für die beiden bq Geräte verlinkt, welche auch die <a class="internal" href="../ubuntu_touch/terminal.html#USB-Kabel">ADB-Shell</a> aktiviert haben. Dieses kann man herunterladen und in folgendem Befehl an der Stelle von <strong>recovery-krillin.img</strong> angeben.
</p><div class="bash"><div class="contents"><pre class="notranslate">ubuntu-device-flash -v touch --channel=ubuntu-touch/stable/bq-aquaris.en --recovery-image=ubuntu-touch-ordner/recovery-krillin.img --device=krillin </pre></div></div><p>
Als <code class="notranslate">device</code> muss hierbei der Codename des jeweiligen Gerätes eingesetzt werden, z.B. <code class="notranslate">krillin</code> für das bq Aquaris E4.5. Der Codename für das Meizu MX4 lautet <code class="notranslate">arale</code>.</p></div></div><div class="section_1"><h2 id="Datenrettung">Datenrettung<a class="headerlink" href="#Datenrettung">¶</a></h2><p>
Um eine Sicherung einer Imagedatei der Homepartition für die <a class="internal" href="../datenrettung.html#PhotoRec">Datenrettung</a> mit PhotoRec zu bekommen, kann man folgendermaßen vorgehen: Als einfache Voraussetzung ist beispielsweise der <a class="internal" href="../ubuntu_touch/terminal.html#USB-Kabel">Terminal-Zugang mittels ADB</a> sehr gut geeignet.</p><p>Wenn man die Systempartition bereits vor der Sicherung <a class="internal" href="../ubuntu_touch/terminal.html#Systempartition-beschreibbar-machen">beschreibbar gemacht</a> hat, sollte man nun in den <a class="crosslink" href="#Recovery-Mode">Recovery Modus</a> booten, da die zu sichernde Partition sich nicht verändern und ausgehängt sein sollte. Dabei muss man das <a class="crosslink" href="#Alternatives-Recovery">alternative Recovery</a> verwenden. Hat man dieses installiert, kann man es starten:</p><div class="bash"><div class="contents"><pre class="notranslate">adb reboot recovery </pre></div></div><p>
Im Recovery Modus wird man direkt mit <a class="internal" href="../sudo.html">Root</a>-Rechten angemeldet, im normalen Betrieb muss man sich die nötigen Rechte durch <a class="internal" href="../sudo.html">sudo</a> manuell beschaffen.</p><p>Beim bq Aquaris E4.5 befindet sich die Homepartition auf der siebten Partition <strong>mmcblk0p7</strong>. Die nun nötige Anmeldung an der ADB-Shell<sup><a href="#source-2">[2]</a></sup> im Recovery Modus ist nur möglich, wenn man über ADB den </p><div class="bash"><div class="contents"><pre class="notranslate">reboot recovery </pre></div></div><p>
eingeleitet hatte. Um anschließend diese Partition zu sichern, führt man im Terminal von Ubuntu folgendes aus, während sich das Ubuntu Touch Gerät mit USB-Kabel angeschlossen im Recovery Modus befindet:
</p><div class="bash"><div class="contents"><pre class="notranslate"> adb shell  'echo 'PASSWORT' | sudo -S dd if=/dev/block/mmcblk0p7 bs=4k conv=noerror,sync' &gt; ~/Dokumente/backup-touch-mmcblk0p7-home.iso </pre></div></div><p>
Das Leerzeichen vor dem Befehl sowie die zwei Leerzeichen nach <code class="notranslate">adb shell</code> sind gewollt, damit die Befehle mit Leerzeichen am Beginn starten. Diese spezielle <a class="internal" href="../bash.html">Bash</a>-Funktion verhindert, dass der Befehl und damit das in ihm enthaltene Passwort in der 
</p><div class="bash"><div class="contents"><pre class="notranslate">history  </pre></div></div><p>
auftaucht - weder in der vom aufrufenden PC noch in der vom Ubuntu Touch Gerät. Als PASSWORT muss das vom Handy eingesetzt werden (z.B. eine gesetzte PIN). Danach erfolgt ein gewöhnliches Klonen mittels <a class="internal" href="../dd.html">dd</a> in die Datei <strong>~/Dokumente/backup-touch-mmcblk0p7-home.iso</strong> im eigenen Homeverzeichnis des Ubuntu Gerätes. Die Sicherungsimagedatei wird also direkt vom Ubuntu Touch Gerät auf das Ubuntu Gerät geklont.</p><p>Falls es Probleme mit dem Zugang zu <code class="notranslate">adb</code> auch im <a class="crosslink" href="#Alternatives-Recovery">alternativen Recovery</a> gibt, muss der normale Modus verwendet, also das Gerät ganz normal gestartet werden. Im normalen Modus muss zudem <strong>/dev/block/mmcblk0p7</strong> durch  <strong>/dev/mmcblk0p7</strong> ersetzt werden, da sich dort die Bezeichnungen leicht unterscheiden.</p><p>Falls man den Recovery Modus betreten hatte und verlassen möchte, führt man danach 
</p><div class="bash"><div class="contents"><pre class="notranslate">adb reboot </pre></div></div><p>
in Ubuntu durch.</p><p>Nachdem man die Homepartition in die Datei <strong>~/Dokumente/backup-touch-mmcblk0p7-home.iso</strong> gesichert hat, kann man diese ganz normal mit <a class="internal" href="../datenrettung.html#PhotoRec">PhotoRec</a> aufrufen und nach verlorenen Dateien durchsuchen lassen. Dies ist allerdings nur erfolgversprechend, solange das Gerät möglichst sofort gesichert wurde, notfalls gleich im <a class="crosslink" href="#Normal-Mode">normalen Modus</a>, solange man nicht sicherstellt, wann die eigene Version von Ubuntu Phone einen <a class="internal" href="../ssd/trim.html">SSD/Trim</a> durchführt, welcher alle Daten unweigerlich löscht. Diese Voreinstellungen könnten schließlich von Gerät zu Gerät sowie wie von Version zu Version oder nach Aktualisierungen variieren.</p></div><div class="section_1"><h2 id="Links">Links<a class="headerlink" href="#Links">¶</a></h2><p>
</p><ul><li><p><a class="internal" href="../ubuntu_touch.html">Ubuntu Touch</a> <img alt="{Übersicht}" src="../_/021d71c30babf2ce4dd27339ba3c55995610945b.png"/> </p><ul><li><p><a class="internal" href="../ubuntu_touch/notfall.html">Erste Hilfe</a></p></li><li><p><a class="internal" href="../ubuntu_touch/emulator.html">Emulator</a> - riskantes besser im Emulator testen</p></li><li><p><a class="internal" href="../ubuntu_touch/launchpad.html">Probleme</a> - Lösungssuche</p></li><li><p><a class="internal" href="../ubuntu_touch/terminal.html">Terminal</a></p></li></ul></li></ul><p>
</p></div></div>
<p class="meta">
<a href="../ubuntu_touch/sicherung_und_wiederherstellung/a/revision/882173.html">Diese Revision</a> wurde am 26. März 2016 19:31 von <a href="https://ubuntuusers.de/user/Benno-007/">Benno-007</a> erstellt.
    
  </p>
</div>
</div>
<div style="clear: both;"></div>
<div class="pathbar breadcrumb">
<div class="breadcrumb">
<ol>
<li><a href="../startseite.html">Wiki</a></li>
<li><a href="../ubuntu_touch.html">Ubuntu Touch</a></li>
<li><a href="../ubuntu_touch/sicherung_und_wiederherstellung.html">Sicherung und Wiederherstellung</a></li>
</ol>
</div>
</div>
</div>
<div class="footer" style="clear: both;">
<ul>
<li class="poweredby"><li class="poweredby">Erstellt mit <a href="http://inyokaproject.org/">Inyoka</a></li></li>
<li class="license">

<img alt="Copyleft" src="../_/65dad5b770326dbbe1bd26ee6363e366a76bd8b7.png"/>
          2004 – 2017 ubuntuusers.de • Einige Rechte vorbehalten<br/>
<a href="../_lizenz.html" rel="cc:morePermissions">Lizenz</a> •
          <a href="http://ubuntuusers.de/kontakt/">Kontakt</a> •
          <a href="http://ubuntuusers.de/datenschutz/">Datenschutz</a> •
          <a href="http://ubuntuusers.de/impressum/">Impressum</a> •
          <a href="https://ubuntuusers.statuspage.io">Serverstatus</a>
</li>
<li class="housing">
<span title="Unterbringung und Netzanbindung eines Servers">Serverhousing</span> gespendet von<br/>
<img alt="noris network" src="../_/e7d27e9081eec23a8a5a5fe9434d7b2f1532e1d9.png"/>
<img alt="anexia" src="../_/ad1b63a3fc35749344af0a03e8c3ce05a2a3ee7e.png"/>
</li>
</ul>
</div>
<div style="clear: both;"></div>
</div>






</body>
</html>